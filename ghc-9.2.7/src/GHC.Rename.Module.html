<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies        #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns   #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-record-updates #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-comment">{-
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

Main pass of renamer
-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Rename.Module</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcDecls"><span class="hs-identifier">rnSrcDecls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#addTcgDUs"><span class="hs-identifier">addTcgDUs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#findSplice"><span class="hs-identifier">findSplice</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html"><span class="hs-identifier">GHC.Rename.Expr</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier">rnLExpr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html"><span class="hs-identifier">GHC.Rename.Splice</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnSpliceDecl"><span class="hs-identifier">rnSpliceDecl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnTopSpliceDecls"><span class="hs-identifier">rnTopSpliceDecls</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html"><span class="hs-identifier">GHC.Rename.HsType</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html"><span class="hs-identifier">GHC.Rename.Bind</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html"><span class="hs-identifier">GHC.Rename.Env</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier">HsDocContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier">mapFvRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier">bindLocalNames</span></a></span><span>
</span><span id="line-33"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupRdrNamesN"><span class="hs-identifier">checkDupRdrNamesN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier">bindLocalNamesFV</span></a></span><span>
</span><span id="line-34"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier">checkShadowedRdrNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedTypePatterns"><span class="hs-identifier">warnUnusedTypePatterns</span></a></span><span>
</span><span id="line-35"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrsRn"><span class="hs-identifier">newLocalBndrsRn</span></a></span><span>
</span><span id="line-36"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#withHsDocContext"><span class="hs-identifier">withHsDocContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#noNestedForallsContextsErr"><span class="hs-identifier">noNestedForallsContextsErr</span></a></span><span>
</span><span id="line-37"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier">addNoNestedForallsContextsErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier">checkInferredVars</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html"><span class="hs-identifier">GHC.Rename.Unbound</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier">mkUnboundName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier">notInScopeErr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Names.html"><span class="hs-identifier">GHC.Rename.Names</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Annotation.html"><span class="hs-identifier">GHC.Tc.Gen.Annotation</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Annotation.html#annCtxt"><span class="hs-identifier">annCtxt</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html"><span class="hs-identifier">GHC.Types.ForeignCall</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallTarget"><span class="hs-identifier">CCallTarget</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.html"><span class="hs-identifier">GHC.Unit</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html"><span class="hs-identifier">GHC.Unit.Module.Warnings</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#applicativeClassName"><span class="hs-identifier">applicativeClassName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#pureAName"><span class="hs-identifier">pureAName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#thenAName"><span class="hs-identifier">thenAName</span></a></span><span>
</span><span id="line-47"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#monadClassName"><span class="hs-identifier">monadClassName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier">returnMName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#thenMName"><span class="hs-identifier">thenMName</span></a></span><span>
</span><span id="line-48"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#semigroupClassName"><span class="hs-identifier">semigroupClassName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#sappendName"><span class="hs-identifier">sappendName</span></a></span><span>
</span><span id="line-49"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#monoidClassName"><span class="hs-identifier">monoidClassName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#mappendName"><span class="hs-identifier">mappendName</span></a></span><span>
</span><span id="line-50"></span><span>                        </span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html"><span class="hs-identifier">GHC.Types.Avail</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#pprRuleName"><span class="hs-identifier">pprRuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier">TypeOrKind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier">debugIsOn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#lengthExceeds"><span class="hs-identifier">lengthExceeds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#partitionWith"><span class="hs-identifier">partitionWith</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Env.html"><span class="hs-identifier">GHC.Driver.Env</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier">HscEnv</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Env.html#hsc_home_unit"><span class="hs-identifier">hsc_home_unit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#findDupsEq"><span class="hs-identifier">findDupsEq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier">removeDups</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#equivClasses"><span class="hs-identifier">equivClasses</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Graph.Directed.html"><span class="hs-identifier">GHC.Data.Graph.Directed</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Graph.html#SCC"><span class="hs-identifier">SCC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Graph.html#flattenSCC"><span class="hs-identifier">flattenSCC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Graph.html#flattenSCCs"><span class="hs-identifier">flattenSCCs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Graph.Directed.html#Node"><span class="hs-identifier">Node</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Graph.Directed.html#stronglyConnCompFromEdgedVerticesUniq"><span class="hs-identifier">stronglyConnCompFromEdgedVerticesUniq</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html"><span class="hs-identifier">GHC.Data.OrdList</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.2.7/src/GHC-LanguageExtensions.html#"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Arrow.html#"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Arrow.html#first"><span class="hs-identifier">first</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapAccumL"><span class="hs-identifier">mapAccumL</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier">isNothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#mapMaybe"><span class="hs-identifier">mapMaybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set.html#"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#difference"><span class="hs-identifier">difference</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#fromList"><span class="hs-identifier">fromList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#toList"><span class="hs-identifier">toList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#null"><span class="hs-identifier">null</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Function.html#"><span class="hs-identifier">Data.Function</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Function.html#on"><span class="hs-identifier">on</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-comment">{- | @rnSourceDecl@ &quot;renames&quot; declarations.
It simultaneously performs dependency analysis and precedence parsing.
It also does the following error checks:

* Checks that tyvars are used properly. This includes checking
  for undefined tyvars, and tyvars in contexts that are ambiguous.
  (Some of this checking has now been moved to module @TcMonoType@,
  since we don't have functional dependency information at this point.)

* Checks that all variable occurrences are defined.

* Checks the @(..)@ etc constraints in the export list.

Brings the binders of the group into scope in the appropriate places;
does NOT assume that anything is in scope already
-}</span><span>
</span><span id="line-96"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcDecls"><span class="hs-identifier hs-type">rnSrcDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- Rename a top-level HsGroup; used for normal source files *and* hs-boot files</span><span>
</span><span id="line-98"></span><span id="rnSrcDecls"><span class="annot"><span class="annottext">rnSrcDecls :: HsGroup GhcPs -&gt; RnM (TcGblEnv, HsGroup GhcRn)
</span><a href="GHC.Rename.Module.html#rnSrcDecls"><span class="hs-identifier hs-var hs-var">rnSrcDecls</span></a></span></span><span> </span><span id="local-6989586621681366111"><span class="annot"><span class="annottext">group :: HsGroup GhcPs
</span><a href="#local-6989586621681366111"><span class="hs-identifier hs-var">group</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_valds :: forall p. HsGroup p -&gt; HsValBinds p
</span><a href="Language.Haskell.Syntax.Decls.html#hs_valds"><span class="hs-identifier hs-var">hs_valds</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366108"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681366108"><span class="hs-identifier hs-var">val_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>                            </span><span class="annot"><span class="annottext">hs_splcds :: forall p. HsGroup p -&gt; [LSpliceDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_splcds"><span class="hs-identifier hs-var">hs_splcds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366106"><span class="annot"><span class="annottext">[LSpliceDecl GhcPs]
</span><a href="#local-6989586621681366106"><span class="hs-identifier hs-var">splice_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>                            </span><span class="annot"><span class="annottext">hs_tyclds :: forall p. HsGroup p -&gt; [TyClGroup p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366104"><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681366104"><span class="hs-identifier hs-var">tycl_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>                            </span><span class="annot"><span class="annottext">hs_derivds :: forall p. HsGroup p -&gt; [LDerivDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_derivds"><span class="hs-identifier hs-var">hs_derivds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366102"><span class="annot"><span class="annottext">[LDerivDecl GhcPs]
</span><a href="#local-6989586621681366102"><span class="hs-identifier hs-var">deriv_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>                            </span><span class="annot"><span class="annottext">hs_fixds :: forall p. HsGroup p -&gt; [LFixitySig p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fixds"><span class="hs-identifier hs-var">hs_fixds</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366100"><span class="annot"><span class="annottext">[LFixitySig GhcPs]
</span><a href="#local-6989586621681366100"><span class="hs-identifier hs-var">fix_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>                            </span><span class="annot"><span class="annottext">hs_warnds :: forall p. HsGroup p -&gt; [LWarnDecls p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_warnds"><span class="hs-identifier hs-var">hs_warnds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366098"><span class="annot"><span class="annottext">[LWarnDecls GhcPs]
</span><a href="#local-6989586621681366098"><span class="hs-identifier hs-var">warn_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>                            </span><span class="annot"><span class="annottext">hs_annds :: forall p. HsGroup p -&gt; [LAnnDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_annds"><span class="hs-identifier hs-var">hs_annds</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366096"><span class="annot"><span class="annottext">[LAnnDecl GhcPs]
</span><a href="#local-6989586621681366096"><span class="hs-identifier hs-var">ann_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>                            </span><span class="annot"><span class="annottext">hs_fords :: forall p. HsGroup p -&gt; [LForeignDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fords"><span class="hs-identifier hs-var">hs_fords</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366094"><span class="annot"><span class="annottext">[LForeignDecl GhcPs]
</span><a href="#local-6989586621681366094"><span class="hs-identifier hs-var">foreign_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>                            </span><span class="annot"><span class="annottext">hs_defds :: forall p. HsGroup p -&gt; [LDefaultDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_defds"><span class="hs-identifier hs-var">hs_defds</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366092"><span class="annot"><span class="annottext">[LDefaultDecl GhcPs]
</span><a href="#local-6989586621681366092"><span class="hs-identifier hs-var">default_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>                            </span><span class="annot"><span class="annottext">hs_ruleds :: forall p. HsGroup p -&gt; [LRuleDecls p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_ruleds"><span class="hs-identifier hs-var">hs_ruleds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366090"><span class="annot"><span class="annottext">[LRuleDecls GhcPs]
</span><a href="#local-6989586621681366090"><span class="hs-identifier hs-var">rule_decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>                            </span><span class="annot"><span class="annottext">hs_docs :: forall p. HsGroup p -&gt; [LDocDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_docs"><span class="hs-identifier hs-var">hs_docs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681366088"><span class="annot"><span class="annottext">[LDocDecl GhcPs]
</span><a href="#local-6989586621681366088"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-110"></span><span>   </span><span class="hs-comment">-- (A) Process the top-level fixity declarations, creating a mapping from</span><span>
</span><span id="line-111"></span><span>   </span><span class="hs-comment">--     FastStrings to FixItems. Also checks for duplicates.</span><span>
</span><span id="line-112"></span><span>   </span><span class="hs-comment">--     See Note [Top-level fixity signatures in an HsGroup] in GHC.Hs.Decls</span><span>
</span><span id="line-113"></span><span>   </span><span id="local-6989586621681366087"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681366087"><span class="hs-identifier hs-var">local_fix_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LFixitySig GhcPs] -&gt; RnM MiniFixityEnv
</span><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier hs-var">makeMiniFixityEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). HsGroup (GhcPass p) -&gt; [LFixitySig (GhcPass p)]
</span><a href="GHC.Hs.Decls.html#hsGroupTopLevelFixitySigs"><span class="hs-identifier hs-var">hsGroupTopLevelFixitySigs</span></a></span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681366111"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span>   </span><span class="hs-comment">-- (B) Bring top level binders (and their fixities) into scope,</span><span>
</span><span id="line-116"></span><span>   </span><span class="hs-comment">--     *except* for the value bindings, which get done in step (D)</span><span>
</span><span id="line-117"></span><span>   </span><span class="hs-comment">--     with collectHsIdBinders. However *do* include</span><span>
</span><span id="line-118"></span><span>   </span><span class="hs-comment">--</span><span>
</span><span id="line-119"></span><span>   </span><span class="hs-comment">--        * Class ops, data constructors, and record fields,</span><span>
</span><span id="line-120"></span><span>   </span><span class="hs-comment">--          because they do not have value declarations.</span><span>
</span><span id="line-121"></span><span>   </span><span class="hs-comment">--</span><span>
</span><span id="line-122"></span><span>   </span><span class="hs-comment">--        * For hs-boot files, include the value signatures</span><span>
</span><span id="line-123"></span><span>   </span><span class="hs-comment">--          Again, they have no value declarations</span><span>
</span><span id="line-124"></span><span>   </span><span class="hs-comment">--</span><span>
</span><span id="line-125"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366084"><span class="annot"><span class="annottext">(TcGblEnv, TcLclEnv)
</span><a href="#local-6989586621681366084"><span class="hs-identifier hs-var">tc_envs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681366083"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366083"><span class="hs-identifier hs-var">tc_bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
-&gt; HsGroup GhcPs -&gt; RnM ((TcGblEnv, TcLclEnv), FreeVars)
</span><a href="GHC.Rename.Names.html#getLocalNonValBinders"><span class="hs-identifier hs-var">getLocalNonValBinders</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681366087"><span class="hs-identifier hs-var">local_fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681366111"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span>   </span><span class="annot"><span class="annottext">forall gbl' lcl' a gbl lcl.
(gbl', lcl') -&gt; TcRnIf gbl' lcl' a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setEnvs"><span class="hs-identifier hs-var">setEnvs</span></a></span><span> </span><span class="annot"><span class="annottext">(TcGblEnv, TcLclEnv)
</span><a href="#local-6989586621681366084"><span class="hs-identifier hs-var">tc_envs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span>   </span><span class="annot"><span class="annottext">TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#failIfErrsM"><span class="hs-identifier hs-var">failIfErrsM</span></a></span><span> </span><span class="hs-special">;</span><span> </span><span class="hs-comment">-- No point in continuing if (say) we have duplicate declarations</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span>   </span><span class="hs-comment">-- (D1) Bring pattern synonyms into scope.</span><span>
</span><span id="line-133"></span><span>   </span><span class="hs-comment">--      Need to do this before (D2) because rnTopBindsLHS</span><span>
</span><span id="line-134"></span><span>   </span><span class="hs-comment">--      looks up those pattern synonyms (#9889)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>   </span><span id="local-6989586621681366079"><span class="annot"><span class="annottext">DuplicateRecordFields
</span><a href="#local-6989586621681366079"><span class="hs-identifier hs-var">dup_fields_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; DuplicateRecordFields
</span><a href="GHC.Driver.Session.html#xopt_DuplicateRecordFields"><span class="hs-identifier hs-var">xopt_DuplicateRecordFields</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-137"></span><span>   </span><span id="local-6989586621681366075"><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621681366075"><span class="hs-identifier hs-var">has_sel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; FieldSelectors
</span><a href="GHC.Driver.Session.html#xopt_FieldSelectors"><span class="hs-identifier hs-var">xopt_FieldSelectors</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-138"></span><span>   </span><span class="annot"><span class="annottext">forall a.
DuplicateRecordFields
-&gt; FieldSelectors
-&gt; HsValBinds GhcPs
-&gt; MiniFixityEnv
-&gt; ([Name] -&gt; TcRnIf TcGblEnv TcLclEnv a)
-&gt; TcRnIf TcGblEnv TcLclEnv a
</span><a href="GHC.Rename.Module.html#extendPatSynEnv"><span class="hs-identifier hs-var">extendPatSynEnv</span></a></span><span> </span><span class="annot"><span class="annottext">DuplicateRecordFields
</span><a href="#local-6989586621681366079"><span class="hs-identifier hs-var">dup_fields_ok</span></a></span><span> </span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621681366075"><span class="hs-identifier hs-var">has_sel</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681366108"><span class="hs-identifier hs-var">val_decls</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681366087"><span class="hs-identifier hs-var">local_fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681366072"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681366072"><span class="hs-identifier hs-var">pat_syn_bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>   </span><span class="hs-comment">-- (D2) Rename the left-hand sides of the value bindings.</span><span>
</span><span id="line-141"></span><span>   </span><span class="hs-comment">--     This depends on everything from (B) being in scope.</span><span>
</span><span id="line-142"></span><span>   </span><span class="hs-comment">--     It uses the fixity env from (A) to bind fixities for view patterns.</span><span>
</span><span id="line-143"></span><span>   </span><span id="local-6989586621681366071"><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681366071"><span class="hs-identifier hs-var">new_lhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnTopBindsLHS"><span class="hs-identifier hs-var">rnTopBindsLHS</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681366087"><span class="hs-identifier hs-var">local_fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681366108"><span class="hs-identifier hs-var">val_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>   </span><span class="hs-comment">-- Bind the LHSes (and their fixities) in the global rdr environment</span><span>
</span><span id="line-146"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681366069"><span class="annot"><span class="annottext">id_bndrs :: [IdP GhcRn]
</span><a href="#local-6989586621681366069"><span class="hs-identifier hs-var hs-var">id_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass).
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; HsValBindsLR (GhcPass idL) (GhcPass idR) -&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectHsIdBinders"><span class="hs-identifier hs-var">collectHsIdBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681366071"><span class="hs-identifier hs-var">new_lhs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-147"></span><span>                    </span><span class="hs-comment">-- Excludes pattern-synonym binders</span><span>
</span><span id="line-148"></span><span>                    </span><span class="hs-comment">-- They are already in scope</span><span>
</span><span id="line-149"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnSrcDecls&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681366069"><span class="hs-identifier hs-var">id_bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-150"></span><span>   </span><span id="local-6989586621681366064"><span class="annot"><span class="annottext">(TcGblEnv, TcLclEnv)
</span><a href="#local-6989586621681366064"><span class="hs-identifier hs-var">tc_envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[AvailInfo] -&gt; MiniFixityEnv -&gt; RnM (TcGblEnv, TcLclEnv)
</span><a href="GHC.Rename.Names.html#extendGlobalRdrEnvRn"><span class="hs-identifier hs-var">extendGlobalRdrEnvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#avail"><span class="hs-identifier hs-var">avail</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681366069"><span class="hs-identifier hs-var">id_bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681366087"><span class="hs-identifier hs-var">local_fix_env</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-151"></span><span>   </span><span class="annot"><span class="annottext">forall gbl' lcl' a gbl lcl.
(gbl', lcl') -&gt; TcRnIf gbl' lcl' a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setEnvs"><span class="hs-identifier hs-var">setEnvs</span></a></span><span> </span><span class="annot"><span class="annottext">(TcGblEnv, TcLclEnv)
</span><a href="#local-6989586621681366064"><span class="hs-identifier hs-var">tc_envs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>   </span><span class="hs-comment">--  Now everything is in scope, as the remaining renaming assumes.</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>   </span><span class="hs-comment">-- (E) Rename type and class decls</span><span>
</span><span id="line-156"></span><span>   </span><span class="hs-comment">--     (note that value LHSes need to be in scope for default methods)</span><span>
</span><span id="line-157"></span><span>   </span><span class="hs-comment">--</span><span>
</span><span id="line-158"></span><span>   </span><span class="hs-comment">-- You might think that we could build proper def/use information</span><span>
</span><span id="line-159"></span><span>   </span><span class="hs-comment">-- for type and class declarations, but they can be involved</span><span>
</span><span id="line-160"></span><span>   </span><span class="hs-comment">-- in mutual recursion across modules, and we only do the SCC</span><span>
</span><span id="line-161"></span><span>   </span><span class="hs-comment">-- analysis for them in the type checker.</span><span>
</span><span id="line-162"></span><span>   </span><span class="hs-comment">-- So we content ourselves with gathering uses only; that</span><span>
</span><span id="line-163"></span><span>   </span><span class="hs-comment">-- means we'll only report a declaration as unused if it isn't</span><span>
</span><span id="line-164"></span><span>   </span><span class="hs-comment">-- mentioned at all.  Ah well.</span><span>
</span><span id="line-165"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Start rnTyClDecls&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681366104"><span class="hs-identifier hs-var">tycl_decls</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-166"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366061"><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681366061"><span class="hs-identifier hs-var">rn_tycl_decls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681366060"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366060"><span class="hs-identifier hs-var">src_fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs] -&gt; RnM ([TyClGroup GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyClDecls"><span class="hs-identifier hs-var">rnTyClDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681366104"><span class="hs-identifier hs-var">tycl_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>   </span><span class="hs-comment">-- (F) Rename Value declarations right-hand sides</span><span>
</span><span id="line-169"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Start rnmono&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-170"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681366057"><span class="annot"><span class="annottext">val_bndr_set :: FreeVars
</span><a href="#local-6989586621681366057"><span class="hs-identifier hs-var hs-var">val_bndr_set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681366069"><span class="hs-identifier hs-var">id_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681366072"><span class="hs-identifier hs-var">pat_syn_bndrs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-171"></span><span>   </span><span id="local-6989586621681366054"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681366054"><span class="hs-identifier hs-var">is_boot</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn Bool
</span><a href="GHC.Tc.Utils.Monad.html#tcIsHsBootOrSig"><span class="hs-identifier hs-var">tcIsHsBootOrSig</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-172"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366052"><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621681366052"><span class="hs-identifier hs-var">rn_val_decls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681366051"><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681366051"><span class="hs-identifier hs-var">bind_dus</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681366054"><span class="hs-identifier hs-var">is_boot</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-comment">-- For an hs-boot, use tc_bndrs (which collects how we're renamed</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-comment">-- signatures), since val_bndr_set is empty (there are no x = ...</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- bindings in an hs-boot.)</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FreeVars
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnTopBindsBoot"><span class="hs-identifier hs-var">rnTopBindsBoot</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366083"><span class="hs-identifier hs-var">tc_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681366071"><span class="hs-identifier hs-var">new_lhs</span></a></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnValBindsRHS"><span class="hs-identifier hs-var">rnValBindsRHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-var">TopSigCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366057"><span class="hs-identifier hs-var">val_bndr_set</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681366071"><span class="hs-identifier hs-var">new_lhs</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-178"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;finish rnmono&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621681366052"><span class="hs-identifier hs-var">rn_val_decls</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>   </span><span class="hs-comment">-- (G) Rename Fixity and deprecations</span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>   </span><span class="hs-comment">-- Rename fixity declarations and error if we try to</span><span>
</span><span id="line-183"></span><span>   </span><span class="hs-comment">-- fix something from another module (duplicates were checked in (A))</span><span>
</span><span id="line-184"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681366047"><span class="annot"><span class="annottext">all_bndrs :: FreeVars
</span><a href="#local-6989586621681366047"><span class="hs-identifier hs-var hs-var">all_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366083"><span class="hs-identifier hs-var">tc_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366057"><span class="hs-identifier hs-var">val_bndr_set</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-185"></span><span>   </span><span id="local-6989586621681366046"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcRn)]
</span><a href="#local-6989586621681366046"><span class="hs-identifier hs-var">rn_fix_decls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigCtxt -&gt; FixitySig GhcPs -&gt; RnM (FixitySig GhcRn)
</span><a href="GHC.Rename.Bind.html#rnSrcFixityDecl"><span class="hs-identifier hs-var">rnSrcFixityDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-var">TopSigCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366047"><span class="hs-identifier hs-var">all_bndrs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>                        </span><span class="annot"><span class="annottext">[LFixitySig GhcPs]
</span><a href="#local-6989586621681366100"><span class="hs-identifier hs-var">fix_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>   </span><span class="hs-comment">-- Rename deprec decls;</span><span>
</span><span id="line-189"></span><span>   </span><span class="hs-comment">-- check for duplicates and ensure that deprecated things are defined locally</span><span>
</span><span id="line-190"></span><span>   </span><span class="hs-comment">-- at the moment, we don't keep these around past renaming</span><span>
</span><span id="line-191"></span><span>   </span><span id="local-6989586621681366043"><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621681366043"><span class="hs-identifier hs-var">rn_warns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [LWarnDecls GhcPs] -&gt; RnM Warnings
</span><a href="GHC.Rename.Module.html#rnSrcWarnDecls"><span class="hs-identifier hs-var">rnSrcWarnDecls</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366047"><span class="hs-identifier hs-var">all_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LWarnDecls GhcPs]
</span><a href="#local-6989586621681366098"><span class="hs-identifier hs-var">warn_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>   </span><span class="hs-comment">-- (H) Rename Everything else</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366041"><span class="annot"><span class="annottext">[LocatedA (RuleDecls GhcRn)]
</span><a href="#local-6989586621681366041"><span class="hs-identifier hs-var">rn_rule_decls</span></a></span></span><span class="hs-special">,</span><span>    </span><span id="local-6989586621681366040"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366040"><span class="hs-identifier hs-var">src_fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl a. Extension -&gt; TcRnIf gbl lcl a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setXOptM"><span class="hs-identifier hs-var">setXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ScopedTypeVariables</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-196"></span><span>                                   </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">RuleDecls GhcPs -&gt; RnM (RuleDecls GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnHsRuleDecls"><span class="hs-identifier hs-var">rnHsRuleDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleDecls GhcPs]
</span><a href="#local-6989586621681366090"><span class="hs-identifier hs-var">rule_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-197"></span><span>                           </span><span class="hs-comment">-- Inside RULES, scoped type variables are on</span><span>
</span><span id="line-198"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366035"><span class="annot"><span class="annottext">[LocatedA (ForeignDecl GhcRn)]
</span><a href="#local-6989586621681366035"><span class="hs-identifier hs-var">rn_foreign_decls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681366034"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366034"><span class="hs-identifier hs-var">src_fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcPs -&gt; RnM (ForeignDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnHsForeignDecl"><span class="hs-identifier hs-var">rnHsForeignDecl</span></a></span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcPs]
</span><a href="#local-6989586621681366094"><span class="hs-identifier hs-var">foreign_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-199"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366032"><span class="annot"><span class="annottext">[LocatedA (AnnDecl GhcRn)]
</span><a href="#local-6989586621681366032"><span class="hs-identifier hs-var">rn_ann_decls</span></a></span></span><span class="hs-special">,</span><span>     </span><span id="local-6989586621681366031"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366031"><span class="hs-identifier hs-var">src_fvs4</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">AnnDecl GhcPs -&gt; RnM (AnnDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnAnnDecl"><span class="hs-identifier hs-var">rnAnnDecl</span></a></span><span>       </span><span class="annot"><span class="annottext">[LAnnDecl GhcPs]
</span><a href="#local-6989586621681366096"><span class="hs-identifier hs-var">ann_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-200"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366029"><span class="annot"><span class="annottext">[LocatedA (DefaultDecl GhcRn)]
</span><a href="#local-6989586621681366029"><span class="hs-identifier hs-var">rn_default_decls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681366028"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366028"><span class="hs-identifier hs-var">src_fvs5</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultDecl GhcPs -&gt; RnM (DefaultDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDefaultDecl"><span class="hs-identifier hs-var">rnDefaultDecl</span></a></span><span>   </span><span class="annot"><span class="annottext">[LDefaultDecl GhcPs]
</span><a href="#local-6989586621681366092"><span class="hs-identifier hs-var">default_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-201"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366026"><span class="annot"><span class="annottext">[LocatedA (DerivDecl GhcRn)]
</span><a href="#local-6989586621681366026"><span class="hs-identifier hs-var">rn_deriv_decls</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621681366025"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366025"><span class="hs-identifier hs-var">src_fvs6</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">DerivDecl GhcPs -&gt; RnM (DerivDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnSrcDerivDecl"><span class="hs-identifier hs-var">rnSrcDerivDecl</span></a></span><span>  </span><span class="annot"><span class="annottext">[LDerivDecl GhcPs]
</span><a href="#local-6989586621681366102"><span class="hs-identifier hs-var">deriv_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-202"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681366023"><span class="annot"><span class="annottext">[LocatedA (SpliceDecl GhcRn)]
</span><a href="#local-6989586621681366023"><span class="hs-identifier hs-var">rn_splice_decls</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681366022"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366022"><span class="hs-identifier hs-var">src_fvs7</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">SpliceDecl GhcPs -&gt; RnM (SpliceDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Splice.html#rnSpliceDecl"><span class="hs-identifier hs-var">rnSpliceDecl</span></a></span><span>    </span><span class="annot"><span class="annottext">[LSpliceDecl GhcPs]
</span><a href="#local-6989586621681366106"><span class="hs-identifier hs-var">splice_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span>   </span><span id="local-6989586621681366021"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366021"><span class="hs-identifier hs-var">last_tcg_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl gbl
</span><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-205"></span><span>   </span><span class="hs-comment">-- (I) Compute the results and return</span><span>
</span><span id="line-206"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span id="local-6989586621681366019"><span class="annot"><span class="annottext">rn_group :: HsGroup GhcRn
</span><a href="#local-6989586621681366019"><span class="hs-identifier hs-var hs-var">rn_group</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_ext :: XCHsGroup GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#hs_ext"><span class="hs-identifier hs-var">hs_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-207"></span><span>                             </span><span class="annot"><span class="annottext">hs_valds :: HsValBinds GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#hs_valds"><span class="hs-identifier hs-var">hs_valds</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621681366052"><span class="hs-identifier hs-var">rn_val_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-208"></span><span>                             </span><span class="annot"><span class="annottext">hs_splcds :: [LSpliceDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_splcds"><span class="hs-identifier hs-var">hs_splcds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (SpliceDecl GhcRn)]
</span><a href="#local-6989586621681366023"><span class="hs-identifier hs-var">rn_splice_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-209"></span><span>                             </span><span class="annot"><span class="annottext">hs_tyclds :: [TyClGroup GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681366061"><span class="hs-identifier hs-var">rn_tycl_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-210"></span><span>                             </span><span class="annot"><span class="annottext">hs_derivds :: [LDerivDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_derivds"><span class="hs-identifier hs-var">hs_derivds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (DerivDecl GhcRn)]
</span><a href="#local-6989586621681366026"><span class="hs-identifier hs-var">rn_deriv_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-211"></span><span>                             </span><span class="annot"><span class="annottext">hs_fixds :: [LFixitySig GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fixds"><span class="hs-identifier hs-var">hs_fixds</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcRn)]
</span><a href="#local-6989586621681366046"><span class="hs-identifier hs-var">rn_fix_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-212"></span><span>                             </span><span class="annot"><span class="annottext">hs_warnds :: [LWarnDecls GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_warnds"><span class="hs-identifier hs-var">hs_warnds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- warns are returned in the tcg_env</span><span>
</span><span id="line-213"></span><span>                                             </span><span class="hs-comment">-- (see below) not in the HsGroup</span><span>
</span><span id="line-214"></span><span>                             </span><span class="annot"><span class="annottext">hs_fords :: [LForeignDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fords"><span class="hs-identifier hs-var">hs_fords</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (ForeignDecl GhcRn)]
</span><a href="#local-6989586621681366035"><span class="hs-identifier hs-var">rn_foreign_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-215"></span><span>                             </span><span class="annot"><span class="annottext">hs_annds :: [LAnnDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_annds"><span class="hs-identifier hs-var">hs_annds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (AnnDecl GhcRn)]
</span><a href="#local-6989586621681366032"><span class="hs-identifier hs-var">rn_ann_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-216"></span><span>                             </span><span class="annot"><span class="annottext">hs_defds :: [LDefaultDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_defds"><span class="hs-identifier hs-var">hs_defds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (DefaultDecl GhcRn)]
</span><a href="#local-6989586621681366029"><span class="hs-identifier hs-var">rn_default_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-217"></span><span>                             </span><span class="annot"><span class="annottext">hs_ruleds :: [LRuleDecls GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_ruleds"><span class="hs-identifier hs-var">hs_ruleds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (RuleDecls GhcRn)]
</span><a href="#local-6989586621681366041"><span class="hs-identifier hs-var">rn_rule_decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-218"></span><span>                             </span><span class="annot"><span class="annottext">hs_docs :: [LDocDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_docs"><span class="hs-identifier hs-var">hs_docs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LDocDecl GhcPs]
</span><a href="#local-6989586621681366088"><span class="hs-identifier hs-var">docs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621681366016"><span class="annot"><span class="annottext">tcf_bndrs :: [Name]
</span><a href="#local-6989586621681366016"><span class="hs-identifier hs-var hs-var">tcf_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcRn] -&gt; [LForeignDecl GhcRn] -&gt; [Name]
</span><a href="GHC.Hs.Utils.html#hsTyClForeignBinders"><span class="hs-identifier hs-var">hsTyClForeignBinders</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681366061"><span class="hs-identifier hs-var">rn_tycl_decls</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ForeignDecl GhcRn)]
</span><a href="#local-6989586621681366035"><span class="hs-identifier hs-var">rn_foreign_decls</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-221"></span><span>        </span><span id="local-6989586621681366014"><span class="annot"><span class="annottext">other_def :: (Maybe FreeVars, FreeVars)
</span><a href="#local-6989586621681366014"><span class="hs-identifier hs-var hs-var">other_def</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681366016"><span class="hs-identifier hs-var">tcf_bndrs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-222"></span><span>        </span><span id="local-6989586621681366012"><span class="annot"><span class="annottext">other_fvs :: FreeVars
</span><a href="#local-6989586621681366012"><span class="hs-identifier hs-var hs-var">other_fvs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366060"><span class="hs-identifier hs-var">src_fvs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366040"><span class="hs-identifier hs-var">src_fvs2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366034"><span class="hs-identifier hs-var">src_fvs3</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366031"><span class="hs-identifier hs-var">src_fvs4</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-223"></span><span>                              </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366028"><span class="hs-identifier hs-var">src_fvs5</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366025"><span class="hs-identifier hs-var">src_fvs6</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366022"><span class="hs-identifier hs-var">src_fvs7</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-224"></span><span>                </span><span class="hs-comment">-- It is tiresome to gather the binders from type and class decls</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>        </span><span id="local-6989586621681366010"><span class="annot"><span class="annottext">src_dus :: DefUses
</span><a href="#local-6989586621681366010"><span class="hs-identifier hs-var hs-var">src_dus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe FreeVars, FreeVars)
</span><a href="#local-6989586621681366014"><span class="hs-identifier hs-var">other_def</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; DefUses -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#plusDU"><span class="hs-operator hs-var">`plusDU`</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681366051"><span class="hs-identifier hs-var">bind_dus</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; DefUses -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#plusDU"><span class="hs-operator hs-var">`plusDU`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#usesOnly"><span class="hs-identifier hs-var">usesOnly</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681366012"><span class="hs-identifier hs-var">other_fvs</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-227"></span><span>                </span><span class="hs-comment">-- Instance decls may have occurrences of things bound in bind_dus</span><span>
</span><span id="line-228"></span><span>                </span><span class="hs-comment">-- so we must put other_fvs last</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span>        </span><span id="local-6989586621681366006"><span class="annot"><span class="annottext">final_tcg_env :: TcGblEnv
</span><a href="#local-6989586621681366006"><span class="hs-identifier hs-var hs-var">final_tcg_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681366005"><span class="annot"><span class="annottext">tcg_env' :: TcGblEnv
</span><a href="#local-6989586621681366005"><span class="hs-identifier hs-var hs-var">tcg_env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366021"><span class="hs-identifier hs-var">last_tcg_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcGblEnv -&gt; DefUses -&gt; TcGblEnv
</span><a href="GHC.Rename.Module.html#addTcgDUs"><span class="hs-operator hs-var">`addTcgDUs`</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681366010"><span class="hs-identifier hs-var">src_dus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>                        </span><span class="hs-keyword">in</span><span> </span><span class="hs-comment">-- we return the deprecs in the env, not in the HsGroup above</span><span>
</span><span id="line-232"></span><span>                        </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366005"><span class="hs-identifier hs-var">tcg_env'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcg_warns :: Warnings
</span><a href="GHC.Tc.Types.html#tcg_warns"><span class="hs-identifier hs-var">tcg_warns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcGblEnv -&gt; Warnings
</span><a href="GHC.Tc.Types.html#tcg_warns"><span class="hs-identifier hs-var">tcg_warns</span></a></span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366005"><span class="hs-identifier hs-var">tcg_env'</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings -&gt; Warnings -&gt; Warnings
</span><a href="GHC.Unit.Module.Warnings.html#plusWarns"><span class="hs-operator hs-var">`plusWarns`</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621681366043"><span class="hs-identifier hs-var">rn_warns</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">;</span><span>
</span><span id="line-233"></span><span>       </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-234"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;finish rnSrc&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsGroup GhcRn
</span><a href="#local-6989586621681366019"><span class="hs-identifier hs-var">rn_group</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-235"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;finish Dus&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681366010"><span class="hs-identifier hs-var">src_dus</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-236"></span><span>   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366006"><span class="hs-identifier hs-var">final_tcg_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcRn
</span><a href="#local-6989586621681366019"><span class="hs-identifier hs-var">rn_group</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>                    </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="annot"><a href="GHC.Rename.Module.html#addTcgDUs"><span class="hs-identifier hs-type">addTcgDUs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#DefUses"><span class="hs-identifier hs-type">DefUses</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span>
</span><span id="line-240"></span><span class="hs-comment">-- This function could be defined lower down in the module hierarchy,</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- but there doesn't seem anywhere very logical to put it.</span><span>
</span><span id="line-242"></span><span id="addTcgDUs"><span class="annot"><span class="annottext">addTcgDUs :: TcGblEnv -&gt; DefUses -&gt; TcGblEnv
</span><a href="GHC.Rename.Module.html#addTcgDUs"><span class="hs-identifier hs-var hs-var">addTcgDUs</span></a></span></span><span> </span><span id="local-6989586621681366002"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366002"><span class="hs-identifier hs-var">tcg_env</span></a></span></span><span> </span><span id="local-6989586621681366001"><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681366001"><span class="hs-identifier hs-var">dus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366002"><span class="hs-identifier hs-var">tcg_env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcg_dus :: DefUses
</span><a href="GHC.Tc.Types.html#tcg_dus"><span class="hs-identifier hs-var">tcg_dus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcGblEnv -&gt; DefUses
</span><a href="GHC.Tc.Types.html#tcg_dus"><span class="hs-identifier hs-var">tcg_dus</span></a></span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681366002"><span class="hs-identifier hs-var">tcg_env</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; DefUses -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#plusDU"><span class="hs-operator hs-var">`plusDU`</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681366001"><span class="hs-identifier hs-var">dus</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span id="local-6989586621681367232"><span id="local-6989586621681367233"><span class="annot"><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-type">rnList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367233"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367232"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681367233"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681367232"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-245"></span><span id="rnList"><span class="annot"><span class="annottext">rnList :: forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var hs-var">rnList</span></a></span></span><span> </span><span id="local-6989586621681365999"><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621681365999"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681365998"><span class="annot"><span class="annottext">[LocatedA a]
</span><a href="#local-6989586621681365998"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621681365999"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA a]
</span><a href="#local-6989586621681365998"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-comment">{-
*********************************************************
*                                                       *
        Source-code deprecations declarations
*                                                       *
*********************************************************

Check that the deprecated names are defined, are defined locally, and
that there are no duplicate deprecations.

It's only imported deprecations, dealt with in RnIfaces, that we
gather them together.
-}</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- checks that the deprecations are defined locally, and that there are no duplicates</span><span>
</span><span id="line-262"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcWarnDecls"><span class="hs-identifier hs-type">rnSrcWarnDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LWarnDecls"><span class="hs-identifier hs-type">LWarnDecls</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span>
</span><span id="line-263"></span><span id="rnSrcWarnDecls"><span class="annot"><span class="annottext">rnSrcWarnDecls :: FreeVars -&gt; [LWarnDecls GhcPs] -&gt; RnM Warnings
</span><a href="GHC.Rename.Module.html#rnSrcWarnDecls"><span class="hs-identifier hs-var hs-var">rnSrcWarnDecls</span></a></span></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Unit.Module.Warnings.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcWarnDecls"><span class="hs-identifier hs-var">rnSrcWarnDecls</span></a></span><span> </span><span id="local-6989586621681365994"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365994"><span class="hs-identifier hs-var">bndr_set</span></a></span></span><span> </span><span id="local-6989586621681365993"><span class="annot"><span class="annottext">[LWarnDecls GhcPs]
</span><a href="#local-6989586621681365993"><span class="hs-identifier hs-var">decls'</span></a></span></span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- check for duplicates</span><span>
</span><span id="line-268"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365991"><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnN RdrName)
</span><a href="#local-6989586621681365991"><span class="hs-identifier hs-var">dups</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365989"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681365989"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365988"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681365988"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365987"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365987"><span class="hs-identifier hs-var">lrdr'</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnN RdrName)
</span><a href="#local-6989586621681365991"><span class="hs-identifier hs-var">dups</span></a></span><span>
</span><span id="line-269"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681365989"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName -&gt; SDoc
</span><a href="GHC.Rename.Module.html#dupWarnDecl"><span class="hs-identifier hs-var">dupWarnDecl</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365987"><span class="hs-identifier hs-var">lrdr'</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681365988"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>               </span><span class="annot"><span class="annottext">[NonEmpty (GenLocated SrcSpanAnnN RdrName)]
</span><a href="#local-6989586621681365983"><span class="hs-identifier hs-var">warn_rdr_dups</span></a></span><span>
</span><span id="line-271"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365982"><span class="annot"><span class="annottext">[[(OccName, WarningTxt)]]
</span><a href="#local-6989586621681365982"><span class="hs-identifier hs-var">pairs_s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b) -&gt; GenLocated (SrcSpanAnn' ann) a -&gt; TcM b
</span><a href="GHC.Tc.Utils.Monad.html#addLocMA"><span class="hs-identifier hs-var">addLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">WarnDecl GhcPs
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [(OccName, WarningTxt)]
</span><a href="#local-6989586621681365980"><span class="hs-identifier hs-var">rn_deprec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (WarnDecl GhcPs)]
</span><a href="#local-6989586621681365979"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-272"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(OccName, WarningTxt)] -&gt; Warnings
</span><a href="GHC.Unit.Module.Warnings.html#WarnSome"><span class="hs-identifier hs-var">WarnSome</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[(OccName, WarningTxt)]]
</span><a href="#local-6989586621681365982"><span class="hs-identifier hs-var">pairs_s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-273"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-274"></span><span>   </span><span id="local-6989586621681365979"><span class="annot"><span class="annottext">decls :: [GenLocated SrcSpanAnnA (WarnDecl GhcPs)]
</span><a href="#local-6989586621681365979"><span class="hs-identifier hs-var hs-var">decls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. WarnDecls pass -&gt; [LWarnDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#wd_warnings"><span class="hs-identifier hs-var">wd_warnings</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LWarnDecls GhcPs]
</span><a href="#local-6989586621681365993"><span class="hs-identifier hs-var">decls'</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span>   </span><span id="local-6989586621681365972"><span class="annot"><span class="annottext">sig_ctxt :: HsSigCtxt
</span><a href="#local-6989586621681365972"><span class="hs-identifier hs-var hs-var">sig_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-var">TopSigCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365994"><span class="hs-identifier hs-var">bndr_set</span></a></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span>   </span><span id="local-6989586621681365980"><span class="annot"><span class="annottext">rn_deprec :: WarnDecl GhcPs
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [(OccName, WarningTxt)]
</span><a href="#local-6989586621681365980"><span class="hs-identifier hs-var hs-var">rn_deprec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#Warning"><span class="hs-identifier hs-type">Warning</span></a></span><span> </span><span class="annot"><span class="annottext">XWarning GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365970"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681365970"><span class="hs-identifier hs-var">rdr_names</span></a></span></span><span> </span><span id="local-6989586621681365969"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621681365969"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>       </span><span class="hs-comment">-- ensures that the names are defined locally</span><span>
</span><span id="line-280"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365968"><span class="annot"><span class="annottext">[(RdrName, Name)]
</span><a href="#local-6989586621681365968"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m [b]) -&gt; [a] -&gt; m [b]
</span><a href="GHC.Utils.Monad.html#concatMapM"><span class="hs-identifier hs-var">concatMapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; SDoc
-&gt; RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [(RdrName, Name)]
</span><a href="GHC.Rename.Env.html#lookupLocalTcNames"><span class="hs-identifier hs-var">lookupLocalTcNames</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621681365972"><span class="hs-identifier hs-var">sig_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365965"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>                                </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681365970"><span class="hs-identifier hs-var">rdr_names</span></a></span><span>
</span><span id="line-282"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681365963"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621681365969"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365963"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681365963"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(RdrName, Name)]
</span><a href="#local-6989586621681365968"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>   </span><span id="local-6989586621681365965"><span class="annot"><span class="annottext">what :: SDoc
</span><a href="#local-6989586621681365965"><span class="hs-identifier hs-var hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;deprecation&quot;</span></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span>   </span><span id="local-6989586621681365983"><span class="annot"><span class="annottext">warn_rdr_dups :: [NonEmpty (GenLocated SrcSpanAnnN RdrName)]
</span><a href="#local-6989586621681365983"><span class="hs-identifier hs-var hs-var">warn_rdr_dups</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
-&gt; [NonEmpty (GenLocated SrcSpanAnnN RdrName)]
</span><a href="GHC.Rename.Module.html#findDupRdrNames"><span class="hs-identifier hs-var">findDupRdrNames</span></a></span><span>
</span><span id="line-287"></span><span>                   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#Warning"><span class="hs-identifier hs-type">Warning</span></a></span><span> </span><span class="annot"><span class="annottext">XWarning GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365960"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681365960"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681365960"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (WarnDecl GhcPs)]
</span><a href="#local-6989586621681365979"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="annot"><a href="GHC.Rename.Module.html#findDupRdrNames"><span class="hs-identifier hs-type">findDupRdrNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-290"></span><span id="findDupRdrNames"><span class="annot"><span class="annottext">findDupRdrNames :: [GenLocated SrcSpanAnnN RdrName]
-&gt; [NonEmpty (GenLocated SrcSpanAnnN RdrName)]
</span><a href="GHC.Rename.Module.html#findDupRdrNames"><span class="hs-identifier hs-var hs-var">findDupRdrNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [NonEmpty a]
</span><a href="GHC.Data.List.SetOps.html#findDupsEq"><span class="hs-identifier hs-var">findDupsEq</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365959"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365959"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365958"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365958"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365959"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365958"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- look for duplicates among the OccNames;</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- we check that the names are defined above</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- invt: the lists returned by findDupsEq always have at least two elements</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="annot"><a href="GHC.Rename.Module.html#dupWarnDecl"><span class="hs-identifier hs-type">dupWarnDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-297"></span><span class="hs-comment">-- Located RdrName -&gt; DeprecDecl RdrName -&gt; SDoc</span><span>
</span><span id="line-298"></span><span id="dupWarnDecl"><span class="annot"><span class="annottext">dupWarnDecl :: GenLocated SrcSpanAnnN RdrName -&gt; RdrName -&gt; SDoc
</span><a href="GHC.Rename.Module.html#dupWarnDecl"><span class="hs-identifier hs-var hs-var">dupWarnDecl</span></a></span></span><span> </span><span id="local-6989586621681365957"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365957"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621681365956"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681365956"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Multiple warning declarations for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681365956"><span class="hs-identifier hs-var">rdr_name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-300"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;also at &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365957"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Annotation declarations}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="annot"><a href="GHC.Rename.Module.html#rnAnnDecl"><span class="hs-identifier hs-type">rnAnnDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#AnnDecl"><span class="hs-identifier hs-type">AnnDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#AnnDecl"><span class="hs-identifier hs-type">AnnDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span id="rnAnnDecl"><span class="annot"><span class="annottext">rnAnnDecl :: AnnDecl GhcPs -&gt; RnM (AnnDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnAnnDecl"><span class="hs-identifier hs-var hs-var">rnAnnDecl</span></a></span></span><span> </span><span id="local-6989586621681365951"><span class="annot"><span class="annottext">ann :: AnnDecl GhcPs
</span><a href="#local-6989586621681365951"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsAnnotation"><span class="hs-identifier hs-type">HsAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">XHsAnnotation GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365949"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681365949"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681365948"><span class="annot"><span class="annottext">AnnProvenance GhcPs
</span><a href="#local-6989586621681365948"><span class="hs-identifier hs-var">provenance</span></a></span></span><span> </span><span id="local-6989586621681365947"><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs)
</span><a href="#local-6989586621681365947"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#addErrCtxt"><span class="hs-identifier hs-var">addErrCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
OutputableBndrId p =&gt;
AnnDecl (GhcPass p) -&gt; SDoc
</span><a href="GHC.Tc.Gen.Annotation.html#annCtxt"><span class="hs-identifier hs-var">annCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">AnnDecl GhcPs
</span><a href="#local-6989586621681365951"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365945"><span class="annot"><span class="annottext">AnnProvenance GhcRn
</span><a href="#local-6989586621681365945"><span class="hs-identifier hs-var">provenance'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365944"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365944"><span class="hs-identifier hs-var">provenance_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AnnProvenance GhcPs -&gt; RnM (AnnProvenance GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnAnnProvenance"><span class="hs-identifier hs-var">rnAnnProvenance</span></a></span><span> </span><span class="annot"><span class="annottext">AnnProvenance GhcPs
</span><a href="#local-6989586621681365948"><span class="hs-identifier hs-var">provenance</span></a></span><span>
</span><span id="line-314"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365942"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365942"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365941"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365941"><span class="hs-identifier hs-var">expr_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. ThStage -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#setStage"><span class="hs-identifier hs-var">setStage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpliceType -&gt; ThStage
</span><a href="GHC.Tc.Types.html#Splice"><span class="hs-identifier hs-var">Splice</span></a></span><span> </span><span class="annot"><span class="annottext">SpliceType
</span><a href="GHC.Tc.Types.html#Untyped"><span class="hs-identifier hs-var">Untyped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-315"></span><span>                              </span><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs) -&gt; TcRn (LHsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs)
</span><a href="#local-6989586621681365947"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-316"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XHsAnnotation pass
-&gt; SourceText
-&gt; AnnProvenance pass
-&gt; XRec pass (HsExpr pass)
-&gt; AnnDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#HsAnnotation"><span class="hs-identifier hs-var">HsAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681365949"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">AnnProvenance GhcRn
</span><a href="#local-6989586621681365945"><span class="hs-identifier hs-var">provenance'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365942"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-317"></span><span>                 </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365944"><span class="hs-identifier hs-var">provenance_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365941"><span class="hs-identifier hs-var">expr_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="annot"><a href="GHC.Rename.Module.html#rnAnnProvenance"><span class="hs-identifier hs-type">rnAnnProvenance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#AnnProvenance"><span class="hs-identifier hs-type">AnnProvenance</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-320"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#AnnProvenance"><span class="hs-identifier hs-type">AnnProvenance</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span id="rnAnnProvenance"><span class="annot"><span class="annottext">rnAnnProvenance :: AnnProvenance GhcPs -&gt; RnM (AnnProvenance GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnAnnProvenance"><span class="hs-identifier hs-var hs-var">rnAnnProvenance</span></a></span></span><span> </span><span id="local-6989586621681365935"><span class="annot"><span class="annottext">AnnProvenance GhcPs
</span><a href="#local-6989586621681365935"><span class="hs-identifier hs-var">provenance</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621681365934"><span class="annot"><span class="annottext">AnnProvenance GhcRn
</span><a href="#local-6989586621681365934"><span class="hs-identifier hs-var">provenance'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AnnProvenance GhcPs
</span><a href="#local-6989586621681365935"><span class="hs-identifier hs-var">provenance</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-323"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ValueAnnProvenance"><span class="hs-identifier hs-type">ValueAnnProvenance</span></a></span><span> </span><span id="local-6989586621681365932"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365932"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall pass. LIdP pass -&gt; AnnProvenance pass
</span><a href="Language.Haskell.Syntax.Decls.html#ValueAnnProvenance"><span class="hs-identifier hs-var">ValueAnnProvenance</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365932"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-324"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TypeAnnProvenance"><span class="hs-identifier hs-type">TypeAnnProvenance</span></a></span><span> </span><span id="local-6989586621681365929"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365929"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall pass. LIdP pass -&gt; AnnProvenance pass
</span><a href="Language.Haskell.Syntax.Decls.html#TypeAnnProvenance"><span class="hs-identifier hs-var">TypeAnnProvenance</span></a></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365929"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-325"></span><span>      </span><span class="annot"><span class="annottext">AnnProvenance GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#ModuleAnnProvenance"><span class="hs-identifier hs-var">ModuleAnnProvenance</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall pass. AnnProvenance pass
</span><a href="Language.Haskell.Syntax.Decls.html#ModuleAnnProvenance"><span class="hs-identifier hs-var">ModuleAnnProvenance</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnProvenance GhcRn
</span><a href="#local-6989586621681365934"><span class="hs-identifier hs-var">provenance'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. UnXRec p =&gt; AnnProvenance p -&gt; Maybe (IdP p)
</span><a href="Language.Haskell.Syntax.Decls.html#annProvenanceName_maybe"><span class="hs-identifier hs-var">annProvenanceName_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">AnnProvenance GhcRn
</span><a href="#local-6989586621681365934"><span class="hs-identifier hs-var">provenance'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Default declarations}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="annot"><a href="GHC.Rename.Module.html#rnDefaultDecl"><span class="hs-identifier hs-type">rnDefaultDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DefaultDecl"><span class="hs-identifier hs-type">DefaultDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DefaultDecl"><span class="hs-identifier hs-type">DefaultDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span id="rnDefaultDecl"><span class="annot"><span class="annottext">rnDefaultDecl :: DefaultDecl GhcPs -&gt; RnM (DefaultDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDefaultDecl"><span class="hs-identifier hs-var hs-var">rnDefaultDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DefaultDecl"><span class="hs-identifier hs-type">DefaultDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XCDefaultDecl GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365922"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621681365922"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365921"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcRn)]
</span><a href="#local-6989586621681365921"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365920"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365920"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; [LHsType GhcPs] -&gt; RnM ([LHsType GhcRn], FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTypes"><span class="hs-identifier hs-var">rnLHsTypes</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365918"><span class="hs-identifier hs-var">doc_str</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621681365922"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-339"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XCDefaultDecl pass -&gt; [LHsType pass] -&gt; DefaultDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DefaultDecl"><span class="hs-identifier hs-var">DefaultDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcRn)]
</span><a href="#local-6989586621681365921"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365920"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621681365918"><span class="annot"><span class="annottext">doc_str :: HsDocContext
</span><a href="#local-6989586621681365918"><span class="hs-identifier hs-var hs-var">doc_str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Rename.Utils.html#DefaultDeclCtx"><span class="hs-identifier hs-var">DefaultDeclCtx</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Foreign declarations}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="annot"><a href="GHC.Rename.Module.html#rnHsForeignDecl"><span class="hs-identifier hs-type">rnHsForeignDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span id="rnHsForeignDecl"><span class="annot"><span class="annottext">rnHsForeignDecl :: ForeignDecl GhcPs -&gt; RnM (ForeignDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnHsForeignDecl"><span class="hs-identifier hs-var hs-var">rnHsForeignDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignImport"><span class="hs-identifier hs-type">ForeignImport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: forall pass. ForeignDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365914"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365914"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: forall pass. ForeignDecl pass -&gt; LHsSigType pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365912"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365912"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fi :: forall pass. ForeignDecl pass -&gt; ForeignImport
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fi"><span class="hs-identifier hs-var">fd_fi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365910"><span class="annot"><span class="annottext">ForeignImport
</span><a href="#local-6989586621681365910"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365909"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681365909"><span class="hs-identifier hs-var">topEnv</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Env.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-354"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365907"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365907"><span class="hs-identifier hs-var">name'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365914"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-355"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365906"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365906"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365905"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365905"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#ForeignDeclCtx"><span class="hs-identifier hs-var">ForeignDeclCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365914"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365912"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span>        </span><span class="hs-comment">-- Mark any PackageTarget style imports as coming from the current package</span><span>
</span><span id="line-358"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365901"><span class="annot"><span class="annottext">home_unit :: HomeUnit
</span><a href="#local-6989586621681365901"><span class="hs-identifier hs-var hs-var">home_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomeUnit
</span><a href="GHC.Driver.Env.html#hsc_home_unit"><span class="hs-identifier hs-var">hsc_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681365909"><span class="hs-identifier hs-var">topEnv</span></a></span><span>
</span><span id="line-359"></span><span>             </span><span id="local-6989586621681365900"><span class="annot"><span class="annottext">spec' :: ForeignImport
</span><a href="#local-6989586621681365900"><span class="hs-identifier hs-var hs-var">spec'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unit -&gt; ForeignImport -&gt; ForeignImport
</span><a href="GHC.Rename.Module.html#patchForeignImport"><span class="hs-identifier hs-var">patchForeignImport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; Unit
</span><a href="GHC.Unit.Home.html#homeUnitAsUnit"><span class="hs-identifier hs-var">homeUnitAsUnit</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681365901"><span class="hs-identifier hs-var">home_unit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForeignImport
</span><a href="#local-6989586621681365910"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignImport"><span class="hs-identifier hs-type">ForeignImport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_i_ext :: XForeignImport GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fd_i_ext"><span class="hs-identifier hs-var">fd_i_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-362"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_name :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365907"><span class="hs-identifier hs-var">name'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: LHsSigType GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365906"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-363"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fi :: ForeignImport
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fi"><span class="hs-identifier hs-var">fd_fi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignImport
</span><a href="#local-6989586621681365900"><span class="hs-identifier hs-var">spec'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365905"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="annot"><a href="GHC.Rename.Module.html#rnHsForeignDecl"><span class="hs-identifier hs-var">rnHsForeignDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: forall pass. ForeignDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365895"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365895"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: forall pass. ForeignDecl pass -&gt; LHsSigType pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365894"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365894"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: forall pass. ForeignDecl pass -&gt; ForeignExport
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365892"><span class="annot"><span class="annottext">ForeignExport
</span><a href="#local-6989586621681365892"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365891"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365891"><span class="hs-identifier hs-var">name'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall ann.
GenLocated (SrcSpanAnn' ann) RdrName
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedOccRn"><span class="hs-identifier hs-var">lookupLocatedOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365895"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-367"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365889"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365889"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365888"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365888"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#ForeignDeclCtx"><span class="hs-identifier hs-var">ForeignDeclCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365895"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365894"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-368"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: XForeignExport GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-369"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_name :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365891"><span class="hs-identifier hs-var">name'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: LHsSigType GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365889"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-370"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: ForeignExport
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignExport
</span><a href="#local-6989586621681365892"><span class="hs-identifier hs-var">spec</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-371"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365888"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365891"><span class="hs-identifier hs-var">name'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-372"></span><span>        </span><span class="hs-comment">-- NB: a foreign export is an *occurrence site* for name, so</span><span>
</span><span id="line-373"></span><span>        </span><span class="hs-comment">--     we add it to the free-variable list.  It might, for example,</span><span>
</span><span id="line-374"></span><span>        </span><span class="hs-comment">--     be imported from another module</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-comment">-- | For Windows DLLs we need to know what packages imported symbols are from</span><span>
</span><span id="line-377"></span><span class="hs-comment">--      to generate correct calls. Imported symbols are tagged with the current</span><span>
</span><span id="line-378"></span><span class="hs-comment">--      package, so if they get inlined across a package boundary we'll still</span><span>
</span><span id="line-379"></span><span class="hs-comment">--      know where they're from.</span><span>
</span><span id="line-380"></span><span class="hs-comment">--</span><span>
</span><span id="line-381"></span><span class="annot"><a href="GHC.Rename.Module.html#patchForeignImport"><span class="hs-identifier hs-type">patchForeignImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignImport"><span class="hs-identifier hs-type">ForeignImport</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignImport"><span class="hs-identifier hs-type">ForeignImport</span></a></span><span>
</span><span id="line-382"></span><span id="patchForeignImport"><span class="annot"><span class="annottext">patchForeignImport :: Unit -&gt; ForeignImport -&gt; ForeignImport
</span><a href="GHC.Rename.Module.html#patchForeignImport"><span class="hs-identifier hs-var hs-var">patchForeignImport</span></a></span></span><span> </span><span id="local-6989586621681365885"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681365885"><span class="hs-keyword hs-var">unit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#CImport"><span class="hs-identifier hs-type">CImport</span></a></span><span> </span><span id="local-6989586621681365883"><span class="annot"><span class="annottext">Located CCallConv
</span><a href="#local-6989586621681365883"><span class="hs-identifier hs-var">cconv</span></a></span></span><span> </span><span id="local-6989586621681365882"><span class="annot"><span class="annottext">Located Safety
</span><a href="#local-6989586621681365882"><span class="hs-identifier hs-var">safety</span></a></span></span><span> </span><span id="local-6989586621681365881"><span class="annot"><span class="annottext">Maybe Header
</span><a href="#local-6989586621681365881"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621681365880"><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621681365880"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span id="local-6989586621681365879"><span class="annot"><span class="annottext">Located SourceText
</span><a href="#local-6989586621681365879"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located CCallConv
-&gt; Located Safety
-&gt; Maybe Header
-&gt; CImportSpec
-&gt; Located SourceText
-&gt; ForeignImport
</span><a href="Language.Haskell.Syntax.Decls.html#CImport"><span class="hs-identifier hs-var">CImport</span></a></span><span> </span><span class="annot"><span class="annottext">Located CCallConv
</span><a href="#local-6989586621681365883"><span class="hs-identifier hs-var">cconv</span></a></span><span> </span><span class="annot"><span class="annottext">Located Safety
</span><a href="#local-6989586621681365882"><span class="hs-identifier hs-var">safety</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Header
</span><a href="#local-6989586621681365881"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unit -&gt; CImportSpec -&gt; CImportSpec
</span><a href="GHC.Rename.Module.html#patchCImportSpec"><span class="hs-identifier hs-var">patchCImportSpec</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681365885"><span class="hs-keyword hs-var">unit</span></a></span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621681365880"><span class="hs-identifier hs-var">spec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Located SourceText
</span><a href="#local-6989586621681365879"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="GHC.Rename.Module.html#patchCImportSpec"><span class="hs-identifier hs-type">patchCImportSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#CImportSpec"><span class="hs-identifier hs-type">CImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#CImportSpec"><span class="hs-identifier hs-type">CImportSpec</span></a></span><span>
</span><span id="line-386"></span><span id="patchCImportSpec"><span class="annot"><span class="annottext">patchCImportSpec :: Unit -&gt; CImportSpec -&gt; CImportSpec
</span><a href="GHC.Rename.Module.html#patchCImportSpec"><span class="hs-identifier hs-var hs-var">patchCImportSpec</span></a></span></span><span> </span><span id="local-6989586621681365877"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681365877"><span class="hs-keyword hs-var">unit</span></a></span></span><span> </span><span id="local-6989586621681365876"><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621681365876"><span class="hs-identifier hs-var">spec</span></a></span></span><span>
</span><span id="line-387"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621681365876"><span class="hs-identifier hs-var">spec</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-388"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#CFunction"><span class="hs-identifier hs-type">CFunction</span></a></span><span> </span><span id="local-6989586621681365874"><span class="annot"><span class="annottext">CCallTarget
</span><a href="#local-6989586621681365874"><span class="hs-identifier hs-var">callTarget</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CCallTarget -&gt; CImportSpec
</span><a href="Language.Haskell.Syntax.Decls.html#CFunction"><span class="hs-identifier hs-var">CFunction</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Unit -&gt; CCallTarget -&gt; CCallTarget
</span><a href="GHC.Rename.Module.html#patchCCallTarget"><span class="hs-identifier hs-var">patchCCallTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681365877"><span class="hs-keyword hs-var">unit</span></a></span><span> </span><span class="annot"><span class="annottext">CCallTarget
</span><a href="#local-6989586621681365874"><span class="hs-identifier hs-var">callTarget</span></a></span><span>
</span><span id="line-389"></span><span>        </span><span class="annot"><span class="annottext">CImportSpec
</span><span class="hs-identifier">_</span></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621681365876"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><a href="GHC.Rename.Module.html#patchCCallTarget"><span class="hs-identifier hs-type">patchCCallTarget</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallTarget"><span class="hs-identifier hs-type">CCallTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallTarget"><span class="hs-identifier hs-type">CCallTarget</span></a></span><span>
</span><span id="line-392"></span><span id="patchCCallTarget"><span class="annot"><span class="annottext">patchCCallTarget :: Unit -&gt; CCallTarget -&gt; CCallTarget
</span><a href="GHC.Rename.Module.html#patchCCallTarget"><span class="hs-identifier hs-var hs-var">patchCCallTarget</span></a></span></span><span> </span><span id="local-6989586621681365872"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681365872"><span class="hs-keyword hs-var">unit</span></a></span></span><span> </span><span id="local-6989586621681365871"><span class="annot"><span class="annottext">CCallTarget
</span><a href="#local-6989586621681365871"><span class="hs-identifier hs-var">callTarget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CCallTarget
</span><a href="#local-6989586621681365871"><span class="hs-identifier hs-var">callTarget</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-394"></span><span>  </span><span class="annot"><a href="GHC.Types.ForeignCall.html#StaticTarget"><span class="hs-identifier hs-type">StaticTarget</span></a></span><span> </span><span id="local-6989586621681365869"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681365869"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681365868"><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365868"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Unit
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span id="local-6989586621681365867"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365867"><span class="hs-identifier hs-var">isFun</span></a></span></span><span>
</span><span id="line-395"></span><span>                              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SourceText -&gt; CLabelString -&gt; Maybe Unit -&gt; Bool -&gt; CCallTarget
</span><a href="GHC.Types.ForeignCall.html#StaticTarget"><span class="hs-identifier hs-var">StaticTarget</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681365869"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365868"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681365872"><span class="hs-keyword hs-var">unit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365867"><span class="hs-identifier hs-var">isFun</span></a></span><span>
</span><span id="line-396"></span><span>  </span><span class="annot"><span class="annottext">CCallTarget
</span><span class="hs-identifier">_</span></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CCallTarget
</span><a href="#local-6989586621681365871"><span class="hs-identifier hs-var">callTarget</span></a></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Instance declarations}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcInstDecl"><span class="hs-identifier hs-type">rnSrcInstDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InstDecl"><span class="hs-identifier hs-type">InstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InstDecl"><span class="hs-identifier hs-type">InstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span id="rnSrcInstDecl"><span class="annot"><span class="annottext">rnSrcInstDecl :: InstDecl GhcPs -&gt; RnM (InstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnSrcInstDecl"><span class="hs-identifier hs-var hs-var">rnSrcInstDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstD"><span class="hs-identifier hs-type">TyFamInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tfid_inst :: forall pass. InstDecl pass -&gt; TyFamInstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_inst"><span class="hs-identifier hs-var">tfid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365863"><span class="annot"><span class="annottext">TyFamInstDecl GhcPs
</span><a href="#local-6989586621681365863"><span class="hs-identifier hs-var">tfi</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365862"><span class="annot"><span class="annottext">TyFamInstDecl GhcRn
</span><a href="#local-6989586621681365862"><span class="hs-identifier hs-var">tfi'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365861"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365861"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; TyFamInstDecl GhcPs -&gt; RnM (TyFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstDecl"><span class="hs-identifier hs-var">rnTyFamInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClosedTyFamInfo -&gt; AssocTyFamInfo
</span><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-var">NonAssocTyFamEqn</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTyFamInfo
</span><a href="GHC.Rename.Module.html#NotClosedTyFam"><span class="hs-identifier hs-var">NotClosedTyFam</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyFamInstDecl GhcPs
</span><a href="#local-6989586621681365863"><span class="hs-identifier hs-var">tfi</span></a></span><span>
</span><span id="line-409"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstD"><span class="hs-identifier hs-type">TyFamInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tfid_ext :: XTyFamInstD GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_ext"><span class="hs-identifier hs-var">tfid_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tfid_inst :: TyFamInstDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_inst"><span class="hs-identifier hs-var">tfid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyFamInstDecl GhcRn
</span><a href="#local-6989586621681365862"><span class="hs-identifier hs-var">tfi'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365861"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcInstDecl"><span class="hs-identifier hs-var">rnSrcInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstD"><span class="hs-identifier hs-type">DataFamInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dfid_inst :: forall pass. InstDecl pass -&gt; DataFamInstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_inst"><span class="hs-identifier hs-var">dfid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365854"><span class="annot"><span class="annottext">DataFamInstDecl GhcPs
</span><a href="#local-6989586621681365854"><span class="hs-identifier hs-var">dfi</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365853"><span class="annot"><span class="annottext">DataFamInstDecl GhcRn
</span><a href="#local-6989586621681365853"><span class="hs-identifier hs-var">dfi'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365852"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365852"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; DataFamInstDecl GhcPs -&gt; RnM (DataFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDataFamInstDecl"><span class="hs-identifier hs-var">rnDataFamInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClosedTyFamInfo -&gt; AssocTyFamInfo
</span><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-var">NonAssocTyFamEqn</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTyFamInfo
</span><a href="GHC.Rename.Module.html#NotClosedTyFam"><span class="hs-identifier hs-var">NotClosedTyFam</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DataFamInstDecl GhcPs
</span><a href="#local-6989586621681365854"><span class="hs-identifier hs-var">dfi</span></a></span><span>
</span><span id="line-413"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstD"><span class="hs-identifier hs-type">DataFamInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dfid_ext :: XDataFamInstD GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_ext"><span class="hs-identifier hs-var">dfid_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dfid_inst :: DataFamInstDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_inst"><span class="hs-identifier hs-var">dfid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataFamInstDecl GhcRn
</span><a href="#local-6989586621681365853"><span class="hs-identifier hs-var">dfi'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365852"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcInstDecl"><span class="hs-identifier hs-var">rnSrcInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClsInstD"><span class="hs-identifier hs-type">ClsInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cid_inst :: forall pass. InstDecl pass -&gt; ClsInstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#cid_inst"><span class="hs-identifier hs-var">cid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365847"><span class="annot"><span class="annottext">ClsInstDecl GhcPs
</span><a href="#local-6989586621681365847"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnSrcIstDecl {&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInstDecl GhcPs
</span><a href="#local-6989586621681365847"><span class="hs-identifier hs-var">cid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365846"><span class="annot"><span class="annottext">ClsInstDecl GhcRn
</span><a href="#local-6989586621681365846"><span class="hs-identifier hs-var">cid'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365845"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365845"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ClsInstDecl GhcPs -&gt; RnM (ClsInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnClsInstDecl"><span class="hs-identifier hs-var">rnClsInstDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInstDecl GhcPs
</span><a href="#local-6989586621681365847"><span class="hs-identifier hs-var">cid</span></a></span><span>
</span><span id="line-418"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnSrcIstDecl end }&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-419"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClsInstD"><span class="hs-identifier hs-type">ClsInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cid_d_ext :: XClsInstD GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#cid_d_ext"><span class="hs-identifier hs-var">cid_d_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_inst :: ClsInstDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#cid_inst"><span class="hs-identifier hs-var">cid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClsInstDecl GhcRn
</span><a href="#local-6989586621681365846"><span class="hs-identifier hs-var">cid'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365845"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-comment">-- | Warn about non-canonical typeclass instance declarations</span><span>
</span><span id="line-422"></span><span class="hs-comment">--</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- A &quot;non-canonical&quot; instance definition can occur for instances of a</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- class which redundantly defines an operation its superclass</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- provides as well (c.f. `return`/`pure`). In such cases, a canonical</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- instance is one where the subclass inherits its method</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- implementation from its superclass instance (usually the subclass</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- has a default method implementation to that effect). Consequently,</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- a non-canonical instance occurs when this is not the case.</span><span>
</span><span id="line-430"></span><span class="hs-comment">--</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- See also descriptions of 'checkCanonicalMonadInstances' and</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- 'checkCanonicalMonoidInstances'</span><span>
</span><span id="line-433"></span><span class="annot"><a href="GHC.Rename.Module.html#checkCanonicalInstances"><span class="hs-identifier hs-type">checkCanonicalInstances</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span id="checkCanonicalInstances"><span class="annot"><span class="annottext">checkCanonicalInstances :: Name -&gt; LHsSigType GhcRn -&gt; LHsBinds GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#checkCanonicalInstances"><span class="hs-identifier hs-var hs-var">checkCanonicalInstances</span></a></span></span><span> </span><span id="local-6989586621681365841"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365841"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365840"><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621681365840"><span class="hs-identifier hs-var">poly_ty</span></a></span></span><span> </span><span id="local-6989586621681365839"><span class="annot"><span class="annottext">LHsBinds GhcRn
</span><a href="#local-6989586621681365839"><span class="hs-identifier hs-var">mbinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-435"></span><span>    </span><span class="annot"><span class="annottext">forall gbl lcl.
WarningFlag -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#whenWOptM"><span class="hs-identifier hs-var">whenWOptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonadInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonadInstances</span></a></span><span>
</span><span id="line-436"></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TcRn ()
</span><a href="#local-6989586621681365836"><span class="hs-identifier hs-var">checkCanonicalMonadInstances</span></a></span><span>
</span><span id="line-437"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/monad-of-no-return&quot;</span></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span>    </span><span class="annot"><span class="annottext">forall gbl lcl.
WarningFlag -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#whenWOptM"><span class="hs-identifier hs-var">whenWOptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonoidInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonoidInstances</span></a></span><span>
</span><span id="line-440"></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TcRn ()
</span><a href="#local-6989586621681365834"><span class="hs-identifier hs-var">checkCanonicalMonoidInstances</span></a></span><span>
</span><span id="line-441"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/semigroup-monoid&quot;</span></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-comment">-- | Warn about unsound/non-canonical 'Applicative'/'Monad' instance</span><span>
</span><span id="line-445"></span><span>    </span><span class="hs-comment">-- declarations. Specifically, the following conditions are verified:</span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-comment">-- In 'Monad' instances declarations:</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-comment">--  * If 'return' is overridden it must be canonical (i.e. @return = pure@)</span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-comment">--  * If '(&gt;&gt;)' is overridden it must be canonical (i.e. @(&gt;&gt;) = (*&gt;)@)</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">-- In 'Applicative' instance declarations:</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">--  * Warn if 'pure' is defined backwards (i.e. @pure = return@).</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-comment">--  * Warn if '(*&gt;)' is defined backwards (i.e. @(*&gt;) = (&gt;&gt;)@).</span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621681365836"><span class="annot"><span class="annottext">checkCanonicalMonadInstances :: String -&gt; TcRn ()
</span><a href="#local-6989586621681365836"><span class="hs-identifier hs-var hs-var">checkCanonicalMonadInstances</span></a></span></span><span> </span><span id="local-6989586621681365833"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365833"><span class="hs-identifier hs-var">refURL</span></a></span></span><span>
</span><span id="line-458"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365841"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#applicativeClassName"><span class="hs-identifier hs-var">applicativeClassName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-459"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcRn
</span><a href="#local-6989586621681365839"><span class="hs-identifier hs-var">mbinds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365830"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365830"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365829"><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365829"><span class="hs-identifier hs-var">mbind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365830"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-460"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365829"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-461"></span><span>                  </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365825"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365825"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-462"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365823"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365823"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-463"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365825"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#pureAName"><span class="hs-identifier hs-var">pureAName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365823"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-464"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365821"><span class="hs-identifier hs-var">addWarnNonCanonicalMethod1</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365833"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-465"></span><span>                            </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonadInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonadInstances</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pure&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;return&quot;</span></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365825"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#thenAName"><span class="hs-identifier hs-var">thenAName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365823"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#thenMName"><span class="hs-identifier hs-var">thenMName</span></a></span><span>
</span><span id="line-468"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365821"><span class="hs-identifier hs-var">addWarnNonCanonicalMethod1</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365833"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-469"></span><span>                            </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonadInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonadInstances</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(*&gt;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&gt;&gt;)&quot;</span></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>                  </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365841"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#monadClassName"><span class="hs-identifier hs-var">monadClassName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-474"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcRn
</span><a href="#local-6989586621681365839"><span class="hs-identifier hs-var">mbinds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365820"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365820"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365819"><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365819"><span class="hs-identifier hs-var">mbind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365820"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-475"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365819"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-476"></span><span>                  </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365818"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365818"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-477"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365817"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365817"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-478"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365818"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365817"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#pureAName"><span class="hs-identifier hs-var">pureAName</span></a></span><span>
</span><span id="line-479"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365815"><span class="hs-identifier hs-var">addWarnNonCanonicalMethod2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365833"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-480"></span><span>                            </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonadInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonadInstances</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;return&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pure&quot;</span></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365818"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#thenMName"><span class="hs-identifier hs-var">thenMName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365817"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#thenAName"><span class="hs-identifier hs-var">thenAName</span></a></span><span>
</span><span id="line-483"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365815"><span class="hs-identifier hs-var">addWarnNonCanonicalMethod2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365833"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-484"></span><span>                            </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonadInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonadInstances</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&gt;&gt;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(*&gt;)&quot;</span></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>                  </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span>    </span><span class="hs-comment">-- | Check whether Monoid(mappend) is defined in terms of</span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-comment">-- Semigroup((&lt;&gt;)) (and not the other way round). Specifically,</span><span>
</span><span id="line-492"></span><span>    </span><span class="hs-comment">-- the following conditions are verified:</span><span>
</span><span id="line-493"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-comment">-- In 'Monoid' instances declarations:</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-comment">--  * If 'mappend' is overridden it must be canonical</span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-comment">--    (i.e. @mappend = (&lt;&gt;)@)</span><span>
</span><span id="line-498"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-comment">-- In 'Semigroup' instance declarations:</span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-comment">--  * Warn if '(&lt;&gt;)' is defined backwards (i.e. @(&lt;&gt;) = mappend@).</span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-503"></span><span>    </span><span id="local-6989586621681365834"><span class="annot"><span class="annottext">checkCanonicalMonoidInstances :: String -&gt; TcRn ()
</span><a href="#local-6989586621681365834"><span class="hs-identifier hs-var hs-var">checkCanonicalMonoidInstances</span></a></span></span><span> </span><span id="local-6989586621681365814"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365814"><span class="hs-identifier hs-var">refURL</span></a></span></span><span>
</span><span id="line-504"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365841"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#semigroupClassName"><span class="hs-identifier hs-var">semigroupClassName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-505"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcRn
</span><a href="#local-6989586621681365839"><span class="hs-identifier hs-var">mbinds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365813"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365813"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365812"><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365812"><span class="hs-identifier hs-var">mbind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365813"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-506"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365812"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-507"></span><span>                  </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365811"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365811"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-508"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365810"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365810"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-509"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365811"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#sappendName"><span class="hs-identifier hs-var">sappendName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365810"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#mappendName"><span class="hs-identifier hs-var">mappendName</span></a></span><span>
</span><span id="line-510"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365821"><span class="hs-identifier hs-var">addWarnNonCanonicalMethod1</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365814"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-511"></span><span>                            </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonoidInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonoidInstances</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&lt;&gt;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mappend&quot;</span></span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span>                  </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365841"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#monoidClassName"><span class="hs-identifier hs-var">monoidClassName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-516"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcRn
</span><a href="#local-6989586621681365839"><span class="hs-identifier hs-var">mbinds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365809"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365809"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365808"><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365808"><span class="hs-identifier hs-var">mbind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365809"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-517"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621681365808"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-518"></span><span>                  </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365807"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365807"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-519"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365806"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365806"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-520"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365807"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#mappendName"><span class="hs-identifier hs-var">mappendName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621681365806"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#sappendName"><span class="hs-identifier hs-var">sappendName</span></a></span><span>
</span><span id="line-521"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365815"><span class="hs-identifier hs-var">addWarnNonCanonicalMethod2</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365814"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-522"></span><span>                            </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNonCanonicalMonoidInstances"><span class="hs-identifier hs-var">Opt_WarnNonCanonicalMonoidInstances</span></a></span><span>
</span><span id="line-523"></span><span>                            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mappend&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&lt;&gt;)&quot;</span></span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span>                  </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-comment">-- | test whether MatchGroup represents a trivial \&quot;lhsName = rhsName\&quot;</span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-comment">-- binding, and return @Just rhsName@ if this is the case</span><span>
</span><span id="line-531"></span><span>    </span><span class="annot"><a href="#local-6989586621681365822"><span class="hs-identifier hs-type">isAliasMG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-532"></span><span>    </span><span id="local-6989586621681365822"><span class="annot"><span class="annottext">isAliasMG :: MatchGroup GhcRn (LHsExpr GhcRn) -&gt; Maybe Name
</span><a href="#local-6989586621681365822"><span class="hs-identifier hs-var hs-var">isAliasMG</span></a></span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-533"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: forall p body. Match p body -&gt; GRHSs p body
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365800"><span class="annot"><span class="annottext">GRHSs GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681365800"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-534"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHSs GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681365797"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365797"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681365796"><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681365796"><span class="hs-identifier hs-var">lbinds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681365800"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-535"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcRn GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681365796"><span class="hs-identifier hs-var">lbinds</span></a></span><span>
</span><span id="line-536"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365793"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621681365793"><span class="hs-identifier hs-var">lrhsName</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365797"><span class="hs-identifier hs-var">body</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621681365793"><span class="hs-identifier hs-var">lrhsName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>    </span><span class="annot"><a href="#local-6989586621681365822"><span class="hs-identifier hs-var">isAliasMG</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-comment">-- got &quot;lhs = rhs&quot; but expected something different</span><span>
</span><span id="line-540"></span><span>    </span><span id="local-6989586621681365821"><span class="annot"><span class="annottext">addWarnNonCanonicalMethod1 :: String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365821"><span class="hs-identifier hs-var hs-var">addWarnNonCanonicalMethod1</span></a></span></span><span> </span><span id="local-6989586621681365792"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365792"><span class="hs-identifier hs-var">refURL</span></a></span></span><span> </span><span id="local-6989586621681365791"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681365791"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621681365790"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365790"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681365789"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365789"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><span class="annottext">WarnReason -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addWarn"><span class="hs-identifier hs-var">addWarn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681365791"><span class="hs-identifier hs-var">flag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-542"></span><span>                       </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Noncanonical&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-543"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365790"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365789"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-544"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;definition detected&quot;</span></span><span>
</span><span id="line-545"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn -&gt; SDoc
</span><a href="#local-6989586621681365786"><span class="hs-identifier hs-var">instDeclCtxt1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621681365840"><span class="hs-identifier hs-var">poly_ty</span></a></span><span>
</span><span id="line-546"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Move definition from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-547"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365789"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-548"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365790"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-549"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;See also:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-550"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365792"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-551"></span><span>                       </span><span class="hs-special">]</span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span>    </span><span class="hs-comment">-- expected &quot;lhs = rhs&quot; but got something else</span><span>
</span><span id="line-554"></span><span>    </span><span id="local-6989586621681365815"><span class="annot"><span class="annottext">addWarnNonCanonicalMethod2 :: String -&gt; WarningFlag -&gt; String -&gt; String -&gt; TcRn ()
</span><a href="#local-6989586621681365815"><span class="hs-identifier hs-var hs-var">addWarnNonCanonicalMethod2</span></a></span></span><span> </span><span id="local-6989586621681365785"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365785"><span class="hs-identifier hs-var">refURL</span></a></span></span><span> </span><span id="local-6989586621681365784"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681365784"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621681365783"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365783"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681365782"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365782"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-555"></span><span>        </span><span class="annot"><span class="annottext">WarnReason -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addWarn"><span class="hs-identifier hs-var">addWarn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681365784"><span class="hs-identifier hs-var">flag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-556"></span><span>                       </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Noncanonical&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-557"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365783"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-558"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;definition detected&quot;</span></span><span>
</span><span id="line-559"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn -&gt; SDoc
</span><a href="#local-6989586621681365786"><span class="hs-identifier hs-var">instDeclCtxt1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621681365840"><span class="hs-identifier hs-var">poly_ty</span></a></span><span>
</span><span id="line-560"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365783"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-561"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;will eventually be removed in favour of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-562"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365782"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Either remove definition for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-564"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365783"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(recommended)&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-565"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or define as&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-566"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365783"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365782"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;See also:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-568"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365785"><span class="hs-identifier hs-var">refURL</span></a></span><span>
</span><span id="line-569"></span><span>                       </span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-comment">-- stolen from GHC.Tc.TyCl.Instance</span><span>
</span><span id="line-572"></span><span>    </span><span class="annot"><a href="#local-6989586621681365786"><span class="hs-identifier hs-type">instDeclCtxt1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-573"></span><span>    </span><span id="local-6989586621681365786"><span class="annot"><span class="annottext">instDeclCtxt1 :: LHsSigType GhcRn -&gt; SDoc
</span><a href="#local-6989586621681365786"><span class="hs-identifier hs-var hs-var">instDeclCtxt1</span></a></span></span><span> </span><span id="local-6989586621681365781"><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621681365781"><span class="hs-identifier hs-var">hs_inst_ty</span></a></span></span><span>
</span><span id="line-574"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681365780"><span class="hs-identifier hs-var">inst_decl_ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). LHsSigType (GhcPass p) -&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#getLHsInstDeclHead"><span class="hs-identifier hs-var">getLHsInstDeclHead</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621681365781"><span class="hs-identifier hs-var">hs_inst_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span>    </span><span class="annot"><a href="#local-6989586621681365780"><span class="hs-identifier hs-type">inst_decl_ctxt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-577"></span><span>    </span><span id="local-6989586621681365780"><span class="annot"><span class="annottext">inst_decl_ctxt :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681365780"><span class="hs-identifier hs-var hs-var">inst_decl_ctxt</span></a></span></span><span> </span><span id="local-6989586621681365778"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365778"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in the instance declaration for&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365778"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span class="annot"><a href="GHC.Rename.Module.html#rnClsInstDecl"><span class="hs-identifier hs-type">rnClsInstDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClsInstDecl"><span class="hs-identifier hs-type">ClsInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClsInstDecl"><span class="hs-identifier hs-type">ClsInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span id="rnClsInstDecl"><span class="annot"><span class="annottext">rnClsInstDecl :: ClsInstDecl GhcPs -&gt; RnM (ClsInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnClsInstDecl"><span class="hs-identifier hs-var hs-var">rnClsInstDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClsInstDecl"><span class="hs-identifier hs-type">ClsInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cid_poly_ty :: forall pass. ClsInstDecl pass -&gt; LHsSigType pass
</span><a href="Language.Haskell.Syntax.Decls.html#cid_poly_ty"><span class="hs-identifier hs-var">cid_poly_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365773"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365773"><span class="hs-identifier hs-var">inst_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_binds :: forall pass. ClsInstDecl pass -&gt; LHsBinds pass
</span><a href="Language.Haskell.Syntax.Decls.html#cid_binds"><span class="hs-identifier hs-var">cid_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365771"><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681365771"><span class="hs-identifier hs-var">mbinds</span></a></span></span><span>
</span><span id="line-583"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_sigs :: forall pass. ClsInstDecl pass -&gt; [LSig pass]
</span><a href="Language.Haskell.Syntax.Decls.html#cid_sigs"><span class="hs-identifier hs-var">cid_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365769"><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681365769"><span class="hs-identifier hs-var">uprags</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_tyfam_insts :: forall pass. ClsInstDecl pass -&gt; [LTyFamInstDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#cid_tyfam_insts"><span class="hs-identifier hs-var">cid_tyfam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365767"><span class="annot"><span class="annottext">[LTyFamInstDecl GhcPs]
</span><a href="#local-6989586621681365767"><span class="hs-identifier hs-var">ats</span></a></span></span><span>
</span><span id="line-584"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_overlap_mode :: forall pass. ClsInstDecl pass -&gt; Maybe (XRec pass OverlapMode)
</span><a href="Language.Haskell.Syntax.Decls.html#cid_overlap_mode"><span class="hs-identifier hs-var">cid_overlap_mode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365765"><span class="annot"><span class="annottext">Maybe (XRec GhcPs OverlapMode)
</span><a href="#local-6989586621681365765"><span class="hs-identifier hs-var">oflag</span></a></span></span><span>
</span><span id="line-585"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_datafam_insts :: forall pass. ClsInstDecl pass -&gt; [LDataFamInstDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#cid_datafam_insts"><span class="hs-identifier hs-var">cid_datafam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365763"><span class="annot"><span class="annottext">[LDataFamInstDecl GhcPs]
</span><a href="#local-6989586621681365763"><span class="hs-identifier hs-var">adts</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; Maybe SDoc -&gt; LHsSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-var">checkInferredVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365762"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681365761"><span class="hs-identifier hs-var">inf_err</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365773"><span class="hs-identifier hs-var">inst_ty</span></a></span><span>
</span><span id="line-587"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365760"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365760"><span class="hs-identifier hs-var">inst_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365759"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365759"><span class="hs-identifier hs-var">inst_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365762"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365773"><span class="hs-identifier hs-var">inst_ty</span></a></span><span>
</span><span id="line-588"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365758"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365758"><span class="hs-identifier hs-var">ktv_names</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365757"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365757"><span class="hs-identifier hs-var">head_ty'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn
-&gt; ([Name], Maybe (LHsContext GhcRn), LHsType GhcRn)
</span><a href="GHC.Hs.Type.html#splitLHsInstDeclTy"><span class="hs-identifier hs-var">splitLHsInstDeclTy</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365760"><span class="hs-identifier hs-var">inst_ty'</span></a></span><span>
</span><span id="line-589"></span><span>             </span><span class="hs-comment">-- Check if there are any nested `forall`s or contexts, which are</span><span>
</span><span id="line-590"></span><span>             </span><span class="hs-comment">-- illegal in the type of an instance declaration (see</span><span>
</span><span id="line-591"></span><span>             </span><span class="hs-comment">-- Note [No nested foralls or contexts in instance types] in</span><span>
</span><span id="line-592"></span><span>             </span><span class="hs-comment">-- GHC.Hs.Type)...</span><span>
</span><span id="line-593"></span><span>             </span><span id="local-6989586621681365755"><span class="annot"><span class="annottext">mb_nested_msg :: Maybe (SrcSpan, SDoc)
</span><a href="#local-6989586621681365755"><span class="hs-identifier hs-var hs-var">mb_nested_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; LHsType GhcRn -&gt; Maybe (SrcSpan, SDoc)
</span><a href="GHC.Rename.Utils.html#noNestedForallsContextsErr"><span class="hs-identifier hs-var">noNestedForallsContextsErr</span></a></span><span>
</span><span id="line-594"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Instance head&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365757"><span class="hs-identifier hs-var">head_ty'</span></a></span><span>
</span><span id="line-595"></span><span>             </span><span class="hs-comment">-- ...then check if the instance head is actually headed by a</span><span>
</span><span id="line-596"></span><span>             </span><span class="hs-comment">-- class type constructor...</span><span>
</span><span id="line-597"></span><span>             </span><span id="local-6989586621681365754"><span class="annot"><span class="annottext">eith_cls :: Either (SrcSpan, SDoc) Name
</span><a href="#local-6989586621681365754"><span class="hs-identifier hs-var hs-var">eith_cls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
LHsType (GhcPass p) -&gt; Maybe (LocatedN (IdP (GhcPass p)))
</span><a href="GHC.Hs.Type.html#hsTyGetAppHead_maybe"><span class="hs-identifier hs-var">hsTyGetAppHead_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365757"><span class="hs-identifier hs-var">head_ty'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-598"></span><span>               </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365752"><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681365752"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.4.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681365752"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-599"></span><span>               </span><span class="annot"><span class="annottext">Maybe (LocatedN (IdP GhcRn))
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.4.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span>
</span><span id="line-600"></span><span>                 </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365757"><span class="hs-identifier hs-var">head_ty'</span></a></span><span>
</span><span id="line-601"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal head of an instance declaration:&quot;</span></span><span>
</span><span id="line-602"></span><span>                           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365757"><span class="hs-identifier hs-var">head_ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span>                      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Instance heads must be of the form&quot;</span></span><span>
</span><span id="line-604"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;C ty_1 ... ty_n&quot;</span></span><span>
</span><span id="line-605"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;where&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'C'</span></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>                                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is a class&quot;</span></span><span>
</span><span id="line-607"></span><span>                              </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-608"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>         </span><span class="hs-comment">-- ...finally, attempt to retrieve the class type constructor, failing</span><span>
</span><span id="line-610"></span><span>         </span><span class="hs-comment">-- with an error message if there isn't one. To avoid excessive</span><span>
</span><span id="line-611"></span><span>         </span><span class="hs-comment">-- amounts of error messages, we will only report one of the errors</span><span>
</span><span id="line-612"></span><span>         </span><span class="hs-comment">-- from mb_nested_msg or eith_cls at a time.</span><span>
</span><span id="line-613"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365749"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365749"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (SrcSpan, SDoc)
</span><a href="#local-6989586621681365755"><span class="hs-identifier hs-var">mb_nested_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Either (SrcSpan, SDoc) Name
</span><a href="#local-6989586621681365754"><span class="hs-identifier hs-var">eith_cls</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-614"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (SrcSpan, SDoc)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681365748"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365748"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365748"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-615"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365747"><span class="annot"><span class="annottext">(SrcSpan, SDoc)
</span><a href="#local-6989586621681365747"><span class="hs-identifier hs-var">err1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Either (SrcSpan, SDoc) Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SrcSpan, SDoc) -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621681365746"><span class="hs-identifier hs-var">bail_out</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan, SDoc)
</span><a href="#local-6989586621681365747"><span class="hs-identifier hs-var">err1</span></a></span><span>
</span><span id="line-616"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (SrcSpan, SDoc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>         </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681365745"><span class="annot"><span class="annottext">(SrcSpan, SDoc)
</span><a href="#local-6989586621681365745"><span class="hs-identifier hs-var">err2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SrcSpan, SDoc) -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621681365746"><span class="hs-identifier hs-var">bail_out</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan, SDoc)
</span><a href="#local-6989586621681365745"><span class="hs-identifier hs-var">err2</span></a></span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span>          </span><span class="hs-comment">-- Rename the bindings</span><span>
</span><span id="line-619"></span><span>          </span><span class="hs-comment">-- The typechecker (not the renamer) checks that all</span><span>
</span><span id="line-620"></span><span>          </span><span class="hs-comment">-- the bindings are for the right class</span><span>
</span><span id="line-621"></span><span>          </span><span class="hs-comment">-- (Slightly strangely) when scoped type variables are on, the</span><span>
</span><span id="line-622"></span><span>          </span><span class="hs-comment">-- forall-d tyvars scope over the method bindings too</span><span>
</span><span id="line-623"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365744"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn))
</span><a href="#local-6989586621681365744"><span class="hs-identifier hs-var">mbinds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365743"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621681365743"><span class="hs-identifier hs-var">uprags'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365742"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365742"><span class="hs-identifier hs-var">meth_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Name
-&gt; [Name]
-&gt; LHsBinds GhcPs
-&gt; [LSig GhcPs]
-&gt; RnM (LHsBinds GhcRn, [LSig GhcRn], FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMethodBinds"><span class="hs-identifier hs-var">rnMethodBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365749"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365758"><span class="hs-identifier hs-var">ktv_names</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681365771"><span class="hs-identifier hs-var">mbinds</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681365769"><span class="hs-identifier hs-var">uprags</span></a></span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; LHsSigType GhcRn -&gt; LHsBinds GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#checkCanonicalInstances"><span class="hs-identifier hs-var">checkCanonicalInstances</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365749"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365760"><span class="hs-identifier hs-var">inst_ty'</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn))
</span><a href="#local-6989586621681365744"><span class="hs-identifier hs-var">mbinds'</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span>       </span><span class="hs-comment">-- Rename the associated types, and type signatures</span><span>
</span><span id="line-628"></span><span>       </span><span class="hs-comment">-- Both need to have the instance type variables in scope</span><span>
</span><span id="line-629"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnSrcInstDecl&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365760"><span class="hs-identifier hs-var">inst_ty'</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365758"><span class="hs-identifier hs-var">ktv_names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681365739"><span class="annot"><span class="annottext">[LocatedA (TyFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365739"><span class="hs-identifier hs-var">ats'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365738"><span class="annot"><span class="annottext">[LocatedA (DataFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365738"><span class="hs-identifier hs-var">adts'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365737"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365737"><span class="hs-identifier hs-var">more_fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>             </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-var">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365758"><span class="hs-identifier hs-var">ktv_names</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-632"></span><span>                </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365736"><span class="annot"><span class="annottext">[LocatedA (TyFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365736"><span class="hs-identifier hs-var">ats'</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681365735"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365735"><span class="hs-identifier hs-var">at_fvs</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (decl :: * -&gt; *).
(AssocTyFamInfo -&gt; decl GhcPs -&gt; RnM (decl GhcRn, FreeVars))
-&gt; Name
-&gt; [Name]
-&gt; [LocatedA (decl GhcPs)]
-&gt; RnM ([LocatedA (decl GhcRn)], FreeVars)
</span><a href="GHC.Rename.Module.html#rnATInstDecls"><span class="hs-identifier hs-var">rnATInstDecls</span></a></span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; TyFamInstDecl GhcPs -&gt; RnM (TyFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstDecl"><span class="hs-identifier hs-var">rnTyFamInstDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365749"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365758"><span class="hs-identifier hs-var">ktv_names</span></a></span><span> </span><span class="annot"><span class="annottext">[LTyFamInstDecl GhcPs]
</span><a href="#local-6989586621681365767"><span class="hs-identifier hs-var">ats</span></a></span><span>
</span><span id="line-633"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365733"><span class="annot"><span class="annottext">[LocatedA (DataFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365733"><span class="hs-identifier hs-var">adts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365732"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365732"><span class="hs-identifier hs-var">adt_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (decl :: * -&gt; *).
(AssocTyFamInfo -&gt; decl GhcPs -&gt; RnM (decl GhcRn, FreeVars))
-&gt; Name
-&gt; [Name]
-&gt; [LocatedA (decl GhcPs)]
-&gt; RnM ([LocatedA (decl GhcRn)], FreeVars)
</span><a href="GHC.Rename.Module.html#rnATInstDecls"><span class="hs-identifier hs-var">rnATInstDecls</span></a></span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; DataFamInstDecl GhcPs -&gt; RnM (DataFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDataFamInstDecl"><span class="hs-identifier hs-var">rnDataFamInstDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365749"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365758"><span class="hs-identifier hs-var">ktv_names</span></a></span><span> </span><span class="annot"><span class="annottext">[LDataFamInstDecl GhcPs]
</span><a href="#local-6989586621681365763"><span class="hs-identifier hs-var">adts</span></a></span><span>
</span><span id="line-634"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA (TyFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365736"><span class="hs-identifier hs-var">ats'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LocatedA (DataFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365733"><span class="hs-identifier hs-var">adts'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365735"><span class="hs-identifier hs-var">at_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365732"><span class="hs-identifier hs-var">adt_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365731"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681365731"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365742"><span class="hs-identifier hs-var">meth_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365737"><span class="hs-identifier hs-var">more_fvs</span></a></span><span>
</span><span id="line-637"></span><span>                                </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365759"><span class="hs-identifier hs-var">inst_fvs</span></a></span><span>
</span><span id="line-638"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClsInstDecl"><span class="hs-identifier hs-type">ClsInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cid_ext :: XCClsInstDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#cid_ext"><span class="hs-identifier hs-var">cid_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-639"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_poly_ty :: LHsSigType GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#cid_poly_ty"><span class="hs-identifier hs-var">cid_poly_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365760"><span class="hs-identifier hs-var">inst_ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_binds :: LHsBinds GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#cid_binds"><span class="hs-identifier hs-var">cid_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn))
</span><a href="#local-6989586621681365744"><span class="hs-identifier hs-var">mbinds'</span></a></span><span>
</span><span id="line-640"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_sigs :: [LSig GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#cid_sigs"><span class="hs-identifier hs-var">cid_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621681365743"><span class="hs-identifier hs-var">uprags'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_tyfam_insts :: [LTyFamInstDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#cid_tyfam_insts"><span class="hs-identifier hs-var">cid_tyfam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (TyFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365739"><span class="hs-identifier hs-var">ats'</span></a></span><span>
</span><span id="line-641"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_overlap_mode :: Maybe (XRec GhcRn OverlapMode)
</span><a href="Language.Haskell.Syntax.Decls.html#cid_overlap_mode"><span class="hs-identifier hs-var">cid_overlap_mode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs OverlapMode)
</span><a href="#local-6989586621681365765"><span class="hs-identifier hs-var">oflag</span></a></span><span>
</span><span id="line-642"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cid_datafam_insts :: [LDataFamInstDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#cid_datafam_insts"><span class="hs-identifier hs-var">cid_datafam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (DataFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365738"><span class="hs-identifier hs-var">adts'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-643"></span><span>                 </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365731"><span class="hs-identifier hs-var">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-644"></span><span>             </span><span class="hs-comment">-- We return the renamed associated data type declarations so</span><span>
</span><span id="line-645"></span><span>             </span><span class="hs-comment">-- that they can be entered into the list of type declarations</span><span>
</span><span id="line-646"></span><span>             </span><span class="hs-comment">-- for the binding group, but we also keep a copy in the instance.</span><span>
</span><span id="line-647"></span><span>             </span><span class="hs-comment">-- The latter is needed for well-formedness checks in the type</span><span>
</span><span id="line-648"></span><span>             </span><span class="hs-comment">-- checker (eg, to ensure that all ATs of the instance actually</span><span>
</span><span id="line-649"></span><span>             </span><span class="hs-comment">-- receive a declaration).</span><span>
</span><span id="line-650"></span><span>             </span><span class="hs-comment">-- NB: Even the copies in the instance declaration carry copies of</span><span>
</span><span id="line-651"></span><span>             </span><span class="hs-comment">--     the instance context after renaming.  This is a bit</span><span>
</span><span id="line-652"></span><span>             </span><span class="hs-comment">--     strange, but should not matter (and it would be more work</span><span>
</span><span id="line-653"></span><span>             </span><span class="hs-comment">--     to remove the context).</span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-655"></span><span>    </span><span id="local-6989586621681365762"><span class="annot"><span class="annottext">ctxt :: HsDocContext
</span><a href="#local-6989586621681365762"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#GenericCtx"><span class="hs-identifier hs-var">GenericCtx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an instance declaration&quot;</span></span><span>
</span><span id="line-656"></span><span>    </span><span id="local-6989586621681365761"><span class="annot"><span class="annottext">inf_err :: Maybe SDoc
</span><a href="#local-6989586621681365761"><span class="hs-identifier hs-var hs-var">inf_err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Inferred type variables are not allowed&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>
</span><span id="line-658"></span><span>    </span><span class="hs-comment">-- The instance is malformed. We'd still like to make *some* progress</span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-comment">-- (rather than failing outright), so we report an error and continue for</span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-comment">-- as long as we can. Importantly, this error should be thrown before we</span><span>
</span><span id="line-661"></span><span>    </span><span class="hs-comment">-- reach the typechecker, lest we encounter different errors that are</span><span>
</span><span id="line-662"></span><span>    </span><span class="hs-comment">-- hopelessly confusing (such as the one in #16114).</span><span>
</span><span id="line-663"></span><span>    </span><span id="local-6989586621681365746"><span class="annot"><span class="annottext">bail_out :: (SrcSpan, SDoc) -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621681365746"><span class="hs-identifier hs-var hs-var">bail_out</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365726"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365726"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365725"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365725"><span class="hs-identifier hs-var">err_msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-664"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365726"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Rename.Utils.html#withHsDocContext"><span class="hs-identifier hs-var">withHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365762"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365725"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Name
</span><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier hs-var">mkUnboundName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabelString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkTcOccFS"><span class="hs-identifier hs-var">mkTcOccFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; CLabelString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;class&gt;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span id="local-6989586621681367062"><span id="local-6989586621681367064"><span class="annot"><a href="GHC.Rename.Module.html#rnFamEqn"><span class="hs-identifier hs-type">rnFamEqn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-668"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInfo"><span class="hs-identifier hs-type">AssocTyFamInfo</span></a></span><span>
</span><span id="line-669"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-670"></span><span>         </span><span class="hs-comment">-- ^ Additional kind variables to implicitly bind if there is no</span><span>
</span><span id="line-671"></span><span>         </span><span class="hs-comment">--   explicit forall. (See the comments on @all_imp_vars@ below for a</span><span>
</span><span id="line-672"></span><span>         </span><span class="hs-comment">--   more detailed explanation.)</span><span>
</span><span id="line-673"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681367064"><span class="hs-identifier hs-type">rhs</span></a></span><span>
</span><span id="line-674"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681367064"><span class="hs-identifier hs-type">rhs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367062"><span class="hs-identifier hs-type">rhs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681367062"><span class="hs-identifier hs-type">rhs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-676"></span><span id="rnFamEqn"><span class="annot"><span class="annottext">rnFamEqn :: forall rhs rhs'.
HsDocContext
-&gt; AssocTyFamInfo
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; FamEqn GhcPs rhs
-&gt; (HsDocContext -&gt; rhs -&gt; RnM (rhs', FreeVars))
-&gt; RnM (FamEqn GhcRn rhs', FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamEqn"><span class="hs-identifier hs-var hs-var">rnFamEqn</span></a></span></span><span> </span><span id="local-6989586621681365705"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365705"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681365704"><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365704"><span class="hs-identifier hs-var">atfi</span></a></span></span><span> </span><span id="local-6989586621681365703"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365703"><span class="hs-identifier hs-var">extra_kvars</span></a></span></span><span>
</span><span id="line-677"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">feqn_tycon :: forall pass rhs. FamEqn pass rhs -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_tycon"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365700"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365700"><span class="hs-identifier hs-var">tycon</span></a></span></span><span>
</span><span id="line-678"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_bndrs :: forall pass rhs. FamEqn pass rhs -&gt; HsOuterFamEqnTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_bndrs"><span class="hs-identifier hs-var">feqn_bndrs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365698"><span class="annot"><span class="annottext">HsOuterFamEqnTyVarBndrs GhcPs
</span><a href="#local-6989586621681365698"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span>
</span><span id="line-679"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_pats :: forall pass rhs. FamEqn pass rhs -&gt; HsTyPats pass
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_pats"><span class="hs-identifier hs-var">feqn_pats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365696"><span class="annot"><span class="annottext">HsTyPats GhcPs
</span><a href="#local-6989586621681365696"><span class="hs-identifier hs-var">pats</span></a></span></span><span>
</span><span id="line-680"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_fixity :: forall pass rhs. FamEqn pass rhs -&gt; LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_fixity"><span class="hs-identifier hs-var">feqn_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365694"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365694"><span class="hs-identifier hs-var">fixity</span></a></span></span><span>
</span><span id="line-681"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_rhs :: forall pass rhs. FamEqn pass rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365692"><span class="annot"><span class="annottext">rhs
</span><a href="#local-6989586621681365692"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365691"><span class="annot"><span class="annottext">HsDocContext -&gt; rhs -&gt; RnM (rhs', FreeVars)
</span><a href="#local-6989586621681365691"><span class="hs-identifier hs-var">rn_payload</span></a></span></span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365690"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365690"><span class="hs-identifier hs-var">tycon'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Name
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupFamInstName"><span class="hs-identifier hs-var">lookupFamInstName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681365688"><span class="hs-identifier hs-var">mb_cls</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365700"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span>         </span><span class="hs-comment">-- all_imp_vars represent the implicitly bound type variables. This is</span><span>
</span><span id="line-685"></span><span>         </span><span class="hs-comment">-- empty if we have an explicit `forall` (see</span><span>
</span><span id="line-686"></span><span>         </span><span class="hs-comment">-- Note [forall-or-nothing rule] in GHC.Hs.Type), which means</span><span>
</span><span id="line-687"></span><span>         </span><span class="hs-comment">-- ignoring:</span><span>
</span><span id="line-688"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-689"></span><span>         </span><span class="hs-comment">-- - pat_kity_vars, the free variables mentioned in the type patterns</span><span>
</span><span id="line-690"></span><span>         </span><span class="hs-comment">--   on the LHS of the equation, and</span><span>
</span><span id="line-691"></span><span>         </span><span class="hs-comment">-- - extra_kvars, which is one of the following:</span><span>
</span><span id="line-692"></span><span>         </span><span class="hs-comment">--   * For type family instances, extra_kvars are the free kind</span><span>
</span><span id="line-693"></span><span>         </span><span class="hs-comment">--     variables mentioned in an outermost kind signature on the RHS</span><span>
</span><span id="line-694"></span><span>         </span><span class="hs-comment">--     of the equation.</span><span>
</span><span id="line-695"></span><span>         </span><span class="hs-comment">--     (See Note [Implicit quantification in type synonyms] in</span><span>
</span><span id="line-696"></span><span>         </span><span class="hs-comment">--     GHC.Rename.HsType.)</span><span>
</span><span id="line-697"></span><span>         </span><span class="hs-comment">--   * For data family instances, extra_kvars are the free kind</span><span>
</span><span id="line-698"></span><span>         </span><span class="hs-comment">--     variables mentioned in the explicit return kind, if one is</span><span>
</span><span id="line-699"></span><span>         </span><span class="hs-comment">--     provided. (e.g., the `k` in `data instance T :: k -&gt; Type`).</span><span>
</span><span id="line-700"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-701"></span><span>         </span><span class="hs-comment">-- Some examples:</span><span>
</span><span id="line-702"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-703"></span><span>         </span><span class="hs-comment">-- @</span><span>
</span><span id="line-704"></span><span>         </span><span class="hs-comment">-- type family F a b</span><span>
</span><span id="line-705"></span><span>         </span><span class="hs-comment">-- type instance forall a b c. F [(a, b)] c = a -&gt; b -&gt; c</span><span>
</span><span id="line-706"></span><span>         </span><span class="hs-comment">--   -- all_imp_vars = []</span><span>
</span><span id="line-707"></span><span>         </span><span class="hs-comment">-- type instance F [(a, b)] c = a -&gt; b -&gt; c</span><span>
</span><span id="line-708"></span><span>         </span><span class="hs-comment">--   -- all_imp_vars = [a, b, c]</span><span>
</span><span id="line-709"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-710"></span><span>         </span><span class="hs-comment">-- type family G :: Maybe a</span><span>
</span><span id="line-711"></span><span>         </span><span class="hs-comment">-- type instance forall a. G = (Nothing :: Maybe a)</span><span>
</span><span id="line-712"></span><span>         </span><span class="hs-comment">--   -- all_imp_vars = []</span><span>
</span><span id="line-713"></span><span>         </span><span class="hs-comment">-- type instance G = (Nothing :: Maybe a)</span><span>
</span><span id="line-714"></span><span>         </span><span class="hs-comment">--   -- all_imp_vars = [a]</span><span>
</span><span id="line-715"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-716"></span><span>         </span><span class="hs-comment">-- data family H :: k -&gt; Type</span><span>
</span><span id="line-717"></span><span>         </span><span class="hs-comment">-- data instance forall k. H :: k -&gt; Type where ...</span><span>
</span><span id="line-718"></span><span>         </span><span class="hs-comment">--   -- all_imp_vars = []</span><span>
</span><span id="line-719"></span><span>         </span><span class="hs-comment">-- data instance H :: k -&gt; Type where ...</span><span>
</span><span id="line-720"></span><span>         </span><span class="hs-comment">--   -- all_imp_vars = [k]</span><span>
</span><span id="line-721"></span><span>         </span><span class="hs-comment">-- @</span><span>
</span><span id="line-722"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365687"><span class="annot"><span class="annottext">all_imp_vars :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365687"><span class="hs-identifier hs-var hs-var">all_imp_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365686"><span class="hs-identifier hs-var">pat_kity_vars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365703"><span class="hs-identifier hs-var">extra_kvars</span></a></span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall flag assoc a.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; Maybe assoc
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; HsOuterTyVarBndrs flag GhcPs
-&gt; (HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier hs-var">bindHsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365705"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681365688"><span class="hs-identifier hs-var">mb_cls</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365687"><span class="hs-identifier hs-var">all_imp_vars</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterFamEqnTyVarBndrs GhcPs
</span><a href="#local-6989586621681365698"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681365684"><span class="annot"><span class="annottext">HsOuterTyVarBndrs () GhcRn
</span><a href="#local-6989586621681365684"><span class="hs-identifier hs-var">rn_outer_bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365683"><span class="annot"><span class="annottext">[HsArg
   (GenLocated SrcSpanAnnA (HsType GhcRn))
   (GenLocated SrcSpanAnnA (HsType GhcRn))]
</span><a href="#local-6989586621681365683"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365682"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365682"><span class="hs-identifier hs-var">pat_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsTyPats GhcPs -&gt; RnM ([LHsTypeArg GhcRn], FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTypeArgs"><span class="hs-identifier hs-var">rnLHsTypeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#FamPatCtx"><span class="hs-identifier hs-var">FamPatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365700"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsTyPats GhcPs
</span><a href="#local-6989586621681365696"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-726"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365679"><span class="annot"><span class="annottext">rhs'
</span><a href="#local-6989586621681365679"><span class="hs-identifier hs-var">payload'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365678"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365678"><span class="hs-identifier hs-var">rhs_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; rhs -&gt; RnM (rhs', FreeVars)
</span><a href="#local-6989586621681365691"><span class="hs-identifier hs-var">rn_payload</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365705"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">rhs
</span><a href="#local-6989586621681365692"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span>          </span><span class="hs-comment">-- Report unused binders on the LHS</span><span>
</span><span id="line-729"></span><span>          </span><span class="hs-comment">-- See Note [Unused type variables in family instances]</span><span>
</span><span id="line-730"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- The SrcSpan that bindHsOuterFamEqnTyVarBndrs will attach to each</span><span>
</span><span id="line-731"></span><span>             </span><span class="hs-comment">-- implicitly bound type variable Name in outer_bndrs' will</span><span>
</span><span id="line-732"></span><span>             </span><span class="hs-comment">-- span the entire type family instance, which will be reflected in</span><span>
</span><span id="line-733"></span><span>             </span><span class="hs-comment">-- -Wunused-type-patterns warnings. We can be a little more precise</span><span>
</span><span id="line-734"></span><span>             </span><span class="hs-comment">-- than that by pointing to the LHS of the instance instead, which</span><span>
</span><span id="line-735"></span><span>             </span><span class="hs-comment">-- is what lhs_loc corresponds to.</span><span>
</span><span id="line-736"></span><span>             </span><span id="local-6989586621681365677"><span class="annot"><span class="annottext">rn_outer_bndrs' :: HsOuterTyVarBndrs () GhcRn
</span><a href="#local-6989586621681365677"><span class="hs-identifier hs-var hs-var">rn_outer_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall pass flag.
(XHsOuterImplicit pass -&gt; XHsOuterImplicit pass)
-&gt; HsOuterTyVarBndrs flag pass -&gt; HsOuterTyVarBndrs flag pass
</span><a href="Language.Haskell.Syntax.Type.html#mapHsOuterImplicit"><span class="hs-identifier hs-var">mapHsOuterImplicit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan -&gt; Name
</span><a href="GHC.Types.Name.html#setNameLoc"><span class="hs-operator hs-var">`setNameLoc`</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365674"><span class="hs-identifier hs-var">lhs_loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span>                                                  </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs () GhcRn
</span><a href="#local-6989586621681365684"><span class="hs-identifier hs-var">rn_outer_bndrs</span></a></span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span>             </span><span class="annot"><a href="#local-6989586621681365673"><span class="hs-identifier hs-type">groups</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-740"></span><span>             </span><span id="local-6989586621681365673"><span class="annot"><span class="annottext">groups :: [NonEmpty (GenLocated SrcSpanAnnN RdrName)]
</span><a href="#local-6989586621681365673"><span class="hs-identifier hs-var hs-var">groups</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [NonEmpty a]
</span><a href="GHC.Data.List.SetOps.html#equivClasses"><span class="hs-identifier hs-var">equivClasses</span></a></span><span> </span><span class="annot"><span class="annottext">forall a l. Ord a =&gt; GenLocated l a -&gt; GenLocated l a -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#cmpLocated"><span class="hs-identifier hs-var">cmpLocated</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365686"><span class="hs-identifier hs-var">pat_kity_vars</span></a></span><span>
</span><span id="line-741"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365671"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365671"><span class="hs-identifier hs-var">nms_dups</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Env.html#lookupOccRn"><span class="hs-identifier hs-var">lookupOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-742"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365669"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365669"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365669"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[NonEmpty (GenLocated SrcSpanAnnN RdrName)]
</span><a href="#local-6989586621681365673"><span class="hs-identifier hs-var">groups</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-743"></span><span>             </span><span class="hs-comment">-- Add to the used variables</span><span>
</span><span id="line-744"></span><span>             </span><span class="hs-comment">--  a) any variables that appear *more than once* on the LHS</span><span>
</span><span id="line-745"></span><span>             </span><span class="hs-comment">--     e.g.   F a Int a = Bool</span><span>
</span><span id="line-746"></span><span>             </span><span class="hs-comment">--  b) for associated instances, the variables</span><span>
</span><span id="line-747"></span><span>             </span><span class="hs-comment">--     of the instance decl.  See</span><span>
</span><span id="line-748"></span><span>             </span><span class="hs-comment">--     Note [Unused type variables in family instances]</span><span>
</span><span id="line-749"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365668"><span class="annot"><span class="annottext">nms_used :: FreeVars
</span><a href="#local-6989586621681365668"><span class="hs-identifier hs-var hs-var">nms_used</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#extendNameSetList"><span class="hs-identifier hs-var">extendNameSetList</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365678"><span class="hs-identifier hs-var">rhs_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-750"></span><span>                           </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365671"><span class="hs-identifier hs-var">nms_dups</span></a></span><span> </span><span class="hs-comment">{- (a) -}</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365666"><span class="hs-identifier hs-var">inst_head_tvs</span></a></span><span> </span><span class="hs-comment">{- (b) -}</span><span>
</span><span id="line-751"></span><span>             </span><span id="local-6989586621681365665"><span class="annot"><span class="annottext">all_nms :: [Name]
</span><a href="#local-6989586621681365665"><span class="hs-identifier hs-var hs-var">all_nms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall flag. HsOuterTyVarBndrs flag GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsOuterTyVarNames"><span class="hs-identifier hs-var">hsOuterTyVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs () GhcRn
</span><a href="#local-6989586621681365677"><span class="hs-identifier hs-var">rn_outer_bndrs'</span></a></span><span>
</span><span id="line-752"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#warnUnusedTypePatterns"><span class="hs-identifier hs-var">warnUnusedTypePatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365665"><span class="hs-identifier hs-var">all_nms</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365668"><span class="hs-identifier hs-var">nms_used</span></a></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span>         </span><span class="hs-comment">-- For associated family instances, if a type variable from the</span><span>
</span><span id="line-755"></span><span>         </span><span class="hs-comment">-- parent instance declaration is mentioned on the RHS of the</span><span>
</span><span id="line-756"></span><span>         </span><span class="hs-comment">-- associated family instance but not bound on the LHS, then reject</span><span>
</span><span id="line-757"></span><span>         </span><span class="hs-comment">-- that type variable as being out of scope.</span><span>
</span><span id="line-758"></span><span>         </span><span class="hs-comment">-- See Note [Renaming associated types]</span><span>
</span><span id="line-759"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365663"><span class="annot"><span class="annottext">lhs_bound_vars :: FreeVars
</span><a href="#local-6989586621681365663"><span class="hs-identifier hs-var hs-var">lhs_bound_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#extendNameSetList"><span class="hs-identifier hs-var">extendNameSetList</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365682"><span class="hs-identifier hs-var">pat_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365665"><span class="hs-identifier hs-var">all_nms</span></a></span><span>
</span><span id="line-760"></span><span>             </span><span id="local-6989586621681365662"><span class="annot"><span class="annottext">improperly_scoped :: Name -&gt; Bool
</span><a href="#local-6989586621681365662"><span class="hs-identifier hs-var hs-var">improperly_scoped</span></a></span></span><span> </span><span id="local-6989586621681365661"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365661"><span class="hs-identifier hs-var">cls_tkv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-761"></span><span>                  </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365661"><span class="hs-identifier hs-var">cls_tkv</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365678"><span class="hs-identifier hs-var">rhs_fvs</span></a></span><span>
</span><span id="line-762"></span><span>                    </span><span class="hs-comment">-- Mentioned on the RHS...</span><span>
</span><span id="line-763"></span><span>               </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365661"><span class="hs-identifier hs-var">cls_tkv</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365663"><span class="hs-identifier hs-var">lhs_bound_vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>                    </span><span class="hs-comment">-- ...but not bound on the LHS.</span><span>
</span><span id="line-765"></span><span>             </span><span id="local-6989586621681365657"><span class="annot"><span class="annottext">bad_tvs :: [Name]
</span><a href="#local-6989586621681365657"><span class="hs-identifier hs-var hs-var">bad_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="#local-6989586621681365662"><span class="hs-identifier hs-var">improperly_scoped</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365666"><span class="hs-identifier hs-var">inst_head_tvs</span></a></span><span>
</span><span id="line-766"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365657"><span class="hs-identifier hs-var">bad_tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; TcRn ()
</span><a href="#local-6989586621681365654"><span class="hs-identifier hs-var">badAssocRhs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365657"><span class="hs-identifier hs-var">bad_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365653"><span class="annot"><span class="annottext">eqn_fvs :: FreeVars
</span><a href="#local-6989586621681365653"><span class="hs-identifier hs-var hs-var">eqn_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365678"><span class="hs-identifier hs-var">rhs_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365682"><span class="hs-identifier hs-var">pat_fvs</span></a></span><span>
</span><span id="line-769"></span><span>             </span><span class="hs-comment">-- See Note [Type family equations and occurrences]</span><span>
</span><span id="line-770"></span><span>             </span><span id="local-6989586621681365652"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681365652"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365704"><span class="hs-identifier hs-var">atfi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-771"></span><span>                         </span><span class="annot"><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-type">NonAssocTyFamEqn</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTyFamInfo
</span><a href="GHC.Rename.Module.html#ClosedTyFam"><span class="hs-identifier hs-var">ClosedTyFam</span></a></span><span>
</span><span id="line-772"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365653"><span class="hs-identifier hs-var">eqn_fvs</span></a></span><span>
</span><span id="line-773"></span><span>                         </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365653"><span class="hs-identifier hs-var">eqn_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365690"><span class="hs-identifier hs-var">tycon'</span></a></span><span>
</span><span id="line-774"></span><span>
</span><span id="line-775"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">feqn_ext :: XCFamEqn GhcRn rhs'
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_ext"><span class="hs-identifier hs-var">feqn_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-776"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_tycon :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_tycon"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365690"><span class="hs-identifier hs-var">tycon'</span></a></span><span>
</span><span id="line-777"></span><span>                          </span><span class="hs-comment">-- Note [Wildcards in family instances]</span><span>
</span><span id="line-778"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_bndrs :: HsOuterTyVarBndrs () GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_bndrs"><span class="hs-identifier hs-var">feqn_bndrs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs () GhcRn
</span><a href="#local-6989586621681365677"><span class="hs-identifier hs-var">rn_outer_bndrs'</span></a></span><span>
</span><span id="line-779"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_pats :: [LHsTypeArg GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_pats"><span class="hs-identifier hs-var">feqn_pats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsArg
   (GenLocated SrcSpanAnnA (HsType GhcRn))
   (GenLocated SrcSpanAnnA (HsType GhcRn))]
</span><a href="#local-6989586621681365683"><span class="hs-identifier hs-var">pats'</span></a></span><span>
</span><span id="line-780"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_fixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_fixity"><span class="hs-identifier hs-var">feqn_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365694"><span class="hs-identifier hs-var">fixity</span></a></span><span>
</span><span id="line-781"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_rhs :: rhs'
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">rhs'
</span><a href="#local-6989586621681365679"><span class="hs-identifier hs-var">payload'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-782"></span><span>                 </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365652"><span class="hs-identifier hs-var">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-783"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-comment">-- The parent class, if we are dealing with an associated type family</span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-comment">-- instance.</span><span>
</span><span id="line-786"></span><span>    </span><span id="local-6989586621681365688"><span class="annot"><span class="annottext">mb_cls :: Maybe Name
</span><a href="#local-6989586621681365688"><span class="hs-identifier hs-var hs-var">mb_cls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365704"><span class="hs-identifier hs-var">atfi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-787"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-type">NonAssocTyFamEqn</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTyFamInfo
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-788"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamDeflt"><span class="hs-identifier hs-type">AssocTyFamDeflt</span></a></span><span> </span><span id="local-6989586621681365648"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365648"><span class="hs-identifier hs-var">cls</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365648"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-789"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInst"><span class="hs-identifier hs-type">AssocTyFamInst</span></a></span><span> </span><span id="local-6989586621681365646"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365646"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365646"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span>    </span><span class="hs-comment">-- The type variables from the instance head, if we are dealing with an</span><span>
</span><span id="line-792"></span><span>    </span><span class="hs-comment">-- associated type family instance.</span><span>
</span><span id="line-793"></span><span>    </span><span id="local-6989586621681365666"><span class="annot"><span class="annottext">inst_head_tvs :: [Name]
</span><a href="#local-6989586621681365666"><span class="hs-identifier hs-var hs-var">inst_head_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365704"><span class="hs-identifier hs-var">atfi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-794"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-type">NonAssocTyFamEqn</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTyFamInfo
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-795"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamDeflt"><span class="hs-identifier hs-type">AssocTyFamDeflt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-796"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInst"><span class="hs-identifier hs-type">AssocTyFamInst</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365645"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365645"><span class="hs-identifier hs-var">inst_head_tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365645"><span class="hs-identifier hs-var">inst_head_tvs</span></a></span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span>    </span><span id="local-6989586621681365686"><span class="annot"><span class="annottext">pat_kity_vars :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365686"><span class="hs-identifier hs-var hs-var">pat_kity_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsTyPats GhcPs -&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractHsTyArgRdrKiTyVars"><span class="hs-identifier hs-var">extractHsTyArgRdrKiTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPats GhcPs
</span><a href="#local-6989586621681365696"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-799"></span><span>             </span><span class="hs-comment">-- It is crucial that extractHsTyArgRdrKiTyVars return</span><span>
</span><span id="line-800"></span><span>             </span><span class="hs-comment">-- duplicate occurrences, since they're needed to help</span><span>
</span><span id="line-801"></span><span>             </span><span class="hs-comment">-- determine unused binders on the LHS.</span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span>    </span><span class="hs-comment">-- The SrcSpan of the LHS of the instance. For example, lhs_loc would be</span><span>
</span><span id="line-804"></span><span>    </span><span class="hs-comment">-- the highlighted part in the example below:</span><span>
</span><span id="line-805"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-806"></span><span>    </span><span class="hs-comment">--   type instance F a b c = Either a b</span><span>
</span><span id="line-807"></span><span>    </span><span class="hs-comment">--                   ^^^^^</span><span>
</span><span id="line-808"></span><span>    </span><span id="local-6989586621681365674"><span class="annot"><span class="annottext">lhs_loc :: SrcSpan
</span><a href="#local-6989586621681365674"><span class="hs-identifier hs-var hs-var">lhs_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (pass :: Pass). LHsTypeArg (GhcPass pass) -&gt; SrcSpan
</span><a href="GHC.Hs.Type.html#lhsTypeArgSrcSpan"><span class="hs-identifier hs-var">lhsTypeArgSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPats GhcPs
</span><a href="#local-6989586621681365696"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365703"><span class="hs-identifier hs-var">extra_kvars</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-809"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnFamEqn.lhs_loc&quot;</span></span><span>
</span><span id="line-810"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621681365641"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365641"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365641"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-811"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681365640"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365640"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681365639"><span class="annot"><span class="annottext">[SrcSpan]
</span><a href="#local-6989586621681365639"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365640"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#last"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">[SrcSpan]
</span><a href="#local-6989586621681365639"><span class="hs-identifier hs-var">locs</span></a></span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span>    </span><span class="annot"><a href="#local-6989586621681365654"><span class="hs-identifier hs-type">badAssocRhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>    </span><span id="local-6989586621681365654"><span class="annot"><span class="annottext">badAssocRhs :: [Name] -&gt; TcRn ()
</span><a href="#local-6989586621681365654"><span class="hs-identifier hs-var hs-var">badAssocRhs</span></a></span></span><span> </span><span id="local-6989586621681365636"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365636"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-815"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The RHS of an associated type declaration mentions&quot;</span></span><span>
</span><span id="line-816"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;out-of-scope variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365636"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-817"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365636"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;All such variables must be bound on the LHS&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span>
</span><span id="line-820"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyFamInstDecl"><span class="hs-identifier hs-type">rnTyFamInstDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInfo"><span class="hs-identifier hs-type">AssocTyFamInfo</span></a></span><span>
</span><span id="line-821"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstDecl"><span class="hs-identifier hs-type">TyFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-822"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstDecl"><span class="hs-identifier hs-type">TyFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span id="rnTyFamInstDecl"><span class="annot"><span class="annottext">rnTyFamInstDecl :: AssocTyFamInfo
-&gt; TyFamInstDecl GhcPs -&gt; RnM (TyFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstDecl"><span class="hs-identifier hs-var hs-var">rnTyFamInstDecl</span></a></span></span><span> </span><span id="local-6989586621681365632"><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365632"><span class="hs-identifier hs-var">atfi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstDecl"><span class="hs-identifier hs-type">TyFamInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tfid_xtn :: forall pass. TyFamInstDecl pass -&gt; XCTyFamInstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_xtn"><span class="hs-identifier hs-var">tfid_xtn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365629"><span class="annot"><span class="annottext">XCTyFamInstDecl GhcPs
</span><a href="#local-6989586621681365629"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tfid_eqn :: forall pass. TyFamInstDecl pass -&gt; TyFamInstEqn pass
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_eqn"><span class="hs-identifier hs-var">tfid_eqn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365627"><span class="annot"><span class="annottext">TyFamInstEqn GhcPs
</span><a href="#local-6989586621681365627"><span class="hs-identifier hs-var">eqn</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-824"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365626"><span class="annot"><span class="annottext">FamEqn GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681365626"><span class="hs-identifier hs-var">eqn'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365625"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365625"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; TyFamInstEqn GhcPs -&gt; RnM (TyFamInstEqn GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstEqn"><span class="hs-identifier hs-var">rnTyFamInstEqn</span></a></span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365632"><span class="hs-identifier hs-var">atfi</span></a></span><span> </span><span class="annot"><span class="annottext">TyFamInstEqn GhcPs
</span><a href="#local-6989586621681365627"><span class="hs-identifier hs-var">eqn</span></a></span><span>
</span><span id="line-825"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstDecl"><span class="hs-identifier hs-type">TyFamInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tfid_xtn :: XCTyFamInstDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_xtn"><span class="hs-identifier hs-var">tfid_xtn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCTyFamInstDecl GhcPs
</span><a href="#local-6989586621681365629"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tfid_eqn :: TyFamInstEqn GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tfid_eqn"><span class="hs-identifier hs-var">tfid_eqn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FamEqn GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681365626"><span class="hs-identifier hs-var">eqn'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365625"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="hs-comment">-- | Tracks whether we are renaming:</span><span>
</span><span id="line-828"></span><span class="hs-comment">--</span><span>
</span><span id="line-829"></span><span class="hs-comment">-- 1. A type family equation that is not associated</span><span>
</span><span id="line-830"></span><span class="hs-comment">--    with a parent type class ('NonAssocTyFamEqn'). Examples:</span><span>
</span><span id="line-831"></span><span class="hs-comment">--</span><span>
</span><span id="line-832"></span><span class="hs-comment">--    @</span><span>
</span><span id="line-833"></span><span class="hs-comment">--    type family F a</span><span>
</span><span id="line-834"></span><span class="hs-comment">--    type instance F Int = Bool  -- NonAssocTyFamEqn NotClosed</span><span>
</span><span id="line-835"></span><span class="hs-comment">--</span><span>
</span><span id="line-836"></span><span class="hs-comment">--    type family G a where</span><span>
</span><span id="line-837"></span><span class="hs-comment">--       G Int = Bool             -- NonAssocTyFamEqn Closed</span><span>
</span><span id="line-838"></span><span class="hs-comment">--    @</span><span>
</span><span id="line-839"></span><span class="hs-comment">--</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- 2. An associated type family default declaration ('AssocTyFamDeflt').</span><span>
</span><span id="line-841"></span><span class="hs-comment">--    Example:</span><span>
</span><span id="line-842"></span><span class="hs-comment">--</span><span>
</span><span id="line-843"></span><span class="hs-comment">--    @</span><span>
</span><span id="line-844"></span><span class="hs-comment">--    class C a where</span><span>
</span><span id="line-845"></span><span class="hs-comment">--      type A a</span><span>
</span><span id="line-846"></span><span class="hs-comment">--      type instance A a = a -&gt; a  -- AssocTyFamDeflt C</span><span>
</span><span id="line-847"></span><span class="hs-comment">--    @</span><span>
</span><span id="line-848"></span><span class="hs-comment">--</span><span>
</span><span id="line-849"></span><span class="hs-comment">-- 3. An associated type family instance declaration ('AssocTyFamInst').</span><span>
</span><span id="line-850"></span><span class="hs-comment">--    Example:</span><span>
</span><span id="line-851"></span><span class="hs-comment">--</span><span>
</span><span id="line-852"></span><span class="hs-comment">--    @</span><span>
</span><span id="line-853"></span><span class="hs-comment">--    instance C a =&gt; C [a] where</span><span>
</span><span id="line-854"></span><span class="hs-comment">--      type A [a] = Bool  -- AssocTyFamInst C [a]</span><span>
</span><span id="line-855"></span><span class="hs-comment">--    @</span><span>
</span><span id="line-856"></span><span class="hs-keyword">data</span><span> </span><span id="AssocTyFamInfo"><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInfo"><span class="hs-identifier hs-var">AssocTyFamInfo</span></a></span></span><span>
</span><span id="line-857"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NonAssocTyFamEqn"><span class="annot"><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-var">NonAssocTyFamEqn</span></a></span></span><span>
</span><span id="line-858"></span><span>      </span><span class="annot"><a href="GHC.Rename.Module.html#ClosedTyFamInfo"><span class="hs-identifier hs-type">ClosedTyFamInfo</span></a></span><span> </span><span class="hs-comment">-- Is this a closed type family?</span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AssocTyFamDeflt"><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamDeflt"><span class="hs-identifier hs-var">AssocTyFamDeflt</span></a></span></span><span>
</span><span id="line-860"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>            </span><span class="hs-comment">-- Name of the parent class</span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AssocTyFamInst"><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInst"><span class="hs-identifier hs-var">AssocTyFamInst</span></a></span></span><span>
</span><span id="line-862"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>            </span><span class="hs-comment">-- Name of the parent class</span><span>
</span><span id="line-863"></span><span>      </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>          </span><span class="hs-comment">-- Names of the tyvars of the parent instance decl</span><span>
</span><span id="line-864"></span><span>
</span><span id="line-865"></span><span class="hs-comment">-- | Tracks whether we are renaming an equation in a closed type family</span><span>
</span><span id="line-866"></span><span class="hs-comment">-- equation ('ClosedTyFam') or not ('NotClosedTyFam').</span><span>
</span><span id="line-867"></span><span class="hs-keyword">data</span><span> </span><span id="ClosedTyFamInfo"><span class="annot"><a href="GHC.Rename.Module.html#ClosedTyFamInfo"><span class="hs-identifier hs-var">ClosedTyFamInfo</span></a></span></span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NotClosedTyFam"><span class="annot"><a href="GHC.Rename.Module.html#NotClosedTyFam"><span class="hs-identifier hs-var">NotClosedTyFam</span></a></span></span><span>
</span><span id="line-869"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ClosedTyFam"><span class="annot"><a href="GHC.Rename.Module.html#ClosedTyFam"><span class="hs-identifier hs-var">ClosedTyFam</span></a></span></span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyFamInstEqn"><span class="hs-identifier hs-type">rnTyFamInstEqn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInfo"><span class="hs-identifier hs-type">AssocTyFamInfo</span></a></span><span>
</span><span id="line-872"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstEqn"><span class="hs-identifier hs-type">TyFamInstEqn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-873"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstEqn"><span class="hs-identifier hs-type">TyFamInstEqn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span id="rnTyFamInstEqn"><span class="annot"><span class="annottext">rnTyFamInstEqn :: AssocTyFamInfo
-&gt; TyFamInstEqn GhcPs -&gt; RnM (TyFamInstEqn GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstEqn"><span class="hs-identifier hs-var hs-var">rnTyFamInstEqn</span></a></span></span><span> </span><span id="local-6989586621681365623"><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365623"><span class="hs-identifier hs-var">atfi</span></a></span></span><span> </span><span id="local-6989586621681365622"><span class="annot"><span class="annottext">eqn :: TyFamInstEqn GhcPs
</span><a href="#local-6989586621681365622"><span class="hs-identifier hs-var">eqn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">feqn_tycon :: forall pass rhs. FamEqn pass rhs -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_tycon"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365621"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365621"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_rhs :: forall pass rhs. FamEqn pass rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365620"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365620"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall rhs rhs'.
HsDocContext
-&gt; AssocTyFamInfo
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; FamEqn GhcPs rhs
-&gt; (HsDocContext -&gt; rhs -&gt; RnM (rhs', FreeVars))
-&gt; RnM (FamEqn GhcRn rhs', FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamEqn"><span class="hs-identifier hs-var">rnFamEqn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#TySynCtx"><span class="hs-identifier hs-var">TySynCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365621"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365623"><span class="hs-identifier hs-var">atfi</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365618"><span class="hs-identifier hs-var">extra_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">TyFamInstEqn GhcPs
</span><a href="#local-6989586621681365622"><span class="hs-identifier hs-var">eqn</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTySyn"><span class="hs-identifier hs-var">rnTySyn</span></a></span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-877"></span><span>    </span><span id="local-6989586621681365618"><span class="annot"><span class="annottext">extra_kvs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365618"><span class="hs-identifier hs-var hs-var">extra_kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVarsKindVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVarsKindVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365620"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-878"></span><span>
</span><span id="line-879"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyFamDefltDecl"><span class="hs-identifier hs-type">rnTyFamDefltDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-880"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamDefltDecl"><span class="hs-identifier hs-type">TyFamDefltDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-881"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamDefltDecl"><span class="hs-identifier hs-type">TyFamDefltDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-882"></span><span id="rnTyFamDefltDecl"><span class="annot"><span class="annottext">rnTyFamDefltDecl :: Name -&gt; TyFamInstDecl GhcPs -&gt; RnM (TyFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamDefltDecl"><span class="hs-identifier hs-var hs-var">rnTyFamDefltDecl</span></a></span></span><span> </span><span id="local-6989586621681365613"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365613"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; TyFamInstDecl GhcPs -&gt; RnM (TyFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstDecl"><span class="hs-identifier hs-var">rnTyFamInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; AssocTyFamInfo
</span><a href="GHC.Rename.Module.html#AssocTyFamDeflt"><span class="hs-identifier hs-var">AssocTyFamDeflt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365613"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="annot"><a href="GHC.Rename.Module.html#rnDataFamInstDecl"><span class="hs-identifier hs-type">rnDataFamInstDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInfo"><span class="hs-identifier hs-type">AssocTyFamInfo</span></a></span><span>
</span><span id="line-885"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-886"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span id="rnDataFamInstDecl"><span class="annot"><span class="annottext">rnDataFamInstDecl :: AssocTyFamInfo
-&gt; DataFamInstDecl GhcPs -&gt; RnM (DataFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDataFamInstDecl"><span class="hs-identifier hs-var hs-var">rnDataFamInstDecl</span></a></span></span><span> </span><span id="local-6989586621681365612"><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365612"><span class="hs-identifier hs-var">atfi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dfid_eqn :: forall pass. DataFamInstDecl pass -&gt; FamEqn pass (HsDataDefn pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_eqn"><span class="hs-identifier hs-var">dfid_eqn</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-888"></span><span>                    </span><span id="local-6989586621681365609"><span class="annot"><span class="annottext">eqn :: FamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="#local-6989586621681365609"><span class="hs-identifier hs-var">eqn</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">feqn_tycon :: forall pass rhs. FamEqn pass rhs -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_tycon"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365608"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365608"><span class="hs-identifier hs-var">tycon</span></a></span></span><span>
</span><span id="line-889"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">feqn_rhs :: forall pass rhs. FamEqn pass rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365607"><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681365607"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365606"><span class="annot"><span class="annottext">extra_kvs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365606"><span class="hs-identifier hs-var hs-var">extra_kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractDataDefnKindVars"><span class="hs-identifier hs-var">extractDataDefnKindVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681365607"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-891"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365604"><span class="annot"><span class="annottext">FamEqn GhcRn (HsDataDefn GhcRn)
</span><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">eqn'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365603"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365603"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-892"></span><span>           </span><span class="annot"><span class="annottext">forall rhs rhs'.
HsDocContext
-&gt; AssocTyFamInfo
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; FamEqn GhcPs rhs
-&gt; (HsDocContext -&gt; rhs -&gt; RnM (rhs', FreeVars))
-&gt; RnM (FamEqn GhcRn rhs', FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamEqn"><span class="hs-identifier hs-var">rnFamEqn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#TyDataCtx"><span class="hs-identifier hs-var">TyDataCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365608"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AssocTyFamInfo
</span><a href="#local-6989586621681365612"><span class="hs-identifier hs-var">atfi</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365606"><span class="hs-identifier hs-var">extra_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">FamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="#local-6989586621681365609"><span class="hs-identifier hs-var">eqn</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsDataDefn GhcPs -&gt; RnM (HsDataDefn GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDataDefn"><span class="hs-identifier hs-var">rnDataDefn</span></a></span><span>
</span><span id="line-893"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dfid_eqn :: FamEqn GhcRn (HsDataDefn GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_eqn"><span class="hs-identifier hs-var">dfid_eqn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FamEqn GhcRn (HsDataDefn GhcRn)
</span><a href="#local-6989586621681365604"><span class="hs-identifier hs-var">eqn'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365603"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-894"></span><span>
</span><span id="line-895"></span><span class="hs-comment">-- Renaming of the associated types in instances.</span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span class="hs-comment">-- Rename associated type family decl in class</span><span>
</span><span id="line-898"></span><span class="annot"><a href="GHC.Rename.Module.html#rnATDecls"><span class="hs-identifier hs-type">rnATDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>      </span><span class="hs-comment">-- Class</span><span>
</span><span id="line-899"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyDecl"><span class="hs-identifier hs-type">LFamilyDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-900"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyDecl"><span class="hs-identifier hs-type">LFamilyDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span id="rnATDecls"><span class="annot"><span class="annottext">rnATDecls :: Name -&gt; [LFamilyDecl GhcPs] -&gt; RnM ([LFamilyDecl GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnATDecls"><span class="hs-identifier hs-var hs-var">rnATDecls</span></a></span></span><span> </span><span id="local-6989586621681365599"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365599"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365598"><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681365598"><span class="hs-identifier hs-var">at_decls</span></a></span></span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Name -&gt; FamilyDecl GhcPs -&gt; RnM (FamilyDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamDecl"><span class="hs-identifier hs-var">rnFamDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365599"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681365598"><span class="hs-identifier hs-var">at_decls</span></a></span><span>
</span><span id="line-903"></span><span>
</span><span id="line-904"></span><span id="local-6989586621681367066"><span class="annot"><a href="GHC.Rename.Module.html#rnATInstDecls"><span class="hs-identifier hs-type">rnATInstDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Module.html#AssocTyFamInfo"><span class="hs-identifier hs-type">AssocTyFamInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>           </span><span class="hs-comment">-- The function that renames</span><span>
</span><span id="line-905"></span><span>                  </span><span class="annot"><a href="#local-6989586621681367066"><span class="hs-identifier hs-type">decl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>               </span><span class="hs-comment">-- an instance. rnTyFamInstDecl</span><span>
</span><span id="line-906"></span><span>                  </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367066"><span class="hs-identifier hs-type">decl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- or rnDataFamInstDecl</span><span>
</span><span id="line-907"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>      </span><span class="hs-comment">-- Class</span><span>
</span><span id="line-908"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-909"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367066"><span class="hs-identifier hs-type">decl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-910"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367066"><span class="hs-identifier hs-type">decl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-911"></span><span class="hs-comment">-- Used for data and type family defaults in a class decl</span><span>
</span><span id="line-912"></span><span class="hs-comment">-- and the family instance declarations in an instance</span><span>
</span><span id="line-913"></span><span class="hs-comment">--</span><span>
</span><span id="line-914"></span><span class="hs-comment">-- NB: We allow duplicate associated-type decls;</span><span>
</span><span id="line-915"></span><span class="hs-comment">--     See Note [Associated type instances] in GHC.Tc.TyCl.Instance</span><span>
</span><span id="line-916"></span><span id="rnATInstDecls"><span class="annot"><span class="annottext">rnATInstDecls :: forall (decl :: * -&gt; *).
(AssocTyFamInfo -&gt; decl GhcPs -&gt; RnM (decl GhcRn, FreeVars))
-&gt; Name
-&gt; [Name]
-&gt; [LocatedA (decl GhcPs)]
-&gt; RnM ([LocatedA (decl GhcRn)], FreeVars)
</span><a href="GHC.Rename.Module.html#rnATInstDecls"><span class="hs-identifier hs-var hs-var">rnATInstDecls</span></a></span></span><span> </span><span id="local-6989586621681365596"><span class="annot"><span class="annottext">AssocTyFamInfo -&gt; decl GhcPs -&gt; RnM (decl GhcRn, FreeVars)
</span><a href="#local-6989586621681365596"><span class="hs-identifier hs-var">rnFun</span></a></span></span><span> </span><span id="local-6989586621681365595"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365595"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621681365594"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365594"><span class="hs-identifier hs-var">tv_ns</span></a></span></span><span> </span><span id="local-6989586621681365593"><span class="annot"><span class="annottext">[LocatedA (decl GhcPs)]
</span><a href="#local-6989586621681365593"><span class="hs-identifier hs-var">at_insts</span></a></span></span><span>
</span><span id="line-917"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AssocTyFamInfo -&gt; decl GhcPs -&gt; RnM (decl GhcRn, FreeVars)
</span><a href="#local-6989586621681365596"><span class="hs-identifier hs-var">rnFun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; AssocTyFamInfo
</span><a href="GHC.Rename.Module.html#AssocTyFamInst"><span class="hs-identifier hs-var">AssocTyFamInst</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365595"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365594"><span class="hs-identifier hs-var">tv_ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA (decl GhcPs)]
</span><a href="#local-6989586621681365593"><span class="hs-identifier hs-var">at_insts</span></a></span><span>
</span><span id="line-918"></span><span>    </span><span class="hs-comment">-- See Note [Renaming associated types]</span><span>
</span><span id="line-919"></span><span>
</span><span id="line-920"></span><span class="hs-comment">{- Note [Wildcards in family instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Wild cards can be used in type/data family instance declarations to indicate
that the name of a type variable doesn't matter. Each wild card will be
replaced with a new unique type variable. For instance:

    type family F a b :: *
    type instance F Int _ = Int

is the same as

    type family F a b :: *
    type instance F Int b = Int

This is implemented as follows: Unnamed wildcards remain unchanged after
the renamer, and then given fresh meta-variables during typechecking, and
it is handled pretty much the same way as the ones in partial type signatures.
We however don't want to emit hole constraints on wildcards in family
instances, so we turn on PartialTypeSignatures and turn off warning flag to
let typechecker know this.
See related Note [Wildcards in visible kind application] in GHC.Tc.Gen.HsType

Note [Unused type variables in family instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When the flag -fwarn-unused-type-patterns is on, the compiler reports
warnings about unused type variables in type-family instances. A
tpye variable is considered used (i.e. cannot be turned into a wildcard)
when

 * it occurs on the RHS of the family instance
   e.g.   type instance F a b = a    -- a is used on the RHS

 * it occurs multiple times in the patterns on the LHS
   e.g.   type instance F a a = Int  -- a appears more than once on LHS

 * it is one of the instance-decl variables, for associated types
   e.g.   instance C (a,b) where
            type T (a,b) = a
   Here the type pattern in the type instance must be the same as that
   for the class instance, so
            type T (a,_) = a
   would be rejected.  So we should not complain about an unused variable b

As usual, the warnings are not reported for type variables with names
beginning with an underscore.

Extra-constraints wild cards are not supported in type/data family
instance declarations.

Relevant tickets: #3699, #10586, #10982 and #11451.

Note [Renaming associated types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When renaming a type/data family instance, be it top-level or associated with
a class, we must check that all of the type variables mentioned on the RHS are
properly scoped. Specifically, the rule is this:

  Every variable mentioned on the RHS of a type instance declaration
  (whether associated or not) must be either
  * Mentioned on the LHS, or
  * Mentioned in an outermost kind signature on the RHS
    (see Note [Implicit quantification in type synonyms])

Here is a simple example of something we should reject:

  class C a b where
    type F a x
  instance C Int Bool where
    type F Int x = z

Here, `z` is mentioned on the RHS of the associated instance without being
mentioned on the LHS, nor is `z` mentioned in an outermost kind signature. The
renamer will reject `z` as being out of scope without much fuss.

Things get slightly trickier when the instance header itself binds type
variables. Consider this example (adapted from #5515):

   instance C (p,q) z where
      type F (p,q) x = (x, z)

According to the rule above, this instance is improperly scoped. However, due
to the way GHC's renamer works, `z` is /technically/ in scope, as GHC will
always bring type variables from an instance header into scope over the
associated type family instances. As a result, the renamer won't simply reject
the `z` as being out of scope (like it would for the `type F Int x = z`
example) unless further action is taken. It is important to reject this sort of
thing in the renamer, because if it is allowed to make it through to the
typechecker, unexpected shenanigans can occur (see #18021 for examples).

To prevent these sorts of shenanigans, we reject programs like the one above
with an extra validity check in rnFamEqn. For each type variable bound in the
parent instance head, we check if it is mentioned on the RHS of the associated
family instance but not bound on the LHS. If any of the instance-head-bound
variables meet these criteria, we throw an error.
(See rnFamEqn.improperly_scoped for how this is implemented.)

Some additional wrinkles:

* This Note only applies to *instance* declarations.  In *class* declarations
  there is no RHS to worry about, and the class variables can all be in scope
  (#5862):

    class Category (x :: k -&gt; k -&gt; *) where
      type Ob x :: k -&gt; Constraint
      id :: Ob x a =&gt; x a a
      (.) :: (Ob x a, Ob x b, Ob x c) =&gt; x b c -&gt; x a b -&gt; x a c

  Here 'k' is in scope in the kind signature, just like 'x'.

* Although type family equations can bind type variables with explicit foralls,
  it need not be the case that all variables that appear on the RHS must be
  bound by a forall. For instance, the following is acceptable:

    class C4 a where
      type T4 a b
    instance C4 (Maybe a) where
      type forall b. T4 (Maybe a) b = Either a b

  Even though `a` is not bound by the forall, this is still accepted because `a`
  was previously bound by the `instance C4 (Maybe a)` part. (see #16116).

* In addition to the validity check in rnFamEqn.improperly_scoped, there is an
  additional check in GHC.Tc.Validity.checkFamPatBinders that checks each family
  instance equation for type variables used on the RHS but not bound on the
  LHS. This is not made redundant by rmFamEqn.improperly_scoped, as there are
  programs that each check will reject that the other check will not catch:

  - checkValidFamPats is used on all forms of family instances, whereas
    rmFamEqn.improperly_scoped only checks associated family instances. Since
    checkFamPatBinders occurs after typechecking, it can catch programs that
    introduce dodgy scoping by way of type synonyms (see #7536), which is
    impractical to accomplish in the renamer.
  - rnFamEqn.improperly_scoped catches some programs that, if allowed to escape
    the renamer, would accidentally be accepted by the typechecker. Here is one
    such program (#18021):

      class C5 a where
        data family D a

      instance forall a. C5 Int where
        data instance D Int = MkD a

    If this is not rejected in the renamer, the typechecker would treat this
    program as though the `a` were existentially quantified, like so:

      data instance D Int = forall a. MkD a

    This is likely not what the user intended!

    Here is another such program (#9574):

      class Funct f where
        type Codomain f
      instance Funct ('KProxy :: KProxy o) where
        type Codomain 'KProxy = NatTr (Proxy :: o -&gt; Type)

    Where:

      data Proxy (a :: k) = Proxy
      data KProxy (t :: Type) = KProxy
      data NatTr (c :: o -&gt; Type)

    Note that the `o` in the `Codomain 'KProxy` instance should be considered
    improperly scoped. It does not meet the criteria for being explicitly
    quantified, as it is not mentioned by name on the LHS, nor does it meet the
    criteria for being implicitly quantified, as it is used in a RHS kind
    signature that is not outermost (see Note [Implicit quantification in type
    synonyms]). However, `o` /is/ bound by the instance header, so if this
    program is not rejected by the renamer, the typechecker would treat it as
    though you had written this:

      instance Funct ('KProxy :: KProxy o) where
        type Codomain ('KProxy @o) = NatTr (Proxy :: o -&gt; Type)

    Although this is a valid program, it's probably a stretch too far to turn
    `type Codomain 'KProxy = ...` into `type Codomain ('KProxy @o) = ...` here.
    If the user really wants the latter, it is simple enough to communicate
    their intent by mentioning `o` on the LHS by name.

Note [Type family equations and occurrences]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In most data/type family equations, the type family name used in the equation
is treated as an occurrence. For example:

  module A where
    type family F a

  module B () where
    import B (F)
    type instance F Int = Bool

We do not want to warn about `F` being unused in the module `B`, as the
instance constitutes a use site for `F`. The exception to this rule is closed
type families, whose equations constitute a definition, not occurrences. For
example:

  module C () where
    type family CF a where
      CF Char = Float

Here, we /do/ want to warn that `CF` is unused in the module `C`, as it is
defined but not used (#18470).

GHC accomplishes this in rnFamInstEqn when determining the set of free
variables to return at the end. If renaming a data family or open type family
equation, we add the name of the type family constructor to the set of returned
free variables to ensure that the name is marked as an occurrence. If renaming
a closed type family equation, we avoid adding the type family constructor name
to the free variables. This is quite simple, but it is not a perfect solution.
Consider this example:

  module X () where
    type family F a where
      F Int = Bool
      F Double = F Int

At present, GHC will treat any use of a type family constructor on the RHS of a
type family equation as an occurrence. Since `F` is used on the RHS of the
second equation of `F`, it is treated as an occurrence, causing `F` not to be
warned about. This is not ideal, since `F` isn't exported&#8212;it really /should/
cause a warning to be emitted. There is some discussion in #10089/#12920 about
how this limitation might be overcome, but until then, we stick to the
simplistic solution above, as it fixes the egregious bug in #18470.
-}</span><span>
</span><span id="line-1144"></span><span>
</span><span id="line-1145"></span><span>
</span><span id="line-1146"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Stand-alone deriving declarations}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-1153"></span><span>
</span><span id="line-1154"></span><span class="annot"><a href="GHC.Rename.Module.html#rnSrcDerivDecl"><span class="hs-identifier hs-type">rnSrcDerivDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivDecl"><span class="hs-identifier hs-type">DerivDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivDecl"><span class="hs-identifier hs-type">DerivDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1155"></span><span id="rnSrcDerivDecl"><span class="annot"><span class="annottext">rnSrcDerivDecl :: DerivDecl GhcPs -&gt; RnM (DerivDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnSrcDerivDecl"><span class="hs-identifier hs-var hs-var">rnSrcDerivDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivDecl"><span class="hs-identifier hs-type">DerivDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XCDerivDecl GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365591"><span class="annot"><span class="annottext">LHsSigWcType GhcPs
</span><a href="#local-6989586621681365591"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681365590"><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681365590"><span class="hs-identifier hs-var">mds</span></a></span></span><span> </span><span id="local-6989586621681365589"><span class="annot"><span class="annottext">Maybe (XRec GhcPs OverlapMode)
</span><a href="#local-6989586621681365589"><span class="hs-identifier hs-var">overlap</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1156"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365588"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365588"><span class="hs-identifier hs-var">standalone_deriv_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.StandaloneDeriving</span></span><span>
</span><span id="line-1157"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365588"><span class="hs-identifier hs-var">standalone_deriv_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Rename.Module.html#standaloneDerivErr"><span class="hs-identifier hs-var">standaloneDerivErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; Maybe SDoc -&gt; LHsSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-var">checkInferredVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681365583"><span class="hs-identifier hs-var">inf_err</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365582"><span class="hs-identifier hs-var">nowc_ty</span></a></span><span>
</span><span id="line-1159"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365581"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (DerivStrategy GhcRn))
</span><a href="#local-6989586621681365581"><span class="hs-identifier hs-var">mds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365580"><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsSigType GhcRn))
</span><a href="#local-6989586621681365580"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365579"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365579"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a.
HsDocContext
-&gt; Maybe (LDerivStrategy GhcPs)
-&gt; RnM (a, FreeVars)
-&gt; RnM (Maybe (LDerivStrategy GhcRn), a, FreeVars)
</span><a href="GHC.Rename.Module.html#rnLDerivStrategy"><span class="hs-identifier hs-var">rnLDerivStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681365590"><span class="hs-identifier hs-var">mds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; LHsSigWcType GhcPs -&gt; RnM (LHsSigWcType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigWcType"><span class="hs-identifier hs-var">rnHsSigWcType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcPs
</span><a href="#local-6989586621681365591"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1160"></span><span>         </span><span class="hs-comment">-- Check if there are any nested `forall`s or contexts, which are</span><span>
</span><span id="line-1161"></span><span>         </span><span class="hs-comment">-- illegal in the type of an instance declaration (see</span><span>
</span><span id="line-1162"></span><span>         </span><span class="hs-comment">-- Note [No nested foralls or contexts in instance types] in</span><span>
</span><span id="line-1163"></span><span>         </span><span class="hs-comment">-- GHC.Hs.Type).</span><span>
</span><span id="line-1164"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc -&gt; LHsType GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-var">addNoNestedForallsContextsErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1165"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Standalone-derived instance head&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). LHsSigType (GhcPass p) -&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#getLHsInstDeclHead"><span class="hs-identifier hs-var">getLHsInstDeclHead</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall pass. LHsSigWcType pass -&gt; LHsSigType pass
</span><a href="GHC.Hs.Type.html#dropWildCards"><span class="hs-identifier hs-var">dropWildCards</span></a></span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsSigType GhcRn))
</span><a href="#local-6989586621681365580"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcRn) -&gt; SrcSpan -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#warnNoDerivStrat"><span class="hs-identifier hs-var">warnNoDerivStrat</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (DerivStrategy GhcRn))
</span><a href="#local-6989586621681365581"><span class="hs-identifier hs-var">mds'</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365574"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-1168"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XCDerivDecl pass
-&gt; LHsSigWcType pass
-&gt; Maybe (LDerivStrategy pass)
-&gt; Maybe (XRec pass OverlapMode)
-&gt; DerivDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DerivDecl"><span class="hs-identifier hs-var">DerivDecl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsSigType GhcRn))
</span><a href="#local-6989586621681365580"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (DerivStrategy GhcRn))
</span><a href="#local-6989586621681365581"><span class="hs-identifier hs-var">mds'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs OverlapMode)
</span><a href="#local-6989586621681365589"><span class="hs-identifier hs-var">overlap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365579"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1169"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1170"></span><span>    </span><span id="local-6989586621681365584"><span class="annot"><span class="annottext">ctxt :: HsDocContext
</span><a href="#local-6989586621681365584"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Rename.Utils.html#DerivDeclCtx"><span class="hs-identifier hs-var">DerivDeclCtx</span></a></span><span>
</span><span id="line-1171"></span><span>    </span><span id="local-6989586621681365583"><span class="annot"><span class="annottext">inf_err :: Maybe SDoc
</span><a href="#local-6989586621681365583"><span class="hs-identifier hs-var hs-var">inf_err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Inferred type variables are not allowed&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1172"></span><span>    </span><span id="local-6989586621681365574"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621681365574"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365582"><span class="hs-identifier hs-var">nowc_ty</span></a></span><span>
</span><span id="line-1173"></span><span>    </span><span id="local-6989586621681365582"><span class="annot"><span class="annottext">nowc_ty :: LHsSigType GhcPs
</span><a href="#local-6989586621681365582"><span class="hs-identifier hs-var hs-var">nowc_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall pass. LHsSigWcType pass -&gt; LHsSigType pass
</span><a href="GHC.Hs.Type.html#dropWildCards"><span class="hs-identifier hs-var">dropWildCards</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcPs
</span><a href="#local-6989586621681365591"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1174"></span><span>
</span><span id="line-1175"></span><span class="annot"><a href="GHC.Rename.Module.html#standaloneDerivErr"><span class="hs-identifier hs-type">standaloneDerivErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1176"></span><span id="standaloneDerivErr"><span class="annot"><span class="annottext">standaloneDerivErr :: SDoc
</span><a href="GHC.Rename.Module.html#standaloneDerivErr"><span class="hs-identifier hs-var hs-var">standaloneDerivErr</span></a></span></span><span>
</span><span id="line-1177"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal standalone deriving declaration&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use StandaloneDeriving to enable this extension&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1179"></span><span>
</span><span id="line-1180"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Rules}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-1187"></span><span>
</span><span id="line-1188"></span><span class="annot"><a href="GHC.Rename.Module.html#rnHsRuleDecls"><span class="hs-identifier hs-type">rnHsRuleDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecls"><span class="hs-identifier hs-type">RuleDecls</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecls"><span class="hs-identifier hs-type">RuleDecls</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1189"></span><span id="rnHsRuleDecls"><span class="annot"><span class="annottext">rnHsRuleDecls :: RuleDecls GhcPs -&gt; RnM (RuleDecls GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnHsRuleDecls"><span class="hs-identifier hs-var hs-var">rnHsRuleDecls</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsRules"><span class="hs-identifier hs-type">HsRules</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rds_src :: forall pass. RuleDecls pass -&gt; SourceText
</span><a href="Language.Haskell.Syntax.Decls.html#rds_src"><span class="hs-identifier hs-var">rds_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365570"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681365570"><span class="hs-identifier hs-var">src</span></a></span></span><span>
</span><span id="line-1190"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rds_rules :: forall pass. RuleDecls pass -&gt; [LRuleDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#rds_rules"><span class="hs-identifier hs-var">rds_rules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365568"><span class="annot"><span class="annottext">[LRuleDecl GhcPs]
</span><a href="#local-6989586621681365568"><span class="hs-identifier hs-var">rules</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365567"><span class="annot"><span class="annottext">[LocatedA (RuleDecl GhcRn)]
</span><a href="#local-6989586621681365567"><span class="hs-identifier hs-var">rn_rules</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681365566"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365566"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="annot"><span class="annottext">RuleDecl GhcPs -&gt; RnM (RuleDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnHsRuleDecl"><span class="hs-identifier hs-var">rnHsRuleDecl</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcPs]
</span><a href="#local-6989586621681365568"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-1192"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsRules"><span class="hs-identifier hs-type">HsRules</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rds_ext :: XCRuleDecls GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#rds_ext"><span class="hs-identifier hs-var">rds_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1193"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rds_src :: SourceText
</span><a href="Language.Haskell.Syntax.Decls.html#rds_src"><span class="hs-identifier hs-var">rds_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681365570"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1194"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rds_rules :: [LRuleDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#rds_rules"><span class="hs-identifier hs-var">rds_rules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (RuleDecl GhcRn)]
</span><a href="#local-6989586621681365567"><span class="hs-identifier hs-var">rn_rules</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365566"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1195"></span><span>
</span><span id="line-1196"></span><span class="annot"><a href="GHC.Rename.Module.html#rnHsRuleDecl"><span class="hs-identifier hs-type">rnHsRuleDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1197"></span><span id="rnHsRuleDecl"><span class="annot"><span class="annottext">rnHsRuleDecl :: RuleDecl GhcPs -&gt; RnM (RuleDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnHsRuleDecl"><span class="hs-identifier hs-var hs-var">rnHsRuleDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsRule"><span class="hs-identifier hs-type">HsRule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_name :: forall pass. RuleDecl pass -&gt; XRec pass (SourceText, CLabelString)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_name"><span class="hs-identifier hs-var">rd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365561"><span class="annot"><span class="annottext">XRec GhcPs (SourceText, CLabelString)
</span><a href="#local-6989586621681365561"><span class="hs-identifier hs-var">rule_name</span></a></span></span><span>
</span><span id="line-1198"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_act :: forall pass. RuleDecl pass -&gt; Activation
</span><a href="Language.Haskell.Syntax.Decls.html#rd_act"><span class="hs-identifier hs-var">rd_act</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365559"><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621681365559"><span class="hs-identifier hs-var">act</span></a></span></span><span>
</span><span id="line-1199"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_tyvs :: forall pass.
RuleDecl pass -&gt; Maybe [LHsTyVarBndr () (NoGhcTc pass)]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tyvs"><span class="hs-identifier hs-var">rd_tyvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365557"><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () (NoGhcTc GhcPs)]
</span><a href="#local-6989586621681365557"><span class="hs-identifier hs-var">tyvs</span></a></span></span><span>
</span><span id="line-1200"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: forall pass. RuleDecl pass -&gt; [LRuleBndr pass]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365555"><span class="annot"><span class="annottext">[LRuleBndr GhcPs]
</span><a href="#local-6989586621681365555"><span class="hs-identifier hs-var">tmvs</span></a></span></span><span>
</span><span id="line-1201"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: forall pass. RuleDecl pass -&gt; XRec pass (HsExpr pass)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365553"><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs)
</span><a href="#local-6989586621681365553"><span class="hs-identifier hs-var">lhs</span></a></span></span><span>
</span><span id="line-1202"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: forall pass. RuleDecl pass -&gt; XRec pass (HsExpr pass)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365551"><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs)
</span><a href="#local-6989586621681365551"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365550"><span class="annot"><span class="annottext">rdr_names_w_loc :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365550"><span class="hs-identifier hs-var hs-var">rdr_names_w_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RuleBndr GhcPs -&gt; GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365549"><span class="hs-identifier hs-var">get_var</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcPs]
</span><a href="#local-6989586621681365555"><span class="hs-identifier hs-var">tmvs</span></a></span><span>
</span><span id="line-1204"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName] -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNamesN"><span class="hs-identifier hs-var">checkDupRdrNamesN</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365550"><span class="hs-identifier hs-var">rdr_names_w_loc</span></a></span><span>
</span><span id="line-1205"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName] -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier hs-var">checkShadowedRdrNames</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365550"><span class="hs-identifier hs-var">rdr_names_w_loc</span></a></span><span>
</span><span id="line-1206"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365548"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [Name]
</span><a href="GHC.Rename.Utils.html#newLocalBndrsRn"><span class="hs-identifier hs-var">newLocalBndrsRn</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365550"><span class="hs-identifier hs-var">rdr_names_w_loc</span></a></span><span>
</span><span id="line-1207"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365547"><span class="annot"><span class="annottext">doc :: HsDocContext
</span><a href="#local-6989586621681365547"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CLabelString -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#RuleCtx"><span class="hs-identifier hs-var">RuleCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (SourceText, CLabelString)
</span><a href="#local-6989586621681365561"><span class="hs-identifier hs-var">rule_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1208"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall b.
HsDocContext
-&gt; Maybe [LHsTyVarBndr () GhcPs]
-&gt; (Maybe [LHsTyVarBndr () GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.Module.html#bindRuleTyVars"><span class="hs-identifier hs-var">bindRuleTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365547"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () (NoGhcTc GhcPs)]
</span><a href="#local-6989586621681365557"><span class="hs-identifier hs-var">tyvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365544"><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn]
</span><a href="#local-6989586621681365544"><span class="hs-identifier hs-var">tyvs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1209"></span><span>         </span><span class="annot"><span class="annottext">forall ty_bndrs a.
HsDocContext
-&gt; Maybe ty_bndrs
-&gt; [LRuleBndr GhcPs]
-&gt; [Name]
-&gt; ([LRuleBndr GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Module.html#bindRuleTmVars"><span class="hs-identifier hs-var">bindRuleTmVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365547"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn]
</span><a href="#local-6989586621681365544"><span class="hs-identifier hs-var">tyvs'</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcPs]
</span><a href="#local-6989586621681365555"><span class="hs-identifier hs-var">tmvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365542"><span class="annot"><span class="annottext">[LRuleBndr GhcRn]
</span><a href="#local-6989586621681365542"><span class="hs-identifier hs-var">tmvs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1210"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365541"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365541"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365540"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365540"><span class="hs-identifier hs-var">fv_lhs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs) -&gt; TcRn (LHsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs)
</span><a href="#local-6989586621681365553"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1211"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365539"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365539"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365538"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365538"><span class="hs-identifier hs-var">fv_rhs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs) -&gt; TcRn (LHsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsExpr GhcPs)
</span><a href="#local-6989586621681365551"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1212"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CLabelString -&gt; [Name] -&gt; LHsExpr GhcRn -&gt; FreeVars -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#checkValidRule"><span class="hs-identifier hs-var">checkValidRule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (SourceText, CLabelString)
</span><a href="#local-6989586621681365561"><span class="hs-identifier hs-var">rule_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365548"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365541"><span class="hs-identifier hs-var">lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365540"><span class="hs-identifier hs-var">fv_lhs'</span></a></span><span>
</span><span id="line-1213"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsRule"><span class="hs-identifier hs-type">HsRule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_ext :: XHsRule GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#rd_ext"><span class="hs-identifier hs-var">rd_ext</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; HsRuleRn
</span><a href="Language.Haskell.Syntax.Decls.html#HsRuleRn"><span class="hs-identifier hs-var">HsRuleRn</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365540"><span class="hs-identifier hs-var">fv_lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365538"><span class="hs-identifier hs-var">fv_rhs'</span></a></span><span>
</span><span id="line-1214"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_name :: XRec GhcRn (SourceText, CLabelString)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_name"><span class="hs-identifier hs-var">rd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (SourceText, CLabelString)
</span><a href="#local-6989586621681365561"><span class="hs-identifier hs-var">rule_name</span></a></span><span>
</span><span id="line-1215"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_act :: Activation
</span><a href="Language.Haskell.Syntax.Decls.html#rd_act"><span class="hs-identifier hs-var">rd_act</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621681365559"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-1216"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_tyvs :: Maybe [LHsTyVarBndr () (NoGhcTc GhcRn)]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tyvs"><span class="hs-identifier hs-var">rd_tyvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn]
</span><a href="#local-6989586621681365544"><span class="hs-identifier hs-var">tyvs'</span></a></span><span>
</span><span id="line-1217"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: [LRuleBndr GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcRn]
</span><a href="#local-6989586621681365542"><span class="hs-identifier hs-var">tmvs'</span></a></span><span>
</span><span id="line-1218"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: LHsExpr GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365541"><span class="hs-identifier hs-var">lhs'</span></a></span><span>
</span><span id="line-1219"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: LHsExpr GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681365539"><span class="hs-identifier hs-var">rhs'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365540"><span class="hs-identifier hs-var">fv_lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365538"><span class="hs-identifier hs-var">fv_rhs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1220"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1221"></span><span>    </span><span class="annot"><a href="#local-6989586621681365549"><span class="hs-identifier hs-type">get_var</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-1222"></span><span>    </span><span id="local-6989586621681365549"><span class="annot"><span class="annottext">get_var :: RuleBndr GhcPs -&gt; GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365549"><span class="hs-identifier hs-var hs-var">get_var</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndrSig"><span class="hs-identifier hs-type">RuleBndrSig</span></a></span><span> </span><span class="annot"><span class="annottext">XRuleBndrSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365533"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365533"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365533"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1223"></span><span>    </span><span class="annot"><a href="#local-6989586621681365549"><span class="hs-identifier hs-var">get_var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span class="annot"><span class="annottext">XCRuleBndr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365531"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365531"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365531"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span id="local-6989586621681366985"><span id="local-6989586621681366986"><span class="annot"><a href="GHC.Rename.Module.html#bindRuleTmVars"><span class="hs-identifier hs-type">bindRuleTmVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366986"><span class="hs-identifier hs-type">ty_bndrs</span></a></span><span>
</span><span id="line-1226"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1227"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681366985"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1228"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681366985"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1229"></span><span id="bindRuleTmVars"><span class="annot"><span class="annottext">bindRuleTmVars :: forall ty_bndrs a.
HsDocContext
-&gt; Maybe ty_bndrs
-&gt; [LRuleBndr GhcPs]
-&gt; [Name]
-&gt; ([LRuleBndr GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Module.html#bindRuleTmVars"><span class="hs-identifier hs-var hs-var">bindRuleTmVars</span></a></span></span><span> </span><span id="local-6989586621681365521"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365521"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681365520"><span class="annot"><span class="annottext">Maybe ty_bndrs
</span><a href="#local-6989586621681365520"><span class="hs-identifier hs-var">tyvs</span></a></span></span><span> </span><span id="local-6989586621681365519"><span class="annot"><span class="annottext">[LRuleBndr GhcPs]
</span><a href="#local-6989586621681365519"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621681365518"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365518"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621681365517"><span class="annot"><span class="annottext">[LRuleBndr GhcRn] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365517"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1230"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
-&gt; [Name]
-&gt; ([GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcPs]
</span><a href="#local-6989586621681365519"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365518"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365515"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)]
</span><a href="#local-6989586621681365515"><span class="hs-identifier hs-var">vars'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1231"></span><span>    </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-var">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365518"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LRuleBndr GhcRn] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365517"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)]
</span><a href="#local-6989586621681365515"><span class="hs-identifier hs-var">vars'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1232"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1233"></span><span>    </span><span id="local-6989586621681365516"><span class="annot"><span class="annottext">go :: [GenLocated SrcSpan (RuleBndr GhcPs)]
-&gt; [Name]
-&gt; ([GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365516"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365514"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365514"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span class="annot"><span class="annottext">XCRuleBndr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365513"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681365513"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681365512"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
</span><a href="#local-6989586621681365512"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365511"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365511"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681365510"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365510"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365509"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365509"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1234"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
-&gt; [Name]
-&gt; ([GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
</span><a href="#local-6989586621681365512"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365510"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365508"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)]
</span><a href="#local-6989586621681365508"><span class="hs-identifier hs-var">vars'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1235"></span><span>        </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365509"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365514"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XCRuleBndr pass -&gt; LIdP pass -&gt; RuleBndr pass
</span><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-var">RuleBndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681365513"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365511"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)]
</span><a href="#local-6989586621681365508"><span class="hs-identifier hs-var">vars'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>
</span><span id="line-1237"></span><span>    </span><span class="annot"><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365507"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365507"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndrSig"><span class="hs-identifier hs-type">RuleBndrSig</span></a></span><span> </span><span class="annot"><span class="annottext">XRuleBndrSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365506"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681365506"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365505"><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621681365505"><span class="hs-identifier hs-var">bsig</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681365504"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
</span><a href="#local-6989586621681365504"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1238"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681365503"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365503"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681365502"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365502"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365501"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365501"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1239"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigType"><span class="hs-identifier hs-var">rnHsPatSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="#local-6989586621681365499"><span class="hs-identifier hs-var">bind_free_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365521"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621681365505"><span class="hs-identifier hs-var">bsig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365498"><span class="annot"><span class="annottext">HsPatSigType GhcRn
</span><a href="#local-6989586621681365498"><span class="hs-identifier hs-var">bsig'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1240"></span><span>        </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
-&gt; [Name]
-&gt; ([GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
</span><a href="#local-6989586621681365504"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365502"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365497"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)]
</span><a href="#local-6989586621681365497"><span class="hs-identifier hs-var">vars'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1241"></span><span>        </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365501"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365507"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XRuleBndrSig pass
-&gt; LIdP pass -&gt; HsPatSigType pass -&gt; RuleBndr pass
</span><a href="Language.Haskell.Syntax.Decls.html#RuleBndrSig"><span class="hs-identifier hs-var">RuleBndrSig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681365506"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365503"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcRn
</span><a href="#local-6989586621681365498"><span class="hs-identifier hs-var">bsig'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)]
</span><a href="#local-6989586621681365497"><span class="hs-identifier hs-var">vars'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>
</span><span id="line-1243"></span><span>    </span><span class="annot"><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681365496"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365496"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681365496"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1244"></span><span>    </span><span class="annot"><a href="#local-6989586621681365516"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681365495"><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
</span><a href="#local-6989586621681365495"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621681365494"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365494"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcRn)] -&gt; RnM (a, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bindRuleVars&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (RuleBndr GhcPs)]
</span><a href="#local-6989586621681365495"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365494"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1245"></span><span>
</span><span id="line-1246"></span><span>    </span><span id="local-6989586621681365499"><span class="annot"><span class="annottext">bind_free_tvs :: HsPatSigTypeScoping
</span><a href="#local-6989586621681365499"><span class="hs-identifier hs-var hs-var">bind_free_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ty_bndrs
</span><a href="#local-6989586621681365520"><span class="hs-identifier hs-var">tyvs</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><span class="annottext">Maybe ty_bndrs
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="GHC.Rename.HsType.html#AlwaysBind"><span class="hs-identifier hs-var">AlwaysBind</span></a></span><span>
</span><span id="line-1247"></span><span>                                 </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ty_bndrs
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="GHC.Rename.HsType.html#NeverBind"><span class="hs-identifier hs-var">NeverBind</span></a></span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span id="local-6989586621681366987"><span class="annot"><a href="GHC.Rename.Module.html#bindRuleTyVars"><span class="hs-identifier hs-type">bindRuleTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1250"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681366987"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1251"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681366987"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1252"></span><span id="bindRuleTyVars"><span class="annot"><span class="annottext">bindRuleTyVars :: forall b.
HsDocContext
-&gt; Maybe [LHsTyVarBndr () GhcPs]
-&gt; (Maybe [LHsTyVarBndr () GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.Module.html#bindRuleTyVars"><span class="hs-identifier hs-var hs-var">bindRuleTyVars</span></a></span></span><span> </span><span id="local-6989586621681365489"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365489"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365488"><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621681365488"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365487"><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn] -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621681365487"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var">bindLHsTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365489"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621681365488"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn] -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621681365487"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1254"></span><span class="annot"><a href="GHC.Rename.Module.html#bindRuleTyVars"><span class="hs-identifier hs-var">bindRuleTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcPs]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365484"><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn] -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621681365484"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr () GhcRn] -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621681365484"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1255"></span><span>
</span><span id="line-1256"></span><span class="hs-comment">{-
Note [Rule LHS validity checking]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Check the shape of a rewrite rule LHS.  Currently we only allow
LHSs of the form @(f e1 .. en)@, where @f@ is not one of the
@forall@'d variables.

We used restrict the form of the 'ei' to prevent you writing rules
with LHSs with a complicated desugaring (and hence unlikely to match);
(e.g. a case expression is not allowed: too elaborate.)

But there are legitimate non-trivial args ei, like sections and
lambdas.  So it seems simmpler not to check at all, and that is why
check_e is commented out.
-}</span><span>
</span><span id="line-1271"></span><span>
</span><span id="line-1272"></span><span class="annot"><a href="GHC.Rename.Module.html#checkValidRule"><span class="hs-identifier hs-type">checkValidRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span id="checkValidRule"><span class="annot"><span class="annottext">checkValidRule :: CLabelString -&gt; [Name] -&gt; LHsExpr GhcRn -&gt; FreeVars -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#checkValidRule"><span class="hs-identifier hs-var hs-var">checkValidRule</span></a></span></span><span> </span><span id="local-6989586621681365482"><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365482"><span class="hs-identifier hs-var">rule_name</span></a></span></span><span> </span><span id="local-6989586621681365481"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365481"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span id="local-6989586621681365480"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365480"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span id="local-6989586621681365479"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365479"><span class="hs-identifier hs-var">fv_lhs'</span></a></span></span><span>
</span><span id="line-1274"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span>       </span><span class="hs-comment">-- Check for the form of the LHS</span><span>
</span><span id="line-1275"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; LHsExpr GhcRn -&gt; Maybe (HsExpr GhcRn)
</span><a href="GHC.Rename.Module.html#validRuleLhs"><span class="hs-identifier hs-var">validRuleLhs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365481"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365480"><span class="hs-identifier hs-var">lhs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1276"></span><span>                </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1277"></span><span>                </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365477"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365477"><span class="hs-identifier hs-var">bad</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabelString -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn -&gt; SDoc
</span><a href="GHC.Rename.Module.html#badRuleLhsErr"><span class="hs-identifier hs-var">badRuleLhsErr</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365482"><span class="hs-identifier hs-var">rule_name</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365480"><span class="hs-identifier hs-var">lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365477"><span class="hs-identifier hs-var">bad</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1278"></span><span>
</span><span id="line-1279"></span><span>                </span><span class="hs-comment">-- Check that LHS vars are all bound</span><span>
</span><span id="line-1280"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365474"><span class="annot"><span class="annottext">bad_vars :: [Name]
</span><a href="#local-6989586621681365474"><span class="hs-identifier hs-var hs-var">bad_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365473"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681365473"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365473"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365481"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365473"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365479"><span class="hs-identifier hs-var">fv_lhs'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1281"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString -&gt; Name -&gt; SDoc
</span><a href="GHC.Rename.Module.html#badRuleVar"><span class="hs-identifier hs-var">badRuleVar</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365482"><span class="hs-identifier hs-var">rule_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365474"><span class="hs-identifier hs-var">bad_vars</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span class="annot"><a href="GHC.Rename.Module.html#validRuleLhs"><span class="hs-identifier hs-type">validRuleLhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1284"></span><span class="hs-comment">-- Nothing =&gt; OK</span><span>
</span><span id="line-1285"></span><span class="hs-comment">-- Just e  =&gt; Not ok, and e is the offending sub-expression</span><span>
</span><span id="line-1286"></span><span id="validRuleLhs"><span class="annot"><span class="annottext">validRuleLhs :: [Name] -&gt; LHsExpr GhcRn -&gt; Maybe (HsExpr GhcRn)
</span><a href="GHC.Rename.Module.html#validRuleLhs"><span class="hs-identifier hs-var hs-var">validRuleLhs</span></a></span></span><span> </span><span id="local-6989586621681365471"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365471"><span class="hs-identifier hs-var">foralls</span></a></span></span><span> </span><span id="local-6989586621681365470"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365470"><span class="hs-identifier hs-var">lhs</span></a></span></span><span>
</span><span id="line-1287"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365469"><span class="hs-identifier hs-var">checkl</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365470"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1288"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1289"></span><span>    </span><span id="local-6989586621681365469"><span class="annot"><span class="annottext">checkl :: GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365469"><span class="hs-identifier hs-var hs-var">checkl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span>
</span><span id="line-1290"></span><span>
</span><span id="line-1291"></span><span>    </span><span id="local-6989586621681365468"><span class="annot"><span class="annottext">check :: HsExpr GhcRn -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365468"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365466"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365466"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681365465"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365465"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681365464"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365464"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365469"><span class="hs-identifier hs-var">checkl</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365465"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mplus"><span class="hs-operator hs-var">`mplus`</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p} {a}. p -&gt; Maybe a
</span><a href="#local-6989586621681365462"><span class="hs-identifier hs-var">checkl_e</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365466"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1292"></span><span>                                                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mplus"><span class="hs-operator hs-var">`mplus`</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p} {a}. p -&gt; Maybe a
</span><a href="#local-6989586621681365462"><span class="hs-identifier hs-var">checkl_e</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365464"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1293"></span><span>    </span><span class="annot"><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365460"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365460"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681365459"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365459"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365469"><span class="hs-identifier hs-var">checkl</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365460"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mplus"><span class="hs-operator hs-var">`mplus`</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p} {a}. p -&gt; Maybe a
</span><a href="#local-6989586621681365462"><span class="hs-identifier hs-var">checkl_e</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365459"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1294"></span><span>    </span><span class="annot"><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTypeE GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365457"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365457"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681365469"><span class="hs-identifier hs-var">checkl</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365457"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1295"></span><span>    </span><span class="annot"><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365456"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621681365456"><span class="hs-identifier hs-var">lv</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621681365456"><span class="hs-identifier hs-var">lv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#notElem"><span class="hs-operator hs-var">`notElem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365471"><span class="hs-identifier hs-var">foralls</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1297"></span><span>    </span><span class="annot"><a href="#local-6989586621681365468"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span id="local-6989586621681365454"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365454"><span class="hs-identifier hs-var">other</span></a></span></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365454"><span class="hs-identifier hs-var">other</span></a></span><span>  </span><span class="hs-comment">-- Failure</span><span>
</span><span id="line-1298"></span><span>
</span><span id="line-1299"></span><span>        </span><span class="hs-comment">-- Check an argument</span><span>
</span><span id="line-1300"></span><span>    </span><span id="local-6989586621681365462"><span class="annot"><span class="annottext">checkl_e :: p -&gt; Maybe a
</span><a href="#local-6989586621681365462"><span class="hs-identifier hs-var hs-var">checkl_e</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1301"></span><span>    </span><span class="hs-comment">-- Was (check_e e); see Note [Rule LHS validity checking]</span><span>
</span><span id="line-1302"></span><span>
</span><span id="line-1303"></span><span class="hs-comment">{-      Commented out; see Note [Rule LHS validity checking] above
    check_e (HsVar v)     = Nothing
    check_e (HsPar e)     = checkl_e e
    check_e (HsLit e)     = Nothing
    check_e (HsOverLit e) = Nothing

    check_e (OpApp e1 op _ e2)   = checkl_e e1 `mplus` checkl_e op `mplus` checkl_e e2
    check_e (HsApp e1 e2)        = checkl_e e1 `mplus` checkl_e e2
    check_e (NegApp e _)         = checkl_e e
    check_e (ExplicitList _ es)  = checkl_es es
    check_e other                = Just other   -- Fails

    checkl_es es = foldr (mplus . checkl_e) Nothing es
-}</span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span class="annot"><a href="GHC.Rename.Module.html#badRuleVar"><span class="hs-identifier hs-type">badRuleVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1319"></span><span id="badRuleVar"><span class="annot"><span class="annottext">badRuleVar :: CLabelString -&gt; Name -&gt; SDoc
</span><a href="GHC.Rename.Module.html#badRuleVar"><span class="hs-identifier hs-var hs-var">badRuleVar</span></a></span></span><span> </span><span id="local-6989586621681365453"><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365453"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681365452"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365452"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-1320"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doubleQuotes"><span class="hs-identifier hs-var">doubleQuotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabelString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365453"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1321"></span><span>         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Forall'd variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365452"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1322"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;does not appear on left hand side&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1323"></span><span>
</span><span id="line-1324"></span><span class="annot"><a href="GHC.Rename.Module.html#badRuleLhsErr"><span class="hs-identifier hs-type">badRuleLhsErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1325"></span><span id="badRuleLhsErr"><span class="annot"><span class="annottext">badRuleLhsErr :: CLabelString -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn -&gt; SDoc
</span><a href="GHC.Rename.Module.html#badRuleLhsErr"><span class="hs-identifier hs-var hs-var">badRuleLhsErr</span></a></span></span><span> </span><span id="local-6989586621681365447"><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365447"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681365446"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365446"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681365445"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365445"><span class="hs-identifier hs-var">bad_e</span></a></span></span><span>
</span><span id="line-1326"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString -&gt; SDoc
</span><a href="GHC.Types.Basic.html#pprRuleName"><span class="hs-identifier hs-var">pprRuleName</span></a></span><span> </span><span class="annot"><span class="annottext">CLabelString
</span><a href="#local-6989586621681365447"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1327"></span><span>         </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365444"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1328"></span><span>                       </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in left-hand side:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621681365446"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1329"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1330"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LHS must be of form (f e1 .. en) where f is not forall'd&quot;</span></span><span>
</span><span id="line-1331"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1332"></span><span>    </span><span id="local-6989586621681365444"><span class="annot"><span class="annottext">err :: SDoc
</span><a href="#local-6989586621681365444"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365445"><span class="hs-identifier hs-var">bad_e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1333"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">XUnboundVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365442"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681365442"><span class="hs-identifier hs-var">uv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
</span><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier hs-var">notInScopeErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681365442"><span class="hs-identifier hs-var">uv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1334"></span><span>            </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal expression:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681365445"><span class="hs-identifier hs-var">bad_e</span></a></span><span>
</span><span id="line-1335"></span><span>
</span><span id="line-1336"></span><span class="hs-comment">{- **************************************************************
         *                                                      *
      Renaming type, class, instance and role declarations
*                                                               *
*****************************************************************

@rnTyDecl@ uses the `global name function' to create a new type
declaration in which local names have been replaced by their original
names, reporting any unknown names.

Renaming type variables is a pain. Because they now contain uniques,
it is necessary to pass in an association list which maps a parsed
tyvar to its @Name@ representation.
In some cases (type signatures of values),
it is even necessary to go over the type first
in order to get the set of tyvars used by it, make an assoc list,
and then go over it again to rename the tyvars!
However, we can also do some scoping checks at the same time.

Note [Dependency analysis of type, class, and instance decls]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A TyClGroup represents a strongly connected components of
type/class/instance decls, together with the role annotations for the
type/class declarations.  The renamer uses strongly connected
comoponent analysis to build these groups.  We do this for a number of
reasons:

* Improve kind error messages. Consider

     data T f a = MkT f a
     data S f a = MkS f (T f a)

  This has a kind error, but the error message is better if you
  check T first, (fixing its kind) and *then* S.  If you do kind
  inference together, you might get an error reported in S, which
  is jolly confusing.  See #4875


* Increase kind polymorphism.  See GHC.Tc.TyCl
  Note [Grouping of type and class declarations]

Why do the instance declarations participate?  At least two reasons

* Consider (#11348)

     type family F a
     type instance F Int = Bool

     data R = MkR (F Int)

     type Foo = 'MkR 'True

  For Foo to kind-check we need to know that (F Int) ~ Bool.  But we won't
  know that unless we've looked at the type instance declaration for F
  before kind-checking Foo.

* Another example is this (#3990).

     data family Complex a
     data instance Complex Double = CD {-# UNPACK #-} !Double
                                       {-# UNPACK #-} !Double

     data T = T {-# UNPACK #-} !(Complex Double)

  Here, to generate the right kind of unpacked implementation for T,
  we must have access to the 'data instance' declaration.

* Things become more complicated when we introduce transitive
  dependencies through imported definitions, like in this scenario:

      A.hs
        type family Closed (t :: Type) :: Type where
          Closed t = Open t

        type family Open (t :: Type) :: Type

      B.hs
        data Q where
          Q :: Closed Bool -&gt; Q

        type instance Open Int = Bool

        type S = 'Q 'True

  Somehow, we must ensure that the instance Open Int = Bool is checked before
  the type synonym S. While we know that S depends upon 'Q depends upon Closed,
  we have no idea that Closed depends upon Open!

  To accommodate for these situations, we ensure that an instance is checked
  before every @TyClDecl@ on which it does not depend. That's to say, instances
  are checked as early as possible in @tcTyAndClassDecls@.

------------------------------------
So much for WHY.  What about HOW?  It's pretty easy:

(1) Rename the type/class, instance, and role declarations
    individually

(2) Do strongly-connected component analysis of the type/class decls,
    We'll make a TyClGroup for each SCC

    In this step we treat a reference to a (promoted) data constructor
    K as a dependency on its parent type.  Thus
        data T = K1 | K2
        data S = MkS (Proxy 'K1)
    Here S depends on 'K1 and hence on its parent T.

    In this step we ignore instances; see
    Note [No dependencies on data instances]

(3) Attach roles to the appropriate SCC

(4) Attach instances to the appropriate SCC.
    We add an instance decl to SCC when:
      all its free types/classes are bound in this SCC or earlier ones

(5) We make an initial TyClGroup, with empty group_tyclds, for any
    (orphan) instances that affect only imported types/classes

Steps (3) and (4) are done by the (mapAccumL mk_group) call.

Note [No dependencies on data instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider this
   data family D a
   data instance D Int = D1
   data S = MkS (Proxy 'D1)

Here the declaration of S depends on the /data instance/ declaration
for 'D Int'.  That makes things a lot more complicated, especially
if the data instance is an associated type of an enclosing class instance.
(And the class instance might have several associated type instances
with different dependency structure!)

Ugh.  For now we simply don't allow promotion of data constructors for
data instances.  See Note [AFamDataCon: not promoting data family
constructors] in GHC.Tc.Utils.Env
-}</span><span>
</span><span id="line-1474"></span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyClDecls"><span class="hs-identifier hs-type">rnTyClDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1477"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1478"></span><span class="hs-comment">-- Rename the declarations and do dependency analysis on them</span><span>
</span><span id="line-1479"></span><span id="rnTyClDecls"><span class="annot"><span class="annottext">rnTyClDecls :: [TyClGroup GhcPs] -&gt; RnM ([TyClGroup GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyClDecls"><span class="hs-identifier hs-var hs-var">rnTyClDecls</span></a></span></span><span> </span><span id="local-6989586621681365440"><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681365440"><span class="hs-identifier hs-var">tycl_ds</span></a></span></span><span>
</span><span id="line-1480"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Rename the type/class, instance, and role declaraations</span><span>
</span><span id="line-1481"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365439"><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (TyClDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365439"><span class="hs-identifier hs-var">tycls_w_fvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">TyClDecl GhcPs -&gt; RnM (TyClDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyClDecl"><span class="hs-identifier hs-var">rnTyClDecl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. [TyClGroup pass] -&gt; [LTyClDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tyClGroupTyClDecls"><span class="hs-identifier hs-var">tyClGroupTyClDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681365440"><span class="hs-identifier hs-var">tycl_ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365436"><span class="annot"><span class="annottext">tc_names :: FreeVars
</span><a href="#local-6989586621681365436"><span class="hs-identifier hs-var hs-var">tc_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
TyClDecl (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#tcdName"><span class="hs-identifier hs-var">tcdName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (TyClDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365439"><span class="hs-identifier hs-var">tycls_w_fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1483"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365434"><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (StandaloneKindSig GhcRn), FreeVars)]
</span><a href="#local-6989586621681365434"><span class="hs-identifier hs-var">kisigs_w_fvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeVars
-&gt; [LStandaloneKindSig GhcPs]
-&gt; RnM [(LStandaloneKindSig GhcRn, FreeVars)]
</span><a href="GHC.Rename.Module.html#rnStandaloneKindSignatures"><span class="hs-identifier hs-var">rnStandaloneKindSignatures</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365436"><span class="hs-identifier hs-var">tc_names</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. [TyClGroup pass] -&gt; [LStandaloneKindSig pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tyClGroupKindSigs"><span class="hs-identifier hs-var">tyClGroupKindSigs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681365440"><span class="hs-identifier hs-var">tycl_ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1484"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365431"><span class="annot"><span class="annottext">[(LocatedA (InstDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365431"><span class="hs-identifier hs-var">instds_w_fvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">InstDecl GhcPs -&gt; RnM (InstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnSrcInstDecl"><span class="hs-identifier hs-var">rnSrcInstDecl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. [TyClGroup pass] -&gt; [LInstDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tyClGroupInstDecls"><span class="hs-identifier hs-var">tyClGroupInstDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681365440"><span class="hs-identifier hs-var">tycl_ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1485"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365429"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RoleAnnotDecl GhcRn)]
</span><a href="#local-6989586621681365429"><span class="hs-identifier hs-var">role_annots</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [LRoleAnnotDecl GhcPs] -&gt; RnM [LRoleAnnotDecl GhcRn]
</span><a href="GHC.Rename.Module.html#rnRoleAnnots"><span class="hs-identifier hs-var">rnRoleAnnots</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365436"><span class="hs-identifier hs-var">tc_names</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. [TyClGroup pass] -&gt; [LRoleAnnotDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tyClGroupRoleDecls"><span class="hs-identifier hs-var">tyClGroupRoleDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681365440"><span class="hs-identifier hs-var">tycl_ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span>       </span><span class="hs-comment">-- Do SCC analysis on the type/class decls</span><span>
</span><span id="line-1488"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365426"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365426"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn GlobalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-1489"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365424"><span class="annot"><span class="annottext">tycl_sccs :: [SCC (LTyClDecl GhcRn)]
</span><a href="#local-6989586621681365424"><span class="hs-identifier hs-var hs-var">tycl_sccs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
-&gt; KindSig_FV_Env
-&gt; [(LTyClDecl GhcRn, FreeVars)]
-&gt; [SCC (LTyClDecl GhcRn)]
</span><a href="GHC.Rename.Module.html#depAnalTyClDecls"><span class="hs-identifier hs-var">depAnalTyClDecls</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365426"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">KindSig_FV_Env
</span><a href="#local-6989586621681365422"><span class="hs-identifier hs-var">kisig_fv_env</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (TyClDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365439"><span class="hs-identifier hs-var">tycls_w_fvs</span></a></span><span>
</span><span id="line-1490"></span><span>             </span><span id="local-6989586621681365421"><span class="annot"><span class="annottext">role_annot_env :: RoleAnnotEnv
</span><a href="#local-6989586621681365421"><span class="hs-identifier hs-var hs-var">role_annot_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LRoleAnnotDecl GhcRn] -&gt; RoleAnnotEnv
</span><a href="GHC.Tc.Types.html#mkRoleAnnotEnv"><span class="hs-identifier hs-var">mkRoleAnnotEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RoleAnnotDecl GhcRn)]
</span><a href="#local-6989586621681365429"><span class="hs-identifier hs-var">role_annots</span></a></span><span>
</span><span id="line-1491"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681365419"><span class="annot"><span class="annottext">KindSigEnv
</span><a href="#local-6989586621681365419"><span class="hs-identifier hs-var">kisig_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365422"><span class="annot"><span class="annottext">KindSig_FV_Env
</span><a href="#local-6989586621681365422"><span class="hs-identifier hs-var">kisig_fv_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LStandaloneKindSig GhcRn, FreeVars)]
-&gt; (KindSigEnv, KindSig_FV_Env)
</span><a href="GHC.Rename.Module.html#mkKindSig_fv_env"><span class="hs-identifier hs-var">mkKindSig_fv_env</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (StandaloneKindSig GhcRn), FreeVars)]
</span><a href="#local-6989586621681365434"><span class="hs-identifier hs-var">kisigs_w_fvs</span></a></span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span>             </span><span id="local-6989586621681365417"><span class="annot"><span class="annottext">inst_ds_map :: InstDeclFreeVarsMap
</span><a href="#local-6989586621681365417"><span class="hs-identifier hs-var hs-var">inst_ds_map</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
-&gt; FreeVars -&gt; InstDeclFreeVarsMap -&gt; InstDeclFreeVarsMap
</span><a href="GHC.Rename.Module.html#mkInstDeclFreeVarsMap"><span class="hs-identifier hs-var">mkInstDeclFreeVarsMap</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365426"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365436"><span class="hs-identifier hs-var">tc_names</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocatedA (InstDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365431"><span class="hs-identifier hs-var">instds_w_fvs</span></a></span><span>
</span><span id="line-1494"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681365415"><span class="annot"><span class="annottext">[LInstDecl GhcRn]
</span><a href="#local-6989586621681365415"><span class="hs-identifier hs-var">init_inst_ds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365414"><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365414"><span class="hs-identifier hs-var">rest_inst_ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
-&gt; InstDeclFreeVarsMap -&gt; ([LInstDecl GhcRn], InstDeclFreeVarsMap)
</span><a href="GHC.Rename.Module.html#getInsts"><span class="hs-identifier hs-var">getInsts</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365417"><span class="hs-identifier hs-var">inst_ds_map</span></a></span><span>
</span><span id="line-1495"></span><span>
</span><span id="line-1496"></span><span>             </span><span id="local-6989586621681365412"><span class="annot"><span class="annottext">first_group :: [TyClGroup GhcRn]
</span><a href="#local-6989586621681365412"><span class="hs-identifier hs-var hs-var">first_group</span></a></span></span><span>
</span><span id="line-1497"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[LInstDecl GhcRn]
</span><a href="#local-6989586621681365415"><span class="hs-identifier hs-var">init_inst_ds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1498"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_ext :: XCTyClGroup GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#group_ext"><span class="hs-identifier hs-var">group_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1499"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1500"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1501"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1502"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LInstDecl GhcRn]
</span><a href="#local-6989586621681365415"><span class="hs-identifier hs-var">init_inst_ds</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">]</span><span>
</span><span id="line-1503"></span><span>
</span><span id="line-1504"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681365405"><span class="annot"><span class="annottext">[(LocatedA (InstDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365405"><span class="hs-identifier hs-var">final_inst_ds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365404"><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681365404"><span class="hs-identifier hs-var">groups</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) s a b.
Traversable t =&gt;
(s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapAccumL"><span class="hs-identifier hs-var">mapAccumL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RoleAnnotEnv
-&gt; KindSigEnv
-&gt; InstDeclFreeVarsMap
-&gt; SCC (LTyClDecl GhcRn)
-&gt; (InstDeclFreeVarsMap, TyClGroup GhcRn)
</span><a href="#local-6989586621681365403"><span class="hs-identifier hs-var">mk_group</span></a></span><span> </span><span class="annot"><span class="annottext">RoleAnnotEnv
</span><a href="#local-6989586621681365421"><span class="hs-identifier hs-var">role_annot_env</span></a></span><span> </span><span class="annot"><span class="annottext">KindSigEnv
</span><a href="#local-6989586621681365419"><span class="hs-identifier hs-var">kisig_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365414"><span class="hs-identifier hs-var">rest_inst_ds</span></a></span><span> </span><span class="annot"><span class="annottext">[SCC (LTyClDecl GhcRn)]
</span><a href="#local-6989586621681365424"><span class="hs-identifier hs-var">tycl_sccs</span></a></span><span>
</span><span id="line-1506"></span><span>
</span><span id="line-1507"></span><span>             </span><span id="local-6989586621681365402"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681365402"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-identifier hs-var">plusFV</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (TyClDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365439"><span class="hs-identifier hs-var">tycls_w_fvs</span></a></span><span>  </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span>
</span><span id="line-1508"></span><span>                       </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-identifier hs-var">plusFV</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocatedA (InstDecl GhcRn), FreeVars)]
</span><a href="#local-6989586621681365431"><span class="hs-identifier hs-var">instds_w_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span>
</span><span id="line-1509"></span><span>                       </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-identifier hs-var">plusFV</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (StandaloneKindSig GhcRn), FreeVars)]
</span><a href="#local-6989586621681365434"><span class="hs-identifier hs-var">kisigs_w_fvs</span></a></span><span>
</span><span id="line-1510"></span><span>
</span><span id="line-1511"></span><span>             </span><span id="local-6989586621681365400"><span class="annot"><span class="annottext">all_groups :: [TyClGroup GhcRn]
</span><a href="#local-6989586621681365400"><span class="hs-identifier hs-var hs-var">all_groups</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681365412"><span class="hs-identifier hs-var">first_group</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681365404"><span class="hs-identifier hs-var">groups</span></a></span><span>
</span><span id="line-1512"></span><span>
</span><span id="line-1513"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">MASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">final_inst_ds</span><span class="hs-special">,</span><span>  </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">instds_w_fvs</span><span> </span><span class="hs-operator">$$</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">inst_ds_map</span><span>
</span><span id="line-1514"></span><span>                                       </span><span class="hs-operator">$$</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">flattenSCCs</span><span> </span><span class="hs-identifier">tycl_sccs</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$$</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">final_inst_ds</span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnTycl dependency analysis made groups&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681365400"><span class="hs-identifier hs-var">all_groups</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyClGroup GhcRn]
</span><a href="#local-6989586621681365400"><span class="hs-identifier hs-var">all_groups</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365402"><span class="hs-identifier hs-var">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1518"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1519"></span><span>    </span><span class="annot"><a href="#local-6989586621681365403"><span class="hs-identifier hs-type">mk_group</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RoleAnnotEnv"><span class="hs-identifier hs-type">RoleAnnotEnv</span></a></span><span>
</span><span id="line-1520"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#KindSigEnv"><span class="hs-identifier hs-type">KindSigEnv</span></a></span><span>
</span><span id="line-1521"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#InstDeclFreeVarsMap"><span class="hs-identifier hs-type">InstDeclFreeVarsMap</span></a></span><span>
</span><span id="line-1522"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Graph.html#SCC"><span class="hs-identifier hs-type">SCC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1523"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Module.html#InstDeclFreeVarsMap"><span class="hs-identifier hs-type">InstDeclFreeVarsMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1524"></span><span>    </span><span id="local-6989586621681365403"><span class="annot"><span class="annottext">mk_group :: RoleAnnotEnv
-&gt; KindSigEnv
-&gt; InstDeclFreeVarsMap
-&gt; SCC (LTyClDecl GhcRn)
-&gt; (InstDeclFreeVarsMap, TyClGroup GhcRn)
</span><a href="#local-6989586621681365403"><span class="hs-identifier hs-var hs-var">mk_group</span></a></span></span><span> </span><span id="local-6989586621681365398"><span class="annot"><span class="annottext">RoleAnnotEnv
</span><a href="#local-6989586621681365398"><span class="hs-identifier hs-var">role_env</span></a></span></span><span> </span><span id="local-6989586621681365397"><span class="annot"><span class="annottext">KindSigEnv
</span><a href="#local-6989586621681365397"><span class="hs-identifier hs-var">kisig_env</span></a></span></span><span> </span><span id="local-6989586621681365396"><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365396"><span class="hs-identifier hs-var">inst_map</span></a></span></span><span> </span><span id="local-6989586621681365395"><span class="annot"><span class="annottext">SCC (LTyClDecl GhcRn)
</span><a href="#local-6989586621681365395"><span class="hs-identifier hs-var">scc</span></a></span></span><span>
</span><span id="line-1525"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365394"><span class="hs-identifier hs-var">inst_map'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyClGroup GhcRn
</span><a href="#local-6989586621681365393"><span class="hs-identifier hs-var">group</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1526"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1527"></span><span>        </span><span id="local-6989586621681365392"><span class="annot"><span class="annottext">tycl_ds :: [GenLocated SrcSpanAnnA (TyClDecl GhcRn)]
</span><a href="#local-6989586621681365392"><span class="hs-identifier hs-var hs-var">tycl_ds</span></a></span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall vertex. SCC vertex -&gt; [vertex]
</span><a href="../../containers-0.6.5.1/src/Data-Graph.html#flattenSCC"><span class="hs-identifier hs-var">flattenSCC</span></a></span><span> </span><span class="annot"><span class="annottext">SCC (LTyClDecl GhcRn)
</span><a href="#local-6989586621681365395"><span class="hs-identifier hs-var">scc</span></a></span><span>
</span><span id="line-1528"></span><span>        </span><span id="local-6989586621681365391"><span class="annot"><span class="annottext">bndrs :: [Name]
</span><a href="#local-6989586621681365391"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
TyClDecl (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#tcdName"><span class="hs-identifier hs-var">tcdName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (TyClDecl GhcRn)]
</span><a href="#local-6989586621681365392"><span class="hs-identifier hs-var">tycl_ds</span></a></span><span>
</span><span id="line-1529"></span><span>        </span><span id="local-6989586621681365390"><span class="annot"><span class="annottext">roles :: [LRoleAnnotDecl GhcRn]
</span><a href="#local-6989586621681365390"><span class="hs-identifier hs-var hs-var">roles</span></a></span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RoleAnnotEnv -&gt; [LRoleAnnotDecl GhcRn]
</span><a href="GHC.Tc.Types.html#getRoleAnnots"><span class="hs-identifier hs-var">getRoleAnnots</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365391"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">RoleAnnotEnv
</span><a href="#local-6989586621681365398"><span class="hs-identifier hs-var">role_env</span></a></span><span>
</span><span id="line-1530"></span><span>        </span><span id="local-6989586621681365388"><span class="annot"><span class="annottext">kisigs :: [LStandaloneKindSig GhcRn]
</span><a href="#local-6989586621681365388"><span class="hs-identifier hs-var hs-var">kisigs</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; KindSigEnv -&gt; [LStandaloneKindSig GhcRn]
</span><a href="GHC.Rename.Module.html#getKindSigs"><span class="hs-identifier hs-var">getKindSigs</span></a></span><span>   </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365391"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">KindSigEnv
</span><a href="#local-6989586621681365397"><span class="hs-identifier hs-var">kisig_env</span></a></span><span>
</span><span id="line-1531"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681365386"><span class="annot"><span class="annottext">[LInstDecl GhcRn]
</span><a href="#local-6989586621681365386"><span class="hs-identifier hs-var">inst_ds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365394"><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365394"><span class="hs-identifier hs-var">inst_map'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
-&gt; InstDeclFreeVarsMap -&gt; ([LInstDecl GhcRn], InstDeclFreeVarsMap)
</span><a href="GHC.Rename.Module.html#getInsts"><span class="hs-identifier hs-var">getInsts</span></a></span><span>      </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365391"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365396"><span class="hs-identifier hs-var">inst_map</span></a></span><span>
</span><span id="line-1532"></span><span>        </span><span id="local-6989586621681365393"><span class="annot"><span class="annottext">group :: TyClGroup GhcRn
</span><a href="#local-6989586621681365393"><span class="hs-identifier hs-var hs-var">group</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_ext :: XCTyClGroup GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#group_ext"><span class="hs-identifier hs-var">group_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1533"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (TyClDecl GhcRn)]
</span><a href="#local-6989586621681365392"><span class="hs-identifier hs-var">tycl_ds</span></a></span><span>
</span><span id="line-1534"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LStandaloneKindSig GhcRn]
</span><a href="#local-6989586621681365388"><span class="hs-identifier hs-var">kisigs</span></a></span><span>
</span><span id="line-1535"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LRoleAnnotDecl GhcRn]
</span><a href="#local-6989586621681365390"><span class="hs-identifier hs-var">roles</span></a></span><span>
</span><span id="line-1536"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LInstDecl GhcRn]
</span><a href="#local-6989586621681365386"><span class="hs-identifier hs-var">inst_ds</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1537"></span><span>
</span><span id="line-1538"></span><span class="hs-comment">-- | Free variables of standalone kind signatures.</span><span>
</span><span id="line-1539"></span><span class="hs-keyword">newtype</span><span> </span><span id="KindSig_FV_Env"><span class="annot"><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-var">KindSig_FV_Env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="KindSig_FV_Env"><span class="annot"><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-var">KindSig_FV_Env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>
</span><span id="line-1541"></span><span class="annot"><a href="GHC.Rename.Module.html#lookupKindSig_FV_Env"><span class="hs-identifier hs-type">lookupKindSig_FV_Env</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-type">KindSig_FV_Env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-1542"></span><span id="lookupKindSig_FV_Env"><span class="annot"><span class="annottext">lookupKindSig_FV_Env :: KindSig_FV_Env -&gt; Name -&gt; FreeVars
</span><a href="GHC.Rename.Module.html#lookupKindSig_FV_Env"><span class="hs-identifier hs-var hs-var">lookupKindSig_FV_Env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-type">KindSig_FV_Env</span></a></span><span> </span><span id="local-6989586621681365383"><span class="annot"><span class="annottext">NameEnv FreeVars
</span><a href="#local-6989586621681365383"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681365382"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365382"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1543"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv FreeVars
</span><a href="#local-6989586621681365383"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365382"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>
</span><span id="line-1545"></span><span class="hs-comment">-- | Standalone kind signatures.</span><span>
</span><span id="line-1546"></span><span class="hs-keyword">type</span><span> </span><span id="KindSigEnv"><span class="annot"><a href="GHC.Rename.Module.html#KindSigEnv"><span class="hs-identifier hs-var">KindSigEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>
</span><span id="line-1548"></span><span class="annot"><a href="GHC.Rename.Module.html#mkKindSig_fv_env"><span class="hs-identifier hs-type">mkKindSig_fv_env</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Module.html#KindSigEnv"><span class="hs-identifier hs-type">KindSigEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-type">KindSig_FV_Env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1549"></span><span id="mkKindSig_fv_env"><span class="annot"><span class="annottext">mkKindSig_fv_env :: [(LStandaloneKindSig GhcRn, FreeVars)]
-&gt; (KindSigEnv, KindSig_FV_Env)
</span><a href="GHC.Rename.Module.html#mkKindSig_fv_env"><span class="hs-identifier hs-var hs-var">mkKindSig_fv_env</span></a></span></span><span> </span><span id="local-6989586621681365380"><span class="annot"><span class="annottext">[(LStandaloneKindSig GhcRn, FreeVars)]
</span><a href="#local-6989586621681365380"><span class="hs-identifier hs-var">kisigs_w_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameEnv (GenLocated SrcSpanAnnA (StandaloneKindSig GhcRn))
</span><a href="#local-6989586621681365379"><span class="hs-identifier hs-var">kisig_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KindSig_FV_Env
</span><a href="#local-6989586621681365378"><span class="hs-identifier hs-var">kisig_fv_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1551"></span><span>    </span><span id="local-6989586621681365379"><span class="annot"><span class="annottext">kisig_env :: NameEnv (GenLocated SrcSpanAnnA (StandaloneKindSig GhcRn))
</span><a href="#local-6989586621681365379"><span class="hs-identifier hs-var hs-var">kisig_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall elt1 elt2. (elt1 -&gt; elt2) -&gt; NameEnv elt1 -&gt; NameEnv elt2
</span><a href="GHC.Types.Name.Env.html#mapNameEnv"><span class="hs-identifier hs-var">mapNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv (LStandaloneKindSig GhcRn, FreeVars)
</span><a href="#local-6989586621681365376"><span class="hs-identifier hs-var">compound_env</span></a></span><span>
</span><span id="line-1552"></span><span>    </span><span id="local-6989586621681365378"><span class="annot"><span class="annottext">kisig_fv_env :: KindSig_FV_Env
</span><a href="#local-6989586621681365378"><span class="hs-identifier hs-var hs-var">kisig_fv_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameEnv FreeVars -&gt; KindSig_FV_Env
</span><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-var">KindSig_FV_Env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall elt1 elt2. (elt1 -&gt; elt2) -&gt; NameEnv elt1 -&gt; NameEnv elt2
</span><a href="GHC.Types.Name.Env.html#mapNameEnv"><span class="hs-identifier hs-var">mapNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv (LStandaloneKindSig GhcRn, FreeVars)
</span><a href="#local-6989586621681365376"><span class="hs-identifier hs-var">compound_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>    </span><span id="local-6989586621681365376"><span class="annot"><span class="annottext">NameEnv (LStandaloneKindSig GhcRn, FreeVars)
</span><a href="#local-6989586621681365376"><span class="hs-identifier hs-var">compound_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1554"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Name) -&gt; [a] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnvWith"><span class="hs-identifier hs-var">mkNameEnvWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
StandaloneKindSig (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#standaloneKindSigName"><span class="hs-identifier hs-var">standaloneKindSigName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(LStandaloneKindSig GhcRn, FreeVars)]
</span><a href="#local-6989586621681365380"><span class="hs-identifier hs-var">kisigs_w_fvs</span></a></span><span>
</span><span id="line-1555"></span><span>
</span><span id="line-1556"></span><span class="annot"><a href="GHC.Rename.Module.html#getKindSigs"><span class="hs-identifier hs-type">getKindSigs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#KindSigEnv"><span class="hs-identifier hs-type">KindSigEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1557"></span><span id="getKindSigs"><span class="annot"><span class="annottext">getKindSigs :: [Name] -&gt; KindSigEnv -&gt; [LStandaloneKindSig GhcRn]
</span><a href="GHC.Rename.Module.html#getKindSigs"><span class="hs-identifier hs-var hs-var">getKindSigs</span></a></span></span><span> </span><span id="local-6989586621681365373"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365373"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681365372"><span class="annot"><span class="annottext">KindSigEnv
</span><a href="#local-6989586621681365372"><span class="hs-identifier hs-var">kisig_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">KindSigEnv
</span><a href="#local-6989586621681365372"><span class="hs-identifier hs-var">kisig_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365373"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span class="annot"><a href="GHC.Rename.Module.html#rnStandaloneKindSignatures"><span class="hs-identifier hs-type">rnStandaloneKindSignatures</span></a></span><span>
</span><span id="line-1560"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>  </span><span class="hs-comment">-- names of types and classes in the current TyClGroup</span><span>
</span><span id="line-1561"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1562"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1563"></span><span id="rnStandaloneKindSignatures"><span class="annot"><span class="annottext">rnStandaloneKindSignatures :: FreeVars
-&gt; [LStandaloneKindSig GhcPs]
-&gt; RnM [(LStandaloneKindSig GhcRn, FreeVars)]
</span><a href="GHC.Rename.Module.html#rnStandaloneKindSignatures"><span class="hs-identifier hs-var hs-var">rnStandaloneKindSignatures</span></a></span></span><span> </span><span id="local-6989586621681365371"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365371"><span class="hs-identifier hs-var">tc_names</span></a></span></span><span> </span><span id="local-6989586621681365370"><span class="annot"><span class="annottext">[LStandaloneKindSig GhcPs]
</span><a href="#local-6989586621681365370"><span class="hs-identifier hs-var">kisigs</span></a></span></span><span>
</span><span id="line-1564"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365369"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs)]
</span><a href="#local-6989586621681365369"><span class="hs-identifier hs-var">no_dups</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365368"><span class="annot"><span class="annottext">[NonEmpty (GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs))]
</span><a href="#local-6989586621681365368"><span class="hs-identifier hs-var">dup_kisigs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">forall {l} {p :: Pass}.
GenLocated l (StandaloneKindSig (GhcPass p)) -&gt; IdGhcP p
</span><a href="#local-6989586621681365366"><span class="hs-identifier hs-var">get_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LStandaloneKindSig GhcPs]
</span><a href="#local-6989586621681365370"><span class="hs-identifier hs-var">kisigs</span></a></span><span>
</span><span id="line-1565"></span><span>             </span><span id="local-6989586621681365366"><span class="annot"><span class="annottext">get_name :: GenLocated l (StandaloneKindSig (GhcPass p)) -&gt; IdGhcP p
</span><a href="#local-6989586621681365366"><span class="hs-identifier hs-var hs-var">get_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
StandaloneKindSig (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#standaloneKindSigName"><span class="hs-identifier hs-var">standaloneKindSigName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span>
</span><span id="line-1566"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LStandaloneKindSig GhcPs) -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#dupKindSig_Err"><span class="hs-identifier hs-var">dupKindSig_Err</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty (GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs))]
</span><a href="#local-6989586621681365368"><span class="hs-identifier hs-var">dup_kisigs</span></a></span><span>
</span><span id="line-1567"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
-&gt; StandaloneKindSig GhcPs
-&gt; RnM (StandaloneKindSig GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnStandaloneKindSignature"><span class="hs-identifier hs-var">rnStandaloneKindSignature</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365371"><span class="hs-identifier hs-var">tc_names</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs)]
</span><a href="#local-6989586621681365369"><span class="hs-identifier hs-var">no_dups</span></a></span><span>
</span><span id="line-1568"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1569"></span><span>
</span><span id="line-1570"></span><span class="annot"><a href="GHC.Rename.Module.html#rnStandaloneKindSignature"><span class="hs-identifier hs-type">rnStandaloneKindSignature</span></a></span><span>
</span><span id="line-1571"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>  </span><span class="hs-comment">-- names of types and classes in the current TyClGroup</span><span>
</span><span id="line-1572"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#StandaloneKindSig"><span class="hs-identifier hs-type">StandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1573"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#StandaloneKindSig"><span class="hs-identifier hs-type">StandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1574"></span><span id="rnStandaloneKindSignature"><span class="annot"><span class="annottext">rnStandaloneKindSignature :: FreeVars
-&gt; StandaloneKindSig GhcPs
-&gt; RnM (StandaloneKindSig GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnStandaloneKindSignature"><span class="hs-identifier hs-var hs-var">rnStandaloneKindSignature</span></a></span></span><span> </span><span id="local-6989586621681365363"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365363"><span class="hs-identifier hs-var">tc_names</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#StandaloneKindSig"><span class="hs-identifier hs-type">StandaloneKindSig</span></a></span><span> </span><span class="annot"><span class="annottext">XStandaloneKindSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365361"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365361"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681365360"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365360"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1575"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365359"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365359"><span class="hs-identifier hs-var">standalone_ki_sig_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.StandaloneKindSignatures</span></span><span>
</span><span id="line-1576"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365359"><span class="hs-identifier hs-var">standalone_ki_sig_ok</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365357"><span class="hs-identifier hs-var">standaloneKiSigErr</span></a></span><span>
</span><span id="line-1577"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365356"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365356"><span class="hs-identifier hs-var">new_v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; SDoc
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigCtxtOccRnN"><span class="hs-identifier hs-var">lookupSigCtxtOccRnN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-var">TopSigCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365363"><span class="hs-identifier hs-var">tc_names</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;standalone kind signature&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365361"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1578"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365354"><span class="annot"><span class="annottext">doc :: HsDocContext
</span><a href="#local-6989586621681365354"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#StandaloneKindSigCtx"><span class="hs-identifier hs-var">StandaloneKindSigCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365361"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1579"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365352"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365352"><span class="hs-identifier hs-var">new_ki</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365351"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365351"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365354"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365360"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-1580"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XStandaloneKindSig pass
-&gt; LIdP pass -&gt; LHsSigType pass -&gt; StandaloneKindSig pass
</span><a href="Language.Haskell.Syntax.Decls.html#StandaloneKindSig"><span class="hs-identifier hs-var">StandaloneKindSig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365356"><span class="hs-identifier hs-var">new_v</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365352"><span class="hs-identifier hs-var">new_ki</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365351"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1581"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1582"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1583"></span><span>    </span><span class="annot"><a href="#local-6989586621681365357"><span class="hs-identifier hs-type">standaloneKiSigErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1584"></span><span>    </span><span id="local-6989586621681365357"><span class="annot"><span class="annottext">standaloneKiSigErr :: SDoc
</span><a href="#local-6989586621681365357"><span class="hs-identifier hs-var hs-var">standaloneKiSigErr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1585"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal standalone kind signature&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1586"></span><span>         </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Did you mean to enable StandaloneKindSignatures?&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1587"></span><span>
</span><span id="line-1588"></span><span class="annot"><a href="GHC.Rename.Module.html#depAnalTyClDecls"><span class="hs-identifier hs-type">depAnalTyClDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1589"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#KindSig_FV_Env"><span class="hs-identifier hs-type">KindSig_FV_Env</span></a></span><span>
</span><span id="line-1590"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1591"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../containers-0.6.5.1/src/Data-Graph.html#SCC"><span class="hs-identifier hs-type">SCC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1592"></span><span class="hs-comment">-- See Note [Dependency analysis of type, class, and instance decls]</span><span>
</span><span id="line-1593"></span><span id="depAnalTyClDecls"><span class="annot"><span class="annottext">depAnalTyClDecls :: GlobalRdrEnv
-&gt; KindSig_FV_Env
-&gt; [(LTyClDecl GhcRn, FreeVars)]
-&gt; [SCC (LTyClDecl GhcRn)]
</span><a href="GHC.Rename.Module.html#depAnalTyClDecls"><span class="hs-identifier hs-var hs-var">depAnalTyClDecls</span></a></span></span><span> </span><span id="local-6989586621681365349"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365349"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span id="local-6989586621681365348"><span class="annot"><span class="annottext">KindSig_FV_Env
</span><a href="#local-6989586621681365348"><span class="hs-identifier hs-var">kisig_fv_env</span></a></span></span><span> </span><span id="local-6989586621681365347"><span class="annot"><span class="annottext">[(LTyClDecl GhcRn, FreeVars)]
</span><a href="#local-6989586621681365347"><span class="hs-identifier hs-var">ds_w_fvs</span></a></span></span><span>
</span><span id="line-1594"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall key payload.
Uniquable key =&gt;
[Node key payload] -&gt; [SCC payload]
</span><a href="GHC.Data.Graph.Directed.html#stronglyConnCompFromEdgedVerticesUniq"><span class="hs-identifier hs-var">stronglyConnCompFromEdgedVerticesUniq</span></a></span><span> </span><span class="annot"><span class="annottext">[Node Name (LTyClDecl GhcRn)]
</span><a href="#local-6989586621681365346"><span class="hs-identifier hs-var">edges</span></a></span><span>
</span><span id="line-1595"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1596"></span><span>    </span><span class="annot"><a href="#local-6989586621681365346"><span class="hs-identifier hs-type">edges</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.Data.Graph.Directed.html#Node"><span class="hs-identifier hs-type">Node</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1597"></span><span>    </span><span id="local-6989586621681365346"><span class="annot"><span class="annottext">edges :: [Node Name (LTyClDecl GhcRn)]
</span><a href="#local-6989586621681365346"><span class="hs-identifier hs-var hs-var">edges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall key payload. payload -&gt; key -&gt; [key] -&gt; Node key payload
</span><a href="GHC.Data.Graph.Directed.html#DigraphNode"><span class="hs-identifier hs-var">DigraphNode</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (TyClDecl GhcRn)
</span><a href="#local-6989586621681365344"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681365343"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Name
</span><a href="GHC.Rename.Module.html#getParent"><span class="hs-identifier hs-var">getParent</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365349"><span class="hs-identifier hs-var">rdr_env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall elt. UniqSet elt -&gt; [elt]
</span><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier hs-var">nonDetEltsUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365340"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365344"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (TyClDecl GhcRn)
</span><a href="#local-6989586621681365344"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365339"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365339"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(LTyClDecl GhcRn, FreeVars)]
</span><a href="#local-6989586621681365347"><span class="hs-identifier hs-var">ds_w_fvs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1599"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365343"><span class="annot"><span class="annottext">name :: IdP GhcRn
</span><a href="#local-6989586621681365343"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
TyClDecl (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#tcdName"><span class="hs-identifier hs-var">tcdName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (TyClDecl GhcRn)
</span><a href="#local-6989586621681365344"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1600"></span><span>                  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365338"><span class="annot"><span class="annottext">kisig_fvs :: FreeVars
</span><a href="#local-6989586621681365338"><span class="hs-identifier hs-var hs-var">kisig_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KindSig_FV_Env -&gt; Name -&gt; FreeVars
</span><a href="GHC.Rename.Module.html#lookupKindSig_FV_Env"><span class="hs-identifier hs-var">lookupKindSig_FV_Env</span></a></span><span> </span><span class="annot"><span class="annottext">KindSig_FV_Env
</span><a href="#local-6989586621681365348"><span class="hs-identifier hs-var">kisig_fv_env</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681365343"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1601"></span><span>                  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365340"><span class="annot"><span class="annottext">deps :: FreeVars
</span><a href="#local-6989586621681365340"><span class="hs-identifier hs-var hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365339"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365338"><span class="hs-identifier hs-var">kisig_fvs</span></a></span><span>
</span><span id="line-1602"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-1603"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1604"></span><span>            </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here as</span><span>
</span><span id="line-1605"></span><span>            </span><span class="hs-comment">-- stronglyConnCompFromEdgedVertices is still deterministic</span><span>
</span><span id="line-1606"></span><span>            </span><span class="hs-comment">-- even if the edges are in nondeterministic order as explained</span><span>
</span><span id="line-1607"></span><span>            </span><span class="hs-comment">-- in Note [Deterministic SCC] in GHC.Data.Graph.Directed.</span><span>
</span><span id="line-1608"></span><span>
</span><span id="line-1609"></span><span class="annot"><a href="GHC.Rename.Module.html#toParents"><span class="hs-identifier hs-type">toParents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>
</span><span id="line-1610"></span><span id="toParents"><span class="annot"><span class="annottext">toParents :: GlobalRdrEnv -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Rename.Module.html#toParents"><span class="hs-identifier hs-var hs-var">toParents</span></a></span></span><span> </span><span id="local-6989586621681365336"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365336"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span id="local-6989586621681365335"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365335"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-1611"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall elt a. (elt -&gt; a -&gt; a) -&gt; a -&gt; UniqSet elt -&gt; a
</span><a href="GHC.Types.Unique.Set.html#nonDetStrictFoldUniqSet"><span class="hs-identifier hs-var">nonDetStrictFoldUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; FreeVars
</span><a href="#local-6989586621681365333"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365335"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1612"></span><span>  </span><span class="hs-comment">-- It's OK to use a non-deterministic fold because we immediately forget the</span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-comment">-- ordering by creating a set</span><span>
</span><span id="line-1614"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1615"></span><span>    </span><span id="local-6989586621681365333"><span class="annot"><span class="annottext">add :: Name -&gt; FreeVars -&gt; FreeVars
</span><a href="#local-6989586621681365333"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621681365332"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365332"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681365331"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365331"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#extendNameSet"><span class="hs-identifier hs-var">extendNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365331"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Name
</span><a href="GHC.Rename.Module.html#getParent"><span class="hs-identifier hs-var">getParent</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365336"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365332"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>
</span><span id="line-1617"></span><span class="annot"><a href="GHC.Rename.Module.html#getParent"><span class="hs-identifier hs-type">getParent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1618"></span><span id="getParent"><span class="annot"><span class="annottext">getParent :: GlobalRdrEnv -&gt; Name -&gt; Name
</span><a href="GHC.Rename.Module.html#getParent"><span class="hs-identifier hs-var hs-var">getParent</span></a></span></span><span> </span><span id="local-6989586621681365329"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365329"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span id="local-6989586621681365328"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365328"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-1619"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Maybe GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-var">lookupGRE_Name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365329"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365328"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1620"></span><span>      </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365326"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621681365326"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621681365326"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1621"></span><span>                    </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">par_is :: Parent -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#par_is"><span class="hs-identifier hs-var">par_is</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365322"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365322"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365322"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1622"></span><span>                    </span><span class="annot"><span class="annottext">Parent
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365328"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1623"></span><span>      </span><span class="annot"><span class="annottext">Maybe GlobalRdrElt
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365328"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1624"></span><span>
</span><span id="line-1625"></span><span>
</span><span id="line-1626"></span><span class="hs-comment">{- ******************************************************
*                                                       *
       Role annotations
*                                                       *
****************************************************** -}</span><span>
</span><span id="line-1631"></span><span>
</span><span id="line-1632"></span><span class="hs-comment">-- | Renames role annotations, returning them as the values in a NameEnv</span><span>
</span><span id="line-1633"></span><span class="hs-comment">-- and checks for duplicate role annotations.</span><span>
</span><span id="line-1634"></span><span class="hs-comment">-- It is quite convenient to do both of these in the same place.</span><span>
</span><span id="line-1635"></span><span class="hs-comment">-- See also Note [Role annotations in the renamer]</span><span>
</span><span id="line-1636"></span><span class="annot"><a href="GHC.Rename.Module.html#rnRoleAnnots"><span class="hs-identifier hs-type">rnRoleAnnots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>
</span><span id="line-1637"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRoleAnnotDecl"><span class="hs-identifier hs-type">LRoleAnnotDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1638"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRoleAnnotDecl"><span class="hs-identifier hs-type">LRoleAnnotDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1639"></span><span id="rnRoleAnnots"><span class="annot"><span class="annottext">rnRoleAnnots :: FreeVars -&gt; [LRoleAnnotDecl GhcPs] -&gt; RnM [LRoleAnnotDecl GhcRn]
</span><a href="GHC.Rename.Module.html#rnRoleAnnots"><span class="hs-identifier hs-var hs-var">rnRoleAnnots</span></a></span></span><span> </span><span id="local-6989586621681365321"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365321"><span class="hs-identifier hs-var">tc_names</span></a></span></span><span> </span><span id="local-6989586621681365320"><span class="annot"><span class="annottext">[LRoleAnnotDecl GhcPs]
</span><a href="#local-6989586621681365320"><span class="hs-identifier hs-var">role_annots</span></a></span></span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>  </span><span class="hs-comment">-- Check for duplicates *before* renaming, to avoid</span><span>
</span><span id="line-1641"></span><span>          </span><span class="hs-comment">-- lumping together all the unboundNames</span><span>
</span><span id="line-1642"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365319"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs)]
</span><a href="#local-6989586621681365319"><span class="hs-identifier hs-var">no_dups</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365318"><span class="annot"><span class="annottext">[NonEmpty (GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs))]
</span><a href="#local-6989586621681365318"><span class="hs-identifier hs-var">dup_annots</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">forall {l} {p :: Pass}.
GenLocated l (RoleAnnotDecl (GhcPass p)) -&gt; IdGhcP p
</span><a href="#local-6989586621681365317"><span class="hs-identifier hs-var">get_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LRoleAnnotDecl GhcPs]
</span><a href="#local-6989586621681365320"><span class="hs-identifier hs-var">role_annots</span></a></span><span>
</span><span id="line-1643"></span><span>             </span><span id="local-6989586621681365317"><span class="annot"><span class="annottext">get_name :: GenLocated l (RoleAnnotDecl (GhcPass p)) -&gt; IdGhcP p
</span><a href="#local-6989586621681365317"><span class="hs-identifier hs-var hs-var">get_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). RoleAnnotDecl (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#roleAnnotDeclName"><span class="hs-identifier hs-var">roleAnnotDeclName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span>
</span><span id="line-1644"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LRoleAnnotDecl GhcPs) -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#dupRoleAnnotErr"><span class="hs-identifier hs-var">dupRoleAnnotErr</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty (GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs))]
</span><a href="#local-6989586621681365318"><span class="hs-identifier hs-var">dup_annots</span></a></span><span>
</span><span id="line-1645"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">RoleAnnotDecl GhcPs
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (RoleAnnotDecl GhcRn)
</span><a href="#local-6989586621681365313"><span class="hs-identifier hs-var">rn_role_annot1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs)]
</span><a href="#local-6989586621681365319"><span class="hs-identifier hs-var">no_dups</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1646"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1647"></span><span>    </span><span id="local-6989586621681365313"><span class="annot"><span class="annottext">rn_role_annot1 :: RoleAnnotDecl GhcPs
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (RoleAnnotDecl GhcRn)
</span><a href="#local-6989586621681365313"><span class="hs-identifier hs-var hs-var">rn_role_annot1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RoleAnnotDecl"><span class="hs-identifier hs-type">RoleAnnotDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XCRoleAnnotDecl GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365311"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365311"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621681365310"><span class="annot"><span class="annottext">[XRec GhcPs (Maybe Role)]
</span><a href="#local-6989586621681365310"><span class="hs-identifier hs-var">roles</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1648"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>  </span><span class="hs-comment">-- the name is an *occurrence*, but look it up only in the</span><span>
</span><span id="line-1649"></span><span>              </span><span class="hs-comment">-- decls defined in this group (see #10263)</span><span>
</span><span id="line-1650"></span><span>             </span><span id="local-6989586621681365309"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365309"><span class="hs-identifier hs-var">tycon'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; SDoc
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigCtxtOccRnN"><span class="hs-identifier hs-var">lookupSigCtxtOccRnN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#RoleAnnotCtxt"><span class="hs-identifier hs-var">RoleAnnotCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365321"><span class="hs-identifier hs-var">tc_names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1651"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;role annotation&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1652"></span><span>                                           </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365311"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1653"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall pass.
XCRoleAnnotDecl pass
-&gt; LIdP pass -&gt; [XRec pass (Maybe Role)] -&gt; RoleAnnotDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#RoleAnnotDecl"><span class="hs-identifier hs-var">RoleAnnotDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365309"><span class="hs-identifier hs-var">tycon'</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Maybe Role)]
</span><a href="#local-6989586621681365310"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1654"></span><span>
</span><span id="line-1655"></span><span class="annot"><a href="GHC.Rename.Module.html#dupRoleAnnotErr"><span class="hs-identifier hs-type">dupRoleAnnotErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRoleAnnotDecl"><span class="hs-identifier hs-type">LRoleAnnotDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1656"></span><span id="dupRoleAnnotErr"><span class="annot"><span class="annottext">dupRoleAnnotErr :: NonEmpty (LRoleAnnotDecl GhcPs) -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#dupRoleAnnotErr"><span class="hs-identifier hs-var hs-var">dupRoleAnnotErr</span></a></span></span><span> </span><span id="local-6989586621681365307"><span class="annot"><span class="annottext">NonEmpty (LRoleAnnotDecl GhcPs)
</span><a href="#local-6989586621681365307"><span class="hs-identifier hs-var">list</span></a></span></span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365306"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1658"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Duplicate role annotations for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1659"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). RoleAnnotDecl (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#roleAnnotDeclName"><span class="hs-identifier hs-var">roleAnnotDeclName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleAnnotDecl GhcPs
</span><a href="#local-6989586621681365305"><span class="hs-identifier hs-var">first_decl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1660"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a}.
Outputable a =&gt;
GenLocated (SrcSpanAnn' a) a -&gt; SDoc
</span><a href="#local-6989586621681365304"><span class="hs-identifier hs-var">pp_role_annot</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs))
</span><a href="#local-6989586621681365302"><span class="hs-identifier hs-var">sorted_list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1661"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1662"></span><span>      </span><span id="local-6989586621681365302"><span class="annot"><span class="annottext">sorted_list :: NonEmpty (GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs))
</span><a href="#local-6989586621681365302"><span class="hs-identifier hs-var hs-var">sorted_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; NonEmpty a -&gt; NonEmpty a
</span><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#sortBy"><span class="hs-identifier hs-var">NE.sortBy</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {e}.
GenLocated (SrcSpanAnn' a) e
-&gt; GenLocated (SrcSpanAnn' a) e -&gt; Ordering
</span><a href="#local-6989586621681365300"><span class="hs-identifier hs-var">cmp_loc</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LRoleAnnotDecl GhcPs)
</span><a href="#local-6989586621681365307"><span class="hs-identifier hs-var">list</span></a></span><span>
</span><span id="line-1663"></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365306"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365306"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365305"><span class="annot"><span class="annottext">RoleAnnotDecl GhcPs
</span><a href="#local-6989586621681365305"><span class="hs-identifier hs-var">first_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (RoleAnnotDecl GhcPs))
</span><a href="#local-6989586621681365302"><span class="hs-identifier hs-var">sorted_list</span></a></span><span>
</span><span id="line-1664"></span><span>
</span><span id="line-1665"></span><span>      </span><span id="local-6989586621681365304"><span class="annot"><span class="annottext">pp_role_annot :: GenLocated (SrcSpanAnn' a) a -&gt; SDoc
</span><a href="#local-6989586621681365304"><span class="hs-identifier hs-var hs-var">pp_role_annot</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365296"><span class="annot"><span class="annottext">SrcSpanAnn' a
</span><a href="#local-6989586621681365296"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365295"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365295"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365295"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1666"></span><span>                                      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-- written at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnn' a
</span><a href="#local-6989586621681365296"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1667"></span><span>
</span><span id="line-1668"></span><span>      </span><span id="local-6989586621681365300"><span class="annot"><span class="annottext">cmp_loc :: GenLocated (SrcSpanAnn' a) e
-&gt; GenLocated (SrcSpanAnn' a) e -&gt; Ordering
</span><a href="#local-6989586621681365300"><span class="hs-identifier hs-var hs-var">cmp_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#leftmost_smallest"><span class="hs-identifier hs-var">SrcLoc.leftmost_smallest</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span>
</span><span id="line-1669"></span><span>
</span><span id="line-1670"></span><span class="annot"><a href="GHC.Rename.Module.html#dupKindSig_Err"><span class="hs-identifier hs-type">dupKindSig_Err</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1671"></span><span id="dupKindSig_Err"><span class="annot"><span class="annottext">dupKindSig_Err :: NonEmpty (LStandaloneKindSig GhcPs) -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#dupKindSig_Err"><span class="hs-identifier hs-var hs-var">dupKindSig_Err</span></a></span></span><span> </span><span id="local-6989586621681365293"><span class="annot"><span class="annottext">NonEmpty (LStandaloneKindSig GhcPs)
</span><a href="#local-6989586621681365293"><span class="hs-identifier hs-var">list</span></a></span></span><span>
</span><span id="line-1672"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365292"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1673"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Duplicate standalone kind signatures for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1674"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
StandaloneKindSig (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Decls.html#standaloneKindSigName"><span class="hs-identifier hs-var">standaloneKindSigName</span></a></span><span> </span><span class="annot"><span class="annottext">StandaloneKindSig GhcPs
</span><a href="#local-6989586621681365291"><span class="hs-identifier hs-var">first_decl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1675"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a}.
Outputable a =&gt;
GenLocated (SrcSpanAnn' a) a -&gt; SDoc
</span><a href="#local-6989586621681365290"><span class="hs-identifier hs-var">pp_kisig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs))
</span><a href="#local-6989586621681365289"><span class="hs-identifier hs-var">sorted_list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1676"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1677"></span><span>      </span><span id="local-6989586621681365289"><span class="annot"><span class="annottext">sorted_list :: NonEmpty (GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs))
</span><a href="#local-6989586621681365289"><span class="hs-identifier hs-var hs-var">sorted_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; NonEmpty a -&gt; NonEmpty a
</span><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#sortBy"><span class="hs-identifier hs-var">NE.sortBy</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {e}.
GenLocated (SrcSpanAnn' a) e
-&gt; GenLocated (SrcSpanAnn' a) e -&gt; Ordering
</span><a href="#local-6989586621681365288"><span class="hs-identifier hs-var">cmp_loc</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LStandaloneKindSig GhcPs)
</span><a href="#local-6989586621681365293"><span class="hs-identifier hs-var">list</span></a></span><span>
</span><span id="line-1678"></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365292"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681365292"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365291"><span class="annot"><span class="annottext">StandaloneKindSig GhcPs
</span><a href="#local-6989586621681365291"><span class="hs-identifier hs-var">first_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (StandaloneKindSig GhcPs))
</span><a href="#local-6989586621681365289"><span class="hs-identifier hs-var">sorted_list</span></a></span><span>
</span><span id="line-1679"></span><span>
</span><span id="line-1680"></span><span>      </span><span id="local-6989586621681365290"><span class="annot"><span class="annottext">pp_kisig :: GenLocated (SrcSpanAnn' a) a -&gt; SDoc
</span><a href="#local-6989586621681365290"><span class="hs-identifier hs-var hs-var">pp_kisig</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365284"><span class="annot"><span class="annottext">SrcSpanAnn' a
</span><a href="#local-6989586621681365284"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365283"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365283"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1681"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365283"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-- written at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnn' a
</span><a href="#local-6989586621681365284"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1682"></span><span>
</span><span id="line-1683"></span><span>      </span><span id="local-6989586621681365288"><span class="annot"><span class="annottext">cmp_loc :: GenLocated (SrcSpanAnn' a) e
-&gt; GenLocated (SrcSpanAnn' a) e -&gt; Ordering
</span><a href="#local-6989586621681365288"><span class="hs-identifier hs-var hs-var">cmp_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#leftmost_smallest"><span class="hs-identifier hs-var">SrcLoc.leftmost_smallest</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span>
</span><span id="line-1684"></span><span>
</span><span id="line-1685"></span><span class="hs-comment">{- Note [Role annotations in the renamer]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We must ensure that a type's role annotation is put in the same group as the
proper type declaration. This is because role annotations are needed during
type-checking when creating the type's TyCon. So, rnRoleAnnots builds a
NameEnv (LRoleAnnotDecl Name) that maps a name to a role annotation for that
type, if any. Then, this map can be used to add the role annotations to the
groups after dependency analysis.

This process checks for duplicate role annotations, where we must be careful
to do the check *before* renaming to avoid calling all unbound names duplicates
of one another.

The renaming process, as usual, might identify and report errors for unbound
names. This is done by using lookupSigCtxtOccRn in rnRoleAnnots (using
lookupGlobalOccRn led to #8485).
-}</span><span>
</span><span id="line-1702"></span><span>
</span><span id="line-1703"></span><span>
</span><span id="line-1704"></span><span class="hs-comment">{- ******************************************************
*                                                       *
       Dependency info for instances
*                                                       *
****************************************************** -}</span><span>
</span><span id="line-1709"></span><span>
</span><span id="line-1710"></span><span class="hs-comment">----------------------------------------------------------</span><span>
</span><span id="line-1711"></span><span class="hs-comment">-- | 'InstDeclFreeVarsMap is an association of an</span><span>
</span><span id="line-1712"></span><span class="hs-comment">--   @InstDecl@ with @FreeVars@. The @FreeVars@ are</span><span>
</span><span id="line-1713"></span><span class="hs-comment">--   the tycon names that are both</span><span>
</span><span id="line-1714"></span><span class="hs-comment">--     a) free in the instance declaration</span><span>
</span><span id="line-1715"></span><span class="hs-comment">--     b) bound by this group of type/class/instance decls</span><span>
</span><span id="line-1716"></span><span class="hs-keyword">type</span><span> </span><span id="InstDeclFreeVarsMap"><span class="annot"><a href="GHC.Rename.Module.html#InstDeclFreeVarsMap"><span class="hs-identifier hs-var">InstDeclFreeVarsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1717"></span><span>
</span><span id="line-1718"></span><span class="hs-comment">-- | Construct an @InstDeclFreeVarsMap@ by eliminating any @Name@s from the</span><span>
</span><span id="line-1719"></span><span class="hs-comment">--   @FreeVars@ which are *not* the binders of a @TyClDecl@.</span><span>
</span><span id="line-1720"></span><span class="annot"><a href="GHC.Rename.Module.html#mkInstDeclFreeVarsMap"><span class="hs-identifier hs-type">mkInstDeclFreeVarsMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1721"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>
</span><span id="line-1722"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1723"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#InstDeclFreeVarsMap"><span class="hs-identifier hs-type">InstDeclFreeVarsMap</span></a></span><span>
</span><span id="line-1724"></span><span id="mkInstDeclFreeVarsMap"><span class="annot"><span class="annottext">mkInstDeclFreeVarsMap :: GlobalRdrEnv
-&gt; FreeVars -&gt; InstDeclFreeVarsMap -&gt; InstDeclFreeVarsMap
</span><a href="GHC.Rename.Module.html#mkInstDeclFreeVarsMap"><span class="hs-identifier hs-var hs-var">mkInstDeclFreeVarsMap</span></a></span></span><span> </span><span id="local-6989586621681365282"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365282"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span id="local-6989586621681365281"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365281"><span class="hs-identifier hs-var">tycl_bndrs</span></a></span></span><span> </span><span id="local-6989586621681365280"><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365280"><span class="hs-identifier hs-var">inst_ds_fvs</span></a></span></span><span>
</span><span id="line-1725"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (InstDecl GhcRn)
</span><a href="#local-6989586621681365279"><span class="hs-identifier hs-var">inst_decl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Rename.Module.html#toParents"><span class="hs-identifier hs-var">toParents</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681365282"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365278"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectFVs"><span class="hs-operator hs-var">`intersectFVs`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365281"><span class="hs-identifier hs-var">tycl_bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1726"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365279"><span class="annot"><span class="annottext">LocatedA (InstDecl GhcRn)
</span><a href="#local-6989586621681365279"><span class="hs-identifier hs-var">inst_decl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365278"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365278"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365280"><span class="hs-identifier hs-var">inst_ds_fvs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1727"></span><span>
</span><span id="line-1728"></span><span class="hs-comment">-- | Get the @LInstDecl@s which have empty @FreeVars@ sets, and the</span><span>
</span><span id="line-1729"></span><span class="hs-comment">--   @InstDeclFreeVarsMap@ with these entries removed.</span><span>
</span><span id="line-1730"></span><span class="hs-comment">-- We call (getInsts tcs instd_map) when we've completed the declarations</span><span>
</span><span id="line-1731"></span><span class="hs-comment">-- for 'tcs'.  The call returns (inst_decls, instd_map'), where</span><span>
</span><span id="line-1732"></span><span class="hs-comment">--   inst_decls are the instance declarations all of</span><span>
</span><span id="line-1733"></span><span class="hs-comment">--              whose free vars are now defined</span><span>
</span><span id="line-1734"></span><span class="hs-comment">--   instd_map' is the inst-decl map with 'tcs' removed from</span><span>
</span><span id="line-1735"></span><span class="hs-comment">--               the free-var set</span><span>
</span><span id="line-1736"></span><span class="annot"><a href="GHC.Rename.Module.html#getInsts"><span class="hs-identifier hs-type">getInsts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#InstDeclFreeVarsMap"><span class="hs-identifier hs-type">InstDeclFreeVarsMap</span></a></span><span>
</span><span id="line-1737"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Module.html#InstDeclFreeVarsMap"><span class="hs-identifier hs-type">InstDeclFreeVarsMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1738"></span><span id="getInsts"><span class="annot"><span class="annottext">getInsts :: [Name]
-&gt; InstDeclFreeVarsMap -&gt; ([LInstDecl GhcRn], InstDeclFreeVarsMap)
</span><a href="GHC.Rename.Module.html#getInsts"><span class="hs-identifier hs-var hs-var">getInsts</span></a></span></span><span> </span><span id="local-6989586621681365276"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365276"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681365275"><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365275"><span class="hs-identifier hs-var">inst_decl_map</span></a></span></span><span>
</span><span id="line-1739"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; Either b c) -&gt; [a] -&gt; ([b], [c])
</span><a href="GHC.Utils.Misc.html#partitionWith"><span class="hs-identifier hs-var">partitionWith</span></a></span><span> </span><span class="annot"><span class="annottext">(LInstDecl GhcRn, FreeVars)
-&gt; Either (LInstDecl GhcRn) (LInstDecl GhcRn, FreeVars)
</span><a href="#local-6989586621681365274"><span class="hs-identifier hs-var">pick_me</span></a></span><span> </span><span class="annot"><span class="annottext">InstDeclFreeVarsMap
</span><a href="#local-6989586621681365275"><span class="hs-identifier hs-var">inst_decl_map</span></a></span><span>
</span><span id="line-1740"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1741"></span><span>    </span><span class="annot"><a href="#local-6989586621681365274"><span class="hs-identifier hs-type">pick_me</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1742"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1743"></span><span>    </span><span id="local-6989586621681365274"><span class="annot"><span class="annottext">pick_me :: (LInstDecl GhcRn, FreeVars)
-&gt; Either (LInstDecl GhcRn) (LInstDecl GhcRn, FreeVars)
</span><a href="#local-6989586621681365274"><span class="hs-identifier hs-var hs-var">pick_me</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365273"><span class="annot"><span class="annottext">LInstDecl GhcRn
</span><a href="#local-6989586621681365273"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365272"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365272"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1744"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#isEmptyNameSet"><span class="hs-identifier hs-var">isEmptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365270"><span class="hs-identifier hs-var">depleted_fvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.4.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">LInstDecl GhcRn
</span><a href="#local-6989586621681365273"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-1745"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.4.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LInstDecl GhcRn
</span><a href="#local-6989586621681365273"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365270"><span class="hs-identifier hs-var">depleted_fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1746"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1747"></span><span>        </span><span id="local-6989586621681365270"><span class="annot"><span class="annottext">depleted_fvs :: FreeVars
</span><a href="#local-6989586621681365270"><span class="hs-identifier hs-var hs-var">depleted_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#delFVs"><span class="hs-identifier hs-var">delFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365276"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365272"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-1748"></span><span>
</span><span id="line-1749"></span><span class="hs-comment">{- ******************************************************
*                                                       *
         Renaming a type or class declaration
*                                                       *
****************************************************** -}</span><span>
</span><span id="line-1754"></span><span>
</span><span id="line-1755"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyClDecl"><span class="hs-identifier hs-type">rnTyClDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClDecl"><span class="hs-identifier hs-type">TyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1756"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClDecl"><span class="hs-identifier hs-type">TyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1757"></span><span>
</span><span id="line-1758"></span><span class="hs-comment">-- All flavours of top-level type family declarations (&quot;type family&quot;, &quot;newtype</span><span>
</span><span id="line-1759"></span><span class="hs-comment">-- family&quot;, and &quot;data family&quot;)</span><span>
</span><span id="line-1760"></span><span id="rnTyClDecl"><span class="annot"><span class="annottext">rnTyClDecl :: TyClDecl GhcPs -&gt; RnM (TyClDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyClDecl"><span class="hs-identifier hs-var hs-var">rnTyClDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamDecl"><span class="hs-identifier hs-type">FamDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdFam :: forall pass. TyClDecl pass -&gt; FamilyDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFam"><span class="hs-identifier hs-var">tcdFam</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365266"><span class="annot"><span class="annottext">FamilyDecl GhcPs
</span><a href="#local-6989586621681365266"><span class="hs-identifier hs-var">fam</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1761"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365265"><span class="annot"><span class="annottext">FamilyDecl GhcRn
</span><a href="#local-6989586621681365265"><span class="hs-identifier hs-var">fam'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365264"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365264"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Name -&gt; FamilyDecl GhcPs -&gt; RnM (FamilyDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamDecl"><span class="hs-identifier hs-var">rnFamDecl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyDecl GhcPs
</span><a href="#local-6989586621681365266"><span class="hs-identifier hs-var">fam</span></a></span><span>
</span><span id="line-1762"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XFamDecl pass -&gt; FamilyDecl pass -&gt; TyClDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#FamDecl"><span class="hs-identifier hs-var">FamDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyDecl GhcRn
</span><a href="#local-6989586621681365265"><span class="hs-identifier hs-var">fam'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365264"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1763"></span><span>
</span><span id="line-1764"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyClDecl"><span class="hs-identifier hs-var">rnTyClDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SynDecl"><span class="hs-identifier hs-type">SynDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdLName :: forall pass. TyClDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365261"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365261"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdTyVars :: forall pass. TyClDecl pass -&gt; LHsQTyVars pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365259"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365259"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1765"></span><span>                      </span><span class="annot"><span class="annottext">tcdFixity :: forall pass. TyClDecl pass -&gt; LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365257"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365257"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdRhs :: forall pass. TyClDecl pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdRhs"><span class="hs-identifier hs-var">tcdRhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365255"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365255"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1766"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365254"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365254"><span class="hs-identifier hs-var">tycon'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365261"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1767"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365253"><span class="annot"><span class="annottext">kvs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365253"><span class="hs-identifier hs-var hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVarsKindVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVarsKindVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365255"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1768"></span><span>             </span><span id="local-6989586621681365252"><span class="annot"><span class="annottext">doc :: HsDocContext
</span><a href="#local-6989586621681365252"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#TySynCtx"><span class="hs-identifier hs-var">TySynCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365261"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1769"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rntycl-ty&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365261"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365253"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1770"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a b.
HsDocContext
-&gt; Maybe a
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; LHsQTyVars GhcPs
-&gt; (LHsQTyVars GhcRn -&gt; Bool -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier hs-var">bindHsQTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365252"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365253"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365259"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365250"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365250"><span class="hs-identifier hs-var">tyvars'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1771"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365249"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681365249"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365248"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365248"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTySyn"><span class="hs-identifier hs-var">rnTySyn</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365252"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365255"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1772"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SynDecl"><span class="hs-identifier hs-type">SynDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdLName :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365254"><span class="hs-identifier hs-var">tycon'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdTyVars :: LHsQTyVars GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365250"><span class="hs-identifier hs-var">tyvars'</span></a></span><span>
</span><span id="line-1773"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365257"><span class="hs-identifier hs-var">fixity</span></a></span><span>
</span><span id="line-1774"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdRhs :: LHsType GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdRhs"><span class="hs-identifier hs-var">tcdRhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681365249"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdSExt :: XSynDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdSExt"><span class="hs-identifier hs-var">tcdSExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365248"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365248"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1775"></span><span>
</span><span id="line-1776"></span><span class="hs-comment">-- &quot;data&quot;, &quot;newtype&quot; declarations</span><span>
</span><span id="line-1777"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyClDecl"><span class="hs-identifier hs-var">rnTyClDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDecl"><span class="hs-identifier hs-type">DataDecl</span></a></span><span>
</span><span id="line-1778"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdLName :: forall pass. TyClDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365245"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365245"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdTyVars :: forall pass. TyClDecl pass -&gt; LHsQTyVars pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365244"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365244"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1779"></span><span>      </span><span class="annot"><span class="annottext">tcdFixity :: forall pass. TyClDecl pass -&gt; LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365243"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365243"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1780"></span><span>      </span><span class="annot"><span class="annottext">tcdDataDefn :: forall pass. TyClDecl pass -&gt; HsDataDefn pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDataDefn"><span class="hs-identifier hs-var">tcdDataDefn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365241"><span class="annot"><span class="annottext">defn :: HsDataDefn GhcPs
</span><a href="#local-6989586621681365241"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dd_ND :: forall pass. HsDataDefn pass -&gt; NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ND"><span class="hs-identifier hs-var">dd_ND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365238"><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621681365238"><span class="hs-identifier hs-var">new_or_data</span></a></span></span><span>
</span><span id="line-1781"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_kindSig :: forall pass. HsDataDefn pass -&gt; Maybe (LHsKind pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_kindSig"><span class="hs-identifier hs-var">dd_kindSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365236"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621681365236"><span class="hs-identifier hs-var">kind_sig</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1782"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365235"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365235"><span class="hs-identifier hs-var">tycon'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365245"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1783"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365234"><span class="annot"><span class="annottext">kvs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365234"><span class="hs-identifier hs-var hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractDataDefnKindVars"><span class="hs-identifier hs-var">extractDataDefnKindVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681365241"><span class="hs-identifier hs-var">defn</span></a></span><span>
</span><span id="line-1784"></span><span>             </span><span id="local-6989586621681365233"><span class="annot"><span class="annottext">doc :: HsDocContext
</span><a href="#local-6989586621681365233"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#TyDataCtx"><span class="hs-identifier hs-var">TyDataCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365245"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1785"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rntycl-data&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365245"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365234"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1786"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a b.
HsDocContext
-&gt; Maybe a
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; LHsQTyVars GhcPs
-&gt; (LHsQTyVars GhcRn -&gt; Bool -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier hs-var">bindHsQTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365233"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365234"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365244"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365232"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365232"><span class="hs-identifier hs-var">tyvars'</span></a></span></span><span> </span><span id="local-6989586621681365231"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365231"><span class="hs-identifier hs-var">no_rhs_kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1787"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365230"><span class="annot"><span class="annottext">HsDataDefn GhcRn
</span><a href="#local-6989586621681365230"><span class="hs-identifier hs-var">defn'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365229"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365229"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsDataDefn GhcPs -&gt; RnM (HsDataDefn GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDataDefn"><span class="hs-identifier hs-var">rnDataDefn</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365233"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681365241"><span class="hs-identifier hs-var">defn</span></a></span><span>
</span><span id="line-1788"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365228"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365228"><span class="hs-identifier hs-var">cusk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass) (p' :: Pass).
LHsQTyVars (GhcPass p)
-&gt; NewOrData -&gt; Bool -&gt; Maybe (LHsKind (GhcPass p')) -&gt; TcRn Bool
</span><a href="GHC.Rename.Module.html#data_decl_has_cusk"><span class="hs-identifier hs-var">data_decl_has_cusk</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365232"><span class="hs-identifier hs-var">tyvars'</span></a></span><span> </span><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621681365238"><span class="hs-identifier hs-var">new_or_data</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365231"><span class="hs-identifier hs-var">no_rhs_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621681365236"><span class="hs-identifier hs-var">kind_sig</span></a></span><span>
</span><span id="line-1789"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365226"><span class="annot"><span class="annottext">rn_info :: DataDeclRn
</span><a href="#local-6989586621681365226"><span class="hs-identifier hs-var hs-var">rn_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDeclRn"><span class="hs-identifier hs-type">DataDeclRn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdDataCusk :: Bool
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDataCusk"><span class="hs-identifier hs-var">tcdDataCusk</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365228"><span class="hs-identifier hs-var">cusk</span></a></span><span>
</span><span id="line-1790"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdFVs :: FreeVars
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFVs"><span class="hs-identifier hs-var">tcdFVs</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365229"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1791"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rndata&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365245"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365228"><span class="hs-identifier hs-var">cusk</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365231"><span class="hs-identifier hs-var">no_rhs_kvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1792"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDecl"><span class="hs-identifier hs-type">DataDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdLName :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365235"><span class="hs-identifier hs-var">tycon'</span></a></span><span>
</span><span id="line-1793"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdTyVars :: LHsQTyVars GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365232"><span class="hs-identifier hs-var">tyvars'</span></a></span><span>
</span><span id="line-1794"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365243"><span class="hs-identifier hs-var">fixity</span></a></span><span>
</span><span id="line-1795"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdDataDefn :: HsDataDefn GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDataDefn"><span class="hs-identifier hs-var">tcdDataDefn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcRn
</span><a href="#local-6989586621681365230"><span class="hs-identifier hs-var">defn'</span></a></span><span>
</span><span id="line-1796"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdDExt :: XDataDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDExt"><span class="hs-identifier hs-var">tcdDExt</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataDeclRn
</span><a href="#local-6989586621681365226"><span class="hs-identifier hs-var">rn_info</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365229"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1797"></span><span>
</span><span id="line-1798"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTyClDecl"><span class="hs-identifier hs-var">rnTyClDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClassDecl"><span class="hs-identifier hs-type">ClassDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdCtxt :: forall pass. TyClDecl pass -&gt; Maybe (LHsContext pass)
</span><a href="Language.Haskell.Syntax.Decls.html#tcdCtxt"><span class="hs-identifier hs-var">tcdCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365219"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681365219"><span class="hs-identifier hs-var">context</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdLName :: forall pass. TyClDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365218"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365218"><span class="hs-identifier hs-var">lcls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1799"></span><span>                        </span><span class="annot"><span class="annottext">tcdTyVars :: forall pass. TyClDecl pass -&gt; LHsQTyVars pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365217"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365217"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdFixity :: forall pass. TyClDecl pass -&gt; LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365216"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365216"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1800"></span><span>                        </span><span class="annot"><span class="annottext">tcdFDs :: forall pass. TyClDecl pass -&gt; [LHsFunDep pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFDs"><span class="hs-identifier hs-var">tcdFDs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365214"><span class="annot"><span class="annottext">[LHsFunDep GhcPs]
</span><a href="#local-6989586621681365214"><span class="hs-identifier hs-var">fds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdSigs :: forall pass. TyClDecl pass -&gt; [LSig pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdSigs"><span class="hs-identifier hs-var">tcdSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365212"><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681365212"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1801"></span><span>                        </span><span class="annot"><span class="annottext">tcdMeths :: forall pass. TyClDecl pass -&gt; LHsBinds pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdMeths"><span class="hs-identifier hs-var">tcdMeths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365210"><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681365210"><span class="hs-identifier hs-var">mbinds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdATs :: forall pass. TyClDecl pass -&gt; [LFamilyDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdATs"><span class="hs-identifier hs-var">tcdATs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365208"><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681365208"><span class="hs-identifier hs-var">ats</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdATDefs :: forall pass. TyClDecl pass -&gt; [LTyFamDefltDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdATDefs"><span class="hs-identifier hs-var">tcdATDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365206"><span class="annot"><span class="annottext">[LTyFamInstDecl GhcPs]
</span><a href="#local-6989586621681365206"><span class="hs-identifier hs-var">at_defs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1802"></span><span>                        </span><span class="annot"><span class="annottext">tcdDocs :: forall pass. TyClDecl pass -&gt; [LDocDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDocs"><span class="hs-identifier hs-var">tcdDocs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365204"><span class="annot"><span class="annottext">[LDocDecl GhcPs]
</span><a href="#local-6989586621681365204"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1803"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365203"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365203"><span class="hs-identifier hs-var">lcls'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365218"><span class="hs-identifier hs-var">lcls</span></a></span><span>
</span><span id="line-1804"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365202"><span class="annot"><span class="annottext">cls' :: Name
</span><a href="#local-6989586621681365202"><span class="hs-identifier hs-var hs-var">cls'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365203"><span class="hs-identifier hs-var">lcls'</span></a></span><span>
</span><span id="line-1805"></span><span>              </span><span id="local-6989586621681365201"><span class="annot"><span class="annottext">kvs :: [a]
</span><a href="#local-6989586621681365201"><span class="hs-identifier hs-var hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- No scoped kind vars except those in</span><span>
</span><span id="line-1806"></span><span>                        </span><span class="hs-comment">-- kind signatures on the tyvars</span><span>
</span><span id="line-1807"></span><span>
</span><span id="line-1808"></span><span>        </span><span class="hs-comment">-- Tyvars scope over superclass context and method signatures</span><span>
</span><span id="line-1809"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681365200"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365200"><span class="hs-identifier hs-var">tyvars'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365199"><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681365199"><span class="hs-identifier hs-var">context'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365198"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FunDep GhcRn)]
</span><a href="#local-6989586621681365198"><span class="hs-identifier hs-var">fds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365197"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FamilyDecl GhcRn)]
</span><a href="#local-6989586621681365197"><span class="hs-identifier hs-var">ats'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365196"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365196"><span class="hs-identifier hs-var">stuff_fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1810"></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
HsDocContext
-&gt; Maybe a
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; LHsQTyVars GhcPs
-&gt; (LHsQTyVars GhcRn -&gt; Bool -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier hs-var">bindHsQTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365195"><span class="hs-identifier hs-var">cls_doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a]
</span><a href="#local-6989586621681365201"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365217"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365194"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365194"><span class="hs-identifier hs-var">tyvars'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1811"></span><span>                  </span><span class="hs-comment">-- Checks for distinct tyvars</span><span>
</span><span id="line-1812"></span><span>             </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365193"><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681365193"><span class="hs-identifier hs-var">context'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365192"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365192"><span class="hs-identifier hs-var">cxt_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier hs-var">rnContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365195"><span class="hs-identifier hs-var">cls_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681365219"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-1813"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365190"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FunDep GhcRn)]
</span><a href="#local-6989586621681365190"><span class="hs-identifier hs-var">fds'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsFunDep GhcPs] -&gt; RnM [LHsFunDep GhcRn]
</span><a href="GHC.Rename.Module.html#rnFds"><span class="hs-identifier hs-var">rnFds</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsFunDep GhcPs]
</span><a href="#local-6989586621681365214"><span class="hs-identifier hs-var">fds</span></a></span><span>
</span><span id="line-1814"></span><span>                         </span><span class="hs-comment">-- The fundeps have no free variables</span><span>
</span><span id="line-1815"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365188"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FamilyDecl GhcRn)]
</span><a href="#local-6989586621681365188"><span class="hs-identifier hs-var">ats'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365187"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365187"><span class="hs-identifier hs-var">fv_ats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [LFamilyDecl GhcPs] -&gt; RnM ([LFamilyDecl GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnATDecls"><span class="hs-identifier hs-var">rnATDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365202"><span class="hs-identifier hs-var">cls'</span></a></span><span> </span><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681365208"><span class="hs-identifier hs-var">ats</span></a></span><span>
</span><span id="line-1816"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365186"><span class="annot"><span class="annottext">fvs :: FreeVars
</span><a href="#local-6989586621681365186"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365192"><span class="hs-identifier hs-var">cxt_fvs</span></a></span><span>     </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span>
</span><span id="line-1817"></span><span>                         </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365187"><span class="hs-identifier hs-var">fv_ats</span></a></span><span>
</span><span id="line-1818"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365194"><span class="hs-identifier hs-var">tyvars'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681365193"><span class="hs-identifier hs-var">context'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FunDep GhcRn)]
</span><a href="#local-6989586621681365190"><span class="hs-identifier hs-var">fds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FamilyDecl GhcRn)]
</span><a href="#local-6989586621681365188"><span class="hs-identifier hs-var">ats'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365186"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1819"></span><span>
</span><span id="line-1820"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365185"><span class="annot"><span class="annottext">[LocatedA (TyFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365185"><span class="hs-identifier hs-var">at_defs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365184"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365184"><span class="hs-identifier hs-var">fv_at_defs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; TyFamInstDecl GhcPs -&gt; RnM (TyFamInstDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamDefltDecl"><span class="hs-identifier hs-var">rnTyFamDefltDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365202"><span class="hs-identifier hs-var">cls'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LTyFamInstDecl GhcPs]
</span><a href="#local-6989586621681365206"><span class="hs-identifier hs-var">at_defs</span></a></span><span>
</span><span id="line-1821"></span><span>
</span><span id="line-1822"></span><span>        </span><span class="hs-comment">-- No need to check for duplicate associated type decls</span><span>
</span><span id="line-1823"></span><span>        </span><span class="hs-comment">-- since that is done by GHC.Rename.Names.extendGlobalRdrEnvRn</span><span>
</span><span id="line-1824"></span><span>
</span><span id="line-1825"></span><span>        </span><span class="hs-comment">-- Check the signatures</span><span>
</span><span id="line-1826"></span><span>        </span><span class="hs-comment">-- First process the class op sigs (op_sigs), then the fixity sigs (non_op_sigs).</span><span>
</span><span id="line-1827"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365183"><span class="annot"><span class="annottext">sig_rdr_names_w_locs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365183"><span class="hs-identifier hs-var hs-var">sig_rdr_names_w_locs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1828"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365182"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span id="local-6989586621681365180"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681365180"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681365212"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-1829"></span><span>                    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365182"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621681365182"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681365180"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1830"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName] -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNamesN"><span class="hs-identifier hs-var">checkDupRdrNamesN</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365183"><span class="hs-identifier hs-var">sig_rdr_names_w_locs</span></a></span><span>
</span><span id="line-1831"></span><span>                </span><span class="hs-comment">-- Typechecker is responsible for checking that we only</span><span>
</span><span id="line-1832"></span><span>                </span><span class="hs-comment">-- give default-method bindings for things in this class.</span><span>
</span><span id="line-1833"></span><span>                </span><span class="hs-comment">-- The renamer *could* check this for class decls, but can't</span><span>
</span><span id="line-1834"></span><span>                </span><span class="hs-comment">-- for instance decls.</span><span>
</span><span id="line-1835"></span><span>
</span><span id="line-1836"></span><span>        </span><span class="hs-comment">-- The newLocals call is tiresome: given a generic class decl</span><span>
</span><span id="line-1837"></span><span>        </span><span class="hs-comment">--      class C a where</span><span>
</span><span id="line-1838"></span><span>        </span><span class="hs-comment">--        op :: a -&gt; a</span><span>
</span><span id="line-1839"></span><span>        </span><span class="hs-comment">--        op {| x+y |} (Inl a) = ...</span><span>
</span><span id="line-1840"></span><span>        </span><span class="hs-comment">--        op {| x+y |} (Inr b) = ...</span><span>
</span><span id="line-1841"></span><span>        </span><span class="hs-comment">--        op {| a*b |} (a*b)   = ...</span><span>
</span><span id="line-1842"></span><span>        </span><span class="hs-comment">-- we want to name both &quot;x&quot; tyvars with the same unique, so that they are</span><span>
</span><span id="line-1843"></span><span>        </span><span class="hs-comment">-- easy to group together in the typechecker.</span><span>
</span><span id="line-1844"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365179"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn))
</span><a href="#local-6989586621681365179"><span class="hs-identifier hs-var">mbinds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365178"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621681365178"><span class="hs-identifier hs-var">sigs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365177"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365177"><span class="hs-identifier hs-var">meth_fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1845"></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Name
-&gt; [Name]
-&gt; LHsBinds GhcPs
-&gt; [LSig GhcPs]
-&gt; RnM (LHsBinds GhcRn, [LSig GhcRn], FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMethodBinds"><span class="hs-identifier hs-var">rnMethodBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681365202"><span class="hs-identifier hs-var">cls'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsQTyVars GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsAllLTyVarNames"><span class="hs-identifier hs-var">hsAllLTyVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365200"><span class="hs-identifier hs-var">tyvars'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681365210"><span class="hs-identifier hs-var">mbinds</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681365212"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-1846"></span><span>                </span><span class="hs-comment">-- No need to check for duplicate method signatures</span><span>
</span><span id="line-1847"></span><span>                </span><span class="hs-comment">-- since that is done by GHC.Rename.Names.extendGlobalRdrEnvRn</span><span>
</span><span id="line-1848"></span><span>                </span><span class="hs-comment">-- and the methods are already in scope</span><span>
</span><span id="line-1849"></span><span>
</span><span id="line-1850"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365175"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681365175"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365177"><span class="hs-identifier hs-var">meth_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365196"><span class="hs-identifier hs-var">stuff_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365184"><span class="hs-identifier hs-var">fv_at_defs</span></a></span><span>
</span><span id="line-1851"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClassDecl"><span class="hs-identifier hs-type">ClassDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdCtxt :: Maybe (LHsContext GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#tcdCtxt"><span class="hs-identifier hs-var">tcdCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681365199"><span class="hs-identifier hs-var">context'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdLName :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365203"><span class="hs-identifier hs-var">lcls'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1852"></span><span>                              </span><span class="annot"><span class="annottext">tcdTyVars :: LHsQTyVars GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365200"><span class="hs-identifier hs-var">tyvars'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365216"><span class="hs-identifier hs-var">fixity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1853"></span><span>                              </span><span class="annot"><span class="annottext">tcdFDs :: [LHsFunDep GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFDs"><span class="hs-identifier hs-var">tcdFDs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FunDep GhcRn)]
</span><a href="#local-6989586621681365198"><span class="hs-identifier hs-var">fds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdSigs :: [LSig GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdSigs"><span class="hs-identifier hs-var">tcdSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621681365178"><span class="hs-identifier hs-var">sigs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1854"></span><span>                              </span><span class="annot"><span class="annottext">tcdMeths :: LHsBinds GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdMeths"><span class="hs-identifier hs-var">tcdMeths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn))
</span><a href="#local-6989586621681365179"><span class="hs-identifier hs-var">mbinds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdATs :: [LFamilyDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdATs"><span class="hs-identifier hs-var">tcdATs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FamilyDecl GhcRn)]
</span><a href="#local-6989586621681365197"><span class="hs-identifier hs-var">ats'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdATDefs :: [LTyFamInstDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdATDefs"><span class="hs-identifier hs-var">tcdATDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (TyFamInstDecl GhcRn)]
</span><a href="#local-6989586621681365185"><span class="hs-identifier hs-var">at_defs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1855"></span><span>                              </span><span class="annot"><span class="annottext">tcdDocs :: [LDocDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDocs"><span class="hs-identifier hs-var">tcdDocs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LDocDecl GhcPs]
</span><a href="#local-6989586621681365204"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdCExt :: XClassDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#tcdCExt"><span class="hs-identifier hs-var">tcdCExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365175"><span class="hs-identifier hs-var">all_fvs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-1856"></span><span>                  </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365175"><span class="hs-identifier hs-var">all_fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1857"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1858"></span><span>    </span><span id="local-6989586621681365195"><span class="annot"><span class="annottext">cls_doc :: HsDocContext
</span><a href="#local-6989586621681365195"><span class="hs-identifier hs-var hs-var">cls_doc</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#ClassDeclCtx"><span class="hs-identifier hs-var">ClassDeclCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365218"><span class="hs-identifier hs-var">lcls</span></a></span><span>
</span><span id="line-1859"></span><span>
</span><span id="line-1860"></span><span class="hs-comment">-- Does the data type declaration include a CUSK?</span><span>
</span><span id="line-1861"></span><span id="local-6989586621681366858"><span id="local-6989586621681366859"><span class="annot"><a href="GHC.Rename.Module.html#data_decl_has_cusk"><span class="hs-identifier hs-type">data_decl_has_cusk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsQTyVars"><span class="hs-identifier hs-type">LHsQTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366859"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#NewOrData"><span class="hs-identifier hs-type">NewOrData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsKind"><span class="hs-identifier hs-type">LHsKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366858"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-1862"></span><span id="data_decl_has_cusk"><span class="annot"><span class="annottext">data_decl_has_cusk :: forall (p :: Pass) (p' :: Pass).
LHsQTyVars (GhcPass p)
-&gt; NewOrData -&gt; Bool -&gt; Maybe (LHsKind (GhcPass p')) -&gt; TcRn Bool
</span><a href="GHC.Rename.Module.html#data_decl_has_cusk"><span class="hs-identifier hs-var hs-var">data_decl_has_cusk</span></a></span></span><span> </span><span id="local-6989586621681365170"><span class="annot"><span class="annottext">LHsQTyVars (GhcPass p)
</span><a href="#local-6989586621681365170"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span id="local-6989586621681365169"><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621681365169"><span class="hs-identifier hs-var">new_or_data</span></a></span></span><span> </span><span id="local-6989586621681365168"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365168"><span class="hs-identifier hs-var">no_rhs_kvs</span></a></span></span><span> </span><span id="local-6989586621681365167"><span class="annot"><span class="annottext">Maybe (LHsKind (GhcPass p'))
</span><a href="#local-6989586621681365167"><span class="hs-identifier hs-var">kind_sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1863"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- See Note [Unlifted Newtypes and CUSKs], and for a broader</span><span>
</span><span id="line-1864"></span><span>    </span><span class="hs-comment">-- picture, see Note [Implementation of UnliftedNewtypes].</span><span>
</span><span id="line-1865"></span><span>  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681365166"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365166"><span class="hs-identifier hs-var">unlifted_newtypes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.UnliftedNewtypes</span></span><span>
</span><span id="line-1866"></span><span>  </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365164"><span class="annot"><span class="annottext">non_cusk_newtype :: Bool
</span><a href="#local-6989586621681365164"><span class="hs-identifier hs-var hs-var">non_cusk_newtype</span></a></span></span><span>
</span><span id="line-1867"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#NewType"><span class="hs-identifier hs-var">NewType</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621681365169"><span class="hs-identifier hs-var">new_or_data</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1868"></span><span>              </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365166"><span class="hs-identifier hs-var">unlifted_newtypes</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsKind (GhcPass p'))
</span><a href="#local-6989586621681365167"><span class="hs-identifier hs-var">kind_sig</span></a></span><span>
</span><span id="line-1869"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1870"></span><span>    </span><span class="hs-comment">-- See Note [CUSKs: complete user-supplied kind signatures] in GHC.Hs.Decls</span><span>
</span><span id="line-1871"></span><span>  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). LHsQTyVars (GhcPass p) -&gt; Bool
</span><a href="GHC.Hs.Type.html#hsTvbAllKinded"><span class="hs-identifier hs-var">hsTvbAllKinded</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars (GhcPass p)
</span><a href="#local-6989586621681365170"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365168"><span class="hs-identifier hs-var">no_rhs_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365164"><span class="hs-identifier hs-var">non_cusk_newtype</span></a></span><span>
</span><span id="line-1872"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1873"></span><span>
</span><span id="line-1874"></span><span class="hs-comment">{- Note [Unlifted Newtypes and CUSKs]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When unlifted newtypes are enabled, a newtype must have a kind signature
in order to be considered have a CUSK. This is because the flow of
kind inference works differently. Consider:

  newtype Foo = FooC Int

When UnliftedNewtypes is disabled, we decide that Foo has kind
`TYPE 'LiftedRep` without looking inside the data constructor. So, we
can say that Foo has a CUSK. However, when UnliftedNewtypes is enabled,
we fill in the kind of Foo as a metavar that gets solved by unification
with the kind of the field inside FooC (that is, Int, whose kind is
`TYPE 'LiftedRep`). But since we have to look inside the data constructors
to figure out the kind signature of Foo, it does not have a CUSK.

See Note [Implementation of UnliftedNewtypes] for where this fits in to
the broader picture of UnliftedNewtypes.
-}</span><span>
</span><span id="line-1893"></span><span>
</span><span id="line-1894"></span><span class="hs-comment">-- &quot;type&quot; and &quot;type instance&quot; declarations</span><span>
</span><span id="line-1895"></span><span class="annot"><a href="GHC.Rename.Module.html#rnTySyn"><span class="hs-identifier hs-type">rnTySyn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1896"></span><span id="rnTySyn"><span class="annot"><span class="annottext">rnTySyn :: HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTySyn"><span class="hs-identifier hs-var hs-var">rnTySyn</span></a></span></span><span> </span><span id="local-6989586621681365161"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365161"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681365160"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365160"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-var">rnLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365161"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365160"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1897"></span><span>
</span><span id="line-1898"></span><span class="annot"><a href="GHC.Rename.Module.html#rnDataDefn"><span class="hs-identifier hs-type">rnDataDefn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1899"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1900"></span><span id="rnDataDefn"><span class="annot"><span class="annottext">rnDataDefn :: HsDocContext
-&gt; HsDataDefn GhcPs -&gt; RnM (HsDataDefn GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnDataDefn"><span class="hs-identifier hs-var hs-var">rnDataDefn</span></a></span></span><span> </span><span id="local-6989586621681365158"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365158"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dd_ND :: forall pass. HsDataDefn pass -&gt; NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ND"><span class="hs-identifier hs-var">dd_ND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365157"><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621681365157"><span class="hs-identifier hs-var">new_or_data</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_cType :: forall pass. HsDataDefn pass -&gt; Maybe (XRec pass CType)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cType"><span class="hs-identifier hs-var">dd_cType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365155"><span class="annot"><span class="annottext">Maybe (XRec GhcPs CType)
</span><a href="#local-6989586621681365155"><span class="hs-identifier hs-var">cType</span></a></span></span><span>
</span><span id="line-1901"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_ctxt :: forall pass. HsDataDefn pass -&gt; Maybe (LHsContext pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ctxt"><span class="hs-identifier hs-var">dd_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365153"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681365153"><span class="hs-identifier hs-var">context</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_cons :: forall pass. HsDataDefn pass -&gt; [LConDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cons"><span class="hs-identifier hs-var">dd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365151"><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621681365151"><span class="hs-identifier hs-var">condecls</span></a></span></span><span>
</span><span id="line-1902"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_kindSig :: forall pass. HsDataDefn pass -&gt; Maybe (LHsKind pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_kindSig"><span class="hs-identifier hs-var">dd_kindSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365150"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621681365150"><span class="hs-identifier hs-var">m_sig</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_derivs :: forall pass. HsDataDefn pass -&gt; HsDeriving pass
</span><a href="Language.Haskell.Syntax.Decls.html#dd_derivs"><span class="hs-identifier hs-var">dd_derivs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365148"><span class="annot"><span class="annottext">HsDeriving GhcPs
</span><a href="#local-6989586621681365148"><span class="hs-identifier hs-var">derivs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1903"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#checkTc"><span class="hs-identifier hs-var">checkTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365146"><span class="hs-identifier hs-var">h98_style</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
Maybe (LHsContext (GhcPass p)) -&gt; HsContext (GhcPass p)
</span><a href="GHC.Hs.Type.html#fromMaybeContext"><span class="hs-identifier hs-var">fromMaybeContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681365153"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1904"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc
</span><a href="GHC.Rename.Module.html#badGadtStupidTheta"><span class="hs-identifier hs-var">badGadtStupidTheta</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365158"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1905"></span><span>
</span><span id="line-1906"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365142"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681365142"><span class="hs-identifier hs-var">m_sig'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365141"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365141"><span class="hs-identifier hs-var">sig_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621681365150"><span class="hs-identifier hs-var">m_sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1907"></span><span>             </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681365140"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365140"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (b, d) (c, d)
</span><a href="../../base-4.16.4.0/src/Control-Arrow.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier hs-var">rnLHsKind</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365158"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681365140"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-1908"></span><span>             </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1909"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365138"><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681365138"><span class="hs-identifier hs-var">context'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365137"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365137"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier hs-var">rnContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365158"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681365153"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-1910"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365136"><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcRn)]
</span><a href="#local-6989586621681365136"><span class="hs-identifier hs-var">derivs'</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681365135"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365135"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcPs)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpan (HsDerivingClause GhcRn)], FreeVars)
</span><a href="#local-6989586621681365134"><span class="hs-identifier hs-var">rn_derivs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDeriving GhcPs
</span><a href="#local-6989586621681365148"><span class="hs-identifier hs-var">derivs</span></a></span><span>
</span><span id="line-1911"></span><span>
</span><span id="line-1912"></span><span>        </span><span class="hs-comment">-- For the constructor declarations, drop the LocalRdrEnv</span><span>
</span><span id="line-1913"></span><span>        </span><span class="hs-comment">-- in the GADT case, where the type variables in the declaration</span><span>
</span><span id="line-1914"></span><span>        </span><span class="hs-comment">-- do not scope over the constructor signatures</span><span>
</span><span id="line-1915"></span><span>        </span><span class="hs-comment">-- data T a where { T1 :: forall b. b-&gt; b }</span><span>
</span><span id="line-1916"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365133"><span class="annot"><span class="annottext">zap_lcl_env :: RnM ([GenLocated SrcSpanAnnA (ConDecl GhcRn)], FreeVars)
-&gt; RnM ([GenLocated SrcSpanAnnA (ConDecl GhcRn)], FreeVars)
</span><a href="#local-6989586621681365133"><span class="hs-identifier hs-var hs-var">zap_lcl_env</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365146"><span class="hs-identifier hs-var">h98_style</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365132"><span class="annot"><span class="annottext">RnM ([GenLocated SrcSpanAnnA (ConDecl GhcRn)], FreeVars)
</span><a href="#local-6989586621681365132"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RnM ([GenLocated SrcSpanAnnA (ConDecl GhcRn)], FreeVars)
</span><a href="#local-6989586621681365132"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1917"></span><span>                            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LocalRdrEnv -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Tc.Utils.Monad.html#setLocalRdrEnv"><span class="hs-identifier hs-var">setLocalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#emptyLocalRdrEnv"><span class="hs-identifier hs-var">emptyLocalRdrEnv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1918"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365129"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDecl GhcRn)]
</span><a href="#local-6989586621681365129"><span class="hs-identifier hs-var">condecls'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365128"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365128"><span class="hs-identifier hs-var">con_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM ([GenLocated SrcSpanAnnA (ConDecl GhcRn)], FreeVars)
-&gt; RnM ([GenLocated SrcSpanAnnA (ConDecl GhcRn)], FreeVars)
</span><a href="#local-6989586621681365133"><span class="hs-identifier hs-var">zap_lcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LConDecl GhcPs] -&gt; RnM ([LConDecl GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDecls"><span class="hs-identifier hs-var">rnConDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621681365151"><span class="hs-identifier hs-var">condecls</span></a></span><span>
</span><span id="line-1919"></span><span>           </span><span class="hs-comment">-- No need to check for duplicate constructor decls</span><span>
</span><span id="line-1920"></span><span>           </span><span class="hs-comment">-- since that is done by GHC.Rename.Names.extendGlobalRdrEnvRn</span><span>
</span><span id="line-1921"></span><span>
</span><span id="line-1922"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365126"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681365126"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365137"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365135"><span class="hs-identifier hs-var">fvs3</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span>
</span><span id="line-1923"></span><span>                        </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365128"><span class="hs-identifier hs-var">con_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365141"><span class="hs-identifier hs-var">sig_fvs</span></a></span><span>
</span><span id="line-1924"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dd_ext :: XCHsDataDefn GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ext"><span class="hs-identifier hs-var">dd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1925"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_ND :: NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ND"><span class="hs-identifier hs-var">dd_ND</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621681365157"><span class="hs-identifier hs-var">new_or_data</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_cType :: Maybe (XRec GhcRn CType)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cType"><span class="hs-identifier hs-var">dd_cType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs CType)
</span><a href="#local-6989586621681365155"><span class="hs-identifier hs-var">cType</span></a></span><span>
</span><span id="line-1926"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_ctxt :: Maybe (LHsContext GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ctxt"><span class="hs-identifier hs-var">dd_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681365138"><span class="hs-identifier hs-var">context'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_kindSig :: Maybe (LHsType GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_kindSig"><span class="hs-identifier hs-var">dd_kindSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681365142"><span class="hs-identifier hs-var">m_sig'</span></a></span><span>
</span><span id="line-1927"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_cons :: [LConDecl GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cons"><span class="hs-identifier hs-var">dd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDecl GhcRn)]
</span><a href="#local-6989586621681365129"><span class="hs-identifier hs-var">condecls'</span></a></span><span>
</span><span id="line-1928"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_derivs :: HsDeriving GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#dd_derivs"><span class="hs-identifier hs-var">dd_derivs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcRn)]
</span><a href="#local-6989586621681365136"><span class="hs-identifier hs-var">derivs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1929"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365126"><span class="hs-identifier hs-var">all_fvs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1930"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1931"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1932"></span><span>    </span><span id="local-6989586621681365146"><span class="annot"><span class="annottext">h98_style :: Bool
</span><a href="#local-6989586621681365146"><span class="hs-identifier hs-var hs-var">h98_style</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621681365151"><span class="hs-identifier hs-var">condecls</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- Note [Stupid theta]</span><span>
</span><span id="line-1933"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>                    </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1934"></span><span>                     </span><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><span class="hs-identifier">_</span></span><span>                                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1935"></span><span>
</span><span id="line-1936"></span><span>    </span><span id="local-6989586621681365134"><span class="annot"><span class="annottext">rn_derivs :: [GenLocated SrcSpan (HsDerivingClause GhcPs)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpan (HsDerivingClause GhcRn)], FreeVars)
</span><a href="#local-6989586621681365134"><span class="hs-identifier hs-var hs-var">rn_derivs</span></a></span></span><span> </span><span id="local-6989586621681365123"><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681365123"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-1937"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365122"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365122"><span class="hs-identifier hs-var">deriv_strats_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DerivingStrategies</span></span><span>
</span><span id="line-1938"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#failIfTc"><span class="hs-identifier hs-var">failIfTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthExceeds"><span class="hs-identifier hs-var">lengthExceeds</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681365123"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681365122"><span class="hs-identifier hs-var">deriv_strats_ok</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1939"></span><span>               </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Rename.Module.html#multipleDerivClausesErr"><span class="hs-identifier hs-var">multipleDerivClausesErr</span></a></span><span>
</span><span id="line-1940"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365118"><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcRn)]
</span><a href="#local-6989586621681365118"><span class="hs-identifier hs-var">ds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365117"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365117"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
-&gt; LHsDerivingClause GhcPs
-&gt; RnM (LHsDerivingClause GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnLHsDerivingClause"><span class="hs-identifier hs-var">rnLHsDerivingClause</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365158"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681365123"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1941"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsDerivingClause GhcRn)]
</span><a href="#local-6989586621681365118"><span class="hs-identifier hs-var">ds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365117"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1942"></span><span>
</span><span id="line-1943"></span><span class="annot"><a href="GHC.Rename.Module.html#warnNoDerivStrat"><span class="hs-identifier hs-type">warnNoDerivStrat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDerivStrategy"><span class="hs-identifier hs-type">LDerivStrategy</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1944"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1945"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1946"></span><span id="warnNoDerivStrat"><span class="annot"><span class="annottext">warnNoDerivStrat :: Maybe (LDerivStrategy GhcRn) -&gt; SrcSpan -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#warnNoDerivStrat"><span class="hs-identifier hs-var hs-var">warnNoDerivStrat</span></a></span></span><span> </span><span id="local-6989586621681365115"><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcRn)
</span><a href="#local-6989586621681365115"><span class="hs-identifier hs-var">mds</span></a></span></span><span> </span><span id="local-6989586621681365114"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365114"><span class="hs-identifier hs-var">loc</span></a></span></span><span>
</span><span id="line-1947"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365113"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681365113"><span class="hs-identifier hs-var">dyn_flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1948"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-identifier hs-var">wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnMissingDerivingStrategies"><span class="hs-identifier hs-var">Opt_WarnMissingDerivingStrategies</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681365113"><span class="hs-identifier hs-var">dyn_flags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1949"></span><span>           </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcRn)
</span><a href="#local-6989586621681365115"><span class="hs-identifier hs-var">mds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1950"></span><span>             </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcRn)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addWarnAt"><span class="hs-identifier hs-var">addWarnAt</span></a></span><span>
</span><span id="line-1951"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnMissingDerivingStrategies"><span class="hs-identifier hs-var">Opt_WarnMissingDerivingStrategies</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>               </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365114"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-1953"></span><span>               </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DerivingStrategies</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681365113"><span class="hs-identifier hs-var">dyn_flags</span></a></span><span>
</span><span id="line-1954"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365107"><span class="hs-identifier hs-var">no_strat_warning</span></a></span><span>
</span><span id="line-1955"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365107"><span class="hs-identifier hs-var">no_strat_warning</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681365105"><span class="hs-identifier hs-var">deriv_strat_nenabled</span></a></span><span>
</span><span id="line-1956"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1957"></span><span>             </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1958"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1959"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1960"></span><span>    </span><span class="annot"><a href="#local-6989586621681365107"><span class="hs-identifier hs-type">no_strat_warning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1961"></span><span>    </span><span id="local-6989586621681365107"><span class="annot"><span class="annottext">no_strat_warning :: SDoc
</span><a href="#local-6989586621681365107"><span class="hs-identifier hs-var hs-var">no_strat_warning</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No deriving strategy specified. Did you want stock&quot;</span></span><span>
</span><span id="line-1962"></span><span>                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, newtype, or anyclass?&quot;</span></span><span>
</span><span id="line-1963"></span><span>    </span><span class="annot"><a href="#local-6989586621681365105"><span class="hs-identifier hs-type">deriv_strat_nenabled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1964"></span><span>    </span><span id="local-6989586621681365105"><span class="annot"><span class="annottext">deriv_strat_nenabled :: SDoc
</span><a href="#local-6989586621681365105"><span class="hs-identifier hs-var hs-var">deriv_strat_nenabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use DerivingStrategies to specify a strategy.&quot;</span></span><span>
</span><span id="line-1965"></span><span>
</span><span id="line-1966"></span><span class="annot"><a href="GHC.Rename.Module.html#rnLHsDerivingClause"><span class="hs-identifier hs-type">rnLHsDerivingClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDerivingClause"><span class="hs-identifier hs-type">LHsDerivingClause</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1967"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDerivingClause"><span class="hs-identifier hs-type">LHsDerivingClause</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1968"></span><span id="rnLHsDerivingClause"><span class="annot"><span class="annottext">rnLHsDerivingClause :: HsDocContext
-&gt; LHsDerivingClause GhcPs
-&gt; RnM (LHsDerivingClause GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnLHsDerivingClause"><span class="hs-identifier hs-var hs-var">rnLHsDerivingClause</span></a></span></span><span> </span><span id="local-6989586621681365104"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365104"><span class="hs-identifier hs-var">doc</span></a></span></span><span>
</span><span id="line-1969"></span><span>                </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365103"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365103"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDerivingClause"><span class="hs-identifier hs-type">HsDerivingClause</span></a></span><span>
</span><span id="line-1970"></span><span>                              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">deriv_clause_ext :: forall pass. HsDerivingClause pass -&gt; XCHsDerivingClause pass
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_ext"><span class="hs-identifier hs-var">deriv_clause_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365100"><span class="annot"><span class="annottext">XCHsDerivingClause GhcPs
</span><a href="#local-6989586621681365100"><span class="hs-identifier hs-var">noExtField</span></a></span></span><span>
</span><span id="line-1971"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">deriv_clause_strategy :: forall pass. HsDerivingClause pass -&gt; Maybe (LDerivStrategy pass)
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_strategy"><span class="hs-identifier hs-var">deriv_clause_strategy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365098"><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681365098"><span class="hs-identifier hs-var">dcs</span></a></span></span><span>
</span><span id="line-1972"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">deriv_clause_tys :: forall pass. HsDerivingClause pass -&gt; LDerivClauseTys pass
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_tys"><span class="hs-identifier hs-var">deriv_clause_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365096"><span class="annot"><span class="annottext">LDerivClauseTys GhcPs
</span><a href="#local-6989586621681365096"><span class="hs-identifier hs-var">dct</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1973"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681365095"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (DerivStrategy GhcRn))
</span><a href="#local-6989586621681365095"><span class="hs-identifier hs-var">dcs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365094"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC (DerivClauseTys GhcRn)
</span><a href="#local-6989586621681365094"><span class="hs-identifier hs-var">dct'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365093"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365093"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1974"></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a.
HsDocContext
-&gt; Maybe (LDerivStrategy GhcPs)
-&gt; RnM (a, FreeVars)
-&gt; RnM (Maybe (LDerivStrategy GhcRn), a, FreeVars)
</span><a href="GHC.Rename.Module.html#rnLDerivStrategy"><span class="hs-identifier hs-var">rnLDerivStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365104"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681365098"><span class="hs-identifier hs-var">dcs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LDerivClauseTys GhcPs -&gt; RnM (LDerivClauseTys GhcRn, FreeVars)
</span><a href="#local-6989586621681365092"><span class="hs-identifier hs-var">rn_deriv_clause_tys</span></a></span><span> </span><span class="annot"><span class="annottext">LDerivClauseTys GhcPs
</span><a href="#local-6989586621681365096"><span class="hs-identifier hs-var">dct</span></a></span><span>
</span><span id="line-1975"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcRn) -&gt; SrcSpan -&gt; TcRn ()
</span><a href="GHC.Rename.Module.html#warnNoDerivStrat"><span class="hs-identifier hs-var">warnNoDerivStrat</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (DerivStrategy GhcRn))
</span><a href="#local-6989586621681365095"><span class="hs-identifier hs-var">dcs'</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365103"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-1976"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365103"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDerivingClause"><span class="hs-identifier hs-type">HsDerivingClause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">deriv_clause_ext :: XCHsDerivingClause GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_ext"><span class="hs-identifier hs-var">deriv_clause_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCHsDerivingClause GhcPs
</span><a href="#local-6989586621681365100"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1977"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">deriv_clause_strategy :: Maybe (LDerivStrategy GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_strategy"><span class="hs-identifier hs-var">deriv_clause_strategy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (DerivStrategy GhcRn))
</span><a href="#local-6989586621681365095"><span class="hs-identifier hs-var">dcs'</span></a></span><span>
</span><span id="line-1978"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">deriv_clause_tys :: LDerivClauseTys GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_tys"><span class="hs-identifier hs-var">deriv_clause_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC (DerivClauseTys GhcRn)
</span><a href="#local-6989586621681365094"><span class="hs-identifier hs-var">dct'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1979"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365093"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1980"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1981"></span><span>    </span><span class="annot"><a href="#local-6989586621681365092"><span class="hs-identifier hs-type">rn_deriv_clause_tys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDerivClauseTys"><span class="hs-identifier hs-type">LDerivClauseTys</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1982"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDerivClauseTys"><span class="hs-identifier hs-type">LDerivClauseTys</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1983"></span><span>    </span><span id="local-6989586621681365092"><span class="annot"><span class="annottext">rn_deriv_clause_tys :: LDerivClauseTys GhcPs -&gt; RnM (LDerivClauseTys GhcRn, FreeVars)
</span><a href="#local-6989586621681365092"><span class="hs-identifier hs-var hs-var">rn_deriv_clause_tys</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365091"><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681365091"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681365090"><span class="annot"><span class="annottext">DerivClauseTys GhcPs
</span><a href="#local-6989586621681365090"><span class="hs-identifier hs-var">dct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DerivClauseTys GhcPs
</span><a href="#local-6989586621681365090"><span class="hs-identifier hs-var">dct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1984"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DctSingle"><span class="hs-identifier hs-type">DctSingle</span></a></span><span> </span><span id="local-6989586621681365088"><span class="annot"><span class="annottext">XDctSingle GhcPs
</span><a href="#local-6989586621681365088"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681365087"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365087"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1985"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681365086"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365086"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365085"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365085"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs -&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="#local-6989586621681365084"><span class="hs-identifier hs-var">rn_clause_pred</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365087"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1986"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681365091"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XDctSingle pass -&gt; LHsSigType pass -&gt; DerivClauseTys pass
</span><a href="Language.Haskell.Syntax.Decls.html#DctSingle"><span class="hs-identifier hs-var">DctSingle</span></a></span><span> </span><span class="annot"><span class="annottext">XDctSingle GhcPs
</span><a href="#local-6989586621681365088"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365086"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365085"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1987"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DctMulti"><span class="hs-identifier hs-type">DctMulti</span></a></span><span> </span><span id="local-6989586621681365082"><span class="annot"><span class="annottext">XDctMulti GhcPs
</span><a href="#local-6989586621681365082"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681365081"><span class="annot"><span class="annottext">[LHsSigType GhcPs]
</span><a href="#local-6989586621681365081"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1988"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681365080"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsSigType GhcRn)]
</span><a href="#local-6989586621681365080"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365079"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365079"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs -&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="#local-6989586621681365084"><span class="hs-identifier hs-var">rn_clause_pred</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsSigType GhcPs]
</span><a href="#local-6989586621681365081"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1989"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681365091"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XDctMulti pass -&gt; [LHsSigType pass] -&gt; DerivClauseTys pass
</span><a href="Language.Haskell.Syntax.Decls.html#DctMulti"><span class="hs-identifier hs-var">DctMulti</span></a></span><span> </span><span class="annot"><span class="annottext">XDctMulti GhcPs
</span><a href="#local-6989586621681365082"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsSigType GhcRn)]
</span><a href="#local-6989586621681365080"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365079"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1990"></span><span>
</span><span id="line-1991"></span><span>    </span><span class="annot"><a href="#local-6989586621681365084"><span class="hs-identifier hs-type">rn_clause_pred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1992"></span><span>    </span><span id="local-6989586621681365084"><span class="annot"><span class="annottext">rn_clause_pred :: LHsSigType GhcPs -&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="#local-6989586621681365084"><span class="hs-identifier hs-var hs-var">rn_clause_pred</span></a></span></span><span> </span><span id="local-6989586621681365078"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365078"><span class="hs-identifier hs-var">pred_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1993"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365077"><span class="annot"><span class="annottext">inf_err :: Maybe SDoc
</span><a href="#local-6989586621681365077"><span class="hs-identifier hs-var hs-var">inf_err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Inferred type variables are not allowed&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1994"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext -&gt; Maybe SDoc -&gt; LHsSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-var">checkInferredVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365104"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681365077"><span class="hs-identifier hs-var">inf_err</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365078"><span class="hs-identifier hs-var">pred_ty</span></a></span><span>
</span><span id="line-1995"></span><span>      </span><span id="local-6989586621681365076"><span class="annot"><span class="annottext">ret :: (GenLocated SrcSpanAnnA (HsSigType GhcRn), FreeVars)
</span><a href="#local-6989586621681365076"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621681365075"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365075"><span class="hs-identifier hs-var">pred_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365104"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365078"><span class="hs-identifier hs-var">pred_ty</span></a></span><span>
</span><span id="line-1996"></span><span>      </span><span class="hs-comment">-- Check if there are any nested `forall`s, which are illegal in a</span><span>
</span><span id="line-1997"></span><span>      </span><span class="hs-comment">-- `deriving` clause.</span><span>
</span><span id="line-1998"></span><span>      </span><span class="hs-comment">-- See Note [No nested foralls or contexts in instance types]</span><span>
</span><span id="line-1999"></span><span>      </span><span class="hs-comment">-- (Wrinkle: Derived instances) in GHC.Hs.Type.</span><span>
</span><span id="line-2000"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc -&gt; LHsType GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-var">addNoNestedForallsContextsErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365104"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Derived class type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2001"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). LHsSigType (GhcPass p) -&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#getLHsInstDeclHead"><span class="hs-identifier hs-var">getLHsInstDeclHead</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365075"><span class="hs-identifier hs-var">pred_ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2002"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsSigType GhcRn), FreeVars)
</span><a href="#local-6989586621681365076"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-2003"></span><span>
</span><span id="line-2004"></span><span class="annot"><a href="GHC.Rename.Module.html#rnLDerivStrategy"><span class="hs-identifier hs-type">rnLDerivStrategy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681367007"><span class="annot"><a href="#local-6989586621681367007"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-2005"></span><span>                    </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-2006"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDerivStrategy"><span class="hs-identifier hs-type">LDerivStrategy</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2007"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681367007"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2008"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDerivStrategy"><span class="hs-identifier hs-type">LDerivStrategy</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681367007"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2009"></span><span id="rnLDerivStrategy"><span class="annot"><span class="annottext">rnLDerivStrategy :: forall a.
HsDocContext
-&gt; Maybe (LDerivStrategy GhcPs)
-&gt; RnM (a, FreeVars)
-&gt; RnM (Maybe (LDerivStrategy GhcRn), a, FreeVars)
</span><a href="GHC.Rename.Module.html#rnLDerivStrategy"><span class="hs-identifier hs-var hs-var">rnLDerivStrategy</span></a></span></span><span> </span><span id="local-6989586621681365066"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365066"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681365065"><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681365065"><span class="hs-identifier hs-var">mds</span></a></span></span><span> </span><span id="local-6989586621681365064"><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621681365064"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2010"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681365065"><span class="hs-identifier hs-var">mds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2011"></span><span>      </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ds. ds -&gt; RnM (ds, a, FreeVars)
</span><a href="#local-6989586621681365063"><span class="hs-identifier hs-var">boring_case</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2012"></span><span>      </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681365062"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365062"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681365061"><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365061"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2013"></span><span>        </span><span class="annot"><span class="annottext">forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365062"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2014"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681365059"><span class="annot"><span class="annottext">DerivStrategy GhcRn
</span><a href="#local-6989586621681365059"><span class="hs-identifier hs-var">ds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365058"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365058"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365057"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365057"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs -&gt; RnM (DerivStrategy GhcRn, a, FreeVars)
</span><a href="#local-6989586621681365056"><span class="hs-identifier hs-var">rn_deriv_strat</span></a></span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365061"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2015"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681365062"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcRn
</span><a href="#local-6989586621681365059"><span class="hs-identifier hs-var">ds'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365058"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365057"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2016"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2017"></span><span>    </span><span class="annot"><a href="#local-6989586621681365056"><span class="hs-identifier hs-type">rn_deriv_strat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivStrategy"><span class="hs-identifier hs-type">DerivStrategy</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2018"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivStrategy"><span class="hs-identifier hs-type">DerivStrategy</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681367007"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2019"></span><span>    </span><span id="local-6989586621681365056"><span class="annot"><span class="annottext">rn_deriv_strat :: DerivStrategy GhcPs -&gt; RnM (DerivStrategy GhcRn, a, FreeVars)
</span><a href="#local-6989586621681365056"><span class="hs-identifier hs-var hs-var">rn_deriv_strat</span></a></span></span><span> </span><span id="local-6989586621681365055"><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365055"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2020"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681365054"><span class="hs-identifier hs-type">extNeeded</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.Extension</span></span><span>
</span><span id="line-2021"></span><span>          </span><span id="local-6989586621681365054"><span class="annot"><span class="annottext">extNeeded :: Extension
</span><a href="#local-6989586621681365054"><span class="hs-identifier hs-var hs-var">extNeeded</span></a></span></span><span>
</span><span id="line-2022"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ViaStrategy"><span class="hs-identifier hs-type">ViaStrategy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365055"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2023"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DerivingVia</span></span><span>
</span><span id="line-2024"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2025"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DerivingStrategies</span></span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span>      </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><a href="#local-6989586621681365054"><span class="hs-identifier hs-var">extNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2028"></span><span>        </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWith"><span class="hs-identifier hs-var">failWith</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs -&gt; SDoc
</span><a href="GHC.Rename.Module.html#illegalDerivStrategyErr"><span class="hs-identifier hs-var">illegalDerivStrategyErr</span></a></span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365055"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2029"></span><span>
</span><span id="line-2030"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365055"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2031"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#StockStrategy"><span class="hs-identifier hs-type">StockStrategy</span></a></span><span>    </span><span class="annot"><span class="annottext">XStockStrategy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ds. ds -&gt; RnM (ds, a, FreeVars)
</span><a href="#local-6989586621681365063"><span class="hs-identifier hs-var">boring_case</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XStockStrategy pass -&gt; DerivStrategy pass
</span><a href="Language.Haskell.Syntax.Decls.html#StockStrategy"><span class="hs-identifier hs-var">StockStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2032"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#AnyclassStrategy"><span class="hs-identifier hs-type">AnyclassStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">XAnyClassStrategy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ds. ds -&gt; RnM (ds, a, FreeVars)
</span><a href="#local-6989586621681365063"><span class="hs-identifier hs-var">boring_case</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XAnyClassStrategy pass -&gt; DerivStrategy pass
</span><a href="Language.Haskell.Syntax.Decls.html#AnyclassStrategy"><span class="hs-identifier hs-var">AnyclassStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2033"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#NewtypeStrategy"><span class="hs-identifier hs-type">NewtypeStrategy</span></a></span><span>  </span><span class="annot"><span class="annottext">XNewtypeStrategy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall ds. ds -&gt; RnM (ds, a, FreeVars)
</span><a href="#local-6989586621681365063"><span class="hs-identifier hs-var">boring_case</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XNewtypeStrategy pass -&gt; DerivStrategy pass
</span><a href="Language.Haskell.Syntax.Decls.html#NewtypeStrategy"><span class="hs-identifier hs-var">NewtypeStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2034"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ViaStrategy"><span class="hs-identifier hs-type">ViaStrategy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#XViaStrategyPs"><span class="hs-identifier hs-type">XViaStrategyPs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn [AddEpAnn]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681365044"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365044"><span class="hs-identifier hs-var">via_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2035"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; Maybe SDoc -&gt; LHsSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-var">checkInferredVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365066"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681365043"><span class="hs-identifier hs-var">inf_err</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365044"><span class="hs-identifier hs-var">via_ty</span></a></span><span>
</span><span id="line-2036"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681365042"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365042"><span class="hs-identifier hs-var">via_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365041"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365041"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365066"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681365044"><span class="hs-identifier hs-var">via_ty</span></a></span><span>
</span><span id="line-2037"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sig_bndrs :: forall pass. HsSigType pass -&gt; HsOuterSigTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365038"><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621681365038"><span class="hs-identifier hs-var">via_outer_bndrs</span></a></span></span><span>
</span><span id="line-2038"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sig_body :: forall pass. HsSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365036"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365036"><span class="hs-identifier hs-var">via_body</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365042"><span class="hs-identifier hs-var">via_ty'</span></a></span><span>
</span><span id="line-2039"></span><span>                 </span><span id="local-6989586621681365035"><span class="annot"><span class="annottext">via_tvs :: [Name]
</span><a href="#local-6989586621681365035"><span class="hs-identifier hs-var hs-var">via_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall flag. HsOuterTyVarBndrs flag GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsOuterTyVarNames"><span class="hs-identifier hs-var">hsOuterTyVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621681365038"><span class="hs-identifier hs-var">via_outer_bndrs</span></a></span><span>
</span><span id="line-2040"></span><span>             </span><span class="hs-comment">-- Check if there are any nested `forall`s, which are illegal in a</span><span>
</span><span id="line-2041"></span><span>             </span><span class="hs-comment">-- `via` type.</span><span>
</span><span id="line-2042"></span><span>             </span><span class="hs-comment">-- See Note [No nested foralls or contexts in instance types]</span><span>
</span><span id="line-2043"></span><span>             </span><span class="hs-comment">-- (Wrinkle: Derived instances) in GHC.Hs.Type.</span><span>
</span><span id="line-2044"></span><span>             </span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc -&gt; LHsType GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-var">addNoNestedForallsContextsErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365066"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-2045"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;via&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621681365036"><span class="hs-identifier hs-var">via_body</span></a></span><span>
</span><span id="line-2046"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681365034"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365034"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365033"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365033"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-var">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681365035"><span class="hs-identifier hs-var">via_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621681365064"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-2047"></span><span>             </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XViaStrategy pass -&gt; DerivStrategy pass
</span><a href="Language.Haskell.Syntax.Decls.html#ViaStrategy"><span class="hs-identifier hs-var">ViaStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcRn)
</span><a href="#local-6989586621681365042"><span class="hs-identifier hs-var">via_ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365034"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365041"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365033"><span class="hs-identifier hs-var">fvs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2048"></span><span>
</span><span id="line-2049"></span><span>    </span><span id="local-6989586621681365043"><span class="annot"><span class="annottext">inf_err :: Maybe SDoc
</span><a href="#local-6989586621681365043"><span class="hs-identifier hs-var hs-var">inf_err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Inferred type variables are not allowed&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2050"></span><span>
</span><span id="line-2051"></span><span>    </span><span id="local-6989586621681366807"><span class="annot"><a href="#local-6989586621681365063"><span class="hs-identifier hs-type">boring_case</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681366807"><span class="hs-identifier hs-type">ds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681366807"><span class="hs-identifier hs-type">ds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681367007"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2052"></span><span>    </span><span id="local-6989586621681365063"><span class="annot"><span class="annottext">boring_case :: forall ds. ds -&gt; RnM (ds, a, FreeVars)
</span><a href="#local-6989586621681365063"><span class="hs-identifier hs-var hs-var">boring_case</span></a></span></span><span> </span><span id="local-6989586621681365030"><span class="annot"><span class="annottext">ds
</span><a href="#local-6989586621681365030"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2053"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681365029"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365029"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365028"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365028"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621681365064"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-2054"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ds
</span><a href="#local-6989586621681365030"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681365029"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365028"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2055"></span><span>
</span><span id="line-2056"></span><span class="annot"><a href="GHC.Rename.Module.html#badGadtStupidTheta"><span class="hs-identifier hs-type">badGadtStupidTheta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2057"></span><span id="badGadtStupidTheta"><span class="annot"><span class="annottext">badGadtStupidTheta :: HsDocContext -&gt; SDoc
</span><a href="GHC.Rename.Module.html#badGadtStupidTheta"><span class="hs-identifier hs-var hs-var">badGadtStupidTheta</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-2058"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No context is allowed on a GADT-style data declaration&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-2059"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(You can put a context on each constructor, though.)&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-2060"></span><span>
</span><span id="line-2061"></span><span class="annot"><a href="GHC.Rename.Module.html#illegalDerivStrategyErr"><span class="hs-identifier hs-type">illegalDerivStrategyErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivStrategy"><span class="hs-identifier hs-type">DerivStrategy</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2062"></span><span id="illegalDerivStrategyErr"><span class="annot"><span class="annottext">illegalDerivStrategyErr :: DerivStrategy GhcPs -&gt; SDoc
</span><a href="GHC.Rename.Module.html#illegalDerivStrategyErr"><span class="hs-identifier hs-var hs-var">illegalDerivStrategyErr</span></a></span></span><span> </span><span id="local-6989586621681365027"><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365027"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2063"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal deriving strategy&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. DerivStrategy a -&gt; SDoc
</span><a href="Language.Haskell.Syntax.Decls.html#derivStrategyName"><span class="hs-identifier hs-var">derivStrategyName</span></a></span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365027"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2064"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681365025"><span class="hs-identifier hs-var">enableStrategy</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2065"></span><span>
</span><span id="line-2066"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2067"></span><span>    </span><span class="annot"><a href="#local-6989586621681365025"><span class="hs-identifier hs-type">enableStrategy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-2068"></span><span>    </span><span id="local-6989586621681365025"><span class="annot"><span class="annottext">enableStrategy :: String
</span><a href="#local-6989586621681365025"><span class="hs-identifier hs-var hs-var">enableStrategy</span></a></span></span><span>
</span><span id="line-2069"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ViaStrategy"><span class="hs-identifier hs-type">ViaStrategy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><a href="#local-6989586621681365027"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2070"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use DerivingVia to enable this extension&quot;</span></span><span>
</span><span id="line-2071"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2072"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use DerivingStrategies to enable this extension&quot;</span></span><span>
</span><span id="line-2073"></span><span>
</span><span id="line-2074"></span><span class="annot"><a href="GHC.Rename.Module.html#multipleDerivClausesErr"><span class="hs-identifier hs-type">multipleDerivClausesErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2075"></span><span id="multipleDerivClausesErr"><span class="annot"><span class="annottext">multipleDerivClausesErr :: SDoc
</span><a href="GHC.Rename.Module.html#multipleDerivClausesErr"><span class="hs-identifier hs-var hs-var">multipleDerivClausesErr</span></a></span></span><span>
</span><span id="line-2076"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal use of multiple, consecutive deriving clauses&quot;</span></span><span>
</span><span id="line-2077"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use DerivingStrategies to allow this&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2078"></span><span>
</span><span id="line-2079"></span><span class="annot"><a href="GHC.Rename.Module.html#rnFamDecl"><span class="hs-identifier hs-type">rnFamDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-comment">-- Just cls =&gt; this FamilyDecl is nested</span><span>
</span><span id="line-2080"></span><span>                        </span><span class="hs-comment">--             inside an *class decl* for cls</span><span>
</span><span id="line-2081"></span><span>                        </span><span class="hs-comment">--             used for associated types</span><span>
</span><span id="line-2082"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyDecl"><span class="hs-identifier hs-type">FamilyDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2083"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyDecl"><span class="hs-identifier hs-type">FamilyDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2084"></span><span id="rnFamDecl"><span class="annot"><span class="annottext">rnFamDecl :: Maybe Name -&gt; FamilyDecl GhcPs -&gt; RnM (FamilyDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamDecl"><span class="hs-identifier hs-var hs-var">rnFamDecl</span></a></span></span><span> </span><span id="local-6989586621681365024"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681365024"><span class="hs-identifier hs-var">mb_cls</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyDecl"><span class="hs-identifier hs-type">FamilyDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fdLName :: forall pass. FamilyDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#fdLName"><span class="hs-identifier hs-var">fdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365021"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365021"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdTyVars :: forall pass. FamilyDecl pass -&gt; LHsQTyVars pass
</span><a href="Language.Haskell.Syntax.Decls.html#fdTyVars"><span class="hs-identifier hs-var">fdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365019"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365019"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span>
</span><span id="line-2085"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdTopLevel :: forall pass. FamilyDecl pass -&gt; TopLevelFlag
</span><a href="Language.Haskell.Syntax.Decls.html#fdTopLevel"><span class="hs-identifier hs-var">fdTopLevel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365017"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681365017"><span class="hs-identifier hs-var">toplevel</span></a></span></span><span>
</span><span id="line-2086"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdFixity :: forall pass. FamilyDecl pass -&gt; LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#fdFixity"><span class="hs-identifier hs-var">fdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365015"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365015"><span class="hs-identifier hs-var">fixity</span></a></span></span><span>
</span><span id="line-2087"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdInfo :: forall pass. FamilyDecl pass -&gt; FamilyInfo pass
</span><a href="Language.Haskell.Syntax.Decls.html#fdInfo"><span class="hs-identifier hs-var">fdInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365013"><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="#local-6989586621681365013"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdResultSig :: forall pass. FamilyDecl pass -&gt; LFamilyResultSig pass
</span><a href="Language.Haskell.Syntax.Decls.html#fdResultSig"><span class="hs-identifier hs-var">fdResultSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365011"><span class="annot"><span class="annottext">LFamilyResultSig GhcPs
</span><a href="#local-6989586621681365011"><span class="hs-identifier hs-var">res_sig</span></a></span></span><span>
</span><span id="line-2088"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdInjectivityAnn :: forall pass. FamilyDecl pass -&gt; Maybe (LInjectivityAnn pass)
</span><a href="Language.Haskell.Syntax.Decls.html#fdInjectivityAnn"><span class="hs-identifier hs-var">fdInjectivityAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681365009"><span class="annot"><span class="annottext">Maybe (LInjectivityAnn GhcPs)
</span><a href="#local-6989586621681365009"><span class="hs-identifier hs-var">injectivity</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2089"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681365008"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365008"><span class="hs-identifier hs-var">tycon'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365021"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-2090"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681365007"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365007"><span class="hs-identifier hs-var">tyvars'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365006"><span class="annot"><span class="annottext">Located (FamilyResultSig GhcRn)
</span><a href="#local-6989586621681365006"><span class="hs-identifier hs-var">res_sig'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365005"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (InjectivityAnn GhcRn))
</span><a href="#local-6989586621681365005"><span class="hs-identifier hs-var">injectivity'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681365004"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365004"><span class="hs-identifier hs-var">fv1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-2091"></span><span>            </span><span class="annot"><span class="annottext">forall a b.
HsDocContext
-&gt; Maybe a
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; LHsQTyVars GhcPs
-&gt; (LHsQTyVars GhcRn -&gt; Bool -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier hs-var">bindHsQTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365003"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681365024"><span class="hs-identifier hs-var">mb_cls</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365002"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621681365019"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681365001"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365001"><span class="hs-identifier hs-var">tyvars'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2092"></span><span>            </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681365000"><span class="annot"><span class="annottext">rn_sig :: FamilyResultSig GhcPs -&gt; RnM (FamilyResultSig GhcRn, FreeVars)
</span><a href="#local-6989586621681365000"><span class="hs-identifier hs-var hs-var">rn_sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; FamilyResultSig GhcPs -&gt; RnM (FamilyResultSig GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamResultSig"><span class="hs-identifier hs-var">rnFamResultSig</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681365003"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-2093"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364998"><span class="annot"><span class="annottext">Located (FamilyResultSig GhcRn)
</span><a href="#local-6989586621681364998"><span class="hs-identifier hs-var">res_sig'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364997"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364997"><span class="hs-identifier hs-var">fv_kind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; TcM (b, c)) -&gt; Located a -&gt; TcM (Located b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstM"><span class="hs-identifier hs-var">wrapLocFstM</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyResultSig GhcPs -&gt; RnM (FamilyResultSig GhcRn, FreeVars)
</span><a href="#local-6989586621681365000"><span class="hs-identifier hs-var">rn_sig</span></a></span><span> </span><span class="annot"><span class="annottext">LFamilyResultSig GhcPs
</span><a href="#local-6989586621681365011"><span class="hs-identifier hs-var">res_sig</span></a></span><span>
</span><span id="line-2094"></span><span>               </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681364995"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (InjectivityAnn GhcRn))
</span><a href="#local-6989586621681364995"><span class="hs-identifier hs-var">injectivity'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
-&gt; LFamilyResultSig GhcRn
-&gt; LInjectivityAnn GhcPs
-&gt; RnM (LInjectivityAnn GhcRn)
</span><a href="GHC.Rename.Module.html#rnInjectivityAnn"><span class="hs-identifier hs-var">rnInjectivityAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365001"><span class="hs-identifier hs-var">tyvars'</span></a></span><span> </span><span class="annot"><span class="annottext">Located (FamilyResultSig GhcRn)
</span><a href="#local-6989586621681364998"><span class="hs-identifier hs-var">res_sig'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2095"></span><span>                                          </span><span class="annot"><span class="annottext">Maybe (LInjectivityAnn GhcPs)
</span><a href="#local-6989586621681365009"><span class="hs-identifier hs-var">injectivity</span></a></span><span>
</span><span id="line-2096"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365001"><span class="hs-identifier hs-var">tyvars'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Located (FamilyResultSig GhcRn)
</span><a href="#local-6989586621681364998"><span class="hs-identifier hs-var">res_sig'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (InjectivityAnn GhcRn))
</span><a href="#local-6989586621681364995"><span class="hs-identifier hs-var">injectivity'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364997"><span class="hs-identifier hs-var">fv_kind</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2097"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364992"><span class="annot"><span class="annottext">FamilyInfo GhcRn
</span><a href="#local-6989586621681364992"><span class="hs-identifier hs-var">info'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364991"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364991"><span class="hs-identifier hs-var">fv2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FamilyInfo GhcPs -&gt; RnM (FamilyInfo GhcRn, FreeVars)
</span><a href="#local-6989586621681364990"><span class="hs-identifier hs-var">rn_info</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="#local-6989586621681365013"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-2098"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyDecl"><span class="hs-identifier hs-type">FamilyDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fdExt :: XCFamilyDecl GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fdExt"><span class="hs-identifier hs-var">fdExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-2099"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdLName :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fdLName"><span class="hs-identifier hs-var">fdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681365008"><span class="hs-identifier hs-var">tycon'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdTyVars :: LHsQTyVars GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fdTyVars"><span class="hs-identifier hs-var">fdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681365007"><span class="hs-identifier hs-var">tyvars'</span></a></span><span>
</span><span id="line-2100"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdTopLevel :: TopLevelFlag
</span><a href="Language.Haskell.Syntax.Decls.html#fdTopLevel"><span class="hs-identifier hs-var">fdTopLevel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681365017"><span class="hs-identifier hs-var">toplevel</span></a></span><span>
</span><span id="line-2101"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#fdFixity"><span class="hs-identifier hs-var">fdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681365015"><span class="hs-identifier hs-var">fixity</span></a></span><span>
</span><span id="line-2102"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdInfo :: FamilyInfo GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fdInfo"><span class="hs-identifier hs-var">fdInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FamilyInfo GhcRn
</span><a href="#local-6989586621681364992"><span class="hs-identifier hs-var">info'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdResultSig :: LFamilyResultSig GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#fdResultSig"><span class="hs-identifier hs-var">fdResultSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located (FamilyResultSig GhcRn)
</span><a href="#local-6989586621681365006"><span class="hs-identifier hs-var">res_sig'</span></a></span><span>
</span><span id="line-2103"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fdInjectivityAnn :: Maybe (LInjectivityAnn GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#fdInjectivityAnn"><span class="hs-identifier hs-var">fdInjectivityAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (InjectivityAnn GhcRn))
</span><a href="#local-6989586621681365005"><span class="hs-identifier hs-var">injectivity'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2104"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681365004"><span class="hs-identifier hs-var">fv1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364991"><span class="hs-identifier hs-var">fv2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2105"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2106"></span><span>     </span><span id="local-6989586621681365003"><span class="annot"><span class="annottext">doc :: HsDocContext
</span><a href="#local-6989586621681365003"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#TyFamilyCtx"><span class="hs-identifier hs-var">TyFamilyCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681365021"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-2107"></span><span>     </span><span id="local-6989586621681365002"><span class="annot"><span class="annottext">kvs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681365002"><span class="hs-identifier hs-var hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LFamilyResultSig GhcPs -&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractRdrKindSigVars"><span class="hs-identifier hs-var">extractRdrKindSigVars</span></a></span><span> </span><span class="annot"><span class="annottext">LFamilyResultSig GhcPs
</span><a href="#local-6989586621681365011"><span class="hs-identifier hs-var">res_sig</span></a></span><span>
</span><span id="line-2108"></span><span>
</span><span id="line-2109"></span><span>     </span><span class="hs-comment">----------------------</span><span>
</span><span id="line-2110"></span><span>     </span><span class="annot"><a href="#local-6989586621681364990"><span class="hs-identifier hs-type">rn_info</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyInfo"><span class="hs-identifier hs-type">FamilyInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyInfo"><span class="hs-identifier hs-type">FamilyInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2111"></span><span>     </span><span id="local-6989586621681364990"><span class="annot"><span class="annottext">rn_info :: FamilyInfo GhcPs -&gt; RnM (FamilyInfo GhcRn, FreeVars)
</span><a href="#local-6989586621681364990"><span class="hs-identifier hs-var hs-var">rn_info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClosedTypeFamily"><span class="hs-identifier hs-type">ClosedTypeFamily</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681364985"><span class="annot"><span class="annottext">[LTyFamInstEqn GhcPs]
</span><a href="#local-6989586621681364985"><span class="hs-identifier hs-var">eqns</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2112"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364984"><span class="annot"><span class="annottext">[LocatedA (FamEqn GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn)))]
</span><a href="#local-6989586621681364984"><span class="hs-identifier hs-var">eqns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364983"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364983"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2113"></span><span>                </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars))
-&gt; [LocatedA a] -&gt; RnM ([LocatedA b], FreeVars)
</span><a href="GHC.Rename.Module.html#rnList"><span class="hs-identifier hs-var">rnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AssocTyFamInfo
-&gt; TyFamInstEqn GhcPs -&gt; RnM (TyFamInstEqn GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnTyFamInstEqn"><span class="hs-identifier hs-var">rnTyFamInstEqn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClosedTyFamInfo -&gt; AssocTyFamInfo
</span><a href="GHC.Rename.Module.html#NonAssocTyFamEqn"><span class="hs-identifier hs-var">NonAssocTyFamEqn</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTyFamInfo
</span><a href="GHC.Rename.Module.html#ClosedTyFam"><span class="hs-identifier hs-var">ClosedTyFam</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LTyFamInstEqn GhcPs]
</span><a href="#local-6989586621681364985"><span class="hs-identifier hs-var">eqns</span></a></span><span>
</span><span id="line-2114"></span><span>                                          </span><span class="hs-comment">-- no class context</span><span>
</span><span id="line-2115"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. Maybe [LTyFamInstEqn pass] -&gt; FamilyInfo pass
</span><a href="Language.Haskell.Syntax.Decls.html#ClosedTypeFamily"><span class="hs-identifier hs-var">ClosedTypeFamily</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (FamEqn GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn)))]
</span><a href="#local-6989586621681364984"><span class="hs-identifier hs-var">eqns'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364983"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2116"></span><span>     </span><span class="annot"><a href="#local-6989586621681364990"><span class="hs-identifier hs-var">rn_info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClosedTypeFamily"><span class="hs-identifier hs-type">ClosedTypeFamily</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [LTyFamInstEqn GhcPs]
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2117"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. Maybe [LTyFamInstEqn pass] -&gt; FamilyInfo pass
</span><a href="Language.Haskell.Syntax.Decls.html#ClosedTypeFamily"><span class="hs-identifier hs-var">ClosedTypeFamily</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2118"></span><span>     </span><span class="annot"><a href="#local-6989586621681364990"><span class="hs-identifier hs-var">rn_info</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#OpenTypeFamily"><span class="hs-identifier hs-var">OpenTypeFamily</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. FamilyInfo pass
</span><a href="Language.Haskell.Syntax.Decls.html#OpenTypeFamily"><span class="hs-identifier hs-var">OpenTypeFamily</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2119"></span><span>     </span><span class="annot"><a href="#local-6989586621681364990"><span class="hs-identifier hs-var">rn_info</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#DataFamily"><span class="hs-identifier hs-var">DataFamily</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. FamilyInfo pass
</span><a href="Language.Haskell.Syntax.Decls.html#DataFamily"><span class="hs-identifier hs-var">DataFamily</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2120"></span><span>
</span><span id="line-2121"></span><span class="annot"><a href="GHC.Rename.Module.html#rnFamResultSig"><span class="hs-identifier hs-type">rnFamResultSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-2122"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyResultSig"><span class="hs-identifier hs-type">FamilyResultSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2123"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyResultSig"><span class="hs-identifier hs-type">FamilyResultSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2124"></span><span id="rnFamResultSig"><span class="annot"><span class="annottext">rnFamResultSig :: HsDocContext
-&gt; FamilyResultSig GhcPs -&gt; RnM (FamilyResultSig GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnFamResultSig"><span class="hs-identifier hs-var hs-var">rnFamResultSig</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#NoSig"><span class="hs-identifier hs-type">NoSig</span></a></span><span> </span><span class="annot"><span class="annottext">XNoSig GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-2125"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XNoSig pass -&gt; FamilyResultSig pass
</span><a href="Language.Haskell.Syntax.Decls.html#NoSig"><span class="hs-identifier hs-var">NoSig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2126"></span><span class="annot"><a href="GHC.Rename.Module.html#rnFamResultSig"><span class="hs-identifier hs-var">rnFamResultSig</span></a></span><span> </span><span id="local-6989586621681364979"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364979"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#KindSig"><span class="hs-identifier hs-type">KindSig</span></a></span><span> </span><span class="annot"><span class="annottext">XCKindSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364977"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681364977"><span class="hs-identifier hs-var">kind</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2127"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364976"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681364976"><span class="hs-identifier hs-var">rndKind</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364975"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364975"><span class="hs-identifier hs-var">ftvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier hs-var">rnLHsKind</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364979"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681364977"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-2128"></span><span>        </span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. XCKindSig pass -&gt; LHsKind pass -&gt; FamilyResultSig pass
</span><a href="Language.Haskell.Syntax.Decls.html#KindSig"><span class="hs-identifier hs-var">KindSig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681364976"><span class="hs-identifier hs-var">rndKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364975"><span class="hs-identifier hs-var">ftvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2129"></span><span class="annot"><a href="GHC.Rename.Module.html#rnFamResultSig"><span class="hs-identifier hs-var">rnFamResultSig</span></a></span><span> </span><span id="local-6989586621681364974"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364974"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyVarSig"><span class="hs-identifier hs-type">TyVarSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364972"><span class="annot"><span class="annottext">LHsTyVarBndr () GhcPs
</span><a href="#local-6989586621681364972"><span class="hs-identifier hs-var">tvbndr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2130"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- `TyVarSig` tells us that user named the result of a type family by</span><span>
</span><span id="line-2131"></span><span>          </span><span class="hs-comment">-- writing `= tyvar` or `= (tyvar :: kind)`. In such case we want to</span><span>
</span><span id="line-2132"></span><span>          </span><span class="hs-comment">-- be sure that the supplied result name is not identical to an</span><span>
</span><span id="line-2133"></span><span>          </span><span class="hs-comment">-- already in-scope type variable from an enclosing class.</span><span>
</span><span id="line-2134"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-2135"></span><span>          </span><span class="hs-comment">--  Example of disallowed declaration:</span><span>
</span><span id="line-2136"></span><span>          </span><span class="hs-comment">--         class C a b where</span><span>
</span><span id="line-2137"></span><span>          </span><span class="hs-comment">--            type F b = a | a -&gt; b</span><span>
</span><span id="line-2138"></span><span>          </span><span id="local-6989586621681364971"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681364971"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM LocalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getLocalRdrEnv"><span class="hs-identifier hs-var">getLocalRdrEnv</span></a></span><span>
</span><span id="line-2139"></span><span>       </span><span class="hs-special">;</span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364969"><span class="annot"><span class="annottext">resName :: IdP GhcPs
</span><a href="#local-6989586621681364969"><span class="hs-identifier hs-var hs-var">resName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall flag (p :: Pass).
LHsTyVarBndr flag (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Type.html#hsLTyVarName"><span class="hs-identifier hs-var">hsLTyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcPs
</span><a href="#local-6989586621681364972"><span class="hs-identifier hs-var">tvbndr</span></a></span><span>
</span><span id="line-2140"></span><span>       </span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdP GhcPs
</span><a href="#local-6989586621681364969"><span class="hs-identifier hs-var">resName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; LocalRdrEnv -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#elemLocalRdrEnv"><span class="hs-operator hs-var">`elemLocalRdrEnv`</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681364971"><span class="hs-identifier hs-var">rdr_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2141"></span><span>          </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcPs
</span><a href="#local-6989586621681364972"><span class="hs-identifier hs-var">tvbndr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2142"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type variable&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcPs
</span><a href="#local-6989586621681364969"><span class="hs-identifier hs-var">resName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-2143"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;naming a type family result,&quot;</span></span><span>
</span><span id="line-2144"></span><span>                           </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2145"></span><span>                      </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;shadows an already bound type variable&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2146"></span><span>
</span><span id="line-2147"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a flag b.
HsDocContext
-&gt; Maybe a
-&gt; LHsTyVarBndr flag GhcPs
-&gt; (LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndr"><span class="hs-identifier hs-var">bindLHsTyVarBndr</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364974"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-comment">-- This might be a lie, but it's used for</span><span>
</span><span id="line-2148"></span><span>                                      </span><span class="hs-comment">-- scoping checks that are irrelevant here</span><span>
</span><span id="line-2149"></span><span>                          </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcPs
</span><a href="#local-6989586621681364972"><span class="hs-identifier hs-var">tvbndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681364963"><span class="annot"><span class="annottext">LHsTyVarBndr () GhcRn
</span><a href="#local-6989586621681364963"><span class="hs-identifier hs-var">tvbndr'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2150"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XTyVarSig pass -&gt; LHsTyVarBndr () pass -&gt; FamilyResultSig pass
</span><a href="Language.Haskell.Syntax.Decls.html#TyVarSig"><span class="hs-identifier hs-var">TyVarSig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcRn
</span><a href="#local-6989586621681364963"><span class="hs-identifier hs-var">tvbndr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall flag (p :: Pass).
LHsTyVarBndr flag (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Type.html#hsLTyVarName"><span class="hs-identifier hs-var">hsLTyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcRn
</span><a href="#local-6989586621681364963"><span class="hs-identifier hs-var">tvbndr'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2151"></span><span>
</span><span id="line-2152"></span><span class="hs-comment">-- Note [Renaming injectivity annotation]</span><span>
</span><span id="line-2153"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-2154"></span><span class="hs-comment">--</span><span>
</span><span id="line-2155"></span><span class="hs-comment">-- During renaming of injectivity annotation we have to make several checks to</span><span>
</span><span id="line-2156"></span><span class="hs-comment">-- make sure that it is well-formed.  At the moment injectivity annotation</span><span>
</span><span id="line-2157"></span><span class="hs-comment">-- consists of a single injectivity condition, so the terms &quot;injectivity</span><span>
</span><span id="line-2158"></span><span class="hs-comment">-- annotation&quot; and &quot;injectivity condition&quot; might be used interchangeably.  See</span><span>
</span><span id="line-2159"></span><span class="hs-comment">-- Note [Injectivity annotation] for a detailed discussion of currently allowed</span><span>
</span><span id="line-2160"></span><span class="hs-comment">-- injectivity annotations.</span><span>
</span><span id="line-2161"></span><span class="hs-comment">--</span><span>
</span><span id="line-2162"></span><span class="hs-comment">-- Checking LHS is simple because the only type variable allowed on the LHS of</span><span>
</span><span id="line-2163"></span><span class="hs-comment">-- injectivity condition is the variable naming the result in type family head.</span><span>
</span><span id="line-2164"></span><span class="hs-comment">-- Example of disallowed annotation:</span><span>
</span><span id="line-2165"></span><span class="hs-comment">--</span><span>
</span><span id="line-2166"></span><span class="hs-comment">--     type family Foo a b = r | b -&gt; a</span><span>
</span><span id="line-2167"></span><span class="hs-comment">--</span><span>
</span><span id="line-2168"></span><span class="hs-comment">-- Verifying RHS of injectivity consists of checking that:</span><span>
</span><span id="line-2169"></span><span class="hs-comment">--</span><span>
</span><span id="line-2170"></span><span class="hs-comment">--  1. only variables defined in type family head appear on the RHS (kind</span><span>
</span><span id="line-2171"></span><span class="hs-comment">--     variables are also allowed).  Example of disallowed annotation:</span><span>
</span><span id="line-2172"></span><span class="hs-comment">--</span><span>
</span><span id="line-2173"></span><span class="hs-comment">--        type family Foo a = r | r -&gt; b</span><span>
</span><span id="line-2174"></span><span class="hs-comment">--</span><span>
</span><span id="line-2175"></span><span class="hs-comment">--  2. for associated types the result variable does not shadow any of type</span><span>
</span><span id="line-2176"></span><span class="hs-comment">--     class variables. Example of disallowed annotation:</span><span>
</span><span id="line-2177"></span><span class="hs-comment">--</span><span>
</span><span id="line-2178"></span><span class="hs-comment">--        class Foo a b where</span><span>
</span><span id="line-2179"></span><span class="hs-comment">--           type F a = b | b -&gt; a</span><span>
</span><span id="line-2180"></span><span class="hs-comment">--</span><span>
</span><span id="line-2181"></span><span class="hs-comment">-- Breaking any of these assumptions results in an error.</span><span>
</span><span id="line-2182"></span><span>
</span><span id="line-2183"></span><span class="hs-comment">-- | Rename injectivity annotation. Note that injectivity annotation is just the</span><span>
</span><span id="line-2184"></span><span class="hs-comment">-- part after the &quot;|&quot;.  Everything that appears before it is renamed in</span><span>
</span><span id="line-2185"></span><span class="hs-comment">-- rnFamDecl.</span><span>
</span><span id="line-2186"></span><span class="annot"><a href="GHC.Rename.Module.html#rnInjectivityAnn"><span class="hs-identifier hs-type">rnInjectivityAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsQTyVars"><span class="hs-identifier hs-type">LHsQTyVars</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>           </span><span class="hs-comment">-- ^ Type variables declared in</span><span>
</span><span id="line-2187"></span><span>                                               </span><span class="hs-comment">--   type family head</span><span>
</span><span id="line-2188"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyResultSig"><span class="hs-identifier hs-type">LFamilyResultSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>     </span><span class="hs-comment">-- ^ Result signature</span><span>
</span><span id="line-2189"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInjectivityAnn"><span class="hs-identifier hs-type">LInjectivityAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>      </span><span class="hs-comment">-- ^ Injectivity annotation</span><span>
</span><span id="line-2190"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInjectivityAnn"><span class="hs-identifier hs-type">LInjectivityAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2191"></span><span id="rnInjectivityAnn"><span class="annot"><span class="annottext">rnInjectivityAnn :: LHsQTyVars GhcRn
-&gt; LFamilyResultSig GhcRn
-&gt; LInjectivityAnn GhcPs
-&gt; RnM (LInjectivityAnn GhcRn)
</span><a href="GHC.Rename.Module.html#rnInjectivityAnn"><span class="hs-identifier hs-var hs-var">rnInjectivityAnn</span></a></span></span><span> </span><span id="local-6989586621681364962"><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681364962"><span class="hs-identifier hs-var">tvBndrs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyVarSig"><span class="hs-identifier hs-type">TyVarSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364961"><span class="annot"><span class="annottext">LHsTyVarBndr () GhcRn
</span><a href="#local-6989586621681364961"><span class="hs-identifier hs-var">resTv</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2192"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364960"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681364960"><span class="hs-identifier hs-var">srcSpan</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InjectivityAnn"><span class="hs-identifier hs-type">InjectivityAnn</span></a></span><span> </span><span id="local-6989586621681364958"><span class="annot"><span class="annottext">XCInjectivityAnn GhcPs
</span><a href="#local-6989586621681364958"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681364957"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364957"><span class="hs-identifier hs-var">injFrom</span></a></span></span><span> </span><span id="local-6989586621681364956"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364956"><span class="hs-identifier hs-var">injTo</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2193"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2194"></span><span>   </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364955"><span class="annot"><span class="annottext">injDecl' :: GenLocated SrcSpan (InjectivityAnn GhcRn)
</span><a href="#local-6989586621681364955"><span class="hs-identifier hs-var">injDecl'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InjectivityAnn"><span class="hs-identifier hs-type">InjectivityAnn</span></a></span><span> </span><span class="annot"><span class="annottext">XCInjectivityAnn GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364954"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621681364954"><span class="hs-identifier hs-var">injFrom'</span></a></span></span><span> </span><span id="local-6989586621681364953"><span class="annot"><span class="annottext">[LIdP GhcRn]
</span><a href="#local-6989586621681364953"><span class="hs-identifier hs-var">injTo'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364952"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364952"><span class="hs-identifier hs-var">noRnErrors</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2195"></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. TcRn a -&gt; TcRn (a, Bool)
</span><a href="GHC.Tc.Utils.Monad.html#askNoErrs"><span class="hs-identifier hs-var">askNoErrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2196"></span><span>             </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-var">bindLocalNames</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall flag (p :: Pass).
LHsTyVarBndr flag (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Type.html#hsLTyVarName"><span class="hs-identifier hs-var">hsLTyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcRn
</span><a href="#local-6989586621681364961"><span class="hs-identifier hs-var">resTv</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2197"></span><span>             </span><span class="hs-comment">-- The return type variable scopes over the injectivity annotation</span><span>
</span><span id="line-2198"></span><span>             </span><span class="hs-comment">-- e.g.   type family F a = (r::*) | r -&gt; a</span><span>
</span><span id="line-2199"></span><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681364950"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364950"><span class="hs-identifier hs-var">injFrom'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier hs-var">rnLTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364957"><span class="hs-identifier hs-var">injFrom</span></a></span><span>
</span><span id="line-2200"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681364948"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364948"><span class="hs-identifier hs-var">injTo'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier hs-var">rnLTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364956"><span class="hs-identifier hs-var">injTo</span></a></span><span>
</span><span id="line-2201"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681364960"><span class="hs-identifier hs-var">srcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XCInjectivityAnn pass
-&gt; LIdP pass -&gt; [LIdP pass] -&gt; InjectivityAnn pass
</span><a href="Language.Haskell.Syntax.Decls.html#InjectivityAnn"><span class="hs-identifier hs-var">InjectivityAnn</span></a></span><span> </span><span class="annot"><span class="annottext">XCInjectivityAnn GhcPs
</span><a href="#local-6989586621681364958"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364950"><span class="hs-identifier hs-var">injFrom'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364948"><span class="hs-identifier hs-var">injTo'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2202"></span><span>
</span><span id="line-2203"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364947"><span class="annot"><span class="annottext">tvNames :: Set Name
</span><a href="#local-6989586621681364947"><span class="hs-identifier hs-var hs-var">tvNames</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsAllLTyVarNames"><span class="hs-identifier hs-var">hsAllLTyVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><a href="#local-6989586621681364962"><span class="hs-identifier hs-var">tvBndrs</span></a></span><span>
</span><span id="line-2204"></span><span>         </span><span id="local-6989586621681364946"><span class="annot"><span class="annottext">resName :: IdP GhcRn
</span><a href="#local-6989586621681364946"><span class="hs-identifier hs-var hs-var">resName</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall flag (p :: Pass).
LHsTyVarBndr flag (GhcPass p) -&gt; IdP (GhcPass p)
</span><a href="GHC.Hs.Type.html#hsLTyVarName"><span class="hs-identifier hs-var">hsLTyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr () GhcRn
</span><a href="#local-6989586621681364961"><span class="hs-identifier hs-var">resTv</span></a></span><span>
</span><span id="line-2205"></span><span>         </span><span class="hs-comment">-- See Note [Renaming injectivity annotation]</span><span>
</span><span id="line-2206"></span><span>         </span><span id="local-6989586621681364945"><span class="annot"><span class="annottext">lhsValid :: Bool
</span><a href="#local-6989586621681364945"><span class="hs-identifier hs-var hs-var">lhsValid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Ordering
</span><a href="GHC.Types.Name.html#stableNameCmp"><span class="hs-identifier hs-var">stableNameCmp</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681364946"><span class="hs-identifier hs-var">resName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621681364954"><span class="hs-identifier hs-var">injFrom'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2207"></span><span>         </span><span id="local-6989586621681364943"><span class="annot"><span class="annottext">rhsValid :: Set Name
</span><a href="#local-6989586621681364943"><span class="hs-identifier hs-var hs-var">rhsValid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcRn]
</span><a href="#local-6989586621681364953"><span class="hs-identifier hs-var">injTo'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#difference"><span class="hs-operator hs-var">`Set.difference`</span></a></span><span> </span><span class="annot"><span class="annottext">Set Name
</span><a href="#local-6989586621681364947"><span class="hs-identifier hs-var">tvNames</span></a></span><span>
</span><span id="line-2208"></span><span>
</span><span id="line-2209"></span><span>   </span><span class="hs-comment">-- if renaming of type variables ended with errors (eg. there were</span><span>
</span><span id="line-2210"></span><span>   </span><span class="hs-comment">-- not-in-scope variables) don't check the validity of injectivity</span><span>
</span><span id="line-2211"></span><span>   </span><span class="hs-comment">-- annotation. This gives better error messages.</span><span>
</span><span id="line-2212"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364952"><span class="hs-identifier hs-var">noRnErrors</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364945"><span class="hs-identifier hs-var">lhsValid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2213"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364957"><span class="hs-identifier hs-var">injFrom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2214"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Incorrect type variable on the LHS of &quot;</span></span><span>
</span><span id="line-2215"></span><span>                           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;injectivity condition&quot;</span></span><span>
</span><span id="line-2216"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span>
</span><span id="line-2217"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected :&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681364946"><span class="hs-identifier hs-var">resName</span></a></span><span>
</span><span id="line-2218"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Actual   :&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364957"><span class="hs-identifier hs-var">injFrom</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2219"></span><span>
</span><span id="line-2220"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364952"><span class="hs-identifier hs-var">noRnErrors</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Set a -&gt; Bool
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#null"><span class="hs-identifier hs-var">Set.null</span></a></span><span> </span><span class="annot"><span class="annottext">Set Name
</span><a href="#local-6989586621681364943"><span class="hs-identifier hs-var">rhsValid</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2221"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364942"><span class="annot"><span class="annottext">errorVars :: [Name]
</span><a href="#local-6989586621681364942"><span class="hs-identifier hs-var hs-var">errorVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../../containers-0.6.5.1/src/Data-Set-Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set Name
</span><a href="#local-6989586621681364943"><span class="hs-identifier hs-var">rhsValid</span></a></span><span>
</span><span id="line-2222"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681364960"><span class="hs-identifier hs-var">srcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span>
</span><span id="line-2223"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown type variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681364942"><span class="hs-identifier hs-var">errorVars</span></a></span><span>
</span><span id="line-2224"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;on the RHS of injectivity condition:&quot;</span></span><span>
</span><span id="line-2225"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#interpp%27SP"><span class="hs-identifier hs-var">interpp'SP</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681364942"><span class="hs-identifier hs-var">errorVars</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2226"></span><span>
</span><span id="line-2227"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (InjectivityAnn GhcRn)
</span><a href="#local-6989586621681364955"><span class="hs-identifier hs-var">injDecl'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2228"></span><span>
</span><span id="line-2229"></span><span class="hs-comment">-- We can only hit this case when the user writes injectivity annotation without</span><span>
</span><span id="line-2230"></span><span class="hs-comment">-- naming the result:</span><span>
</span><span id="line-2231"></span><span class="hs-comment">--</span><span>
</span><span id="line-2232"></span><span class="hs-comment">--   type family F a | result -&gt; a</span><span>
</span><span id="line-2233"></span><span class="hs-comment">--   type family F a :: * | result -&gt; a</span><span>
</span><span id="line-2234"></span><span class="hs-comment">--</span><span>
</span><span id="line-2235"></span><span class="hs-comment">-- So we rename injectivity annotation like we normally would except that</span><span>
</span><span id="line-2236"></span><span class="hs-comment">-- this time we expect &quot;result&quot; to be reported not in scope by rnLTyVar.</span><span>
</span><span id="line-2237"></span><span class="annot"><a href="GHC.Rename.Module.html#rnInjectivityAnn"><span class="hs-identifier hs-var">rnInjectivityAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LFamilyResultSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364940"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681364940"><span class="hs-identifier hs-var">srcSpan</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InjectivityAnn"><span class="hs-identifier hs-type">InjectivityAnn</span></a></span><span> </span><span id="local-6989586621681364939"><span class="annot"><span class="annottext">XCInjectivityAnn GhcPs
</span><a href="#local-6989586621681364939"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681364938"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364938"><span class="hs-identifier hs-var">injFrom</span></a></span></span><span> </span><span id="local-6989586621681364937"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364937"><span class="hs-identifier hs-var">injTo</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2238"></span><span>   </span><span class="annot"><span class="annottext">forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681364940"><span class="hs-identifier hs-var">srcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2239"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681364936"><span class="annot"><span class="annottext">GenLocated SrcSpan (InjectivityAnn GhcRn)
</span><a href="#local-6989586621681364936"><span class="hs-identifier hs-var">injDecl'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. TcRn a -&gt; TcRn (a, Bool)
</span><a href="GHC.Tc.Utils.Monad.html#askNoErrs"><span class="hs-identifier hs-var">askNoErrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2240"></span><span>     </span><span id="local-6989586621681364935"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364935"><span class="hs-identifier hs-var">injFrom'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier hs-var">rnLTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364938"><span class="hs-identifier hs-var">injFrom</span></a></span><span>
</span><span id="line-2241"></span><span>     </span><span id="local-6989586621681364934"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364934"><span class="hs-identifier hs-var">injTo'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier hs-var">rnLTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364937"><span class="hs-identifier hs-var">injTo</span></a></span><span>
</span><span id="line-2242"></span><span>     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681364940"><span class="hs-identifier hs-var">srcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XCInjectivityAnn pass
-&gt; LIdP pass -&gt; [LIdP pass] -&gt; InjectivityAnn pass
</span><a href="Language.Haskell.Syntax.Decls.html#InjectivityAnn"><span class="hs-identifier hs-var">InjectivityAnn</span></a></span><span> </span><span class="annot"><span class="annottext">XCInjectivityAnn GhcPs
</span><a href="#local-6989586621681364939"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364935"><span class="hs-identifier hs-var">injFrom'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364934"><span class="hs-identifier hs-var">injTo'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2243"></span><span>   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (InjectivityAnn GhcRn)
</span><a href="#local-6989586621681364936"><span class="hs-identifier hs-var">injDecl'</span></a></span><span>
</span><span id="line-2244"></span><span>
</span><span id="line-2245"></span><span class="hs-comment">{-
Note [Stupid theta]
~~~~~~~~~~~~~~~~~~~
#3850 complains about a regression wrt 6.10 for
     data Show a =&gt; T a
There is no reason not to allow the stupid theta if there are no data
constructors.  It's still stupid, but does no harm, and I don't want
to cause programs to break unnecessarily (notably HList).  So if there
are no data constructors we allow h98_style = True
-}</span><span>
</span><span id="line-2255"></span><span>
</span><span id="line-2256"></span><span>
</span><span id="line-2257"></span><span class="hs-comment">{- *****************************************************
*                                                      *
     Support code for type/data declarations
*                                                      *
***************************************************** -}</span><span>
</span><span id="line-2262"></span><span>
</span><span id="line-2263"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-2264"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDecls"><span class="hs-identifier hs-type">rnConDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2265"></span><span id="rnConDecls"><span class="annot"><span class="annottext">rnConDecls :: [LConDecl GhcPs] -&gt; RnM ([LConDecl GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDecls"><span class="hs-identifier hs-var hs-var">rnConDecls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs -&gt; RnM (ConDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDecl"><span class="hs-identifier hs-var">rnConDecl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2266"></span><span>
</span><span id="line-2267"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDecl"><span class="hs-identifier hs-type">rnConDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDecl"><span class="hs-identifier hs-type">ConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDecl"><span class="hs-identifier hs-type">ConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2268"></span><span id="rnConDecl"><span class="annot"><span class="annottext">rnConDecl :: ConDecl GhcPs -&gt; RnM (ConDecl GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDecl"><span class="hs-identifier hs-var hs-var">rnConDecl</span></a></span></span><span> </span><span id="local-6989586621681364932"><span class="annot"><span class="annottext">decl :: ConDecl GhcPs
</span><a href="#local-6989586621681364932"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_name :: forall pass. ConDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#con_name"><span class="hs-identifier hs-var">con_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364929"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364929"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_ex_tvs :: forall pass. ConDecl pass -&gt; [LHsTyVarBndr Specificity pass]
</span><a href="Language.Haskell.Syntax.Decls.html#con_ex_tvs"><span class="hs-identifier hs-var">con_ex_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364927"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681364927"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span>
</span><span id="line-2269"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_mb_cxt :: forall pass. ConDecl pass -&gt; Maybe (LHsContext pass)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var">con_mb_cxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364925"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364925"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_args :: forall pass. ConDecl pass -&gt; HsConDeclH98Details pass
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364923"><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
</span><a href="#local-6989586621681364923"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-2270"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_doc :: forall pass. ConDecl pass -&gt; Maybe LHsDocString
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364921"><span class="annot"><span class="annottext">Maybe LHsDocString
</span><a href="#local-6989586621681364921"><span class="hs-identifier hs-var">mb_doc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_forall :: forall pass. ConDecl pass -&gt; Bool
</span><a href="Language.Haskell.Syntax.Decls.html#con_forall"><span class="hs-identifier hs-var">con_forall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364919"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364919"><span class="hs-keyword hs-var">forall</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2271"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b) -&gt; GenLocated (SrcSpanAnn' ann) a -&gt; TcM b
</span><a href="GHC.Tc.Utils.Monad.html#addLocMA"><span class="hs-identifier hs-var">addLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; TcRn ()
</span><a href="GHC.Rename.Names.html#checkConName"><span class="hs-identifier hs-var">checkConName</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364929"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2272"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681364917"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364917"><span class="hs-identifier hs-var">new_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364929"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2273"></span><span>
</span><span id="line-2274"></span><span>        </span><span class="hs-comment">-- We bind no implicit binders here; this is just like</span><span>
</span><span id="line-2275"></span><span>        </span><span class="hs-comment">-- a nested HsForAllTy.  E.g. consider</span><span>
</span><span id="line-2276"></span><span>        </span><span class="hs-comment">--         data T a = forall (b::k). MkT (...)</span><span>
</span><span id="line-2277"></span><span>        </span><span class="hs-comment">-- The 'k' will already be in scope from the bindHsQTyVars</span><span>
</span><span id="line-2278"></span><span>        </span><span class="hs-comment">-- for the data decl itself. So we'll get</span><span>
</span><span id="line-2279"></span><span>        </span><span class="hs-comment">--         data T {k} a = ...</span><span>
</span><span id="line-2280"></span><span>        </span><span class="hs-comment">-- And indeed we may later discover (a::k).  But that's the</span><span>
</span><span id="line-2281"></span><span>        </span><span class="hs-comment">-- scoping we get.  So no implicit binders at the existential forall</span><span>
</span><span id="line-2282"></span><span>
</span><span id="line-2283"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364916"><span class="annot"><span class="annottext">ctxt :: HsDocContext
</span><a href="#local-6989586621681364916"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name] -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#ConDeclCtx"><span class="hs-identifier hs-var">ConDeclCtx</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364917"><span class="hs-identifier hs-var">new_name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2284"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var">bindLHsTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364916"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span>
</span><span id="line-2285"></span><span>                            </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681364927"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681364914"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcRn]
</span><a href="#local-6989586621681364914"><span class="hs-identifier hs-var">new_ex_tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2286"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364913"><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681364913"><span class="hs-identifier hs-var">new_context</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364912"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364912"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.Module.html#rnMbContext"><span class="hs-identifier hs-var">rnMbContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364916"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364925"><span class="hs-identifier hs-var">mcxt</span></a></span><span>
</span><span id="line-2287"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364910"><span class="annot"><span class="annottext">HsConDetails
  Void
  (HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcRn)])
</span><a href="#local-6989586621681364910"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">,</span><span>    </span><span id="local-6989586621681364909"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364909"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; HsDocContext
-&gt; HsConDeclH98Details GhcPs
-&gt; RnM (HsConDeclH98Details GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDeclH98Details"><span class="hs-identifier hs-var">rnConDeclH98Details</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364917"><span class="hs-identifier hs-var">new_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364916"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
</span><a href="#local-6989586621681364923"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-2288"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364907"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681364907"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364912"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364909"><span class="hs-identifier hs-var">fvs2</span></a></span><span>
</span><span id="line-2289"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnConDecl (ConDeclH98)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621681364929"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-2290"></span><span>             </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ex_tvs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681364927"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-2291"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;new_ex_dqtvs':&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcRn]
</span><a href="#local-6989586621681364914"><span class="hs-identifier hs-var">new_ex_tvs</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2292"></span><span>
</span><span id="line-2293"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681364932"><span class="hs-identifier hs-var">decl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_ext :: XConDeclH98 GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#con_ext"><span class="hs-identifier hs-var">con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-2294"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_name :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#con_name"><span class="hs-identifier hs-var">con_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681364917"><span class="hs-identifier hs-var">new_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_ex_tvs :: [LHsTyVarBndr Specificity GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#con_ex_tvs"><span class="hs-identifier hs-var">con_ex_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcRn]
</span><a href="#local-6989586621681364914"><span class="hs-identifier hs-var">new_ex_tvs</span></a></span><span>
</span><span id="line-2295"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_mb_cxt :: Maybe (LHsContext GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var">con_mb_cxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681364913"><span class="hs-identifier hs-var">new_context</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_args :: HsConDeclH98Details GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDetails
  Void
  (HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcRn)])
</span><a href="#local-6989586621681364910"><span class="hs-identifier hs-var">new_args</span></a></span><span>
</span><span id="line-2296"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_doc :: Maybe LHsDocString
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe LHsDocString
</span><a href="#local-6989586621681364921"><span class="hs-identifier hs-var">mb_doc</span></a></span><span>
</span><span id="line-2297"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_forall :: Bool
</span><a href="Language.Haskell.Syntax.Decls.html#con_forall"><span class="hs-identifier hs-var">con_forall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364919"><span class="hs-keyword hs-var">forall</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Remove when #18311 is fixed</span><span>
</span><span id="line-2298"></span><span>                  </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364907"><span class="hs-identifier hs-var">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-2299"></span><span>
</span><span id="line-2300"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDecl"><span class="hs-identifier hs-var">rnConDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_names :: forall pass. ConDecl pass -&gt; [LIdP pass]
</span><a href="Language.Haskell.Syntax.Decls.html#con_names"><span class="hs-identifier hs-var">con_names</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364904"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364904"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-2301"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_bndrs :: forall pass. ConDecl pass -&gt; XRec pass (HsOuterSigTyVarBndrs pass)
</span><a href="Language.Haskell.Syntax.Decls.html#con_bndrs"><span class="hs-identifier hs-var">con_bndrs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364902"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364902"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681364901"><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcPs
</span><a href="#local-6989586621681364901"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span>
</span><span id="line-2302"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_mb_cxt :: forall pass. ConDecl pass -&gt; Maybe (LHsContext pass)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var">con_mb_cxt</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364900"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364900"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span>
</span><span id="line-2303"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_g_args :: forall pass. ConDecl pass -&gt; HsConDeclGADTDetails pass
</span><a href="Language.Haskell.Syntax.Decls.html#con_g_args"><span class="hs-identifier hs-var">con_g_args</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364898"><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621681364898"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-2304"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_res_ty :: forall pass. ConDecl pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Decls.html#con_res_ty"><span class="hs-identifier hs-var">con_res_ty</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364896"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681364896"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span>
</span><span id="line-2305"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_doc :: forall pass. ConDecl pass -&gt; Maybe LHsDocString
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364895"><span class="annot"><span class="annottext">Maybe LHsDocString
</span><a href="#local-6989586621681364895"><span class="hs-identifier hs-var">mb_doc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2306"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b) -&gt; GenLocated (SrcSpanAnn' ann) a -&gt; TcM b
</span><a href="GHC.Tc.Utils.Monad.html#addLocMA"><span class="hs-identifier hs-var">addLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; TcRn ()
</span><a href="GHC.Rename.Names.html#checkConName"><span class="hs-identifier hs-var">checkConName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364904"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-2307"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681364894"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364894"><span class="hs-identifier hs-var">new_names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopBndrRnN"><span class="hs-identifier hs-var">lookupLocatedTopBndrRnN</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364904"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-2308"></span><span>
</span><span id="line-2309"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- We must ensure that we extract the free tkvs in left-to-right</span><span>
</span><span id="line-2310"></span><span>              </span><span class="hs-comment">-- order of their appearance in the constructor type.</span><span>
</span><span id="line-2311"></span><span>              </span><span class="hs-comment">-- That order governs the order the implicitly-quantified type</span><span>
</span><span id="line-2312"></span><span>              </span><span class="hs-comment">-- variable, and hence the order needed for visible type application</span><span>
</span><span id="line-2313"></span><span>              </span><span class="hs-comment">-- See #14808.</span><span>
</span><span id="line-2314"></span><span>              </span><span id="local-6989586621681364893"><span class="annot"><span class="annottext">implicit_bndrs :: [GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681364893"><span class="hs-identifier hs-var hs-var">implicit_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2315"></span><span>                </span><span class="annot"><span class="annottext">forall flag.
HsOuterTyVarBndrs flag GhcPs
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractHsOuterTvBndrs"><span class="hs-identifier hs-var">extractHsOuterTvBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcPs
</span><a href="#local-6989586621681364901"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span>           </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2316"></span><span>                </span><span class="annot"><span class="annottext">[LHsType GhcPs]
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractHsTysRdrTyVars"><span class="hs-identifier hs-var">extractHsTysRdrTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
Maybe (LHsContext (GhcPass p)) -&gt; HsContext (GhcPass p)
</span><a href="GHC.Hs.Decls.html#hsConDeclTheta"><span class="hs-identifier hs-var">hsConDeclTheta</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364900"><span class="hs-identifier hs-var">mcxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2317"></span><span>                </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractConDeclGADTDetailsTyVars"><span class="hs-identifier hs-var">extractConDeclGADTDetailsTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621681364898"><span class="hs-identifier hs-var">args</span></a></span><span>        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2318"></span><span>                </span><span class="annot"><span class="annottext">[LHsType GhcPs]
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; [GenLocated SrcSpanAnnN RdrName]
</span><a href="GHC.Rename.HsType.html#extractHsTysRdrTyVars"><span class="hs-identifier hs-var">extractHsTysRdrTyVars</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681364896"><span class="hs-identifier hs-var">res_ty</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2319"></span><span>
</span><span id="line-2320"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364888"><span class="annot"><span class="annottext">ctxt :: HsDocContext
</span><a href="#local-6989586621681364888"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name] -&gt; HsDocContext
</span><a href="GHC.Rename.Utils.html#ConDeclCtx"><span class="hs-identifier hs-var">ConDeclCtx</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364894"><span class="hs-identifier hs-var">new_names</span></a></span><span>
</span><span id="line-2321"></span><span>
</span><span id="line-2322"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall flag assoc a.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; Maybe assoc
-&gt; [GenLocated SrcSpanAnnN RdrName]
-&gt; HsOuterTyVarBndrs flag GhcPs
-&gt; (HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier hs-var">bindHsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364888"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681364893"><span class="hs-identifier hs-var">implicit_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcPs
</span><a href="#local-6989586621681364901"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681364887"><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621681364887"><span class="hs-identifier hs-var">outer_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2323"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364886"><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681364886"><span class="hs-identifier hs-var">new_cxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364885"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364885"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.Module.html#rnMbContext"><span class="hs-identifier hs-var">rnMbContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364888"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364900"><span class="hs-identifier hs-var">mcxt</span></a></span><span>
</span><span id="line-2324"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364884"><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcRn
</span><a href="#local-6989586621681364884"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364883"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364883"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; HsDocContext
-&gt; HsConDeclGADTDetails GhcPs
-&gt; RnM (HsConDeclGADTDetails GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDeclGADTDetails"><span class="hs-identifier hs-var">rnConDeclGADTDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364894"><span class="hs-identifier hs-var">new_names</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364888"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621681364898"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-2325"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364880"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681364880"><span class="hs-identifier hs-var">new_res_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364879"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364879"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-var">rnLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364888"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681364896"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-2326"></span><span>
</span><span id="line-2327"></span><span>         </span><span class="hs-comment">-- Ensure that there are no nested `forall`s or contexts, per</span><span>
</span><span id="line-2328"></span><span>         </span><span class="hs-comment">-- Note [GADT abstract syntax] (Wrinkle: No nested foralls or contexts)</span><span>
</span><span id="line-2329"></span><span>         </span><span class="hs-comment">-- in GHC.Hs.Type.</span><span>
</span><span id="line-2330"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc -&gt; LHsType GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-var">addNoNestedForallsContextsErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364888"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2331"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GADT constructor type signature&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681364880"><span class="hs-identifier hs-var">new_res_ty</span></a></span><span>
</span><span id="line-2332"></span><span>
</span><span id="line-2333"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364878"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681364878"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364885"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364883"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364879"><span class="hs-identifier hs-var">fvs3</span></a></span><span>
</span><span id="line-2334"></span><span>
</span><span id="line-2335"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnConDecl (ConDeclGADT)&quot;</span></span><span>
</span><span id="line-2336"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364904"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621681364887"><span class="hs-identifier hs-var">outer_bndrs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2337"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_g_ext :: XConDeclGADT GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#con_g_ext"><span class="hs-identifier hs-var">con_g_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_names :: [LIdP GhcRn]
</span><a href="Language.Haskell.Syntax.Decls.html#con_names"><span class="hs-identifier hs-var">con_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364894"><span class="hs-identifier hs-var">new_names</span></a></span><span>
</span><span id="line-2338"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_bndrs :: XRec GhcRn (HsOuterTyVarBndrs Specificity GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#con_bndrs"><span class="hs-identifier hs-var">con_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364902"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621681364887"><span class="hs-identifier hs-var">outer_bndrs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_mb_cxt :: Maybe (LHsContext GhcRn)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var">con_mb_cxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681364886"><span class="hs-identifier hs-var">new_cxt</span></a></span><span>
</span><span id="line-2339"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_g_args :: HsConDeclGADTDetails GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#con_g_args"><span class="hs-identifier hs-var">con_g_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcRn
</span><a href="#local-6989586621681364884"><span class="hs-identifier hs-var">new_args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_res_ty :: LHsType GhcRn
</span><a href="Language.Haskell.Syntax.Decls.html#con_res_ty"><span class="hs-identifier hs-var">con_res_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621681364880"><span class="hs-identifier hs-var">new_res_ty</span></a></span><span>
</span><span id="line-2340"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_doc :: Maybe LHsDocString
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe LHsDocString
</span><a href="#local-6989586621681364895"><span class="hs-identifier hs-var">mb_doc</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-2341"></span><span>                  </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364878"><span class="hs-identifier hs-var">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2342"></span><span>
</span><span id="line-2343"></span><span class="annot"><a href="GHC.Rename.Module.html#rnMbContext"><span class="hs-identifier hs-type">rnMbContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2344"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2345"></span><span id="rnMbContext"><span class="annot"><span class="annottext">rnMbContext :: HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.Module.html#rnMbContext"><span class="hs-identifier hs-var hs-var">rnMbContext</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span>    </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2346"></span><span class="annot"><a href="GHC.Rename.Module.html#rnMbContext"><span class="hs-identifier hs-var">rnMbContext</span></a></span><span> </span><span id="local-6989586621681364876"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364876"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681364875"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364875"><span class="hs-identifier hs-var">cxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364874"><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681364874"><span class="hs-identifier hs-var">ctx'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681364873"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364873"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier hs-var">rnContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364876"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681364875"><span class="hs-identifier hs-var">cxt</span></a></span><span>
</span><span id="line-2347"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
</span><a href="#local-6989586621681364874"><span class="hs-identifier hs-var">ctx'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364873"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2348"></span><span>
</span><span id="line-2349"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDeclH98Details"><span class="hs-identifier hs-type">rnConDeclH98Details</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2350"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-2351"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-2352"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclH98Details"><span class="hs-identifier hs-type">HsConDeclH98Details</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2353"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclH98Details"><span class="hs-identifier hs-type">HsConDeclH98Details</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2354"></span><span id="rnConDeclH98Details"><span class="annot"><span class="annottext">rnConDeclH98Details :: Name
-&gt; HsDocContext
-&gt; HsConDeclH98Details GhcPs
-&gt; RnM (HsConDeclH98Details GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDeclH98Details"><span class="hs-identifier hs-var hs-var">rnConDeclH98Details</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364872"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364872"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364870"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681364870"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2355"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364869"><span class="annot"><span class="annottext">[HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))]
</span><a href="#local-6989586621681364869"><span class="hs-identifier hs-var">new_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364868"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364868"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsScaled GhcPs (LHsType GhcPs)
-&gt; RnM (HsScaled GhcRn (LHsType GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier hs-var">rnScaledLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364872"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681364870"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-2356"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))]
</span><a href="#local-6989586621681364869"><span class="hs-identifier hs-var">new_tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364868"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2357"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDeclH98Details"><span class="hs-identifier hs-var">rnConDeclH98Details</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364865"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364865"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681364863"><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681364863"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681364862"><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681364862"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2358"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364861"><span class="annot"><span class="annottext">HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681364861"><span class="hs-identifier hs-var">new_ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364860"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364860"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsScaled GhcPs (LHsType GhcPs)
-&gt; RnM (HsScaled GhcRn (LHsType GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier hs-var">rnScaledLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364865"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681364863"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-2359"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364859"><span class="annot"><span class="annottext">HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681364859"><span class="hs-identifier hs-var">new_ty2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364858"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364858"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsScaled GhcPs (LHsType GhcPs)
-&gt; RnM (HsScaled GhcRn (LHsType GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier hs-var">rnScaledLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364865"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681364862"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2360"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681364861"><span class="hs-identifier hs-var">new_ty1</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621681364859"><span class="hs-identifier hs-var">new_ty2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364860"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364858"><span class="hs-identifier hs-var">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2361"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDeclH98Details"><span class="hs-identifier hs-var">rnConDeclH98Details</span></a></span><span> </span><span id="local-6989586621681364857"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364857"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681364856"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364856"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621681364854"><span class="annot"><span class="annottext">XRec GhcPs [LConDeclField GhcPs]
</span><a href="#local-6989586621681364854"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2362"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364853"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcRn)]
</span><a href="#local-6989586621681364853"><span class="hs-identifier hs-var">new_flds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364852"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364852"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; HsDocContext
-&gt; LocatedL [LConDeclField GhcPs]
-&gt; RnM (LocatedL [LConDeclField GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnRecConDeclFields"><span class="hs-identifier hs-var">rnRecConDeclFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364857"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364856"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs [LConDeclField GhcPs]
</span><a href="#local-6989586621681364854"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-2363"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcRn)]
</span><a href="#local-6989586621681364853"><span class="hs-identifier hs-var">new_flds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364852"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2364"></span><span>
</span><span id="line-2365"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDeclGADTDetails"><span class="hs-identifier hs-type">rnConDeclGADTDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2366"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-2367"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-2368"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclGADTDetails"><span class="hs-identifier hs-type">HsConDeclGADTDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2369"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclGADTDetails"><span class="hs-identifier hs-type">HsConDeclGADTDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2370"></span><span id="rnConDeclGADTDetails"><span class="annot"><span class="annottext">rnConDeclGADTDetails :: Name
-&gt; HsDocContext
-&gt; HsConDeclGADTDetails GhcPs
-&gt; RnM (HsConDeclGADTDetails GhcRn, FreeVars)
</span><a href="GHC.Rename.Module.html#rnConDeclGADTDetails"><span class="hs-identifier hs-var hs-var">rnConDeclGADTDetails</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364850"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364850"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#PrefixConGADT"><span class="hs-identifier hs-type">PrefixConGADT</span></a></span><span> </span><span id="local-6989586621681364848"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681364848"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2371"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364847"><span class="annot"><span class="annottext">[HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))]
</span><a href="#local-6989586621681364847"><span class="hs-identifier hs-var">new_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364846"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364846"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsScaled GhcPs (LHsType GhcPs)
-&gt; RnM (HsScaled GhcRn (LHsType GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier hs-var">rnScaledLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364850"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681364848"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-2372"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
[HsScaled pass (LBangType pass)] -&gt; HsConDeclGADTDetails pass
</span><a href="Language.Haskell.Syntax.Decls.html#PrefixConGADT"><span class="hs-identifier hs-var">PrefixConGADT</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))]
</span><a href="#local-6989586621681364847"><span class="hs-identifier hs-var">new_tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364846"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2373"></span><span class="annot"><a href="GHC.Rename.Module.html#rnConDeclGADTDetails"><span class="hs-identifier hs-var">rnConDeclGADTDetails</span></a></span><span> </span><span id="local-6989586621681364845"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364845"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681364844"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364844"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RecConGADT"><span class="hs-identifier hs-type">RecConGADT</span></a></span><span> </span><span id="local-6989586621681364842"><span class="annot"><span class="annottext">XRec GhcPs [LConDeclField GhcPs]
</span><a href="#local-6989586621681364842"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2374"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364841"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcRn)]
</span><a href="#local-6989586621681364841"><span class="hs-identifier hs-var">new_flds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364840"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364840"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; HsDocContext
-&gt; LocatedL [LConDeclField GhcPs]
-&gt; RnM (LocatedL [LConDeclField GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnRecConDeclFields"><span class="hs-identifier hs-var">rnRecConDeclFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364845"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364844"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs [LConDeclField GhcPs]
</span><a href="#local-6989586621681364842"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-2375"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XRec pass [LConDeclField pass] -&gt; HsConDeclGADTDetails pass
</span><a href="Language.Haskell.Syntax.Decls.html#RecConGADT"><span class="hs-identifier hs-var">RecConGADT</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcRn)]
</span><a href="#local-6989586621681364841"><span class="hs-identifier hs-var">new_flds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364840"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2376"></span><span>
</span><span id="line-2377"></span><span class="annot"><a href="GHC.Rename.Module.html#rnRecConDeclFields"><span class="hs-identifier hs-type">rnRecConDeclFields</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2378"></span><span>     </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-2379"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-2380"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedL"><span class="hs-identifier hs-type">LocatedL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2381"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedL"><span class="hs-identifier hs-type">LocatedL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2382"></span><span id="rnRecConDeclFields"><span class="annot"><span class="annottext">rnRecConDeclFields :: Name
-&gt; HsDocContext
-&gt; LocatedL [LConDeclField GhcPs]
-&gt; RnM (LocatedL [LConDeclField GhcRn], FreeVars)
</span><a href="GHC.Rename.Module.html#rnRecConDeclFields"><span class="hs-identifier hs-var hs-var">rnRecConDeclFields</span></a></span></span><span> </span><span id="local-6989586621681364839"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364839"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681364838"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364838"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364837"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681364837"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681364836"><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621681364836"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2383"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681364835"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681364835"><span class="hs-identifier hs-var">fls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM [FieldLabel]
</span><a href="GHC.Rename.Env.html#lookupConstructorFields"><span class="hs-identifier hs-var">lookupConstructorFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364839"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-2384"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364833"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcRn)]
</span><a href="#local-6989586621681364833"><span class="hs-identifier hs-var">new_fields</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364832"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364832"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; [FieldLabel]
-&gt; [LConDeclField GhcPs]
-&gt; RnM ([LConDeclField GhcRn], FreeVars)
</span><a href="GHC.Rename.HsType.html#rnConDeclFields"><span class="hs-identifier hs-var">rnConDeclFields</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621681364838"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681364835"><span class="hs-identifier hs-var">fls</span></a></span><span> </span><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621681364836"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-2385"></span><span>                </span><span class="hs-comment">-- No need to check for duplicate fields</span><span>
</span><span id="line-2386"></span><span>                </span><span class="hs-comment">-- since that is done by GHC.Rename.Names.extendGlobalRdrEnvRn</span><span>
</span><span id="line-2387"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681364837"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcRn)]
</span><a href="#local-6989586621681364833"><span class="hs-identifier hs-var">new_fields</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681364832"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2388"></span><span>
</span><span id="line-2389"></span><span class="hs-comment">-------------------------------------------------</span><span>
</span><span id="line-2390"></span><span>
</span><span id="line-2391"></span><span class="hs-comment">-- | Brings pattern synonym names and also pattern synonym selectors</span><span>
</span><span id="line-2392"></span><span class="hs-comment">-- from record pattern synonyms into scope.</span><span>
</span><span id="line-2393"></span><span id="local-6989586621681367255"><span class="annot"><a href="GHC.Rename.Module.html#extendPatSynEnv"><span class="hs-identifier hs-type">extendPatSynEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#DuplicateRecordFields"><span class="hs-identifier hs-type">DuplicateRecordFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldSelectors"><span class="hs-identifier hs-type">FieldSelectors</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-2394"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRnIf"><span class="hs-identifier hs-type">TcRnIf</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681367255"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681367255"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2395"></span><span id="extendPatSynEnv"><span class="annot"><span class="annottext">extendPatSynEnv :: forall a.
DuplicateRecordFields
-&gt; FieldSelectors
-&gt; HsValBinds GhcPs
-&gt; MiniFixityEnv
-&gt; ([Name] -&gt; TcRnIf TcGblEnv TcLclEnv a)
-&gt; TcRnIf TcGblEnv TcLclEnv a
</span><a href="GHC.Rename.Module.html#extendPatSynEnv"><span class="hs-identifier hs-var hs-var">extendPatSynEnv</span></a></span></span><span> </span><span id="local-6989586621681364815"><span class="annot"><span class="annottext">DuplicateRecordFields
</span><a href="#local-6989586621681364815"><span class="hs-identifier hs-var">dup_fields_ok</span></a></span></span><span> </span><span id="local-6989586621681364814"><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621681364814"><span class="hs-identifier hs-var">has_sel</span></a></span></span><span> </span><span id="local-6989586621681364813"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681364813"><span class="hs-identifier hs-var">val_decls</span></a></span></span><span> </span><span id="local-6989586621681364812"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681364812"><span class="hs-identifier hs-var">local_fix_env</span></a></span></span><span> </span><span id="local-6989586621681364811"><span class="annot"><span class="annottext">[Name] -&gt; TcRnIf TcGblEnv TcLclEnv a
</span><a href="#local-6989586621681364811"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2396"></span><span>     </span><span id="local-6989586621681364810"><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364810"><span class="hs-identifier hs-var">names_with_fls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs -&gt; TcM [(Name, [FieldLabel])]
</span><a href="#local-6989586621681364809"><span class="hs-identifier hs-var">new_ps</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681364813"><span class="hs-identifier hs-var">val_decls</span></a></span><span>
</span><span id="line-2397"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364808"><span class="annot"><span class="annottext">pat_syn_bndrs :: [Name]
</span><a href="#local-6989586621681364808"><span class="hs-identifier hs-var hs-var">pat_syn_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364807"><span class="hs-identifier hs-var">name</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681364805"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-2398"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364807"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364807"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364805"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681364805"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364810"><span class="hs-identifier hs-var">names_with_fls</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2399"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364804"><span class="annot"><span class="annottext">avails :: [AvailInfo]
</span><a href="#local-6989586621681364804"><span class="hs-identifier hs-var hs-var">avails</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#avail"><span class="hs-identifier hs-var">avail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364810"><span class="hs-identifier hs-var">names_with_fls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2400"></span><span>               </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#availField"><span class="hs-identifier hs-var">availField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364810"><span class="hs-identifier hs-var">names_with_fls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2401"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364802"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681364802"><span class="hs-identifier hs-var">gbl_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681364801"><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681364801"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[AvailInfo] -&gt; MiniFixityEnv -&gt; RnM (TcGblEnv, TcLclEnv)
</span><a href="GHC.Rename.Names.html#extendGlobalRdrEnvRn"><span class="hs-identifier hs-var">extendGlobalRdrEnvRn</span></a></span><span> </span><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681364804"><span class="hs-identifier hs-var">avails</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681364812"><span class="hs-identifier hs-var">local_fix_env</span></a></span><span>
</span><span id="line-2402"></span><span>
</span><span id="line-2403"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364800"><span class="annot"><span class="annottext">field_env' :: NameEnv [FieldLabel]
</span><a href="#local-6989586621681364800"><span class="hs-identifier hs-var hs-var">field_env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnvList"><span class="hs-identifier hs-var">extendNameEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcGblEnv -&gt; NameEnv [FieldLabel]
</span><a href="GHC.Tc.Types.html#tcg_field_env"><span class="hs-identifier hs-var">tcg_field_env</span></a></span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681364802"><span class="hs-identifier hs-var">gbl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364810"><span class="hs-identifier hs-var">names_with_fls</span></a></span><span>
</span><span id="line-2404"></span><span>         </span><span id="local-6989586621681364797"><span class="annot"><span class="annottext">final_gbl_env :: TcGblEnv
</span><a href="#local-6989586621681364797"><span class="hs-identifier hs-var hs-var">final_gbl_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681364802"><span class="hs-identifier hs-var">gbl_env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcg_field_env :: NameEnv [FieldLabel]
</span><a href="GHC.Tc.Types.html#tcg_field_env"><span class="hs-identifier hs-var">tcg_field_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameEnv [FieldLabel]
</span><a href="#local-6989586621681364800"><span class="hs-identifier hs-var">field_env'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2405"></span><span>   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall gbl' lcl' a gbl lcl.
(gbl', lcl') -&gt; TcRnIf gbl' lcl' a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setEnvs"><span class="hs-identifier hs-var">setEnvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621681364797"><span class="hs-identifier hs-var">final_gbl_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681364801"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; TcRnIf TcGblEnv TcLclEnv a
</span><a href="#local-6989586621681364811"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681364808"><span class="hs-identifier hs-var">pat_syn_bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2406"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2407"></span><span>    </span><span class="annot"><a href="#local-6989586621681364809"><span class="hs-identifier hs-type">new_ps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2408"></span><span>    </span><span id="local-6989586621681364809"><span class="annot"><span class="annottext">new_ps :: HsValBinds GhcPs -&gt; TcM [(Name, [FieldLabel])]
</span><a href="#local-6989586621681364809"><span class="hs-identifier hs-var hs-var">new_ps</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364795"><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681364795"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; b -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldrM"><span class="hs-identifier hs-var">foldrM</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBindLR GhcPs GhcPs
-&gt; [(Name, [FieldLabel])] -&gt; TcM [(Name, [FieldLabel])]
</span><a href="#local-6989586621681364793"><span class="hs-identifier hs-var">new_ps'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681364795"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-2409"></span><span>    </span><span class="annot"><a href="#local-6989586621681364809"><span class="hs-identifier hs-var">new_ps</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;new_ps&quot;</span></span><span>
</span><span id="line-2410"></span><span>
</span><span id="line-2411"></span><span>    </span><span class="annot"><a href="#local-6989586621681364793"><span class="hs-identifier hs-type">new_ps'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBindLR"><span class="hs-identifier hs-type">LHsBindLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2412"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2413"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2414"></span><span>    </span><span id="local-6989586621681364793"><span class="annot"><span class="annottext">new_ps' :: LHsBindLR GhcPs GhcPs
-&gt; [(Name, [FieldLabel])] -&gt; TcM [(Name, [FieldLabel])]
</span><a href="#local-6989586621681364793"><span class="hs-identifier hs-var hs-var">new_ps'</span></a></span></span><span> </span><span id="local-6989586621681364792"><span class="annot"><span class="annottext">LHsBindLR GhcPs GhcPs
</span><a href="#local-6989586621681364792"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621681364791"><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364791"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-2415"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364790"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364790"><span class="hs-identifier hs-var">bind_loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynBind GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364786"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681364786"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-2416"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621681364784"><span class="annot"><span class="annottext">[RecordPatSynField GhcPs]
</span><a href="#local-6989586621681364784"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsBindLR GhcPs GhcPs
</span><a href="#local-6989586621681364792"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-2417"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2418"></span><span>          </span><span id="local-6989586621681364783"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364783"><span class="hs-identifier hs-var">bnd_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Env.html#newTopSrcBinder"><span class="hs-identifier hs-var">newTopSrcBinder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a ann. SrcSpanAnn' a -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364790"><span class="hs-identifier hs-var">bind_loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681364786"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2419"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681364780"><span class="annot"><span class="annottext">field_occs :: [GenLocated SrcSpan (FieldOcc GhcPs)]
</span><a href="#local-6989586621681364780"><span class="hs-identifier hs-var hs-var">field_occs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681364779"><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621681364779"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass. FieldOcc pass -&gt; GenLocated SrcSpanAnnN RdrName
</span><a href="Language.Haskell.Syntax.Type.html#rdrNameFieldOcc"><span class="hs-identifier hs-var">rdrNameFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621681364779"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621681364779"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall pass. RecordPatSynField pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynField"><span class="hs-identifier hs-var">recordPatSynField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcPs]
</span><a href="#local-6989586621681364784"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-2420"></span><span>          </span><span id="local-6989586621681364776"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681364776"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DuplicateRecordFields
-&gt; FieldSelectors -&gt; [Name] -&gt; LFieldOcc GhcPs -&gt; RnM FieldLabel
</span><a href="GHC.Rename.Names.html#newRecordSelector"><span class="hs-identifier hs-var">newRecordSelector</span></a></span><span> </span><span class="annot"><span class="annottext">DuplicateRecordFields
</span><a href="#local-6989586621681364815"><span class="hs-identifier hs-var">dup_fields_ok</span></a></span><span> </span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621681364814"><span class="hs-identifier hs-var">has_sel</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364783"><span class="hs-identifier hs-var">bnd_name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (FieldOcc GhcPs)]
</span><a href="#local-6989586621681364780"><span class="hs-identifier hs-var">field_occs</span></a></span><span>
</span><span id="line-2421"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364783"><span class="hs-identifier hs-var">bnd_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681364776"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364791"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2422"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364774"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364774"><span class="hs-identifier hs-var">bind_loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynBind GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364773"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681364773"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsBindLR GhcPs GhcPs
</span><a href="#local-6989586621681364792"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-2423"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2424"></span><span>        </span><span id="local-6989586621681364772"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364772"><span class="hs-identifier hs-var">bnd_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Env.html#newTopSrcBinder"><span class="hs-identifier hs-var">newTopSrcBinder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpanAnnN
</span><a href="GHC.Parser.Annotation.html#la2na"><span class="hs-identifier hs-var">la2na</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364774"><span class="hs-identifier hs-var">bind_loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681364773"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2425"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364772"><span class="hs-identifier hs-var">bnd_name</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364791"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2426"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2427"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [FieldLabel])]
</span><a href="#local-6989586621681364791"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-2428"></span><span>
</span><span id="line-2429"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Support code to rename types}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-2436"></span><span>
</span><span id="line-2437"></span><span class="annot"><a href="GHC.Rename.Module.html#rnFds"><span class="hs-identifier hs-type">rnFds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsFunDep"><span class="hs-identifier hs-type">LHsFunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsFunDep"><span class="hs-identifier hs-type">LHsFunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2438"></span><span id="rnFds"><span class="annot"><span class="annottext">rnFds :: [LHsFunDep GhcPs] -&gt; RnM [LHsFunDep GhcRn]
</span><a href="GHC.Rename.Module.html#rnFds"><span class="hs-identifier hs-var hs-var">rnFds</span></a></span></span><span> </span><span id="local-6989586621681364770"><span class="annot"><span class="annottext">[LHsFunDep GhcPs]
</span><a href="#local-6989586621681364770"><span class="hs-identifier hs-var">fds</span></a></span></span><span>
</span><span id="line-2439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (SrcSpanAnn' ann) a
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">FunDep GhcPs -&gt; RnM (FunDep GhcRn)
</span><a href="#local-6989586621681364769"><span class="hs-identifier hs-var">rn_fds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsFunDep GhcPs]
</span><a href="#local-6989586621681364770"><span class="hs-identifier hs-var">fds</span></a></span><span>
</span><span id="line-2440"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2441"></span><span>    </span><span class="annot"><a href="#local-6989586621681364769"><span class="hs-identifier hs-type">rn_fds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2442"></span><span>    </span><span id="local-6989586621681364769"><span class="annot"><span class="annottext">rn_fds :: FunDep GhcPs -&gt; RnM (FunDep GhcRn)
</span><a href="#local-6989586621681364769"><span class="hs-identifier hs-var hs-var">rn_fds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a></span><span> </span><span id="local-6989586621681364767"><span class="annot"><span class="annottext">XCFunDep GhcPs
</span><a href="#local-6989586621681364767"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681364766"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364766"><span class="hs-identifier hs-var">tys1</span></a></span></span><span> </span><span id="local-6989586621681364765"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364765"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2443"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681364764"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364764"><span class="hs-identifier hs-var">tys1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
-&gt; RnM [GenLocated SrcSpanAnnN Name]
</span><a href="GHC.Rename.Module.html#rnHsTyVars"><span class="hs-identifier hs-var">rnHsTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364766"><span class="hs-identifier hs-var">tys1</span></a></span><span>
</span><span id="line-2444"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681364762"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364762"><span class="hs-identifier hs-var">tys2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
-&gt; RnM [GenLocated SrcSpanAnnN Name]
</span><a href="GHC.Rename.Module.html#rnHsTyVars"><span class="hs-identifier hs-var">rnHsTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681364765"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-2445"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XCFunDep pass -&gt; [LIdP pass] -&gt; [LIdP pass] -&gt; FunDep pass
</span><a href="Language.Haskell.Syntax.Decls.html#FunDep"><span class="hs-identifier hs-var">FunDep</span></a></span><span> </span><span class="annot"><span class="annottext">XCFunDep GhcPs
</span><a href="#local-6989586621681364767"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364764"><span class="hs-identifier hs-var">tys1'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621681364762"><span class="hs-identifier hs-var">tys2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2446"></span><span>
</span><span id="line-2447"></span><span class="annot"><a href="GHC.Rename.Module.html#rnHsTyVars"><span class="hs-identifier hs-type">rnHsTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2448"></span><span id="rnHsTyVars"><span class="annot"><span class="annottext">rnHsTyVars :: [GenLocated SrcSpanAnnN RdrName]
-&gt; RnM [GenLocated SrcSpanAnnN Name]
</span><a href="GHC.Rename.Module.html#rnHsTyVars"><span class="hs-identifier hs-var hs-var">rnHsTyVars</span></a></span></span><span> </span><span id="local-6989586621681364761"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681364761"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Module.html#rnHsTyVar"><span class="hs-identifier hs-var">rnHsTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN RdrName]
</span><a href="#local-6989586621681364761"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-2449"></span><span>
</span><span id="line-2450"></span><span class="annot"><a href="GHC.Rename.Module.html#rnHsTyVar"><span class="hs-identifier hs-type">rnHsTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2451"></span><span id="rnHsTyVar"><span class="annot"><span class="annottext">rnHsTyVar :: GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Module.html#rnHsTyVar"><span class="hs-identifier hs-var hs-var">rnHsTyVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364759"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681364759"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681364758"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681364758"><span class="hs-identifier hs-var">tyvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2452"></span><span>  </span><span id="local-6989586621681364757"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364757"><span class="hs-identifier hs-var">tyvar'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Env.html#lookupOccRn"><span class="hs-identifier hs-var">lookupOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681364758"><span class="hs-identifier hs-var">tyvar</span></a></span><span>
</span><span id="line-2453"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681364759"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681364757"><span class="hs-identifier hs-var">tyvar'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2454"></span><span>
</span><span id="line-2455"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
        findSplice
*                                                      *
*********************************************************

This code marches down the declarations, looking for the first
Template Haskell splice.  As it does so it
        a) groups the declarations into a HsGroup
        b) runs any top-level quasi-quotes
-}</span><span>
</span><span id="line-2467"></span><span>
</span><span id="line-2468"></span><span class="annot"><a href="GHC.Rename.Module.html#findSplice"><span class="hs-identifier hs-type">findSplice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2469"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-type">SpliceDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2470"></span><span id="findSplice"><span class="annot"><span class="annottext">findSplice :: [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#findSplice"><span class="hs-identifier hs-var hs-var">findSplice</span></a></span></span><span> </span><span id="local-6989586621681364756"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364756"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). HsGroup (GhcPass p)
</span><a href="GHC.Hs.Decls.html#emptyRdrGroup"><span class="hs-identifier hs-var">emptyRdrGroup</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364756"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2471"></span><span>
</span><span id="line-2472"></span><span class="annot"><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-type">addl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2473"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-type">SpliceDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2474"></span><span class="hs-comment">-- This stuff reverses the declarations (again) but it doesn't matter</span><span>
</span><span id="line-2475"></span><span id="addl"><span class="annot"><span class="annottext">addl :: HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var hs-var">addl</span></a></span></span><span> </span><span id="local-6989586621681364753"><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364753"><span class="hs-identifier hs-var">gp</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364753"><span class="hs-identifier hs-var">gp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2476"></span><span class="annot"><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span id="local-6989586621681364752"><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364752"><span class="hs-identifier hs-var">gp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681364751"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364751"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681364750"><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621681364750"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681364749"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364749"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; SrcSpanAnnA
-&gt; HsDecl GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364752"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364751"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621681364750"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364749"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2477"></span><span>
</span><span id="line-2478"></span><span>
</span><span id="line-2479"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-type">add</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDecl"><span class="hs-identifier hs-type">HsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2480"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-type">SpliceDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2481"></span><span>
</span><span id="line-2482"></span><span class="hs-comment">-- #10047: Declaration QuasiQuoters are expanded immediately, without</span><span>
</span><span id="line-2483"></span><span class="hs-comment">--         causing a group split</span><span>
</span><span id="line-2484"></span><span id="add"><span class="annot"><span class="annottext">add :: HsGroup GhcPs
-&gt; SrcSpanAnnA
-&gt; HsDecl GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621681364747"><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364747"><span class="hs-identifier hs-var">gp</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceD"><span class="hs-identifier hs-type">SpliceD</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-type">SpliceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364744"><span class="annot"><span class="annottext">qq :: HsSplice GhcPs
</span><a href="#local-6989586621681364744"><span class="hs-identifier hs-var">qq</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsQuasiQuote"><span class="hs-identifier hs-type">HsQuasiQuote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SpliceExplicitFlag
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364742"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364742"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2485"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364741"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621681364741"><span class="hs-identifier hs-var">ds'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSplice GhcPs -&gt; RnM ([LHsDecl GhcPs], FreeVars)
</span><a href="GHC.Rename.Splice.html#rnTopSpliceDecls"><span class="hs-identifier hs-var">rnTopSpliceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">HsSplice GhcPs
</span><a href="#local-6989586621681364744"><span class="hs-identifier hs-var">qq</span></a></span><span>
</span><span id="line-2486"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364747"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621681364741"><span class="hs-identifier hs-var">ds'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364742"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2487"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-2488"></span><span>
</span><span id="line-2489"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364740"><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364740"><span class="hs-identifier hs-var">gp</span></a></span></span><span> </span><span id="local-6989586621681364739"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364739"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceD"><span class="hs-identifier hs-type">SpliceD</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364738"><span class="annot"><span class="annottext">splice :: SpliceDecl GhcPs
</span><a href="#local-6989586621681364738"><span class="hs-identifier hs-var">splice</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-type">SpliceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsSplice GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364737"><span class="annot"><span class="annottext">SpliceExplicitFlag
</span><a href="#local-6989586621681364737"><span class="hs-identifier hs-var">flag</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364736"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364736"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2490"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- We've found a top-level splice.  If it is an *implicit* one</span><span>
</span><span id="line-2491"></span><span>         </span><span class="hs-comment">-- (i.e. a naked top level expression)</span><span>
</span><span id="line-2492"></span><span>         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SpliceExplicitFlag
</span><a href="#local-6989586621681364737"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2493"></span><span>           </span><span class="annot"><span class="annottext">SpliceExplicitFlag
</span><a href="GHC.Types.Basic.html#ExplicitSplice"><span class="hs-identifier hs-var">ExplicitSplice</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2494"></span><span>           </span><span class="annot"><span class="annottext">SpliceExplicitFlag
</span><a href="GHC.Types.Basic.html#ImplicitSplice"><span class="hs-identifier hs-var">ImplicitSplice</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681364733"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364733"><span class="hs-identifier hs-var">th_on</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TemplateHaskell</span></span><span>
</span><span id="line-2495"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681364733"><span class="hs-identifier hs-var">th_on</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364739"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2496"></span><span>                                  </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWith"><span class="hs-identifier hs-var">failWith</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681364731"><span class="hs-identifier hs-var">badImplicitSplice</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2497"></span><span>
</span><span id="line-2498"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364740"><span class="hs-identifier hs-var">gp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpliceDecl GhcPs
</span><a href="#local-6989586621681364738"><span class="hs-identifier hs-var">splice</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364736"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2499"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2500"></span><span>    </span><span id="local-6989586621681364731"><span class="annot"><span class="annottext">badImplicitSplice :: SDoc
</span><a href="#local-6989586621681364731"><span class="hs-identifier hs-var hs-var">badImplicitSplice</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Parse error: module header, import declaration&quot;</span></span><span>
</span><span id="line-2501"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or top-level declaration expected.&quot;</span></span><span>
</span><span id="line-2502"></span><span>                     </span><span class="hs-comment">-- The compiler should suggest the above, and not using</span><span>
</span><span id="line-2503"></span><span>                     </span><span class="hs-comment">-- TemplateHaskell since the former suggestion is more</span><span>
</span><span id="line-2504"></span><span>                     </span><span class="hs-comment">-- relevant to the larger base of users.</span><span>
</span><span id="line-2505"></span><span>                     </span><span class="hs-comment">-- See #12146 for discussion.</span><span>
</span><span id="line-2506"></span><span>
</span><span id="line-2507"></span><span class="hs-comment">-- Class declarations: added to the TyClGroup</span><span>
</span><span id="line-2508"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364730"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364730"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_tyclds :: forall p. HsGroup p -&gt; [TyClGroup p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364729"><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364729"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364728"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364728"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-type">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364726"><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681364726"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364725"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364725"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2509"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364730"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_tyclds :: [TyClGroup GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
LTyClDecl (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_tycld"><span class="hs-identifier hs-var">add_tycld</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364728"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681364726"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364729"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364725"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2510"></span><span>
</span><span id="line-2511"></span><span class="hs-comment">-- Signatures: fixity sigs go a different place than all others</span><span>
</span><span id="line-2512"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364723"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364723"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_fixds :: forall p. HsGroup p -&gt; [LFixitySig p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fixds"><span class="hs-identifier hs-var">hs_fixds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364722"><span class="annot"><span class="annottext">[LFixitySig GhcPs]
</span><a href="#local-6989586621681364722"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364721"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364721"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-type">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="annot"><span class="annottext">XFixSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364718"><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621681364718"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364717"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364717"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2513"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364723"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_fixds :: [LFixitySig GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fixds"><span class="hs-identifier hs-var">hs_fixds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364721"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621681364718"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LFixitySig GhcPs]
</span><a href="#local-6989586621681364722"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364717"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2514"></span><span>
</span><span id="line-2515"></span><span class="hs-comment">-- Standalone kind signatures: added to the TyClGroup</span><span>
</span><span id="line-2516"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364716"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364716"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_tyclds :: forall p. HsGroup p -&gt; [TyClGroup p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364715"><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364715"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364714"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364714"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#KindSigD"><span class="hs-identifier hs-type">KindSigD</span></a></span><span> </span><span class="annot"><span class="annottext">XKindSigD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364712"><span class="annot"><span class="annottext">StandaloneKindSig GhcPs
</span><a href="#local-6989586621681364712"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364711"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364711"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2517"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364716"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_tyclds :: [TyClGroup GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
LStandaloneKindSig (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_kisig"><span class="hs-identifier hs-var">add_kisig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364714"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">StandaloneKindSig GhcPs
</span><a href="#local-6989586621681364712"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364715"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364711"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2518"></span><span>
</span><span id="line-2519"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364709"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364709"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_valds :: forall p. HsGroup p -&gt; HsValBinds p
</span><a href="Language.Haskell.Syntax.Decls.html#hs_valds"><span class="hs-identifier hs-var">hs_valds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364708"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681364708"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364707"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364707"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-type">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364706"><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621681364706"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364705"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364705"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2520"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364709"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_valds :: HsValBinds GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#hs_valds"><span class="hs-identifier hs-var">hs_valds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: Pass).
LSig (GhcPass a)
-&gt; HsValBinds (GhcPass a) -&gt; HsValBinds (GhcPass a)
</span><a href="GHC.Rename.Module.html#add_sig"><span class="hs-identifier hs-var">add_sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364707"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621681364706"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681364708"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364705"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2521"></span><span>
</span><span id="line-2522"></span><span class="hs-comment">-- Value declarations: use add_bind</span><span>
</span><span id="line-2523"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364703"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364703"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_valds :: forall p. HsGroup p -&gt; HsValBinds p
</span><a href="Language.Haskell.Syntax.Decls.html#hs_valds"><span class="hs-identifier hs-var">hs_valds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364702"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681364702"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364701"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364701"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ValD"><span class="hs-identifier hs-type">ValD</span></a></span><span> </span><span class="annot"><span class="annottext">XValD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364699"><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs
</span><a href="#local-6989586621681364699"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364698"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364698"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2524"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364703"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_valds :: HsValBinds GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#hs_valds"><span class="hs-identifier hs-var">hs_valds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. LHsBind a -&gt; HsValBinds a -&gt; HsValBinds a
</span><a href="GHC.Rename.Module.html#add_bind"><span class="hs-identifier hs-var">add_bind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364701"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs
</span><a href="#local-6989586621681364699"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621681364702"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364698"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2525"></span><span>
</span><span id="line-2526"></span><span class="hs-comment">-- Role annotations: added to the TyClGroup</span><span>
</span><span id="line-2527"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364696"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364696"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_tyclds :: forall p. HsGroup p -&gt; [TyClGroup p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364695"><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364695"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364694"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364694"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RoleAnnotD"><span class="hs-identifier hs-type">RoleAnnotD</span></a></span><span> </span><span class="annot"><span class="annottext">XRoleAnnotD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364692"><span class="annot"><span class="annottext">RoleAnnotDecl GhcPs
</span><a href="#local-6989586621681364692"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364691"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364691"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2528"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364696"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_tyclds :: [TyClGroup GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
LRoleAnnotDecl (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_role_annot"><span class="hs-identifier hs-var">add_role_annot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364694"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RoleAnnotDecl GhcPs
</span><a href="#local-6989586621681364692"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364695"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364691"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2529"></span><span>
</span><span id="line-2530"></span><span class="hs-comment">-- NB instance declarations go into TyClGroups. We throw them into the first</span><span>
</span><span id="line-2531"></span><span class="hs-comment">-- group, just as we do for the TyClD case. The renamer will go on to group</span><span>
</span><span id="line-2532"></span><span class="hs-comment">-- and order them later.</span><span>
</span><span id="line-2533"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364689"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364689"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_tyclds :: forall p. HsGroup p -&gt; [TyClGroup p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364688"><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364688"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621681364687"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364687"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InstD"><span class="hs-identifier hs-type">InstD</span></a></span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364685"><span class="annot"><span class="annottext">InstDecl GhcPs
</span><a href="#local-6989586621681364685"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364684"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364684"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2534"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364689"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_tyclds :: [TyClGroup GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_tyclds"><span class="hs-identifier hs-var">hs_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
LInstDecl (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_instd"><span class="hs-identifier hs-var">add_instd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364687"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">InstDecl GhcPs
</span><a href="#local-6989586621681364685"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyClGroup GhcPs]
</span><a href="#local-6989586621681364688"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364684"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2535"></span><span>
</span><span id="line-2536"></span><span class="hs-comment">-- The rest are routine</span><span>
</span><span id="line-2537"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364682"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364682"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_derivds :: forall p. HsGroup p -&gt; [LDerivDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_derivds"><span class="hs-identifier hs-var">hs_derivds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364681"><span class="annot"><span class="annottext">[LDerivDecl GhcPs]
</span><a href="#local-6989586621681364681"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621681364680"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364680"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivD"><span class="hs-identifier hs-type">DerivD</span></a></span><span> </span><span class="annot"><span class="annottext">XDerivD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364678"><span class="annot"><span class="annottext">DerivDecl GhcPs
</span><a href="#local-6989586621681364678"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364677"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364677"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2538"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364682"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_derivds :: [LDerivDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_derivds"><span class="hs-identifier hs-var">hs_derivds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364680"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">DerivDecl GhcPs
</span><a href="#local-6989586621681364678"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LDerivDecl GhcPs]
</span><a href="#local-6989586621681364681"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364677"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2539"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364676"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364676"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_defds :: forall p. HsGroup p -&gt; [LDefaultDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_defds"><span class="hs-identifier hs-var">hs_defds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364675"><span class="annot"><span class="annottext">[LDefaultDecl GhcPs]
</span><a href="#local-6989586621681364675"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621681364674"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364674"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DefD"><span class="hs-identifier hs-type">DefD</span></a></span><span> </span><span class="annot"><span class="annottext">XDefD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364672"><span class="annot"><span class="annottext">DefaultDecl GhcPs
</span><a href="#local-6989586621681364672"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364671"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364671"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2540"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364676"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_defds :: [LDefaultDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_defds"><span class="hs-identifier hs-var">hs_defds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364674"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultDecl GhcPs
</span><a href="#local-6989586621681364672"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LDefaultDecl GhcPs]
</span><a href="#local-6989586621681364675"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364671"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2541"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364670"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364670"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_fords :: forall p. HsGroup p -&gt; [LForeignDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fords"><span class="hs-identifier hs-var">hs_fords</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364669"><span class="annot"><span class="annottext">[LForeignDecl GhcPs]
</span><a href="#local-6989586621681364669"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364668"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364668"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForD"><span class="hs-identifier hs-type">ForD</span></a></span><span> </span><span class="annot"><span class="annottext">XForD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364666"><span class="annot"><span class="annottext">ForeignDecl GhcPs
</span><a href="#local-6989586621681364666"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364665"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364665"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2542"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364670"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_fords :: [LForeignDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_fords"><span class="hs-identifier hs-var">hs_fords</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364668"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcPs
</span><a href="#local-6989586621681364666"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcPs]
</span><a href="#local-6989586621681364669"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364665"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2543"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364664"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364664"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_warnds :: forall p. HsGroup p -&gt; [LWarnDecls p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_warnds"><span class="hs-identifier hs-var">hs_warnds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364663"><span class="annot"><span class="annottext">[LWarnDecls GhcPs]
</span><a href="#local-6989586621681364663"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621681364662"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364662"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#WarningD"><span class="hs-identifier hs-type">WarningD</span></a></span><span> </span><span class="annot"><span class="annottext">XWarningD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364660"><span class="annot"><span class="annottext">WarnDecls GhcPs
</span><a href="#local-6989586621681364660"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364659"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364659"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2544"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364664"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_warnds :: [LWarnDecls GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_warnds"><span class="hs-identifier hs-var">hs_warnds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364662"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">WarnDecls GhcPs
</span><a href="#local-6989586621681364660"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LWarnDecls GhcPs]
</span><a href="#local-6989586621681364663"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364659"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2545"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364658"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364658"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_annds :: forall p. HsGroup p -&gt; [LAnnDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_annds"><span class="hs-identifier hs-var">hs_annds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364657"><span class="annot"><span class="annottext">[LAnnDecl GhcPs]
</span><a href="#local-6989586621681364657"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364656"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364656"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#AnnD"><span class="hs-identifier hs-type">AnnD</span></a></span><span> </span><span class="annot"><span class="annottext">XAnnD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364654"><span class="annot"><span class="annottext">AnnDecl GhcPs
</span><a href="#local-6989586621681364654"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364653"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364653"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2546"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364658"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_annds :: [LAnnDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_annds"><span class="hs-identifier hs-var">hs_annds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364656"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">AnnDecl GhcPs
</span><a href="#local-6989586621681364654"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LAnnDecl GhcPs]
</span><a href="#local-6989586621681364657"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364653"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2547"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364652"><span class="annot"><span class="annottext">gp :: HsGroup GhcPs
</span><a href="#local-6989586621681364652"><span class="hs-identifier hs-var">gp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsGroup"><span class="hs-identifier hs-type">HsGroup</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hs_ruleds :: forall p. HsGroup p -&gt; [LRuleDecls p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_ruleds"><span class="hs-identifier hs-var">hs_ruleds</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364651"><span class="annot"><span class="annottext">[LRuleDecls GhcPs]
</span><a href="#local-6989586621681364651"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364650"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364650"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleD"><span class="hs-identifier hs-type">RuleD</span></a></span><span> </span><span class="annot"><span class="annottext">XRuleD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364648"><span class="annot"><span class="annottext">RuleDecls GhcPs
</span><a href="#local-6989586621681364648"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364647"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364647"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2548"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364652"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_ruleds :: [LRuleDecls GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_ruleds"><span class="hs-identifier hs-var">hs_ruleds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364650"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RuleDecls GhcPs
</span><a href="#local-6989586621681364648"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LRuleDecls GhcPs]
</span><a href="#local-6989586621681364651"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364647"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2549"></span><span class="annot"><a href="GHC.Rename.Module.html#add"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span id="local-6989586621681364646"><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364646"><span class="hs-identifier hs-var">gp</span></a></span></span><span> </span><span id="local-6989586621681364645"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364645"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DocD"><span class="hs-identifier hs-type">DocD</span></a></span><span> </span><span class="annot"><span class="annottext">XDocD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681364643"><span class="annot"><span class="annottext">DocDecl
</span><a href="#local-6989586621681364643"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681364642"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364642"><span class="hs-identifier hs-var">ds</span></a></span></span><span>
</span><span id="line-2550"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
-&gt; [LHsDecl GhcPs]
-&gt; RnM (HsGroup GhcPs, Maybe (SpliceDecl GhcPs, [LHsDecl GhcPs]))
</span><a href="GHC.Rename.Module.html#addl"><span class="hs-identifier hs-var">addl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364646"><span class="hs-identifier hs-var">gp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hs_docs :: [LDocDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_docs"><span class="hs-identifier hs-var">hs_docs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681364645"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">DocDecl
</span><a href="#local-6989586621681364643"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsGroup p -&gt; [LDocDecl p]
</span><a href="Language.Haskell.Syntax.Decls.html#hs_docs"><span class="hs-identifier hs-var">hs_docs</span></a></span><span> </span><span class="annot"><span class="annottext">HsGroup GhcPs
</span><a href="#local-6989586621681364646"><span class="hs-identifier hs-var">gp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621681364642"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-2551"></span><span>
</span><span id="line-2552"></span><span id="local-6989586621681366688"><span class="annot"><a href="GHC.Rename.Module.html#add_tycld"><span class="hs-identifier hs-type">add_tycld</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366688"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366688"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2553"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366688"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-2554"></span><span id="add_tycld"><span class="annot"><span class="annottext">add_tycld :: forall (p :: Pass).
LTyClDecl (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_tycld"><span class="hs-identifier hs-var hs-var">add_tycld</span></a></span></span><span> </span><span id="local-6989586621681364641"><span class="annot"><span class="annottext">LTyClDecl (GhcPass p)
</span><a href="#local-6989586621681364641"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_ext :: XCTyClGroup (GhcPass p)
</span><a href="Language.Haskell.Syntax.Decls.html#group_ext"><span class="hs-identifier hs-var">group_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2555"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LTyClDecl (GhcPass p)
</span><a href="#local-6989586621681364641"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2556"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2557"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2558"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2559"></span><span>                                  </span><span class="hs-special">}</span><span>
</span><span id="line-2560"></span><span>                       </span><span class="hs-special">]</span><span>
</span><span id="line-2561"></span><span class="annot"><a href="GHC.Rename.Module.html#add_tycld"><span class="hs-identifier hs-var">add_tycld</span></a></span><span> </span><span id="local-6989586621681364640"><span class="annot"><span class="annottext">LTyClDecl (GhcPass p)
</span><a href="#local-6989586621681364640"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364639"><span class="annot"><span class="annottext">ds :: TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364639"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: forall pass. TyClGroup pass -&gt; [LTyClDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364638"><span class="annot"><span class="annottext">[LTyClDecl (GhcPass p)]
</span><a href="#local-6989586621681364638"><span class="hs-identifier hs-var">tyclds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681364637"><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364637"><span class="hs-identifier hs-var">dss</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2562"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364639"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LTyClDecl (GhcPass p)
</span><a href="#local-6989586621681364640"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LTyClDecl (GhcPass p)]
</span><a href="#local-6989586621681364638"><span class="hs-identifier hs-var">tyclds</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364637"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-2563"></span><span>
</span><span id="line-2564"></span><span id="local-6989586621681366676"><span class="annot"><a href="GHC.Rename.Module.html#add_instd"><span class="hs-identifier hs-type">add_instd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366676"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366676"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2565"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366676"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-2566"></span><span id="add_instd"><span class="annot"><span class="annottext">add_instd :: forall (p :: Pass).
LInstDecl (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_instd"><span class="hs-identifier hs-var hs-var">add_instd</span></a></span></span><span> </span><span id="local-6989586621681364636"><span class="annot"><span class="annottext">LInstDecl (GhcPass p)
</span><a href="#local-6989586621681364636"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_ext :: XCTyClGroup (GhcPass p)
</span><a href="Language.Haskell.Syntax.Decls.html#group_ext"><span class="hs-identifier hs-var">group_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2567"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2568"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2569"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2570"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LInstDecl (GhcPass p)
</span><a href="#local-6989586621681364636"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2571"></span><span>                                  </span><span class="hs-special">}</span><span>
</span><span id="line-2572"></span><span>                       </span><span class="hs-special">]</span><span>
</span><span id="line-2573"></span><span class="annot"><a href="GHC.Rename.Module.html#add_instd"><span class="hs-identifier hs-var">add_instd</span></a></span><span> </span><span id="local-6989586621681364635"><span class="annot"><span class="annottext">LInstDecl (GhcPass p)
</span><a href="#local-6989586621681364635"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364634"><span class="annot"><span class="annottext">ds :: TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364634"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_instds :: forall pass. TyClGroup pass -&gt; [LInstDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364633"><span class="annot"><span class="annottext">[LInstDecl (GhcPass p)]
</span><a href="#local-6989586621681364633"><span class="hs-identifier hs-var">instds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681364632"><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364632"><span class="hs-identifier hs-var">dss</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2574"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364634"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LInstDecl (GhcPass p)
</span><a href="#local-6989586621681364635"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LInstDecl (GhcPass p)]
</span><a href="#local-6989586621681364633"><span class="hs-identifier hs-var">instds</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364632"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-2575"></span><span>
</span><span id="line-2576"></span><span id="local-6989586621681366678"><span class="annot"><a href="GHC.Rename.Module.html#add_role_annot"><span class="hs-identifier hs-type">add_role_annot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRoleAnnotDecl"><span class="hs-identifier hs-type">LRoleAnnotDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366678"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366678"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2577"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366678"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-2578"></span><span id="add_role_annot"><span class="annot"><span class="annottext">add_role_annot :: forall (p :: Pass).
LRoleAnnotDecl (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_role_annot"><span class="hs-identifier hs-var hs-var">add_role_annot</span></a></span></span><span> </span><span id="local-6989586621681364631"><span class="annot"><span class="annottext">LRoleAnnotDecl (GhcPass p)
</span><a href="#local-6989586621681364631"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_ext :: XCTyClGroup (GhcPass p)
</span><a href="Language.Haskell.Syntax.Decls.html#group_ext"><span class="hs-identifier hs-var">group_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2579"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2580"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2581"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LRoleAnnotDecl (GhcPass p)
</span><a href="#local-6989586621681364631"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2582"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2583"></span><span>                                 </span><span class="hs-special">}</span><span>
</span><span id="line-2584"></span><span>                      </span><span class="hs-special">]</span><span>
</span><span id="line-2585"></span><span class="annot"><a href="GHC.Rename.Module.html#add_role_annot"><span class="hs-identifier hs-var">add_role_annot</span></a></span><span> </span><span id="local-6989586621681364630"><span class="annot"><span class="annottext">LRoleAnnotDecl (GhcPass p)
</span><a href="#local-6989586621681364630"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364629"><span class="annot"><span class="annottext">tycls :: TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364629"><span class="hs-identifier hs-var">tycls</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_roles :: forall pass. TyClGroup pass -&gt; [LRoleAnnotDecl pass]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364628"><span class="annot"><span class="annottext">[LRoleAnnotDecl (GhcPass p)]
</span><a href="#local-6989586621681364628"><span class="hs-identifier hs-var">roles</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681364627"><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364627"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2586"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364629"><span class="hs-identifier hs-var">tycls</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LRoleAnnotDecl (GhcPass p)
</span><a href="#local-6989586621681364630"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LRoleAnnotDecl (GhcPass p)]
</span><a href="#local-6989586621681364628"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364627"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2587"></span><span>
</span><span id="line-2588"></span><span id="local-6989586621681366684"><span class="annot"><a href="GHC.Rename.Module.html#add_kisig"><span class="hs-identifier hs-type">add_kisig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366684"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2589"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366684"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366684"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-2590"></span><span id="add_kisig"><span class="annot"><span class="annottext">add_kisig :: forall (p :: Pass).
LStandaloneKindSig (GhcPass p)
-&gt; [TyClGroup (GhcPass p)] -&gt; [TyClGroup (GhcPass p)]
</span><a href="GHC.Rename.Module.html#add_kisig"><span class="hs-identifier hs-var hs-var">add_kisig</span></a></span></span><span> </span><span id="local-6989586621681364626"><span class="annot"><span class="annottext">LStandaloneKindSig (GhcPass p)
</span><a href="#local-6989586621681364626"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_ext :: XCTyClGroup (GhcPass p)
</span><a href="Language.Haskell.Syntax.Decls.html#group_ext"><span class="hs-identifier hs-var">group_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2591"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_tyclds :: [LTyClDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_tyclds"><span class="hs-identifier hs-var">group_tyclds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2592"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LStandaloneKindSig (GhcPass p)
</span><a href="#local-6989586621681364626"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2593"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_roles :: [LRoleAnnotDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_roles"><span class="hs-identifier hs-var">group_roles</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2594"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">group_instds :: [LInstDecl (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_instds"><span class="hs-identifier hs-var">group_instds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2595"></span><span>                            </span><span class="hs-special">}</span><span>
</span><span id="line-2596"></span><span>                 </span><span class="hs-special">]</span><span>
</span><span id="line-2597"></span><span class="annot"><a href="GHC.Rename.Module.html#add_kisig"><span class="hs-identifier hs-var">add_kisig</span></a></span><span> </span><span id="local-6989586621681364625"><span class="annot"><span class="annottext">LStandaloneKindSig (GhcPass p)
</span><a href="#local-6989586621681364625"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681364624"><span class="annot"><span class="annottext">tycls :: TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364624"><span class="hs-identifier hs-var">tycls</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClGroup"><span class="hs-identifier hs-type">TyClGroup</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: forall pass. TyClGroup pass -&gt; [LStandaloneKindSig pass]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681364623"><span class="annot"><span class="annottext">[LStandaloneKindSig (GhcPass p)]
</span><a href="#local-6989586621681364623"><span class="hs-identifier hs-var">kisigs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681364622"><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364622"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2598"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyClGroup (GhcPass p)
</span><a href="#local-6989586621681364624"><span class="hs-identifier hs-var">tycls</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">group_kisigs :: [LStandaloneKindSig (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Decls.html#group_kisigs"><span class="hs-identifier hs-var">group_kisigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LStandaloneKindSig (GhcPass p)
</span><a href="#local-6989586621681364625"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LStandaloneKindSig (GhcPass p)]
</span><a href="#local-6989586621681364623"><span class="hs-identifier hs-var">kisigs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[TyClGroup (GhcPass p)]
</span><a href="#local-6989586621681364622"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2599"></span><span>
</span><span id="line-2600"></span><span id="local-6989586621681366681"><span class="annot"><a href="GHC.Rename.Module.html#add_bind"><span class="hs-identifier hs-type">add_bind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366681"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366681"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366681"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2601"></span><span id="add_bind"><span class="annot"><span class="annottext">add_bind :: forall a. LHsBind a -&gt; HsValBinds a -&gt; HsValBinds a
</span><a href="GHC.Rename.Module.html#add_bind"><span class="hs-identifier hs-var hs-var">add_bind</span></a></span></span><span> </span><span id="local-6989586621681364621"><span class="annot"><span class="annottext">LHsBind a
</span><a href="#local-6989586621681364621"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span id="local-6989586621681364620"><span class="annot"><span class="annottext">XValBinds a a
</span><a href="#local-6989586621681364620"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681364619"><span class="annot"><span class="annottext">LHsBindsLR a a
</span><a href="#local-6989586621681364619"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621681364618"><span class="annot"><span class="annottext">[LSig a]
</span><a href="#local-6989586621681364618"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall idL idR.
XValBinds idL idR
-&gt; LHsBindsLR idL idR -&gt; [LSig idR] -&gt; HsValBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-var">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds a a
</span><a href="#local-6989586621681364620"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBindsLR a a
</span><a href="#local-6989586621681364619"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#snocBag"><span class="hs-operator hs-var">`snocBag`</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBind a
</span><a href="#local-6989586621681364621"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LSig a]
</span><a href="#local-6989586621681364618"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-2602"></span><span class="annot"><a href="GHC.Rename.Module.html#add_bind"><span class="hs-identifier hs-var">add_bind</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBind a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.Rename.Module.add_bind&quot;</span></span><span>
</span><span id="line-2603"></span><span>
</span><span id="line-2604"></span><span id="local-6989586621681366683"><span class="annot"><a href="GHC.Rename.Module.html#add_sig"><span class="hs-identifier hs-type">add_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366683"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366683"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681366683"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2605"></span><span id="add_sig"><span class="annot"><span class="annottext">add_sig :: forall (a :: Pass).
LSig (GhcPass a)
-&gt; HsValBinds (GhcPass a) -&gt; HsValBinds (GhcPass a)
</span><a href="GHC.Rename.Module.html#add_sig"><span class="hs-identifier hs-var hs-var">add_sig</span></a></span></span><span> </span><span id="local-6989586621681364615"><span class="annot"><span class="annottext">LSig (GhcPass a)
</span><a href="#local-6989586621681364615"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span id="local-6989586621681364614"><span class="annot"><span class="annottext">XValBinds (GhcPass a) (GhcPass a)
</span><a href="#local-6989586621681364614"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681364613"><span class="annot"><span class="annottext">LHsBindsLR (GhcPass a) (GhcPass a)
</span><a href="#local-6989586621681364613"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621681364612"><span class="annot"><span class="annottext">[LSig (GhcPass a)]
</span><a href="#local-6989586621681364612"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall idL idR.
XValBinds idL idR
-&gt; LHsBindsLR idL idR -&gt; [LSig idR] -&gt; HsValBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-var">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds (GhcPass a) (GhcPass a)
</span><a href="#local-6989586621681364614"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR (GhcPass a) (GhcPass a)
</span><a href="#local-6989586621681364613"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LSig (GhcPass a)
</span><a href="#local-6989586621681364615"><span class="hs-identifier hs-var">s</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[LSig (GhcPass a)]
</span><a href="#local-6989586621681364612"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2606"></span><span class="annot"><a href="GHC.Rename.Module.html#add_sig"><span class="hs-identifier hs-var">add_sig</span></a></span><span> </span><span class="annot"><span class="annottext">LSig (GhcPass a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.Rename.Module.add_sig&quot;</span></span><span>
</span><span id="line-2607"></span></pre></body></html>