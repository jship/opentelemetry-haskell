<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds     #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf          #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies        #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-record-updates #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns   #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">{-
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

Renaming of expressions

Basically dependency analysis.

Handles @Match@, @GRHSs@, @HsExpr@, and @Qualifier@ datatypes.  In
general, all of these functions return a renamed thing, and a set of
free variables.
-}</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Rename.Expr</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier">rnLExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier">rnExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier">rnStmts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier">AnnoBody</span></a></span><span>
</span><span id="line-26"></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html"><span class="hs-identifier">GHC.Rename.Bind</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier">rnLocalBindsAndThen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsLHS"><span class="hs-identifier">rnLocalValBindsLHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsRHS"><span class="hs-identifier">rnLocalValBindsRHS</span></a></span><span>
</span><span id="line-33"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier">rnMatchGroup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHS"><span class="hs-identifier">rnGRHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier">makeMiniFixityEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html"><span class="hs-identifier">GHC.Tc.Utils.Env</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html#isBrackStage"><span class="hs-identifier">isBrackStage</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier">getModule</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html"><span class="hs-identifier">GHC.Rename.Env</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html"><span class="hs-identifier">GHC.Rename.Fixity</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#HsDocContext"><span class="hs-identifier">HsDocContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier">bindLocalNamesFV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier">checkDupNames</span></a></span><span>
</span><span id="line-41"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier">bindLocalNames</span></a></span><span>
</span><span id="line-42"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapMaybeFvRn"><span class="hs-identifier">mapMaybeFvRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier">mapFvRn</span></a></span><span>
</span><span id="line-43"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier">warnUnusedLocalBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier">typeAppErr</span></a></span><span>
</span><span id="line-44"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier">checkUnusedRecordWildcard</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html"><span class="hs-identifier">GHC.Rename.Unbound</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#reportUnboundName"><span class="hs-identifier">reportUnboundName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html"><span class="hs-identifier">GHC.Rename.Splice</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnBracket"><span class="hs-identifier">rnBracket</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnSpliceExpr"><span class="hs-identifier">rnSpliceExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#checkThLocalName"><span class="hs-identifier">checkThLocalName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html"><span class="hs-identifier">GHC.Rename.HsType</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html"><span class="hs-identifier">GHC.Rename.Pat</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html"><span class="hs-identifier">GHC.Types.Fixity</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html"><span class="hs-identifier">GHC.Types.Id.Make</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier">removeDups</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#nilDataConName"><span class="hs-identifier">nilDataConName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.2.7/src/GHC-LanguageExtensions.html#"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/Data-OldList.html#unzip4"><span class="hs-identifier">unzip4</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Foldable.html#minimumBy"><span class="hs-identifier">minimumBy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#isJust"><span class="hs-identifier">isJust</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier">isNothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Arrow.html#"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Arrow.html#first"><span class="hs-identifier">first</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Ord.html#"><span class="hs-identifier">Data.Ord</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../array-0.5.4.0/src/Data-Array.html#"><span class="hs-identifier">Data.Array</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">{- Note [Handling overloaded and rebindable constructs]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For overloaded constructs (overloaded literals, lists, strings), and
rebindable constructs (e.g. if-then-else), our general plan is this,
using overloaded labels #foo as an example:

* In the RENAMER: transform
      HsOverLabel &quot;foo&quot;
      ==&gt; XExpr (HsExpansion (HsOverLabel #foo)
                             (fromLabel `HsAppType` &quot;foo&quot;))
  We write this more compactly in concrete-syntax form like this
      #foo  ==&gt;  fromLabel @&quot;foo&quot;

  Recall that in (HsExpansion orig expanded), 'orig' is the original term
  the user wrote, and 'expanded' is the expanded or desugared version
  to be typechecked.

* In the TYPECHECKER: typecheck the expansion, in this case
      fromLabel @&quot;foo&quot;
  The typechecker (and desugarer) will never see HsOverLabel

In effect, the renamer does a bit of desugaring. Recall GHC.Hs.Expr
Note [Rebindable syntax and HsExpansion], which describes the use of HsExpansion.

RebindableSyntax:
  If RebindableSyntax is off we use the built-in 'fromLabel', defined in
     GHC.Builtin.Names.fromLabelClassOpName
  If RebindableSyntax if ON, we look up &quot;fromLabel&quot; in the environment
     to get whichever one is in scope.
This is accomplished by lookupSyntaxName, and it applies to all the
constructs below.

Here are the constructs that we transform in this way. Some are uniform,
but several have a little bit of special treatment:

* HsIf (if-the-else)
     if b then e1 else e2  ==&gt;  ifThenElse b e1 e2
  We do this /only/ if rebindable syntax is on, because the coverage
  checker looks for HsIf (see GHC.HsToCore.Coverage.addTickHsExpr)
  That means the typechecker and desugarer need to understand HsIf
  for the non-rebindable-syntax case.

* OverLabel (overloaded labels, #lbl)
     #lbl  ==&gt;  fromLabel @&quot;lbl&quot;
  As ever, we use lookupSyntaxName to look up 'fromLabel'
  See Note [Overloaded labels]

* ExplicitList (explicit lists [a,b,c])
  When (and only when) OverloadedLists is on
     [e1,e2]  ==&gt;  fromListN 2 [e1,e2]
  NB: the type checker and desugarer still see ExplicitList,
      but to them it always means the built-in lists.

* SectionL and SectionR (left and right sections)
     (`op` e) ==&gt; rightSection op e
     (e `op`) ==&gt; leftSection  (op e)
  where `leftSection` and `rightSection` are levity-polymorphic
  wired-in Ids. See Note [Left and right sections]

* It's a bit painful to transform `OpApp e1 op e2` to a `HsExpansion`
  form, because the renamer does precedence rearrangement after name
  resolution.  So the renamer leaves an OpApp as an OpApp.

  The typechecker turns `OpApp` into a use of `HsExpansion`
  on the fly, in GHC.Tc.Gen.Head.splitHsApps.  RebindableSyntax
  does not affect this.

Note [Overloaded labels]
~~~~~~~~~~~~~~~~~~~~~~~~
For overloaded labels, note that we /only/ apply `fromLabel` to the
Symbol argument, so the resulting expression has type
    fromLabel @&quot;foo&quot; :: forall a. IsLabel &quot;foo&quot; a =&gt; a
Now ordinary Visible Type Application can be used to instantiate the 'a':
the user may have written (#foo @Int).

Notice that this all works fine in a kind-polymorphic setting (#19154).
Suppose we have
    fromLabel :: forall {k1} {k2} (a:k1). blah

Then we want to instantiate those inferred quantifiers k1,k2, before
type-applying to &quot;foo&quot;, so we get
    fromLabel @Symbol @blah @&quot;foo&quot; ...

And those inferred kind quantifiers will indeed be instantiated when we
typecheck the renamed-syntax call (fromLabel @&quot;foo&quot;).
-}</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsubsection{Expressions}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExprs"><span class="hs-identifier hs-type">rnExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span id="rnExprs"><span class="annot"><span class="annottext">rnExprs :: [LHsExpr GhcPs] -&gt; RnM ([XRec GhcRn (HsExpr GhcRn)], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExprs"><span class="hs-identifier hs-var hs-var">rnExprs</span></a></span></span><span> </span><span id="local-6989586621681359795"><span class="annot"><span class="annottext">[LHsExpr GhcPs]
</span><a href="#local-6989586621681359795"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; FreeVars
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (HsExpr GhcRn)], FreeVars)
</span><a href="#local-6989586621681359794"><span class="hs-identifier hs-var">rnExprs'</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcPs]
</span><a href="#local-6989586621681359795"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span>
</span><span id="line-176"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>  </span><span id="local-6989586621681359794"><span class="annot"><span class="annottext">rnExprs' :: [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; FreeVars
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (HsExpr GhcRn)], FreeVars)
</span><a href="#local-6989586621681359794"><span class="hs-identifier hs-var hs-var">rnExprs'</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681359788"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359788"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359788"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><a href="#local-6989586621681359794"><span class="hs-identifier hs-var">rnExprs'</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359787"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621681359787"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681359786"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621681359786"><span class="hs-identifier hs-var">exprs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681359785"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359785"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-179"></span><span>   </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359784"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359784"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359783"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359783"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621681359787"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-180"></span><span>        </span><span class="hs-comment">-- Now we do a &quot;seq&quot; on the free vars because typically it's small</span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-comment">-- or empty, especially in very long lists of constants</span><span>
</span><span id="line-182"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span>  </span><span id="local-6989586621681359782"><span class="annot"><span class="annottext">acc' :: FreeVars
</span><a href="#local-6989586621681359782"><span class="hs-identifier hs-var hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359785"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359783"><span class="hs-identifier hs-var">fvExpr</span></a></span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359780"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681359780"><span class="hs-identifier hs-var">exprs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359779"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359779"><span class="hs-identifier hs-var">fvExprs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359782"><span class="hs-identifier hs-var">acc'</span></a></span><span> </span><span class="annot"><span class="annottext">seq :: forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-type">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; FreeVars
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (HsExpr GhcRn)], FreeVars)
</span><a href="#local-6989586621681359794"><span class="hs-identifier hs-var">rnExprs'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621681359786"><span class="hs-identifier hs-var">exprs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359782"><span class="hs-identifier hs-var">acc'</span></a></span><span>
</span><span id="line-184"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359784"><span class="hs-identifier hs-var">expr'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681359780"><span class="hs-identifier hs-var">exprs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359779"><span class="hs-identifier hs-var">fvExprs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- Variables. We look up the variable and return the resulting name.</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-type">rnLExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span id="rnLExpr"><span class="annot"><span class="annottext">rnLExpr :: LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var hs-var">rnLExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-type">rnExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="annot"><a href="GHC.Rename.Expr.html#finishHsVar"><span class="hs-identifier hs-type">finishHsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- Separated from rnExpr because it's also used</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- when renaming infix expressions</span><span>
</span><span id="line-196"></span><span id="finishHsVar"><span class="annot"><span class="annottext">finishHsVar :: LocatedA Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#finishHsVar"><span class="hs-identifier hs-var hs-var">finishHsVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359775"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359775"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681359774"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359774"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359773"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681359773"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m Module
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681359773"><span class="hs-identifier hs-var">this_mod</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359774"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span class="annot"><span class="annottext">Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Splice.html#checkThLocalName"><span class="hs-identifier hs-var">checkThLocalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359774"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpanAnnN
</span><a href="GHC.Parser.Annotation.html#la2na"><span class="hs-identifier hs-var">la2na</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359775"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359774"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359774"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnUnboundVar"><span class="hs-identifier hs-type">rnUnboundVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span id="rnUnboundVar"><span class="annot"><span class="annottext">rnUnboundVar :: RdrName -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnUnboundVar"><span class="hs-identifier hs-var hs-var">rnUnboundVar</span></a></span></span><span> </span><span id="local-6989586621681359765"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359765"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var">isUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359765"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-keyword">then</span><span> </span><span class="hs-comment">-- Treat this as a &quot;hole&quot;</span><span>
</span><span id="line-206"></span><span>       </span><span class="hs-comment">-- Do not fail right now; instead, return HsUnboundVar</span><span>
</span><span id="line-207"></span><span>       </span><span class="hs-comment">-- and let the type checker report the error</span><span>
</span><span id="line-208"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XUnboundVar p -&gt; OccName -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-var">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359765"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-comment">-- Fail immediately (qualified name)</span><span>
</span><span id="line-211"></span><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359760"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359760"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#reportUnboundName"><span class="hs-identifier hs-var">reportUnboundName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359765"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-212"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359760"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="rnExpr"><span class="annot"><span class="annottext">rnExpr :: HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var hs-var">rnExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359758"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681359758"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681359757"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359757"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359756"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681359756"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-216"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359754"><span class="annot"><span class="annottext">dup_fields_ok :: DuplicateRecordFields
</span><a href="#local-6989586621681359754"><span class="hs-identifier hs-var hs-var">dup_fields_ok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; DuplicateRecordFields
</span><a href="GHC.Driver.Session.html#xopt_DuplicateRecordFields"><span class="hs-identifier hs-var">xopt_DuplicateRecordFields</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681359756"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-217"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359752"><span class="annot"><span class="annottext">Maybe AmbiguousResult
</span><a href="#local-6989586621681359752"><span class="hs-identifier hs-var">mb_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DuplicateRecordFields -&gt; RdrName -&gt; RnM (Maybe AmbiguousResult)
</span><a href="GHC.Rename.Env.html#lookupExprOccRn"><span class="hs-identifier hs-var">lookupExprOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">DuplicateRecordFields
</span><a href="#local-6989586621681359754"><span class="hs-identifier hs-var">dup_fields_ok</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359757"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe AmbiguousResult
</span><a href="#local-6989586621681359752"><span class="hs-identifier hs-var">mb_name</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-220"></span><span>           </span><span class="annot"><span class="annottext">Maybe AmbiguousResult
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnUnboundVar"><span class="hs-identifier hs-var">rnUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359757"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-221"></span><span>           </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Env.html#UnambiguousGre"><span class="hs-identifier hs-type">UnambiguousGre</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#NormalGreName"><span class="hs-identifier hs-type">NormalGreName</span></a></span><span> </span><span id="local-6989586621681359748"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359748"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359748"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Types.html#nilDataConName"><span class="hs-identifier hs-var">nilDataConName</span></a></span><span> </span><span class="hs-comment">-- Treat [] as an ExplicitList, so that</span><span>
</span><span id="line-223"></span><span>                                       </span><span class="hs-comment">-- OverloadedLists works correctly</span><span>
</span><span id="line-224"></span><span>                                       </span><span class="hs-comment">-- Note [Empty lists] in GHC.Hs.Expr</span><span>
</span><span id="line-225"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedLists</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681359756"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-226"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XExplicitList p -&gt; [LHsExpr p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-229"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedA Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#finishHsVar"><span class="hs-identifier hs-var">finishHsVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a ann. SrcSpanAnn' a -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#na2la"><span class="hs-identifier hs-var">na2la</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681359758"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359748"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-230"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Env.html#UnambiguousGre"><span class="hs-identifier hs-type">UnambiguousGre</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#FieldGreName"><span class="hs-identifier hs-type">FieldGreName</span></a></span><span> </span><span id="local-6989586621681359741"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621681359741"><span class="hs-identifier hs-var">fl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359740"><span class="annot"><span class="annottext">sel_name :: Name
</span><a href="#local-6989586621681359740"><span class="hs-identifier hs-var hs-var">sel_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621681359741"><span class="hs-identifier hs-var">fl</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-232"></span><span>              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall p. XRecFld p -&gt; AmbiguousFieldOcc p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-var">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XUnambiguous pass
-&gt; GenLocated SrcSpanAnnN RdrName -&gt; AmbiguousFieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#Unambiguous"><span class="hs-identifier hs-var">Unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359740"><span class="hs-identifier hs-var">sel_name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681359758"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359757"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359740"><span class="hs-identifier hs-var">sel_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">AmbiguousResult
</span><a href="GHC.Rename.Env.html#AmbiguousFields"><span class="hs-identifier hs-var">AmbiguousFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall p. XRecFld p -&gt; AmbiguousFieldOcc p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-var">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall pass.
XAmbiguous pass
-&gt; GenLocated SrcSpanAnnN RdrName -&gt; AmbiguousFieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#Ambiguous"><span class="hs-identifier hs-var">Ambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621681359758"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621681359757"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIPVar"><span class="hs-identifier hs-type">HsIPVar</span></a></span><span> </span><span id="local-6989586621681359733"><span class="annot"><span class="annottext">XIPVar GhcPs
</span><a href="#local-6989586621681359733"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359732"><span class="annot"><span class="annottext">HsIPName
</span><a href="#local-6989586621681359732"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XIPVar p -&gt; HsIPName -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsIPVar"><span class="hs-identifier hs-var">HsIPVar</span></a></span><span> </span><span class="annot"><span class="annottext">XIPVar GhcPs
</span><a href="#local-6989586621681359733"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsIPName
</span><a href="#local-6989586621681359732"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">XUnboundVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359731"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681359731"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XUnboundVar p -&gt; OccName -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-var">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681359731"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- HsOverLabel: see Note [Handling overloaded and rebindable constructs]</span><span>
</span><span id="line-244"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLabel"><span class="hs-identifier hs-type">HsOverLabel</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLabel GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359729"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681359729"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359728"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359728"><span class="hs-identifier hs-var">from_label</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359727"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359727"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-var">lookupSyntaxName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromLabelClassOpName"><span class="hs-identifier hs-var">fromLabelClassOpName</span></a></span><span>
</span><span id="line-246"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XOverLabel p -&gt; FastString -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLabel"><span class="hs-identifier hs-var">HsOverLabel</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681359729"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-247"></span><span>                  </span><span class="annot"><span class="annottext">forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; XRec GhcRn (HsExpr GhcRn)
</span><a href="GHC.Rename.Expr.html#genLHsVar"><span class="hs-identifier hs-var">genLHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359728"><span class="hs-identifier hs-var">from_label</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (LocatedAn AnnListItem (HsType GhcRn))
</span><a href="#local-6989586621681359721"><span class="hs-identifier hs-var">hs_ty_arg</span></a></span><span>
</span><span id="line-248"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359727"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>    </span><span id="local-6989586621681359721"><span class="annot"><span class="annottext">hs_ty_arg :: HsWildCardBndrs GhcRn (LocatedAn AnnListItem (HsType GhcRn))
</span><a href="#local-6989586621681359721"><span class="hs-identifier hs-var hs-var">hs_ty_arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall thing. thing -&gt; HsWildCardBndrs GhcRn thing
</span><a href="GHC.Hs.Type.html#mkEmptyWildCardBndrs"><span class="hs-identifier hs-var">mkEmptyWildCardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-251"></span><span>                </span><span class="annot"><span class="annottext">forall pass. XTyLit pass -&gt; HsTyLit -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-var">HsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceText -&gt; FastString -&gt; HsTyLit
</span><a href="Language.Haskell.Syntax.Type.html#HsStrTy"><span class="hs-identifier hs-var">HsStrTy</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681359729"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621681359714"><span class="annot"><span class="annottext">XLitE GhcPs
</span><a href="#local-6989586621681359714"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359713"><span class="annot"><span class="annottext">lit :: HsLit GhcPs
</span><a href="#local-6989586621681359713"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsString"><span class="hs-identifier hs-type">HsString</span></a></span><span> </span><span id="local-6989586621681359711"><span class="annot"><span class="annottext">XHsString GhcPs
</span><a href="#local-6989586621681359711"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681359710"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681359710"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359709"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359709"><span class="hs-identifier hs-var">opt_OverloadedStrings</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedStrings</span></span><span>
</span><span id="line-255"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359709"><span class="hs-identifier hs-var">opt_OverloadedStrings</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-256"></span><span>            </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcPs
</span><a href="#local-6989586621681359714"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceText -&gt; FastString -&gt; HsOverLit GhcPs
</span><a href="GHC.Hs.Utils.html#mkHsIsString"><span class="hs-identifier hs-var">mkHsIsString</span></a></span><span> </span><span class="annot"><span class="annottext">XHsString GhcPs
</span><a href="#local-6989586621681359711"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681359710"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-258"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall p. HsLit p -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier hs-var">rnLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621681359713"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-259"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcPs
</span><a href="#local-6989586621681359714"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p1 :: Pass) (p2 :: Pass).
HsLit (GhcPass p1) -&gt; HsLit (GhcPass p2)
</span><a href="GHC.Hs.Lit.html#convertLit"><span class="hs-identifier hs-var">convertLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621681359713"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621681359702"><span class="annot"><span class="annottext">XLitE GhcPs
</span><a href="#local-6989586621681359702"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359701"><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621681359701"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall p. HsLit p -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier hs-var">rnLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621681359701"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-263"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcPs
</span><a href="#local-6989586621681359702"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p1 :: Pass) (p2 :: Pass).
HsLit (GhcPass p1) -&gt; HsLit (GhcPass p2)
</span><a href="GHC.Hs.Lit.html#convertLit"><span class="hs-identifier hs-var">convertLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621681359701"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span id="local-6989586621681359700"><span class="annot"><span class="annottext">XOverLitE GhcPs
</span><a href="#local-6989586621681359700"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359699"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621681359699"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681359698"><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621681359698"><span class="hs-identifier hs-var">lit'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359697"><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681359697"><span class="hs-identifier hs-var">mb_neg</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359696"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359696"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t.
HsOverLit t
-&gt; RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
</span><a href="GHC.Rename.Pat.html#rnOverLit"><span class="hs-identifier hs-var">rnOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621681359699"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-comment">-- See Note [Negative zero]</span><span>
</span><span id="line-267"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
</span><a href="#local-6989586621681359697"><span class="hs-identifier hs-var">mb_neg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-268"></span><span>              </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcPs
</span><a href="#local-6989586621681359700"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621681359698"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359696"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>              </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681359694"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359694"><span class="hs-identifier hs-var">neg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-270"></span><span>                 </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
</span><a href="GHC.Parser.Annotation.html#noComments"><span class="hs-identifier hs-var">noComments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359694"><span class="hs-identifier hs-var">neg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcPs
</span><a href="#local-6989586621681359700"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621681359698"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359696"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span id="local-6989586621681359691"><span class="annot"><span class="annottext">XApp GhcPs
</span><a href="#local-6989586621681359691"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359690"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359690"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681359689"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359689"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359688"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359688"><span class="hs-identifier hs-var">fun'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359687"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359687"><span class="hs-identifier hs-var">fvFun</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359690"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-275"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359686"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359686"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359685"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359685"><span class="hs-identifier hs-var">fvArg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359689"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-276"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcPs
</span><a href="#local-6989586621681359691"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359688"><span class="hs-identifier hs-var">fun'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359686"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359687"><span class="hs-identifier hs-var">fvFun</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359685"><span class="hs-identifier hs-var">fvArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTypeE GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359684"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359684"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681359683"><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcPs)
</span><a href="#local-6989586621681359683"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359682"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359682"><span class="hs-identifier hs-var">type_app</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TypeApplications</span></span><span>
</span><span id="line-280"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359682"><span class="hs-identifier hs-var">type_app</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; LHsType GhcPs -&gt; SDoc
</span><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier hs-var">typeAppErr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall pass thing. HsWildCardBndrs pass thing -&gt; thing
</span><a href="Language.Haskell.Syntax.Type.html#hswc_body"><span class="hs-identifier hs-var">hswc_body</span></a></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcPs)
</span><a href="#local-6989586621681359683"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-281"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359677"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359677"><span class="hs-identifier hs-var">fun'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359676"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359676"><span class="hs-identifier hs-var">fvFun</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359684"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-282"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359675"><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (LocatedAn AnnListItem (HsType GhcRn))
</span><a href="#local-6989586621681359675"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359674"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359674"><span class="hs-identifier hs-var">fvArg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsWcType GhcPs -&gt; RnM (LHsWcType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsWcType"><span class="hs-identifier hs-var">rnHsWcType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Rename.Utils.html#HsTypeCtx"><span class="hs-identifier hs-var">HsTypeCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcPs)
</span><a href="#local-6989586621681359683"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-283"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-var">NoExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359677"><span class="hs-identifier hs-var">fun'</span></a></span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (LocatedAn AnnListItem (HsType GhcRn))
</span><a href="#local-6989586621681359675"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359676"><span class="hs-identifier hs-var">fvFun</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359674"><span class="hs-identifier hs-var">fvArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359669"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359669"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681359668"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359668"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681359667"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359667"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359666"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359666"><span class="hs-identifier hs-var">e1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359665"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359665"><span class="hs-identifier hs-var">fv_e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359669"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-287"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359664"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359664"><span class="hs-identifier hs-var">e2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359663"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359663"><span class="hs-identifier hs-var">fv_e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359667"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-288"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359662"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359662"><span class="hs-identifier hs-var">op'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359661"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359661"><span class="hs-identifier hs-var">fv_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359668"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-comment">-- Deal with fixity</span><span>
</span><span id="line-291"></span><span>        </span><span class="hs-comment">-- When renaming code synthesised from &quot;deriving&quot; declarations</span><span>
</span><span id="line-292"></span><span>        </span><span class="hs-comment">-- we used to avoid fixity stuff, but we can't easily tell any</span><span>
</span><span id="line-293"></span><span>        </span><span class="hs-comment">-- more, so I've removed the test.  Adding HsPars in GHC.Tc.Deriv.Generate</span><span>
</span><span id="line-294"></span><span>        </span><span class="hs-comment">-- should prevent bad things happening.</span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359660"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621681359660"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359662"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-296"></span><span>              </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359659"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359659"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359659"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-297"></span><span>              </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecFld"><span class="hs-identifier hs-type">HsRecFld</span></a></span><span> </span><span class="annot"><span class="annottext">XRecFld GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359657"><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcRn
</span><a href="#local-6989586621681359657"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcRn -&gt; IOEnv (Env TcGblEnv TcLclEnv) Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFieldFixityRn"><span class="hs-identifier hs-var">lookupFieldFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcRn
</span><a href="#local-6989586621681359657"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-298"></span><span>              </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceText -&gt; Int -&gt; FixityDirection -&gt; Fixity
</span><a href="GHC.Types.Fixity.html#Fixity"><span class="hs-identifier hs-var">Fixity</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Types.Fixity.html#minPrecedence"><span class="hs-identifier hs-var">minPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="GHC.Types.Fixity.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>                   </span><span class="hs-comment">-- c.f. lookupFixity for unbound</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359652"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359652"><span class="hs-identifier hs-var">lexical_negation</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.LexicalNegation</span></span><span>
</span><span id="line-302"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359650"><span class="annot"><span class="annottext">negation_handling :: NegationHandling
</span><a href="#local-6989586621681359650"><span class="hs-identifier hs-var hs-var">negation_handling</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359652"><span class="hs-identifier hs-var">lexical_negation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="GHC.Rename.HsType.html#KeepNegationIntact"><span class="hs-identifier hs-var">KeepNegationIntact</span></a></span><span>
</span><span id="line-303"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="GHC.Rename.HsType.html#ReassociateNegation"><span class="hs-identifier hs-var">ReassociateNegation</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359647"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359647"><span class="hs-identifier hs-var">final_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NegationHandling
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Fixity
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; RnM (HsExpr GhcRn)
</span><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var">mkOpAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="#local-6989586621681359650"><span class="hs-identifier hs-var">negation_handling</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359666"><span class="hs-identifier hs-var">e1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359662"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621681359660"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359664"><span class="hs-identifier hs-var">e2'</span></a></span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359647"><span class="hs-identifier hs-var">final_e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359665"><span class="hs-identifier hs-var">fv_e1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359661"><span class="hs-identifier hs-var">fv_op</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359663"><span class="hs-identifier hs-var">fv_e2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="annot"><span class="annottext">XNegApp GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359644"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359644"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359643"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359643"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359642"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359642"><span class="hs-identifier hs-var">fv_e</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359644"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-309"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359641"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681359641"><span class="hs-identifier hs-var">neg_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359640"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359640"><span class="hs-identifier hs-var">fv_neg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-var">lookupSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#negateName"><span class="hs-identifier hs-var">negateName</span></a></span><span>
</span><span id="line-310"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359637"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359637"><span class="hs-identifier hs-var">final_e</span></a></span></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn) -&gt; SyntaxExpr GhcRn -&gt; RnM (HsExpr GhcRn)
</span><a href="GHC.Rename.HsType.html#mkNegAppRn"><span class="hs-identifier hs-var">mkNegAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359643"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681359641"><span class="hs-identifier hs-var">neg_name</span></a></span><span>
</span><span id="line-311"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359637"><span class="hs-identifier hs-var">final_e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359642"><span class="hs-identifier hs-var">fv_e</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359640"><span class="hs-identifier hs-var">fv_neg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-comment">------------------------------------------</span><span>
</span><span id="line-314"></span><span class="hs-comment">-- Record dot syntax</span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsGetField"><span class="hs-identifier hs-type">HsGetField</span></a></span><span> </span><span class="annot"><span class="annottext">XGetField GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359634"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359634"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681359633"><span class="annot"><span class="annottext">Located (HsFieldLabel GhcPs)
</span><a href="#local-6989586621681359633"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359632"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359632"><span class="hs-identifier hs-var">getField</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359631"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359631"><span class="hs-identifier hs-var">fv_getField</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-var">lookupSyntaxName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#getFieldName"><span class="hs-identifier hs-var">getFieldName</span></a></span><span>
</span><span id="line-318"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359629"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359629"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359628"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359628"><span class="hs-identifier hs-var">fv_e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359634"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-319"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359627"><span class="annot"><span class="annottext">f' :: Located (HsFieldLabel GhcRn)
</span><a href="#local-6989586621681359627"><span class="hs-identifier hs-var hs-var">f'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located (HsFieldLabel GhcPs) -&gt; Located (HsFieldLabel GhcRn)
</span><a href="GHC.Rename.Expr.html#rnHsFieldLabel"><span class="hs-identifier hs-var">rnHsFieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Located (HsFieldLabel GhcPs)
</span><a href="#local-6989586621681359633"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-320"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span>
</span><span id="line-321"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XGetField p -&gt; LHsExpr p -&gt; Located (HsFieldLabel p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsGetField"><span class="hs-identifier hs-var">HsGetField</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359629"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Located (HsFieldLabel GhcRn)
</span><a href="#local-6989586621681359627"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; XRec GhcRn (HsExpr GhcRn) -&gt; Located FastString -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkGetField"><span class="hs-identifier hs-var">mkGetField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359632"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359629"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsFieldLabel p -&gt; Located FastString
</span><a href="Language.Haskell.Syntax.Expr.html#hflLabel"><span class="hs-identifier hs-var">hflLabel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Located (HsFieldLabel GhcRn)
</span><a href="#local-6989586621681359627"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359628"><span class="hs-identifier hs-var">fv_e</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359631"><span class="hs-identifier hs-var">fv_getField</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProjection"><span class="hs-identifier hs-type">HsProjection</span></a></span><span> </span><span class="annot"><span class="annottext">XProjection GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359620"><span class="annot"><span class="annottext">NonEmpty (Located (HsFieldLabel GhcPs))
</span><a href="#local-6989586621681359620"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359619"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359619"><span class="hs-identifier hs-var">getField</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359618"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359618"><span class="hs-identifier hs-var">fv_getField</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-var">lookupSyntaxName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#getFieldName"><span class="hs-identifier hs-var">getFieldName</span></a></span><span>
</span><span id="line-327"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359617"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359617"><span class="hs-identifier hs-var">circ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Env.html#lookupOccRn"><span class="hs-identifier hs-var">lookupOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="GHC.Builtin.Names.html#compose_RDR"><span class="hs-identifier hs-var">compose_RDR</span></a></span><span>
</span><span id="line-328"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359614"><span class="annot"><span class="annottext">fs' :: NonEmpty (Located (HsFieldLabel GhcRn))
</span><a href="#local-6989586621681359614"><span class="hs-identifier hs-var hs-var">fs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Located (HsFieldLabel GhcPs) -&gt; Located (HsFieldLabel GhcRn)
</span><a href="GHC.Rename.Expr.html#rnHsFieldLabel"><span class="hs-identifier hs-var">rnHsFieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Located (HsFieldLabel GhcPs))
</span><a href="#local-6989586621681359620"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-329"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span>
</span><span id="line-330"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XProjection p -&gt; NonEmpty (Located (HsFieldLabel p)) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsProjection"><span class="hs-identifier hs-var">HsProjection</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Located (HsFieldLabel GhcRn))
</span><a href="#local-6989586621681359614"><span class="hs-identifier hs-var">fs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; NonEmpty (Located FastString) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkProjection"><span class="hs-identifier hs-var">mkProjection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359619"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359617"><span class="hs-identifier hs-var">circ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsFieldLabel p -&gt; Located FastString
</span><a href="Language.Haskell.Syntax.Expr.html#hflLabel"><span class="hs-identifier hs-var">hflLabel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Located (HsFieldLabel GhcRn))
</span><a href="#local-6989586621681359614"><span class="hs-identifier hs-var">fs'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359617"><span class="hs-identifier hs-var">circ</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359618"><span class="hs-identifier hs-var">fv_getField</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-comment">------------------------------------------</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- Template Haskell extensions</span><span>
</span><span id="line-336"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span id="local-6989586621681359612"><span class="annot"><span class="annottext">e :: HsExpr GhcPs
</span><a href="#local-6989586621681359612"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsBracket"><span class="hs-identifier hs-type">HsBracket</span></a></span><span> </span><span class="annot"><span class="annottext">XBracket GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359610"><span class="annot"><span class="annottext">HsBracket GhcPs
</span><a href="#local-6989586621681359610"><span class="hs-identifier hs-var">br_body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; HsBracket GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Splice.html#rnBracket"><span class="hs-identifier hs-var">rnBracket</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359612"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">HsBracket GhcPs
</span><a href="#local-6989586621681359610"><span class="hs-identifier hs-var">br_body</span></a></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsSpliceE"><span class="hs-identifier hs-type">HsSpliceE</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceE GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359608"><span class="annot"><span class="annottext">HsSplice GhcPs
</span><a href="#local-6989586621681359608"><span class="hs-identifier hs-var">splice</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsSplice GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Splice.html#rnSpliceExpr"><span class="hs-identifier hs-var">rnSpliceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsSplice GhcPs
</span><a href="#local-6989586621681359608"><span class="hs-identifier hs-var">splice</span></a></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-341"></span><span class="hs-comment">--      Sections</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- See Note [Parsing sections] in GHC.Parser</span><span>
</span><span id="line-343"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span id="local-6989586621681359606"><span class="annot"><span class="annottext">XPar GhcPs
</span><a href="#local-6989586621681359606"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359605"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359605"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359604"><span class="annot"><span class="annottext">section :: HsExpr GhcPs
</span><a href="#local-6989586621681359604"><span class="hs-identifier hs-var">section</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-type">SectionL</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359602"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359602"><span class="hs-identifier hs-var">section'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359601"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359601"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var">rnSection</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359604"><span class="hs-identifier hs-var">section</span></a></span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XPar p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcPs
</span><a href="#local-6989586621681359606"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359605"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359602"><span class="hs-identifier hs-var">section'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359601"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span id="local-6989586621681359599"><span class="annot"><span class="annottext">XPar GhcPs
</span><a href="#local-6989586621681359599"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359598"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359598"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359597"><span class="annot"><span class="annottext">section :: HsExpr GhcPs
</span><a href="#local-6989586621681359597"><span class="hs-identifier hs-var">section</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359595"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359595"><span class="hs-identifier hs-var">section'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359594"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359594"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var">rnSection</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359597"><span class="hs-identifier hs-var">section</span></a></span><span>
</span><span id="line-349"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XPar p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcPs
</span><a href="#local-6989586621681359599"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359598"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359595"><span class="hs-identifier hs-var">section'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359594"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span id="local-6989586621681359593"><span class="annot"><span class="annottext">XPar GhcPs
</span><a href="#local-6989586621681359593"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359592"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359592"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359591"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359591"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359590"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359590"><span class="hs-identifier hs-var">fvs_e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359592"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-353"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XPar p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcPs
</span><a href="#local-6989586621681359593"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359591"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359590"><span class="hs-identifier hs-var">fvs_e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span id="local-6989586621681359589"><span class="annot"><span class="annottext">expr :: HsExpr GhcPs
</span><a href="#local-6989586621681359589"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-type">SectionL</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#sectionErr"><span class="hs-identifier hs-var">sectionErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359589"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var">rnSection</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359589"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-357"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span id="local-6989586621681359587"><span class="annot"><span class="annottext">expr :: HsExpr GhcPs
</span><a href="#local-6989586621681359587"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#sectionErr"><span class="hs-identifier hs-var">sectionErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359587"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var">rnSection</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359587"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-361"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span id="local-6989586621681359585"><span class="annot"><span class="annottext">XPragE GhcPs
</span><a href="#local-6989586621681359585"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359584"><span class="annot"><span class="annottext">HsPragE GhcPs
</span><a href="#local-6989586621681359584"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span id="local-6989586621681359583"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359583"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359582"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359582"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359581"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359581"><span class="hs-identifier hs-var">fvs_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359583"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-363"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XPragE p -&gt; HsPragE p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-var">HsPragE</span></a></span><span> </span><span class="annot"><span class="annottext">XPragE GhcPs
</span><a href="#local-6989586621681359585"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsPragE GhcPs -&gt; HsPragE GhcRn
</span><a href="#local-6989586621681359580"><span class="hs-identifier hs-var">rn_prag</span></a></span><span> </span><span class="annot"><span class="annottext">HsPragE GhcPs
</span><a href="#local-6989586621681359584"><span class="hs-identifier hs-var">prag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359582"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359581"><span class="hs-identifier hs-var">fvs_expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-365"></span><span>    </span><span class="annot"><a href="#local-6989586621681359580"><span class="hs-identifier hs-type">rn_prag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-366"></span><span>    </span><span id="local-6989586621681359580"><span class="annot"><span class="annottext">rn_prag :: HsPragE GhcPs -&gt; HsPragE GhcRn
</span><a href="#local-6989586621681359580"><span class="hs-identifier hs-var hs-var">rn_prag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragSCC"><span class="hs-identifier hs-type">HsPragSCC</span></a></span><span> </span><span id="local-6989586621681359578"><span class="annot"><span class="annottext">XSCC GhcPs
</span><a href="#local-6989586621681359578"><span class="hs-identifier hs-var">x1</span></a></span></span><span> </span><span id="local-6989586621681359577"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681359577"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681359576"><span class="annot"><span class="annottext">StringLiteral
</span><a href="#local-6989586621681359576"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XSCC p -&gt; SourceText -&gt; StringLiteral -&gt; HsPragE p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPragSCC"><span class="hs-identifier hs-var">HsPragSCC</span></a></span><span> </span><span class="annot"><span class="annottext">XSCC GhcPs
</span><a href="#local-6989586621681359578"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681359577"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">StringLiteral
</span><a href="#local-6989586621681359576"><span class="hs-identifier hs-var">ann</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span id="local-6989586621681359574"><span class="annot"><span class="annottext">XLam GhcPs
</span><a href="#local-6989586621681359574"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359573"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621681359573"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359572"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359572"><span class="hs-identifier hs-var">matches'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359571"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359571"><span class="hs-identifier hs-var">fvMatch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#LambdaExpr"><span class="hs-identifier hs-var">LambdaExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621681359573"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-370"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLam p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-var">HsLam</span></a></span><span> </span><span class="annot"><span class="annottext">XLam GhcPs
</span><a href="#local-6989586621681359574"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359572"><span class="hs-identifier hs-var">matches'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359571"><span class="hs-identifier hs-var">fvMatch</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLamCase"><span class="hs-identifier hs-type">HsLamCase</span></a></span><span> </span><span id="local-6989586621681359568"><span class="annot"><span class="annottext">XLamCase GhcPs
</span><a href="#local-6989586621681359568"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359567"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621681359567"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359566"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359566"><span class="hs-identifier hs-var">matches'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359565"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359565"><span class="hs-identifier hs-var">fvs_ms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#CaseAlt"><span class="hs-identifier hs-var">CaseAlt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621681359567"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-374"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLamCase p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLamCase"><span class="hs-identifier hs-var">HsLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XLamCase GhcPs
</span><a href="#local-6989586621681359568"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359566"><span class="hs-identifier hs-var">matches'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359565"><span class="hs-identifier hs-var">fvs_ms</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCase GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359562"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359562"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681359561"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621681359561"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359560"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359560"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359559"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359559"><span class="hs-identifier hs-var">e_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359562"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-378"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359558"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359558"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359557"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359557"><span class="hs-identifier hs-var">ms_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#CaseAlt"><span class="hs-identifier hs-var">CaseAlt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621681359561"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-379"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XCase p -&gt; LHsExpr p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-var">HsCase</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359560"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359558"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359559"><span class="hs-identifier hs-var">e_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359557"><span class="hs-identifier hs-var">ms_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359555"><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681359555"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681359554"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359554"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall result.
HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcRn -&gt; FreeVars -&gt; RnM (result, FreeVars))
-&gt; RnM (result, FreeVars)
</span><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var">rnLocalBindsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681359555"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681359553"><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681359553"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-383"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359552"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359552"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359551"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359551"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359554"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-384"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLet p -&gt; HsLocalBinds p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-var">HsLet</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681359553"><span class="hs-identifier hs-var">binds'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359552"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359551"><span class="hs-identifier hs-var">fvExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span class="annot"><span class="annottext">XDo GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359549"><span class="annot"><span class="annottext">HsStmtContext (HsDoRn GhcPs)
</span><a href="#local-6989586621681359549"><span class="hs-identifier hs-var">do_or_lc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359548"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681359548"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681359547"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcPs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621681359547"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681359546"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359546"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359545"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359545"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-388"></span><span>           </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; (HsStmtContext GhcRn
    -&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
    -&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmtsWithPostProcessing"><span class="hs-identifier hs-var">rnStmtsWithPostProcessing</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext (HsDoRn GhcPs)
</span><a href="#local-6989586621681359549"><span class="hs-identifier hs-var">do_or_lc</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span>
</span><span id="line-389"></span><span>             </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [(ExprLStmt GhcRn, FreeVars)]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#postProcessStmtsForApplicativeDo"><span class="hs-identifier hs-var">postProcessStmtsForApplicativeDo</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcPs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621681359547"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-390"></span><span>             </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall p.
XDo p
-&gt; HsStmtContext (HsDoRn p) -&gt; XRec p [ExprLStmt p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-var">HsDo</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext (HsDoRn GhcPs)
</span><a href="#local-6989586621681359549"><span class="hs-identifier hs-var">do_or_lc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681359548"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359546"><span class="hs-identifier hs-var">stmts'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359545"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- ExplicitList: see Note [Handling overloaded and rebindable constructs]</span><span>
</span><span id="line-394"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-type">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitList GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359542"><span class="annot"><span class="annottext">[LHsExpr GhcPs]
</span><a href="#local-6989586621681359542"><span class="hs-identifier hs-var">exps</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359541"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681359541"><span class="hs-identifier hs-var">exps'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359540"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359540"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcPs] -&gt; RnM ([XRec GhcRn (HsExpr GhcRn)], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExprs"><span class="hs-identifier hs-var">rnExprs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcPs]
</span><a href="#local-6989586621681359542"><span class="hs-identifier hs-var">exps</span></a></span><span>
</span><span id="line-396"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359539"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359539"><span class="hs-identifier hs-var">opt_OverloadedLists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedLists</span></span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359539"><span class="hs-identifier hs-var">opt_OverloadedLists</span></a></span><span>
</span><span id="line-398"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XExplicitList p -&gt; [LHsExpr p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681359541"><span class="hs-identifier hs-var">exps'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359540"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-400"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359537"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359537"><span class="hs-identifier hs-var">from_list_n_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359536"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359536"><span class="hs-identifier hs-var">fvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-var">lookupSyntaxName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromListNName"><span class="hs-identifier hs-var">fromListNName</span></a></span><span>
</span><span id="line-401"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359534"><span class="annot"><span class="annottext">rn_list :: HsExpr GhcRn
</span><a href="#local-6989586621681359534"><span class="hs-identifier hs-var hs-var">rn_list</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XExplicitList p -&gt; [LHsExpr p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681359541"><span class="hs-identifier hs-var">exps'</span></a></span><span>
</span><span id="line-402"></span><span>             </span><span id="local-6989586621681359533"><span class="annot"><span class="annottext">lit_n :: IntegralLit
</span><a href="#local-6989586621681359533"><span class="hs-identifier hs-var hs-var">lit_n</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; IntegralLit
</span><a href="GHC.Types.SourceText.html#mkIntegralLit"><span class="hs-identifier hs-var">mkIntegralLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcPs]
</span><a href="#local-6989586621681359542"><span class="hs-identifier hs-var">exps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>             </span><span id="local-6989586621681359530"><span class="annot"><span class="annottext">hs_lit :: GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359530"><span class="hs-identifier hs-var hs-var">hs_lit</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. XHsInt x -&gt; IntegralLit -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsInt"><span class="hs-identifier hs-var">HsInt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621681359533"><span class="hs-identifier hs-var">lit_n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>             </span><span id="local-6989586621681359528"><span class="annot"><span class="annottext">exp_list :: HsExpr GhcRn
</span><a href="#local-6989586621681359528"><span class="hs-identifier hs-var hs-var">exp_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [XRec GhcRn (HsExpr GhcRn)] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-var">genHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359537"><span class="hs-identifier hs-var">from_list_n_name</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359530"><span class="hs-identifier hs-var">hs_lit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359534"><span class="hs-identifier hs-var">rn_list</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-405"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359534"><span class="hs-identifier hs-var">rn_list</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359528"><span class="hs-identifier hs-var">exp_list</span></a></span><span>
</span><span id="line-406"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359540"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359536"><span class="hs-identifier hs-var">fvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTuple GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359525"><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621681359525"><span class="hs-identifier hs-var">tup_args</span></a></span></span><span> </span><span id="local-6989586621681359524"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681359524"><span class="hs-identifier hs-var">boxity</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcPs] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkTupleSection"><span class="hs-identifier hs-var">checkTupleSection</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621681359525"><span class="hs-identifier hs-var">tup_args</span></a></span><span>
</span><span id="line-410"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359522"><span class="annot"><span class="annottext">[HsTupArg GhcRn]
</span><a href="#local-6989586621681359522"><span class="hs-identifier hs-var">tup_args'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359521"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681359521"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; m (b, c)) -&gt; [a] -&gt; m ([b], [c])
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#mapAndUnzipM"><span class="hs-identifier hs-var">mapAndUnzipM</span></a></span><span> </span><span class="annot"><span class="annottext">HsTupArg GhcPs
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (HsTupArg GhcRn, FreeVars)
</span><a href="#local-6989586621681359519"><span class="hs-identifier hs-var">rnTupArg</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621681359525"><span class="hs-identifier hs-var">tup_args</span></a></span><span>
</span><span id="line-411"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XExplicitTuple p -&gt; [HsTupArg p] -&gt; Boxity -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-var">ExplicitTuple</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcRn]
</span><a href="#local-6989586621681359522"><span class="hs-identifier hs-var">tup_args'</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681359524"><span class="hs-identifier hs-var">boxity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681359521"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-413"></span><span>    </span><span id="local-6989586621681359519"><span class="annot"><span class="annottext">rnTupArg :: HsTupArg GhcPs
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (HsTupArg GhcRn, FreeVars)
</span><a href="#local-6989586621681359519"><span class="hs-identifier hs-var hs-var">rnTupArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-type">Present</span></a></span><span> </span><span id="local-6989586621681359513"><span class="annot"><span class="annottext">XPresent GhcPs
</span><a href="#local-6989586621681359513"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359512"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359512"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359511"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359511"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359510"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359510"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359512"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-414"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XPresent id -&gt; LHsExpr id -&gt; HsTupArg id
</span><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-var">Present</span></a></span><span> </span><span class="annot"><span class="annottext">XPresent GhcPs
</span><a href="#local-6989586621681359513"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359511"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359510"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-415"></span><span>    </span><span class="annot"><a href="#local-6989586621681359519"><span class="hs-identifier hs-var">rnTupArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">XMissing GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XMissing id -&gt; HsTupArg id
</span><a href="Language.Haskell.Syntax.Expr.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-type">ExplicitSum</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitSum GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359507"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681359507"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621681359506"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681359506"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621681359505"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359505"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359504"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359504"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359503"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359503"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359505"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-419"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XExplicitSum p -&gt; Int -&gt; Int -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-var">ExplicitSum</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681359507"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681359506"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359504"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359503"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordCon"><span class="hs-identifier hs-type">RecordCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_con :: forall p. HsExpr p -&gt; XRec p (ConLikeP p)
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_con"><span class="hs-identifier hs-var">rcon_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681359500"><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
</span><a href="#local-6989586621681359500"><span class="hs-identifier hs-var">con_id</span></a></span></span><span>
</span><span id="line-422"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: forall p. HsExpr p -&gt; HsRecordBinds p
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681359498"><span class="annot"><span class="annottext">rec_binds :: HsRecordBinds GhcPs
</span><a href="#local-6989586621681359498"><span class="hs-identifier hs-var">rec_binds</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_dotdot :: forall p arg. HsRecFields p arg -&gt; Maybe (Located Int)
</span><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681359495"><span class="annot"><span class="annottext">Maybe (Located Int)
</span><a href="#local-6989586621681359495"><span class="hs-identifier hs-var">dd</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359494"><span class="annot"><span class="annottext">con_lname :: GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681359494"><span class="hs-identifier hs-var">con_lname</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359493"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359493"><span class="hs-identifier hs-var">con_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall ann.
GenLocated (SrcSpanAnn' ann) RdrName
-&gt; TcRn (GenLocated (SrcSpanAnn' ann) Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedOccRn"><span class="hs-identifier hs-var">lookupLocatedOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
</span><a href="#local-6989586621681359500"><span class="hs-identifier hs-var">con_id</span></a></span><span>
</span><span id="line-424"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359491"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldOcc GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621681359491"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359490"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359490"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall arg.
HsRecFieldContext
-&gt; (SrcSpan -&gt; RdrName -&gt; arg)
-&gt; HsRecFields GhcPs (LocatedA arg)
-&gt; RnM ([LHsRecField GhcRn (LocatedA arg)], FreeVars)
</span><a href="GHC.Rename.Pat.html#rnHsRecFields"><span class="hs-identifier hs-var">rnHsRecFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsRecFieldContext
</span><a href="GHC.Rename.Pat.html#HsRecFieldCon"><span class="hs-identifier hs-var">HsRecFieldCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359493"><span class="hs-identifier hs-var">con_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall {p} {ann}.
(XVar p ~ NoExtField,
 XRec p (IdP p) ~ GenLocated (SrcAnn ann) (IdP p)) =&gt;
SrcSpan -&gt; IdP p -&gt; HsExpr p
</span><a href="#local-6989586621681359487"><span class="hs-identifier hs-var">mk_hs_var</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecordBinds GhcPs
</span><a href="#local-6989586621681359498"><span class="hs-identifier hs-var">rec_binds</span></a></span><span>
</span><span id="line-425"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359486"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldOcc GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359486"><span class="hs-identifier hs-var">flds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359485"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681359485"><span class="hs-identifier hs-var">fvss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; m (b, c)) -&gt; [a] -&gt; m ([b], [c])
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#mapAndUnzipM"><span class="hs-identifier hs-var">mapAndUnzipM</span></a></span><span> </span><span class="annot"><span class="annottext">forall {l} {id}.
GenLocated
  l (HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated
        l (HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
</span><a href="#local-6989586621681359484"><span class="hs-identifier hs-var">rn_field</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldOcc GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621681359491"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-426"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359483"><span class="annot"><span class="annottext">rec_binds' :: HsRecFields GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359483"><span class="hs-identifier hs-var hs-var">rec_binds'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_flds :: [LHsRecField GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))]
</span><a href="Language.Haskell.Syntax.Pat.html#rec_flds"><span class="hs-identifier hs-var">rec_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldOcc GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359486"><span class="hs-identifier hs-var">flds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rec_dotdot :: Maybe (Located Int)
</span><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Located Int)
</span><a href="#local-6989586621681359495"><span class="hs-identifier hs-var">dd</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-427"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordCon"><span class="hs-identifier hs-type">RecordCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: XRecordCon GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-428"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_con :: XRec GhcRn (ConLikeP GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_con"><span class="hs-identifier hs-var">rcon_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621681359494"><span class="hs-identifier hs-var">con_lname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: HsRecordBinds GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsRecFields GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681359483"><span class="hs-identifier hs-var">rec_binds'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-429"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359490"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681359485"><span class="hs-identifier hs-var">fvss</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359493"><span class="hs-identifier hs-var">con_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-431"></span><span>    </span><span id="local-6989586621681359487"><span class="annot"><span class="annottext">mk_hs_var :: SrcSpan -&gt; IdP p -&gt; HsExpr p
</span><a href="#local-6989586621681359487"><span class="hs-identifier hs-var hs-var">mk_hs_var</span></a></span></span><span> </span><span id="local-6989586621681359475"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681359475"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681359474"><span class="annot"><span class="annottext">IdP p
</span><a href="#local-6989586621681359474"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ann. SrcSpan -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681359475"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IdP p
</span><a href="#local-6989586621681359474"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>    </span><span id="local-6989586621681359484"><span class="annot"><span class="annottext">rn_field :: GenLocated
  l (HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated
        l (HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
</span><a href="#local-6989586621681359484"><span class="hs-identifier hs-var hs-var">rn_field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359470"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681359470"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681359469"><span class="annot"><span class="annottext">HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621681359469"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359468"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359468"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359467"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359467"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id arg. HsRecField' id arg -&gt; arg
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621681359469"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>                            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681359470"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' id (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621681359469"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359468"><span class="hs-identifier hs-var">arg'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359467"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_expr :: forall p. HsExpr p -&gt; LHsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681359463"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359463"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: forall p. HsExpr p -&gt; Either [LHsRecUpdField p] [LHsRecUpdProj p]
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681359461"><span class="annot"><span class="annottext">Either [LHsRecUpdField GhcPs] [LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681359461"><span class="hs-identifier hs-var">rbinds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either [LHsRecUpdField GhcPs] [LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681359461"><span class="hs-identifier hs-var">rbinds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-437"></span><span>      </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681359460"><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs]
</span><a href="#local-6989586621681359460"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- 'OverloadedRecordUpdate' is not in effect. Regular record update.</span><span>
</span><span id="line-438"></span><span>        </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359459"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359459"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359458"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359458"><span class="hs-identifier hs-var">fv_e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359463"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-439"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359457"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (AmbiguousFieldOcc GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359457"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359456"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359456"><span class="hs-identifier hs-var">fv_rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs] -&gt; RnM ([LHsRecUpdField GhcRn], FreeVars)
</span><a href="GHC.Rename.Pat.html#rnHsRecUpdFields"><span class="hs-identifier hs-var">rnHsRecUpdFields</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs]
</span><a href="#local-6989586621681359460"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-440"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall p.
XRecordUpd p
-&gt; LHsExpr p
-&gt; Either [LHsRecUpdField p] [LHsRecUpdProj p]
-&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-var">RecordUpd</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359459"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../base-4.16.4.0/src/Data-Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (AmbiguousFieldOcc GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359457"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359458"><span class="hs-identifier hs-var">fv_e</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359456"><span class="hs-identifier hs-var">fv_rs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-442"></span><span>      </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681359454"><span class="annot"><span class="annottext">[LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681359454"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-comment">-- 'OverloadedRecordUpdate' is in effect. Record dot update desugaring.</span><span>
</span><span id="line-443"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RebindableSyntax</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-444"></span><span>                 </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RebindableSyntax is required if OverloadedRecordUpdate is enabled.&quot;</span></span><span>
</span><span id="line-445"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359450"><span class="annot"><span class="annottext">punnedFields :: [HsRecField'
   (FieldLabelStrings GhcPs) (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
</span><a href="#local-6989586621681359450"><span class="hs-identifier hs-var hs-var">punnedFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HsRecField'
  (FieldLabelStrings GhcPs) (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621681359449"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359449"><span class="annot"><span class="annottext">HsRecField'
  (FieldLabelStrings GhcPs) (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621681359449"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681359454"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall id arg. HsRecField' id arg -&gt; Bool
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecPun"><span class="hs-identifier hs-var">hsRecPun</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField'
  (FieldLabelStrings GhcPs) (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621681359449"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-446"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359447"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359447"><span class="hs-identifier hs-var">punsEnabled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RecordPuns</span></span><span>
</span><span id="line-447"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[HsRecField'
   (FieldLabelStrings GhcPs) (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
</span><a href="#local-6989586621681359450"><span class="hs-identifier hs-var">punnedFields</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359447"><span class="hs-identifier hs-var">punsEnabled</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-448"></span><span>                 </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;For this to work enable NamedFieldPuns.&quot;</span></span><span>
</span><span id="line-449"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359443"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359443"><span class="hs-identifier hs-var">getField</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359442"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359442"><span class="hs-identifier hs-var">fv_getField</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-var">lookupSyntaxName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#getFieldName"><span class="hs-identifier hs-var">getFieldName</span></a></span><span>
</span><span id="line-450"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359441"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359441"><span class="hs-identifier hs-var">setField</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359440"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359440"><span class="hs-identifier hs-var">fv_setField</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-var">lookupSyntaxName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#setFieldName"><span class="hs-identifier hs-var">setFieldName</span></a></span><span>
</span><span id="line-451"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359438"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359438"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359437"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359437"><span class="hs-identifier hs-var">fv_e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359463"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-452"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359436"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldLabelStrings GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359436"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359435"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359435"><span class="hs-identifier hs-var">fv_us</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdProj GhcPs] -&gt; RnM ([LHsRecUpdProj GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnHsUpdProjs"><span class="hs-identifier hs-var">rnHsUpdProjs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681359454"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-453"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span>
</span><span id="line-454"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XRecordUpd p
-&gt; LHsExpr p
-&gt; Either [LHsRecUpdField p] [LHsRecUpdProj p]
-&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-var">RecordUpd</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359438"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../../base-4.16.4.0/src/Data-Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldLabelStrings GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359436"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; Name
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; [LHsRecUpdProj GhcRn]
-&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkRecordDotUpd"><span class="hs-identifier hs-var">mkRecordDotUpd</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359443"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359441"><span class="hs-identifier hs-var">setField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359438"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldLabelStrings GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359436"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359442"><span class="hs-identifier hs-var">fv_getField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359440"><span class="hs-identifier hs-var">fv_setField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359437"><span class="hs-identifier hs-var">fv_e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359435"><span class="hs-identifier hs-var">fv_us</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>             </span><span class="hs-special">}</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-type">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">XExprWithTySig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359431"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359431"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681359430"><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcPs)
</span><a href="#local-6989586621681359430"><span class="hs-identifier hs-var">pty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359429"><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsSigType GhcRn))
</span><a href="#local-6989586621681359429"><span class="hs-identifier hs-var">pty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359428"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359428"><span class="hs-identifier hs-var">fvTy</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; LHsSigWcType GhcPs -&gt; RnM (LHsSigWcType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigWcType"><span class="hs-identifier hs-var">rnHsSigWcType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Rename.Utils.html#ExprWithTySigCtx"><span class="hs-identifier hs-var">ExprWithTySigCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcPs)
</span><a href="#local-6989586621681359430"><span class="hs-identifier hs-var">pty</span></a></span><span>
</span><span id="line-461"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359425"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359425"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359424"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359424"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-var">bindSigTyVarsFV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsSigWcType GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsWcScopedTvs"><span class="hs-identifier hs-var">hsWcScopedTvs</span></a></span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsSigType GhcRn))
</span><a href="#local-6989586621681359429"><span class="hs-identifier hs-var">pty'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-462"></span><span>                             </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359431"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-463"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XExprWithTySig p
-&gt; LHsExpr p -&gt; LHsSigWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-var">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359425"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsSigType GhcRn))
</span><a href="#local-6989586621681359429"><span class="hs-identifier hs-var">pty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359424"><span class="hs-identifier hs-var">fvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359428"><span class="hs-identifier hs-var">fvTy</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span class="hs-comment">-- HsIf: see Note [Handling overloaded and rebindable constructs]</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- Because of the coverage checker it is most convenient /not/ to</span><span>
</span><span id="line-467"></span><span class="hs-comment">-- expand HsIf; unless we are in rebindable syntax.</span><span>
</span><span id="line-468"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-type">HsIf</span></a></span><span> </span><span class="annot"><span class="annottext">XIf GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359420"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359420"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681359419"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359419"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621681359418"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359418"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359417"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359417"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681359416"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359416"><span class="hs-identifier hs-var">fvP</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359420"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-470"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359415"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359415"><span class="hs-identifier hs-var">b1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359414"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359414"><span class="hs-identifier hs-var">fvB1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359419"><span class="hs-identifier hs-var">b1</span></a></span><span>
</span><span id="line-471"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359413"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359413"><span class="hs-identifier hs-var">b2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359412"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359412"><span class="hs-identifier hs-var">fvB2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359418"><span class="hs-identifier hs-var">b2</span></a></span><span>
</span><span id="line-472"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359411"><span class="annot"><span class="annottext">fvs_if :: FreeVars
</span><a href="#local-6989586621681359411"><span class="hs-identifier hs-var hs-var">fvs_if</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359416"><span class="hs-identifier hs-var">fvP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359414"><span class="hs-identifier hs-var">fvB1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359412"><span class="hs-identifier hs-var">fvB2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-473"></span><span>             </span><span id="local-6989586621681359410"><span class="annot"><span class="annottext">rn_if :: HsExpr GhcRn
</span><a href="#local-6989586621681359410"><span class="hs-identifier hs-var hs-var">rn_if</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XIf p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-var">HsIf</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>  </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359417"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359415"><span class="hs-identifier hs-var">b1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359413"><span class="hs-identifier hs-var">b2'</span></a></span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>       </span><span class="hs-comment">-- Deal with rebindable syntax</span><span>
</span><span id="line-476"></span><span>       </span><span class="hs-comment">-- See Note [Handling overloaded and rebindable constructs]</span><span>
</span><span id="line-477"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359409"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681359409"><span class="hs-identifier hs-var">mb_ite</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (Maybe Name)
</span><a href="GHC.Rename.Env.html#lookupIfThenElse"><span class="hs-identifier hs-var">lookupIfThenElse</span></a></span><span>
</span><span id="line-478"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681359409"><span class="hs-identifier hs-var">mb_ite</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-479"></span><span>            </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-comment">-- Non rebindable-syntax case</span><span>
</span><span id="line-480"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359410"><span class="hs-identifier hs-var">rn_if</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359411"><span class="hs-identifier hs-var">fvs_if</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681359407"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359407"><span class="hs-identifier hs-var">ite_name</span></a></span></span><span>   </span><span class="hs-comment">-- Rebindable-syntax case</span><span>
</span><span id="line-483"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359406"><span class="annot"><span class="annottext">ds_if :: HsExpr GhcRn
</span><a href="#local-6989586621681359406"><span class="hs-identifier hs-var hs-var">ds_if</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [XRec GhcRn (HsExpr GhcRn)] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-var">genHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359407"><span class="hs-identifier hs-var">ite_name</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359417"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359415"><span class="hs-identifier hs-var">b1'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359413"><span class="hs-identifier hs-var">b2'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-484"></span><span>                          </span><span id="local-6989586621681359405"><span class="annot"><span class="annottext">fvs :: FreeVars
</span><a href="#local-6989586621681359405"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359411"><span class="hs-identifier hs-var">fvs_if</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359407"><span class="hs-identifier hs-var">ite_name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-485"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359410"><span class="hs-identifier hs-var">rn_if</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359406"><span class="hs-identifier hs-var">ds_if</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359405"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMultiIf"><span class="hs-identifier hs-type">HsMultiIf</span></a></span><span> </span><span class="annot"><span class="annottext">XMultiIf GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359403"><span class="annot"><span class="annottext">[LGRHS GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621681359403"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359402"><span class="annot"><span class="annottext">[GenLocated
   (Anno (GRHS GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
   (GRHS GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359402"><span class="hs-identifier hs-var">alts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359401"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359401"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; RnM (b, FreeVars)) -&gt; [a] -&gt; RnM ([b], FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; LGRHS GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LGRHS GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnGRHS"><span class="hs-identifier hs-var">rnGRHS</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#IfAlt"><span class="hs-identifier hs-var">IfAlt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621681359403"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-489"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XMultiIf p -&gt; [LGRHS p (LHsExpr p)] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsMultiIf"><span class="hs-identifier hs-var">HsMultiIf</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (GRHS GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
   (GRHS GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681359402"><span class="hs-identifier hs-var">alts'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359401"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-type">ArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">XArithSeq GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359398"><span class="annot"><span class="annottext">ArithSeqInfo GhcPs
</span><a href="#local-6989586621681359398"><span class="hs-identifier hs-var">seq</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359397"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359397"><span class="hs-identifier hs-var">opt_OverloadedLists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedLists</span></span><span>
</span><span id="line-493"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359396"><span class="annot"><span class="annottext">ArithSeqInfo GhcRn
</span><a href="#local-6989586621681359396"><span class="hs-identifier hs-var">new_seq</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359395"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359395"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcPs -&gt; RnM (ArithSeqInfo GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnArithSeq"><span class="hs-identifier hs-var">rnArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcPs
</span><a href="#local-6989586621681359398"><span class="hs-identifier hs-var">seq</span></a></span><span>
</span><span id="line-494"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359397"><span class="hs-identifier hs-var">opt_OverloadedLists</span></a></span><span>
</span><span id="line-495"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-496"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359393"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681359393"><span class="hs-identifier hs-var">from_list_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359392"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359392"><span class="hs-identifier hs-var">fvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-var">lookupSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromListName"><span class="hs-identifier hs-var">fromListName</span></a></span><span>
</span><span id="line-497"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XArithSeq p -&gt; Maybe (SyntaxExpr p) -&gt; ArithSeqInfo p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-var">ArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681359393"><span class="hs-identifier hs-var">from_list_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcRn
</span><a href="#local-6989586621681359396"><span class="hs-identifier hs-var">new_seq</span></a></span><span>
</span><span id="line-498"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359395"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359392"><span class="hs-identifier hs-var">fvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-499"></span><span>           </span><span class="hs-keyword">else</span><span>
</span><span id="line-500"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p.
XArithSeq p -&gt; Maybe (SyntaxExpr p) -&gt; ArithSeqInfo p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-var">ArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcRn
</span><a href="#local-6989586621681359396"><span class="hs-identifier hs-var">new_seq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359395"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Static values
*                                                                      *
************************************************************************

For the static form we check that it is not used in splices.
We also collect the free variables of the term which come from
this module. See Note [Grand plan for static forms] in GHC.Iface.Tidy.StaticPtrTable.
-}</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span id="local-6989586621681359390"><span class="annot"><span class="annottext">e :: HsExpr GhcPs
</span><a href="#local-6989586621681359390"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStatic"><span class="hs-identifier hs-type">HsStatic</span></a></span><span> </span><span class="annot"><span class="annottext">XStatic GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359388"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359388"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-comment">-- Normally, you wouldn't be able to construct a static expression without</span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-comment">-- first enabling -XStaticPointers in the first place, since that extension</span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-comment">-- is what makes the parser treat `static` as a keyword. But this is not a</span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-comment">-- sufficient safeguard, as one can construct static expressions by another</span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-comment">-- mechanism: Template Haskell (see #14204). To ensure that GHC is</span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-comment">-- absolutely prepared to cope with static forms, we check for</span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-comment">-- -XStaticPointers here as well.</span><span>
</span><span id="line-522"></span><span>    </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.StaticPointers</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-523"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal static expression:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359390"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>                  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use StaticPointers to enable this extension&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681359383"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359383"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359382"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359382"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359388"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-526"></span><span>    </span><span id="local-6989586621681359381"><span class="annot"><span class="annottext">ThStage
</span><a href="#local-6989586621681359381"><span class="hs-identifier hs-var">stage</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM ThStage
</span><a href="GHC.Tc.Utils.Monad.html#getStage"><span class="hs-identifier hs-var">getStage</span></a></span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ThStage
</span><a href="#local-6989586621681359381"><span class="hs-identifier hs-var">stage</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-528"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.html#Splice"><span class="hs-identifier hs-type">Splice</span></a></span><span> </span><span class="annot"><span class="annottext">SpliceType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-529"></span><span>             </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;static forms cannot be used in splices:&quot;</span></span><span>
</span><span id="line-530"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359390"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-531"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-532"></span><span>      </span><span class="annot"><span class="annottext">ThStage
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>    </span><span id="local-6989586621681359376"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681359376"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m Module
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-534"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359375"><span class="annot"><span class="annottext">fvExpr' :: FreeVars
</span><a href="#local-6989586621681359375"><span class="hs-identifier hs-var hs-var">fvExpr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#filterNameSet"><span class="hs-identifier hs-var">filterNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681359376"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359382"><span class="hs-identifier hs-var">fvExpr</span></a></span><span>
</span><span id="line-535"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XStatic p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsStatic"><span class="hs-identifier hs-var">HsStatic</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359375"><span class="hs-identifier hs-var">fvExpr'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359383"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359382"><span class="hs-identifier hs-var">fvExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="hs-comment">{- *********************************************************************
*                                                                      *
        Arrow notation
*                                                                      *
********************************************************************* -}</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-type">HsProc</span></a></span><span> </span><span id="local-6989586621681359372"><span class="annot"><span class="annottext">XProc GhcPs
</span><a href="#local-6989586621681359372"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359371"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681359371"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681359370"><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359370"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#newArrowScope"><span class="hs-identifier hs-var">newArrowScope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><span class="annottext">forall a.
HsMatchContext GhcRn
-&gt; LPat GhcPs
-&gt; (LPat GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#rnPat"><span class="hs-identifier hs-var">rnPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsArrowMatchContext -&gt; HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowMatchCtxt"><span class="hs-identifier hs-var">ArrowMatchCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#ProcExpr"><span class="hs-identifier hs-var">ProcExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681359371"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681359365"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681359365"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-546"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359364"><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359364"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359363"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359363"><span class="hs-identifier hs-var">fvBody</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs -&gt; RnM (LHsCmdTop GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdTop"><span class="hs-identifier hs-var">rnCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359370"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-547"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XProc p -&gt; LPat p -&gt; LHsCmdTop p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-var">HsProc</span></a></span><span> </span><span class="annot"><span class="annottext">XProc GhcPs
</span><a href="#local-6989586621681359372"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681359365"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359364"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359363"><span class="hs-identifier hs-var">fvBody</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-548"></span><span>
</span><span id="line-549"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span id="local-6989586621681359361"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359361"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnExpr: unexpected expression&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359361"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>        </span><span class="hs-comment">-- HsWrap</span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-comment">{- *********************************************************************
*                                                                      *
        Operator sections
*                                                                      *
********************************************************************* -}</span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-type">rnSection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span class="hs-comment">-- See Note [Parsing sections] in GHC.Parser</span><span>
</span><span id="line-561"></span><span class="hs-comment">-- Also see Note [Handling overloaded and rebindable constructs]</span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span id="rnSection"><span class="annot"><span class="annottext">rnSection :: HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var hs-var">rnSection</span></a></span></span><span> </span><span id="local-6989586621681359359"><span class="annot"><span class="annottext">section :: HsExpr GhcPs
</span><a href="#local-6989586621681359359"><span class="hs-identifier hs-var">section</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span id="local-6989586621681359358"><span class="annot"><span class="annottext">XSectionR GhcPs
</span><a href="#local-6989586621681359358"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359357"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359357"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681359356"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359356"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-comment">-- See Note [Left and right sections]</span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359355"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359355"><span class="hs-identifier hs-var">op'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359354"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359354"><span class="hs-identifier hs-var">fvs_op</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359357"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-566"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359353"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359353"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359352"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359352"><span class="hs-identifier hs-var">fvs_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359356"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-567"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">FixityDirection
-&gt; HsExpr GhcPs
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.HsType.html#checkSectionPrec"><span class="hs-identifier hs-var">checkSectionPrec</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="GHC.Types.Fixity.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359359"><span class="hs-identifier hs-var">section</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359355"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359353"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-568"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359349"><span class="annot"><span class="annottext">rn_section :: HsExpr GhcRn
</span><a href="#local-6989586621681359349"><span class="hs-identifier hs-var hs-var">rn_section</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XSectionR p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-var">SectionR</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionR GhcPs
</span><a href="#local-6989586621681359358"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359355"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359353"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-569"></span><span>              </span><span id="local-6989586621681359348"><span class="annot"><span class="annottext">ds_section :: HsExpr GhcRn
</span><a href="#local-6989586621681359348"><span class="hs-identifier hs-var hs-var">ds_section</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [XRec GhcRn (HsExpr GhcRn)] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-var">genHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Types.Id.Make.html#rightSectionName"><span class="hs-identifier hs-var">rightSectionName</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359355"><span class="hs-identifier hs-var">op'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359353"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359349"><span class="hs-identifier hs-var">rn_section</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359348"><span class="hs-identifier hs-var">ds_section</span></a></span><span>
</span><span id="line-571"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359354"><span class="hs-identifier hs-var">fvs_op</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359352"><span class="hs-identifier hs-var">fvs_expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var">rnSection</span></a></span><span> </span><span id="local-6989586621681359346"><span class="annot"><span class="annottext">section :: HsExpr GhcPs
</span><a href="#local-6989586621681359346"><span class="hs-identifier hs-var">section</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-type">SectionL</span></a></span><span> </span><span id="local-6989586621681359345"><span class="annot"><span class="annottext">XSectionL GhcPs
</span><a href="#local-6989586621681359345"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359344"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359344"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681359343"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359343"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span>  </span><span class="hs-comment">-- See Note [Left and right sections]</span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359342"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359342"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359341"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359341"><span class="hs-identifier hs-var">fvs_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359344"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-576"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359340"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359340"><span class="hs-identifier hs-var">op'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359339"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359339"><span class="hs-identifier hs-var">fvs_op</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359343"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-577"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">FixityDirection
-&gt; HsExpr GhcPs
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.HsType.html#checkSectionPrec"><span class="hs-identifier hs-var">checkSectionPrec</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="GHC.Types.Fixity.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359346"><span class="hs-identifier hs-var">section</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359340"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359342"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-578"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359338"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359338"><span class="hs-identifier hs-var">postfix_ops</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PostfixOperators</span></span><span>
</span><span id="line-579"></span><span>                        </span><span class="hs-comment">-- Note [Left and right sections]</span><span>
</span><span id="line-580"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359336"><span class="annot"><span class="annottext">rn_section :: HsExpr GhcRn
</span><a href="#local-6989586621681359336"><span class="hs-identifier hs-var hs-var">rn_section</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XSectionL p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-var">SectionL</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionL GhcPs
</span><a href="#local-6989586621681359345"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359342"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359340"><span class="hs-identifier hs-var">op'</span></a></span><span>
</span><span id="line-581"></span><span>              </span><span id="local-6989586621681359335"><span class="annot"><span class="annottext">ds_section :: HsExpr GhcRn
</span><a href="#local-6989586621681359335"><span class="hs-identifier hs-var hs-var">ds_section</span></a></span></span><span>
</span><span id="line-582"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359338"><span class="hs-identifier hs-var">postfix_ops</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359340"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359342"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-583"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [XRec GhcRn (HsExpr GhcRn)] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-var">genHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Types.Id.Make.html#leftSectionName"><span class="hs-identifier hs-var">leftSectionName</span></a></span><span>
</span><span id="line-584"></span><span>                                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359340"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359342"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-585"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var">mkExpandedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359336"><span class="hs-identifier hs-var">rn_section</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681359335"><span class="hs-identifier hs-var">ds_section</span></a></span><span>
</span><span id="line-586"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359339"><span class="hs-identifier hs-var">fvs_op</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359341"><span class="hs-identifier hs-var">fvs_expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnSection"><span class="hs-identifier hs-var">rnSection</span></a></span><span> </span><span id="local-6989586621681359333"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359333"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnSection&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681359333"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span class="hs-comment">{- Note [Left and right sections]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Dealing with left sections (x *) and right sections (* x) is
surprisingly fiddly.  We expand like this
     (`op` e) ==&gt; rightSection op e
     (e `op`) ==&gt; leftSection  (op e)

Using an auxiliary function in this way avoids the awkwardness of
generating a lambda, esp if `e` is a redex, so we *don't* want
to generate `(\x -&gt; op x e)`. See Historical
Note [Desugaring operator sections]

Here are their definitions:
   leftSection :: forall r1 r2 n (a:TYPE r1) (b:TYPE r2).
                  (a %n-&gt; b) -&gt; a %n-&gt; b
   leftSection f x = f x

   rightSection :: forall r1 r2 r3 (a:TYPE r1) (b:TYPE r2) (c:TYPE r3).
                   (a %n1 -&gt; b %n2-&gt; c) -&gt; b %n2-&gt; a %n1-&gt; c
   rightSection f y x = f x y

Note the wrinkles:

* We do /not/ use lookupSyntaxName, which would make left and right
  section fall under RebindableSyntax.  Reason: it would be a user-
  facing change, and there are some tricky design choices (#19354).
  Plus, infix operator applications would be trickier to make
  rebindable, so it'd be inconsistent to do so for sections.

  TL;DR: we still us the renamer-expansion mechanism for operator
  sections , but only to eliminate special-purpose code paths in the
  renamer and desugarer.

* leftSection and rightSection must be levity-polymorphic, to allow
  (+# 4#) and (4# +#) to work. See GHC.Types.Id.Make.
  Note [Wired-in Ids for rebindable syntax] in

* leftSection and rightSection must be multiplicity-polymorphic.
  (Test linear/should_compile/OldList showed this up.)

* Because they are levity-polymorphic, we have to define them
  as wired-in Ids, with compulsory inlining.  See
  GHC.Types.Id.Make.leftSectionId, rightSectionId.

* leftSection is just ($) really; but unlike ($) it is
  levity polymorphic in the result type, so we can write
  `(x +#)`, say.

* The type of leftSection must have an arrow in its first argument,
  because (x `ord`) should be rejected, because ord does not take two
  arguments

* It's important that we define leftSection in an eta-expanded way,
  (i.e. not leftSection f = f), so that
      (True `undefined`) `seq` ()
      = (leftSection (undefined True) `seq` ())
  evaluates to () and not undefined

* If PostfixOperators is ON, then we expand a left section like this:
      (e `op`)  ==&gt;   op e
  with no auxiliary function at all.  Simple!

* leftSection and rightSection switch on ImpredicativeTypes locally,
  during Quick Look; see GHC.Tc.Gen.App.wantQuickLook. Consider
  test DeepSubsumption08:
     type Setter st t a b = forall f. Identical f =&gt; blah
     (.~) :: Setter s t a b -&gt; b -&gt; s -&gt; t
     clear :: Setter a a' b (Maybe b') -&gt; a -&gt; a'
     clear = (.~ Nothing)
   The expansion look like (rightSection (.~) Nothing).  So we must
   instantiate `rightSection` first type argument to a polytype!
   Hence the special magic in App.wantQuickLook.

Historical Note [Desugaring operator sections]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This Note explains some historical trickiness in desugaring left and
right sections.  That trickiness has completely disappeared now that
we desugar to calls to 'leftSection` and `rightSection`, but I'm
leaving it here to remind us how nice the new story is.

Desugaring left sections with -XPostfixOperators is straightforward: convert
(expr `op`) to (op expr).

Without -XPostfixOperators it's a bit more tricky. At first it looks as if we
can convert

    (expr `op`)

naively to

    \x -&gt; op expr x

But no!  expr might be a redex, and we can lose laziness badly this
way.  Consider

    map (expr `op`) xs

for example. If expr were a redex then eta-expanding naively would
result in multiple evaluations where the user might only have expected one.

So we convert instead to

    let y = expr in \x -&gt; op y x

Also, note that we must do this for both right and (perhaps surprisingly) left
sections. Why are left sections necessary? Consider the program (found in #18151),

    seq (True `undefined`) ()

according to the Haskell Report this should reduce to () (as it specifies
desugaring via eta expansion). However, if we fail to eta expand we will rather
bottom. Consequently, we must eta expand even in the case of a left section.

If `expr` is actually just a variable, say, then the simplifier
will inline `y`, eliminating the redundant `let`.

Note that this works even in the case that `expr` is unlifted. In this case
bindNonRec will automatically do the right thing, giving us:

    case expr of y -&gt; (\x -&gt; op y x)

See #18151.
-}</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Field Labels
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnHsFieldLabel"><span class="hs-identifier hs-type">rnHsFieldLabel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsFieldLabel"><span class="hs-identifier hs-type">HsFieldLabel</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsFieldLabel"><span class="hs-identifier hs-type">HsFieldLabel</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span id="rnHsFieldLabel"><span class="annot"><span class="annottext">rnHsFieldLabel :: Located (HsFieldLabel GhcPs) -&gt; Located (HsFieldLabel GhcRn)
</span><a href="GHC.Rename.Expr.html#rnHsFieldLabel"><span class="hs-identifier hs-var hs-var">rnHsFieldLabel</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359332"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681359332"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsFieldLabel"><span class="hs-identifier hs-type">HsFieldLabel</span></a></span><span> </span><span id="local-6989586621681359330"><span class="annot"><span class="annottext">XCHsFieldLabel GhcPs
</span><a href="#local-6989586621681359330"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359329"><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681359329"><span class="hs-keyword hs-var">label</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681359332"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XCHsFieldLabel p -&gt; Located FastString -&gt; HsFieldLabel p
</span><a href="Language.Haskell.Syntax.Expr.html#HsFieldLabel"><span class="hs-identifier hs-var">HsFieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">XCHsFieldLabel GhcPs
</span><a href="#local-6989586621681359330"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681359329"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>
</span><span id="line-725"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnFieldLabelStrings"><span class="hs-identifier hs-type">rnFieldLabelStrings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FieldLabelStrings"><span class="hs-identifier hs-type">FieldLabelStrings</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FieldLabelStrings"><span class="hs-identifier hs-type">FieldLabelStrings</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-726"></span><span id="rnFieldLabelStrings"><span class="annot"><span class="annottext">rnFieldLabelStrings :: FieldLabelStrings GhcPs -&gt; FieldLabelStrings GhcRn
</span><a href="GHC.Rename.Expr.html#rnFieldLabelStrings"><span class="hs-identifier hs-var hs-var">rnFieldLabelStrings</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FieldLabelStrings"><span class="hs-identifier hs-type">FieldLabelStrings</span></a></span><span> </span><span id="local-6989586621681359326"><span class="annot"><span class="annottext">[Located (HsFieldLabel GhcPs)]
</span><a href="#local-6989586621681359326"><span class="hs-identifier hs-var">fls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. [Located (HsFieldLabel p)] -&gt; FieldLabelStrings p
</span><a href="Language.Haskell.Syntax.Expr.html#FieldLabelStrings"><span class="hs-identifier hs-var">FieldLabelStrings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Located (HsFieldLabel GhcPs) -&gt; Located (HsFieldLabel GhcRn)
</span><a href="GHC.Rename.Expr.html#rnHsFieldLabel"><span class="hs-identifier hs-var">rnHsFieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">[Located (HsFieldLabel GhcPs)]
</span><a href="#local-6989586621681359326"><span class="hs-identifier hs-var">fls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Arrow commands
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmdArgs"><span class="hs-identifier hs-type">rnCmdArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span id="rnCmdArgs"><span class="annot"><span class="annottext">rnCmdArgs :: [LHsCmdTop GhcPs] -&gt; RnM ([LHsCmdTop GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdArgs"><span class="hs-identifier hs-var hs-var">rnCmdArgs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmdArgs"><span class="hs-identifier hs-var">rnCmdArgs</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359324"><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359324"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681359323"><span class="annot"><span class="annottext">[LHsCmdTop GhcPs]
</span><a href="#local-6989586621681359323"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359322"><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359322"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359321"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359321"><span class="hs-identifier hs-var">fvArg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs -&gt; RnM (LHsCmdTop GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdTop"><span class="hs-identifier hs-var">rnCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359324"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-740"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359320"><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsCmdTop GhcRn)]
</span><a href="#local-6989586621681359320"><span class="hs-identifier hs-var">args'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359319"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359319"><span class="hs-identifier hs-var">fvArgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcPs] -&gt; RnM ([LHsCmdTop GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdArgs"><span class="hs-identifier hs-var">rnCmdArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcPs]
</span><a href="#local-6989586621681359323"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-741"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359322"><span class="hs-identifier hs-var">arg'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsCmdTop GhcRn)]
</span><a href="#local-6989586621681359320"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359321"><span class="hs-identifier hs-var">fvArg</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359319"><span class="hs-identifier hs-var">fvArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmdTop"><span class="hs-identifier hs-type">rnCmdTop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span id="rnCmdTop"><span class="annot"><span class="annottext">rnCmdTop :: LHsCmdTop GhcPs -&gt; RnM (LHsCmdTop GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdTop"><span class="hs-identifier hs-var hs-var">rnCmdTop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; TcM (b, c)) -&gt; Located a -&gt; TcM (Located b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstM"><span class="hs-identifier hs-var">wrapLocFstM</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmdTop GhcPs -&gt; RnM (HsCmdTop GhcRn, FreeVars)
</span><a href="#local-6989586621681359317"><span class="hs-identifier hs-var">rnCmdTop'</span></a></span><span>
</span><span id="line-745"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-746"></span><span>  </span><span class="annot"><a href="#local-6989586621681359317"><span class="hs-identifier hs-type">rnCmdTop'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-747"></span><span>  </span><span id="local-6989586621681359317"><span class="annot"><span class="annottext">rnCmdTop' :: HsCmdTop GhcPs -&gt; RnM (HsCmdTop GhcRn, FreeVars)
</span><a href="#local-6989586621681359317"><span class="hs-identifier hs-var hs-var">rnCmdTop'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdTop GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359315"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359315"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359314"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359314"><span class="hs-identifier hs-var">cmd'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359313"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359313"><span class="hs-identifier hs-var">fvCmd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359315"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-749"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359311"><span class="annot"><span class="annottext">cmd_names :: [Name]
</span><a href="#local-6989586621681359311"><span class="hs-identifier hs-var hs-var">cmd_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#arrAName"><span class="hs-identifier hs-var">arrAName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#composeAName"><span class="hs-identifier hs-var">composeAName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#firstAName"><span class="hs-identifier hs-var">firstAName</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-750"></span><span>                          </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359314"><span class="hs-identifier hs-var">cmd'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-751"></span><span>        </span><span class="hs-comment">-- Generate the rebindable syntax for the monad</span><span>
</span><span id="line-752"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359305"><span class="annot"><span class="annottext">[HsExpr GhcRn]
</span><a href="#local-6989586621681359305"><span class="hs-identifier hs-var">cmd_names'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359304"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359304"><span class="hs-identifier hs-var">cmd_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM ([HsExpr GhcRn], FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxNames"><span class="hs-identifier hs-var">lookupSyntaxNames</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681359311"><span class="hs-identifier hs-var">cmd_names</span></a></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XCmdTop p -&gt; LHsCmd p -&gt; HsCmdTop p
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-var">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681359311"><span class="hs-identifier hs-var">cmd_names</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcRn]
</span><a href="#local-6989586621681359305"><span class="hs-identifier hs-var">cmd_names'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359314"><span class="hs-identifier hs-var">cmd'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-755"></span><span>                  </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359313"><span class="hs-identifier hs-var">fvCmd</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359304"><span class="hs-identifier hs-var">cmd_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-756"></span><span>
</span><span id="line-757"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-type">rnLCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-758"></span><span id="rnLCmd"><span class="annot"><span class="annottext">rnLCmd :: LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var hs-var">rnLCmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c.
(a -&gt; TcM (b, c)) -&gt; LocatedA a -&gt; TcM (LocatedA b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcPs -&gt; RnM (HsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span>
</span><span id="line-759"></span><span>
</span><span id="line-760"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-type">rnCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span id="rnCmd"><span class="annot"><span class="annottext">rnCmd :: HsCmd GhcPs -&gt; RnM (HsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var hs-var">rnCmd</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrApp GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359300"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359300"><span class="hs-identifier hs-var">arrow</span></a></span></span><span> </span><span id="local-6989586621681359299"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359299"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681359298"><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681359298"><span class="hs-identifier hs-var">ho</span></a></span></span><span> </span><span id="local-6989586621681359297"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359297"><span class="hs-identifier hs-var">rtl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359296"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359296"><span class="hs-identifier hs-var">arrow'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359295"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359295"><span class="hs-identifier hs-var">fvArrow</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
-&gt; TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
</span><a href="#local-6989586621681359294"><span class="hs-identifier hs-var">select_arrow_scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359300"><span class="hs-identifier hs-var">arrow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359293"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359293"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359292"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359292"><span class="hs-identifier hs-var">fvArg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359299"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-765"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdArrApp id
-&gt; LHsExpr id -&gt; LHsExpr id -&gt; HsArrAppType -&gt; Bool -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-var">HsCmdArrApp</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359296"><span class="hs-identifier hs-var">arrow'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359293"><span class="hs-identifier hs-var">arg'</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681359298"><span class="hs-identifier hs-var">ho</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359297"><span class="hs-identifier hs-var">rtl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-766"></span><span>                 </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359295"><span class="hs-identifier hs-var">fvArrow</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359292"><span class="hs-identifier hs-var">fvArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-768"></span><span>    </span><span id="local-6989586621681359294"><span class="annot"><span class="annottext">select_arrow_scope :: TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
-&gt; TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
</span><a href="#local-6989586621681359294"><span class="hs-identifier hs-var hs-var">select_arrow_scope</span></a></span></span><span> </span><span id="local-6989586621681359291"><span class="annot"><span class="annottext">TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
</span><a href="#local-6989586621681359291"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681359298"><span class="hs-identifier hs-var">ho</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-769"></span><span>        </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="Language.Haskell.Syntax.Expr.html#HsHigherOrderApp"><span class="hs-identifier hs-var">HsHigherOrderApp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
</span><a href="#local-6989586621681359291"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-770"></span><span>        </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="Language.Haskell.Syntax.Expr.html#HsFirstOrderApp"><span class="hs-identifier hs-var">HsFirstOrderApp</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#escapeArrowScope"><span class="hs-identifier hs-var">escapeArrowScope</span></a></span><span> </span><span class="annot"><span class="annottext">TcM (GenLocated SrcSpanAnnA (HsExpr GhcRn), FreeVars)
</span><a href="#local-6989586621681359291"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-771"></span><span>        </span><span class="hs-comment">-- See Note [Escaping the arrow scope] in GHC.Tc.Types</span><span>
</span><span id="line-772"></span><span>        </span><span class="hs-comment">-- Before renaming 'arrow', use the environment of the enclosing</span><span>
</span><span id="line-773"></span><span>        </span><span class="hs-comment">-- proc for the (-&lt;) case.</span><span>
</span><span id="line-774"></span><span>        </span><span class="hs-comment">-- Local bindings, inside the enclosing proc, are not in scope</span><span>
</span><span id="line-775"></span><span>        </span><span class="hs-comment">-- inside 'arrow'.  In the higher-order case (-&lt;&lt;), they are.</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="hs-comment">-- infix form</span><span>
</span><span id="line-778"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrForm GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359286"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359286"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681359285"><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359285"><span class="hs-identifier hs-var">arg1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359284"><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359284"><span class="hs-identifier hs-var">arg2</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-779"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359283"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359283"><span class="hs-identifier hs-var">op'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359282"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359282"><span class="hs-identifier hs-var">fv_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#escapeArrowScope"><span class="hs-identifier hs-var">escapeArrowScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359286"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359281"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359281"><span class="hs-identifier hs-var">op_name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359283"><span class="hs-identifier hs-var">op'</span></a></span><span>
</span><span id="line-781"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359280"><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359280"><span class="hs-identifier hs-var">arg1'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359279"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359279"><span class="hs-identifier hs-var">fv_arg1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs -&gt; RnM (LHsCmdTop GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdTop"><span class="hs-identifier hs-var">rnCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359285"><span class="hs-identifier hs-var">arg1</span></a></span><span>
</span><span id="line-782"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359278"><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359278"><span class="hs-identifier hs-var">arg2'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359277"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359277"><span class="hs-identifier hs-var">fv_arg2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs -&gt; RnM (LHsCmdTop GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdTop"><span class="hs-identifier hs-var">rnCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcPs
</span><a href="#local-6989586621681359284"><span class="hs-identifier hs-var">arg2</span></a></span><span>
</span><span id="line-783"></span><span>        </span><span class="hs-comment">-- Deal with fixity</span><span>
</span><span id="line-784"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359276"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621681359276"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359281"><span class="hs-identifier hs-var">op_name</span></a></span><span>
</span><span id="line-785"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359275"><span class="annot"><span class="annottext">HsCmd GhcRn
</span><a href="#local-6989586621681359275"><span class="hs-identifier hs-var">final_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcRn
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Fixity
-&gt; LHsCmdTop GhcRn
-&gt; RnM (HsCmd GhcRn)
</span><a href="GHC.Rename.HsType.html#mkOpFormRn"><span class="hs-identifier hs-var">mkOpFormRn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359280"><span class="hs-identifier hs-var">arg1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359283"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621681359276"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (HsCmdTop GhcRn)
</span><a href="#local-6989586621681359278"><span class="hs-identifier hs-var">arg2'</span></a></span><span>
</span><span id="line-786"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsCmd GhcRn
</span><a href="#local-6989586621681359275"><span class="hs-identifier hs-var">final_e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359279"><span class="hs-identifier hs-var">fv_arg1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359282"><span class="hs-identifier hs-var">fv_op</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359277"><span class="hs-identifier hs-var">fv_arg2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrForm GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359273"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359273"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681359272"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681359272"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681359271"><span class="annot"><span class="annottext">Maybe Fixity
</span><a href="#local-6989586621681359271"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span id="local-6989586621681359270"><span class="annot"><span class="annottext">[LHsCmdTop GhcPs]
</span><a href="#local-6989586621681359270"><span class="hs-identifier hs-var">cmds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359269"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359269"><span class="hs-identifier hs-var">op'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359268"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359268"><span class="hs-identifier hs-var">fvOp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#escapeArrowScope"><span class="hs-identifier hs-var">escapeArrowScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359273"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359267"><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsCmdTop GhcRn)]
</span><a href="#local-6989586621681359267"><span class="hs-identifier hs-var">cmds'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359266"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359266"><span class="hs-identifier hs-var">fvCmds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcPs] -&gt; RnM ([LHsCmdTop GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmdArgs"><span class="hs-identifier hs-var">rnCmdArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcPs]
</span><a href="#local-6989586621681359270"><span class="hs-identifier hs-var">cmds</span></a></span><span>
</span><span id="line-791"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall id.
XCmdArrForm id
-&gt; LHsExpr id
-&gt; LexicalFixity
-&gt; Maybe Fixity
-&gt; [LHsCmdTop id]
-&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-var">HsCmdArrForm</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359269"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681359272"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Fixity
</span><a href="#local-6989586621681359271"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (HsCmdTop GhcRn)]
</span><a href="#local-6989586621681359267"><span class="hs-identifier hs-var">cmds'</span></a></span><span>
</span><span id="line-792"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359268"><span class="hs-identifier hs-var">fvOp</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359266"><span class="hs-identifier hs-var">fvCmds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-type">HsCmdApp</span></a></span><span> </span><span id="local-6989586621681359264"><span class="annot"><span class="annottext">XCmdApp GhcPs
</span><a href="#local-6989586621681359264"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359263"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359263"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681359262"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359262"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359261"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359261"><span class="hs-identifier hs-var">fun'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359260"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359260"><span class="hs-identifier hs-var">fvFun</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span>  </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359263"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-796"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359259"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359259"><span class="hs-identifier hs-var">arg'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359258"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359258"><span class="hs-identifier hs-var">fvArg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359262"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-797"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdApp id -&gt; LHsCmd id -&gt; LHsExpr id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-var">HsCmdApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdApp GhcPs
</span><a href="#local-6989586621681359264"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359261"><span class="hs-identifier hs-var">fun'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359259"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359260"><span class="hs-identifier hs-var">fvFun</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359258"><span class="hs-identifier hs-var">fvArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-798"></span><span>
</span><span id="line-799"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLam GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359256"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><a href="#local-6989586621681359256"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-800"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359255"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359255"><span class="hs-identifier hs-var">matches'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359254"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359254"><span class="hs-identifier hs-var">fvMatch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsArrowMatchContext -&gt; HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowMatchCtxt"><span class="hs-identifier hs-var">ArrowMatchCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#KappaExpr"><span class="hs-identifier hs-var">KappaExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><a href="#local-6989586621681359256"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-801"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdLam id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-var">HsCmdLam</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359255"><span class="hs-identifier hs-var">matches'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359254"><span class="hs-identifier hs-var">fvMatch</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span id="local-6989586621681359251"><span class="annot"><span class="annottext">XCmdPar GhcPs
</span><a href="#local-6989586621681359251"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359250"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359250"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359249"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359249"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359248"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359248"><span class="hs-identifier hs-var">fvs_e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359250"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-805"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdPar id -&gt; LHsCmd id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-var">HsCmdPar</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdPar GhcPs
</span><a href="#local-6989586621681359251"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359249"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359248"><span class="hs-identifier hs-var">fvs_e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdCase GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359246"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359246"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681359245"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><a href="#local-6989586621681359245"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359244"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359244"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359243"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359243"><span class="hs-identifier hs-var">e_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359246"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-809"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359242"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359242"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359241"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359241"><span class="hs-identifier hs-var">ms_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsArrowMatchContext -&gt; HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowMatchCtxt"><span class="hs-identifier hs-var">ArrowMatchCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowCaseAlt"><span class="hs-identifier hs-var">ArrowCaseAlt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><a href="#local-6989586621681359245"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-810"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdCase id -&gt; LHsExpr id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-var">HsCmdCase</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359244"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359242"><span class="hs-identifier hs-var">new_matches</span></a></span><span>
</span><span id="line-811"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359243"><span class="hs-identifier hs-var">e_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359241"><span class="hs-identifier hs-var">ms_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-type">HsCmdLamCase</span></a></span><span> </span><span id="local-6989586621681359238"><span class="annot"><span class="annottext">XCmdLamCase GhcPs
</span><a href="#local-6989586621681359238"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681359237"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><a href="#local-6989586621681359237"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359236"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359236"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359235"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359235"><span class="hs-identifier hs-var">ms_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContext GhcRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), FreeVars))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), FreeVars)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsArrowMatchContext -&gt; HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowMatchCtxt"><span class="hs-identifier hs-var">ArrowMatchCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowMatchContext
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowCaseAlt"><span class="hs-identifier hs-var">ArrowCaseAlt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><a href="#local-6989586621681359237"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-815"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdLamCase id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-var">HsCmdLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLamCase GhcPs
</span><a href="#local-6989586621681359238"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359236"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359235"><span class="hs-identifier hs-var">ms_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-816"></span><span>
</span><span id="line-817"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdIf GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359233"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359233"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681359232"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359232"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621681359231"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359231"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359230"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359230"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359229"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359229"><span class="hs-identifier hs-var">fvP</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359233"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-819"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359228"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359228"><span class="hs-identifier hs-var">b1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359227"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359227"><span class="hs-identifier hs-var">fvB1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359232"><span class="hs-identifier hs-var">b1</span></a></span><span>
</span><span id="line-820"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359226"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359226"><span class="hs-identifier hs-var">b2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359225"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359225"><span class="hs-identifier hs-var">fvB2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359231"><span class="hs-identifier hs-var">b2</span></a></span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359224"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681359224"><span class="hs-identifier hs-var">mb_ite</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (Maybe Name)
</span><a href="GHC.Rename.Env.html#lookupIfThenElse"><span class="hs-identifier hs-var">lookupIfThenElse</span></a></span><span>
</span><span id="line-823"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359223"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681359223"><span class="hs-identifier hs-var">ite</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359222"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359222"><span class="hs-identifier hs-var">fvITE</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681359224"><span class="hs-identifier hs-var">mb_ite</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-824"></span><span>                </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681359221"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359221"><span class="hs-identifier hs-var">ite_name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SyntaxExprRn
</span><a href="GHC.Hs.Expr.html#mkRnSyntaxExpr"><span class="hs-identifier hs-var">mkRnSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359221"><span class="hs-identifier hs-var">ite_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681359221"><span class="hs-identifier hs-var">ite_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>                </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprRn"><span class="hs-identifier hs-var">NoSyntaxExprRn</span></a></span><span class="hs-special">,</span><span>          </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
XCmdIf id
-&gt; SyntaxExpr id
-&gt; LHsExpr id
-&gt; LHsCmd id
-&gt; LHsCmd id
-&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-var">HsCmdIf</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681359223"><span class="hs-identifier hs-var">ite</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359230"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359228"><span class="hs-identifier hs-var">b1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359226"><span class="hs-identifier hs-var">b2'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359222"><span class="hs-identifier hs-var">fvITE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359229"><span class="hs-identifier hs-var">fvP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359227"><span class="hs-identifier hs-var">fvB1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359225"><span class="hs-identifier hs-var">fvB2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLet GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359217"><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681359217"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681359216"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359216"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall result.
HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcRn -&gt; FreeVars -&gt; RnM (result, FreeVars))
-&gt; RnM (result, FreeVars)
</span><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var">rnLocalBindsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681359217"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681359215"><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681359215"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-831"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359214"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359214"><span class="hs-identifier hs-var">cmd'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681359213"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359213"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; RnM (LHsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLCmd"><span class="hs-identifier hs-var">rnLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621681359216"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-832"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. XCmdLet id -&gt; HsLocalBinds id -&gt; LHsCmd id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-var">HsCmdLet</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681359215"><span class="hs-identifier hs-var">binds'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcRn)
</span><a href="#local-6989586621681359214"><span class="hs-identifier hs-var">cmd'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359213"><span class="hs-identifier hs-var">fvExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdDo GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359211"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681359211"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681359210"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcPs GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621681359210"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681359209"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359209"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359208"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359208"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-836"></span><span>            </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier hs-var">rnStmts</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowExpr"><span class="hs-identifier hs-var">ArrowExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcPs -&gt; RnM (HsCmd GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnCmd"><span class="hs-identifier hs-var">rnCmd</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcPs GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621681359210"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-837"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall id. XCmdDo id -&gt; XRec id [CmdLStmt id] -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-var">HsCmdDo</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681359211"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359209"><span class="hs-identifier hs-var">stmts'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359208"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span class="hs-comment">---------------------------------------------------</span><span>
</span><span id="line-840"></span><span class="hs-keyword">type</span><span> </span><span id="CmdNeeds"><span class="annot"><a href="GHC.Rename.Expr.html#CmdNeeds"><span class="hs-identifier hs-var">CmdNeeds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>        </span><span class="hs-comment">-- Only inhabitants are</span><span>
</span><span id="line-841"></span><span>                                </span><span class="hs-comment">--      appAName, choiceAName, loopAName</span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span class="hs-comment">-- find what methods the Cmd needs (loop, choice, apply)</span><span>
</span><span id="line-844"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-type">methodNamesLCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#CmdNeeds"><span class="hs-identifier hs-type">CmdNeeds</span></a></span><span>
</span><span id="line-845"></span><span id="methodNamesLCmd"><span class="annot"><span class="annottext">methodNamesLCmd :: LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var hs-var">methodNamesLCmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-type">methodNamesCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#CmdNeeds"><span class="hs-identifier hs-type">CmdNeeds</span></a></span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span id="methodNamesCmd"><span class="annot"><span class="annottext">methodNamesCmd :: HsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var hs-var">methodNamesCmd</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359204"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681359204"><span class="hs-identifier hs-var">_arrow</span></a></span></span><span> </span><span id="local-6989586621681359203"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681359203"><span class="hs-identifier hs-var">_arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="Language.Haskell.Syntax.Expr.html#HsFirstOrderApp"><span class="hs-identifier hs-var">HsFirstOrderApp</span></a></span><span> </span><span id="local-6989586621681359202"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359202"><span class="hs-identifier hs-var">_rtl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-851"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359201"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681359201"><span class="hs-identifier hs-var">_arrow</span></a></span></span><span> </span><span id="local-6989586621681359200"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681359200"><span class="hs-identifier hs-var">_arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="Language.Haskell.Syntax.Expr.html#HsHigherOrderApp"><span class="hs-identifier hs-var">HsHigherOrderApp</span></a></span><span> </span><span id="local-6989586621681359199"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359199"><span class="hs-identifier hs-var">_rtl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#appAName"><span class="hs-identifier hs-var">appAName</span></a></span><span>
</span><span id="line-853"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-854"></span><span>
</span><span id="line-855"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdPar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359197"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359197"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359197"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdIf GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359196"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359196"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681359195"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359195"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-858"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359196"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359195"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#choiceAName"><span class="hs-identifier hs-var">choiceAName</span></a></span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLet GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359193"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359193"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359193"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-861"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdDo GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359192"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359192"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmdLStmt GhcRn] -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesStmts"><span class="hs-identifier hs-var">methodNamesStmts</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359192"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-862"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-type">HsCmdApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359190"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359190"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359190"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-863"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLam GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359189"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn)
</span><a href="#local-6989586621681359189"><span class="hs-identifier hs-var">match</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesMatch"><span class="hs-identifier hs-var">methodNamesMatch</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn)
</span><a href="#local-6989586621681359189"><span class="hs-identifier hs-var">match</span></a></span><span>
</span><span id="line-864"></span><span>
</span><span id="line-865"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdCase GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359187"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn)
</span><a href="#local-6989586621681359187"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-866"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesMatch"><span class="hs-identifier hs-var">methodNamesMatch</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn)
</span><a href="#local-6989586621681359187"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#choiceAName"><span class="hs-identifier hs-var">choiceAName</span></a></span><span>
</span><span id="line-867"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesCmd"><span class="hs-identifier hs-var">methodNamesCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-type">HsCmdLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLamCase GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359186"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn)
</span><a href="#local-6989586621681359186"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesMatch"><span class="hs-identifier hs-var">methodNamesMatch</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsCmd GhcRn)
</span><a href="#local-6989586621681359186"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#choiceAName"><span class="hs-identifier hs-var">choiceAName</span></a></span><span>
</span><span id="line-869"></span><span>
</span><span id="line-870"></span><span class="hs-comment">--methodNamesCmd _ = emptyFVs</span><span>
</span><span id="line-871"></span><span>   </span><span class="hs-comment">-- Other forms can't occur in commands, but it's not convenient</span><span>
</span><span id="line-872"></span><span>   </span><span class="hs-comment">-- to error here so we just do what's convenient.</span><span>
</span><span id="line-873"></span><span>   </span><span class="hs-comment">-- The type checker will complain later</span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span class="hs-comment">---------------------------------------------------</span><span>
</span><span id="line-876"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesMatch"><span class="hs-identifier hs-type">methodNamesMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-877"></span><span id="methodNamesMatch"><span class="annot"><span class="annottext">methodNamesMatch :: MatchGroup GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesMatch"><span class="hs-identifier hs-var hs-var">methodNamesMatch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359183"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359183"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {l}.
GenLocated l (Match GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))
-&gt; FreeVars
</span><a href="#local-6989586621681359182"><span class="hs-identifier hs-var">do_one</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359183"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-880"></span><span>    </span><span id="local-6989586621681359182"><span class="annot"><span class="annottext">do_one :: GenLocated l (Match GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))
-&gt; FreeVars
</span><a href="#local-6989586621681359182"><span class="hs-identifier hs-var hs-var">do_one</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_grhss :: forall p body. Match p body -&gt; GRHSs p body
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681359179"><span class="annot"><span class="annottext">GRHSs GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359179"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesGRHSs"><span class="hs-identifier hs-var">methodNamesGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn))
</span><a href="#local-6989586621681359179"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-881"></span><span>
</span><span id="line-882"></span><span class="hs-comment">-------------------------------------------------</span><span>
</span><span id="line-883"></span><span class="hs-comment">-- gaw 2004</span><span>
</span><span id="line-884"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesGRHSs"><span class="hs-identifier hs-type">methodNamesGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-885"></span><span id="methodNamesGRHSs"><span class="annot"><span class="annottext">methodNamesGRHSs :: GRHSs GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesGRHSs"><span class="hs-identifier hs-var hs-var">methodNamesGRHSs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHSs GhcRn (LHsCmd GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359176"><span class="annot"><span class="annottext">[LGRHS GhcRn (LHsCmd GhcRn)]
</span><a href="#local-6989586621681359176"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Located (GRHS GhcRn (LHsCmd GhcRn)) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesGRHS"><span class="hs-identifier hs-var">methodNamesGRHS</span></a></span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcRn (LHsCmd GhcRn)]
</span><a href="#local-6989586621681359176"><span class="hs-identifier hs-var">grhss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="hs-comment">-------------------------------------------------</span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesGRHS"><span class="hs-identifier hs-type">methodNamesGRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#CmdNeeds"><span class="hs-identifier hs-type">CmdNeeds</span></a></span><span>
</span><span id="line-890"></span><span id="methodNamesGRHS"><span class="annot"><span class="annottext">methodNamesGRHS :: Located (GRHS GhcRn (LHsCmd GhcRn)) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesGRHS"><span class="hs-identifier hs-var hs-var">methodNamesGRHS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcRn (LHsCmd GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359173"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359173"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359173"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="hs-comment">---------------------------------------------------</span><span>
</span><span id="line-893"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmts"><span class="hs-identifier hs-type">methodNamesStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-894"></span><span id="methodNamesStmts"><span class="annot"><span class="annottext">methodNamesStmts :: [CmdLStmt GhcRn] -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesStmts"><span class="hs-identifier hs-var hs-var">methodNamesStmts</span></a></span></span><span> </span><span id="local-6989586621681359172"><span class="annot"><span class="annottext">[CmdLStmt GhcRn]
</span><a href="#local-6989586621681359172"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">CmdLStmt GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLStmt"><span class="hs-identifier hs-var">methodNamesLStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[CmdLStmt GhcRn]
</span><a href="#local-6989586621681359172"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span class="hs-comment">---------------------------------------------------</span><span>
</span><span id="line-897"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesLStmt"><span class="hs-identifier hs-type">methodNamesLStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-898"></span><span id="methodNamesLStmt"><span class="annot"><span class="annottext">methodNamesLStmt :: CmdLStmt GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLStmt"><span class="hs-identifier hs-var hs-var">methodNamesLStmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StmtLR GhcRn GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-type">methodNamesStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-901"></span><span id="methodNamesStmt"><span class="annot"><span class="annottext">methodNamesStmt :: StmtLR GhcRn GhcRn (LHsCmd GhcRn) -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var hs-var">methodNamesStmt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcRn GhcRn (LHsCmd GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359168"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359168"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359168"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-902"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcRn GhcRn (LHsCmd GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359166"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359166"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359166"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-903"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcRn GhcRn (LHsCmd GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359164"><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359164"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesLCmd"><span class="hs-identifier hs-var">methodNamesLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcRn
</span><a href="#local-6989586621681359164"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-904"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: forall idL idR body.
StmtLR idL idR body -&gt; XRec idR [LStmtLR idL idR body]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359161"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359161"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-905"></span><span>  </span><span class="annot"><span class="annottext">[CmdLStmt GhcRn] -&gt; FreeVars
</span><a href="GHC.Rename.Expr.html#methodNamesStmts"><span class="hs-identifier hs-var">methodNamesStmts</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsCmd GhcRn)))]
</span><a href="#local-6989586621681359161"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-operator hs-var">`addOneFV`</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#loopAName"><span class="hs-identifier hs-var">loopAName</span></a></span><span>
</span><span id="line-906"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-907"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-908"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-909"></span><span class="annot"><a href="GHC.Rename.Expr.html#methodNamesStmt"><span class="hs-identifier hs-var">methodNamesStmt</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-910"></span><span>   </span><span class="hs-comment">-- ParStmt and TransStmt can't occur in commands, but it's not</span><span>
</span><span id="line-911"></span><span>   </span><span class="hs-comment">-- convenient to error here so we just do what's convenient</span><span>
</span><span id="line-912"></span><span>
</span><span id="line-913"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Arithmetic sequences
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnArithSeq"><span class="hs-identifier hs-type">rnArithSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span id="rnArithSeq"><span class="annot"><span class="annottext">rnArithSeq :: ArithSeqInfo GhcPs -&gt; RnM (ArithSeqInfo GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnArithSeq"><span class="hs-identifier hs-var hs-var">rnArithSeq</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#From"><span class="hs-identifier hs-type">From</span></a></span><span> </span><span id="local-6989586621681359154"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359154"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-923"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359153"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359153"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359152"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359152"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359154"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-924"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359153"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359152"><span class="hs-identifier hs-var">fvExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-925"></span><span>
</span><span id="line-926"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnArithSeq"><span class="hs-identifier hs-var">rnArithSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThen"><span class="hs-identifier hs-type">FromThen</span></a></span><span> </span><span id="local-6989586621681359150"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359150"><span class="hs-identifier hs-var">expr1</span></a></span></span><span> </span><span id="local-6989586621681359149"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359149"><span class="hs-identifier hs-var">expr2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-927"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359148"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359148"><span class="hs-identifier hs-var">expr1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359147"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359147"><span class="hs-identifier hs-var">fvExpr1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359150"><span class="hs-identifier hs-var">expr1</span></a></span><span>
</span><span id="line-928"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359146"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359146"><span class="hs-identifier hs-var">expr2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359145"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359145"><span class="hs-identifier hs-var">fvExpr2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359149"><span class="hs-identifier hs-var">expr2</span></a></span><span>
</span><span id="line-929"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#FromThen"><span class="hs-identifier hs-var">FromThen</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359148"><span class="hs-identifier hs-var">expr1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359146"><span class="hs-identifier hs-var">expr2'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359147"><span class="hs-identifier hs-var">fvExpr1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359145"><span class="hs-identifier hs-var">fvExpr2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-930"></span><span>
</span><span id="line-931"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnArithSeq"><span class="hs-identifier hs-var">rnArithSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromTo"><span class="hs-identifier hs-type">FromTo</span></a></span><span> </span><span id="local-6989586621681359143"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359143"><span class="hs-identifier hs-var">expr1</span></a></span></span><span> </span><span id="local-6989586621681359142"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359142"><span class="hs-identifier hs-var">expr2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-932"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359141"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359141"><span class="hs-identifier hs-var">expr1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359140"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359140"><span class="hs-identifier hs-var">fvExpr1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359143"><span class="hs-identifier hs-var">expr1</span></a></span><span>
</span><span id="line-933"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359139"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359139"><span class="hs-identifier hs-var">expr2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359138"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359138"><span class="hs-identifier hs-var">fvExpr2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359142"><span class="hs-identifier hs-var">expr2</span></a></span><span>
</span><span id="line-934"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#FromTo"><span class="hs-identifier hs-var">FromTo</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359141"><span class="hs-identifier hs-var">expr1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359139"><span class="hs-identifier hs-var">expr2'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359140"><span class="hs-identifier hs-var">fvExpr1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359138"><span class="hs-identifier hs-var">fvExpr2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnArithSeq"><span class="hs-identifier hs-var">rnArithSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThenTo"><span class="hs-identifier hs-type">FromThenTo</span></a></span><span> </span><span id="local-6989586621681359136"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359136"><span class="hs-identifier hs-var">expr1</span></a></span></span><span> </span><span id="local-6989586621681359135"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359135"><span class="hs-identifier hs-var">expr2</span></a></span></span><span> </span><span id="local-6989586621681359134"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359134"><span class="hs-identifier hs-var">expr3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359133"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359133"><span class="hs-identifier hs-var">expr1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359132"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359132"><span class="hs-identifier hs-var">fvExpr1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359136"><span class="hs-identifier hs-var">expr1</span></a></span><span>
</span><span id="line-938"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359131"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359131"><span class="hs-identifier hs-var">expr2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359130"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359130"><span class="hs-identifier hs-var">fvExpr2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359135"><span class="hs-identifier hs-var">expr2</span></a></span><span>
</span><span id="line-939"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359129"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359129"><span class="hs-identifier hs-var">expr3'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359128"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359128"><span class="hs-identifier hs-var">fvExpr3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681359134"><span class="hs-identifier hs-var">expr3</span></a></span><span>
</span><span id="line-940"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id.
LHsExpr id -&gt; LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="Language.Haskell.Syntax.Expr.html#FromThenTo"><span class="hs-identifier hs-var">FromThenTo</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359133"><span class="hs-identifier hs-var">expr1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359131"><span class="hs-identifier hs-var">expr2'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681359129"><span class="hs-identifier hs-var">expr3'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-941"></span><span>                </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359132"><span class="hs-identifier hs-var">fvExpr1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359130"><span class="hs-identifier hs-var">fvExpr2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359128"><span class="hs-identifier hs-var">fvExpr3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-942"></span><span>
</span><span id="line-943"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsubsection{@Stmt@s: in @do@ expressions}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span class="hs-comment">{-
Note [Deterministic ApplicativeDo and RecursiveDo desugaring]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Both ApplicativeDo and RecursiveDo need to create tuples not
present in the source text.

For ApplicativeDo we create:

  (a,b,c) &lt;- (\c b a -&gt; (a,b,c)) &lt;$&gt;

For RecursiveDo we create:

  mfix (\ ~(a,b,c) -&gt; do ...; return (a',b',c'))

The order of the components in those tuples needs to be stable
across recompilations, otherwise they can get optimized differently
and we end up with incompatible binaries.
To get a stable order we use nameSetElemsStable.
See Note [Deterministic UniqFM] to learn more about nondeterminism.
-}</span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span class="hs-keyword">type</span><span> </span><span id="AnnoBody"><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-var">AnnoBody</span></a></span></span><span> </span><span id="local-6989586621681359127"><span class="annot"><a href="#local-6989586621681359127"><span class="hs-identifier hs-type">body</span></a></span></span><span>
</span><span id="line-973"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681359127"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-974"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681359127"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-975"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681359127"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-976"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681359127"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-977"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="hs-comment">-- | Rename some Stmts</span><span>
</span><span id="line-980"></span><span id="local-6989586621681360612"><span id="local-6989586621681360613"><span class="annot"><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier hs-type">rnStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360613"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-981"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-982"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360613"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360613"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>           </span><span class="hs-comment">-- ^ How to rename the body of each statement (e.g. rnLExpr)</span><span>
</span><span id="line-984"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360613"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-985"></span><span>           </span><span class="hs-comment">-- ^ Statements</span><span>
</span><span id="line-986"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360612"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>           </span><span class="hs-comment">-- ^ if these statements scope over something, this renames it</span><span>
</span><span id="line-988"></span><span>           </span><span class="hs-comment">-- and returns the result.</span><span>
</span><span id="line-989"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360613"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681360612"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-990"></span><span id="rnStmts"><span class="annot"><span class="annottext">rnStmts :: forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier hs-var hs-var">rnStmts</span></a></span></span><span> </span><span id="local-6989586621681359118"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359118"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681359117"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359117"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; (HsStmtContext GhcRn
    -&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
    -&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmtsWithPostProcessing"><span class="hs-identifier hs-var">rnStmtsWithPostProcessing</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359118"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359117"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
HsStmtContext GhcRn
-&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#noPostProcessStmts"><span class="hs-identifier hs-var">noPostProcessStmts</span></a></span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span class="hs-comment">-- | like 'rnStmts' but applies a post-processing step to the renamed Stmts</span><span>
</span><span id="line-993"></span><span id="local-6989586621681360721"><span id="local-6989586621681360723"><span class="annot"><a href="GHC.Rename.Expr.html#rnStmtsWithPostProcessing"><span class="hs-identifier hs-type">rnStmtsWithPostProcessing</span></a></span><span>
</span><span id="line-994"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-995"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-996"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-997"></span><span>           </span><span class="hs-comment">-- ^ How to rename the body of each statement (e.g. rnLExpr)</span><span>
</span><span id="line-998"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-999"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1000"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>           </span><span class="hs-comment">-- ^ postprocess the statements</span><span>
</span><span id="line-1002"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1003"></span><span>           </span><span class="hs-comment">-- ^ Statements</span><span>
</span><span id="line-1004"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360721"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>           </span><span class="hs-comment">-- ^ if these statements scope over something, this renames it</span><span>
</span><span id="line-1006"></span><span>           </span><span class="hs-comment">-- and returns the result.</span><span>
</span><span id="line-1007"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360723"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681360721"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1008"></span><span id="rnStmtsWithPostProcessing"><span class="annot"><span class="annottext">rnStmtsWithPostProcessing :: forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; (HsStmtContext GhcRn
    -&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
    -&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmtsWithPostProcessing"><span class="hs-identifier hs-var hs-var">rnStmtsWithPostProcessing</span></a></span></span><span> </span><span id="local-6989586621681359104"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359104"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681359103"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359103"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span id="local-6989586621681359102"><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="#local-6989586621681359102"><span class="hs-identifier hs-var">ppStmts</span></a></span></span><span> </span><span id="local-6989586621681359101"><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359101"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681359100"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359100"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1009"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681359099"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359099"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359098"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359098"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359097"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359097"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1010"></span><span>          </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmtsWithFreeVars"><span class="hs-identifier hs-var">rnStmtsWithFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359104"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359103"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359101"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359100"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-1011"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359095"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681359095"><span class="hs-identifier hs-var">pp_stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359094"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359094"><span class="hs-identifier hs-var">fvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="#local-6989586621681359102"><span class="hs-identifier hs-var">ppStmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359104"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359099"><span class="hs-identifier hs-var">stmts'</span></a></span><span>
</span><span id="line-1012"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681359095"><span class="hs-identifier hs-var">pp_stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359098"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359097"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359094"><span class="hs-identifier hs-var">fvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1014"></span><span>
</span><span id="line-1015"></span><span class="hs-comment">-- | maybe rearrange statements according to the ApplicativeDo transformation</span><span>
</span><span id="line-1016"></span><span class="annot"><a href="GHC.Rename.Expr.html#postProcessStmtsForApplicativeDo"><span class="hs-identifier hs-type">postProcessStmtsForApplicativeDo</span></a></span><span>
</span><span id="line-1017"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1020"></span><span id="postProcessStmtsForApplicativeDo"><span class="annot"><span class="annottext">postProcessStmtsForApplicativeDo :: HsStmtContext GhcRn
-&gt; [(ExprLStmt GhcRn, FreeVars)]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#postProcessStmtsForApplicativeDo"><span class="hs-identifier hs-var hs-var">postProcessStmtsForApplicativeDo</span></a></span></span><span> </span><span id="local-6989586621681359093"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359093"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681359092"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681359092"><span class="hs-identifier hs-var">stmts</span></a></span></span><span>
</span><span id="line-1021"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1022"></span><span>       </span><span class="hs-comment">-- rearrange the statements using ApplicativeStmt if</span><span>
</span><span id="line-1023"></span><span>       </span><span class="hs-comment">-- -XApplicativeDo is on.  Also strip out the FreeVars attached</span><span>
</span><span id="line-1024"></span><span>       </span><span class="hs-comment">-- to each Stmt body.</span><span>
</span><span id="line-1025"></span><span>         </span><span id="local-6989586621681359091"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359091"><span class="hs-identifier hs-var">ado_is_on</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ApplicativeDo</span></span><span>
</span><span id="line-1026"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681359089"><span class="annot"><span class="annottext">is_do_expr :: Bool
</span><a href="#local-6989586621681359089"><span class="hs-identifier hs-var hs-var">is_do_expr</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DoExpr"><span class="hs-identifier hs-type">DoExpr</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359093"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1027"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1028"></span><span>       </span><span class="hs-comment">-- don't apply the transformation inside TH brackets, because</span><span>
</span><span id="line-1029"></span><span>       </span><span class="hs-comment">-- GHC.HsToCore.Quote does not handle ApplicativeDo.</span><span>
</span><span id="line-1030"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681359087"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359087"><span class="hs-identifier hs-var">in_th_bracket</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ThStage -&gt; Bool
</span><a href="GHC.Tc.Utils.Env.html#isBrackStage"><span class="hs-identifier hs-var">isBrackStage</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcM ThStage
</span><a href="GHC.Tc.Utils.Monad.html#getStage"><span class="hs-identifier hs-var">getStage</span></a></span><span>
</span><span id="line-1031"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359091"><span class="hs-identifier hs-var">ado_is_on</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359089"><span class="hs-identifier hs-var">is_do_expr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681359087"><span class="hs-identifier hs-var">in_th_bracket</span></a></span><span>
</span><span id="line-1032"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ppsfa&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681359092"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1033"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [(ExprLStmt GhcRn, FreeVars)]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rearrangeForApplicativeDo"><span class="hs-identifier hs-var">rearrangeForApplicativeDo</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359093"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681359092"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1034"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
HsStmtContext GhcRn
-&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#noPostProcessStmts"><span class="hs-identifier hs-var">noPostProcessStmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359093"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681359092"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span class="hs-comment">-- | strip the FreeVars annotations from statements</span><span>
</span><span id="line-1037"></span><span id="local-6989586621681360589"><span class="annot"><a href="GHC.Rename.Expr.html#noPostProcessStmts"><span class="hs-identifier hs-type">noPostProcessStmts</span></a></span><span>
</span><span id="line-1038"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1039"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360589"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1040"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360589"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1041"></span><span id="noPostProcessStmts"><span class="annot"><span class="annottext">noPostProcessStmts :: forall (body :: * -&gt; *).
HsStmtContext GhcRn
-&gt; [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; RnM ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#noPostProcessStmts"><span class="hs-identifier hs-var hs-var">noPostProcessStmts</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681359081"><span class="annot"><span class="annottext">[(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
</span><a href="#local-6989586621681359081"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
</span><a href="#local-6989586621681359081"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span id="local-6989586621681360585"><span id="local-6989586621681360586"><span class="annot"><a href="GHC.Rename.Expr.html#rnStmtsWithFreeVars"><span class="hs-identifier hs-type">rnStmtsWithFreeVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360586"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1045"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1046"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360586"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360586"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1047"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360586"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1048"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360585"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360586"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681360585"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1050"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1051"></span><span class="hs-comment">-- Each Stmt body is annotated with its FreeVars, so that</span><span>
</span><span id="line-1052"></span><span class="hs-comment">-- we can rearrange statements for ApplicativeDo.</span><span>
</span><span id="line-1053"></span><span class="hs-comment">--</span><span>
</span><span id="line-1054"></span><span class="hs-comment">-- Variables bound by the Stmts, and mentioned in thing_inside,</span><span>
</span><span id="line-1055"></span><span class="hs-comment">-- do not appear in the result FreeVars</span><span>
</span><span id="line-1056"></span><span>
</span><span id="line-1057"></span><span id="rnStmtsWithFreeVars"><span class="annot"><span class="annottext">rnStmtsWithFreeVars :: forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmtsWithFreeVars"><span class="hs-identifier hs-var hs-var">rnStmtsWithFreeVars</span></a></span></span><span> </span><span id="local-6989586621681359052"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359052"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681359051"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359051"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1058"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkEmptyStmts"><span class="hs-identifier hs-var">checkEmptyStmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359052"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1059"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359049"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359049"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359048"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359048"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359051"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1060"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359049"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359048"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1061"></span><span>
</span><span id="line-1062"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmtsWithFreeVars"><span class="hs-identifier hs-var">rnStmtsWithFreeVars</span></a></span><span> </span><span id="local-6989586621681359047"><span class="annot"><span class="annottext">mDoExpr :: HsStmtContext GhcRn
</span><a href="#local-6989586621681359047"><span class="hs-identifier hs-var">mDoExpr</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MDoExpr"><span class="hs-identifier hs-type">MDoExpr</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span id="local-6989586621681359045"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359045"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span id="local-6989586621681359044"><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359044"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681359043"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359043"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>    </span><span class="hs-comment">-- Deal with mdo</span><span>
</span><span id="line-1063"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Behave like do { rec { ...all but last... }; last }</span><span>
</span><span id="line-1064"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681359042"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359042"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359041"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359041"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359040"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359040"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359039"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359039"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359047"><span class="hs-identifier hs-var">mDoExpr</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359045"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (idL :: Pass) bodyR.
(Anno
   [GenLocated
      (Anno (StmtLR (GhcPass idL) GhcPs bodyR))
      (StmtLR (GhcPass idL) GhcPs bodyR)]
 ~ SrcSpanAnnL) =&gt;
EpAnn AnnList
-&gt; LocatedL [LStmtLR (GhcPass idL) GhcPs bodyR]
-&gt; StmtLR (GhcPass idL) GhcPs bodyR
</span><a href="GHC.Hs.Utils.html#mkRecStmt"><span class="hs-identifier hs-var">mkRecStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedAn
   AnnListItem (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621681359036"><span class="hs-identifier hs-var">all_but_last</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1066"></span><span>              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359035"><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
  (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><a href="#local-6989586621681359035"><span class="hs-identifier hs-var">last_stmt'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LStmt GhcPs (LocatedA (body GhcPs)))
</span><a href="GHC.Rename.Expr.html#checkLastStmt"><span class="hs-identifier hs-var">checkLastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359047"><span class="hs-identifier hs-var">mDoExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedAn AnnListItem (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><a href="#local-6989586621681359033"><span class="hs-identifier hs-var">last_stmt</span></a></span><span>
</span><span id="line-1067"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359047"><span class="hs-identifier hs-var">mDoExpr</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359045"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
  (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><a href="#local-6989586621681359035"><span class="hs-identifier hs-var">last_stmt'</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359043"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359042"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359041"><span class="hs-identifier hs-var">stmts2</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359040"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359039"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1069"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1070"></span><span>    </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359036"><span class="annot"><span class="annottext">[LocatedAn
   AnnListItem (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621681359036"><span class="hs-identifier hs-var">all_but_last</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359033"><span class="annot"><span class="annottext">LocatedAn AnnListItem (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><a href="#local-6989586621681359033"><span class="hs-identifier hs-var">last_stmt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe ([a], a)
</span><a href="GHC.Utils.Misc.html#snocView"><span class="hs-identifier hs-var">snocView</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359044"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmtsWithFreeVars"><span class="hs-identifier hs-var">rnStmtsWithFreeVars</span></a></span><span> </span><span id="local-6989586621681359031"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359031"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681359030"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359030"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359029"><span class="annot"><span class="annottext">lstmt :: LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681359029"><span class="hs-identifier hs-var">lstmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681359028"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359028"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681359027"><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359027"><span class="hs-identifier hs-var">lstmts</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681359026"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359026"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1073"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359027"><span class="hs-identifier hs-var">lstmts</span></a></span><span>
</span><span id="line-1074"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359028"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1075"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681359024"><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
  (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><a href="#local-6989586621681359024"><span class="hs-identifier hs-var">lstmt'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LStmt GhcPs (LocatedA (body GhcPs)))
</span><a href="GHC.Rename.Expr.html#checkLastStmt"><span class="hs-identifier hs-var">checkLastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359031"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681359029"><span class="hs-identifier hs-var">lstmt</span></a></span><span>
</span><span id="line-1076"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359031"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359030"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
  (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><a href="#local-6989586621681359024"><span class="hs-identifier hs-var">lstmt'</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359026"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1079"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681359023"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359023"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681359022"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359022"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359021"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359021"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681359020"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359020"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1080"></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681359028"><span class="hs-identifier hs-var">loc</span></a></span><span>                  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1081"></span><span>               </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
HsStmtContext GhcRn
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkStmt"><span class="hs-identifier hs-var">checkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359031"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681359029"><span class="hs-identifier hs-var">lstmt</span></a></span><span>
</span><span id="line-1082"></span><span>                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359031"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359030"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681359029"><span class="hs-identifier hs-var">lstmt</span></a></span><span>    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681359018"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681359018"><span class="hs-identifier hs-var">bndrs1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1083"></span><span>                    </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmtsWithFreeVars"><span class="hs-identifier hs-var">rnStmtsWithFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681359031"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681359030"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681359027"><span class="hs-identifier hs-var">lstmts</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681359017"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681359017"><span class="hs-identifier hs-var">bndrs2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1084"></span><span>                    </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681359026"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681359018"><span class="hs-identifier hs-var">bndrs1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681359017"><span class="hs-identifier hs-var">bndrs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1085"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359023"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681359022"><span class="hs-identifier hs-var">stmts2</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681359021"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681359020"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1086"></span><span>
</span><span id="line-1087"></span><span class="hs-comment">----------------------</span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span class="hs-comment">{-
Note [Failing pattern matches in Stmts]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Many things desugar to HsStmts including monadic things like `do` and `mdo`
statements, pattern guards, and list comprehensions (see 'HsStmtContext' for an
exhaustive list). How we deal with pattern match failure is context-dependent.

 * In the case of list comprehensions and pattern guards we don't need any
   'fail' function; the desugarer ignores the fail function of 'BindStmt'
   entirely. So, for list comprehensions, the fail function is set to 'Nothing'
   for clarity.

* In the case of monadic contexts (e.g. monad comprehensions, do, and mdo
   expressions) we want pattern match failure to be desugared to the
   'fail' function (from MonadFail type class).

At one point we failed to make this distinction, leading to #11216.
-}</span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span id="local-6989586621681360575"><span id="local-6989586621681360576"><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-type">rnStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360576"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1110"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1111"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360576"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360576"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>          </span><span class="hs-comment">-- ^ How to rename the body of the statement</span><span>
</span><span id="line-1113"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360576"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1114"></span><span>          </span><span class="hs-comment">-- ^ The statement</span><span>
</span><span id="line-1115"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360575"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1116"></span><span>          </span><span class="hs-comment">-- ^ Rename the stuff that this statement scopes over</span><span>
</span><span id="line-1117"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360576"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681360575"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1119"></span><span class="hs-comment">-- Variables bound by the Stmt, and mentioned in thing_inside,</span><span>
</span><span id="line-1120"></span><span class="hs-comment">-- do not appear in the result FreeVars</span><span>
</span><span id="line-1121"></span><span>
</span><span id="line-1122"></span><span id="rnStmt"><span class="annot"><span class="annottext">rnStmt :: forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM
     (([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)], thing),
      FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var hs-var">rnStmt</span></a></span></span><span> </span><span id="local-6989586621681358958"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358958"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358957"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358957"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358956"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358956"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358955"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358955"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681358954"><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358954"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358953"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681358953"><span class="hs-identifier hs-var">noret</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358952"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358952"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1123"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358951"><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358951"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358950"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358950"><span class="hs-identifier hs-var">fv_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358957"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358954"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1124"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358949"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358949"><span class="hs-identifier hs-var">ret_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358948"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358948"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall id. HsStmtContext id -&gt; Bool
</span><a href="Language.Haskell.Syntax.Expr.html#isMonadCompContext"><span class="hs-identifier hs-var">isMonadCompContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358958"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1125"></span><span>                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358958"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-1126"></span><span>                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). IsPass p =&gt; SyntaxExpr (GhcPass p)
</span><a href="GHC.Hs.Expr.html#noSyntaxExpr"><span class="hs-identifier hs-var">noSyntaxExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span>                            </span><span class="hs-comment">-- The 'return' in a LastStmt is used only</span><span>
</span><span id="line-1128"></span><span>                            </span><span class="hs-comment">-- for MonadComp; and we don't want to report</span><span>
</span><span id="line-1129"></span><span>                            </span><span class="hs-comment">-- &quot;non in scope: return&quot; in other cases</span><span>
</span><span id="line-1130"></span><span>                            </span><span class="hs-comment">-- #15607</span><span>
</span><span id="line-1131"></span><span>
</span><span id="line-1132"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358943"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358943"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681358942"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358942"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358952"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1133"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358956"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLastStmt idL idR body
-&gt; body -&gt; Maybe Bool -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-var">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358955"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358951"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681358953"><span class="hs-identifier hs-var">noret</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358949"><span class="hs-identifier hs-var">ret_op</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358950"><span class="hs-identifier hs-var">fv_expr</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1134"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358943"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358950"><span class="hs-identifier hs-var">fv_expr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358948"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358942"><span class="hs-identifier hs-var">fvs3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1135"></span><span>
</span><span id="line-1136"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span id="local-6989586621681358941"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358941"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358940"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358940"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358939"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358939"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358938"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358938"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681358937"><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358937"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358936"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358936"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1137"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358935"><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358935"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358934"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358934"><span class="hs-identifier hs-var">fv_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358940"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358937"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1138"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358933"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358933"><span class="hs-identifier hs-var">then_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358932"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358932"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358941"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#thenMName"><span class="hs-identifier hs-var">thenMName</span></a></span><span>
</span><span id="line-1139"></span><span>
</span><span id="line-1140"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358929"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358929"><span class="hs-identifier hs-var">guard_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358928"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358928"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall id. HsStmtContext id -&gt; Bool
</span><a href="Language.Haskell.Syntax.Expr.html#isComprehensionContext"><span class="hs-identifier hs-var">isComprehensionContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358941"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1141"></span><span>                              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358941"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#guardMName"><span class="hs-identifier hs-var">guardMName</span></a></span><span>
</span><span id="line-1142"></span><span>                              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). IsPass p =&gt; SyntaxExpr (GhcPass p)
</span><a href="GHC.Hs.Expr.html#noSyntaxExpr"><span class="hs-identifier hs-var">noSyntaxExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1143"></span><span>                              </span><span class="hs-comment">-- Only list/monad comprehensions use 'guard'</span><span>
</span><span id="line-1144"></span><span>                              </span><span class="hs-comment">-- Also for sub-stmts of same eg [ e | x&lt;-xs, gd | blah ]</span><span>
</span><span id="line-1145"></span><span>                              </span><span class="hs-comment">-- Here &quot;gd&quot; is a guard</span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358925"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358925"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358924"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358924"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358936"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1148"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358939"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBodyStmt idL idR body
-&gt; body -&gt; SyntaxExpr idR -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-var">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358938"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358935"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358933"><span class="hs-identifier hs-var">then_op</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358929"><span class="hs-identifier hs-var">guard_op</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358934"><span class="hs-identifier hs-var">fv_expr</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1149"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358925"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358934"><span class="hs-identifier hs-var">fv_expr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358932"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358928"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358924"><span class="hs-identifier hs-var">fvs3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1150"></span><span>
</span><span id="line-1151"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span id="local-6989586621681358923"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358923"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358922"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358922"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358921"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358921"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358920"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681358920"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358919"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358919"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681358918"><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358918"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358917"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358917"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1152"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358916"><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358916"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358915"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358915"><span class="hs-identifier hs-var">fv_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358922"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358918"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1153"></span><span>                </span><span class="hs-comment">-- The binders do not scope over the expression</span><span>
</span><span id="line-1154"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358914"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358914"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358913"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358913"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358923"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#bindMName"><span class="hs-identifier hs-var">bindMName</span></a></span><span>
</span><span id="line-1155"></span><span>
</span><span id="line-1156"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358911"><span class="annot"><span class="annottext">Maybe SyntaxExprRn
</span><a href="#local-6989586621681358911"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358910"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358910"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
-&gt; HsStmtContext GhcRn -&gt; RnM (FailOperator GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#monadFailOp"><span class="hs-identifier hs-var">monadFailOp</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681358920"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358923"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1157"></span><span>
</span><span id="line-1158"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a.
HsMatchContext GhcRn
-&gt; LPat GhcPs
-&gt; (LPat GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#rnPat"><span class="hs-identifier hs-var">rnPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#StmtCtxt"><span class="hs-identifier hs-var">StmtCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358923"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681358920"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358907"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358907"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1159"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358906"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358906"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358905"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358905"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358917"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. CollectPass p =&gt; CollectFlag p -&gt; LPat p -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectPatBinders"><span class="hs-identifier hs-var">collectPatBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358907"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358902"><span class="annot"><span class="annottext">xbsrn :: XBindStmtRn
</span><a href="#local-6989586621681358902"><span class="hs-identifier hs-var hs-var">xbsrn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#XBindStmtRn"><span class="hs-identifier hs-type">XBindStmtRn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xbsrn_bindOp :: SyntaxExpr GhcRn
</span><a href="GHC.Hs.Expr.html#xbsrn_bindOp"><span class="hs-identifier hs-var">xbsrn_bindOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358914"><span class="hs-identifier hs-var">bind_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbsrn_failOp :: FailOperator GhcRn
</span><a href="GHC.Hs.Expr.html#xbsrn_failOp"><span class="hs-identifier hs-var">xbsrn_failOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprRn
</span><a href="#local-6989586621681358911"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1161"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358921"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBindStmt idL idR body -&gt; LPat idL -&gt; body -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-var">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmtRn
</span><a href="#local-6989586621681358902"><span class="hs-identifier hs-var">xbsrn</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358907"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358919"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358916"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358915"><span class="hs-identifier hs-var">fv_expr</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1162"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358906"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1163"></span><span>                  </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358915"><span class="hs-identifier hs-var">fv_expr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358913"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358910"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358905"><span class="hs-identifier hs-var">fvs3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1164"></span><span>       </span><span class="hs-comment">-- fv_expr shouldn't really be filtered by the rnPatsAndThen</span><span>
</span><span id="line-1165"></span><span>        </span><span class="hs-comment">-- but it does not matter because the names are unique</span><span>
</span><span id="line-1166"></span><span>
</span><span id="line-1167"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358898"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358898"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358897"><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681358897"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358896"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358896"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1168"></span><span>  </span><span class="hs-glyph">=</span><span>     </span><span class="annot"><span class="annottext">forall result.
HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcRn -&gt; FreeVars -&gt; RnM (result, FreeVars))
-&gt; RnM (result, FreeVars)
</span><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var">rnLocalBindsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681358897"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681358895"><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681358895"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span id="local-6989586621681358894"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358894"><span class="hs-identifier hs-var">bind_fvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1169"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358893"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358893"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358892"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358892"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358896"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass).
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; HsLocalBindsLR (GhcPass idL) (GhcPass idR)
-&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectLocalBinders"><span class="hs-identifier hs-var">collectLocalBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681358895"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1170"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358898"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLetStmt idL idR body
-&gt; HsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621681358895"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358894"><span class="hs-identifier hs-var">bind_fvs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358893"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1171"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358892"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1172"></span><span>
</span><span id="line-1173"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span id="local-6989586621681358890"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358890"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358889"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358889"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358888"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358888"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: forall idL idR body.
StmtLR idL idR body -&gt; XRec idR [LStmtLR idL idR body]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358887"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621681358887"><span class="hs-identifier hs-var">rec_stmts</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358886"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358886"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1174"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358885"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358885"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358884"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358884"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358890"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-1175"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358883"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358883"><span class="hs-identifier hs-var">mfix_op</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621681358882"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358882"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358890"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#mfixName"><span class="hs-identifier hs-var">mfixName</span></a></span><span>
</span><span id="line-1176"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358880"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358880"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621681358879"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358879"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358890"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#bindMName"><span class="hs-identifier hs-var">bindMName</span></a></span><span>
</span><span id="line-1177"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358878"><span class="annot"><span class="annottext">empty_rec_stmt :: StmtLR GhcRn GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358878"><span class="hs-identifier hs-var hs-var">empty_rec_stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall bodyR.
(Anno
   [GenLocated
      (Anno (StmtLR GhcRn GhcRn bodyR)) (StmtLR GhcRn GhcRn bodyR)]
 ~ SrcSpanAnnL) =&gt;
StmtLR GhcRn GhcRn bodyR
</span><a href="GHC.Hs.Utils.html#emptyRecStmtName"><span class="hs-identifier hs-var">emptyRecStmtName</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_ret_fn :: SyntaxExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358885"><span class="hs-identifier hs-var">return_op</span></a></span><span>
</span><span id="line-1178"></span><span>                                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_mfix_fn :: SyntaxExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358883"><span class="hs-identifier hs-var">mfix_op</span></a></span><span>
</span><span id="line-1179"></span><span>                                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_bind_fn :: SyntaxExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358880"><span class="hs-identifier hs-var">bind_op</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span>        </span><span class="hs-comment">-- Step1: Bring all the binders of the mdo into scope</span><span>
</span><span id="line-1182"></span><span>        </span><span class="hs-comment">-- (Remember that this also removes the binders from the</span><span>
</span><span id="line-1183"></span><span>        </span><span class="hs-comment">-- finally-returned free-vars.)</span><span>
</span><span id="line-1184"></span><span>        </span><span class="hs-comment">-- And rename each individual stmt, making a</span><span>
</span><span id="line-1185"></span><span>        </span><span class="hs-comment">-- singleton segment.  At this stage the FwdRefs field</span><span>
</span><span id="line-1186"></span><span>        </span><span class="hs-comment">-- isn't finished: it's empty for all except a BindStmt</span><span>
</span><span id="line-1187"></span><span>        </span><span class="hs-comment">-- for which it's the fwd refs within the bind itself</span><span>
</span><span id="line-1188"></span><span>        </span><span class="hs-comment">-- (This set may not be empty, because we're in a recursive</span><span>
</span><span id="line-1189"></span><span>        </span><span class="hs-comment">-- context.)</span><span>
</span><span id="line-1190"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) a.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
    -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnRecStmtsAndThen"><span class="hs-identifier hs-var">rnRecStmtsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358890"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358889"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621681358887"><span class="hs-identifier hs-var">rec_stmts</span></a></span><span>   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358872"><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358872"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1191"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358871"><span class="annot"><span class="annottext">bndrs :: [Name]
</span><a href="#local-6989586621681358871"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1192"></span><span>                        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-identifier hs-var">unionNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681358868"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358868"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn)))
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358868"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span><span>                              </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span>
</span><span id="line-1194"></span><span>                              </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358872"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1195"></span><span>          </span><span class="hs-comment">-- See Note [Deterministic ApplicativeDo and RecursiveDo desugaring]</span><span>
</span><span id="line-1196"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358867"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358867"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358866"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358866"><span class="hs-identifier hs-var">fvs_later</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358886"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358871"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1197"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358865"><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358865"><span class="hs-identifier hs-var">rec_stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358864"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358864"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
SrcSpan
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcRn (LocatedA (body GhcRn))
-&gt; [Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
-&gt; FreeVars
-&gt; ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#segmentRecStmts"><span class="hs-identifier hs-var">segmentRecStmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358888"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358890"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">StmtLR GhcRn GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358878"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358872"><span class="hs-identifier hs-var">segs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358866"><span class="hs-identifier hs-var">fvs_later</span></a></span><span>
</span><span id="line-1198"></span><span>        </span><span class="hs-comment">-- We aren't going to try to group RecStmts with</span><span>
</span><span id="line-1199"></span><span>        </span><span class="hs-comment">-- ApplicativeDo, so attaching empty FVs is fine.</span><span>
</span><span id="line-1200"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358865"><span class="hs-identifier hs-var">rec_stmts'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#repeat"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358867"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1201"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358864"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358884"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358882"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358879"><span class="hs-identifier hs-var">fvs3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span id="local-6989586621681358860"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358860"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358859"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358859"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358858"><span class="annot"><span class="annottext">[ParStmtBlock GhcPs GhcPs]
</span><a href="#local-6989586621681358858"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358857"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358857"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1204"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358856"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358856"><span class="hs-identifier hs-var">mzip_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358855"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358855"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtNamePoly"><span class="hs-identifier hs-var">lookupStmtNamePoly</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358860"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#mzipName"><span class="hs-identifier hs-var">mzipName</span></a></span><span>
</span><span id="line-1205"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358852"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358852"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358851"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358851"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358860"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#bindMName"><span class="hs-identifier hs-var">bindMName</span></a></span><span>
</span><span id="line-1206"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358850"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358850"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358849"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358849"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358860"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-1207"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358848"><span class="annot"><span class="annottext">[ParStmtBlock GhcRn GhcRn]
</span><a href="#local-6989586621681358848"><span class="hs-identifier hs-var">segs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358847"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358847"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358846"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358846"><span class="hs-identifier hs-var">fvs4</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall thing.
HsStmtContext GhcRn
-&gt; SyntaxExpr GhcRn
-&gt; [ParStmtBlock GhcPs GhcPs]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([ParStmtBlock GhcRn GhcRn], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnParallelStmts"><span class="hs-identifier hs-var">rnParallelStmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; HsStmtContext p
</span><a href="Language.Haskell.Syntax.Expr.html#ParStmtCtxt"><span class="hs-identifier hs-var">ParStmtCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358860"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358850"><span class="hs-identifier hs-var">return_op</span></a></span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcPs GhcPs]
</span><a href="#local-6989586621681358858"><span class="hs-identifier hs-var">segs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358857"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-1208"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358859"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XParStmt idL idR body
-&gt; [ParStmtBlock idL idR]
-&gt; HsExpr idR
-&gt; SyntaxExpr idR
-&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-var">ParStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcRn GhcRn]
</span><a href="#local-6989586621681358848"><span class="hs-identifier hs-var">segs'</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358856"><span class="hs-identifier hs-var">mzip_op</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358852"><span class="hs-identifier hs-var">bind_op</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358846"><span class="hs-identifier hs-var">fvs4</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358847"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1209"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358855"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358851"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358849"><span class="hs-identifier hs-var">fvs3</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358846"><span class="hs-identifier hs-var">fvs4</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1210"></span><span>
</span><span id="line-1211"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span id="local-6989586621681358843"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358843"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358842"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358842"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: forall idL idR body. StmtLR idL idR body -&gt; [ExprLStmt idL]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681358840"><span class="annot"><span class="annottext">[ExprLStmt GhcPs]
</span><a href="#local-6989586621681358840"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: forall idL idR body. StmtLR idL idR body -&gt; Maybe (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681358838"><span class="annot"><span class="annottext">Maybe (LHsExpr GhcPs)
</span><a href="#local-6989586621681358838"><span class="hs-identifier hs-var">by</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: forall idL idR body. StmtLR idL idR body -&gt; TransForm
</span><a href="Language.Haskell.Syntax.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681358836"><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681358836"><span class="hs-identifier hs-var">form</span></a></span></span><span>
</span><span id="line-1212"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: forall idL idR body. StmtLR idL idR body -&gt; LHsExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681358834"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681358834"><span class="hs-identifier hs-var">using</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358833"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358833"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1213"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Rename the 'using' expression in the context before the transform is begun</span><span>
</span><span id="line-1214"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621681358832"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358832"><span class="hs-identifier hs-var">using'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358831"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358831"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621681358834"><span class="hs-identifier hs-var">using</span></a></span><span>
</span><span id="line-1215"></span><span>
</span><span id="line-1216"></span><span>         </span><span class="hs-comment">-- Rename the stmts and the 'by' expression</span><span>
</span><span id="line-1217"></span><span>         </span><span class="hs-comment">-- Keep track of the variables mentioned in the 'by' expression</span><span>
</span><span id="line-1218"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358830"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358830"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358829"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358829"><span class="hs-identifier hs-var">by'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358828"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358828"><span class="hs-identifier hs-var">used_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358827"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358827"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358826"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358826"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1219"></span><span>             </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier hs-var">rnStmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; HsStmtContext p
</span><a href="Language.Haskell.Syntax.Expr.html#TransStmtCtxt"><span class="hs-identifier hs-var">TransStmtCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358843"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcPs]
</span><a href="#local-6989586621681358840"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358824"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358824"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1220"></span><span>                </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358823"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358823"><span class="hs-identifier hs-var">by'</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621681358822"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358822"><span class="hs-identifier hs-var">fvs_by</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b.
(a -&gt; RnM (b, FreeVars)) -&gt; Maybe a -&gt; RnM (Maybe b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapMaybeFvRn"><span class="hs-identifier hs-var">mapMaybeFvRn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsExpr GhcPs)
</span><a href="#local-6989586621681358838"><span class="hs-identifier hs-var">by</span></a></span><span>
</span><span id="line-1221"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358821"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358821"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358820"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358820"><span class="hs-identifier hs-var">fvs_thing</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358833"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358824"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1222"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358819"><span class="annot"><span class="annottext">fvs :: FreeVars
</span><a href="#local-6989586621681358819"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358822"><span class="hs-identifier hs-var">fvs_by</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358820"><span class="hs-identifier hs-var">fvs_thing</span></a></span><span>
</span><span id="line-1223"></span><span>                         </span><span id="local-6989586621681358818"><span class="annot"><span class="annottext">used_bndrs :: [Name]
</span><a href="#local-6989586621681358818"><span class="hs-identifier hs-var hs-var">used_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358819"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358824"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1224"></span><span>                         </span><span class="hs-comment">-- The paper (Fig 5) has a bug here; we must treat any free variable</span><span>
</span><span id="line-1225"></span><span>                         </span><span class="hs-comment">-- of the &quot;thing inside&quot;, **or of the by-expression**, as used</span><span>
</span><span id="line-1226"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358823"><span class="hs-identifier hs-var">by'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358818"><span class="hs-identifier hs-var">used_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358821"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358819"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1227"></span><span>
</span><span id="line-1228"></span><span>       </span><span class="hs-comment">-- Lookup `return`, `(&gt;&gt;=)` and `liftM` for monad comprehensions</span><span>
</span><span id="line-1229"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358816"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358816"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358815"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358815"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358843"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-1230"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358814"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358814"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621681358813"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358813"><span class="hs-identifier hs-var">fvs4</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358843"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#bindMName"><span class="hs-identifier hs-var">bindMName</span></a></span><span>
</span><span id="line-1231"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358812"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358812"><span class="hs-identifier hs-var">fmap_op</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621681358811"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358811"><span class="hs-identifier hs-var">fvs5</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681358836"><span class="hs-identifier hs-var">form</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1232"></span><span>                                </span><span class="annot"><span class="annottext">TransForm
</span><a href="Language.Haskell.Syntax.Expr.html#ThenForm"><span class="hs-identifier hs-var">ThenForm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). HsExpr (GhcPass p)
</span><a href="GHC.Hs.Expr.html#noExpr"><span class="hs-identifier hs-var">noExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1233"></span><span>                                </span><span class="annot"><span class="annottext">TransForm
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtNamePoly"><span class="hs-identifier hs-var">lookupStmtNamePoly</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358843"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fmapName"><span class="hs-identifier hs-var">fmapName</span></a></span><span>
</span><span id="line-1234"></span><span>
</span><span id="line-1235"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358807"><span class="annot"><span class="annottext">all_fvs :: FreeVars
</span><a href="#local-6989586621681358807"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358831"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358826"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358815"><span class="hs-identifier hs-var">fvs3</span></a></span><span>
</span><span id="line-1236"></span><span>                             </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358813"><span class="hs-identifier hs-var">fvs4</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358811"><span class="hs-identifier hs-var">fvs5</span></a></span><span>
</span><span id="line-1237"></span><span>             </span><span id="local-6989586621681358806"><span class="annot"><span class="annottext">bndr_map :: [(Name, Name)]
</span><a href="#local-6989586621681358806"><span class="hs-identifier hs-var hs-var">bndr_map</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358828"><span class="hs-identifier hs-var">used_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358828"><span class="hs-identifier hs-var">used_bndrs</span></a></span><span>
</span><span id="line-1238"></span><span>             </span><span class="hs-comment">-- See Note [TransStmt binder map] in GHC.Hs.Expr</span><span>
</span><span id="line-1239"></span><span>
</span><span id="line-1240"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnStmt: implicitly rebound these used binders:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Name)]
</span><a href="#local-6989586621681358806"><span class="hs-identifier hs-var">bndr_map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358842"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_ext :: XTransStmt GhcRn GhcRn (LocatedA (body GhcRn))
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1242"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: [ExprLStmt GhcRn]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358830"><span class="hs-identifier hs-var">stmts'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bndrs :: [(IdP GhcRn, IdP GhcRn)]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, Name)]
</span><a href="#local-6989586621681358806"><span class="hs-identifier hs-var">bndr_map</span></a></span><span>
</span><span id="line-1243"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: Maybe (XRec GhcRn (HsExpr GhcRn))
</span><a href="Language.Haskell.Syntax.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358829"><span class="hs-identifier hs-var">by'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: XRec GhcRn (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358832"><span class="hs-identifier hs-var">using'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: TransForm
</span><a href="Language.Haskell.Syntax.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681358836"><span class="hs-identifier hs-var">form</span></a></span><span>
</span><span id="line-1244"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ret :: SyntaxExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358816"><span class="hs-identifier hs-var">return_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bind :: SyntaxExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358814"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1245"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_fmap :: HsExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358812"><span class="hs-identifier hs-var">fmap_op</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358826"><span class="hs-identifier hs-var">fvs2</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358827"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358807"><span class="hs-identifier hs-var">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1246"></span><span>
</span><span id="line-1247"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmt"><span class="hs-identifier hs-var">rnStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1248"></span><span>  </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnStmt: ApplicativeStmt&quot;</span></span><span>
</span><span id="line-1249"></span><span>
</span><span id="line-1250"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnParallelStmts"><span class="hs-identifier hs-type">rnParallelStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681360537"><span class="annot"><a href="#local-6989586621681360537"><span class="hs-identifier hs-type">thing</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1251"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1252"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1253"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360537"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1254"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681360537"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1255"></span><span class="hs-comment">-- Note [Renaming parallel Stmts]</span><span>
</span><span id="line-1256"></span><span id="rnParallelStmts"><span class="annot"><span class="annottext">rnParallelStmts :: forall thing.
HsStmtContext GhcRn
-&gt; SyntaxExpr GhcRn
-&gt; [ParStmtBlock GhcPs GhcPs]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([ParStmtBlock GhcRn GhcRn], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnParallelStmts"><span class="hs-identifier hs-var hs-var">rnParallelStmts</span></a></span></span><span> </span><span id="local-6989586621681358787"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358787"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358786"><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621681358786"><span class="hs-identifier hs-var">return_op</span></a></span></span><span> </span><span id="local-6989586621681358785"><span class="annot"><span class="annottext">[ParStmtBlock GhcPs GhcPs]
</span><a href="#local-6989586621681358785"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span id="local-6989586621681358784"><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358784"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1257"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681358783"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681358783"><span class="hs-identifier hs-var">orig_lcl_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM LocalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getLocalRdrEnv"><span class="hs-identifier hs-var">getLocalRdrEnv</span></a></span><span>
</span><span id="line-1258"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
-&gt; [Name]
-&gt; [ParStmtBlock GhcPs GhcPs]
-&gt; RnM (([ParStmtBlock GhcRn GhcRn], thing), FreeVars)
</span><a href="#local-6989586621681358781"><span class="hs-identifier hs-var">rn_segs</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681358783"><span class="hs-identifier hs-var">orig_lcl_env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcPs GhcPs]
</span><a href="#local-6989586621681358785"><span class="hs-identifier hs-var">segs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1259"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1260"></span><span>    </span><span class="annot"><a href="#local-6989586621681358781"><span class="hs-identifier hs-type">rn_segs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span>
</span><span id="line-1261"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1262"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681360537"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1263"></span><span>    </span><span id="local-6989586621681358781"><span class="annot"><span class="annottext">rn_segs :: LocalRdrEnv
-&gt; [Name]
-&gt; [ParStmtBlock GhcPs GhcPs]
-&gt; RnM (([ParStmtBlock GhcRn GhcRn], thing), FreeVars)
</span><a href="#local-6989586621681358781"><span class="hs-identifier hs-var hs-var">rn_segs</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358780"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358780"><span class="hs-identifier hs-var">bndrs_so_far</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1264"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358779"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358779"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358778"><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621681358778"><span class="hs-identifier hs-var">dups</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Ordering
</span><a href="#local-6989586621681358777"><span class="hs-identifier hs-var">cmpByOcc</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358780"><span class="hs-identifier hs-var">bndrs_so_far</span></a></span><span>
</span><span id="line-1265"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}.
Outputable a =&gt;
NonEmpty a -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621681358775"><span class="hs-identifier hs-var">dupErr</span></a></span><span> </span><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621681358778"><span class="hs-identifier hs-var">dups</span></a></span><span>
</span><span id="line-1266"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358774"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358774"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358773"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358773"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-var">bindLocalNames</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358779"><span class="hs-identifier hs-var">bndrs'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; RnM (thing, FreeVars)
</span><a href="#local-6989586621681358784"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358779"><span class="hs-identifier hs-var">bndrs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358774"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358773"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span>    </span><span class="annot"><a href="#local-6989586621681358781"><span class="hs-identifier hs-var">rn_segs</span></a></span><span> </span><span id="local-6989586621681358772"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681358772"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681358771"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358771"><span class="hs-identifier hs-var">bndrs_so_far</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span id="local-6989586621681358769"><span class="annot"><span class="annottext">XParStmtBlock GhcPs GhcPs
</span><a href="#local-6989586621681358769"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681358768"><span class="annot"><span class="annottext">[ExprLStmt GhcPs]
</span><a href="#local-6989586621681358768"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="annot"><span class="annottext">[IdP GhcPs]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358767"><span class="annot"><span class="annottext">[ParStmtBlock GhcPs GhcPs]
</span><a href="#local-6989586621681358767"><span class="hs-identifier hs-var">segs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358766"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358766"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358765"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358765"><span class="hs-identifier hs-var">used_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358764"><span class="annot"><span class="annottext">[ParStmtBlock GhcRn GhcRn]
</span><a href="#local-6989586621681358764"><span class="hs-identifier hs-var">segs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358763"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358763"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358762"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358762"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1271"></span><span>                    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *) thing.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Name] -&gt; RnM (thing, FreeVars))
-&gt; RnM (([LStmt GhcRn (LocatedA (body GhcRn))], thing), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier hs-var">rnStmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358787"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-var">rnExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcPs]
</span><a href="#local-6989586621681358768"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358761"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358761"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1272"></span><span>                       </span><span class="annot"><span class="annottext">forall a. LocalRdrEnv -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Tc.Utils.Monad.html#setLocalRdrEnv"><span class="hs-identifier hs-var">setLocalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681358772"><span class="hs-identifier hs-var">env</span></a></span><span>       </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1273"></span><span>                       </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358759"><span class="annot"><span class="annottext">[ParStmtBlock GhcRn GhcRn]
</span><a href="#local-6989586621681358759"><span class="hs-identifier hs-var">segs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358758"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358758"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358757"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358757"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
-&gt; [Name]
-&gt; [ParStmtBlock GhcPs GhcPs]
-&gt; RnM (([ParStmtBlock GhcRn GhcRn], thing), FreeVars)
</span><a href="#local-6989586621681358781"><span class="hs-identifier hs-var">rn_segs</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621681358772"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358761"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358771"><span class="hs-identifier hs-var">bndrs_so_far</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcPs GhcPs]
</span><a href="#local-6989586621681358767"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1274"></span><span>                       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358756"><span class="annot"><span class="annottext">used_bndrs :: [Name]
</span><a href="#local-6989586621681358756"><span class="hs-identifier hs-var hs-var">used_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358757"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358761"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1275"></span><span>                       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358756"><span class="hs-identifier hs-var">used_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcRn GhcRn]
</span><a href="#local-6989586621681358759"><span class="hs-identifier hs-var">segs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358758"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358757"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1276"></span><span>
</span><span id="line-1277"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358755"><span class="annot"><span class="annottext">seg' :: ParStmtBlock GhcRn GhcRn
</span><a href="#local-6989586621681358755"><span class="hs-identifier hs-var hs-var">seg'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall idL idR.
XParStmtBlock idL idR
-&gt; [ExprLStmt idL]
-&gt; [IdP idR]
-&gt; SyntaxExpr idR
-&gt; ParStmtBlock idL idR
</span><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-var">ParStmtBlock</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmtBlock GhcPs GhcPs
</span><a href="#local-6989586621681358769"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358766"><span class="hs-identifier hs-var">stmts'</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358765"><span class="hs-identifier hs-var">used_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621681358786"><span class="hs-identifier hs-var">return_op</span></a></span><span>
</span><span id="line-1278"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParStmtBlock GhcRn GhcRn
</span><a href="#local-6989586621681358755"><span class="hs-identifier hs-var">seg'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[ParStmtBlock GhcRn GhcRn]
</span><a href="#local-6989586621681358764"><span class="hs-identifier hs-var">segs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621681358763"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358762"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1279"></span><span>
</span><span id="line-1280"></span><span>    </span><span id="local-6989586621681358777"><span class="annot"><span class="annottext">cmpByOcc :: Name -&gt; Name -&gt; Ordering
</span><a href="#local-6989586621681358777"><span class="hs-identifier hs-var hs-var">cmpByOcc</span></a></span></span><span> </span><span id="local-6989586621681358752"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358752"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span id="local-6989586621681358751"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358751"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358752"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358751"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-1281"></span><span>    </span><span id="local-6989586621681358775"><span class="annot"><span class="annottext">dupErr :: NonEmpty a -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621681358775"><span class="hs-identifier hs-var hs-var">dupErr</span></a></span></span><span> </span><span id="local-6989586621681358746"><span class="annot"><span class="annottext">NonEmpty a
</span><a href="#local-6989586621681358746"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Duplicate binding in parallel list comprehension for:&quot;</span></span><span>
</span><span id="line-1282"></span><span>                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-List-NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty a
</span><a href="#local-6989586621681358746"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1283"></span><span>
</span><span id="line-1284"></span><span class="annot"><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-type">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1285"></span><span class="hs-comment">-- Like lookupStmtName, but respects QualifiedDo</span><span>
</span><span id="line-1286"></span><span id="lookupQualifiedDoStmtName"><span class="annot"><span class="annottext">lookupQualifiedDoStmtName :: HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var hs-var">lookupQualifiedDoStmtName</span></a></span></span><span> </span><span id="local-6989586621681358743"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358743"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358742"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358742"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-1287"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; Maybe ModuleName
</span><a href="Language.Haskell.Syntax.Expr.html#qualifiedDoModuleName_maybe"><span class="hs-identifier hs-var">qualifiedDoModuleName_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358743"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1288"></span><span>      </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var">lookupStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358743"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358742"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1289"></span><span>      </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681358740"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681358740"><span class="hs-identifier hs-var">modName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1290"></span><span>        </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (b, d) (c, d)
</span><a href="../../base-4.16.4.0/src/Control-Arrow.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; SyntaxExprRn
</span><a href="GHC.Hs.Expr.html#mkSyntaxExpr"><span class="hs-identifier hs-var">mkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; HsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nl_HsVar"><span class="hs-identifier hs-var">nl_HsVar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; ModuleName -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupNameWithQualifier"><span class="hs-identifier hs-var">lookupNameWithQualifier</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358742"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681358740"><span class="hs-identifier hs-var">modName</span></a></span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span class="annot"><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-type">lookupStmtName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1293"></span><span class="hs-comment">-- Like lookupSyntax, but respects contexts</span><span>
</span><span id="line-1294"></span><span id="lookupStmtName"><span class="annot"><span class="annottext">lookupStmtName :: HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtName"><span class="hs-identifier hs-var hs-var">lookupStmtName</span></a></span></span><span> </span><span id="local-6989586621681358736"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358736"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358735"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358735"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#rebindableContext"><span class="hs-identifier hs-var">rebindableContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358736"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1296"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-var">lookupSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358735"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1297"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1298"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SyntaxExprRn
</span><a href="GHC.Hs.Expr.html#mkRnSyntaxExpr"><span class="hs-identifier hs-var">mkRnSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358735"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1299"></span><span>
</span><span id="line-1300"></span><span class="annot"><a href="GHC.Rename.Expr.html#lookupStmtNamePoly"><span class="hs-identifier hs-type">lookupStmtNamePoly</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1301"></span><span id="lookupStmtNamePoly"><span class="annot"><span class="annottext">lookupStmtNamePoly :: HsStmtContext GhcRn -&gt; Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupStmtNamePoly"><span class="hs-identifier hs-var hs-var">lookupStmtNamePoly</span></a></span></span><span> </span><span id="local-6989586621681358733"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358733"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358732"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358732"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1302"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#rebindableContext"><span class="hs-identifier hs-var">rebindableContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358733"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1303"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681358731"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358731"><span class="hs-identifier hs-var">rebindable_on</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RebindableSyntax</span></span><span>
</span><span id="line-1304"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358731"><span class="hs-identifier hs-var">rebindable_on</span></a></span><span>
</span><span id="line-1305"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681358730"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358730"><span class="hs-identifier hs-var">fm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Env.html#lookupOccRn"><span class="hs-identifier hs-var">lookupOccRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var">nameRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358732"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1306"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358730"><span class="hs-identifier hs-var">fm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358730"><span class="hs-identifier hs-var">fm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1307"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">RnM (HsExpr GhcRn, FreeVars)
</span><a href="#local-6989586621681358728"><span class="hs-identifier hs-var">not_rebindable</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1308"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1309"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnM (HsExpr GhcRn, FreeVars)
</span><a href="#local-6989586621681358728"><span class="hs-identifier hs-var">not_rebindable</span></a></span><span>
</span><span id="line-1310"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1311"></span><span>    </span><span id="local-6989586621681358728"><span class="annot"><span class="annottext">not_rebindable :: RnM (HsExpr GhcRn, FreeVars)
</span><a href="#local-6989586621681358728"><span class="hs-identifier hs-var hs-var">not_rebindable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358732"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1312"></span><span>
</span><span id="line-1313"></span><span class="hs-comment">-- | Is this a context where we respect RebindableSyntax?</span><span>
</span><span id="line-1314"></span><span class="hs-comment">-- but ListComp are never rebindable</span><span>
</span><span id="line-1315"></span><span class="hs-comment">-- Neither is ArrowExpr, which has its own desugarer in GHC.HsToCore.Arrows</span><span>
</span><span id="line-1316"></span><span class="annot"><a href="GHC.Rename.Expr.html#rebindableContext"><span class="hs-identifier hs-type">rebindableContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1317"></span><span id="rebindableContext"><span class="annot"><span class="annottext">rebindableContext :: HsStmtContext GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#rebindableContext"><span class="hs-identifier hs-var hs-var">rebindableContext</span></a></span></span><span> </span><span id="local-6989586621681358727"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358727"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358727"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1318"></span><span>  </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ListComp"><span class="hs-identifier hs-var">ListComp</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1319"></span><span>  </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowExpr"><span class="hs-identifier hs-var">ArrowExpr</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1320"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#PatGuard"><span class="hs-identifier hs-type">PatGuard</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DoExpr"><span class="hs-identifier hs-type">DoExpr</span></a></span><span> </span><span id="local-6989586621681358724"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621681358724"><span class="hs-identifier hs-var">m</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621681358724"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1323"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MDoExpr"><span class="hs-identifier hs-type">MDoExpr</span></a></span><span> </span><span id="local-6989586621681358723"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621681358723"><span class="hs-identifier hs-var">m</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621681358723"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1324"></span><span>  </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#MonadComp"><span class="hs-identifier hs-var">MonadComp</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1325"></span><span>  </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#GhciStmtCtxt"><span class="hs-identifier hs-var">GhciStmtCtxt</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-comment">-- I suppose?</span><span>
</span><span id="line-1326"></span><span>
</span><span id="line-1327"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtCtxt"><span class="hs-identifier hs-type">ParStmtCtxt</span></a></span><span>   </span><span id="local-6989586621681358720"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358720"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#rebindableContext"><span class="hs-identifier hs-var">rebindableContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358720"><span class="hs-identifier hs-var">c</span></a></span><span>     </span><span class="hs-comment">-- Look inside to</span><span>
</span><span id="line-1328"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmtCtxt"><span class="hs-identifier hs-type">TransStmtCtxt</span></a></span><span> </span><span id="local-6989586621681358719"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358719"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#rebindableContext"><span class="hs-identifier hs-var">rebindableContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358719"><span class="hs-identifier hs-var">c</span></a></span><span>     </span><span class="hs-comment">-- the parent context</span><span>
</span><span id="line-1329"></span><span>
</span><span id="line-1330"></span><span class="hs-comment">{-
Note [Renaming parallel Stmts]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Renaming parallel statements is painful.  Given, say
     [ a+c | a &lt;- as, bs &lt;- bss
           | c &lt;- bs, a &lt;- ds ]
Note that
  (a) In order to report &quot;Defined but not used&quot; about 'bs', we must
      rename each group of Stmts with a thing_inside whose FreeVars
      include at least {a,c}

  (b) We want to report that 'a' is illegally bound in both branches

  (c) The 'bs' in the second group must obviously not be captured by
      the binding in the first group

To satisfy (a) we nest the segements.
To satisfy (b) we check for duplicates just before thing_inside.
To satisfy (c) we reset the LocalRdrEnv each time.

************************************************************************
*                                                                      *
\subsubsection{mdo expressions}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span class="hs-keyword">type</span><span> </span><span id="FwdRefs"><span class="annot"><a href="GHC.Rename.Expr.html#FwdRefs"><span class="hs-identifier hs-var">FwdRefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>
</span><span id="line-1358"></span><span class="hs-keyword">type</span><span> </span><span id="Segment"><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-var">Segment</span></a></span></span><span> </span><span id="local-6989586621681358716"><span class="annot"><a href="#local-6989586621681358716"><span class="hs-identifier hs-type">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Set.html#Defs"><span class="hs-identifier hs-type">Defs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1359"></span><span>                      </span><span class="annot"><a href="GHC.Types.Name.Set.html#Uses"><span class="hs-identifier hs-type">Uses</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- May include defs</span><span>
</span><span id="line-1360"></span><span>                      </span><span class="annot"><a href="GHC.Rename.Expr.html#FwdRefs"><span class="hs-identifier hs-type">FwdRefs</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- A subset of uses that are</span><span>
</span><span id="line-1361"></span><span>                                </span><span class="hs-comment">--   (a) used before they are bound in this segment, or</span><span>
</span><span id="line-1362"></span><span>                                </span><span class="hs-comment">--   (b) used here, and bound in subsequent segments</span><span>
</span><span id="line-1363"></span><span>                      </span><span class="annot"><a href="#local-6989586621681358716"><span class="hs-identifier hs-type">stmts</span></a></span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- Either Stmt or [Stmt]</span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span>
</span><span id="line-1366"></span><span class="hs-comment">-- wrapper that does both the left- and right-hand sides</span><span>
</span><span id="line-1367"></span><span id="local-6989586621681360546"><span id="local-6989586621681360548"><span class="annot"><a href="GHC.Rename.Expr.html#rnRecStmtsAndThen"><span class="hs-identifier hs-type">rnRecStmtsAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360548"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1368"></span><span>                     </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1369"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360548"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360548"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360548"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1371"></span><span>                         </span><span class="hs-comment">-- assumes that the FreeVars returned includes</span><span>
</span><span id="line-1372"></span><span>                         </span><span class="hs-comment">-- the FreeVars of the Segments</span><span>
</span><span id="line-1373"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360548"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1374"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360546"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1375"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360546"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1376"></span><span id="rnRecStmtsAndThen"><span class="annot"><span class="annottext">rnRecStmtsAndThen :: forall (body :: * -&gt; *) a.
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; ([Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
    -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnRecStmtsAndThen"><span class="hs-identifier hs-var hs-var">rnRecStmtsAndThen</span></a></span></span><span> </span><span id="local-6989586621681358693"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358693"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358692"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358692"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span id="local-6989586621681358691"><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681358691"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681358690"><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
-&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681358690"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-1377"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- (A) Make the mini fixity env for all of the stmts</span><span>
</span><span id="line-1378"></span><span>          </span><span id="local-6989586621681358689"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358689"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LFixitySig GhcPs] -&gt; RnM MiniFixityEnv
</span><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier hs-var">makeMiniFixityEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall body. [LStmtLR GhcPs GhcPs body] -&gt; [LFixitySig GhcPs]
</span><a href="GHC.Rename.Expr.html#collectRecStmtsFixities"><span class="hs-identifier hs-var">collectRecStmtsFixities</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681358691"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span>          </span><span class="hs-comment">-- (B) Do the LHSes</span><span>
</span><span id="line-1381"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681358687"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))))
    (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358687"><span class="hs-identifier hs-var">new_lhs_and_fv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
MiniFixityEnv
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; RnM [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmts_lhs"><span class="hs-identifier hs-var">rn_rec_stmts_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358689"><span class="hs-identifier hs-var">fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681358691"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1382"></span><span>
</span><span id="line-1383"></span><span>          </span><span class="hs-comment">--    ...bring them and their fixities into scope</span><span>
</span><span id="line-1384"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358685"><span class="annot"><span class="annottext">bound_names :: [IdP GhcRn]
</span><a href="#local-6989586621681358685"><span class="hs-identifier hs-var hs-var">bound_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass) body.
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; [LStmtLR (GhcPass idL) (GhcPass idR) body]
-&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectLStmtsBinders"><span class="hs-identifier hs-var">collectLStmtsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))))
    (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358687"><span class="hs-identifier hs-var">new_lhs_and_fv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1385"></span><span>              </span><span class="hs-comment">-- Fake uses of variables introduced implicitly (warning suppression, see #4404)</span><span>
</span><span id="line-1386"></span><span>              </span><span id="local-6989586621681358683"><span class="annot"><span class="annottext">rec_uses :: [(SrcSpan, [Name])]
</span><a href="#local-6989586621681358683"><span class="hs-identifier hs-var hs-var">rec_uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (idR :: Pass) (body :: * -&gt; *).
[LStmtLR GhcRn (GhcPass idR) (LocatedA (body (GhcPass idR)))]
-&gt; [(SrcSpan, [Name])]
</span><a href="GHC.Hs.Utils.html#lStmtsImplicits"><span class="hs-identifier hs-var">lStmtsImplicits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))))
    (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358687"><span class="hs-identifier hs-var">new_lhs_and_fv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1387"></span><span>              </span><span id="local-6989586621681358681"><span class="annot"><span class="annottext">implicit_uses :: FreeVars
</span><a href="#local-6989586621681358681"><span class="hs-identifier hs-var hs-var">implicit_uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(SrcSpan, [Name])]
</span><a href="#local-6989586621681358683"><span class="hs-identifier hs-var">rec_uses</span></a></span><span>
</span><span id="line-1388"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-var">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681358685"><span class="hs-identifier hs-var">bound_names</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1389"></span><span>          </span><span class="annot"><span class="annottext">forall a. MiniFixityEnv -&gt; [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Fixity.html#addLocalFixities"><span class="hs-identifier hs-var">addLocalFixities</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358689"><span class="hs-identifier hs-var">fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681358685"><span class="hs-identifier hs-var">bound_names</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span>          </span><span class="hs-comment">-- (C) do the right-hand-sides and thing-inside</span><span>
</span><span id="line-1392"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681358677"><span class="annot"><span class="annottext">[Segment
   (GenLocated
      SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))))]
</span><a href="#local-6989586621681358677"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [Name]
-&gt; [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
-&gt; RnM [Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmts"><span class="hs-identifier hs-var">rn_rec_stmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358693"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358692"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681358685"><span class="hs-identifier hs-var">bound_names</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))))
    (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358687"><span class="hs-identifier hs-var">new_lhs_and_fv</span></a></span><span>
</span><span id="line-1393"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358675"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358675"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358674"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358674"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
-&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621681358690"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment
   (GenLocated
      SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))))]
</span><a href="#local-6989586621681358677"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1394"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681358673"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681358673"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358672"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358672"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; FreeVars -&gt; Maybe [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier hs-var">checkUnusedRecordWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681358673"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358674"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358672"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1395"></span><span>                </span><span class="annot"><span class="annottext">[(SrcSpan, [Name])]
</span><a href="#local-6989586621681358683"><span class="hs-identifier hs-var">rec_uses</span></a></span><span>
</span><span id="line-1396"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier hs-var">warnUnusedLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681358685"><span class="hs-identifier hs-var">bound_names</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358674"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358681"><span class="hs-identifier hs-var">implicit_uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1397"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358675"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358674"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1398"></span><span>
</span><span id="line-1399"></span><span class="hs-comment">-- get all the fixity decls in any Let stmt</span><span>
</span><span id="line-1400"></span><span id="local-6989586621681360489"><span class="annot"><a href="GHC.Rename.Expr.html#collectRecStmtsFixities"><span class="hs-identifier hs-type">collectRecStmtsFixities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360489"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LFixitySig"><span class="hs-identifier hs-type">LFixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1401"></span><span id="collectRecStmtsFixities"><span class="annot"><span class="annottext">collectRecStmtsFixities :: forall body. [LStmtLR GhcPs GhcPs body] -&gt; [LFixitySig GhcPs]
</span><a href="GHC.Rename.Expr.html#collectRecStmtsFixities"><span class="hs-identifier hs-var hs-var">collectRecStmtsFixities</span></a></span></span><span> </span><span id="local-6989586621681358669"><span class="annot"><span class="annottext">[LStmtLR GhcPs GhcPs body]
</span><a href="#local-6989586621681358669"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1402"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358668"><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs body)) (StmtLR GhcPs GhcPs body)
</span><a href="#local-6989586621681358668"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681358667"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621681358667"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs body)) (StmtLR GhcPs GhcPs body)
</span><a href="#local-6989586621681358668"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1403"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno (StmtLR GhcPs GhcPs body)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcPs GhcPs body
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358664"><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681358664"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1404"></span><span>              </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358663"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Sig GhcPs)
</span><a href="#local-6989586621681358663"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681358662"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621681358662"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Sig GhcPs)
</span><a href="#local-6989586621681358663"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1405"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358661"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358661"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="annot"><span class="annottext">XFixSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358659"><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621681358659"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358661"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621681358659"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621681358662"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-1406"></span><span>                                         </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Sig GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621681358662"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621681358667"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681358664"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-1407"></span><span>            </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcPs GhcPs body)) (StmtLR GhcPs GhcPs body)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621681358667"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[LStmtLR GhcPs GhcPs body]
</span><a href="#local-6989586621681358669"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1408"></span><span>
</span><span id="line-1409"></span><span class="hs-comment">-- left-hand sides</span><span>
</span><span id="line-1410"></span><span>
</span><span id="line-1411"></span><span id="local-6989586621681360466"><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-type">rn_rec_stmt_lhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360466"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-1412"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360466"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1413"></span><span>                   </span><span class="hs-comment">-- rename LHS, and return its FVs</span><span>
</span><span id="line-1414"></span><span>                   </span><span class="hs-comment">-- Warning: we will only need the FreeVars below in the case of a BindStmt,</span><span>
</span><span id="line-1415"></span><span>                   </span><span class="hs-comment">-- so we don't bother to compute it accurately in the other cases</span><span>
</span><span id="line-1416"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360466"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1417"></span><span>
</span><span id="line-1418"></span><span id="rn_rec_stmt_lhs"><span class="annot"><span class="annottext">rn_rec_stmt_lhs :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
MiniFixityEnv
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; RnM [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var hs-var">rn_rec_stmt_lhs</span></a></span></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358623"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358623"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358622"><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681358622"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681358621"><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621681358621"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681358620"><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621681358620"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1419"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358623"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBodyStmt idL idR body
-&gt; body -&gt; SyntaxExpr idR -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-var">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681358622"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621681358621"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621681358620"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1420"></span><span>
</span><span id="line-1421"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358619"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358619"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358618"><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681358618"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681358617"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681358617"><span class="hs-identifier hs-var">noret</span></a></span></span><span> </span><span id="local-6989586621681358616"><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621681358616"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1422"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358619"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLastStmt idL idR body
-&gt; body -&gt; Maybe Bool -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-var">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681358618"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681358617"><span class="hs-identifier hs-var">noret</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621681358616"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1423"></span><span>
</span><span id="line-1424"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span id="local-6989586621681358615"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358615"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358614"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358614"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358613"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681358613"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681358612"><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681358612"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1425"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1426"></span><span>      </span><span class="hs-comment">-- should the ctxt be MDo instead?</span><span>
</span><span id="line-1427"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681358611"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621681358611"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358610"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358610"><span class="hs-identifier hs-var">fv_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; RnM (LPat GhcRn, FreeVars)
</span><a href="GHC.Rename.Pat.html#rnBindPat"><span class="hs-identifier hs-var">rnBindPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#localRecNameMaker"><span class="hs-identifier hs-var">localRecNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358615"><span class="hs-identifier hs-var">fix_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681358613"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1428"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358614"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBindStmt idL idR body -&gt; LPat idL -&gt; body -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-var">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621681358611"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681358612"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358610"><span class="hs-identifier hs-var">fv_pat</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1429"></span><span>
</span><span id="line-1430"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358607"><span class="annot"><span class="annottext">binds :: HsLocalBinds GhcPs
</span><a href="#local-6989586621681358607"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1431"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#failWith"><span class="hs-identifier hs-var">failWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; SDoc -&gt; a -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#badIpBinds"><span class="hs-identifier hs-var">badIpBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an mdo expression&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621681358607"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>
</span><span id="line-1433"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span id="local-6989586621681358603"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358603"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358602"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358602"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621681358601"><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
</span><a href="#local-6989586621681358601"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681358600"><span class="annot"><span class="annottext">HsValBindsLR GhcPs GhcPs
</span><a href="#local-6989586621681358600"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1434"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358599"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358599"><span class="hs-identifier hs-var">_bound_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358598"><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681358598"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
-&gt; HsValBindsLR GhcPs GhcPs
-&gt; RnM ([Name], HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnLocalValBindsLHS"><span class="hs-identifier hs-var">rnLocalValBindsLHS</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358603"><span class="hs-identifier hs-var">fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcPs GhcPs
</span><a href="#local-6989586621681358600"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1435"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358602"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLetStmt idL idR body
-&gt; HsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR.
XHsValBinds idL idR
-&gt; HsValBindsLR idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-var">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
</span><a href="#local-6989586621681358601"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681358598"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1436"></span><span>                 </span><span class="hs-comment">-- Warning: this is bogus; see function invariant</span><span>
</span><span id="line-1437"></span><span>                 </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-1438"></span><span>                 </span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1439"></span><span>
</span><span id="line-1440"></span><span class="hs-comment">-- XXX Do we need to do something with the return and mfix names?</span><span>
</span><span id="line-1441"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span id="local-6989586621681358597"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358597"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: forall idL idR body.
StmtLR idL idR body -&gt; XRec idR [LStmtLR idL idR body]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358596"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621681358596"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Flatten Rec inside Rec</span><span>
</span><span id="line-1442"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
MiniFixityEnv
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; RnM [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmts_lhs"><span class="hs-identifier hs-var">rn_rec_stmts_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358597"><span class="hs-identifier hs-var">fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621681358596"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1443"></span><span>
</span><span id="line-1444"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358595"><span class="annot"><span class="annottext">stmt :: LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681358595"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>       </span><span class="hs-comment">-- Syntactically illegal in mdo</span><span>
</span><span id="line-1445"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681358595"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1446"></span><span>
</span><span id="line-1447"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358594"><span class="annot"><span class="annottext">stmt :: LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681358594"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- Syntactically illegal in mdo</span><span>
</span><span id="line-1448"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681358594"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358593"><span class="annot"><span class="annottext">stmt :: LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681358593"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Shouldn't appear yet</span><span>
</span><span id="line-1451"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681358593"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1452"></span><span>
</span><span id="line-1453"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt LetStmt EmptyLocalBinds&quot;</span></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span id="local-6989586621681360488"><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmts_lhs"><span class="hs-identifier hs-type">rn_rec_stmts_lhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360488"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-1457"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360488"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1458"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360488"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1459"></span><span id="rn_rec_stmts_lhs"><span class="annot"><span class="annottext">rn_rec_stmts_lhs :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
MiniFixityEnv
-&gt; [LStmt GhcPs (LocatedA (body GhcPs))]
-&gt; RnM [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmts_lhs"><span class="hs-identifier hs-var hs-var">rn_rec_stmts_lhs</span></a></span></span><span> </span><span id="local-6989586621681358578"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358578"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span id="local-6989586621681358577"><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681358577"><span class="hs-identifier hs-var">stmts</span></a></span></span><span>
</span><span id="line-1460"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681358576"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358576"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m [b]) -&gt; [a] -&gt; m [b]
</span><a href="GHC.Utils.Monad.html#concatMapM"><span class="hs-identifier hs-var">concatMapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
MiniFixityEnv
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; RnM [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmt_lhs"><span class="hs-identifier hs-var">rn_rec_stmt_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621681358578"><span class="hs-identifier hs-var">fix_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LStmt GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621681358577"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1461"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358574"><span class="annot"><span class="annottext">boundNames :: [IdP GhcRn]
</span><a href="#local-6989586621681358574"><span class="hs-identifier hs-var hs-var">boundNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass) body.
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; [LStmtLR (GhcPass idL) (GhcPass idR) body]
-&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectLStmtsBinders"><span class="hs-identifier hs-var">collectLStmtsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358576"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1462"></span><span>            </span><span class="hs-comment">-- First do error checking: we need to check for dups here because we</span><span>
</span><span id="line-1463"></span><span>            </span><span class="hs-comment">-- don't bind all of the variables from the Stmt at once</span><span>
</span><span id="line-1464"></span><span>            </span><span class="hs-comment">-- with bindLocatedLocals.</span><span>
</span><span id="line-1465"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier hs-var">checkDupNames</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
</span><a href="#local-6989586621681358574"><span class="hs-identifier hs-var">boundNames</span></a></span><span>
</span><span id="line-1466"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA (StmtLR GhcRn GhcPs (LocatedA (body GhcPs))),
  FreeVars)]
</span><a href="#local-6989586621681358576"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1467"></span><span>
</span><span id="line-1468"></span><span>
</span><span id="line-1469"></span><span class="hs-comment">-- right-hand-sides</span><span>
</span><span id="line-1470"></span><span>
</span><span id="line-1471"></span><span id="local-6989586621681360451"><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-type">rn_rec_stmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360451"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1472"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1473"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360451"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360451"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1474"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1475"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360451"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1476"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360451"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1477"></span><span>        </span><span class="hs-comment">-- Rename a Stmt that is inside a RecStmt (or mdo)</span><span>
</span><span id="line-1478"></span><span>        </span><span class="hs-comment">-- Assumes all binders are already in scope</span><span>
</span><span id="line-1479"></span><span>        </span><span class="hs-comment">-- Turns each stmt into a singleton Stmt</span><span>
</span><span id="line-1480"></span><span id="rn_rec_stmt"><span class="annot"><span class="annottext">rn_rec_stmt :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [Name]
-&gt; (LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
-&gt; RnM [Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var hs-var">rn_rec_stmt</span></a></span></span><span> </span><span id="local-6989586621681358530"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358530"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358529"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358529"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358528"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358528"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcRn GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358527"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358527"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681358526"><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358526"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358525"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681358525"><span class="hs-identifier hs-var">noret</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1481"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358524"><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358524"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358523"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358523"><span class="hs-identifier hs-var">fv_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358529"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358526"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1482"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358522"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358522"><span class="hs-identifier hs-var">ret_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358521"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358521"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p.
HsStmtContext p -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDo"><span class="hs-identifier hs-var">lookupQualifiedDo</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358530"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-1483"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358523"><span class="hs-identifier hs-var">fv_expr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358521"><span class="hs-identifier hs-var">fvs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1484"></span><span>                   </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358528"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLastStmt idL idR body
-&gt; body -&gt; Maybe Bool -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-var">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358527"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358524"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681358525"><span class="hs-identifier hs-var">noret</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358522"><span class="hs-identifier hs-var">ret_op</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span id="local-6989586621681358519"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358519"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358518"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358518"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358517"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358517"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcRn GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358516"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358516"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681358515"><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358515"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1487"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358514"><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358514"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358513"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358513"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358518"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358515"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1488"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358512"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358512"><span class="hs-identifier hs-var">then_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358511"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358511"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p.
HsStmtContext p -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDo"><span class="hs-identifier hs-var">lookupQualifiedDo</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358519"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#thenMName"><span class="hs-identifier hs-var">thenMName</span></a></span><span>
</span><span id="line-1489"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358513"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358511"><span class="hs-identifier hs-var">fvs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1490"></span><span>                 </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358517"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBodyStmt idL idR body
-&gt; body -&gt; SyntaxExpr idR -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-var">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358516"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358514"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358512"><span class="hs-identifier hs-var">then_op</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). IsPass p =&gt; SyntaxExpr (GhcPass p)
</span><a href="GHC.Hs.Expr.html#noSyntaxExpr"><span class="hs-identifier hs-var">noSyntaxExpr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span id="local-6989586621681358510"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358510"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358509"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358509"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358508"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358508"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcRn GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358507"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358507"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358506"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358506"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681358505"><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358505"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358504"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358504"><span class="hs-identifier hs-var">fv_pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1493"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358503"><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358503"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358502"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358502"><span class="hs-identifier hs-var">fv_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358509"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs
</span><a href="#local-6989586621681358505"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1494"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358501"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358501"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358500"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358500"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p.
HsStmtContext p -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDo"><span class="hs-identifier hs-var">lookupQualifiedDo</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358510"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#bindMName"><span class="hs-identifier hs-var">bindMName</span></a></span><span>
</span><span id="line-1495"></span><span>
</span><span id="line-1496"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358499"><span class="annot"><span class="annottext">Maybe SyntaxExprRn
</span><a href="#local-6989586621681358499"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358498"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358498"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; RnM (FailOperator GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#getMonadFailOp"><span class="hs-identifier hs-var">getMonadFailOp</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358510"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1497"></span><span>
</span><span id="line-1498"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358496"><span class="annot"><span class="annottext">bndrs :: FreeVars
</span><a href="#local-6989586621681358496"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. CollectPass p =&gt; CollectFlag p -&gt; LPat p -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectPatBinders"><span class="hs-identifier hs-var">collectPatBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358507"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1499"></span><span>             </span><span id="local-6989586621681358495"><span class="annot"><span class="annottext">fvs :: FreeVars
</span><a href="#local-6989586621681358495"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358502"><span class="hs-identifier hs-var">fv_expr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358504"><span class="hs-identifier hs-var">fv_pat</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358500"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358498"><span class="hs-identifier hs-var">fvs2</span></a></span><span>
</span><span id="line-1500"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358494"><span class="annot"><span class="annottext">xbsrn :: XBindStmtRn
</span><a href="#local-6989586621681358494"><span class="hs-identifier hs-var hs-var">xbsrn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#XBindStmtRn"><span class="hs-identifier hs-type">XBindStmtRn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xbsrn_bindOp :: SyntaxExpr GhcRn
</span><a href="GHC.Hs.Expr.html#xbsrn_bindOp"><span class="hs-identifier hs-var">xbsrn_bindOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358501"><span class="hs-identifier hs-var">bind_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbsrn_failOp :: FailOperator GhcRn
</span><a href="GHC.Hs.Expr.html#xbsrn_failOp"><span class="hs-identifier hs-var">xbsrn_failOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprRn
</span><a href="#local-6989586621681358499"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1501"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358496"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358495"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358496"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358495"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1502"></span><span>                  </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358508"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBindStmt idL idR body -&gt; LPat idL -&gt; body -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-var">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmtRn
</span><a href="#local-6989586621681358494"><span class="hs-identifier hs-var">xbsrn</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358507"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358506"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcRn
</span><a href="#local-6989586621681358503"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1503"></span><span>
</span><span id="line-1504"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcRn GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358492"><span class="annot"><span class="annottext">binds :: HsLocalBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681358492"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#failWith"><span class="hs-identifier hs-var">failWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; SDoc -&gt; a -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#badIpBinds"><span class="hs-identifier hs-var">badIpBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an mdo expression&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsLocalBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681358492"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1506"></span><span>
</span><span id="line-1507"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358491"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358491"><span class="hs-identifier hs-var">all_bndrs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358490"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358490"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcRn GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621681358489"><span class="annot"><span class="annottext">XHsValBinds GhcRn GhcPs
</span><a href="#local-6989586621681358489"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681358488"><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681358488"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1508"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358487"><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621681358487"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358486"><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681358486"><span class="hs-identifier hs-var">du_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeVars
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnLocalValBindsRHS"><span class="hs-identifier hs-var">rnLocalValBindsRHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358491"><span class="hs-identifier hs-var">all_bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621681358488"><span class="hs-identifier hs-var">binds'</span></a></span><span>
</span><span id="line-1509"></span><span>           </span><span class="hs-comment">-- fixities and unused are handled above in rnRecStmtsAndThen</span><span>
</span><span id="line-1510"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358485"><span class="annot"><span class="annottext">fvs :: FreeVars
</span><a href="#local-6989586621681358485"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#allUses"><span class="hs-identifier hs-var">allUses</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681358486"><span class="hs-identifier hs-var">du_binds</span></a></span><span>
</span><span id="line-1511"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">DefUses -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#duDefs"><span class="hs-identifier hs-var">duDefs</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621681358486"><span class="hs-identifier hs-var">du_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358485"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1512"></span><span>                 </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358490"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLetStmt idL idR body
-&gt; HsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR.
XHsValBinds idL idR
-&gt; HsValBindsLR idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-var">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcRn GhcPs
</span><a href="#local-6989586621681358489"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621681358487"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1513"></span><span>
</span><span id="line-1514"></span><span class="hs-comment">-- no RecStmt case because they get flattened above when doing the LHSes</span><span>
</span><span id="line-1515"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358482"><span class="annot"><span class="annottext">stmt :: (LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358482"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1516"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt: RecStmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358482"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>
</span><span id="line-1518"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358481"><span class="annot"><span class="annottext">stmt :: (LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358481"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-comment">-- Syntactically illegal in mdo</span><span>
</span><span id="line-1519"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt: ParStmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358481"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1520"></span><span>
</span><span id="line-1521"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358480"><span class="annot"><span class="annottext">stmt :: (LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358480"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- Syntactically illegal in mdo</span><span>
</span><span id="line-1522"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt: TransStmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358480"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1523"></span><span>
</span><span id="line-1524"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcRn GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcRn GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt: LetStmt EmptyLocalBinds&quot;</span></span><span>
</span><span id="line-1526"></span><span>
</span><span id="line-1527"></span><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358479"><span class="annot"><span class="annottext">stmt :: (LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358479"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1528"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rn_rec_stmt: ApplicativeStmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
</span><a href="#local-6989586621681358479"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span>
</span><span id="line-1530"></span><span id="local-6989586621681360476"><span class="annot"><a href="GHC.Rename.Expr.html#rn_rec_stmts"><span class="hs-identifier hs-type">rn_rec_stmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360476"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1531"></span><span>                </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1532"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360476"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360476"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1533"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1534"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360476"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1535"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360476"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1536"></span><span id="rn_rec_stmts"><span class="annot"><span class="annottext">rn_rec_stmts :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [Name]
-&gt; [(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
-&gt; RnM [Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmts"><span class="hs-identifier hs-var hs-var">rn_rec_stmts</span></a></span></span><span> </span><span id="local-6989586621681358465"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358465"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358464"><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358464"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span id="local-6989586621681358463"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358463"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681358462"><span class="annot"><span class="annottext">[(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="#local-6989586621681358462"><span class="hs-identifier hs-var">stmts</span></a></span></span><span>
</span><span id="line-1537"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681358461"><span class="annot"><span class="annottext">[[Segment
    (GenLocated
       SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))))]]
</span><a href="#local-6989586621681358461"><span class="hs-identifier hs-var">segs_s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; (body GhcPs -&gt; RnM (body GhcRn, FreeVars))
-&gt; [Name]
-&gt; (LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)
-&gt; RnM [Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="GHC.Rename.Expr.html#rn_rec_stmt"><span class="hs-identifier hs-var">rn_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358465"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">body GhcPs -&gt; RnM (body GhcRn, FreeVars)
</span><a href="#local-6989586621681358464"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358463"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(LStmtLR GhcRn GhcPs (LocatedA (body GhcPs)), FreeVars)]
</span><a href="#local-6989586621681358462"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1538"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[Segment
    (GenLocated
       SrcSpanAnnA (StmtLR GhcRn GhcRn (LocatedA (body GhcRn))))]]
</span><a href="#local-6989586621681358461"><span class="hs-identifier hs-var">segs_s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-1541"></span><span id="local-6989586621681360543"><span class="annot"><a href="GHC.Rename.Expr.html#segmentRecStmts"><span class="hs-identifier hs-type">segmentRecStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360543"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1542"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1543"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360543"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360543"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-1545"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360543"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1546"></span><span>
</span><span id="line-1547"></span><span id="segmentRecStmts"><span class="annot"><span class="annottext">segmentRecStmts :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
SrcSpan
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcRn (LocatedA (body GhcRn))
-&gt; [Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
-&gt; FreeVars
-&gt; ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#segmentRecStmts"><span class="hs-identifier hs-var hs-var">segmentRecStmts</span></a></span></span><span> </span><span id="local-6989586621681358456"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681358456"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681358455"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358455"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358454"><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358454"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span></span><span> </span><span id="local-6989586621681358453"><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358453"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span id="local-6989586621681358452"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358452"><span class="hs-identifier hs-var">fvs_later</span></a></span></span><span>
</span><span id="line-1548"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358453"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1549"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358452"><span class="hs-identifier hs-var">fvs_later</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>
</span><span id="line-1551"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MDoExpr"><span class="hs-identifier hs-type">MDoExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358455"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1552"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
Stmt GhcRn (LocatedA (body GhcRn))
-&gt; [Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
-&gt; FreeVars
-&gt; ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#segsToStmts"><span class="hs-identifier hs-var">segsToStmts</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358454"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
</span><a href="#local-6989586621681358450"><span class="hs-identifier hs-var">grouped_segs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358452"><span class="hs-identifier hs-var">fvs_later</span></a></span><span>
</span><span id="line-1553"></span><span>               </span><span class="hs-comment">-- Step 4: Turn the segments into Stmts</span><span>
</span><span id="line-1554"></span><span>                </span><span class="hs-comment">--         Use RecStmt when and only when there are fwd refs</span><span>
</span><span id="line-1555"></span><span>                </span><span class="hs-comment">--         Also gather up the uses from the end towards the</span><span>
</span><span id="line-1556"></span><span>                </span><span class="hs-comment">--         start, so we can tell the RecStmt which things are</span><span>
</span><span id="line-1557"></span><span>                </span><span class="hs-comment">--         used 'after' the RecStmt</span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1560"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ann. SrcSpan -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681358456"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1561"></span><span>       </span><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358454"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: XRec GhcRn [LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Stmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358449"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-1562"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: [IdP GhcRn]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span>
</span><span id="line-1563"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358447"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358452"><span class="hs-identifier hs-var">fvs_later</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1564"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: [IdP GhcRn]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span>
</span><span id="line-1565"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358447"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358445"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">]</span><span>
</span><span id="line-1566"></span><span>          </span><span class="hs-comment">-- See Note [Deterministic ApplicativeDo and RecursiveDo desugaring]</span><span>
</span><span id="line-1567"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358445"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358452"><span class="hs-identifier hs-var">fvs_later</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1568"></span><span>
</span><span id="line-1569"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1570"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681358444"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358444"><span class="hs-identifier hs-var">defs_s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358443"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358443"><span class="hs-identifier hs-var">uses_s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358449"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Stmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358449"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c d. [(a, b, c, d)] -&gt; ([a], [b], [c], [d])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#unzip4"><span class="hs-identifier hs-var">unzip4</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358453"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1571"></span><span>    </span><span id="local-6989586621681358447"><span class="annot"><span class="annottext">defs :: FreeVars
</span><a href="#local-6989586621681358447"><span class="hs-identifier hs-var hs-var">defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358444"><span class="hs-identifier hs-var">defs_s</span></a></span><span>
</span><span id="line-1572"></span><span>    </span><span id="local-6989586621681358445"><span class="annot"><span class="annottext">uses :: FreeVars
</span><a href="#local-6989586621681358445"><span class="hs-identifier hs-var hs-var">uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358443"><span class="hs-identifier hs-var">uses_s</span></a></span><span>
</span><span id="line-1573"></span><span>
</span><span id="line-1574"></span><span>                </span><span class="hs-comment">-- Step 2: Fill in the fwd refs.</span><span>
</span><span id="line-1575"></span><span>                </span><span class="hs-comment">--         The segments are all singletons, but their fwd-ref</span><span>
</span><span id="line-1576"></span><span>                </span><span class="hs-comment">--         field mentions all the things used by the segment</span><span>
</span><span id="line-1577"></span><span>                </span><span class="hs-comment">--         that are bound after their use</span><span>
</span><span id="line-1578"></span><span>    </span><span id="local-6989586621681358442"><span class="annot"><span class="annottext">segs_w_fwd_refs :: [Segment
   (GenLocated SrcSpanAnnA (Stmt GhcRn (LocatedA (body GhcRn))))]
</span><a href="#local-6989586621681358442"><span class="hs-identifier hs-var hs-var">segs_w_fwd_refs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [Segment a] -&gt; [Segment a]
</span><a href="GHC.Rename.Expr.html#addFwdRefs"><span class="hs-identifier hs-var">addFwdRefs</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn (LocatedA (body GhcRn)))]
</span><a href="#local-6989586621681358453"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1579"></span><span>
</span><span id="line-1580"></span><span>                </span><span class="hs-comment">-- Step 3: Group together the segments to make bigger segments</span><span>
</span><span id="line-1581"></span><span>                </span><span class="hs-comment">--         Invariant: in the result, no segment uses a variable</span><span>
</span><span id="line-1582"></span><span>                </span><span class="hs-comment">--                    bound in a later segment</span><span>
</span><span id="line-1583"></span><span>    </span><span id="local-6989586621681358450"><span class="annot"><span class="annottext">grouped_segs :: [Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
</span><a href="#local-6989586621681358450"><span class="hs-identifier hs-var hs-var">grouped_segs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall body.
HsStmtContext GhcRn
-&gt; [Segment (LStmt GhcRn body)] -&gt; [Segment [LStmt GhcRn body]]
</span><a href="GHC.Rename.Expr.html#glomSegments"><span class="hs-identifier hs-var">glomSegments</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358455"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment
   (GenLocated SrcSpanAnnA (Stmt GhcRn (LocatedA (body GhcRn))))]
</span><a href="#local-6989586621681358442"><span class="hs-identifier hs-var">segs_w_fwd_refs</span></a></span><span>
</span><span id="line-1584"></span><span>
</span><span id="line-1585"></span><span class="hs-comment">----------------------------</span><span>
</span><span id="line-1586"></span><span id="local-6989586621681360432"><span class="annot"><a href="GHC.Rename.Expr.html#addFwdRefs"><span class="hs-identifier hs-type">addFwdRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360432"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360432"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1587"></span><span class="hs-comment">-- So far the segments only have forward refs *within* the Stmt</span><span>
</span><span id="line-1588"></span><span class="hs-comment">--      (which happens for bind:  x &lt;- ...x...)</span><span>
</span><span id="line-1589"></span><span class="hs-comment">-- This function adds the cross-seg fwd ref info</span><span>
</span><span id="line-1590"></span><span>
</span><span id="line-1591"></span><span id="addFwdRefs"><span class="annot"><span class="annottext">addFwdRefs :: forall a. [Segment a] -&gt; [Segment a]
</span><a href="GHC.Rename.Expr.html#addFwdRefs"><span class="hs-identifier hs-var hs-var">addFwdRefs</span></a></span></span><span> </span><span id="local-6989586621681358438"><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358438"><span class="hs-identifier hs-var">segs</span></a></span></span><span>
</span><span id="line-1592"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">forall {d}.
(FreeVars, FreeVars, FreeVars, d)
-&gt; ([(FreeVars, FreeVars, FreeVars, d)], FreeVars)
-&gt; ([(FreeVars, FreeVars, FreeVars, d)], FreeVars)
</span><a href="#local-6989586621681358437"><span class="hs-identifier hs-var">mk_seg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358438"><span class="hs-identifier hs-var">segs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1594"></span><span>    </span><span id="local-6989586621681358437"><span class="annot"><span class="annottext">mk_seg :: (FreeVars, FreeVars, FreeVars, d)
-&gt; ([(FreeVars, FreeVars, FreeVars, d)], FreeVars)
-&gt; ([(FreeVars, FreeVars, FreeVars, d)], FreeVars)
</span><a href="#local-6989586621681358437"><span class="hs-identifier hs-var hs-var">mk_seg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358436"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358436"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358435"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358435"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358434"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358434"><span class="hs-identifier hs-var">fwds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358433"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621681358433"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358432"><span class="annot"><span class="annottext">[(FreeVars, FreeVars, FreeVars, d)]
</span><a href="#local-6989586621681358432"><span class="hs-identifier hs-var">segs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358431"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358431"><span class="hs-identifier hs-var">later_defs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1595"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FreeVars, FreeVars, FreeVars, d)
</span><a href="#local-6989586621681358430"><span class="hs-identifier hs-var">new_seg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(FreeVars, FreeVars, FreeVars, d)]
</span><a href="#local-6989586621681358432"><span class="hs-identifier hs-var">segs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358429"><span class="hs-identifier hs-var">all_defs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1596"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1597"></span><span>          </span><span id="local-6989586621681358430"><span class="annot"><span class="annottext">new_seg :: (FreeVars, FreeVars, FreeVars, d)
</span><a href="#local-6989586621681358430"><span class="hs-identifier hs-var hs-var">new_seg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358436"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358435"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358428"><span class="hs-identifier hs-var">new_fwds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621681358433"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span>          </span><span id="local-6989586621681358429"><span class="annot"><span class="annottext">all_defs :: FreeVars
</span><a href="#local-6989586621681358429"><span class="hs-identifier hs-var hs-var">all_defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358431"><span class="hs-identifier hs-var">later_defs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358436"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-1599"></span><span>          </span><span id="local-6989586621681358428"><span class="annot"><span class="annottext">new_fwds :: FreeVars
</span><a href="#local-6989586621681358428"><span class="hs-identifier hs-var hs-var">new_fwds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358434"><span class="hs-identifier hs-var">fwds</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358435"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358431"><span class="hs-identifier hs-var">later_defs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1600"></span><span>                </span><span class="hs-comment">-- Add the downstream fwd refs here</span><span>
</span><span id="line-1601"></span><span>
</span><span id="line-1602"></span><span class="hs-comment">{-
Note [Segmenting mdo]
~~~~~~~~~~~~~~~~~~~~~
NB. June 7 2012: We only glom segments that appear in an explicit mdo;
and leave those found in &quot;do rec&quot;'s intact.  See
https://gitlab.haskell.org/ghc/ghc/issues/4148 for the discussion
leading to this design choice.  Hence the test in segmentRecStmts.

Note [Glomming segments]
~~~~~~~~~~~~~~~~~~~~~~~~
Glomming the singleton segments of an mdo into minimal recursive groups.

At first I thought this was just strongly connected components, but
there's an important constraint: the order of the stmts must not change.

Consider
     mdo { x &lt;- ...y...
           p &lt;- z
           y &lt;- ...x...
           q &lt;- x
           z &lt;- y
           r &lt;- x }

Here, the first stmt mention 'y', which is bound in the third.
But that means that the innocent second stmt (p &lt;- z) gets caught
up in the recursion.  And that in turn means that the binding for
'z' has to be included... and so on.

Start at the tail { r &lt;- x }
Now add the next one { z &lt;- y ; r &lt;- x }
Now add one more     { q &lt;- x ; z &lt;- y ; r &lt;- x }
Now one more... but this time we have to group a bunch into rec
     { rec { y &lt;- ...x... ; q &lt;- x ; z &lt;- y } ; r &lt;- x }
Now one more, which we can add on without a rec
     { p &lt;- z ;
       rec { y &lt;- ...x... ; q &lt;- x ; z &lt;- y } ;
       r &lt;- x }
Finally we add the last one; since it mentions y we have to
glom it together with the first two groups
     { rec { x &lt;- ...y...; p &lt;- z ; y &lt;- ...x... ;
             q &lt;- x ; z &lt;- y } ;
       r &lt;- x }
-}</span><span>
</span><span id="line-1645"></span><span>
</span><span id="line-1646"></span><span id="local-6989586621681360431"><span class="annot"><a href="GHC.Rename.Expr.html#glomSegments"><span class="hs-identifier hs-type">glomSegments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1647"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360431"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1648"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360431"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span></span><span>
</span><span id="line-1649"></span><span>                                  </span><span class="hs-comment">-- Each segment has a non-empty list of Stmts</span><span>
</span><span id="line-1650"></span><span class="hs-comment">-- See Note [Glomming segments]</span><span>
</span><span id="line-1651"></span><span>
</span><span id="line-1652"></span><span id="glomSegments"><span class="annot"><span class="annottext">glomSegments :: forall body.
HsStmtContext GhcRn
-&gt; [Segment (LStmt GhcRn body)] -&gt; [Segment [LStmt GhcRn body]]
</span><a href="GHC.Rename.Expr.html#glomSegments"><span class="hs-identifier hs-var hs-var">glomSegments</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1653"></span><span class="annot"><a href="GHC.Rename.Expr.html#glomSegments"><span class="hs-identifier hs-var">glomSegments</span></a></span><span> </span><span id="local-6989586621681358426"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358426"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358425"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358425"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358424"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358424"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358423"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358423"><span class="hs-identifier hs-var">fwds</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358422"><span class="annot"><span class="annottext">LStmt GhcRn body
</span><a href="#local-6989586621681358422"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358421"><span class="annot"><span class="annottext">[Segment (LStmt GhcRn body)]
</span><a href="#local-6989586621681358421"><span class="hs-identifier hs-var">segs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1654"></span><span>        </span><span class="hs-comment">-- Actually stmts will always be a singleton</span><span>
</span><span id="line-1655"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358420"><span class="hs-identifier hs-var">seg_defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358419"><span class="hs-identifier hs-var">seg_uses</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358418"><span class="hs-identifier hs-var">seg_fwds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)]
</span><a href="#local-6989586621681358417"><span class="hs-identifier hs-var">seg_stmts</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(FreeVars, FreeVars, FreeVars,
  [GenLocated
     (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)])]
</span><a href="#local-6989586621681358416"><span class="hs-identifier hs-var">others</span></a></span><span>
</span><span id="line-1656"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1657"></span><span>    </span><span id="local-6989586621681358415"><span class="annot"><span class="annottext">segs' :: [Segment [LStmt GhcRn body]]
</span><a href="#local-6989586621681358415"><span class="hs-identifier hs-var hs-var">segs'</span></a></span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall body.
HsStmtContext GhcRn
-&gt; [Segment (LStmt GhcRn body)] -&gt; [Segment [LStmt GhcRn body]]
</span><a href="GHC.Rename.Expr.html#glomSegments"><span class="hs-identifier hs-var">glomSegments</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358426"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment (LStmt GhcRn body)]
</span><a href="#local-6989586621681358421"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1658"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681358414"><span class="annot"><span class="annottext">[(FreeVars, FreeVars, FreeVars,
  [GenLocated
     (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)])]
</span><a href="#local-6989586621681358414"><span class="hs-identifier hs-var">extras</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358416"><span class="annot"><span class="annottext">[(FreeVars, FreeVars, FreeVars,
  [GenLocated
     (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)])]
</span><a href="#local-6989586621681358416"><span class="hs-identifier hs-var">others</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. FreeVars -&gt; [Segment a] -&gt; ([Segment a], [Segment a])
</span><a href="#local-6989586621681358413"><span class="hs-identifier hs-var">grab</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358424"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment [LStmt GhcRn body]]
</span><a href="#local-6989586621681358415"><span class="hs-identifier hs-var">segs'</span></a></span><span>
</span><span id="line-1659"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681358412"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358412"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358411"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358411"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358410"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358410"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358409"><span class="annot"><span class="annottext">[[GenLocated
    (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)]]
</span><a href="#local-6989586621681358409"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c d. [(a, b, c, d)] -&gt; ([a], [b], [c], [d])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#unzip4"><span class="hs-identifier hs-var">unzip4</span></a></span><span> </span><span class="annot"><span class="annottext">[(FreeVars, FreeVars, FreeVars,
  [GenLocated
     (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)])]
</span><a href="#local-6989586621681358414"><span class="hs-identifier hs-var">extras</span></a></span><span>
</span><span id="line-1660"></span><span>
</span><span id="line-1661"></span><span>    </span><span id="local-6989586621681358420"><span class="annot"><span class="annottext">seg_defs :: FreeVars
</span><a href="#local-6989586621681358420"><span class="hs-identifier hs-var hs-var">seg_defs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358412"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358425"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-1662"></span><span>    </span><span id="local-6989586621681358419"><span class="annot"><span class="annottext">seg_uses :: FreeVars
</span><a href="#local-6989586621681358419"><span class="hs-identifier hs-var hs-var">seg_uses</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358411"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358424"><span class="hs-identifier hs-var">uses</span></a></span><span>
</span><span id="line-1663"></span><span>    </span><span id="local-6989586621681358418"><span class="annot"><span class="annottext">seg_fwds :: FreeVars
</span><a href="#local-6989586621681358418"><span class="hs-identifier hs-var hs-var">seg_fwds</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358410"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358423"><span class="hs-identifier hs-var">fwds</span></a></span><span>
</span><span id="line-1664"></span><span>    </span><span id="local-6989586621681358417"><span class="annot"><span class="annottext">seg_stmts :: [GenLocated
   (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)]
</span><a href="#local-6989586621681358417"><span class="hs-identifier hs-var hs-var">seg_stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LStmt GhcRn body
</span><a href="#local-6989586621681358422"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[GenLocated
    (Anno (StmtLR GhcRn GhcRn body)) (StmtLR GhcRn GhcRn body)]]
</span><a href="#local-6989586621681358409"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-1665"></span><span>
</span><span id="line-1666"></span><span>    </span><span id="local-6989586621681360427"><span class="annot"><a href="#local-6989586621681358413"><span class="hs-identifier hs-type">grab</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>             </span><span class="hs-comment">-- The client</span><span>
</span><span id="line-1667"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360427"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1668"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360427"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- Needed by the 'client'</span><span>
</span><span id="line-1669"></span><span>             </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360427"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>       </span><span class="hs-comment">-- Not needed by the client</span><span>
</span><span id="line-1670"></span><span>        </span><span class="hs-comment">-- The result is simply a split of the input</span><span>
</span><span id="line-1671"></span><span>    </span><span id="local-6989586621681358413"><span class="annot"><span class="annottext">grab :: forall a. FreeVars -&gt; [Segment a] -&gt; ([Segment a], [Segment a])
</span><a href="#local-6989586621681358413"><span class="hs-identifier hs-var hs-var">grab</span></a></span></span><span> </span><span id="local-6989586621681358408"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358408"><span class="hs-identifier hs-var">uses</span></a></span></span><span> </span><span id="local-6989586621681358407"><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358407"><span class="hs-identifier hs-var">dus</span></a></span></span><span>
</span><span id="line-1672"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358405"><span class="hs-identifier hs-var">yeses</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358404"><span class="hs-identifier hs-var">noes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1673"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1674"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681358404"><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358404"><span class="hs-identifier hs-var">noes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358405"><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358405"><span class="hs-identifier hs-var">yeses</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/GHC-List.html#span"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">Segment a -&gt; Bool
</span><a href="#local-6989586621681358402"><span class="hs-identifier hs-var">not_needed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment a]
</span><a href="#local-6989586621681358407"><span class="hs-identifier hs-var">dus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1675"></span><span>          </span><span id="local-6989586621681358402"><span class="annot"><span class="annottext">not_needed :: Segment a -&gt; Bool
</span><a href="#local-6989586621681358402"><span class="hs-identifier hs-var hs-var">not_needed</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358401"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358401"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#disjointNameSet"><span class="hs-identifier hs-var">disjointNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358401"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358408"><span class="hs-identifier hs-var">uses</span></a></span><span>
</span><span id="line-1676"></span><span>
</span><span id="line-1677"></span><span class="hs-comment">----------------------------------------------------</span><span>
</span><span id="line-1678"></span><span id="local-6989586621681360437"><span class="annot"><a href="GHC.Rename.Expr.html#segsToStmts"><span class="hs-identifier hs-type">segsToStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360437"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1679"></span><span>                                  </span><span class="hs-comment">-- A RecStmt with the SyntaxOps filled in</span><span>
</span><span id="line-1680"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#Segment"><span class="hs-identifier hs-type">Segment</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360437"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-1681"></span><span>                                  </span><span class="hs-comment">-- Each Segment has a non-empty list of Stmts</span><span>
</span><span id="line-1682"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>           </span><span class="hs-comment">-- Free vars used 'later'</span><span>
</span><span id="line-1683"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360437"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1684"></span><span>
</span><span id="line-1685"></span><span id="segsToStmts"><span class="annot"><span class="annottext">segsToStmts :: forall (body :: * -&gt; *).
Stmt GhcRn (LocatedA (body GhcRn))
-&gt; [Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
-&gt; FreeVars
-&gt; ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#segsToStmts"><span class="hs-identifier hs-var hs-var">segsToStmts</span></a></span></span><span> </span><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681358398"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358398"><span class="hs-identifier hs-var">fvs_later</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358398"><span class="hs-identifier hs-var">fvs_later</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1686"></span><span class="annot"><a href="GHC.Rename.Expr.html#segsToStmts"><span class="hs-identifier hs-var">segsToStmts</span></a></span><span> </span><span id="local-6989586621681358397"><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358397"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358396"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358396"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358395"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358395"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358394"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358394"><span class="hs-identifier hs-var">fwds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358393"><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358393"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358392"><span class="annot"><span class="annottext">[Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
</span><a href="#local-6989586621681358392"><span class="hs-identifier hs-var">segs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358391"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358391"><span class="hs-identifier hs-var">fvs_later</span></a></span></span><span>
</span><span id="line-1687"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">ss</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1688"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Stmt GhcRn (LocatedA (body GhcRn)))
</span><a href="#local-6989586621681358388"><span class="hs-identifier hs-var">new_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358387"><span class="hs-identifier hs-var">later_stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358386"><span class="hs-identifier hs-var">later_uses</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358395"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1689"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1690"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681358387"><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358387"><span class="hs-identifier hs-var">later_stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358386"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358386"><span class="hs-identifier hs-var">later_uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
Stmt GhcRn (LocatedA (body GhcRn))
-&gt; [Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
-&gt; FreeVars
-&gt; ([LStmt GhcRn (LocatedA (body GhcRn))], FreeVars)
</span><a href="GHC.Rename.Expr.html#segsToStmts"><span class="hs-identifier hs-var">segsToStmts</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358397"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">[Segment [LStmt GhcRn (LocatedA (body GhcRn))]]
</span><a href="#local-6989586621681358392"><span class="hs-identifier hs-var">segs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358391"><span class="hs-identifier hs-var">fvs_later</span></a></span><span>
</span><span id="line-1691"></span><span>    </span><span id="local-6989586621681358388"><span class="annot"><span class="annottext">new_stmt :: GenLocated SrcSpanAnnA (Stmt GhcRn (LocatedA (body GhcRn)))
</span><a href="#local-6989586621681358388"><span class="hs-identifier hs-var hs-var">new_stmt</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358385"><span class="hs-identifier hs-var">non_rec</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358393"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-1692"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358393"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358382"><span class="hs-identifier hs-var">rec_stmt</span></a></span><span>
</span><span id="line-1693"></span><span>    </span><span id="local-6989586621681358382"><span class="annot"><span class="annottext">rec_stmt :: Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358382"><span class="hs-identifier hs-var hs-var">rec_stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Stmt GhcRn (LocatedA (body GhcRn))
</span><a href="#local-6989586621681358397"><span class="hs-identifier hs-var">empty_rec_stmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: XRec GhcRn [LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358393"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-1694"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: [IdP GhcRn]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358381"><span class="hs-identifier hs-var">used_later</span></a></span><span>
</span><span id="line-1695"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: [IdP GhcRn]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358394"><span class="hs-identifier hs-var">fwds</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1696"></span><span>          </span><span class="hs-comment">-- See Note [Deterministic ApplicativeDo and RecursiveDo desugaring]</span><span>
</span><span id="line-1697"></span><span>    </span><span id="local-6989586621681358385"><span class="annot"><span class="annottext">non_rec :: Bool
</span><a href="#local-6989586621681358385"><span class="hs-identifier hs-var hs-var">non_rec</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isSingleton"><span class="hs-identifier hs-var">isSingleton</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcRn (LocatedA (body GhcRn))]
</span><a href="#local-6989586621681358393"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#isEmptyNameSet"><span class="hs-identifier hs-var">isEmptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358394"><span class="hs-identifier hs-var">fwds</span></a></span><span>
</span><span id="line-1698"></span><span>    </span><span id="local-6989586621681358381"><span class="annot"><span class="annottext">used_later :: FreeVars
</span><a href="#local-6989586621681358381"><span class="hs-identifier hs-var hs-var">used_later</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358396"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358386"><span class="hs-identifier hs-var">later_uses</span></a></span><span>
</span><span id="line-1699"></span><span>                                </span><span class="hs-comment">-- The ones needed after the RecStmt</span><span>
</span><span id="line-1700"></span><span>
</span><span id="line-1701"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
ApplicativeDo
*                                                                      *
************************************************************************

Note [ApplicativeDo]

= Example =

For a sequence of statements

 do
     x &lt;- A
     y &lt;- B x
     z &lt;- C
     return (f x y z)

We want to transform this to

  (\(x,y) z -&gt; f x y z) &lt;$&gt; (do x &lt;- A; y &lt;- B x; return (x,y)) &lt;*&gt; C

It would be easy to notice that &quot;y &lt;- B x&quot; and &quot;z &lt;- C&quot; are
independent and do something like this:

 do
     x &lt;- A
     (y,z) &lt;- (,) &lt;$&gt; B x &lt;*&gt; C
     return (f x y z)

But this isn't enough! A and C were also independent, and this
transformation loses the ability to do A and C in parallel.

The algorithm works by first splitting the sequence of statements into
independent &quot;segments&quot;, and a separate &quot;tail&quot; (the final statement). In
our example above, the segements would be

     [ x &lt;- A
     , y &lt;- B x ]

     [ z &lt;- C ]

and the tail is:

     return (f x y z)

Then we take these segments and make an Applicative expression from them:

     (\(x,y) z -&gt; return (f x y z))
       &lt;$&gt; do { x &lt;- A; y &lt;- B x; return (x,y) }
       &lt;*&gt; C

Finally, we recursively apply the transformation to each segment, to
discover any nested parallelism.

= Syntax &amp; spec =

  expr ::= ... | do {stmt_1; ..; stmt_n} expr | ...

  stmt ::= pat &lt;- expr
         | (arg_1 | ... | arg_n)  -- applicative composition, n&gt;=1
         | ...                    -- other kinds of statement (e.g. let)

  arg ::= pat &lt;- expr
        | {stmt_1; ..; stmt_n} {var_1..var_n}

(note that in the actual implementation,the expr in a do statement is
represented by a LastStmt as the final stmt, this is just a
representational issue and may change later.)

== Transformation to introduce applicative stmts ==

ado {} tail = tail
ado {pat &lt;- expr} {return expr'} = (mkArg(pat &lt;- expr)); return expr'
ado {one} tail = one : tail
ado stmts tail
  | n == 1 = ado before (ado after tail)
    where (before,after) = split(stmts_1)
  | n &gt; 1  = (mkArg(stmts_1) | ... | mkArg(stmts_n)); tail
  where
    {stmts_1 .. stmts_n} = segments(stmts)

segments(stmts) =
  -- divide stmts into segments with no interdependencies

mkArg({pat &lt;- expr}) = (pat &lt;- expr)
mkArg({stmt_1; ...; stmt_n}) =
  {stmt_1; ...; stmt_n} {vars(stmt_1) u .. u vars(stmt_n)}

split({stmt_1; ..; stmt_n) =
  ({stmt_1; ..; stmt_i}, {stmt_i+1; ..; stmt_n})
  -- 1 &lt;= i &lt;= n
  -- i is a good place to insert a bind

== Desugaring for do ==

dsDo {} expr = expr

dsDo {pat &lt;- rhs; stmts} expr =
   rhs &gt;&gt;= \pat -&gt; dsDo stmts expr

dsDo {(arg_1 | ... | arg_n)} (return expr) =
  (\argpat (arg_1) .. argpat(arg_n) -&gt; expr)
     &lt;$&gt; argexpr(arg_1)
     &lt;*&gt; ...
     &lt;*&gt; argexpr(arg_n)

dsDo {(arg_1 | ... | arg_n); stmts} expr =
  join (\argpat (arg_1) .. argpat(arg_n) -&gt; dsDo stmts expr)
     &lt;$&gt; argexpr(arg_1)
     &lt;*&gt; ...
     &lt;*&gt; argexpr(arg_n)

= Relevant modules in the rest of the compiler =

ApplicativeDo touches a few phases in the compiler:

* Renamer: The journey begins here in the renamer, where do-blocks are
  scheduled as outlined above and transformed into applicative
  combinators.  However, the code is still represented as a do-block
  with special forms of applicative statements. This allows us to
  recover the original do-block when e.g. printing type errors, where
  we don't want to show any of the applicative combinators since they
  don't exist in the source code.
  See ApplicativeStmt and ApplicativeArg in HsExpr.

* Typechecker: ApplicativeDo passes through the typechecker much like any
  other form of expression. The only crux is that the typechecker has to
  be aware of the special ApplicativeDo statements in the do-notation, and
  typecheck them appropriately.
  Relevant module: GHC.Tc.Gen.Match

* Desugarer: Any do-block which contains applicative statements is desugared
  as outlined above, to use the Applicative combinators.
  Relevant module: GHC.HsToCore.Expr

-}</span><span>
</span><span id="line-1839"></span><span>
</span><span id="line-1840"></span><span class="hs-comment">-- | The 'Name's of @return@ and @pure@. These may not be 'returnName' and</span><span>
</span><span id="line-1841"></span><span class="hs-comment">-- 'pureName' due to @QualifiedDo@ or @RebindableSyntax@.</span><span>
</span><span id="line-1842"></span><span class="hs-keyword">data</span><span> </span><span id="MonadNames"><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-var">MonadNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MonadNames"><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-var">MonadNames</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="return_name"><span class="annot"><span class="annottext">MonadNames -&gt; Name
</span><a href="GHC.Rename.Expr.html#return_name"><span class="hs-identifier hs-var hs-var">return_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="pure_name"><span class="annot"><span class="annottext">MonadNames -&gt; Name
</span><a href="GHC.Rename.Expr.html#pure_name"><span class="hs-identifier hs-var hs-var">pure_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1843"></span><span>
</span><span id="line-1844"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-type">MonadNames</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1845"></span><span>  </span><span id="local-6989586621681358370"><span class="annot"><span class="annottext">ppr :: MonadNames -&gt; SDoc
</span><a href="#local-6989586621681358370"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-type">MonadNames</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">return_name :: MonadNames -&gt; Name
</span><a href="GHC.Rename.Expr.html#return_name"><span class="hs-identifier hs-var">return_name</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621681358369"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358369"><span class="hs-identifier hs-var">return_name</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">pure_name :: MonadNames -&gt; Name
</span><a href="GHC.Rename.Expr.html#pure_name"><span class="hs-identifier hs-var">pure_name</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621681358368"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358368"><span class="hs-identifier hs-var">pure_name</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1846"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hcat"><span class="hs-identifier hs-var">hcat</span></a></span><span>
</span><span id="line-1847"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MonadNames { return_name = &quot;</span></span><span>
</span><span id="line-1848"></span><span>    </span><span class="hs-special">,</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358369"><span class="hs-identifier hs-var">return_name</span></a></span><span>
</span><span id="line-1849"></span><span>    </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, pure_name = &quot;</span></span><span>
</span><span id="line-1850"></span><span>    </span><span class="hs-special">,</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358368"><span class="hs-identifier hs-var">pure_name</span></a></span><span>
</span><span id="line-1851"></span><span>    </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1852"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1853"></span><span>
</span><span id="line-1854"></span><span class="hs-comment">-- | rearrange a list of statements using ApplicativeDoStmt.  See</span><span>
</span><span id="line-1855"></span><span class="hs-comment">-- Note [ApplicativeDo].</span><span>
</span><span id="line-1856"></span><span class="annot"><a href="GHC.Rename.Expr.html#rearrangeForApplicativeDo"><span class="hs-identifier hs-type">rearrangeForApplicativeDo</span></a></span><span>
</span><span id="line-1857"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1858"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1859"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1860"></span><span>
</span><span id="line-1861"></span><span id="rearrangeForApplicativeDo"><span class="annot"><span class="annottext">rearrangeForApplicativeDo :: HsStmtContext GhcRn
-&gt; [(ExprLStmt GhcRn, FreeVars)]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rearrangeForApplicativeDo"><span class="hs-identifier hs-var hs-var">rearrangeForApplicativeDo</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1862"></span><span class="annot"><a href="GHC.Rename.Expr.html#rearrangeForApplicativeDo"><span class="hs-identifier hs-var">rearrangeForApplicativeDo</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621681358366"><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358366"><span class="hs-identifier hs-var">one</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358366"><span class="hs-identifier hs-var">one</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1863"></span><span class="annot"><a href="GHC.Rename.Expr.html#rearrangeForApplicativeDo"><span class="hs-identifier hs-var">rearrangeForApplicativeDo</span></a></span><span> </span><span id="local-6989586621681358365"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358365"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358364"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358364"><span class="hs-identifier hs-var">stmts0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1864"></span><span>  </span><span id="local-6989586621681358363"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358363"><span class="hs-identifier hs-var">optimal_ado</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_OptimalApplicativeDo"><span class="hs-identifier hs-var">Opt_OptimalApplicativeDo</span></a></span><span>
</span><span id="line-1865"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358360"><span class="annot"><span class="annottext">stmt_tree :: ExprStmtTree
</span><a href="#local-6989586621681358360"><span class="hs-identifier hs-var hs-var">stmt_tree</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358363"><span class="hs-identifier hs-var">optimal_ado</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; ExprStmtTree
</span><a href="GHC.Rename.Expr.html#mkStmtTreeOptimal"><span class="hs-identifier hs-var">mkStmtTreeOptimal</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358358"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1866"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; ExprStmtTree
</span><a href="GHC.Rename.Expr.html#mkStmtTreeHeuristic"><span class="hs-identifier hs-var">mkStmtTreeHeuristic</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358358"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1867"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rearrangeForADo&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358360"><span class="hs-identifier hs-var">stmt_tree</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1868"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681358356"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358356"><span class="hs-identifier hs-var">return_name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDoName"><span class="hs-identifier hs-var">lookupQualifiedDoName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358365"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-1869"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681358354"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358354"><span class="hs-identifier hs-var">pure_name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; Name -&gt; RnM (Name, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDoName"><span class="hs-identifier hs-var">lookupQualifiedDoName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358365"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#pureAName"><span class="hs-identifier hs-var">pureAName</span></a></span><span>
</span><span id="line-1870"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358352"><span class="annot"><span class="annottext">monad_names :: MonadNames
</span><a href="#local-6989586621681358352"><span class="hs-identifier hs-var hs-var">monad_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-type">MonadNames</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">return_name :: Name
</span><a href="GHC.Rename.Expr.html#return_name"><span class="hs-identifier hs-var">return_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358356"><span class="hs-identifier hs-var">return_name</span></a></span><span>
</span><span id="line-1871"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pure_name :: Name
</span><a href="GHC.Rename.Expr.html#pure_name"><span class="hs-identifier hs-var">pure_name</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681358354"><span class="hs-identifier hs-var">pure_name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1872"></span><span>  </span><span class="annot"><span class="annottext">MonadNames
-&gt; HsStmtContext GhcRn
-&gt; ExprStmtTree
-&gt; [ExprLStmt GhcRn]
-&gt; FreeVars
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358352"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358365"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358360"><span class="hs-identifier hs-var">stmt_tree</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358350"><span class="hs-identifier hs-var">last</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358349"><span class="hs-identifier hs-var">last_fvs</span></a></span><span>
</span><span id="line-1873"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1874"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681358358"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358358"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621681358350"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358350"><span class="hs-identifier hs-var">last</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358349"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358349"><span class="hs-identifier hs-var">last_fvs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a}. [a] -&gt; ([a], a)
</span><a href="#local-6989586621681358348"><span class="hs-identifier hs-var">findLast</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358364"><span class="hs-identifier hs-var">stmts0</span></a></span><span>
</span><span id="line-1875"></span><span>    </span><span id="local-6989586621681358348"><span class="annot"><span class="annottext">findLast :: [a] -&gt; ([a], a)
</span><a href="#local-6989586621681358348"><span class="hs-identifier hs-var hs-var">findLast</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;findLast&quot;</span></span><span>
</span><span id="line-1876"></span><span>    </span><span class="annot"><a href="#local-6989586621681358348"><span class="hs-identifier hs-var">findLast</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681358344"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358344"><span class="hs-identifier hs-var">last</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358344"><span class="hs-identifier hs-var">last</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1877"></span><span>    </span><span class="annot"><a href="#local-6989586621681358348"><span class="hs-identifier hs-var">findLast</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358343"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358343"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681358342"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358342"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358343"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358341"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358340"><span class="hs-identifier hs-var">last</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358341"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358341"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358340"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358340"><span class="hs-identifier hs-var">last</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; ([a], a)
</span><a href="#local-6989586621681358348"><span class="hs-identifier hs-var">findLast</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358342"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1878"></span><span>
</span><span id="line-1879"></span><span class="hs-comment">-- | A tree of statements using a mixture of applicative and bind constructs.</span><span>
</span><span id="line-1880"></span><span class="hs-keyword">data</span><span> </span><span id="StmtTree"><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-var">StmtTree</span></a></span></span><span> </span><span id="local-6989586621681360404"><span class="annot"><a href="#local-6989586621681360404"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1881"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="StmtTreeOne"><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621681360404"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1882"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="StmtTreeBind"><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeBind"><span class="hs-identifier hs-var">StmtTreeBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-type">StmtTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360404"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-type">StmtTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360404"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1883"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="StmtTreeApplicative"><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeApplicative"><span class="hs-identifier hs-var">StmtTreeApplicative</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-type">StmtTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360404"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1884"></span><span>
</span><span id="line-1885"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681360848"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360848"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-type">StmtTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360848"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1886"></span><span>  </span><span id="local-6989586621681358330"><span class="annot"><span class="annottext">ppr :: StmtTree a -&gt; SDoc
</span><a href="#local-6989586621681358330"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span id="local-6989586621681358329"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358329"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StmtTreeOne&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358329"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1887"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeBind"><span class="hs-identifier hs-type">StmtTreeBind</span></a></span><span> </span><span id="local-6989586621681358327"><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358327"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681358326"><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358326"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StmtTreeBind&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1888"></span><span>                                            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358327"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358326"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1889"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeApplicative"><span class="hs-identifier hs-type">StmtTreeApplicative</span></a></span><span> </span><span id="local-6989586621681358325"><span class="annot"><span class="annottext">[StmtTree a]
</span><a href="#local-6989586621681358325"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StmtTreeApplicative&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1890"></span><span>                                            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[StmtTree a]
</span><a href="#local-6989586621681358325"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1891"></span><span>
</span><span id="line-1892"></span><span id="local-6989586621681360407"><span class="annot"><a href="GHC.Rename.Expr.html#flattenStmtTree"><span class="hs-identifier hs-type">flattenStmtTree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-type">StmtTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360407"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681360407"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1893"></span><span id="flattenStmtTree"><span class="annot"><span class="annottext">flattenStmtTree :: forall a. StmtTree a -&gt; [a]
</span><a href="GHC.Rename.Expr.html#flattenStmtTree"><span class="hs-identifier hs-var hs-var">flattenStmtTree</span></a></span></span><span> </span><span id="local-6989586621681358322"><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358322"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a}. StmtTree a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681358321"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358322"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1894"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1895"></span><span>  </span><span id="local-6989586621681358321"><span class="annot"><span class="annottext">go :: StmtTree a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681358321"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span id="local-6989586621681358319"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358319"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358318"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358318"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358319"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358318"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-1896"></span><span>  </span><span class="annot"><a href="#local-6989586621681358321"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeBind"><span class="hs-identifier hs-type">StmtTreeBind</span></a></span><span> </span><span id="local-6989586621681358317"><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358317"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681358316"><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358316"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358315"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358315"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StmtTree a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681358321"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358317"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StmtTree a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681358321"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree a
</span><a href="#local-6989586621681358316"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358315"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1897"></span><span>  </span><span class="annot"><a href="#local-6989586621681358321"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeApplicative"><span class="hs-identifier hs-type">StmtTreeApplicative</span></a></span><span> </span><span id="local-6989586621681358314"><span class="annot"><span class="annottext">[StmtTree a]
</span><a href="#local-6989586621681358314"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358313"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358313"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree a -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621681358321"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681358313"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">[StmtTree a]
</span><a href="#local-6989586621681358314"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1898"></span><span>
</span><span id="line-1899"></span><span class="hs-keyword">type</span><span> </span><span id="ExprStmtTree"><span class="annot"><a href="GHC.Rename.Expr.html#ExprStmtTree"><span class="hs-identifier hs-var">ExprStmtTree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTree"><span class="hs-identifier hs-type">StmtTree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1900"></span><span class="hs-keyword">type</span><span> </span><span id="Cost"><span class="annot"><a href="GHC.Rename.Expr.html#Cost"><span class="hs-identifier hs-var">Cost</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1901"></span><span>
</span><span id="line-1902"></span><span class="hs-comment">-- | Turn a sequence of statements into an ExprStmtTree using a</span><span>
</span><span id="line-1903"></span><span class="hs-comment">-- heuristic algorithm.  /O(n^2)/</span><span>
</span><span id="line-1904"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkStmtTreeHeuristic"><span class="hs-identifier hs-type">mkStmtTreeHeuristic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#ExprStmtTree"><span class="hs-identifier hs-type">ExprStmtTree</span></a></span><span>
</span><span id="line-1905"></span><span id="mkStmtTreeHeuristic"><span class="annot"><span class="annottext">mkStmtTreeHeuristic :: [(ExprLStmt GhcRn, FreeVars)] -&gt; ExprStmtTree
</span><a href="GHC.Rename.Expr.html#mkStmtTreeHeuristic"><span class="hs-identifier hs-var hs-var">mkStmtTreeHeuristic</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681358311"><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358311"><span class="hs-identifier hs-var">one</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358311"><span class="hs-identifier hs-var">one</span></a></span><span>
</span><span id="line-1906"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkStmtTreeHeuristic"><span class="hs-identifier hs-var">mkStmtTreeHeuristic</span></a></span><span> </span><span id="local-6989586621681358310"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358310"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1907"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; [[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="GHC.Rename.Expr.html#segments"><span class="hs-identifier hs-var">segments</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358310"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1908"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621681358308"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358308"><span class="hs-identifier hs-var">one</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
-&gt; StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
</span><a href="#local-6989586621681358307"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358308"><span class="hs-identifier hs-var">one</span></a></span><span>
</span><span id="line-1909"></span><span>    </span><span id="local-6989586621681358306"><span class="annot"><span class="annottext">[[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358306"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. [StmtTree a] -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeApplicative"><span class="hs-identifier hs-var">StmtTreeApplicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
-&gt; StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
</span><a href="#local-6989586621681358307"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">[[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358306"><span class="hs-identifier hs-var">segs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1910"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1911"></span><span>  </span><span id="local-6989586621681358307"><span class="annot"><span class="annottext">split :: [(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
-&gt; StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
</span><a href="#local-6989586621681358307"><span class="hs-identifier hs-var hs-var">split</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681358305"><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
 FreeVars)
</span><a href="#local-6989586621681358305"><span class="hs-identifier hs-var">one</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
 FreeVars)
</span><a href="#local-6989586621681358305"><span class="hs-identifier hs-var">one</span></a></span><span>
</span><span id="line-1912"></span><span>  </span><span class="annot"><a href="#local-6989586621681358307"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span id="local-6989586621681358304"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358304"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1913"></span><span>    </span><span class="annot"><span class="annottext">forall a. StmtTree a -&gt; StmtTree a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeBind"><span class="hs-identifier hs-var">StmtTreeBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; ExprStmtTree
</span><a href="GHC.Rename.Expr.html#mkStmtTreeHeuristic"><span class="hs-identifier hs-var">mkStmtTreeHeuristic</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358303"><span class="hs-identifier hs-var">before</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; ExprStmtTree
</span><a href="GHC.Rename.Expr.html#mkStmtTreeHeuristic"><span class="hs-identifier hs-var">mkStmtTreeHeuristic</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358302"><span class="hs-identifier hs-var">after</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1914"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358303"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358303"><span class="hs-identifier hs-var">before</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358302"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358302"><span class="hs-identifier hs-var">after</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
-&gt; ([(ExprLStmt GhcRn, FreeVars)], [(ExprLStmt GhcRn, FreeVars)])
</span><a href="GHC.Rename.Expr.html#splitSegment"><span class="hs-identifier hs-var">splitSegment</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358304"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1915"></span><span>
</span><span id="line-1916"></span><span class="hs-comment">-- | Turn a sequence of statements into an ExprStmtTree optimally,</span><span>
</span><span id="line-1917"></span><span class="hs-comment">-- using dynamic programming.  /O(n^3)/</span><span>
</span><span id="line-1918"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkStmtTreeOptimal"><span class="hs-identifier hs-type">mkStmtTreeOptimal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#ExprStmtTree"><span class="hs-identifier hs-type">ExprStmtTree</span></a></span><span>
</span><span id="line-1919"></span><span id="mkStmtTreeOptimal"><span class="annot"><span class="annottext">mkStmtTreeOptimal :: [(ExprLStmt GhcRn, FreeVars)] -&gt; ExprStmtTree
</span><a href="GHC.Rename.Expr.html#mkStmtTreeOptimal"><span class="hs-identifier hs-var hs-var">mkStmtTreeOptimal</span></a></span></span><span> </span><span id="local-6989586621681358300"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358300"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1920"></span><span>  </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">stmts</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- the empty case is handled by the caller;</span><span>
</span><span id="line-1921"></span><span>                           </span><span class="hs-comment">-- we don't support empty StmtTrees.</span><span>
</span><span id="line-1922"></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array (Int, Int) (ExprStmtTree, Int)
</span><a href="#local-6989586621681358299"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1923"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1924"></span><span>    </span><span id="local-6989586621681358297"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358300"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1925"></span><span>    </span><span id="local-6989586621681358296"><span class="annot"><span class="annottext">stmt_arr :: Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var hs-var">stmt_arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; (i, i) -&gt; [e] -&gt; Array i e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#listArray"><span class="hs-identifier hs-var">listArray</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358300"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span>    </span><span class="hs-comment">-- lazy cache of optimal trees for subsequences of the input</span><span>
</span><span id="line-1928"></span><span>    </span><span class="annot"><a href="#local-6989586621681358299"><span class="hs-identifier hs-type">arr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Arr.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#ExprStmtTree"><span class="hs-identifier hs-type">ExprStmtTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#Cost"><span class="hs-identifier hs-type">Cost</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1929"></span><span>    </span><span id="local-6989586621681358299"><span class="annot"><span class="annottext">arr :: Array (Int, Int) (ExprStmtTree, Int)
</span><a href="#local-6989586621681358299"><span class="hs-identifier hs-var hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; (i, i) -&gt; [(i, e)] -&gt; Array i e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1930"></span><span>             </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358293"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358292"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Int
-&gt; (StmtTree
      (GenLocated
         SrcSpanAnnA
         (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
       FreeVars),
    Int)
</span><a href="#local-6989586621681358291"><span class="hs-identifier hs-var">tree</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358293"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358292"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1931"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681358293"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358293"><span class="hs-identifier hs-var">lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1932"></span><span>             </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358292"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358292"><span class="hs-identifier hs-var">hi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358293"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358297"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1933"></span><span>
</span><span id="line-1934"></span><span>    </span><span class="hs-comment">-- compute the optimal tree for the sequence [lo..hi]</span><span>
</span><span id="line-1935"></span><span>    </span><span id="local-6989586621681358291"><span class="annot"><span class="annottext">tree :: Int
-&gt; Int
-&gt; (StmtTree
      (GenLocated
         SrcSpanAnnA
         (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
       FreeVars),
    Int)
</span><a href="#local-6989586621681358291"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span> </span><span id="local-6989586621681358290"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358290"><span class="hs-identifier hs-var">lo</span></a></span></span><span> </span><span id="local-6989586621681358289"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358289"><span class="hs-identifier hs-var">hi</span></a></span></span><span>
</span><span id="line-1936"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358289"><span class="hs-identifier hs-var">hi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358290"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358290"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1937"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1938"></span><span>         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; [[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="GHC.Rename.Expr.html#segments"><span class="hs-identifier hs-var">segments</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358288"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681358288"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358288"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358290"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358289"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1939"></span><span>           </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkStmtTree&quot;</span></span><span>
</span><span id="line-1940"></span><span>           </span><span class="hs-special">[</span><span id="local-6989586621681358287"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358287"><span class="hs-identifier hs-var">_one</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (ExprStmtTree, Int)
</span><a href="#local-6989586621681358286"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358290"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358289"><span class="hs-identifier hs-var">hi</span></a></span><span>
</span><span id="line-1941"></span><span>           </span><span id="local-6989586621681358285"><span class="annot"><span class="annottext">[[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358285"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [StmtTree a] -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeApplicative"><span class="hs-identifier hs-var">StmtTreeApplicative</span></a></span><span> </span><span class="annot"><span class="annottext">[StmtTree
   (GenLocated
      SrcSpanAnnA
      (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
    FreeVars)]
</span><a href="#local-6989586621681358284"><span class="hs-identifier hs-var">trees</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#maximum"><span class="hs-identifier hs-var">maximum</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621681358282"><span class="hs-identifier hs-var">costs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1942"></span><span>             </span><span class="hs-keyword">where</span><span>
</span><span id="line-1943"></span><span>               </span><span id="local-6989586621681358281"><span class="annot"><span class="annottext">bounds :: [(Int, Int)]
</span><a href="#local-6989586621681358281"><span class="hs-identifier hs-var hs-var">bounds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#scanl"><span class="hs-identifier hs-var">scanl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681358279"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358279"><span class="hs-identifier hs-var">hi</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358278"><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358278"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358279"><span class="hs-identifier hs-var">hi</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358279"><span class="hs-identifier hs-var">hi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358278"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358290"><span class="hs-identifier hs-var">lo</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358285"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-1944"></span><span>               </span><span class="hs-special">(</span><span id="local-6989586621681358284"><span class="annot"><span class="annottext">[StmtTree
   (GenLocated
      SrcSpanAnnA
      (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
    FreeVars)]
</span><a href="#local-6989586621681358284"><span class="hs-identifier hs-var">trees</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358282"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621681358282"><span class="hs-identifier hs-var">costs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.16.4.0/src/GHC-List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#uncurry"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (ExprStmtTree, Int)
</span><a href="#local-6989586621681358286"><span class="hs-identifier hs-var">split</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#tail"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681358281"><span class="hs-identifier hs-var">bounds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1945"></span><span>
</span><span id="line-1946"></span><span>    </span><span class="hs-comment">-- find the best place to split the segment [lo..hi]</span><span>
</span><span id="line-1947"></span><span>    </span><span class="annot"><a href="#local-6989586621681358286"><span class="hs-identifier hs-type">split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#ExprStmtTree"><span class="hs-identifier hs-type">ExprStmtTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#Cost"><span class="hs-identifier hs-type">Cost</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1948"></span><span>    </span><span id="local-6989586621681358286"><span class="annot"><span class="annottext">split :: Int -&gt; Int -&gt; (ExprStmtTree, Int)
</span><a href="#local-6989586621681358286"><span class="hs-identifier hs-var hs-var">split</span></a></span></span><span> </span><span id="local-6989586621681358273"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span></span><span> </span><span id="local-6989586621681358272"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span></span><span>
</span><span id="line-1949"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1950"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. StmtTree a -&gt; StmtTree a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeBind"><span class="hs-identifier hs-var">StmtTreeBind</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358271"><span class="hs-identifier hs-var">before</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358270"><span class="hs-identifier hs-var">after</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358269"><span class="hs-identifier hs-var">c1</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358268"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1951"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1952"></span><span>         </span><span class="hs-comment">-- As per the paper, for a sequence s1...sn, we want to find</span><span>
</span><span id="line-1953"></span><span>         </span><span class="hs-comment">-- the split with the minimum cost, where the cost is the</span><span>
</span><span id="line-1954"></span><span>         </span><span class="hs-comment">-- sum of the cost of the left and right subsequences.</span><span>
</span><span id="line-1955"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-1956"></span><span>         </span><span class="hs-comment">-- As an optimisation (also in the paper) if the cost of</span><span>
</span><span id="line-1957"></span><span>         </span><span class="hs-comment">-- s1..s(n-1) is different from the cost of s2..sn, we know</span><span>
</span><span id="line-1958"></span><span>         </span><span class="hs-comment">-- that the optimal solution is the lower of the two.  Only</span><span>
</span><span id="line-1959"></span><span>         </span><span class="hs-comment">-- in the case that these two have the same cost do we need</span><span>
</span><span id="line-1960"></span><span>         </span><span class="hs-comment">-- to do the exhaustive search.</span><span>
</span><span id="line-1961"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-1962"></span><span>         </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358271"><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358271"><span class="hs-identifier hs-var">before</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358269"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358269"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621681358270"><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358270"><span class="hs-identifier hs-var">after</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358268"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358268"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1963"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1964"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1965"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1966"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358267"><span class="hs-identifier hs-var">left_cost</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358265"><span class="hs-identifier hs-var">right_cost</span></a></span><span>
</span><span id="line-1967"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358264"><span class="hs-identifier hs-var">left</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358267"><span class="hs-identifier hs-var">left_cost</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1968"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358267"><span class="hs-identifier hs-var">left_cost</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358265"><span class="hs-identifier hs-var">right_cost</span></a></span><span>
</span><span id="line-1969"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; StmtTree a
</span><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-var">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array
  Int
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358296"><span class="hs-identifier hs-var">stmt_arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358262"><span class="hs-identifier hs-var">right</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358265"><span class="hs-identifier hs-var">right_cost</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1970"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a.
Foldable t =&gt;
(a -&gt; a -&gt; Ordering) -&gt; t a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#minimumBy"><span class="hs-identifier hs-var">minimumBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. Ord a =&gt; (b -&gt; a) -&gt; b -&gt; b -&gt; Ordering
</span><a href="../../base-4.16.4.0/src/Data-Ord.html#comparing"><span class="hs-identifier hs-var">comparing</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a} {a}. Num a =&gt; ((a, a), (a, a)) -&gt; a
</span><a href="#local-6989586621681358260"><span class="hs-identifier hs-var">cost</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[((StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars),
   Int),
  (StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars),
   Int))]
</span><a href="#local-6989586621681358259"><span class="hs-identifier hs-var">alternatives</span></a></span><span>
</span><span id="line-1971"></span><span>           </span><span class="hs-keyword">where</span><span>
</span><span id="line-1972"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681358264"><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358264"><span class="hs-identifier hs-var">left</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358267"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358267"><span class="hs-identifier hs-var">left_cost</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array (Int, Int) (ExprStmtTree, Int)
</span><a href="#local-6989586621681358299"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1973"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681358262"><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358262"><span class="hs-identifier hs-var">right</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358265"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358265"><span class="hs-identifier hs-var">right_cost</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array (Int, Int) (ExprStmtTree, Int)
</span><a href="#local-6989586621681358299"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1974"></span><span>             </span><span id="local-6989586621681358260"><span class="annot"><span class="annottext">cost :: ((a, a), (a, a)) -&gt; a
</span><a href="#local-6989586621681358260"><span class="hs-identifier hs-var hs-var">cost</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681358256"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358256"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681358255"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358255"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358256"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681358255"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1975"></span><span>             </span><span id="local-6989586621681358259"><span class="annot"><span class="annottext">alternatives :: [((StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars),
   Int),
  (StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars),
   Int))]
</span><a href="#local-6989586621681358259"><span class="hs-identifier hs-var hs-var">alternatives</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array (Int, Int) (ExprStmtTree, Int)
</span><a href="#local-6989586621681358299"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358254"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Array (Int, Int) (ExprStmtTree, Int)
</span><a href="#local-6989586621681358299"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><a href="../../base-4.16.4.0/src/GHC-Arr.html#%21"><span class="hs-operator hs-var">!</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358254"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1976"></span><span>                            </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681358254"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358254"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358273"><span class="hs-identifier hs-var">lo</span></a></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681358272"><span class="hs-identifier hs-var">hi</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1977"></span><span>
</span><span id="line-1978"></span><span>
</span><span id="line-1979"></span><span class="hs-comment">-- | Turn the ExprStmtTree back into a sequence of statements, using</span><span>
</span><span id="line-1980"></span><span class="hs-comment">-- ApplicativeStmt where necessary.</span><span>
</span><span id="line-1981"></span><span class="annot"><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-type">stmtTreeToStmts</span></a></span><span>
</span><span id="line-1982"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-type">MonadNames</span></a></span><span>
</span><span id="line-1983"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1984"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#ExprStmtTree"><span class="hs-identifier hs-type">ExprStmtTree</span></a></span><span>
</span><span id="line-1985"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>             </span><span class="hs-comment">-- ^ the &quot;tail&quot;</span><span>
</span><span id="line-1986"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>                     </span><span class="hs-comment">-- ^ free variables of the tail</span><span>
</span><span id="line-1987"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- ( output statements,</span><span>
</span><span id="line-1988"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">)</span><span>             </span><span class="hs-comment">-- , things we needed</span><span>
</span><span id="line-1989"></span><span>
</span><span id="line-1990"></span><span class="hs-comment">-- If we have a single bind, and we can do it without a join, transform</span><span>
</span><span id="line-1991"></span><span class="hs-comment">-- to an ApplicativeStmt.  This corresponds to the rule</span><span>
</span><span id="line-1992"></span><span class="hs-comment">--   dsBlock [pat &lt;- rhs] (return expr) = expr &lt;$&gt; rhs</span><span>
</span><span id="line-1993"></span><span class="hs-comment">-- In the spec, but we do it here rather than in the desugarer,</span><span>
</span><span id="line-1994"></span><span class="hs-comment">-- because we need the typechecker to typecheck the &lt;$&gt; form rather than</span><span>
</span><span id="line-1995"></span><span class="hs-comment">-- the bind form, which would give rise to a Monad constraint.</span><span>
</span><span id="line-1996"></span><span id="stmtTreeToStmts"><span class="annot"><span class="annottext">stmtTreeToStmts :: MonadNames
-&gt; HsStmtContext GhcRn
-&gt; ExprStmtTree
-&gt; [ExprLStmt GhcRn]
-&gt; FreeVars
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var hs-var">stmtTreeToStmts</span></a></span></span><span> </span><span id="local-6989586621681358253"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358253"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span> </span><span id="local-6989586621681358252"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358252"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span id="local-6989586621681358251"><span class="annot"><span class="annottext">XBindStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358251"><span class="hs-identifier hs-var">xbs</span></a></span></span><span> </span><span id="local-6989586621681358250"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358250"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681358249"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358249"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1997"></span><span>                </span><span id="local-6989586621681358248"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358248"><span class="hs-identifier hs-var">tail</span></a></span></span><span> </span><span id="local-6989586621681358247"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358247"><span class="hs-identifier hs-var">_tail_fvs</span></a></span></span><span>
</span><span id="line-1998"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358250"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span id="local-6989586621681358245"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358245"><span class="hs-identifier hs-var">tail'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MonadNames -&gt; [ExprLStmt GhcRn] -&gt; (Bool, [ExprLStmt GhcRn])
</span><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-var">needJoin</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358253"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358248"><span class="hs-identifier hs-var">tail</span></a></span><span>
</span><span id="line-1999"></span><span>  </span><span class="hs-comment">-- See Note [ApplicativeDo and strict patterns]</span><span>
</span><span id="line-2000"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [ApplicativeArg GhcRn]
-&gt; Bool
-&gt; [ExprLStmt GhcRn]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#mkApplicativeStmt"><span class="hs-identifier hs-var">mkApplicativeStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358252"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span>
</span><span id="line-2001"></span><span>                            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xarg_app_arg_one :: XApplicativeArgOne GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#xarg_app_arg_one"><span class="hs-identifier hs-var">xarg_app_arg_one</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBindStmtRn -&gt; FailOperator GhcRn
</span><a href="GHC.Hs.Expr.html#xbsrn_failOp"><span class="hs-identifier hs-var">xbsrn_failOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358251"><span class="hs-identifier hs-var">xbs</span></a></span><span>
</span><span id="line-2002"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">app_arg_pattern :: LPat GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#app_arg_pattern"><span class="hs-identifier hs-var">app_arg_pattern</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358250"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-2003"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">arg_expr :: XRec GhcRn (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#arg_expr"><span class="hs-identifier hs-var">arg_expr</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358249"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-2004"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_body_stmt :: Bool
</span><a href="Language.Haskell.Syntax.Expr.html#is_body_stmt"><span class="hs-identifier hs-var">is_body_stmt</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2005"></span><span>                            </span><span class="hs-special">}</span><span class="hs-special">]</span><span>
</span><span id="line-2006"></span><span>                      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358245"><span class="hs-identifier hs-var">tail'</span></a></span><span>
</span><span id="line-2007"></span><span class="annot"><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span id="local-6989586621681358237"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358237"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span> </span><span id="local-6989586621681358236"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358236"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358235"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358235"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2008"></span><span>                </span><span id="local-6989586621681358234"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358234"><span class="hs-identifier hs-var">tail</span></a></span></span><span> </span><span id="local-6989586621681358233"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358233"><span class="hs-identifier hs-var">_tail_fvs</span></a></span></span><span>
</span><span id="line-2009"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span id="local-6989586621681358232"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358232"><span class="hs-identifier hs-var">tail'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MonadNames -&gt; [ExprLStmt GhcRn] -&gt; (Bool, [ExprLStmt GhcRn])
</span><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-var">needJoin</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358237"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358234"><span class="hs-identifier hs-var">tail</span></a></span><span>
</span><span id="line-2010"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [ApplicativeArg GhcRn]
-&gt; Bool
-&gt; [ExprLStmt GhcRn]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#mkApplicativeStmt"><span class="hs-identifier hs-var">mkApplicativeStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358236"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2011"></span><span>      </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span>
</span><span id="line-2012"></span><span>       </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xarg_app_arg_one :: XApplicativeArgOne GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#xarg_app_arg_one"><span class="hs-identifier hs-var">xarg_app_arg_one</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2013"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">app_arg_pattern :: LPat GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#app_arg_pattern"><span class="hs-identifier hs-var">app_arg_pattern</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="GHC.Hs.Utils.html#nlWildPatName"><span class="hs-identifier hs-var">nlWildPatName</span></a></span><span>
</span><span id="line-2014"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">arg_expr :: XRec GhcRn (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#arg_expr"><span class="hs-identifier hs-var">arg_expr</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358235"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-2015"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_body_stmt :: Bool
</span><a href="Language.Haskell.Syntax.Expr.html#is_body_stmt"><span class="hs-identifier hs-var">is_body_stmt</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2016"></span><span>       </span><span class="hs-special">}</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358232"><span class="hs-identifier hs-var">tail'</span></a></span><span>
</span><span id="line-2017"></span><span>
</span><span id="line-2018"></span><span class="annot"><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span id="local-6989586621681358230"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358230"><span class="hs-identifier hs-var">_monad_names</span></a></span></span><span> </span><span id="local-6989586621681358229"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358229"><span class="hs-identifier hs-var">_ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358228"><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358228"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358227"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358227"><span class="hs-identifier hs-var">tail</span></a></span></span><span> </span><span id="local-6989586621681358226"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358226"><span class="hs-identifier hs-var">_tail_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2019"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358228"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358227"><span class="hs-identifier hs-var">tail</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2020"></span><span>
</span><span id="line-2021"></span><span class="annot"><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span id="local-6989586621681358225"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358225"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span> </span><span id="local-6989586621681358224"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358224"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeBind"><span class="hs-identifier hs-type">StmtTreeBind</span></a></span><span> </span><span id="local-6989586621681358223"><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358223"><span class="hs-identifier hs-var">before</span></a></span></span><span> </span><span id="local-6989586621681358222"><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358222"><span class="hs-identifier hs-var">after</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358221"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358221"><span class="hs-identifier hs-var">tail</span></a></span></span><span> </span><span id="local-6989586621681358220"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358220"><span class="hs-identifier hs-var">tail_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2022"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681358219"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358219"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358218"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358218"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MonadNames
-&gt; HsStmtContext GhcRn
-&gt; ExprStmtTree
-&gt; [ExprLStmt GhcRn]
-&gt; FreeVars
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358225"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358224"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358222"><span class="hs-identifier hs-var">after</span></a></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358221"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358220"><span class="hs-identifier hs-var">tail_fvs</span></a></span><span>
</span><span id="line-2023"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358217"><span class="annot"><span class="annottext">tail1_fvs :: FreeVars
</span><a href="#local-6989586621681358217"><span class="hs-identifier hs-var hs-var">tail1_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSets"><span class="hs-identifier hs-var">unionNameSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358220"><span class="hs-identifier hs-var">tail_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. StmtTree a -&gt; [a]
</span><a href="GHC.Rename.Expr.html#flattenStmtTree"><span class="hs-identifier hs-var">flattenStmtTree</span></a></span><span> </span><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358222"><span class="hs-identifier hs-var">after</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2024"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681358215"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358215"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358214"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358214"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MonadNames
-&gt; HsStmtContext GhcRn
-&gt; ExprStmtTree
-&gt; [ExprLStmt GhcRn]
-&gt; FreeVars
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358225"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358224"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">ExprStmtTree
</span><a href="#local-6989586621681358223"><span class="hs-identifier hs-var">before</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358219"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358217"><span class="hs-identifier hs-var">tail1_fvs</span></a></span><span>
</span><span id="line-2025"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358215"><span class="hs-identifier hs-var">stmts2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358218"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358214"><span class="hs-identifier hs-var">fvs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span class="annot"><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span id="local-6989586621681358213"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358213"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span> </span><span id="local-6989586621681358212"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358212"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeApplicative"><span class="hs-identifier hs-type">StmtTreeApplicative</span></a></span><span> </span><span id="local-6989586621681358211"><span class="annot"><span class="annottext">[ExprStmtTree]
</span><a href="#local-6989586621681358211"><span class="hs-identifier hs-var">trees</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681358210"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358210"><span class="hs-identifier hs-var">tail</span></a></span></span><span> </span><span id="local-6989586621681358209"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358209"><span class="hs-identifier hs-var">tail_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2028"></span><span>   </span><span id="local-6989586621681358208"><span class="annot"><span class="annottext">[(ApplicativeArg GhcRn, FreeVars)]
</span><a href="#local-6989586621681358208"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; FreeVars
-&gt; StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcRn, FreeVars)
</span><a href="#local-6989586621681358207"><span class="hs-identifier hs-var">stmtTreeArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358212"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358209"><span class="hs-identifier hs-var">tail_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ExprStmtTree]
</span><a href="#local-6989586621681358211"><span class="hs-identifier hs-var">trees</span></a></span><span>
</span><span id="line-2029"></span><span>   </span><span id="local-6989586621681358206"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681358206"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-2030"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358205"><span class="annot"><span class="annottext">[ApplicativeArg GhcRn]
</span><a href="#local-6989586621681358205"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358204"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358204"><span class="hs-identifier hs-var">fvss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.16.4.0/src/GHC-List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(ApplicativeArg GhcRn, FreeVars)]
</span><a href="#local-6989586621681358208"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-2031"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358203"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358203"><span class="hs-identifier hs-var">need_join</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358202"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358202"><span class="hs-identifier hs-var">tail'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2032"></span><span>     </span><span class="hs-comment">-- See Note [ApplicativeDo and refutable patterns]</span><span>
</span><span id="line-2033"></span><span>         </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; ApplicativeArg GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#hasRefutablePattern"><span class="hs-identifier hs-var">hasRefutablePattern</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681358206"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ApplicativeArg GhcRn]
</span><a href="#local-6989586621681358205"><span class="hs-identifier hs-var">stmts'</span></a></span><span>
</span><span id="line-2034"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358210"><span class="hs-identifier hs-var">tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2035"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">MonadNames -&gt; [ExprLStmt GhcRn] -&gt; (Bool, [ExprLStmt GhcRn])
</span><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-var">needJoin</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358213"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358210"><span class="hs-identifier hs-var">tail</span></a></span><span>
</span><span id="line-2036"></span><span>
</span><span id="line-2037"></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621681358199"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358199"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358198"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358198"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
-&gt; [ApplicativeArg GhcRn]
-&gt; Bool
-&gt; [ExprLStmt GhcRn]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#mkApplicativeStmt"><span class="hs-identifier hs-var">mkApplicativeStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358212"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[ApplicativeArg GhcRn]
</span><a href="#local-6989586621681358205"><span class="hs-identifier hs-var">stmts'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358203"><span class="hs-identifier hs-var">need_join</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358202"><span class="hs-identifier hs-var">tail'</span></a></span><span>
</span><span id="line-2038"></span><span>   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358199"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSets"><span class="hs-identifier hs-var">unionNameSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358198"><span class="hs-identifier hs-var">fvs</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681358204"><span class="hs-identifier hs-var">fvss</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2039"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2040"></span><span>   </span><span id="local-6989586621681358207"><span class="annot"><span class="annottext">stmtTreeArg :: HsStmtContext GhcRn
-&gt; FreeVars
-&gt; StmtTree
     (GenLocated
        SrcSpanAnnA
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcRn, FreeVars)
</span><a href="#local-6989586621681358207"><span class="hs-identifier hs-var hs-var">stmtTreeArg</span></a></span></span><span> </span><span id="local-6989586621681358197"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358197"><span class="hs-identifier hs-var">_ctxt</span></a></span></span><span> </span><span id="local-6989586621681358196"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358196"><span class="hs-identifier hs-var">_tail_fvs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span id="local-6989586621681358195"><span class="annot"><span class="annottext">XBindStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358195"><span class="hs-identifier hs-var">xbs</span></a></span></span><span> </span><span id="local-6989586621681358194"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358194"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681358193"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358193"><span class="hs-identifier hs-var">exp</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2041"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span>
</span><span id="line-2042"></span><span>               </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xarg_app_arg_one :: XApplicativeArgOne GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#xarg_app_arg_one"><span class="hs-identifier hs-var">xarg_app_arg_one</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBindStmtRn -&gt; FailOperator GhcRn
</span><a href="GHC.Hs.Expr.html#xbsrn_failOp"><span class="hs-identifier hs-var">xbsrn_failOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621681358195"><span class="hs-identifier hs-var">xbs</span></a></span><span>
</span><span id="line-2043"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">app_arg_pattern :: LPat GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#app_arg_pattern"><span class="hs-identifier hs-var">app_arg_pattern</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358194"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-2044"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">arg_expr :: XRec GhcRn (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#arg_expr"><span class="hs-identifier hs-var">arg_expr</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358193"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-2045"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_body_stmt :: Bool
</span><a href="Language.Haskell.Syntax.Expr.html#is_body_stmt"><span class="hs-identifier hs-var">is_body_stmt</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2046"></span><span>               </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2047"></span><span>   </span><span class="annot"><a href="#local-6989586621681358207"><span class="hs-identifier hs-var">stmtTreeArg</span></a></span><span> </span><span id="local-6989586621681358192"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358192"><span class="hs-identifier hs-var">_ctxt</span></a></span></span><span> </span><span id="local-6989586621681358191"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358191"><span class="hs-identifier hs-var">_tail_fvs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Expr.html#StmtTreeOne"><span class="hs-identifier hs-type">StmtTreeOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358190"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358190"><span class="hs-identifier hs-var">exp</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2048"></span><span>     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span>
</span><span id="line-2049"></span><span>             </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xarg_app_arg_one :: XApplicativeArgOne GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#xarg_app_arg_one"><span class="hs-identifier hs-var">xarg_app_arg_one</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2050"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">app_arg_pattern :: LPat GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#app_arg_pattern"><span class="hs-identifier hs-var">app_arg_pattern</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="GHC.Hs.Utils.html#nlWildPatName"><span class="hs-identifier hs-var">nlWildPatName</span></a></span><span>
</span><span id="line-2051"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">arg_expr :: XRec GhcRn (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#arg_expr"><span class="hs-identifier hs-var">arg_expr</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358190"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-2052"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_body_stmt :: Bool
</span><a href="Language.Haskell.Syntax.Expr.html#is_body_stmt"><span class="hs-identifier hs-var">is_body_stmt</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2053"></span><span>             </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2054"></span><span>   </span><span class="annot"><a href="#local-6989586621681358207"><span class="hs-identifier hs-var">stmtTreeArg</span></a></span><span> </span><span id="local-6989586621681358189"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358189"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358188"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358188"><span class="hs-identifier hs-var">tail_fvs</span></a></span></span><span> </span><span id="local-6989586621681358187"><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358187"><span class="hs-identifier hs-var">tree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2055"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358186"><span class="annot"><span class="annottext">stmts :: [(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358186"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. StmtTree a -&gt; [a]
</span><a href="GHC.Rename.Expr.html#flattenStmtTree"><span class="hs-identifier hs-var">flattenStmtTree</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358187"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-2056"></span><span>         </span><span id="local-6989586621681358185"><span class="annot"><span class="annottext">pvarset :: FreeVars
</span><a href="#local-6989586621681358185"><span class="hs-identifier hs-var hs-var">pvarset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass) body.
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; StmtLR (GhcPass idL) (GhcPass idR) body -&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectStmtBinders"><span class="hs-identifier hs-var">collectStmtBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    SrcSpanAnnA
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358186"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2057"></span><span>                     </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358188"><span class="hs-identifier hs-var">tail_fvs</span></a></span><span>
</span><span id="line-2058"></span><span>         </span><span id="local-6989586621681358183"><span class="annot"><span class="annottext">pvars :: [Name]
</span><a href="#local-6989586621681358183"><span class="hs-identifier hs-var hs-var">pvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; [Name]
</span><a href="GHC.Types.Name.Set.html#nameSetElemsStable"><span class="hs-identifier hs-var">nameSetElemsStable</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358185"><span class="hs-identifier hs-var">pvarset</span></a></span><span>
</span><span id="line-2059"></span><span>           </span><span class="hs-comment">-- See Note [Deterministic ApplicativeDo and RecursiveDo desugaring]</span><span>
</span><span id="line-2060"></span><span>         </span><span id="local-6989586621681358182"><span class="annot"><span class="annottext">pat :: LPat GhcRn
</span><a href="#local-6989586621681358182"><span class="hs-identifier hs-var hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn] -&gt; LPat GhcRn
</span><a href="GHC.Hs.Utils.html#mkBigLHsVarPatTup"><span class="hs-identifier hs-var">mkBigLHsVarPatTup</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358183"><span class="hs-identifier hs-var">pvars</span></a></span><span>
</span><span id="line-2061"></span><span>         </span><span id="local-6989586621681358180"><span class="annot"><span class="annottext">tup :: XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358180"><span class="hs-identifier hs-var hs-var">tup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
[IdP (GhcPass p)]
-&gt; XExplicitTuple (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#mkBigLHsVarTup"><span class="hs-identifier hs-var">mkBigLHsVarTup</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681358183"><span class="hs-identifier hs-var">pvars</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2062"></span><span>     </span><span class="hs-special">(</span><span id="local-6989586621681358178"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358178"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358177"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358177"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MonadNames
-&gt; HsStmtContext GhcRn
-&gt; ExprStmtTree
-&gt; [ExprLStmt GhcRn]
-&gt; FreeVars
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#stmtTreeToStmts"><span class="hs-identifier hs-var">stmtTreeToStmts</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358213"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358189"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">StmtTree
  (GenLocated
     SrcSpanAnnA
     (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
   FreeVars)
</span><a href="#local-6989586621681358187"><span class="hs-identifier hs-var">tree</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358185"><span class="hs-identifier hs-var">pvarset</span></a></span><span>
</span><span id="line-2063"></span><span>     </span><span class="hs-special">(</span><span id="local-6989586621681358176"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358176"><span class="hs-identifier hs-var">mb_ret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358175"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358175"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-2064"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#last"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358178"><span class="hs-identifier hs-var">stmts'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2065"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358180"><span class="hs-identifier hs-var">tup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2066"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2067"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681358173"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358173"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDoExpr"><span class="hs-identifier hs-var">lookupQualifiedDoExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358189"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#returnMName"><span class="hs-identifier hs-var">returnMName</span></a></span><span>
</span><span id="line-2068"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358171"><span class="annot"><span class="annottext">expr :: HsExpr GhcRn
</span><a href="#local-6989586621681358171"><span class="hs-identifier hs-var hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
</span><a href="GHC.Parser.Annotation.html#noComments"><span class="hs-identifier hs-var">noComments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358173"><span class="hs-identifier hs-var">ret</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358180"><span class="hs-identifier hs-var">tup</span></a></span><span>
</span><span id="line-2069"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358171"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2070"></span><span>     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span>
</span><span id="line-2071"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xarg_app_arg_many :: XApplicativeArgMany GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#xarg_app_arg_many"><span class="hs-identifier hs-var">xarg_app_arg_many</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2072"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">app_stmts :: [ExprLStmt GhcRn]
</span><a href="Language.Haskell.Syntax.Expr.html#app_stmts"><span class="hs-identifier hs-var">app_stmts</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681358178"><span class="hs-identifier hs-var">stmts'</span></a></span><span>
</span><span id="line-2073"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">final_expr :: HsExpr GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#final_expr"><span class="hs-identifier hs-var">final_expr</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358176"><span class="hs-identifier hs-var">mb_ret</span></a></span><span>
</span><span id="line-2074"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">bv_pattern :: LPat GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#bv_pattern"><span class="hs-identifier hs-var">bv_pattern</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358182"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-2075"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">stmt_context :: HsStmtContext (ApplicativeArgStmCtxPass GhcRn)
</span><a href="Language.Haskell.Syntax.Expr.html#stmt_context"><span class="hs-identifier hs-var">stmt_context</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358189"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2076"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-2077"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358175"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358177"><span class="hs-identifier hs-var">fvs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2078"></span><span>
</span><span id="line-2079"></span><span>
</span><span id="line-2080"></span><span class="hs-comment">-- | Divide a sequence of statements into segments, where no segment</span><span>
</span><span id="line-2081"></span><span class="hs-comment">-- depends on any variables defined by a statement in another segment.</span><span>
</span><span id="line-2082"></span><span class="annot"><a href="GHC.Rename.Expr.html#segments"><span class="hs-identifier hs-type">segments</span></a></span><span>
</span><span id="line-2083"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2084"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-2085"></span><span id="segments"><span class="annot"><span class="annottext">segments :: [(ExprLStmt GhcRn, FreeVars)] -&gt; [[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="GHC.Rename.Expr.html#segments"><span class="hs-identifier hs-var hs-var">segments</span></a></span></span><span> </span><span id="local-6989586621681358164"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358164"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a :: Pass} {b} {b}.
[[(GenLocated
     (Anno (StmtLR (GhcPass a) (GhcPass a) b))
     (StmtLR (GhcPass a) (GhcPass a) b),
   b)]]
-&gt; [([(GenLocated
         (Anno (StmtLR (GhcPass a) (GhcPass a) b))
         (StmtLR (GhcPass a) (GhcPass a) b),
       b)],
     Bool)]
</span><a href="#local-6989586621681358163"><span class="hs-identifier hs-var">merge</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; [[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358162"><span class="hs-identifier hs-var">walk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358164"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2086"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2087"></span><span>    </span><span id="local-6989586621681358161"><span class="annot"><span class="annottext">allvars :: FreeVars
</span><a href="#local-6989586621681358161"><span class="hs-identifier hs-var hs-var">allvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass) body.
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; StmtLR (GhcPass idL) (GhcPass idR) body -&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectStmtBinders"><span class="hs-identifier hs-var">collectStmtBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358164"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2088"></span><span>
</span><span id="line-2089"></span><span>    </span><span class="hs-comment">-- We would rather not have a segment that just has LetStmts in</span><span>
</span><span id="line-2090"></span><span>    </span><span class="hs-comment">-- it, so combine those with an adjacent segment where possible.</span><span>
</span><span id="line-2091"></span><span>    </span><span id="local-6989586621681358163"><span class="annot"><span class="annottext">merge :: [[(GenLocated
     (Anno (StmtLR (GhcPass a) (GhcPass a) b))
     (StmtLR (GhcPass a) (GhcPass a) b),
   b)]]
-&gt; [([(GenLocated
         (Anno (StmtLR (GhcPass a) (GhcPass a) b))
         (StmtLR (GhcPass a) (GhcPass a) b),
       b)],
     Bool)]
</span><a href="#local-6989586621681358163"><span class="hs-identifier hs-var hs-var">merge</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2092"></span><span>    </span><span class="annot"><a href="#local-6989586621681358163"><span class="hs-identifier hs-var">merge</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358159"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358159"><span class="hs-identifier hs-var">seg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358158"><span class="annot"><span class="annottext">[[(GenLocated
     (Anno (StmtLR (GhcPass a) (GhcPass a) b))
     (StmtLR (GhcPass a) (GhcPass a) b),
   b)]]
</span><a href="#local-6989586621681358158"><span class="hs-identifier hs-var">segs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2093"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[([(GenLocated
      (Anno (StmtLR (GhcPass a) (GhcPass a) b))
      (StmtLR (GhcPass a) (GhcPass a) b),
    b)],
  Bool)]
</span><a href="#local-6989586621681358157"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2094"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358159"><span class="hs-identifier hs-var">seg</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358156"><span class="hs-identifier hs-var">all_lets</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2095"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358155"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358155"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358154"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358154"><span class="hs-identifier hs-var">s_lets</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681358153"><span class="annot"><span class="annottext">[([(GenLocated
      (Anno (StmtLR (GhcPass a) (GhcPass a) b))
      (StmtLR (GhcPass a) (GhcPass a) b),
    b)],
  Bool)]
</span><a href="#local-6989586621681358153"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358156"><span class="hs-identifier hs-var">all_lets</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358154"><span class="hs-identifier hs-var">s_lets</span></a></span><span>
</span><span id="line-2096"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358159"><span class="hs-identifier hs-var">seg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358155"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358156"><span class="hs-identifier hs-var">all_lets</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358154"><span class="hs-identifier hs-var">s_lets</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[([(GenLocated
      (Anno (StmtLR (GhcPass a) (GhcPass a) b))
      (StmtLR (GhcPass a) (GhcPass a) b),
    b)],
  Bool)]
</span><a href="#local-6989586621681358153"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-2097"></span><span>          </span><span id="local-6989586621681358152"><span class="annot"><span class="annottext">[([(GenLocated
      (Anno (StmtLR (GhcPass a) (GhcPass a) b))
      (StmtLR (GhcPass a) (GhcPass a) b),
    b)],
  Bool)]
</span><a href="#local-6989586621681358152"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358159"><span class="hs-identifier hs-var">seg</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358156"><span class="hs-identifier hs-var">all_lets</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[([(GenLocated
      (Anno (StmtLR (GhcPass a) (GhcPass a) b))
      (StmtLR (GhcPass a) (GhcPass a) b),
    b)],
  Bool)]
</span><a href="#local-6989586621681358157"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2098"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-2099"></span><span>        </span><span id="local-6989586621681358157"><span class="annot"><span class="annottext">rest :: [([(GenLocated
      (Anno (StmtLR (GhcPass a) (GhcPass a) b))
      (StmtLR (GhcPass a) (GhcPass a) b),
    b)],
  Bool)]
</span><a href="#local-6989586621681358157"><span class="hs-identifier hs-var hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[(GenLocated
     (Anno (StmtLR (GhcPass a) (GhcPass a) b))
     (StmtLR (GhcPass a) (GhcPass a) b),
   b)]]
-&gt; [([(GenLocated
         (Anno (StmtLR (GhcPass a) (GhcPass a) b))
         (StmtLR (GhcPass a) (GhcPass a) b),
       b)],
     Bool)]
</span><a href="#local-6989586621681358163"><span class="hs-identifier hs-var">merge</span></a></span><span> </span><span class="annot"><span class="annottext">[[(GenLocated
     (Anno (StmtLR (GhcPass a) (GhcPass a) b))
     (StmtLR (GhcPass a) (GhcPass a) b),
   b)]]
</span><a href="#local-6989586621681358158"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-2100"></span><span>        </span><span id="local-6989586621681358156"><span class="annot"><span class="annottext">all_lets :: Bool
</span><a href="#local-6989586621681358156"><span class="hs-identifier hs-var hs-var">all_lets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: Pass) b. LStmt (GhcPass a) b -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isLetStmt"><span class="hs-identifier hs-var">isLetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR (GhcPass a) (GhcPass a) b))
    (StmtLR (GhcPass a) (GhcPass a) b),
  b)]
</span><a href="#local-6989586621681358159"><span class="hs-identifier hs-var">seg</span></a></span><span>
</span><span id="line-2101"></span><span>
</span><span id="line-2102"></span><span>    </span><span class="hs-comment">-- walk splits the statement sequence into segments, traversing</span><span>
</span><span id="line-2103"></span><span>    </span><span class="hs-comment">-- the sequence from the back to the front, and keeping track of</span><span>
</span><span id="line-2104"></span><span>    </span><span class="hs-comment">-- the set of free variables of the current segment.  Whenever</span><span>
</span><span id="line-2105"></span><span>    </span><span class="hs-comment">-- this set of free variables is empty, we have a complete segment.</span><span>
</span><span id="line-2106"></span><span>    </span><span class="annot"><a href="#local-6989586621681358162"><span class="hs-identifier hs-type">walk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-2107"></span><span>    </span><span id="local-6989586621681358162"><span class="annot"><span class="annottext">walk :: [(ExprLStmt GhcRn, FreeVars)] -&gt; [[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358162"><span class="hs-identifier hs-var hs-var">walk</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2108"></span><span>    </span><span class="annot"><a href="#local-6989586621681358162"><span class="hs-identifier hs-var">walk</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358149"><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358149"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358148"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358148"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358147"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358147"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358149"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358148"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358146"><span class="hs-identifier hs-var">seg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)] -&gt; [[(ExprLStmt GhcRn, FreeVars)]]
</span><a href="#local-6989586621681358162"><span class="hs-identifier hs-var">walk</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358145"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2109"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358146"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358146"><span class="hs-identifier hs-var">seg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358145"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358145"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
-&gt; [(GenLocated
       (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
       (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
     FreeVars)]
-&gt; ([(GenLocated
        (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)],
    [(GenLocated
        (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)])
</span><a href="#local-6989586621681358144"><span class="hs-identifier hs-var">chunter</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358143"><span class="hs-identifier hs-var">fvs'</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358147"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-2110"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358143"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358143"><span class="hs-identifier hs-var">fvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; FreeVars -&gt; (FreeVars, FreeVars)
</span><a href="#local-6989586621681358142"><span class="hs-identifier hs-var">stmtRefs</span></a></span><span> </span><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><a href="#local-6989586621681358149"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358148"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-2111"></span><span>
</span><span id="line-2112"></span><span>    </span><span id="local-6989586621681358144"><span class="annot"><span class="annottext">chunter :: FreeVars
-&gt; [(GenLocated
       (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
       (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
     FreeVars)]
-&gt; ([(GenLocated
        (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)],
    [(GenLocated
        (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)])
</span><a href="#local-6989586621681358144"><span class="hs-identifier hs-var hs-var">chunter</span></a></span></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2113"></span><span>    </span><span class="annot"><a href="#local-6989586621681358144"><span class="hs-identifier hs-var">chunter</span></a></span><span> </span><span id="local-6989586621681358141"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358141"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681358140"><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358140"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358139"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358139"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358138"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358138"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2114"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#isEmptyNameSet"><span class="hs-identifier hs-var">isEmptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358141"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2115"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ExprLStmt GhcRn -&gt; Bool
</span><a href="#local-6989586621681358137"><span class="hs-identifier hs-var">isStrictPatternBind</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358140"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2116"></span><span>           </span><span class="hs-comment">-- See Note [ApplicativeDo and strict patterns]</span><span>
</span><span id="line-2117"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358140"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358139"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358136"><span class="hs-identifier hs-var">chunk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358135"><span class="hs-identifier hs-var">rest'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2118"></span><span>       </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358136"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358136"><span class="hs-identifier hs-var">chunk</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358135"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358135"><span class="hs-identifier hs-var">rest'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
-&gt; [(GenLocated
       (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
       (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
     FreeVars)]
-&gt; ([(GenLocated
        (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)],
    [(GenLocated
        (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
        (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
      FreeVars)])
</span><a href="#local-6989586621681358144"><span class="hs-identifier hs-var">chunter</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358134"><span class="hs-identifier hs-var">vars'</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358138"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2119"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681358133"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358133"><span class="hs-identifier hs-var">pvars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358132"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358132"><span class="hs-identifier hs-var">evars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; FreeVars -&gt; (FreeVars, FreeVars)
</span><a href="#local-6989586621681358142"><span class="hs-identifier hs-var">stmtRefs</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358140"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358139"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-2120"></span><span>             </span><span id="local-6989586621681358134"><span class="annot"><span class="annottext">vars' :: FreeVars
</span><a href="#local-6989586621681358134"><span class="hs-identifier hs-var hs-var">vars'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358141"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#minusNameSet"><span class="hs-operator hs-var">`minusNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358133"><span class="hs-identifier hs-var">pvars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358132"><span class="hs-identifier hs-var">evars</span></a></span><span>
</span><span id="line-2121"></span><span>    </span><span class="annot"><a href="#local-6989586621681358144"><span class="hs-identifier hs-var">chunter</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358130"><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358130"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(GenLocated
    (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
    (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))),
  FreeVars)]
</span><a href="#local-6989586621681358130"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2122"></span><span>
</span><span id="line-2123"></span><span>    </span><span id="local-6989586621681358142"><span class="annot"><span class="annottext">stmtRefs :: GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; FreeVars -&gt; (FreeVars, FreeVars)
</span><a href="#local-6989586621681358142"><span class="hs-identifier hs-var hs-var">stmtRefs</span></a></span></span><span> </span><span id="local-6989586621681358129"><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358129"><span class="hs-identifier hs-var">stmt</span></a></span></span><span> </span><span id="local-6989586621681358128"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358128"><span class="hs-identifier hs-var">fvs</span></a></span></span><span>
</span><span id="line-2124"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (a :: Pass) b. LStmt (GhcPass a) b -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isLetStmt"><span class="hs-identifier hs-var">isLetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358129"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358127"><span class="hs-identifier hs-var">pvars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358126"><span class="hs-identifier hs-var">fvs'</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#minusNameSet"><span class="hs-operator hs-var">`minusNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358127"><span class="hs-identifier hs-var">pvars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2125"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358127"><span class="hs-identifier hs-var">pvars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358126"><span class="hs-identifier hs-var">fvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2126"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681358126"><span class="annot"><span class="annottext">fvs' :: FreeVars
</span><a href="#local-6989586621681358126"><span class="hs-identifier hs-var hs-var">fvs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358128"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#intersectNameSet"><span class="hs-operator hs-var">`intersectNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358161"><span class="hs-identifier hs-var">allvars</span></a></span><span>
</span><span id="line-2127"></span><span>            </span><span id="local-6989586621681358127"><span class="annot"><span class="annottext">pvars :: FreeVars
</span><a href="#local-6989586621681358127"><span class="hs-identifier hs-var hs-var">pvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (idL :: Pass) (idR :: Pass) body.
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; StmtLR (GhcPass idL) (GhcPass idR) body -&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectStmtBinders"><span class="hs-identifier hs-var">collectStmtBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (Anno (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358129"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2128"></span><span>
</span><span id="line-2129"></span><span>    </span><span class="annot"><a href="#local-6989586621681358137"><span class="hs-identifier hs-type">isStrictPatternBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2130"></span><span>    </span><span id="local-6989586621681358137"><span class="annot"><span class="annottext">isStrictPatternBind :: ExprLStmt GhcRn -&gt; Bool
</span><a href="#local-6989586621681358137"><span class="hs-identifier hs-var hs-var">isStrictPatternBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358125"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358125"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358125"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-2131"></span><span>    </span><span class="annot"><a href="#local-6989586621681358137"><span class="hs-identifier hs-var">isStrictPatternBind</span></a></span><span> </span><span class="annot"><span class="annottext">ExprLStmt GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2132"></span><span>
</span><span id="line-2133"></span><span class="hs-comment">{-
Note [ApplicativeDo and strict patterns]

A strict pattern match is really a dependency.  For example,

do
  (x,y) &lt;- A
  z &lt;- B
  return C

The pattern (_,_) must be matched strictly before we do B.  If we
allowed this to be transformed into

  (\(x,y) -&gt; \z -&gt; C) &lt;$&gt; A &lt;*&gt; B

then it could be lazier than the standard desuraging using &gt;&gt;=.  See #13875
for more examples.

Thus, whenever we have a strict pattern match, we treat it as a
dependency between that statement and the following one.  The
dependency prevents those two statements from being performed &quot;in
parallel&quot; in an ApplicativeStmt, but doesn't otherwise affect what we
can do with the rest of the statements in the same &quot;do&quot; expression.
-}</span><span>
</span><span id="line-2157"></span><span>
</span><span id="line-2158"></span><span id="local-6989586621681360380"><span class="annot"><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-type">isStrictPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360380"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-2159"></span><span id="isStrictPattern"><span class="annot"><span class="annottext">isStrictPattern :: forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var hs-var">isStrictPattern</span></a></span></span><span> </span><span id="local-6989586621681358124"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358124"><span class="hs-identifier hs-var">lpat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2160"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358124"><span class="hs-identifier hs-var">lpat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2161"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2162"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2163"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2164"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LIdP (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358119"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358119"><span class="hs-identifier hs-var">p</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358119"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2165"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358117"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358117"><span class="hs-identifier hs-var">p</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358117"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2166"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><span class="annottext">XViewPat (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358115"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358115"><span class="hs-identifier hs-var">p</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358115"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2167"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358113"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358113"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc (GhcPass p))
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358113"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2168"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2169"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2170"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2171"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2172"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2173"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2174"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2175"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2176"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2177"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;isStrictPattern: XPat&quot;</span></span><span>
</span><span id="line-2178"></span><span>
</span><span id="line-2179"></span><span class="hs-comment">{-
Note [ApplicativeDo and refutable patterns]

Refutable patterns in do blocks are desugared to use the monadic 'fail' operation.
This means that sometimes an applicative block needs to be wrapped in 'join' simply because
of a refutable pattern, in order for the types to work out.

-}</span><span>
</span><span id="line-2187"></span><span>
</span><span id="line-2188"></span><span class="annot"><a href="GHC.Rename.Expr.html#hasRefutablePattern"><span class="hs-identifier hs-type">hasRefutablePattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2189"></span><span id="hasRefutablePattern"><span class="annot"><span class="annottext">hasRefutablePattern :: DynFlags -&gt; ApplicativeArg GhcRn -&gt; Bool
</span><a href="GHC.Rename.Expr.html#hasRefutablePattern"><span class="hs-identifier hs-var hs-var">hasRefutablePattern</span></a></span></span><span> </span><span id="local-6989586621681358102"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681358102"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">app_arg_pattern :: forall idL. ApplicativeArg idL -&gt; LPat idL
</span><a href="Language.Haskell.Syntax.Expr.html#app_arg_pattern"><span class="hs-identifier hs-var">app_arg_pattern</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681358101"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358101"><span class="hs-identifier hs-var">pat</span></a></span></span><span>
</span><span id="line-2190"></span><span>                                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_body_stmt :: forall idL. ApplicativeArg idL -&gt; Bool
</span><a href="Language.Haskell.Syntax.Expr.html#is_body_stmt"><span class="hs-identifier hs-var">is_body_stmt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2191"></span><span>                                         </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass).
OutputableBndrId p =&gt;
DynFlags -&gt; LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Hs.Pat.html#isIrrefutableHsPat"><span class="hs-identifier hs-var">isIrrefutableHsPat</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681358102"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621681358101"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2192"></span><span class="annot"><a href="GHC.Rename.Expr.html#hasRefutablePattern"><span class="hs-identifier hs-var">hasRefutablePattern</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2193"></span><span>
</span><span id="line-2194"></span><span id="local-6989586621681360363"><span id="local-6989586621681360364"><span class="annot"><a href="GHC.Rename.Expr.html#isLetStmt"><span class="hs-identifier hs-type">isLetStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360364"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681360363"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-2195"></span><span id="isLetStmt"><span class="annot"><span class="annottext">isLetStmt :: forall (a :: Pass) b. LStmt (GhcPass a) b -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isLetStmt"><span class="hs-identifier hs-var hs-var">isLetStmt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno (StmtLR (GhcPass a) (GhcPass a) b)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2196"></span><span class="annot"><a href="GHC.Rename.Expr.html#isLetStmt"><span class="hs-identifier hs-var">isLetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt (GhcPass a) b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2197"></span><span>
</span><span id="line-2198"></span><span class="hs-comment">-- | Find a &quot;good&quot; place to insert a bind in an indivisible segment.</span><span>
</span><span id="line-2199"></span><span class="hs-comment">-- This is the only place where we use heuristics.  The current</span><span>
</span><span id="line-2200"></span><span class="hs-comment">-- heuristic is to peel off the first group of independent statements</span><span>
</span><span id="line-2201"></span><span class="hs-comment">-- and put the bind after those.</span><span>
</span><span id="line-2202"></span><span class="annot"><a href="GHC.Rename.Expr.html#splitSegment"><span class="hs-identifier hs-type">splitSegment</span></a></span><span>
</span><span id="line-2203"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2204"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2205"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2206"></span><span id="splitSegment"><span class="annot"><span class="annottext">splitSegment :: [(ExprLStmt GhcRn, FreeVars)]
-&gt; ([(ExprLStmt GhcRn, FreeVars)], [(ExprLStmt GhcRn, FreeVars)])
</span><a href="GHC.Rename.Expr.html#splitSegment"><span class="hs-identifier hs-var hs-var">splitSegment</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681358099"><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358099"><span class="hs-identifier hs-var">one</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358098"><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358098"><span class="hs-identifier hs-var">two</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358099"><span class="hs-identifier hs-var">one</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358098"><span class="hs-identifier hs-var">two</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2207"></span><span>  </span><span class="hs-comment">-- there is no choice when there are only two statements; this just saves</span><span>
</span><span id="line-2208"></span><span>  </span><span class="hs-comment">-- some work in a common case.</span><span>
</span><span id="line-2209"></span><span class="annot"><a href="GHC.Rename.Expr.html#splitSegment"><span class="hs-identifier hs-var">splitSegment</span></a></span><span> </span><span id="local-6989586621681358097"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358097"><span class="hs-identifier hs-var">stmts</span></a></span></span><span>
</span><span id="line-2210"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358096"><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358096"><span class="hs-identifier hs-var">lets</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358095"><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358095"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681358094"><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358094"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
[(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; Maybe
     ([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)],
      [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)],
      [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)])
</span><a href="GHC.Rename.Expr.html#slurpIndependentStmts"><span class="hs-identifier hs-var">slurpIndependentStmts</span></a></span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358097"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-2211"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358096"><span class="hs-identifier hs-var">lets</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2212"></span><span>       </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358096"><span class="hs-identifier hs-var">lets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358095"><span class="hs-identifier hs-var">binds</span></a></span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358094"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2213"></span><span>       </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358096"><span class="hs-identifier hs-var">lets</span></a></span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358095"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(LStmt GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358094"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2214"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2215"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358097"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2216"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681358092"><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358092"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681358091"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358091"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ExprLStmt GhcRn, FreeVars)
</span><a href="#local-6989586621681358092"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358091"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2217"></span><span>      </span><span id="local-6989586621681358090"><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358090"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(ExprLStmt GhcRn, FreeVars)]
</span><a href="#local-6989586621681358097"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2218"></span><span>
</span><span id="line-2219"></span><span id="local-6989586621681360351"><span class="annot"><a href="GHC.Rename.Expr.html#slurpIndependentStmts"><span class="hs-identifier hs-type">slurpIndependentStmts</span></a></span><span>
</span><span id="line-2220"></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360351"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2221"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360351"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- LetStmts</span><span>
</span><span id="line-2222"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360351"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- BindStmts</span><span>
</span><span id="line-2223"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360351"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span></span><span>
</span><span id="line-2224"></span><span id="slurpIndependentStmts"><span class="annot"><span class="annottext">slurpIndependentStmts :: forall (body :: * -&gt; *).
[(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
-&gt; Maybe
     ([(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)],
      [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)],
      [(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)])
</span><a href="GHC.Rename.Expr.html#slurpIndependentStmts"><span class="hs-identifier hs-var hs-var">slurpIndependentStmts</span></a></span></span><span> </span><span id="local-6989586621681358085"><span class="annot"><span class="annottext">[(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358085"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {p :: Pass} {idR} {body} {body} {idR} {l}.
(IdGhcP p ~ Name,
 XLetStmt (GhcPass p) idR body ~ XLetStmt (GhcPass p) idR body,
 XBindStmt (GhcPass p) idR body ~ XBindStmt (GhcPass p) idR body,
 IsPass p) =&gt;
[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; FreeVars
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; Maybe
     ([(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)])
</span><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[(LStmt GhcRn (LocatedA (body GhcRn)), FreeVars)]
</span><a href="#local-6989586621681358085"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-2225"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2226"></span><span>  </span><span class="hs-comment">-- If we encounter a BindStmt that doesn't depend on a previous BindStmt</span><span>
</span><span id="line-2227"></span><span>  </span><span class="hs-comment">-- in this group, then add it to the group. We have to be careful about</span><span>
</span><span id="line-2228"></span><span>  </span><span class="hs-comment">-- strict patterns though; splitSegments expects that if we return Just</span><span>
</span><span id="line-2229"></span><span>  </span><span class="hs-comment">-- then we have actually done some splitting. Otherwise it will go into</span><span>
</span><span id="line-2230"></span><span>  </span><span class="hs-comment">-- an infinite loop (#14163).</span><span>
</span><span id="line-2231"></span><span>  </span><span id="local-6989586621681358084"><span class="annot"><span class="annottext">go :: [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; FreeVars
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; Maybe
     ([(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)])
</span><a href="#local-6989586621681358084"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681358074"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358074"><span class="hs-identifier hs-var">lets</span></a></span></span><span> </span><span id="local-6989586621681358073"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358073"><span class="hs-identifier hs-var">indep</span></a></span></span><span> </span><span id="local-6989586621681358072"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358072"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358071"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681358071"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span id="local-6989586621681358070"><span class="annot"><span class="annottext">XBindStmt (GhcPass p) idR body
</span><a href="#local-6989586621681358070"><span class="hs-identifier hs-var">xbs</span></a></span></span><span> </span><span id="local-6989586621681358069"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358069"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681358068"><span class="annot"><span class="annottext">body
</span><a href="#local-6989586621681358068"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358067"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358067"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358066"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358066"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2232"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#disjointNameSet"><span class="hs-identifier hs-var">disjointNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358072"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358067"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: Pass). LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Rename.Expr.html#isStrictPattern"><span class="hs-identifier hs-var">isStrictPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358069"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2233"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; FreeVars
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; Maybe
     ([(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)])
</span><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358074"><span class="hs-identifier hs-var">lets</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681358071"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XBindStmt idL idR body -&gt; LPat idL -&gt; body -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-var">BindStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt (GhcPass p) idR body
</span><a href="#local-6989586621681358070"><span class="hs-identifier hs-var">xbs</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358069"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">body
</span><a href="#local-6989586621681358068"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358067"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358073"><span class="hs-identifier hs-var">indep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2234"></span><span>         </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358065"><span class="hs-identifier hs-var">bndrs'</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358066"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2235"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681358065"><span class="annot"><span class="annottext">bndrs' :: FreeVars
</span><a href="#local-6989586621681358065"><span class="hs-identifier hs-var hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358072"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-var">`unionNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. CollectPass p =&gt; CollectFlag p -&gt; LPat p -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectPatBinders"><span class="hs-identifier hs-var">collectPatBinders</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621681358069"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2236"></span><span>  </span><span class="hs-comment">-- If we encounter a LetStmt that doesn't depend on a BindStmt in this</span><span>
</span><span id="line-2237"></span><span>  </span><span class="hs-comment">-- group, then move it to the beginning, so that it doesn't interfere with</span><span>
</span><span id="line-2238"></span><span>  </span><span class="hs-comment">-- grouping more BindStmts.</span><span>
</span><span id="line-2239"></span><span>  </span><span class="hs-comment">-- TODO: perhaps we shouldn't do this if there are any strict bindings,</span><span>
</span><span id="line-2240"></span><span>  </span><span class="hs-comment">-- because we might be moving evaluation earlier.</span><span>
</span><span id="line-2241"></span><span>  </span><span class="annot"><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681358064"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358064"><span class="hs-identifier hs-var">lets</span></a></span></span><span> </span><span id="local-6989586621681358063"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358063"><span class="hs-identifier hs-var">indep</span></a></span></span><span> </span><span id="local-6989586621681358062"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358062"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358061"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681358061"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span id="local-6989586621681358060"><span class="annot"><span class="annottext">XLetStmt (GhcPass p) idR body
</span><a href="#local-6989586621681358060"><span class="hs-identifier hs-var">noExtField</span></a></span></span><span> </span><span id="local-6989586621681358059"><span class="annot"><span class="annottext">HsLocalBindsLR (GhcPass p) idR
</span><a href="#local-6989586621681358059"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358058"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358058"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681358057"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358057"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2242"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#disjointNameSet"><span class="hs-identifier hs-var">disjointNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358062"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358058"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-2243"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; FreeVars
-&gt; [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
-&gt; Maybe
     ([(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)],
      [(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)])
</span><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681358061"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLetStmt idL idR body
-&gt; HsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt (GhcPass p) idR body
</span><a href="#local-6989586621681358060"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBindsLR (GhcPass p) idR
</span><a href="#local-6989586621681358059"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358058"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358064"><span class="hs-identifier hs-var">lets</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358063"><span class="hs-identifier hs-var">indep</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358062"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358057"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2244"></span><span>  </span><span class="annot"><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2245"></span><span>  </span><span class="annot"><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2246"></span><span>  </span><span class="annot"><a href="#local-6989586621681358084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681358056"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358056"><span class="hs-identifier hs-var">lets</span></a></span></span><span> </span><span id="local-6989586621681358055"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358055"><span class="hs-identifier hs-var">indep</span></a></span></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358054"><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358054"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358056"><span class="hs-identifier hs-var">lets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358055"><span class="hs-identifier hs-var">indep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(GenLocated l (StmtLR (GhcPass p) idR body), FreeVars)]
</span><a href="#local-6989586621681358054"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2247"></span><span>
</span><span id="line-2248"></span><span class="hs-comment">-- | Build an ApplicativeStmt, and strip the &quot;return&quot; from the tail</span><span>
</span><span id="line-2249"></span><span class="hs-comment">-- if necessary.</span><span>
</span><span id="line-2250"></span><span class="hs-comment">--</span><span>
</span><span id="line-2251"></span><span class="hs-comment">-- For example, if we start with</span><span>
</span><span id="line-2252"></span><span class="hs-comment">--   do x &lt;- E1; y &lt;- E2; return (f x y)</span><span>
</span><span id="line-2253"></span><span class="hs-comment">-- then we get</span><span>
</span><span id="line-2254"></span><span class="hs-comment">--   do (E1[x] | E2[y]); f x y</span><span>
</span><span id="line-2255"></span><span class="hs-comment">--</span><span>
</span><span id="line-2256"></span><span class="hs-comment">-- the LastStmt in this case has the return removed, but we set the</span><span>
</span><span id="line-2257"></span><span class="hs-comment">-- flag on the LastStmt to indicate this, so that we can print out the</span><span>
</span><span id="line-2258"></span><span class="hs-comment">-- original statement correctly in error messages.  It is easier to do</span><span>
</span><span id="line-2259"></span><span class="hs-comment">-- it this way rather than try to ignore the return later in both the</span><span>
</span><span id="line-2260"></span><span class="hs-comment">-- typechecker and the desugarer (I tried it that way first!).</span><span>
</span><span id="line-2261"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkApplicativeStmt"><span class="hs-identifier hs-type">mkApplicativeStmt</span></a></span><span>
</span><span id="line-2262"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2263"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>             </span><span class="hs-comment">-- ^ The args</span><span>
</span><span id="line-2264"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                               </span><span class="hs-comment">-- ^ True &lt;=&gt; need a join</span><span>
</span><span id="line-2265"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- ^ The body statements</span><span>
</span><span id="line-2266"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2267"></span><span id="mkApplicativeStmt"><span class="annot"><span class="annottext">mkApplicativeStmt :: HsStmtContext GhcRn
-&gt; [ApplicativeArg GhcRn]
-&gt; Bool
-&gt; [ExprLStmt GhcRn]
-&gt; RnM ([ExprLStmt GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#mkApplicativeStmt"><span class="hs-identifier hs-var hs-var">mkApplicativeStmt</span></a></span></span><span> </span><span id="local-6989586621681358053"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358053"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681358052"><span class="annot"><span class="annottext">[ApplicativeArg GhcRn]
</span><a href="#local-6989586621681358052"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681358051"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358051"><span class="hs-identifier hs-var">need_join</span></a></span></span><span> </span><span id="local-6989586621681358050"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358050"><span class="hs-identifier hs-var">body_stmts</span></a></span></span><span>
</span><span id="line-2268"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358049"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358049"><span class="hs-identifier hs-var">fmap_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358048"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358048"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358053"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fmapName"><span class="hs-identifier hs-var">fmapName</span></a></span><span>
</span><span id="line-2269"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358047"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358047"><span class="hs-identifier hs-var">ap_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358046"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358046"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358053"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#apAName"><span class="hs-identifier hs-var">apAName</span></a></span><span>
</span><span id="line-2270"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358044"><span class="annot"><span class="annottext">Maybe SyntaxExprRn
</span><a href="#local-6989586621681358044"><span class="hs-identifier hs-var">mb_join</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358043"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358043"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-2271"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358051"><span class="hs-identifier hs-var">need_join</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-2272"></span><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358042"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358042"><span class="hs-identifier hs-var">join_op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358041"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358041"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#lookupQualifiedDoStmtName"><span class="hs-identifier hs-var">lookupQualifiedDoStmtName</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681358053"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#joinMName"><span class="hs-identifier hs-var">joinMName</span></a></span><span>
</span><span id="line-2273"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358042"><span class="hs-identifier hs-var">join_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358041"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2274"></span><span>           </span><span class="hs-keyword">else</span><span>
</span><span id="line-2275"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2276"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681358039"><span class="annot"><span class="annottext">applicative_stmt :: GenLocated
  SrcSpanAnnA
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358039"><span class="hs-identifier hs-var hs-var">applicative_stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall idL idR body.
XApplicativeStmt idL idR body
-&gt; [(SyntaxExpr idR, ApplicativeArg idL)]
-&gt; Maybe (SyntaxExpr idR)
-&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-var">ApplicativeStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2277"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358049"><span class="hs-identifier hs-var">fmap_op</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#repeat"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681358047"><span class="hs-identifier hs-var">ap_op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ApplicativeArg GhcRn]
</span><a href="#local-6989586621681358052"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2278"></span><span>               </span><span class="annot"><span class="annottext">Maybe SyntaxExprRn
</span><a href="#local-6989586621681358044"><span class="hs-identifier hs-var">mb_join</span></a></span><span>
</span><span id="line-2279"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (StmtLR GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621681358039"><span class="hs-identifier hs-var">applicative_stmt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358050"><span class="hs-identifier hs-var">body_stmts</span></a></span><span>
</span><span id="line-2280"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358048"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358046"><span class="hs-identifier hs-var">fvs2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681358043"><span class="hs-identifier hs-var">fvs3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2281"></span><span>
</span><span id="line-2282"></span><span class="hs-comment">-- | Given the statements following an ApplicativeStmt, determine whether</span><span>
</span><span id="line-2283"></span><span class="hs-comment">-- we need a @join@ or not, and remove the @return@ if necessary.</span><span>
</span><span id="line-2284"></span><span class="annot"><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-type">needJoin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-type">MonadNames</span></a></span><span>
</span><span id="line-2285"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2286"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2287"></span><span id="needJoin"><span class="annot"><span class="annottext">needJoin :: MonadNames -&gt; [ExprLStmt GhcRn] -&gt; (Bool, [ExprLStmt GhcRn])
</span><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-var hs-var">needJoin</span></a></span></span><span> </span><span id="local-6989586621681358038"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358038"><span class="hs-identifier hs-var">_monad_names</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- we're in an ApplicativeArg</span><span>
</span><span id="line-2288"></span><span class="annot"><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-var">needJoin</span></a></span><span> </span><span id="local-6989586621681358037"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358037"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681358036"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358036"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcRn GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358035"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358035"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358034"><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621681358034"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2289"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681358033"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358033"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681358032"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358032"><span class="hs-identifier hs-var">wasDollar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MonadNames
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Maybe (XRec GhcRn (HsExpr GhcRn), Bool)
</span><a href="GHC.Rename.Expr.html#isReturnApp"><span class="hs-identifier hs-var">isReturnApp</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358037"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681358035"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2290"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681358036"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall idL idR body.
XLastStmt idL idR body
-&gt; body -&gt; Maybe Bool -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-var">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358033"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681358032"><span class="hs-identifier hs-var">wasDollar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621681358034"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2291"></span><span class="annot"><a href="GHC.Rename.Expr.html#needJoin"><span class="hs-identifier hs-var">needJoin</span></a></span><span> </span><span id="local-6989586621681358030"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358030"><span class="hs-identifier hs-var">_monad_names</span></a></span></span><span> </span><span id="local-6989586621681358029"><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358029"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ExprLStmt GhcRn]
</span><a href="#local-6989586621681358029"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2292"></span><span>
</span><span id="line-2293"></span><span class="hs-comment">-- | @(Just e, False)@, if the expression is @return e@</span><span>
</span><span id="line-2294"></span><span class="hs-comment">--   @(Just e, True)@ if the expression is @return $ e@,</span><span>
</span><span id="line-2295"></span><span class="hs-comment">--   otherwise @Nothing@.</span><span>
</span><span id="line-2296"></span><span class="annot"><a href="GHC.Rename.Expr.html#isReturnApp"><span class="hs-identifier hs-type">isReturnApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#MonadNames"><span class="hs-identifier hs-type">MonadNames</span></a></span><span>
</span><span id="line-2297"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2298"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-2299"></span><span id="isReturnApp"><span class="annot"><span class="annottext">isReturnApp :: MonadNames
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Maybe (XRec GhcRn (HsExpr GhcRn), Bool)
</span><a href="GHC.Rename.Expr.html#isReturnApp"><span class="hs-identifier hs-var hs-var">isReturnApp</span></a></span></span><span> </span><span id="local-6989586621681358028"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358028"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358027"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358027"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MonadNames
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Maybe (XRec GhcRn (HsExpr GhcRn), Bool)
</span><a href="GHC.Rename.Expr.html#isReturnApp"><span class="hs-identifier hs-var">isReturnApp</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358028"><span class="hs-identifier hs-var">monad_names</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358027"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2300"></span><span class="annot"><a href="GHC.Rename.Expr.html#isReturnApp"><span class="hs-identifier hs-var">isReturnApp</span></a></span><span> </span><span id="local-6989586621681358026"><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358026"><span class="hs-identifier hs-var">monad_names</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358025"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358025"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358025"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2301"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358024"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358024"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681358023"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358023"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681358022"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358022"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Bool
</span><a href="#local-6989586621681358021"><span class="hs-identifier hs-var">is_return</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358024"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Bool
</span><a href="#local-6989586621681358020"><span class="hs-identifier hs-var">is_dollar</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358023"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358022"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2302"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358019"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358019"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681358018"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358018"><span class="hs-identifier hs-var">arg</span></a></span></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Bool
</span><a href="#local-6989586621681358021"><span class="hs-identifier hs-var">is_return</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358019"><span class="hs-identifier hs-var">f</span></a></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681358018"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2303"></span><span>  </span><span id="local-6989586621681358017"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681358017"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2304"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2305"></span><span>  </span><span id="local-6989586621681358012"><span class="annot"><span class="annottext">is_var :: (IdP p -&gt; Bool) -&gt; GenLocated l (HsExpr p) -&gt; Bool
</span><a href="#local-6989586621681358012"><span class="hs-identifier hs-var hs-var">is_var</span></a></span></span><span> </span><span id="local-6989586621681358011"><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><a href="#local-6989586621681358011"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar p
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358010"><span class="annot"><span class="annottext">XRec p (HsExpr p)
</span><a href="#local-6989586621681358010"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdP p -&gt; Bool) -&gt; GenLocated l (HsExpr p) -&gt; Bool
</span><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><a href="#local-6989586621681358011"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">XRec p (HsExpr p)
</span><a href="#local-6989586621681358010"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2306"></span><span>  </span><span class="annot"><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span id="local-6989586621681358009"><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><a href="#local-6989586621681358009"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTypeE p
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358008"><span class="annot"><span class="annottext">XRec p (HsExpr p)
</span><a href="#local-6989586621681358008"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc p)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdP p -&gt; Bool) -&gt; GenLocated l (HsExpr p) -&gt; Bool
</span><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><a href="#local-6989586621681358009"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">XRec p (HsExpr p)
</span><a href="#local-6989586621681358008"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2307"></span><span>  </span><span class="annot"><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span id="local-6989586621681358007"><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><a href="#local-6989586621681358007"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681358006"><span class="annot"><span class="annottext">IdP p
</span><a href="#local-6989586621681358006"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><a href="#local-6989586621681358007"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">IdP p
</span><a href="#local-6989586621681358006"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2308"></span><span>       </span><span class="hs-comment">-- TODO: I don't know how to get this right for rebindable syntax</span><span>
</span><span id="line-2309"></span><span>  </span><span class="annot"><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span class="annot"><span class="annottext">IdP p -&gt; Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">GenLocated l (HsExpr p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2310"></span><span>
</span><span id="line-2311"></span><span>  </span><span id="local-6989586621681358021"><span class="annot"><span class="annottext">is_return :: GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Bool
</span><a href="#local-6989586621681358021"><span class="hs-identifier hs-var hs-var">is_return</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {p} {l} {l}.
(XRec p (HsExpr p) ~ GenLocated l (HsExpr p),
 XRec p (IdP p) ~ GenLocated l (IdP p)) =&gt;
(IdP p -&gt; Bool) -&gt; GenLocated l (HsExpr p) -&gt; Bool
</span><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681358005"><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681358005"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681358005"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MonadNames -&gt; Name
</span><a href="GHC.Rename.Expr.html#return_name"><span class="hs-identifier hs-var">return_name</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358026"><span class="hs-identifier hs-var">monad_names</span></a></span><span>
</span><span id="line-2312"></span><span>                         </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">IdP GhcRn
</span><a href="#local-6989586621681358005"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MonadNames -&gt; Name
</span><a href="GHC.Rename.Expr.html#pure_name"><span class="hs-identifier hs-var">pure_name</span></a></span><span> </span><span class="annot"><span class="annottext">MonadNames
</span><a href="#local-6989586621681358026"><span class="hs-identifier hs-var">monad_names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2313"></span><span>  </span><span id="local-6989586621681358020"><span class="annot"><span class="annottext">is_dollar :: GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; Bool
</span><a href="#local-6989586621681358020"><span class="hs-identifier hs-var hs-var">is_dollar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {p} {l} {l}.
(XRec p (HsExpr p) ~ GenLocated l (HsExpr p),
 XRec p (IdP p) ~ GenLocated l (IdP p)) =&gt;
(IdP p -&gt; Bool) -&gt; GenLocated l (HsExpr p) -&gt; Bool
</span><a href="#local-6989586621681358012"><span class="hs-identifier hs-var">is_var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#dollarIdKey"><span class="hs-identifier hs-var">dollarIdKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2314"></span><span>
</span><span id="line-2315"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsubsection{Errors}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2322"></span><span>
</span><span id="line-2323"></span><span class="annot"><a href="GHC.Rename.Expr.html#checkEmptyStmts"><span class="hs-identifier hs-type">checkEmptyStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2324"></span><span class="hs-comment">-- We've seen an empty sequence of Stmts... is that ok?</span><span>
</span><span id="line-2325"></span><span id="checkEmptyStmts"><span class="annot"><span class="annottext">checkEmptyStmts :: HsStmtContext GhcRn -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkEmptyStmts"><span class="hs-identifier hs-var hs-var">checkEmptyStmts</span></a></span></span><span> </span><span id="local-6989586621681357997"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357997"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-2326"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. HsStmtContext id -&gt; Bool
</span><a href="GHC.Rename.Expr.html#okEmpty"><span class="hs-identifier hs-var">okEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357997"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsStmtContext GhcRn -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#emptyErr"><span class="hs-identifier hs-var">emptyErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357997"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2327"></span><span>
</span><span id="line-2328"></span><span id="local-6989586621681357994"><span class="annot"><a href="GHC.Rename.Expr.html#okEmpty"><span class="hs-identifier hs-type">okEmpty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681357994"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-2329"></span><span id="okEmpty"><span class="annot"><span class="annottext">okEmpty :: forall id. HsStmtContext id -&gt; Bool
</span><a href="GHC.Rename.Expr.html#okEmpty"><span class="hs-identifier hs-var hs-var">okEmpty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#PatGuard"><span class="hs-identifier hs-type">PatGuard</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2330"></span><span class="annot"><a href="GHC.Rename.Expr.html#okEmpty"><span class="hs-identifier hs-var">okEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext a
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2331"></span><span>
</span><span id="line-2332"></span><span class="annot"><a href="GHC.Rename.Expr.html#emptyErr"><span class="hs-identifier hs-type">emptyErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2333"></span><span id="emptyErr"><span class="annot"><span class="annottext">emptyErr :: HsStmtContext GhcRn -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#emptyErr"><span class="hs-identifier hs-var hs-var">emptyErr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtCtxt"><span class="hs-identifier hs-type">ParStmtCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Empty statement group in parallel comprehension&quot;</span></span><span>
</span><span id="line-2334"></span><span class="annot"><a href="GHC.Rename.Expr.html#emptyErr"><span class="hs-identifier hs-var">emptyErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmtCtxt"><span class="hs-identifier hs-type">TransStmtCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Empty statement group preceding 'group' or 'then'&quot;</span></span><span>
</span><span id="line-2335"></span><span class="annot"><a href="GHC.Rename.Expr.html#emptyErr"><span class="hs-identifier hs-var">emptyErr</span></a></span><span> </span><span id="local-6989586621681357993"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357993"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Empty&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. (Outputable (IdP p), UnXRec p) =&gt; HsStmtContext p -&gt; SDoc
</span><a href="Language.Haskell.Syntax.Expr.html#pprStmtContext"><span class="hs-identifier hs-var">pprStmtContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357993"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2336"></span><span>
</span><span id="line-2337"></span><span class="hs-comment">----------------------</span><span>
</span><span id="line-2338"></span><span id="local-6989586621681360570"><span class="annot"><a href="GHC.Rename.Expr.html#checkLastStmt"><span class="hs-identifier hs-type">checkLastStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360570"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2339"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360570"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2340"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360570"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-2341"></span><span id="checkLastStmt"><span class="annot"><span class="annottext">checkLastStmt :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsStmtContext GhcRn
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LStmt GhcPs (LocatedA (body GhcPs)))
</span><a href="GHC.Rename.Expr.html#checkLastStmt"><span class="hs-identifier hs-var hs-var">checkLastStmt</span></a></span></span><span> </span><span id="local-6989586621681357967"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357967"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681357966"><span class="annot"><span class="annottext">lstmt :: LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681357965"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681357965"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681357964"><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357964"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2342"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357967"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2343"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ListComp"><span class="hs-identifier hs-var">ListComp</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357963"><span class="hs-identifier hs-var">check_comp</span></a></span><span>
</span><span id="line-2344"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#MonadComp"><span class="hs-identifier hs-var">MonadComp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357963"><span class="hs-identifier hs-var">check_comp</span></a></span><span>
</span><span id="line-2345"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowExpr"><span class="hs-identifier hs-var">ArrowExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357962"><span class="hs-identifier hs-var">check_do</span></a></span><span>
</span><span id="line-2346"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DoExpr"><span class="hs-identifier hs-type">DoExpr</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357962"><span class="hs-identifier hs-var">check_do</span></a></span><span>
</span><span id="line-2347"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MDoExpr"><span class="hs-identifier hs-type">MDoExpr</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357962"><span class="hs-identifier hs-var">check_do</span></a></span><span>
</span><span id="line-2348"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357961"><span class="hs-identifier hs-var">check_other</span></a></span><span>
</span><span id="line-2349"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2350"></span><span>    </span><span id="local-6989586621681357962"><span class="annot"><span class="annottext">check_do :: IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357962"><span class="hs-identifier hs-var hs-var">check_do</span></a></span></span><span>    </span><span class="hs-comment">-- Expect BodyStmt, and change it to LastStmt</span><span>
</span><span id="line-2351"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357964"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2352"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357960"><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681357960"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681357965"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (idR :: Pass) (bodyR :: * -&gt; *) (idL :: Pass).
IsPass idR =&gt;
LocatedA (bodyR (GhcPass idR))
-&gt; StmtLR
     (GhcPass idL) (GhcPass idR) (LocatedA (bodyR (GhcPass idR)))
</span><a href="GHC.Hs.Utils.html#mkLastStmt"><span class="hs-identifier hs-var">mkLastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621681357960"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2353"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span><span>   </span><span class="hs-comment">-- &quot;Deriving&quot; clauses may generate a</span><span>
</span><span id="line-2354"></span><span>                                             </span><span class="hs-comment">-- LastStmt directly (unlike the parser)</span><span>
</span><span id="line-2355"></span><span>          </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357958"><span class="hs-identifier hs-var">last_error</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357964"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2356"></span><span>    </span><span id="local-6989586621681357958"><span class="annot"><span class="annottext">last_error :: SDoc
</span><a href="#local-6989586621681357958"><span class="hs-identifier hs-var hs-var">last_error</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The last statement in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. (Outputable (IdP p), UnXRec p) =&gt; HsStmtContext p -&gt; SDoc
</span><a href="Language.Haskell.Syntax.Expr.html#pprAStmtContext"><span class="hs-identifier hs-var">pprAStmtContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357967"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2357"></span><span>                  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;must be an expression&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2358"></span><span>
</span><span id="line-2359"></span><span>    </span><span id="local-6989586621681357963"><span class="annot"><span class="annottext">check_comp :: IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357963"><span class="hs-identifier hs-var hs-var">check_comp</span></a></span></span><span>  </span><span class="hs-comment">-- Expect LastStmt; this should be enforced by the parser!</span><span>
</span><span id="line-2360"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357964"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2361"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span><span>
</span><span id="line-2362"></span><span>          </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checkLastStmt&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2363"></span><span>
</span><span id="line-2364"></span><span>    </span><span id="local-6989586621681357961"><span class="annot"><span class="annottext">check_other :: IOEnv
  (Env TcGblEnv TcLclEnv)
  (GenLocated
     SrcSpanAnnA (StmtLR GhcPs GhcPs (LocatedA (body GhcPs))))
</span><a href="#local-6989586621681357961"><span class="hs-identifier hs-var hs-var">check_other</span></a></span></span><span> </span><span class="hs-comment">-- Behave just as if this wasn't the last stmt</span><span>
</span><span id="line-2365"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
HsStmtContext GhcRn
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkStmt"><span class="hs-identifier hs-var">checkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357967"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357966"><span class="hs-identifier hs-var">lstmt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2366"></span><span>
</span><span id="line-2367"></span><span class="hs-comment">-- Checking when a particular Stmt is ok</span><span>
</span><span id="line-2368"></span><span id="local-6989586621681360566"><span class="annot"><a href="GHC.Rename.Expr.html#checkStmt"><span class="hs-identifier hs-type">checkStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2369"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360566"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2370"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-2371"></span><span id="checkStmt"><span class="annot"><span class="annottext">checkStmt :: forall (body :: * -&gt; *).
HsStmtContext GhcRn
-&gt; LStmt GhcPs (LocatedA (body GhcPs))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkStmt"><span class="hs-identifier hs-var hs-var">checkStmt</span></a></span></span><span> </span><span id="local-6989586621681357951"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357951"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno (StmtLR GhcPs GhcPs (LocatedA (body GhcPs)))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357950"><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357950"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2372"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681357949"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357949"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-2373"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okStmt"><span class="hs-identifier hs-var">okStmt</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357949"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357951"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357950"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2374"></span><span>           </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2375"></span><span>           </span><span class="annot"><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-type">NotValid</span></a></span><span> </span><span id="local-6989586621681357945"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357945"><span class="hs-identifier hs-var">extra</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357944"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357945"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2376"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2377"></span><span>   </span><span id="local-6989586621681357944"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681357944"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unexpected&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: Pass) body. Stmt (GhcPass a) body -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="annot"><span class="annottext">StmtLR GhcPs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357950"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PtrString -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ptext"><span class="hs-identifier hs-var">ptext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; PtrString
</span><a href="GHC.Data.FastString.html#sLit"><span class="hs-identifier hs-var">sLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;statement&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2378"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. (Outputable (IdP p), UnXRec p) =&gt; HsStmtContext p -&gt; SDoc
</span><a href="Language.Haskell.Syntax.Expr.html#pprAStmtContext"><span class="hs-identifier hs-var">pprAStmtContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357951"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2379"></span><span>
</span><span id="line-2380"></span><span id="local-6989586621681360325"><span id="local-6989586621681360326"><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-type">pprStmtCat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360326"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681360325"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span></span><span>
</span><span id="line-2381"></span><span id="pprStmtCat"><span class="annot"><span class="annottext">pprStmtCat :: forall (a :: Pass) body. Stmt (GhcPass a) body -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var hs-var">pprStmtCat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;transform&quot;</span></span><span>
</span><span id="line-2382"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;return expression&quot;</span></span><span>
</span><span id="line-2383"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-2384"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;binding&quot;</span></span><span>
</span><span id="line-2385"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;let&quot;</span></span><span>
</span><span id="line-2386"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rec&quot;</span></span><span>
</span><span id="line-2387"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;parallel&quot;</span></span><span>
</span><span id="line-2388"></span><span class="annot"><a href="GHC.Rename.Expr.html#pprStmtCat"><span class="hs-identifier hs-var">pprStmtCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pprStmtCat: ApplicativeStmt&quot;</span></span><span>
</span><span id="line-2389"></span><span>
</span><span id="line-2390"></span><span class="hs-comment">------------</span><span>
</span><span id="line-2391"></span><span class="annot"><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-type">emptyInvalid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span>  </span><span class="hs-comment">-- Payload is the empty document</span><span>
</span><span id="line-2392"></span><span id="emptyInvalid"><span class="annot"><span class="annottext">emptyInvalid :: Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var hs-var">emptyInvalid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Validity
</span><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-var">NotValid</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-2393"></span><span>
</span><span id="line-2394"></span><span id="local-6989586621681360328"><span class="annot"><a href="GHC.Rename.Expr.html#okStmt"><span class="hs-identifier hs-type">okStmt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#okDoStmt"><span class="hs-identifier hs-type">okDoStmt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#okCompStmt"><span class="hs-identifier hs-type">okCompStmt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#okParStmt"><span class="hs-identifier hs-type">okParStmt</span></a></span><span>
</span><span id="line-2395"></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2396"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360328"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span></span><span>
</span><span id="line-2397"></span><span class="hs-comment">-- Return Nothing if OK, (Just extra) if not ok</span><span>
</span><span id="line-2398"></span><span class="hs-comment">-- The &quot;extra&quot; is an SDoc that is appended to a generic error message</span><span>
</span><span id="line-2399"></span><span>
</span><span id="line-2400"></span><span id="okStmt"><span class="annot"><span class="annottext">okStmt :: forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okStmt"><span class="hs-identifier hs-var hs-var">okStmt</span></a></span></span><span> </span><span id="local-6989586621681357934"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681357933"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681357932"><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span></span><span>
</span><span id="line-2401"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2402"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#PatGuard"><span class="hs-identifier hs-type">PatGuard</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
Stmt GhcPs (LocatedA (body GhcPs)) -&gt; Validity
</span><a href="GHC.Rename.Expr.html#okPatGuardStmt"><span class="hs-identifier hs-var">okPatGuardStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2403"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtCtxt"><span class="hs-identifier hs-type">ParStmtCtxt</span></a></span><span> </span><span id="local-6989586621681357930"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357930"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okParStmt"><span class="hs-identifier hs-var">okParStmt</span></a></span><span>  </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357930"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2404"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DoExpr"><span class="hs-identifier hs-type">DoExpr</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okDoStmt"><span class="hs-identifier hs-var">okDoStmt</span></a></span><span>   </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2405"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MDoExpr"><span class="hs-identifier hs-type">MDoExpr</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okDoStmt"><span class="hs-identifier hs-var">okDoStmt</span></a></span><span>   </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2406"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowExpr"><span class="hs-identifier hs-var">ArrowExpr</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okDoStmt"><span class="hs-identifier hs-var">okDoStmt</span></a></span><span>   </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2407"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#GhciStmtCtxt"><span class="hs-identifier hs-var">GhciStmtCtxt</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okDoStmt"><span class="hs-identifier hs-var">okDoStmt</span></a></span><span>   </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2408"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ListComp"><span class="hs-identifier hs-var">ListComp</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okCompStmt"><span class="hs-identifier hs-var">okCompStmt</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2409"></span><span>      </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#MonadComp"><span class="hs-identifier hs-var">MonadComp</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okCompStmt"><span class="hs-identifier hs-var">okCompStmt</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357933"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2410"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmtCtxt"><span class="hs-identifier hs-type">TransStmtCtxt</span></a></span><span> </span><span id="local-6989586621681357929"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357929"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okStmt"><span class="hs-identifier hs-var">okStmt</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357934"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357929"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357932"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2411"></span><span>
</span><span id="line-2412"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-2413"></span><span id="local-6989586621681360320"><span class="annot"><a href="GHC.Rename.Expr.html#okPatGuardStmt"><span class="hs-identifier hs-type">okPatGuardStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681360320"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span></span><span>
</span><span id="line-2414"></span><span id="okPatGuardStmt"><span class="annot"><span class="annottext">okPatGuardStmt :: forall (body :: * -&gt; *).
Stmt GhcPs (LocatedA (body GhcPs)) -&gt; Validity
</span><a href="GHC.Rename.Expr.html#okPatGuardStmt"><span class="hs-identifier hs-var hs-var">okPatGuardStmt</span></a></span></span><span> </span><span id="local-6989586621681357928"><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357928"><span class="hs-identifier hs-var">stmt</span></a></span></span><span>
</span><span id="line-2415"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357928"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2416"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2417"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2418"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2419"></span><span>      </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var">emptyInvalid</span></a></span><span>
</span><span id="line-2420"></span><span>
</span><span id="line-2421"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-2422"></span><span id="okParStmt"><span class="annot"><span class="annottext">okParStmt :: forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okParStmt"><span class="hs-identifier hs-var hs-var">okParStmt</span></a></span></span><span> </span><span id="local-6989586621681357927"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357927"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681357926"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357926"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681357925"><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357925"><span class="hs-identifier hs-var">stmt</span></a></span></span><span>
</span><span id="line-2423"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357925"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2424"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcPs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var">emptyInvalid</span></a></span><span>
</span><span id="line-2425"></span><span>      </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okStmt"><span class="hs-identifier hs-var">okStmt</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357927"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357926"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357925"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2426"></span><span>
</span><span id="line-2427"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-2428"></span><span id="okDoStmt"><span class="annot"><span class="annottext">okDoStmt :: forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okDoStmt"><span class="hs-identifier hs-var hs-var">okDoStmt</span></a></span></span><span> </span><span id="local-6989586621681357924"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357924"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681357923"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357923"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681357922"><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357922"><span class="hs-identifier hs-var">stmt</span></a></span></span><span>
</span><span id="line-2429"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357922"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2430"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2431"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RecursiveDo</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-operator hs-var">`xopt`</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357924"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2432"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#ArrowExpr"><span class="hs-identifier hs-var">ArrowExpr</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357923"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>    </span><span class="hs-comment">-- Arrows allows 'rec'</span><span>
</span><span id="line-2433"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Validity
</span><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-var">NotValid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use RecursiveDo&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2434"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2435"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2436"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2437"></span><span>       </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var">emptyInvalid</span></a></span><span>
</span><span id="line-2438"></span><span>
</span><span id="line-2439"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-2440"></span><span id="okCompStmt"><span class="annot"><span class="annottext">okCompStmt :: forall (body :: * -&gt; *).
DynFlags
-&gt; HsStmtContext GhcRn
-&gt; Stmt GhcPs (LocatedA (body GhcPs))
-&gt; Validity
</span><a href="GHC.Rename.Expr.html#okCompStmt"><span class="hs-identifier hs-var hs-var">okCompStmt</span></a></span></span><span> </span><span id="local-6989586621681357920"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357920"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357919"><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357919"><span class="hs-identifier hs-var">stmt</span></a></span></span><span>
</span><span id="line-2441"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Stmt GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621681357919"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2442"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2443"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2444"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2445"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2446"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ParallelListComp</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-operator hs-var">`xopt`</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357920"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2447"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Validity
</span><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-var">NotValid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use ParallelListComp&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2448"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2449"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TransformListComp</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-operator hs-var">`xopt`</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357920"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-2450"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Validity
</span><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-var">NotValid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use TransformListComp&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2451"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var">emptyInvalid</span></a></span><span>
</span><span id="line-2452"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var">emptyInvalid</span></a></span><span>  </span><span class="hs-comment">-- Should not happen (dealt with by checkLastStmt)</span><span>
</span><span id="line-2453"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Rename.Expr.html#emptyInvalid"><span class="hs-identifier hs-var">emptyInvalid</span></a></span><span>
</span><span id="line-2454"></span><span>
</span><span id="line-2455"></span><span class="hs-comment">---------</span><span>
</span><span id="line-2456"></span><span class="annot"><a href="GHC.Rename.Expr.html#checkTupleSection"><span class="hs-identifier hs-type">checkTupleSection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsTupArg"><span class="hs-identifier hs-type">HsTupArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2457"></span><span id="checkTupleSection"><span class="annot"><span class="annottext">checkTupleSection :: [HsTupArg GhcPs] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Expr.html#checkTupleSection"><span class="hs-identifier hs-var hs-var">checkTupleSection</span></a></span></span><span> </span><span id="local-6989586621681357916"><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621681357916"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-2458"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681357915"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357915"><span class="hs-identifier hs-var">tuple_section</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TupleSections</span></span><span>
</span><span id="line-2459"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-var">checkErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass). HsTupArg (GhcPass p) -&gt; Bool
</span><a href="GHC.Hs.Expr.html#tupArgPresent"><span class="hs-identifier hs-var">tupArgPresent</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621681357916"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357915"><span class="hs-identifier hs-var">tuple_section</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357911"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2460"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2461"></span><span>    </span><span id="local-6989586621681357911"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681357911"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Illegal tuple section: use TupleSections&quot;</span></span><span>
</span><span id="line-2462"></span><span>
</span><span id="line-2463"></span><span class="hs-comment">---------</span><span>
</span><span id="line-2464"></span><span class="annot"><a href="GHC.Rename.Expr.html#sectionErr"><span class="hs-identifier hs-type">sectionErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2465"></span><span id="sectionErr"><span class="annot"><span class="annottext">sectionErr :: HsExpr GhcPs -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#sectionErr"><span class="hs-identifier hs-var hs-var">sectionErr</span></a></span></span><span> </span><span id="local-6989586621681357910"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681357910"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2466"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;A section must be enclosed in parentheses&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2467"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;thus:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621681357910"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2468"></span><span>
</span><span id="line-2469"></span><span id="local-6989586621681360459"><span class="annot"><a href="GHC.Rename.Expr.html#badIpBinds"><span class="hs-identifier hs-type">badIpBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360459"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681360459"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-2470"></span><span id="badIpBinds"><span class="annot"><span class="annottext">badIpBinds :: forall a. Outputable a =&gt; SDoc -&gt; a -&gt; SDoc
</span><a href="GHC.Rename.Expr.html#badIpBinds"><span class="hs-identifier hs-var hs-var">badIpBinds</span></a></span></span><span> </span><span id="local-6989586621681357907"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357907"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681357906"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681357906"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-2471"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Implicit-parameter bindings illegal in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681357907"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2472"></span><span>         </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681357906"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2473"></span><span>
</span><span id="line-2474"></span><span class="hs-comment">---------</span><span>
</span><span id="line-2475"></span><span>
</span><span id="line-2476"></span><span class="annot"><a href="GHC.Rename.Expr.html#monadFailOp"><span class="hs-identifier hs-type">monadFailOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2477"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2478"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FailOperator"><span class="hs-identifier hs-type">FailOperator</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2479"></span><span id="monadFailOp"><span class="annot"><span class="annottext">monadFailOp :: LPat GhcPs
-&gt; HsStmtContext GhcRn -&gt; RnM (FailOperator GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#monadFailOp"><span class="hs-identifier hs-var hs-var">monadFailOp</span></a></span></span><span> </span><span id="local-6989586621681357905"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681357905"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681357904"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357904"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2480"></span><span>    </span><span id="local-6989586621681357903"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357903"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-2481"></span><span>        </span><span class="hs-comment">-- If the pattern is irrefutable (e.g.: wildcard, tuple, ~pat, etc.)</span><span>
</span><span id="line-2482"></span><span>        </span><span class="hs-comment">-- we should not need to fail.</span><span>
</span><span id="line-2483"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
OutputableBndrId p =&gt;
DynFlags -&gt; LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Hs.Pat.html#isIrrefutableHsPat"><span class="hs-identifier hs-var">isIrrefutableHsPat</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681357903"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621681357905"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2484"></span><span>
</span><span id="line-2485"></span><span>        </span><span class="hs-comment">-- For non-monadic contexts (e.g. guard patterns, list</span><span>
</span><span id="line-2486"></span><span>        </span><span class="hs-comment">-- comprehensions, etc.) we should not need to fail, or failure is handled in</span><span>
</span><span id="line-2487"></span><span>        </span><span class="hs-comment">-- a different way. See Note [Failing pattern matches in Stmts].</span><span>
</span><span id="line-2488"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall id. HsStmtContext id -&gt; Bool
</span><a href="Language.Haskell.Syntax.Expr.html#isMonadStmtContext"><span class="hs-identifier hs-var">isMonadStmtContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357904"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2489"></span><span>
</span><span id="line-2490"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; RnM (FailOperator GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#getMonadFailOp"><span class="hs-identifier hs-var">getMonadFailOp</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681357904"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2491"></span><span>
</span><span id="line-2492"></span><span class="hs-comment">{-
Note [Monad fail : Rebindable syntax, overloaded strings]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Given the code
  foo x = do { Just y &lt;- x; return y }

we expect it to desugar as
  foo x = x &gt;&gt;= \r -&gt; case r of
                        Just y  -&gt; return y
                        Nothing -&gt; fail &quot;Pattern match error&quot;

But with RebindableSyntax and OverloadedStrings, we really want
it to desugar thus:
  foo x = x &gt;&gt;= \r -&gt; case r of
                        Just y  -&gt; return y
                        Nothing -&gt; fail (fromString &quot;Patterm match error&quot;)

So, in this case, we synthesize the function
  \x -&gt; fail (fromString x)

(rather than plain 'fail') for the 'fail' operation. This is done in
'getMonadFailOp'.

Similarly with QualifiedDo and OverloadedStrings, we also want to desugar
using fromString:

  foo x = M.do { Just y &lt;- x; return y }

  ===&gt;

  foo x = x M.&gt;&gt;= \r -&gt; case r of
                        Just y  -&gt; return y
                        Nothing -&gt; M.fail (fromString &quot;Pattern match error&quot;)

-}</span><span>
</span><span id="line-2528"></span><span id="local-6989586621681360448"><span class="annot"><a href="GHC.Rename.Expr.html#getMonadFailOp"><span class="hs-identifier hs-type">getMonadFailOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStmtContext"><span class="hs-identifier hs-type">HsStmtContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681360448"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FailOperator"><span class="hs-identifier hs-type">FailOperator</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-comment">-- Syntax expr fail op</span><span>
</span><span id="line-2529"></span><span id="getMonadFailOp"><span class="annot"><span class="annottext">getMonadFailOp :: forall p. HsStmtContext p -&gt; RnM (FailOperator GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#getMonadFailOp"><span class="hs-identifier hs-var hs-var">getMonadFailOp</span></a></span></span><span> </span><span id="local-6989586621681357881"><span class="annot"><span class="annottext">HsStmtContext p
</span><a href="#local-6989586621681357881"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-2530"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681357880"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357880"><span class="hs-identifier hs-var">xOverloadedStrings</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedStrings</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-2531"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681357879"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357879"><span class="hs-identifier hs-var">xRebindableSyntax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RebindableSyntax</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-2532"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681357878"><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681357878"><span class="hs-identifier hs-var">fail</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681357877"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357877"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Bool -&gt; IOEnv (Env TcGblEnv TcLclEnv) (SyntaxExprRn, FreeVars)
</span><a href="#local-6989586621681357876"><span class="hs-identifier hs-var">reallyGetMonadFailOp</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357879"><span class="hs-identifier hs-var">xRebindableSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357880"><span class="hs-identifier hs-var">xOverloadedStrings</span></a></span><span>
</span><span id="line-2533"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprRn
</span><a href="#local-6989586621681357878"><span class="hs-identifier hs-var">fail</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357877"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2534"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-2535"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2536"></span><span>    </span><span id="local-6989586621681357875"><span class="annot"><span class="annottext">isQualifiedDo :: Bool
</span><a href="#local-6989586621681357875"><span class="hs-identifier hs-var hs-var">isQualifiedDo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; Maybe ModuleName
</span><a href="Language.Haskell.Syntax.Expr.html#qualifiedDoModuleName_maybe"><span class="hs-identifier hs-var">qualifiedDoModuleName_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext p
</span><a href="#local-6989586621681357881"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2537"></span><span>
</span><span id="line-2538"></span><span>    </span><span id="local-6989586621681357876"><span class="annot"><span class="annottext">reallyGetMonadFailOp :: Bool
-&gt; Bool -&gt; IOEnv (Env TcGblEnv TcLclEnv) (SyntaxExprRn, FreeVars)
</span><a href="#local-6989586621681357876"><span class="hs-identifier hs-var hs-var">reallyGetMonadFailOp</span></a></span></span><span> </span><span id="local-6989586621681357874"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357874"><span class="hs-identifier hs-var">rebindableSyntax</span></a></span></span><span> </span><span id="local-6989586621681357873"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357873"><span class="hs-identifier hs-var">overloadedStrings</span></a></span></span><span>
</span><span id="line-2539"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357875"><span class="hs-identifier hs-var">isQualifiedDo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357874"><span class="hs-identifier hs-var">rebindableSyntax</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357873"><span class="hs-identifier hs-var">overloadedStrings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2540"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681357872"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357872"><span class="hs-identifier hs-var">failExpr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681357871"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357871"><span class="hs-identifier hs-var">failFvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall p. HsStmtContext p -&gt; Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDoExpr"><span class="hs-identifier hs-var">lookupQualifiedDoExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext p
</span><a href="#local-6989586621681357881"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#failMName"><span class="hs-identifier hs-var">failMName</span></a></span><span>
</span><span id="line-2541"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681357869"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357869"><span class="hs-identifier hs-var">fromStringExpr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681357868"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357868"><span class="hs-identifier hs-var">fromStringFvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (HsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntaxExpr"><span class="hs-identifier hs-var">lookupSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromStringName"><span class="hs-identifier hs-var">fromStringName</span></a></span><span>
</span><span id="line-2542"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681357865"><span class="annot"><span class="annottext">arg_lit :: OccName
</span><a href="#local-6989586621681357865"><span class="hs-identifier hs-var hs-var">arg_lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOcc"><span class="hs-identifier hs-var">mkVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg&quot;</span></span><span>
</span><span id="line-2543"></span><span>        </span><span id="local-6989586621681357863"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357863"><span class="hs-identifier hs-var">arg_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. OccName -&gt; TcRnIf gbl lcl Name
</span><a href="GHC.Tc.Utils.Monad.html#newSysName"><span class="hs-identifier hs-var">newSysName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681357865"><span class="hs-identifier hs-var">arg_lit</span></a></span><span>
</span><span id="line-2544"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681357861"><span class="annot"><span class="annottext">arg_syn_expr :: XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357861"><span class="hs-identifier hs-var hs-var">arg_syn_expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357863"><span class="hs-identifier hs-var">arg_name</span></a></span><span>
</span><span id="line-2545"></span><span>            </span><span id="local-6989586621681357859"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357859"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2546"></span><span>              </span><span class="annot"><span class="annottext">forall (id :: Pass).
IsPass id =&gt;
LHsExpr (GhcPass id)
-&gt; LHsExpr (GhcPass id) -&gt; LHsExpr (GhcPass id)
</span><a href="GHC.Hs.Utils.html#nlHsApp"><span class="hs-identifier hs-var">nlHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357872"><span class="hs-identifier hs-var">failExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2547"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (id :: Pass).
IsPass id =&gt;
LHsExpr (GhcPass id)
-&gt; LHsExpr (GhcPass id) -&gt; LHsExpr (GhcPass id)
</span><a href="GHC.Hs.Utils.html#nlHsApp"><span class="hs-identifier hs-var">nlHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357869"><span class="hs-identifier hs-var">fromStringExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357861"><span class="hs-identifier hs-var">arg_syn_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2548"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681357857"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357857"><span class="hs-identifier hs-var">failAfterFromStringExpr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2549"></span><span>              </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: Pass).
(IsPass p, XMG (GhcPass p) (LHsExpr (GhcPass p)) ~ NoExtField) =&gt;
[LPat (GhcPass p)] -&gt; LHsExpr (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#mkHsLam"><span class="hs-identifier hs-var">mkHsLam</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. XVarPat p -&gt; LIdP p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357863"><span class="hs-identifier hs-var">arg_name</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357859"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2550"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681357855"><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621681357855"><span class="hs-identifier hs-var">failAfterFromStringSynExpr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2551"></span><span>              </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; SyntaxExprRn
</span><a href="GHC.Hs.Expr.html#mkSyntaxExpr"><span class="hs-identifier hs-var">mkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357857"><span class="hs-identifier hs-var">failAfterFromStringExpr</span></a></span><span>
</span><span id="line-2552"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621681357855"><span class="hs-identifier hs-var">failAfterFromStringSynExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357871"><span class="hs-identifier hs-var">failFvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357868"><span class="hs-identifier hs-var">fromStringFvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2553"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p.
HsStmtContext p -&gt; Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupQualifiedDo"><span class="hs-identifier hs-var">lookupQualifiedDo</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext p
</span><a href="#local-6989586621681357881"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#failMName"><span class="hs-identifier hs-var">failMName</span></a></span><span>
</span><span id="line-2554"></span><span>
</span><span id="line-2555"></span><span>
</span><span id="line-2556"></span><span class="hs-comment">{- *********************************************************************
*                                                                      *
              Generating code for HsExpanded
      See Note [Handling overloaded and rebindable constructs]
*                                                                      *
********************************************************************* -}</span><span>
</span><span id="line-2562"></span><span>
</span><span id="line-2563"></span><span class="annot"><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-type">genHsApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2564"></span><span id="genHsApps"><span class="annot"><span class="annottext">genHsApps :: Name -&gt; [XRec GhcRn (HsExpr GhcRn)] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-var hs-var">genHsApps</span></a></span></span><span> </span><span id="local-6989586621681357854"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357854"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681357853"><span class="annot"><span class="annottext">[XRec GhcRn (HsExpr GhcRn)]
</span><a href="#local-6989586621681357853"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; XRec GhcRn (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357854"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[XRec GhcRn (HsExpr GhcRn)]
</span><a href="#local-6989586621681357853"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-2565"></span><span>
</span><span id="line-2566"></span><span class="annot"><a href="GHC.Rename.Expr.html#genHsApp"><span class="hs-identifier hs-type">genHsApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2567"></span><span id="genHsApp"><span class="annot"><span class="annottext">genHsApp :: HsExpr GhcRn -&gt; XRec GhcRn (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApp"><span class="hs-identifier hs-var hs-var">genHsApp</span></a></span></span><span> </span><span id="local-6989586621681357849"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357849"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681357848"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357848"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357849"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357848"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-2568"></span><span>
</span><span id="line-2569"></span><span class="annot"><a href="GHC.Rename.Expr.html#genLHsVar"><span class="hs-identifier hs-type">genLHsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2570"></span><span id="genLHsVar"><span class="annot"><span class="annottext">genLHsVar :: Name -&gt; XRec GhcRn (HsExpr GhcRn)
</span><a href="GHC.Rename.Expr.html#genLHsVar"><span class="hs-identifier hs-var hs-var">genLHsVar</span></a></span></span><span> </span><span id="local-6989586621681357847"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357847"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357847"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-2571"></span><span>
</span><span id="line-2572"></span><span class="annot"><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-type">genHsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2573"></span><span id="genHsVar"><span class="annot"><span class="annottext">genHsVar :: Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-var hs-var">genHsVar</span></a></span></span><span> </span><span id="local-6989586621681357846"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357846"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357846"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-2574"></span><span>
</span><span id="line-2575"></span><span class="annot"><a href="GHC.Rename.Expr.html#genAppType"><span class="hs-identifier hs-type">genAppType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoGhcTc"><span class="hs-identifier hs-type">NoGhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2576"></span><span id="genAppType"><span class="annot"><span class="annottext">genAppType :: HsExpr GhcRn -&gt; HsType (NoGhcTc GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genAppType"><span class="hs-identifier hs-var hs-var">genAppType</span></a></span></span><span> </span><span id="local-6989586621681357844"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357844"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357844"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall thing. thing -&gt; HsWildCardBndrs GhcRn thing
</span><a href="GHC.Hs.Type.html#mkEmptyWildCardBndrs"><span class="hs-identifier hs-var">mkEmptyWildCardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span>
</span><span id="line-2577"></span><span>
</span><span id="line-2578"></span><span class="annot"><a href="GHC.Rename.Expr.html#genHsTyLit"><span class="hs-identifier hs-type">genHsTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2579"></span><span id="genHsTyLit"><span class="annot"><span class="annottext">genHsTyLit :: FastString -&gt; HsType GhcRn
</span><a href="GHC.Rename.Expr.html#genHsTyLit"><span class="hs-identifier hs-var hs-var">genHsTyLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall pass. XTyLit pass -&gt; HsTyLit -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-var">HsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText -&gt; FastString -&gt; HsTyLit
</span><a href="Language.Haskell.Syntax.Type.html#HsStrTy"><span class="hs-identifier hs-var">HsStrTy</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span>
</span><span id="line-2580"></span><span>
</span><span id="line-2581"></span><span id="local-6989586621681357841"><span id="local-6989586621681357842"><span class="annot"><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-type">wrapGenSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681357842"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681357841"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681357842"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-2582"></span><span class="hs-comment">-- Wrap something in a &quot;generatedSrcSpan&quot;</span><span>
</span><span id="line-2583"></span><span class="hs-comment">-- See Note [Rebindable syntax and HsExpansion]</span><span>
</span><span id="line-2584"></span><span id="wrapGenSpan"><span class="annot"><span class="annottext">wrapGenSpan :: forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var hs-var">wrapGenSpan</span></a></span></span><span> </span><span id="local-6989586621681357840"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681357840"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ann. SrcSpan -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#generatedSrcSpan"><span class="hs-identifier hs-var">generatedSrcSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681357840"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2585"></span><span>
</span><span id="line-2586"></span><span class="hs-comment">-- | Build a 'HsExpansion' out of an extension constructor,</span><span>
</span><span id="line-2587"></span><span class="hs-comment">--   and the two components of the expansion: original and</span><span>
</span><span id="line-2588"></span><span class="hs-comment">--   desugared expressions.</span><span>
</span><span id="line-2589"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-type">mkExpandedExpr</span></a></span><span>
</span><span id="line-2590"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>           </span><span class="hs-comment">-- ^ source expression</span><span>
</span><span id="line-2591"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>           </span><span class="hs-comment">-- ^ expanded expression</span><span>
</span><span id="line-2592"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>           </span><span class="hs-comment">-- ^ suitably wrapped 'HsExpansion'</span><span>
</span><span id="line-2593"></span><span id="mkExpandedExpr"><span class="annot"><span class="annottext">mkExpandedExpr :: HsExpr GhcRn -&gt; HsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkExpandedExpr"><span class="hs-identifier hs-var hs-var">mkExpandedExpr</span></a></span></span><span> </span><span id="local-6989586621681357838"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357838"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681357837"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357837"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall p. XXExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-var">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; HsExpansion a b
</span><a href="GHC.Hs.Expr.html#HsExpanded"><span class="hs-identifier hs-var">HsExpanded</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357838"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357837"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2594"></span><span>
</span><span id="line-2595"></span><span class="hs-comment">-----------------------------------------</span><span>
</span><span id="line-2596"></span><span class="hs-comment">-- Bits and pieces for RecordDotSyntax.</span><span>
</span><span id="line-2597"></span><span class="hs-comment">--</span><span>
</span><span id="line-2598"></span><span class="hs-comment">-- See Note [Overview of record dot syntax] in GHC.Hs.Expr.</span><span>
</span><span id="line-2599"></span><span>
</span><span id="line-2600"></span><span class="hs-comment">-- mkGetField arg field calcuates a get_field @field arg expression.</span><span>
</span><span id="line-2601"></span><span class="hs-comment">-- e.g. z.x = mkGetField z x = get_field @x z</span><span>
</span><span id="line-2602"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkGetField"><span class="hs-identifier hs-type">mkGetField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2603"></span><span id="mkGetField"><span class="annot"><span class="annottext">mkGetField :: Name
-&gt; XRec GhcRn (HsExpr GhcRn) -&gt; Located FastString -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkGetField"><span class="hs-identifier hs-var hs-var">mkGetField</span></a></span></span><span> </span><span id="local-6989586621681357833"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357833"><span class="hs-identifier hs-var">get_field</span></a></span></span><span> </span><span id="local-6989586621681357832"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357832"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681357831"><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357831"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; [XRec GhcRn (HsExpr GhcRn)]
-&gt; Located FastString
-&gt; [XRec GhcRn (HsExpr GhcRn)]
</span><a href="GHC.Rename.Expr.html#mkGet"><span class="hs-identifier hs-var">mkGet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357833"><span class="hs-identifier hs-var">get_field</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357832"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357831"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2604"></span><span>
</span><span id="line-2605"></span><span class="hs-comment">-- mkSetField a field b calculates a set_field @field expression.</span><span>
</span><span id="line-2606"></span><span class="hs-comment">-- e.g mkSetSetField a field b = set_field @&quot;field&quot; a b (read as &quot;set field 'field' on a to b&quot;).</span><span>
</span><span id="line-2607"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkSetField"><span class="hs-identifier hs-type">mkSetField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2608"></span><span id="mkSetField"><span class="annot"><span class="annottext">mkSetField :: Name
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Located FastString
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkSetField"><span class="hs-identifier hs-var hs-var">mkSetField</span></a></span></span><span> </span><span id="local-6989586621681357828"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357828"><span class="hs-identifier hs-var">set_field</span></a></span></span><span> </span><span id="local-6989586621681357827"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357827"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357826"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681357826"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681357825"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357825"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2609"></span><span>  </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; XRec GhcRn (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; XRec GhcRn (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357828"><span class="hs-identifier hs-var">set_field</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsType (NoGhcTc GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genAppType"><span class="hs-operator hs-var">`genAppType`</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; HsType GhcRn
</span><a href="GHC.Rename.Expr.html#genHsTyLit"><span class="hs-identifier hs-var">genHsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681357826"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357827"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357825"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-2610"></span><span>
</span><span id="line-2611"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkGet"><span class="hs-identifier hs-type">mkGet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2612"></span><span id="mkGet"><span class="annot"><span class="annottext">mkGet :: Name
-&gt; [XRec GhcRn (HsExpr GhcRn)]
-&gt; Located FastString
-&gt; [XRec GhcRn (HsExpr GhcRn)]
</span><a href="GHC.Rename.Expr.html#mkGet"><span class="hs-identifier hs-var hs-var">mkGet</span></a></span></span><span> </span><span id="local-6989586621681357824"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357824"><span class="hs-identifier hs-var">get_field</span></a></span></span><span> </span><span id="local-6989586621681357823"><span class="annot"><span class="annottext">l :: [XRec GhcRn (HsExpr GhcRn)]
</span><a href="#local-6989586621681357823"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621681357822"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357822"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[XRec GhcRn (HsExpr GhcRn)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357821"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681357821"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2613"></span><span>  </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; XRec GhcRn (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357824"><span class="hs-identifier hs-var">get_field</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsType (NoGhcTc GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genAppType"><span class="hs-operator hs-var">`genAppType`</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; HsType GhcRn
</span><a href="GHC.Rename.Expr.html#genHsTyLit"><span class="hs-identifier hs-var">genHsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681357821"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357822"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[XRec GhcRn (HsExpr GhcRn)]
</span><a href="#local-6989586621681357823"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-2614"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkGet"><span class="hs-identifier hs-var">mkGet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Located FastString
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkGet : The impossible has happened!&quot;</span></span><span>
</span><span id="line-2615"></span><span>
</span><span id="line-2616"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkSet"><span class="hs-identifier hs-type">mkSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2617"></span><span id="mkSet"><span class="annot"><span class="annottext">mkSet :: Name
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; (Located FastString, XRec GhcRn (HsExpr GhcRn))
-&gt; XRec GhcRn (HsExpr GhcRn)
</span><a href="GHC.Rename.Expr.html#mkSet"><span class="hs-identifier hs-var hs-var">mkSet</span></a></span></span><span> </span><span id="local-6989586621681357819"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357819"><span class="hs-identifier hs-var">set_field</span></a></span></span><span> </span><span id="local-6989586621681357818"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357818"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681357817"><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357817"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681357816"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357816"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; Located FastString
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkSetField"><span class="hs-identifier hs-var">mkSetField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357819"><span class="hs-identifier hs-var">set_field</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357816"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357817"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357818"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2618"></span><span>
</span><span id="line-2619"></span><span class="hs-comment">-- mkProjection fields calculates a projection.</span><span>
</span><span id="line-2620"></span><span class="hs-comment">-- e.g. .x = mkProjection [x] = getField @&quot;x&quot;</span><span>
</span><span id="line-2621"></span><span class="hs-comment">--      .x.y = mkProjection [.x, .y] = (.y) . (.x) = getField @&quot;y&quot; . getField @&quot;x&quot;</span><span>
</span><span id="line-2622"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkProjection"><span class="hs-identifier hs-type">mkProjection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2623"></span><span id="mkProjection"><span class="annot"><span class="annottext">mkProjection :: Name -&gt; Name -&gt; NonEmpty (Located FastString) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkProjection"><span class="hs-identifier hs-var hs-var">mkProjection</span></a></span></span><span> </span><span id="local-6989586621681357815"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357815"><span class="hs-identifier hs-var">getFieldName</span></a></span></span><span> </span><span id="local-6989586621681357814"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357814"><span class="hs-identifier hs-var">circName</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681357813"><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357813"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#%3A%7C"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span id="local-6989586621681357812"><span class="annot"><span class="annottext">[Located FastString]
</span><a href="#local-6989586621681357812"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Located FastString -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357810"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located FastString -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357809"><span class="hs-identifier hs-var">proj</span></a></span><span> </span><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357813"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Located FastString]
</span><a href="#local-6989586621681357812"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-2624"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2625"></span><span>    </span><span class="annot"><a href="#local-6989586621681357810"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2626"></span><span>    </span><span id="local-6989586621681357810"><span class="annot"><span class="annottext">f :: HsExpr GhcRn -&gt; Located FastString -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357810"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681357808"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357808"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621681357807"><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357807"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [XRec GhcRn (HsExpr GhcRn)] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsApps"><span class="hs-identifier hs-var">genHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357814"><span class="hs-identifier hs-var">circName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Located FastString -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357809"><span class="hs-identifier hs-var">proj</span></a></span><span> </span><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357807"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357808"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2627"></span><span>
</span><span id="line-2628"></span><span>    </span><span class="annot"><a href="#local-6989586621681357809"><span class="hs-identifier hs-type">proj</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2629"></span><span>    </span><span id="local-6989586621681357809"><span class="annot"><span class="annottext">proj :: Located FastString -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357809"><span class="hs-identifier hs-var hs-var">proj</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357806"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681357806"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357815"><span class="hs-identifier hs-var">getFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; HsType (NoGhcTc GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#genAppType"><span class="hs-operator hs-var">`genAppType`</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; HsType GhcRn
</span><a href="GHC.Rename.Expr.html#genHsTyLit"><span class="hs-identifier hs-var">genHsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681357806"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-2630"></span><span>
</span><span id="line-2631"></span><span class="hs-comment">-- mkProjUpdateSetField calculates functions representing dot notation record updates.</span><span>
</span><span id="line-2632"></span><span class="hs-comment">-- e.g. Suppose an update like foo.bar = 1.</span><span>
</span><span id="line-2633"></span><span class="hs-comment">--      We calculate the function \a -&gt; setField @&quot;foo&quot; a (setField @&quot;bar&quot; (getField @&quot;foo&quot; a) 1).</span><span>
</span><span id="line-2634"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkProjUpdateSetField"><span class="hs-identifier hs-type">mkProjUpdateSetField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecProj"><span class="hs-identifier hs-type">LHsRecProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2635"></span><span id="mkProjUpdateSetField"><span class="annot"><span class="annottext">mkProjUpdateSetField :: Name
-&gt; Name
-&gt; LHsRecUpdProj GhcRn
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; XRec GhcRn (HsExpr GhcRn)
</span><a href="GHC.Rename.Expr.html#mkProjUpdateSetField"><span class="hs-identifier hs-var hs-var">mkProjUpdateSetField</span></a></span></span><span> </span><span id="local-6989586621681357803"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357803"><span class="hs-identifier hs-var">get_field</span></a></span></span><span> </span><span id="local-6989586621681357802"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357802"><span class="hs-identifier hs-var">set_field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecField"><span class="hs-identifier hs-type">HsRecField</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldLbl :: forall id arg. HsRecField' id arg -&gt; Located id
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FieldLabelStrings"><span class="hs-identifier hs-type">FieldLabelStrings</span></a></span><span> </span><span id="local-6989586621681357799"><span class="annot"><span class="annottext">[Located (HsFieldLabel GhcRn)]
</span><a href="#local-6989586621681357799"><span class="hs-identifier hs-var">flds'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: forall id arg. HsRecField' id arg -&gt; arg
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681357798"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357798"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2636"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2637"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681357797"><span class="annot"><span class="annottext">flds :: [Located FastString]
</span><a href="#local-6989586621681357797"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall p. HsFieldLabel p -&gt; Located FastString
</span><a href="Language.Haskell.Syntax.Expr.html#hflLabel"><span class="hs-identifier hs-var">hflLabel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Located (HsFieldLabel GhcRn)]
</span><a href="#local-6989586621681357799"><span class="hs-identifier hs-var">flds'</span></a></span><span>
</span><span id="line-2638"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681357796"><span class="annot"><span class="annottext">final :: Located FastString
</span><a href="#local-6989586621681357796"><span class="hs-identifier hs-var hs-var">final</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#last"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">[Located FastString]
</span><a href="#local-6989586621681357797"><span class="hs-identifier hs-var">flds</span></a></span><span>  </span><span class="hs-comment">-- quux</span><span>
</span><span id="line-2639"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681357795"><span class="annot"><span class="annottext">fields :: [Located FastString]
</span><a href="#local-6989586621681357795"><span class="hs-identifier hs-var hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#init"><span class="hs-identifier hs-var">init</span></a></span><span> </span><span class="annot"><span class="annottext">[Located FastString]
</span><a href="#local-6989586621681357797"><span class="hs-identifier hs-var">flds</span></a></span><span>   </span><span class="hs-comment">-- [foo, bar, baz]</span><span>
</span><span id="line-2640"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681357793"><span class="annot"><span class="annottext">getters :: GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681357793"><span class="hs-identifier hs-var hs-var">getters</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681357792"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357792"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; [XRec GhcRn (HsExpr GhcRn)]
-&gt; Located FastString
-&gt; [XRec GhcRn (HsExpr GhcRn)]
</span><a href="GHC.Rename.Expr.html#mkGet"><span class="hs-identifier hs-var">mkGet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357803"><span class="hs-identifier hs-var">get_field</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357792"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Located FastString]
</span><a href="#local-6989586621681357795"><span class="hs-identifier hs-var">fields</span></a></span><span>  </span><span class="hs-comment">-- Ordered from deep to shallow.</span><span>
</span><span id="line-2641"></span><span>          </span><span class="hs-comment">-- [getField@&quot;baz&quot;(getField@&quot;bar&quot;(getField@&quot;foo&quot; a), getField@&quot;bar&quot;(getField@&quot;foo&quot; a), getField@&quot;foo&quot; a, a]</span><span>
</span><span id="line-2642"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681357791"><span class="annot"><span class="annottext">zips :: GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; [(Located FastString, GenLocated SrcSpanAnnA (HsExpr GhcRn))]
</span><a href="#local-6989586621681357791"><span class="hs-identifier hs-var hs-var">zips</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681357790"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357790"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located FastString
</span><a href="#local-6989586621681357796"><span class="hs-identifier hs-var">final</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681357793"><span class="hs-identifier hs-var">getters</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357790"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[Located FastString]
</span><a href="#local-6989586621681357795"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#tail"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621681357793"><span class="hs-identifier hs-var">getters</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357790"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Ordered from deep to shallow.</span><span>
</span><span id="line-2643"></span><span>          </span><span class="hs-comment">-- [(&quot;quux&quot;, getField@&quot;baz&quot;(getField@&quot;bar&quot;(getField@&quot;foo&quot; a)), (&quot;baz&quot;, getField@&quot;bar&quot;(getField@&quot;foo&quot; a)), (&quot;bar&quot;, getField@&quot;foo&quot; a), (&quot;foo&quot;, a)]</span><span>
</span><span id="line-2644"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-2645"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681357789"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357789"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; (Located FastString, XRec GhcRn (HsExpr GhcRn))
-&gt; XRec GhcRn (HsExpr GhcRn)
</span><a href="GHC.Rename.Expr.html#mkSet"><span class="hs-identifier hs-var">mkSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357802"><span class="hs-identifier hs-var">set_field</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357798"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; [(Located FastString, GenLocated SrcSpanAnnA (HsExpr GhcRn))]
</span><a href="#local-6989586621681357791"><span class="hs-identifier hs-var">zips</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357789"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2646"></span><span>          </span><span class="hs-comment">-- setField@&quot;foo&quot; (a) (setField@&quot;bar&quot; (getField @&quot;foo&quot; (a))(setField@&quot;baz&quot; (getField @&quot;bar&quot; (getField @&quot;foo&quot; (a)))(setField@&quot;quux&quot; (getField @&quot;baz&quot; (getField @&quot;bar&quot; (getField @&quot;foo&quot; (a))))(quux))))</span><span>
</span><span id="line-2647"></span><span>
</span><span id="line-2648"></span><span class="annot"><a href="GHC.Rename.Expr.html#mkRecordDotUpd"><span class="hs-identifier hs-type">mkRecordDotUpd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2649"></span><span id="mkRecordDotUpd"><span class="annot"><span class="annottext">mkRecordDotUpd :: Name
-&gt; Name
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; [LHsRecUpdProj GhcRn]
-&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Expr.html#mkRecordDotUpd"><span class="hs-identifier hs-var hs-var">mkRecordDotUpd</span></a></span></span><span> </span><span id="local-6989586621681357788"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357788"><span class="hs-identifier hs-var">get_field</span></a></span></span><span> </span><span id="local-6989586621681357787"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357787"><span class="hs-identifier hs-var">set_field</span></a></span></span><span> </span><span id="local-6989586621681357786"><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357786"><span class="hs-identifier hs-var">exp</span></a></span></span><span> </span><span id="local-6989586621681357785"><span class="annot"><span class="annottext">[LHsRecUpdProj GhcRn]
</span><a href="#local-6989586621681357785"><span class="hs-identifier hs-var">updates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; LHsRecUpdProj GhcRn -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357784"><span class="hs-identifier hs-var">fieldUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (HsExpr GhcRn)
</span><a href="#local-6989586621681357786"><span class="hs-identifier hs-var">exp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdProj GhcRn]
</span><a href="#local-6989586621681357785"><span class="hs-identifier hs-var">updates</span></a></span><span>
</span><span id="line-2650"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2651"></span><span>    </span><span class="annot"><a href="#local-6989586621681357784"><span class="hs-identifier hs-type">fieldUpdate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-2652"></span><span>    </span><span id="local-6989586621681357784"><span class="annot"><span class="annottext">fieldUpdate :: HsExpr GhcRn -&gt; LHsRecUpdProj GhcRn -&gt; HsExpr GhcRn
</span><a href="#local-6989586621681357784"><span class="hs-identifier hs-var hs-var">fieldUpdate</span></a></span></span><span> </span><span id="local-6989586621681357783"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357783"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621681357782"><span class="annot"><span class="annottext">LHsRecUpdProj GhcRn
</span><a href="#local-6989586621681357782"><span class="hs-identifier hs-var">lpu</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; Name
-&gt; LHsRecUpdProj GhcRn
-&gt; XRec GhcRn (HsExpr GhcRn)
-&gt; XRec GhcRn (HsExpr GhcRn)
</span><a href="GHC.Rename.Expr.html#mkProjUpdateSetField"><span class="hs-identifier hs-var">mkProjUpdateSetField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357788"><span class="hs-identifier hs-var">get_field</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681357787"><span class="hs-identifier hs-var">set_field</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecUpdProj GhcRn
</span><a href="#local-6989586621681357782"><span class="hs-identifier hs-var">lpu</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Expr.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681357783"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2653"></span><span>
</span><span id="line-2654"></span><span class="annot"><a href="GHC.Rename.Expr.html#rnHsUpdProjs"><span class="hs-identifier hs-type">rnHsUpdProjs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2655"></span><span id="rnHsUpdProjs"><span class="annot"><span class="annottext">rnHsUpdProjs :: [LHsRecUpdProj GhcPs] -&gt; RnM ([LHsRecUpdProj GhcRn], FreeVars)
</span><a href="GHC.Rename.Expr.html#rnHsUpdProjs"><span class="hs-identifier hs-var hs-var">rnHsUpdProjs</span></a></span></span><span> </span><span id="local-6989586621681357781"><span class="annot"><span class="annottext">[LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681357781"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2656"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681357780"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldLabelStrings GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681357780"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681357779"><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681357779"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.16.4.0/src/GHC-List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecUpdProj GhcPs -&gt; RnM (LHsRecUpdProj GhcRn, FreeVars)
</span><a href="#local-6989586621681357778"><span class="hs-identifier hs-var">rnRecUpdProj</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdProj GhcPs]
</span><a href="#local-6989586621681357781"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-2657"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsRecField'
      (FieldLabelStrings GhcRn) (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621681357780"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[FreeVars]
</span><a href="#local-6989586621681357779"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2658"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2659"></span><span>    </span><span class="annot"><a href="#local-6989586621681357778"><span class="hs-identifier hs-type">rnRecUpdProj</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2660"></span><span>    </span><span id="local-6989586621681357778"><span class="annot"><span class="annottext">rnRecUpdProj :: LHsRecUpdProj GhcPs -&gt; RnM (LHsRecUpdProj GhcRn, FreeVars)
</span><a href="#local-6989586621681357778"><span class="hs-identifier hs-var hs-var">rnRecUpdProj</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681357777"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681357777"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecField"><span class="hs-identifier hs-type">HsRecField</span></a></span><span> </span><span class="annot"><span class="annottext">XHsRecField (FieldLabelStrings GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681357776"><span class="annot"><span class="annottext">Located (FieldLabelStrings GhcPs)
</span><a href="#local-6989586621681357776"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621681357775"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621681357775"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681357774"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357774"><span class="hs-identifier hs-var">pun</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2661"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681357773"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357773"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681357772"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357772"><span class="hs-identifier hs-var">fv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (XRec GhcRn (HsExpr GhcRn), FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621681357775"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-2662"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681357777"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecField"><span class="hs-identifier hs-type">HsRecField</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldAnn :: XHsRecField (FieldLabelStrings GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldAnn"><span class="hs-identifier hs-var">hsRecFieldAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-2663"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldLbl :: GenLocated SrcSpan (FieldLabelStrings GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabelStrings GhcPs -&gt; FieldLabelStrings GhcRn
</span><a href="GHC.Rename.Expr.html#rnFieldLabelStrings"><span class="hs-identifier hs-var">rnFieldLabelStrings</span></a></span><span> </span><span class="annot"><span class="annottext">Located (FieldLabelStrings GhcPs)
</span><a href="#local-6989586621681357776"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-2664"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621681357773"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-2665"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecPun :: Bool
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecPun"><span class="hs-identifier hs-var">hsRecPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681357774"><span class="hs-identifier hs-var">pun</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621681357772"><span class="hs-identifier hs-var">fv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2666"></span></pre></body></html>