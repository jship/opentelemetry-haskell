<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998


Type checking of type signatures in interface files
-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NondecreasingIndentation #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-record-updates #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.IfaceToCore</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#tcLookupImported_maybe"><span class="hs-identifier">tcLookupImported_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Iface.Load.html#importDecl"><span class="hs-identifier">importDecl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#checkWiredInTyCon"><span class="hs-identifier">checkWiredInTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcHiBootIface"><span class="hs-identifier">tcHiBootIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#typecheckIface"><span class="hs-identifier">typecheckIface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#typecheckIfacesForMerging"><span class="hs-identifier">typecheckIfacesForMerging</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#typecheckIfaceForInstantiate"><span class="hs-identifier">typecheckIfaceForInstantiate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDecl"><span class="hs-identifier">tcIfaceDecl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier">tcIfaceDecls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier">tcIfaceInst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier">tcIfaceFamInst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier">tcIfaceRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier">tcIfaceAnnotations</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier">tcIfaceCompleteMatches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier">tcIfaceExpr</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Desired by HERMIT (#7683)</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier">tcIfaceGlobal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceOneShot"><span class="hs-identifier">tcIfaceOneShot</span></a></span><span>
</span><span id="line-25"></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Env.html"><span class="hs-identifier">GHC.Driver.Env</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.Literals.html"><span class="hs-identifier">GHC.Builtin.Types.Literals</span></a></span><span class="hs-special">(</span><span class="annot"><a href="GHC.Builtin.Types.Literals.html#typeNatCoAxiomRules"><span class="hs-identifier">typeNatCoAxiomRules</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html"><span class="hs-identifier">GHC.Iface.Syntax</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html"><span class="hs-identifier">GHC.Iface.Load</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Env.html"><span class="hs-identifier">GHC.Iface.Env</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToCmm.Types.html"><span class="hs-identifier">GHC.StgToCmm.Types</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html"><span class="hs-identifier">GHC.Tc.TyCl.Build</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FVs.html"><span class="hs-identifier">GHC.Core.FVs</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span>    </span><span class="hs-comment">-- needs to build types &amp; coercions in a knot</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html"><span class="hs-identifier">GHC.Core.TyCo.Subst</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#substTyCoVars"><span class="hs-identifier">substTyCoVars</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html"><span class="hs-identifier">GHC.Core.FamInstEnv</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html"><span class="hs-identifier">GHC.Core.Unify</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html#RoughMatchTc"><span class="hs-identifier">RoughMatchTc</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Utils.html"><span class="hs-identifier">GHC.Core.Utils</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Unfold.Make.html"><span class="hs-identifier">GHC.Core.Unfold.Make</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Lint.html"><span class="hs-identifier">GHC.Core.Lint</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Make.html"><span class="hs-identifier">GHC.Core.Make</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Opt.OccurAnal.html"><span class="hs-identifier">GHC.Core.Opt.OccurAnal</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Opt.OccurAnal.html#occurAnalyseExpr"><span class="hs-identifier">occurAnalyseExpr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Ppr.html"><span class="hs-identifier">GHC.Core.Ppr</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.External.html"><span class="hs-identifier">GHC.Unit.External</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html"><span class="hs-identifier">GHC.Unit.Module.ModDetails</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html"><span class="hs-identifier">GHC.Unit.Module.ModIface</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html"><span class="hs-identifier">GHC.Unit.Home.ModInfo</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html"><span class="hs-identifier">GHC.Types.Annotations</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceFile.html"><span class="hs-identifier">GHC.Types.SourceFile</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#SuccessFlag"><span class="hs-identifier">SuccessFlag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html"><span class="hs-identifier">GHC.Types.CompleteMatch</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html"><span class="hs-identifier">GHC.Types.TypeEnv</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html"><span class="hs-identifier">GHC.Types.Unique.DSet</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html#mkUniqDSet"><span class="hs-identifier">mkUniqDSet</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Supply.html"><span class="hs-identifier">GHC.Types.Unique.Supply</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html"><span class="hs-identifier">GHC.Types.Literal</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Var</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html"><span class="hs-identifier">GHC.Types.Id.Make</span></a></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html"><span class="hs-identifier">GHC.Types.Tickish</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Fingerprint.html#"><span class="hs-identifier">GHC.Fingerprint</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Data.BooleanFormula.html"><span class="hs-identifier">GHC.Data.BooleanFormula</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BF</span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html"><span class="hs-identifier">GHC.Parser.Annotation</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">{-
This module takes

        IfaceDecl -&gt; TyThing
        IfaceType -&gt; Type
        etc

An IfaceDecl is populated with RdrNames, and these are not renamed to
Names before typechecking, because there should be no scope errors etc.

        -- For (b) consider: f = \$(...h....)
        -- where h is imported, and calls f via an hi-boot file.
        -- This is bad!  But it is not seen as a staging error, because h
        -- is indeed imported.  We don't want the type-checker to black-hole
        -- when simplifying and compiling the splice!
        --
        -- Simple solution: discard any unfolding that mentions a variable
        -- bound in this module (and hence not yet processed).
        -- The discarding happens when forkM finds a type error.


************************************************************************
*                                                                      *
                Type-checking a complete interface
*                                                                      *
************************************************************************

Suppose we discover we don't need to recompile.  Then we must type
check the old interface file.  This is a bit different to the
incremental type checking we do as we suck in interface files.  Instead
we do things similarly as when we are typechecking source decls: we
bring into scope the type envt for the interface all at once, using a
knot.  Remember, the decls aren't necessarily in dependency order --
and even if they were, the type decls might be mutually recursive.

Note [Knot-tying typecheckIface]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we are typechecking an interface A.hi, and we come across
a Name for another entity defined in A.hi.  How do we get the
'TyCon', in this case?  There are three cases:

    1) tcHiBootIface in GHC.IfaceToCore: We're typechecking an
    hi-boot file in preparation of checking if the hs file we're
    building is compatible.  In this case, we want all of the
    internal TyCons to MATCH the ones that we just constructed
    during typechecking: the knot is thus tied through if_rec_types.

    2) retypecheckLoop in GHC.Driver.Make: We are retypechecking a
    mutually recursive cluster of hi files, in order to ensure
    that all of the references refer to each other correctly.
    In this case, the knot is tied through the HPT passed in,
    which contains all of the interfaces we are in the process
    of typechecking.

    3) genModDetails in GHC.Driver.Main: We are typechecking an
    old interface to generate the ModDetails.  In this case,
    we do the same thing as (2) and pass in an HPT with
    the HomeModInfo being generated to tie knots.

The upshot is that the CLIENT of this function is responsible
for making sure that the knot is tied correctly.  If you don't,
then you'll get a message saying that we couldn't load the
declaration you wanted.

BTW, in one-shot mode we never call typecheckIface; instead,
loadInterface handles type-checking interface.  In that case,
knots are tied through the EPS.  No problem!
-}</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- Clients of this function be careful, see Note [Knot-tying typecheckIface]</span><span>
</span><span id="line-182"></span><span class="annot"><a href="GHC.IfaceToCore.html#typecheckIface"><span class="hs-identifier hs-type">typecheckIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>      </span><span class="hs-comment">-- Get the decls from here</span><span>
</span><span id="line-183"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfG"><span class="hs-identifier hs-type">IfG</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span>
</span><span id="line-184"></span><span id="typecheckIface"><span class="annot"><span class="annottext">typecheckIface :: ModIface -&gt; IfG ModDetails
</span><a href="GHC.IfaceToCore.html#typecheckIface"><span class="hs-identifier hs-var hs-var">typecheckIface</span></a></span></span><span> </span><span id="local-6989586621681321626"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span></span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a lcl.
Module -&gt; SDoc -&gt; IsBootInterface -&gt; IfL a -&gt; IfM lcl a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceLcl"><span class="hs-identifier hs-var">initIfaceLcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: ModIfacePhase). ModIface_ a -&gt; Module
</span><a href="GHC.Unit.Module.ModIface.html#mi_semantic_module"><span class="hs-identifier hs-var">mi_semantic_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typecheckIface&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IsBootInterface
</span><a href="GHC.Unit.Module.ModIface.html#mi_boot"><span class="hs-identifier hs-var">mi_boot</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">{</span><span>       </span><span class="hs-comment">-- Get the right set of decls and rules.  If we are compiling without -O</span><span>
</span><span id="line-187"></span><span>                </span><span class="hs-comment">-- we discard pragmas before typechecking, so that we don't &quot;see&quot;</span><span>
</span><span id="line-188"></span><span>                </span><span class="hs-comment">-- information that we shouldn't.  From a versioning point of view</span><span>
</span><span id="line-189"></span><span>                </span><span class="hs-comment">-- It's not actually *wrong* to do so, but in fact GHCi is unable</span><span>
</span><span id="line-190"></span><span>                </span><span class="hs-comment">-- to handle unboxed tuples, so it must not see unfoldings.</span><span>
</span><span id="line-191"></span><span>          </span><span id="local-6989586621681321621"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321621"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_IgnoreInterfacePragmas"><span class="hs-identifier hs-var">Opt_IgnoreInterfacePragmas</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>                </span><span class="hs-comment">-- Typecheck the decls.  This is done lazily, so that the knot-tying</span><span>
</span><span id="line-194"></span><span>                </span><span class="hs-comment">-- within this single module works out right.  It's the callers</span><span>
</span><span id="line-195"></span><span>                </span><span class="hs-comment">-- job to make sure the knot is tied.</span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321618"><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321618"><span class="hs-identifier hs-var">names_w_things</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [(Fingerprint, IfaceDecl)] -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-var">tcIfaceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321621"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321616"><span class="annot"><span class="annottext">type_env :: TypeEnv
</span><a href="#local-6989586621681321616"><span class="hs-identifier hs-var hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321618"><span class="hs-identifier hs-var">names_w_things</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span>                </span><span class="hs-comment">-- Now do those rules, instances and annotations</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321614"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681321614"><span class="hs-identifier hs-var">insts</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClsInst -&gt; IfL ClsInst
</span><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier hs-var">tcIfaceInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321611"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681321611"><span class="hs-identifier hs-var">fam_insts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceFamInst -&gt; IfL FamInst
</span><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier hs-var">tcIfaceFamInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321609"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681321609"><span class="hs-identifier hs-var">rules</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [IfaceRule] -&gt; IfL [CoreRule]
</span><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier hs-var">tcIfaceRules</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321621"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Unit.Module.ModIface.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321607"><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681321607"><span class="hs-identifier hs-var">anns</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation] -&gt; IfL [Annotation]
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier hs-var">tcIfaceAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Unit.Module.ModIface.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>                </span><span class="hs-comment">-- Exports</span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321605"><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681321605"><span class="hs-identifier hs-var">exports</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. [AvailInfo] -&gt; TcRnIf gbl lcl [AvailInfo]
</span><a href="GHC.Iface.Env.html#ifaceExportNames"><span class="hs-identifier hs-var">ifaceExportNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [AvailInfo]
</span><a href="GHC.Unit.Module.ModIface.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>                </span><span class="hs-comment">-- Complete Sigs</span><span>
</span><span id="line-209"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321602"><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681321602"><span class="hs-identifier hs-var">complete_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch] -&gt; IfL [CompleteMatch]
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier hs-var">tcIfaceCompleteMatches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Unit.Module.ModIface.html#mi_complete_matches"><span class="hs-identifier hs-var">mi_complete_matches</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span>                </span><span class="hs-comment">-- Finished</span><span>
</span><span id="line-212"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Finished typechecking interface for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: ModIfacePhase). ModIface_ a -&gt; Module
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321626"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-213"></span><span>                         </span><span class="hs-comment">-- Careful! If we tug on the TyThing thunks too early</span><span>
</span><span id="line-214"></span><span>                         </span><span class="hs-comment">-- we'll infinite loop with hs-boot.  See #10083 for</span><span>
</span><span id="line-215"></span><span>                         </span><span class="hs-comment">-- an example where this would cause non-termination.</span><span>
</span><span id="line-216"></span><span>                         </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type envt:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321618"><span class="hs-identifier hs-var">names_w_things</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">md_types :: TypeEnv
</span><a href="GHC.Unit.Module.ModDetails.html#md_types"><span class="hs-identifier hs-var">md_types</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321616"><span class="hs-identifier hs-var">type_env</span></a></span><span>
</span><span id="line-218"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_insts :: [ClsInst]
</span><a href="GHC.Unit.Module.ModDetails.html#md_insts"><span class="hs-identifier hs-var">md_insts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681321614"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-219"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_fam_insts :: [FamInst]
</span><a href="GHC.Unit.Module.ModDetails.html#md_fam_insts"><span class="hs-identifier hs-var">md_fam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681321611"><span class="hs-identifier hs-var">fam_insts</span></a></span><span>
</span><span id="line-220"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_rules :: [CoreRule]
</span><a href="GHC.Unit.Module.ModDetails.html#md_rules"><span class="hs-identifier hs-var">md_rules</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681321609"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-221"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_anns :: [Annotation]
</span><a href="GHC.Unit.Module.ModDetails.html#md_anns"><span class="hs-identifier hs-var">md_anns</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681321607"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-222"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_exports :: [AvailInfo]
</span><a href="GHC.Unit.Module.ModDetails.html#md_exports"><span class="hs-identifier hs-var">md_exports</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681321605"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-223"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_complete_matches :: [CompleteMatch]
</span><a href="GHC.Unit.Module.ModDetails.html#md_complete_matches"><span class="hs-identifier hs-var">md_complete_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681321602"><span class="hs-identifier hs-var">complete_matches</span></a></span><span>
</span><span id="line-224"></span><span>                              </span><span class="hs-special">}</span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Typechecking for merging
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | Returns true if an 'IfaceDecl' is for @data T@ (an abstract data type)</span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-type">isAbstractIfaceDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-237"></span><span id="isAbstractIfaceDecl"><span class="annot"><span class="annottext">isAbstractIfaceDecl :: IfaceDecl -&gt; Bool
</span><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-var hs-var">isAbstractIfaceDecl</span></a></span></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceData"><span class="hs-identifier hs-type">IfaceData</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifCons :: IfaceDecl -&gt; IfaceConDecls
</span><a href="GHC.Iface.Syntax.html#ifCons"><span class="hs-identifier hs-var">ifCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceConDecls
</span><a href="GHC.Iface.Syntax.html#IfAbstractTyCon"><span class="hs-identifier hs-var">IfAbstractTyCon</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-238"></span><span class="annot"><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-var">isAbstractIfaceDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifBody :: IfaceDecl -&gt; IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#IfAbstractClass"><span class="hs-identifier hs-var">IfAbstractClass</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-239"></span><span class="annot"><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-var">isAbstractIfaceDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamily"><span class="hs-identifier hs-type">IfaceFamily</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifFamFlav :: IfaceDecl -&gt; IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#ifFamFlav"><span class="hs-identifier hs-var">ifFamFlav</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#IfaceAbstractClosedSynFamilyTyCon"><span class="hs-identifier hs-var">IfaceAbstractClosedSynFamilyTyCon</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-240"></span><span class="annot"><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-var">isAbstractIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="annot"><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-type">ifMaybeRoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span id="ifMaybeRoles"><span class="annot"><span class="annottext">ifMaybeRoles :: IfaceDecl -&gt; Maybe [Role]
</span><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-var hs-var">ifMaybeRoles</span></a></span></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceData"><span class="hs-identifier hs-type">IfaceData</span></a></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321575"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321575"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321575"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-244"></span><span class="annot"><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-var">ifMaybeRoles</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSynonym"><span class="hs-identifier hs-type">IfaceSynonym</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321573"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321573"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321573"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-245"></span><span class="annot"><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-var">ifMaybeRoles</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span>   </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321572"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321572"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321572"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-var">ifMaybeRoles</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Merge two 'IfaceDecl's together, preferring a non-abstract one.  If</span><span>
</span><span id="line-249"></span><span class="hs-comment">-- both are non-abstract we pick one arbitrarily (and check for consistency</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- later.)</span><span>
</span><span id="line-251"></span><span class="annot"><a href="GHC.IfaceToCore.html#mergeIfaceDecl"><span class="hs-identifier hs-type">mergeIfaceDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-252"></span><span id="mergeIfaceDecl"><span class="annot"><span class="annottext">mergeIfaceDecl :: IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#mergeIfaceDecl"><span class="hs-identifier hs-var hs-var">mergeIfaceDecl</span></a></span></span><span> </span><span id="local-6989586621681321570"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span id="local-6989586621681321569"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span></span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Bool
</span><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-var">isAbstractIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#withRolesFrom"><span class="hs-operator hs-var">`withRolesFrom`</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Bool
</span><a href="GHC.IfaceToCore.html#isAbstractIfaceDecl"><span class="hs-identifier hs-var">isAbstractIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#withRolesFrom"><span class="hs-operator hs-var">`withRolesFrom`</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifBody :: IfaceDecl -&gt; IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfConcreteClass"><span class="hs-identifier hs-type">IfConcreteClass</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifSigs :: IfaceClassBody -&gt; [IfaceClassOp]
</span><a href="GHC.Iface.Syntax.html#ifSigs"><span class="hs-identifier hs-var">ifSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321565"><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321565"><span class="hs-identifier hs-var">ops1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifMinDef :: IfaceClassBody -&gt; BooleanFormula FastString
</span><a href="GHC.Iface.Syntax.html#ifMinDef"><span class="hs-identifier hs-var">ifMinDef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321563"><span class="annot"><span class="annottext">BooleanFormula FastString
</span><a href="#local-6989586621681321563"><span class="hs-identifier hs-var">bf1</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifBody :: IfaceDecl -&gt; IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfConcreteClass"><span class="hs-identifier hs-type">IfConcreteClass</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifSigs :: IfaceClassBody -&gt; [IfaceClassOp]
</span><a href="GHC.Iface.Syntax.html#ifSigs"><span class="hs-identifier hs-var">ifSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321562"><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321562"><span class="hs-identifier hs-var">ops2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifMinDef :: IfaceClassBody -&gt; BooleanFormula FastString
</span><a href="GHC.Iface.Syntax.html#ifMinDef"><span class="hs-identifier hs-var">ifMinDef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321561"><span class="annot"><span class="annottext">BooleanFormula FastString
</span><a href="#local-6989586621681321561"><span class="hs-identifier hs-var">bf2</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321560"><span class="annot"><span class="annottext">ops :: [IfaceClassOp]
</span><a href="#local-6989586621681321560"><span class="hs-identifier hs-var hs-var">ops</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Env.html#nameEnvElts"><span class="hs-identifier hs-var">nameEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-258"></span><span>                  </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; NameEnv a -&gt; NameEnv a -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#plusNameEnv_C"><span class="hs-identifier hs-var">plusNameEnv_C</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClassOp -&gt; IfaceClassOp -&gt; IfaceClassOp
</span><a href="GHC.IfaceToCore.html#mergeIfaceClassOp"><span class="hs-identifier hs-var">mergeIfaceClassOp</span></a></span><span>
</span><span id="line-259"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321556"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceClassOp
</span><a href="#local-6989586621681321555"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681321555"><span class="annot"><span class="annottext">op :: IfaceClassOp
</span><a href="#local-6989586621681321555"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span id="local-6989586621681321556"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321556"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec IfaceType)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321565"><span class="hs-identifier hs-var">ops1</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321553"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceClassOp
</span><a href="#local-6989586621681321552"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681321552"><span class="annot"><span class="annottext">op :: IfaceClassOp
</span><a href="#local-6989586621681321552"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span id="local-6989586621681321553"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321553"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec IfaceType)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321562"><span class="hs-identifier hs-var">ops2</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifBody :: IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceDecl -&gt; IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-262"></span><span>                </span><span class="annot"><span class="annottext">ifSigs :: [IfaceClassOp]
</span><a href="GHC.Iface.Syntax.html#ifSigs"><span class="hs-identifier hs-var">ifSigs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321560"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-263"></span><span>                </span><span class="annot"><span class="annottext">ifMinDef :: BooleanFormula FastString
</span><a href="GHC.Iface.Syntax.html#ifMinDef"><span class="hs-identifier hs-var">ifMinDef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [LBooleanFormula a] -&gt; BooleanFormula a
</span><a href="GHC.Data.BooleanFormula.html#mkOr"><span class="hs-identifier hs-var">BF.mkOr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">BooleanFormula FastString
</span><a href="#local-6989586621681321563"><span class="hs-identifier hs-var">bf1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">BooleanFormula FastString
</span><a href="#local-6989586621681321561"><span class="hs-identifier hs-var">bf2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-264"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-265"></span><span>            </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#withRolesFrom"><span class="hs-operator hs-var">`withRolesFrom`</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-comment">-- It doesn't matter; we'll check for consistency later when</span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-comment">-- we merge, see 'mergeSignatures'</span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321570"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#withRolesFrom"><span class="hs-operator hs-var">`withRolesFrom`</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321569"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- Note [Role merging]</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- First, why might it be necessary to do a non-trivial role</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- merge?  It may rescue a merge that might otherwise fail:</span><span>
</span><span id="line-274"></span><span class="hs-comment">--</span><span>
</span><span id="line-275"></span><span class="hs-comment">--      signature A where</span><span>
</span><span id="line-276"></span><span class="hs-comment">--          type role T nominal representational</span><span>
</span><span id="line-277"></span><span class="hs-comment">--          data T a b</span><span>
</span><span id="line-278"></span><span class="hs-comment">--</span><span>
</span><span id="line-279"></span><span class="hs-comment">--      signature A where</span><span>
</span><span id="line-280"></span><span class="hs-comment">--          type role T representational nominal</span><span>
</span><span id="line-281"></span><span class="hs-comment">--          data T a b</span><span>
</span><span id="line-282"></span><span class="hs-comment">--</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- A module that defines T as representational in both arguments</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- would successfully fill both signatures, so it would be better</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- if we merged the roles of these types in some nontrivial</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- way.</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- However, we have to be very careful about how we go about</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- doing this, because role subtyping is *conditional* on</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- the supertype being NOT representationally injective, e.g.,</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- if we have instead:</span><span>
</span><span id="line-292"></span><span class="hs-comment">--</span><span>
</span><span id="line-293"></span><span class="hs-comment">--      signature A where</span><span>
</span><span id="line-294"></span><span class="hs-comment">--          type role T nominal representational</span><span>
</span><span id="line-295"></span><span class="hs-comment">--          data T a b = T a b</span><span>
</span><span id="line-296"></span><span class="hs-comment">--</span><span>
</span><span id="line-297"></span><span class="hs-comment">--      signature A where</span><span>
</span><span id="line-298"></span><span class="hs-comment">--          type role T representational nominal</span><span>
</span><span id="line-299"></span><span class="hs-comment">--          data T a b = T a b</span><span>
</span><span id="line-300"></span><span class="hs-comment">--</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- Should we merge the definitions of T so that the roles are R/R (or N/N)?</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- Absolutely not: neither resulting type is a subtype of the original</span><span>
</span><span id="line-303"></span><span class="hs-comment">-- types (see Note [Role subtyping]), because data is not representationally</span><span>
</span><span id="line-304"></span><span class="hs-comment">-- injective.</span><span>
</span><span id="line-305"></span><span class="hs-comment">--</span><span>
</span><span id="line-306"></span><span class="hs-comment">-- Thus, merging only occurs when BOTH TyCons in question are</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- representationally injective.  If they're not, no merge.</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="annot"><a href="GHC.IfaceToCore.html#withRolesFrom"><span class="hs-identifier hs-type">withRolesFrom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-310"></span><span id="local-6989586621681321549"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321549"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span id="withRolesFrom"><span class="annot"><span class="annottext">withRolesFrom :: IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#withRolesFrom"><span class="hs-operator hs-var hs-var">`withRolesFrom`</span></a></span></span><span> </span><span id="local-6989586621681321548"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321548"><span class="hs-identifier hs-var">d2</span></a></span></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681321547"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321547"><span class="hs-identifier hs-var">roles1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Maybe [Role]
</span><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-var">ifMaybeRoles</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321549"><span class="hs-identifier hs-var">d1</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681321546"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321546"><span class="hs-identifier hs-var">roles2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Maybe [Role]
</span><a href="GHC.IfaceToCore.html#ifMaybeRoles"><span class="hs-identifier hs-var">ifMaybeRoles</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321548"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceDecl -&gt; Bool
</span><a href="GHC.IfaceToCore.html#isRepInjectiveIfaceDecl"><span class="hs-identifier hs-var">isRepInjectiveIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321549"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Bool
</span><a href="GHC.IfaceToCore.html#isRepInjectiveIfaceDecl"><span class="hs-identifier hs-var">isRepInjectiveIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321548"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321549"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifRoles :: [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {c}. Ord c =&gt; [c] -&gt; [c] -&gt; [c]
</span><a href="#local-6989586621681321542"><span class="hs-identifier hs-var">mergeRoles</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321547"><span class="hs-identifier hs-var">roles1</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321546"><span class="hs-identifier hs-var">roles2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321549"><span class="hs-identifier hs-var">d1</span></a></span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>    </span><span id="local-6989586621681321542"><span class="annot"><span class="annottext">mergeRoles :: [c] -&gt; [c] -&gt; [c]
</span><a href="#local-6989586621681321542"><span class="hs-identifier hs-var hs-var">mergeRoles</span></a></span></span><span> </span><span id="local-6989586621681321539"><span class="annot"><span class="annottext">[c]
</span><a href="#local-6989586621681321539"><span class="hs-identifier hs-var">roles1</span></a></span></span><span> </span><span id="local-6989586621681321538"><span class="annot"><span class="annottext">[c]
</span><a href="#local-6989586621681321538"><span class="hs-identifier hs-var">roles2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. String -&gt; (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="GHC.Utils.Misc.html#zipWithEqual"><span class="hs-identifier hs-var">zipWithEqual</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mergeRoles&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">[c]
</span><a href="#local-6989586621681321539"><span class="hs-identifier hs-var">roles1</span></a></span><span> </span><span class="annot"><span class="annottext">[c]
</span><a href="#local-6989586621681321538"><span class="hs-identifier hs-var">roles2</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="annot"><a href="GHC.IfaceToCore.html#isRepInjectiveIfaceDecl"><span class="hs-identifier hs-type">isRepInjectiveIfaceDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-320"></span><span id="isRepInjectiveIfaceDecl"><span class="annot"><span class="annottext">isRepInjectiveIfaceDecl :: IfaceDecl -&gt; Bool
</span><a href="GHC.IfaceToCore.html#isRepInjectiveIfaceDecl"><span class="hs-identifier hs-var hs-var">isRepInjectiveIfaceDecl</span></a></span></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceData"><span class="hs-identifier hs-type">IfaceData</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifCons :: IfaceDecl -&gt; IfaceConDecls
</span><a href="GHC.Iface.Syntax.html#ifCons"><span class="hs-identifier hs-var">ifCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfDataTyCon"><span class="hs-identifier hs-type">IfDataTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceConDecl]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-321"></span><span class="annot"><a href="GHC.IfaceToCore.html#isRepInjectiveIfaceDecl"><span class="hs-identifier hs-var">isRepInjectiveIfaceDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamily"><span class="hs-identifier hs-type">IfaceFamily</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifFamFlav :: IfaceDecl -&gt; IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#ifFamFlav"><span class="hs-identifier hs-var">ifFamFlav</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#IfaceDataFamilyTyCon"><span class="hs-identifier hs-var">IfaceDataFamilyTyCon</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-322"></span><span class="annot"><a href="GHC.IfaceToCore.html#isRepInjectiveIfaceDecl"><span class="hs-identifier hs-var">isRepInjectiveIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="annot"><a href="GHC.IfaceToCore.html#mergeIfaceClassOp"><span class="hs-identifier hs-type">mergeIfaceClassOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span>
</span><span id="line-325"></span><span id="mergeIfaceClassOp"><span class="annot"><span class="annottext">mergeIfaceClassOp :: IfaceClassOp -&gt; IfaceClassOp -&gt; IfaceClassOp
</span><a href="GHC.IfaceToCore.html#mergeIfaceClassOp"><span class="hs-identifier hs-var hs-var">mergeIfaceClassOp</span></a></span></span><span> </span><span id="local-6989586621681321533"><span class="annot"><span class="annottext">op1 :: IfaceClassOp
</span><a href="#local-6989586621681321533"><span class="hs-identifier hs-var">op1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DefMethSpec IfaceType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IfaceClassOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceClassOp
</span><a href="#local-6989586621681321533"><span class="hs-identifier hs-var">op1</span></a></span><span>
</span><span id="line-326"></span><span class="annot"><a href="GHC.IfaceToCore.html#mergeIfaceClassOp"><span class="hs-identifier hs-var">mergeIfaceClassOp</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClassOp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681321532"><span class="annot"><span class="annottext">IfaceClassOp
</span><a href="#local-6989586621681321532"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceClassOp
</span><a href="#local-6989586621681321532"><span class="hs-identifier hs-var">op2</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-comment">-- | Merge two 'OccEnv's of 'IfaceDecl's by 'OccName'.</span><span>
</span><span id="line-329"></span><span class="annot"><a href="GHC.IfaceToCore.html#mergeIfaceDecls"><span class="hs-identifier hs-type">mergeIfaceDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-330"></span><span id="mergeIfaceDecls"><span class="annot"><span class="annottext">mergeIfaceDecls :: OccEnv IfaceDecl -&gt; OccEnv IfaceDecl -&gt; OccEnv IfaceDecl
</span><a href="GHC.IfaceToCore.html#mergeIfaceDecls"><span class="hs-identifier hs-var hs-var">mergeIfaceDecls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; OccEnv a -&gt; OccEnv a -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#plusOccEnv_C"><span class="hs-identifier hs-var">plusOccEnv_C</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; IfaceDecl -&gt; IfaceDecl
</span><a href="GHC.IfaceToCore.html#mergeIfaceDecl"><span class="hs-identifier hs-var">mergeIfaceDecl</span></a></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- | This is a very interesting function.  Like typecheckIface, we want</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- to type check an interface file into a ModDetails.  However, the use-case</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- for these ModDetails is different: we want to compare all of the</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- ModDetails to ensure they define compatible declarations, and then</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- merge them together.  So in particular, we have to take a different</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- strategy for knot-tying: we first speculatively merge the declarations</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- to get the &quot;base&quot; truth for what we believe the types will be</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- (this is &quot;type computation.&quot;)  Then we read everything in relative</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- to this truth and check for compatibility.</span><span>
</span><span id="line-341"></span><span class="hs-comment">--</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- During the merge process, we may need to nondeterministically</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- pick a particular declaration to use, if multiple signatures define</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- the declaration ('mergeIfaceDecl').  If, for all choices, there</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- are no type synonym cycles in the resulting merged graph, then</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- we can show that our choice cannot matter. Consider the</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- set of entities which the declarations depend on: by assumption</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- of acyclicity, we can assume that these have already been shown to be equal</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- to each other (otherwise merging will fail).  Then it must</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- be the case that all candidate declarations here are type-equal</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- (the choice doesn't matter) or there is an inequality (in which</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- case merging will fail.)</span><span>
</span><span id="line-353"></span><span class="hs-comment">--</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- Unfortunately, the choice can matter if there is a cycle.  Consider the</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- following merge:</span><span>
</span><span id="line-356"></span><span class="hs-comment">--</span><span>
</span><span id="line-357"></span><span class="hs-comment">--      signature H where { type A = C;  type B = A; data C      }</span><span>
</span><span id="line-358"></span><span class="hs-comment">--      signature H where { type A = (); data B;     type C = B  }</span><span>
</span><span id="line-359"></span><span class="hs-comment">--</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- If we pick @type A = C@ as our representative, there will be</span><span>
</span><span id="line-361"></span><span class="hs-comment">-- a cycle and merging will fail. But if we pick @type A = ()@ as</span><span>
</span><span id="line-362"></span><span class="hs-comment">-- our representative, no cycle occurs, and we instead conclude</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- that all of the types are unit.  So it seems that we either</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- (a) need a stronger acyclicity check which considers *all*</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- possible choices from a merge, or (b) we must find a selection</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- of declarations which is acyclic, and show that this is always</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- the &quot;best&quot; choice we could have made (ezyang conjectures this</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- is the case but does not have a proof).  For now this is</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- not implemented.</span><span>
</span><span id="line-370"></span><span class="hs-comment">--</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- It's worth noting that at the moment, a data constructor and a</span><span>
</span><span id="line-372"></span><span class="hs-comment">-- type synonym are never compatible.  Consider:</span><span>
</span><span id="line-373"></span><span class="hs-comment">--</span><span>
</span><span id="line-374"></span><span class="hs-comment">--      signature H where { type Int=C;         type B = Int; data C = Int}</span><span>
</span><span id="line-375"></span><span class="hs-comment">--      signature H where { export Prelude.Int; data B;       type C = B; }</span><span>
</span><span id="line-376"></span><span class="hs-comment">--</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- This will be rejected, because the reexported Int in the second</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- signature (a proper data type) is never considered equal to a</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- type synonym.  Perhaps this should be relaxed, where a type synonym</span><span>
</span><span id="line-380"></span><span class="hs-comment">-- in a signature is considered implemented by a data type declaration</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- which matches the reference of the type synonym.</span><span>
</span><span id="line-382"></span><span id="local-6989586621681322488"><span class="annot"><a href="GHC.IfaceToCore.html#typecheckIfacesForMerging"><span class="hs-identifier hs-type">typecheckIfacesForMerging</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322488"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-383"></span><span id="typecheckIfacesForMerging"><span class="annot"><span class="annottext">typecheckIfacesForMerging :: forall lcl.
Module
-&gt; [ModIface] -&gt; IORef TypeEnv -&gt; IfM lcl (TypeEnv, [ModDetails])
</span><a href="GHC.IfaceToCore.html#typecheckIfacesForMerging"><span class="hs-identifier hs-var hs-var">typecheckIfacesForMerging</span></a></span></span><span> </span><span id="local-6989586621681321507"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321507"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681321506"><span class="annot"><span class="annottext">[ModIface]
</span><a href="#local-6989586621681321506"><span class="hs-identifier hs-var">ifaces</span></a></span></span><span> </span><span id="local-6989586621681321505"><span class="annot"><span class="annottext">IORef TypeEnv
</span><a href="#local-6989586621681321505"><span class="hs-identifier hs-var">tc_env_var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-comment">-- cannot be boot (False)</span><span>
</span><span id="line-385"></span><span>  </span><span class="annot"><span class="annottext">forall a lcl.
Module -&gt; SDoc -&gt; IsBootInterface -&gt; IfL a -&gt; IfM lcl a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceLcl"><span class="hs-identifier hs-var">initIfaceLcl</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321507"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typecheckIfacesForMerging&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621681321503"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321503"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_IgnoreInterfacePragmas"><span class="hs-identifier hs-var">Opt_IgnoreInterfacePragmas</span></a></span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-comment">-- Build the initial environment</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-comment">-- NB: Don't include dfuns here, because we don't want to</span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-comment">-- serialize them out.  See Note [rnIfaceNeverExported] in GHC.Iface.Rename</span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-comment">-- NB: But coercions are OK, because they will have the right OccName.</span><span>
</span><span id="line-391"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321500"><span class="annot"><span class="annottext">mk_decl_env :: [IfaceDecl] -&gt; OccEnv IfaceDecl
</span><a href="#local-6989586621681321500"><span class="hs-identifier hs-var hs-var">mk_decl_env</span></a></span></span><span> </span><span id="local-6989586621681321499"><span class="annot"><span class="annottext">[IfaceDecl]
</span><a href="#local-6989586621681321499"><span class="hs-identifier hs-var">decls</span></a></span></span><span>
</span><span id="line-392"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [(OccName, a)] -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#mkOccEnv"><span class="hs-identifier hs-var">mkOccEnv</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321496"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321496"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>                       </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681321496"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321496"><span class="hs-identifier hs-var">decl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceDecl]
</span><a href="#local-6989586621681321499"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-394"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321496"><span class="hs-identifier hs-var">decl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-395"></span><span>                            </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceId"><span class="hs-identifier hs-type">IfaceId</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifIdDetails :: IfaceDecl -&gt; IfaceIdDetails
</span><a href="GHC.Iface.Syntax.html#ifIdDetails"><span class="hs-identifier hs-var">ifIdDetails</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceIdDetails
</span><a href="GHC.Iface.Syntax.html#IfDFunId"><span class="hs-identifier hs-var">IfDFunId</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">-- exclude DFuns</span><span>
</span><span id="line-396"></span><span>                            </span><span class="annot"><span class="annottext">IfaceDecl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>        </span><span id="local-6989586621681321492"><span class="annot"><span class="annottext">decl_envs :: [OccEnv IfaceDecl]
</span><a href="#local-6989586621681321492"><span class="hs-identifier hs-var hs-var">decl_envs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IfaceDecl] -&gt; OccEnv IfaceDecl
</span><a href="#local-6989586621681321500"><span class="hs-identifier hs-var">mk_decl_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ModIface]
</span><a href="#local-6989586621681321506"><span class="hs-identifier hs-var">ifaces</span></a></span><span>
</span><span id="line-398"></span><span>                        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-399"></span><span>        </span><span id="local-6989586621681321490"><span class="annot"><span class="annottext">decl_env :: OccEnv IfaceDecl
</span><a href="#local-6989586621681321490"><span class="hs-identifier hs-var hs-var">decl_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv IfaceDecl -&gt; OccEnv IfaceDecl -&gt; OccEnv IfaceDecl
</span><a href="GHC.IfaceToCore.html#mergeIfaceDecls"><span class="hs-identifier hs-var">mergeIfaceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#emptyOccEnv"><span class="hs-identifier hs-var">emptyOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[OccEnv IfaceDecl]
</span><a href="#local-6989586621681321492"><span class="hs-identifier hs-var">decl_envs</span></a></span><span>
</span><span id="line-400"></span><span>                        </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span class="hs-comment">-- TODO: change tcIfaceDecls to accept w/o Fingerprint</span><span>
</span><span id="line-402"></span><span>    </span><span id="local-6989586621681321487"><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321487"><span class="hs-identifier hs-var">names_w_things</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [(Fingerprint, IfaceDecl)] -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-var">tcIfaceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321503"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681321486"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321486"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base-4.16.4.0/src/GHC-Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321486"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>                                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. OccEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Occurrence.html#occEnvElts"><span class="hs-identifier hs-var">occEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv IfaceDecl
</span><a href="#local-6989586621681321490"><span class="hs-identifier hs-var">decl_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321483"><span class="annot"><span class="annottext">global_type_env :: TypeEnv
</span><a href="#local-6989586621681321483"><span class="hs-identifier hs-var hs-var">global_type_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321487"><span class="hs-identifier hs-var">names_w_things</span></a></span><span>
</span><span id="line-405"></span><span>    </span><span class="annot"><span class="annottext">forall a env. IORef a -&gt; a -&gt; IOEnv env ()
</span><a href="GHC.Data.IOEnv.html#writeMutVar"><span class="hs-identifier hs-var">writeMutVar</span></a></span><span> </span><span class="annot"><span class="annottext">IORef TypeEnv
</span><a href="#local-6989586621681321505"><span class="hs-identifier hs-var">tc_env_var</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321483"><span class="hs-identifier hs-var">global_type_env</span></a></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-comment">-- OK, now typecheck each ModIface using this environment</span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621681321481"><span class="annot"><span class="annottext">[ModDetails]
</span><a href="#local-6989586621681321481"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[ModIface]
</span><a href="#local-6989586621681321506"><span class="hs-identifier hs-var">ifaces</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681321479"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-comment">-- See Note [Resolving never-exported Names] in GHC.IfaceToCore</span><span>
</span><span id="line-410"></span><span>        </span><span id="local-6989586621681321478"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321478"><span class="hs-identifier hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681321476"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321476"><span class="hs-identifier hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-411"></span><span>            </span><span class="annot"><span class="annottext">forall a. TypeEnv -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#setImplicitEnvM"><span class="hs-identifier hs-var">setImplicitEnvM</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321476"><span class="hs-identifier hs-var">type_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-412"></span><span>                </span><span id="local-6989586621681321474"><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321474"><span class="hs-identifier hs-var">decls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [(Fingerprint, IfaceDecl)] -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-var">tcIfaceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321503"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321474"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>        </span><span class="hs-comment">-- But note that we use this type_env to typecheck references to DFun</span><span>
</span><span id="line-415"></span><span>        </span><span class="hs-comment">-- in 'IfaceInst'</span><span>
</span><span id="line-416"></span><span>        </span><span class="annot"><span class="annottext">forall a. TypeEnv -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#setImplicitEnvM"><span class="hs-identifier hs-var">setImplicitEnvM</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321478"><span class="hs-identifier hs-var">type_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-417"></span><span>        </span><span id="local-6989586621681321473"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681321473"><span class="hs-identifier hs-var">insts</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClsInst -&gt; IfL ClsInst
</span><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier hs-var">tcIfaceInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>        </span><span id="local-6989586621681321472"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681321472"><span class="hs-identifier hs-var">fam_insts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceFamInst -&gt; IfL FamInst
</span><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier hs-var">tcIfaceFamInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>        </span><span id="local-6989586621681321471"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681321471"><span class="hs-identifier hs-var">rules</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [IfaceRule] -&gt; IfL [CoreRule]
</span><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier hs-var">tcIfaceRules</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321503"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Unit.Module.ModIface.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>        </span><span id="local-6989586621681321470"><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681321470"><span class="hs-identifier hs-var">anns</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation] -&gt; IfL [Annotation]
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier hs-var">tcIfaceAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Unit.Module.ModIface.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>        </span><span id="local-6989586621681321469"><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681321469"><span class="hs-identifier hs-var">exports</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. [AvailInfo] -&gt; TcRnIf gbl lcl [AvailInfo]
</span><a href="GHC.Iface.Env.html#ifaceExportNames"><span class="hs-identifier hs-var">ifaceExportNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [AvailInfo]
</span><a href="GHC.Unit.Module.ModIface.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>        </span><span id="local-6989586621681321468"><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681321468"><span class="hs-identifier hs-var">complete_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch] -&gt; IfL [CompleteMatch]
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier hs-var">tcIfaceCompleteMatches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Unit.Module.ModIface.html#mi_complete_matches"><span class="hs-identifier hs-var">mi_complete_matches</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321479"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">md_types :: TypeEnv
</span><a href="GHC.Unit.Module.ModDetails.html#md_types"><span class="hs-identifier hs-var">md_types</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321478"><span class="hs-identifier hs-var">type_env</span></a></span><span>
</span><span id="line-424"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_insts :: [ClsInst]
</span><a href="GHC.Unit.Module.ModDetails.html#md_insts"><span class="hs-identifier hs-var">md_insts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681321473"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-425"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_fam_insts :: [FamInst]
</span><a href="GHC.Unit.Module.ModDetails.html#md_fam_insts"><span class="hs-identifier hs-var">md_fam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681321472"><span class="hs-identifier hs-var">fam_insts</span></a></span><span>
</span><span id="line-426"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_rules :: [CoreRule]
</span><a href="GHC.Unit.Module.ModDetails.html#md_rules"><span class="hs-identifier hs-var">md_rules</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681321471"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-427"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_anns :: [Annotation]
</span><a href="GHC.Unit.Module.ModDetails.html#md_anns"><span class="hs-identifier hs-var">md_anns</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681321470"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-428"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_exports :: [AvailInfo]
</span><a href="GHC.Unit.Module.ModDetails.html#md_exports"><span class="hs-identifier hs-var">md_exports</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681321469"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-429"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_complete_matches :: [CompleteMatch]
</span><a href="GHC.Unit.Module.ModDetails.html#md_complete_matches"><span class="hs-identifier hs-var">md_complete_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681321468"><span class="hs-identifier hs-var">complete_matches</span></a></span><span>
</span><span id="line-430"></span><span>                            </span><span class="hs-special">}</span><span>
</span><span id="line-431"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321483"><span class="hs-identifier hs-var">global_type_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ModDetails]
</span><a href="#local-6989586621681321481"><span class="hs-identifier hs-var">details</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- | Typecheck a signature 'ModIface' under the assumption that we have</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- instantiated it under some implementation (recorded in 'mi_semantic_module')</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- and want to check if the implementation fills the signature.</span><span>
</span><span id="line-436"></span><span class="hs-comment">--</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- This needs to operate slightly differently than 'typecheckIface'</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- because (1) we have a 'NameShape', from the exports of the</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- implementing module, which we will use to give our top-level</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- declarations the correct 'Name's even when the implementor</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- provided them with a reexport, and (2) we have to deal with</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- DFun silliness (see Note [rnIfaceNeverExported])</span><span>
</span><span id="line-443"></span><span id="local-6989586621681322462"><span class="annot"><a href="GHC.IfaceToCore.html#typecheckIfaceForInstantiate"><span class="hs-identifier hs-type">typecheckIfaceForInstantiate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#NameShape"><span class="hs-identifier hs-type">NameShape</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322462"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span></span><span>
</span><span id="line-444"></span><span id="typecheckIfaceForInstantiate"><span class="annot"><span class="annottext">typecheckIfaceForInstantiate :: forall lcl. NameShape -&gt; ModIface -&gt; IfM lcl ModDetails
</span><a href="GHC.IfaceToCore.html#typecheckIfaceForInstantiate"><span class="hs-identifier hs-var hs-var">typecheckIfaceForInstantiate</span></a></span></span><span> </span><span id="local-6989586621681321452"><span class="annot"><span class="annottext">NameShape
</span><a href="#local-6989586621681321452"><span class="hs-identifier hs-var">nsubst</span></a></span></span><span> </span><span id="local-6989586621681321451"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-445"></span><span>  </span><span class="annot"><span class="annottext">forall a lcl.
Module
-&gt; SDoc -&gt; IsBootInterface -&gt; NameShape -&gt; IfL a -&gt; IfM lcl a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceLclWithSubst"><span class="hs-identifier hs-var">initIfaceLclWithSubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: ModIfacePhase). ModIface_ a -&gt; Module
</span><a href="GHC.Unit.Module.ModIface.html#mi_semantic_module"><span class="hs-identifier hs-var">mi_semantic_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typecheckIfaceForInstantiate&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IsBootInterface
</span><a href="GHC.Unit.Module.ModIface.html#mi_boot"><span class="hs-identifier hs-var">mi_boot</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NameShape
</span><a href="#local-6989586621681321452"><span class="hs-identifier hs-var">nsubst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-448"></span><span>    </span><span id="local-6989586621681321449"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321449"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_IgnoreInterfacePragmas"><span class="hs-identifier hs-var">Opt_IgnoreInterfacePragmas</span></a></span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-comment">-- See Note [Resolving never-exported Names] in GHC.IfaceToCore</span><span>
</span><span id="line-450"></span><span>    </span><span id="local-6989586621681321448"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321448"><span class="hs-identifier hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681321447"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321447"><span class="hs-identifier hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-451"></span><span>        </span><span class="annot"><span class="annottext">forall a. TypeEnv -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#setImplicitEnvM"><span class="hs-identifier hs-var">setImplicitEnvM</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321447"><span class="hs-identifier hs-var">type_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-452"></span><span>            </span><span id="local-6989586621681321446"><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321446"><span class="hs-identifier hs-var">decls</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [(Fingerprint, IfaceDecl)] -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-var">tcIfaceDecls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321449"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)]
</span><a href="#local-6989586621681321446"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">-- See Note [rnIfaceNeverExported]</span><span>
</span><span id="line-455"></span><span>    </span><span class="annot"><span class="annottext">forall a. TypeEnv -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#setImplicitEnvM"><span class="hs-identifier hs-var">setImplicitEnvM</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321448"><span class="hs-identifier hs-var">type_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621681321445"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681321445"><span class="hs-identifier hs-var">insts</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClsInst -&gt; IfL ClsInst
</span><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier hs-var">tcIfaceInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621681321444"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681321444"><span class="hs-identifier hs-var">fam_insts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceFamInst -&gt; IfL FamInst
</span><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier hs-var">tcIfaceFamInst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Unit.Module.ModIface.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>    </span><span id="local-6989586621681321443"><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681321443"><span class="hs-identifier hs-var">rules</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [IfaceRule] -&gt; IfL [CoreRule]
</span><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier hs-var">tcIfaceRules</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321449"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Unit.Module.ModIface.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>    </span><span id="local-6989586621681321442"><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681321442"><span class="hs-identifier hs-var">anns</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation] -&gt; IfL [Annotation]
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier hs-var">tcIfaceAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Unit.Module.ModIface.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621681321441"><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681321441"><span class="hs-identifier hs-var">exports</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. [AvailInfo] -&gt; TcRnIf gbl lcl [AvailInfo]
</span><a href="GHC.Iface.Env.html#ifaceExportNames"><span class="hs-identifier hs-var">ifaceExportNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [AvailInfo]
</span><a href="GHC.Unit.Module.ModIface.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>    </span><span id="local-6989586621681321440"><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681321440"><span class="hs-identifier hs-var">complete_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch] -&gt; IfL [CompleteMatch]
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier hs-var">tcIfaceCompleteMatches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Unit.Module.ModIface.html#mi_complete_matches"><span class="hs-identifier hs-var">mi_complete_matches</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321451"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">md_types :: TypeEnv
</span><a href="GHC.Unit.Module.ModDetails.html#md_types"><span class="hs-identifier hs-var">md_types</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681321448"><span class="hs-identifier hs-var">type_env</span></a></span><span>
</span><span id="line-463"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_insts :: [ClsInst]
</span><a href="GHC.Unit.Module.ModDetails.html#md_insts"><span class="hs-identifier hs-var">md_insts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681321445"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-464"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_fam_insts :: [FamInst]
</span><a href="GHC.Unit.Module.ModDetails.html#md_fam_insts"><span class="hs-identifier hs-var">md_fam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621681321444"><span class="hs-identifier hs-var">fam_insts</span></a></span><span>
</span><span id="line-465"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_rules :: [CoreRule]
</span><a href="GHC.Unit.Module.ModDetails.html#md_rules"><span class="hs-identifier hs-var">md_rules</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreRule]
</span><a href="#local-6989586621681321443"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-466"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_anns :: [Annotation]
</span><a href="GHC.Unit.Module.ModDetails.html#md_anns"><span class="hs-identifier hs-var">md_anns</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621681321442"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-467"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_exports :: [AvailInfo]
</span><a href="GHC.Unit.Module.ModDetails.html#md_exports"><span class="hs-identifier hs-var">md_exports</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AvailInfo]
</span><a href="#local-6989586621681321441"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-468"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">md_complete_matches :: [CompleteMatch]
</span><a href="GHC.Unit.Module.ModDetails.html#md_complete_matches"><span class="hs-identifier hs-var">md_complete_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CompleteMatch]
</span><a href="#local-6989586621681321440"><span class="hs-identifier hs-var">complete_matches</span></a></span><span>
</span><span id="line-469"></span><span>                        </span><span class="hs-special">}</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-comment">-- Note [Resolving never-exported Names]</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-473"></span><span class="hs-comment">-- For the high-level overview, see</span><span>
</span><span id="line-474"></span><span class="hs-comment">-- Note [Handling never-exported TyThings under Backpack]</span><span>
</span><span id="line-475"></span><span class="hs-comment">--</span><span>
</span><span id="line-476"></span><span class="hs-comment">-- As described in 'typecheckIfacesForMerging', the splendid innovation</span><span>
</span><span id="line-477"></span><span class="hs-comment">-- of signature merging is to rewrite all Names in each of the signatures</span><span>
</span><span id="line-478"></span><span class="hs-comment">-- we are merging together to a pre-merged structure; this is the key</span><span>
</span><span id="line-479"></span><span class="hs-comment">-- ingredient that lets us solve some problems when merging type</span><span>
</span><span id="line-480"></span><span class="hs-comment">-- synonyms.</span><span>
</span><span id="line-481"></span><span class="hs-comment">--</span><span>
</span><span id="line-482"></span><span class="hs-comment">-- However, when a 'Name' refers to a NON-exported entity, as is the</span><span>
</span><span id="line-483"></span><span class="hs-comment">-- case with the DFun of a ClsInst, or a CoAxiom of a type family,</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- this strategy causes problems: if we pick one and rewrite all</span><span>
</span><span id="line-485"></span><span class="hs-comment">-- references to a shared 'Name', we will accidentally fail to check</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- if the DFun or CoAxioms are compatible, as they will never be</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- checked--only exported entities are checked for compatibility,</span><span>
</span><span id="line-488"></span><span class="hs-comment">-- and a non-exported TyThing is checked WHEN we are checking the</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- ClsInst or type family for compatibility in checkBootDeclM.</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- By virtue of the fact that everything's been pointed to the merged</span><span>
</span><span id="line-491"></span><span class="hs-comment">-- declaration, you'll never notice there's a difference even if there</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- is one.</span><span>
</span><span id="line-493"></span><span class="hs-comment">--</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- Fortunately, there are only a few places in the interface declarations</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- where this can occur, so we replace those calls with 'tcIfaceImplicit',</span><span>
</span><span id="line-496"></span><span class="hs-comment">-- which will consult a local TypeEnv that records any never-exported</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- TyThings which we should wire up with.</span><span>
</span><span id="line-498"></span><span class="hs-comment">--</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- Note that we actually knot-tie this local TypeEnv (the 'fixM'), because a</span><span>
</span><span id="line-500"></span><span class="hs-comment">-- type family can refer to a coercion axiom, all of which are done in one go</span><span>
</span><span id="line-501"></span><span class="hs-comment">-- when we typecheck 'mi_decls'.  An alternate strategy would be to typecheck</span><span>
</span><span id="line-502"></span><span class="hs-comment">-- coercions first before type families, but that seemed more fragile.</span><span>
</span><span id="line-503"></span><span class="hs-comment">--</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Type and class declarations
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcHiBootIface"><span class="hs-identifier hs-type">tcHiBootIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SourceFile.html#HscSource"><span class="hs-identifier hs-type">HscSource</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRn"><span class="hs-identifier hs-type">TcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#SelfBootInfo"><span class="hs-identifier hs-type">SelfBootInfo</span></a></span><span>
</span><span id="line-514"></span><span class="hs-comment">-- Load the hi-boot iface for the module being compiled,</span><span>
</span><span id="line-515"></span><span class="hs-comment">-- if it indeed exists in the transitive closure of imports</span><span>
</span><span id="line-516"></span><span class="hs-comment">-- Return the ModDetails; Nothing if no hi-boot iface</span><span>
</span><span id="line-517"></span><span id="tcHiBootIface"><span class="annot"><span class="annottext">tcHiBootIface :: HscSource -&gt; Module -&gt; TcRn SelfBootInfo
</span><a href="GHC.IfaceToCore.html#tcHiBootIface"><span class="hs-identifier hs-var hs-var">tcHiBootIface</span></a></span></span><span> </span><span id="local-6989586621681321439"><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621681321439"><span class="hs-identifier hs-var">hsc_src</span></a></span></span><span> </span><span id="local-6989586621681321438"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Types.SourceFile.html#HsBootFile"><span class="hs-identifier hs-var">HsBootFile</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621681321439"><span class="hs-identifier hs-var">hsc_src</span></a></span><span>            </span><span class="hs-comment">-- Already compiling a hs-boot file</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SelfBootInfo
</span><a href="GHC.Tc.Types.html#NoSelfBoot"><span class="hs-identifier hs-var">NoSelfBoot</span></a></span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-521"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;loadHiBootInterface&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321435"><span class="annot"><span class="annottext">GhcMode
</span><a href="#local-6989586621681321435"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl GhcMode
</span><a href="GHC.Tc.Utils.Monad.html#getGhcMode"><span class="hs-identifier hs-var">getGhcMode</span></a></span><span>
</span><span id="line-524"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcMode -&gt; Bool
</span><a href="GHC.Driver.Session.html#isOneShot"><span class="hs-identifier hs-var">isOneShot</span></a></span><span> </span><span class="annot"><span class="annottext">GhcMode
</span><a href="#local-6989586621681321435"><span class="hs-identifier hs-var">mode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>                </span><span class="hs-comment">-- In --make and interactive mode, if this module has an hs-boot file</span><span>
</span><span id="line-526"></span><span>                </span><span class="hs-comment">-- we'll have compiled it already, and it'll be in the HPT</span><span>
</span><span id="line-527"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-528"></span><span>                </span><span class="hs-comment">-- We check whether the interface is a *boot* interface.</span><span>
</span><span id="line-529"></span><span>                </span><span class="hs-comment">-- It can happen (when using GHC from Visual Studio) that we</span><span>
</span><span id="line-530"></span><span>                </span><span class="hs-comment">-- compile a module in TypecheckOnly mode, with a stable,</span><span>
</span><span id="line-531"></span><span>                </span><span class="hs-comment">-- fully-populated HPT.  In that case the boot interface isn't there</span><span>
</span><span id="line-532"></span><span>                </span><span class="hs-comment">-- (it's been replaced by the mother module) so we can't check it.</span><span>
</span><span id="line-533"></span><span>                </span><span class="hs-comment">-- And that's fine, because if M's ModInfo is in the HPT, then</span><span>
</span><span id="line-534"></span><span>                </span><span class="hs-comment">-- it's been compiled once, and we don't need to check the boot iface</span><span>
</span><span id="line-535"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321432"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681321432"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HomePackageTable
</span><a href="GHC.Tc.Utils.Monad.html#getHpt"><span class="hs-identifier hs-var">getHpt</span></a></span><span>
</span><span id="line-536"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo
</span><a href="GHC.Unit.Home.ModInfo.html#lookupHpt"><span class="hs-identifier hs-var">lookupHpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681321432"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-537"></span><span>                      </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681321428"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621681321428"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; IsBootInterface
</span><a href="GHC.Unit.Module.ModIface.html#mi_boot"><span class="hs-identifier hs-var">mi_boot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Unit.Home.ModInfo.html#hm_iface"><span class="hs-identifier hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621681321428"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span>
</span><span id="line-538"></span><span>                                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; ModDetails -&gt; TcRn SelfBootInfo
</span><a href="GHC.IfaceToCore.html#mkSelfBootInfo"><span class="hs-identifier hs-var">mkSelfBootInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Unit.Home.ModInfo.html#hm_iface"><span class="hs-identifier hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621681321428"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Unit.Home.ModInfo.html#hm_details"><span class="hs-identifier hs-var">hm_details</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621681321428"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>                      </span><span class="annot"><span class="annottext">Maybe HomeModInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SelfBootInfo
</span><a href="GHC.Tc.Types.html#NoSelfBoot"><span class="hs-identifier hs-var">NoSelfBoot</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-540"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span>        </span><span class="hs-comment">-- OK, so we're in one-shot mode.</span><span>
</span><span id="line-543"></span><span>        </span><span class="hs-comment">-- Re #9245, we always check if there is an hi-boot interface</span><span>
</span><span id="line-544"></span><span>        </span><span class="hs-comment">-- to check consistency against, rather than just when we notice</span><span>
</span><span id="line-545"></span><span>        </span><span class="hs-comment">-- that an hi-boot is necessary due to a circular import.</span><span>
</span><span id="line-546"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321423"><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681321423"><span class="hs-identifier hs-var">read_result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
SDoc
-&gt; InstalledModule
-&gt; Module
-&gt; IsBootInterface
-&gt; TcRnIf gbl lcl (MaybeErr SDoc (ModIface, String))
</span><a href="GHC.Iface.Load.html#findAndReadIface"><span class="hs-identifier hs-var">findAndReadIface</span></a></span><span>
</span><span id="line-547"></span><span>                                </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321421"><span class="hs-identifier hs-var">need</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; (InstalledModule, Maybe InstantiatedModule)
</span><a href="GHC.Unit.Module.html#getModuleInstantiation"><span class="hs-identifier hs-var">getModuleInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-548"></span><span>                                </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span>  </span><span class="hs-comment">-- Hi-boot file</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc (ModIface, String)
</span><a href="#local-6989586621681321423"><span class="hs-identifier hs-var">read_result</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681321418"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321418"><span class="hs-identifier hs-var">iface</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681321417"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681321417"><span class="hs-identifier hs-var">_path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321416"><span class="annot"><span class="annottext">ModDetails
</span><a href="#local-6989586621681321416"><span class="hs-identifier hs-var">tc_iface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. IfG a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#initIfaceTcRn"><span class="hs-identifier hs-var">initIfaceTcRn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; IfG ModDetails
</span><a href="GHC.IfaceToCore.html#typecheckIface"><span class="hs-identifier hs-var">typecheckIface</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321418"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-552"></span><span>                                           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; ModDetails -&gt; TcRn SelfBootInfo
</span><a href="GHC.IfaceToCore.html#mkSelfBootInfo"><span class="hs-identifier hs-var">mkSelfBootInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321418"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="annot"><span class="annottext">ModDetails
</span><a href="#local-6989586621681321416"><span class="hs-identifier hs-var">tc_iface</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-553"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681321413"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321413"><span class="hs-identifier hs-var">err</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span>        </span><span class="hs-comment">-- There was no hi-boot file. But if there is circularity in</span><span>
</span><span id="line-556"></span><span>        </span><span class="hs-comment">-- the module graph, there really should have been one.</span><span>
</span><span id="line-557"></span><span>        </span><span class="hs-comment">-- Since we've read all the direct imports by now,</span><span>
</span><span id="line-558"></span><span>        </span><span class="hs-comment">-- eps_is_boot will record if any of our imports mention the</span><span>
</span><span id="line-559"></span><span>        </span><span class="hs-comment">-- current module, which either means a module loop (not</span><span>
</span><span id="line-560"></span><span>        </span><span class="hs-comment">-- a SOURCE import) or that our hi-boot file has mysteriously</span><span>
</span><span id="line-561"></span><span>        </span><span class="hs-comment">-- disappeared.</span><span>
</span><span id="line-562"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321412"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681321412"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl ExternalPackageState
</span><a href="GHC.Tc.Utils.Monad.html#getEps"><span class="hs-identifier hs-var">getEps</span></a></span><span>
</span><span id="line-563"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall key elt. Uniquable key =&gt; UniqFM key elt -&gt; key -&gt; Maybe elt
</span><a href="GHC.Types.Unique.FM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleNameEnv ModuleNameWithIsBoot
</span><a href="GHC.Unit.External.html#eps_is_boot"><span class="hs-identifier hs-var">eps_is_boot</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681321412"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-564"></span><span>            </span><span class="hs-comment">-- The typical case</span><span>
</span><span id="line-565"></span><span>            </span><span class="annot"><span class="annottext">Maybe ModuleNameWithIsBoot
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SelfBootInfo
</span><a href="GHC.Tc.Types.html#NoSelfBoot"><span class="hs-identifier hs-var">NoSelfBoot</span></a></span><span>
</span><span id="line-566"></span><span>            </span><span class="hs-comment">-- error cases</span><span>
</span><span id="line-567"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-type">GWIB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gwib_isBoot :: forall mod. GenWithIsBoot mod -&gt; IsBootInterface
</span><a href="GHC.Unit.Types.html#gwib_isBoot"><span class="hs-identifier hs-var">gwib_isBoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321406"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681321406"><span class="hs-identifier hs-var">is_boot</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621681321406"><span class="hs-identifier hs-var">is_boot</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-568"></span><span>              </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681321404"><span class="hs-identifier hs-var">elaborate</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321413"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>              </span><span class="hs-comment">-- The hi-boot file has mysteriously disappeared.</span><span>
</span><span id="line-570"></span><span>              </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321403"><span class="hs-identifier hs-var">moduleLoop</span></a></span><span>
</span><span id="line-571"></span><span>              </span><span class="hs-comment">-- Someone below us imported us!</span><span>
</span><span id="line-572"></span><span>              </span><span class="hs-comment">-- This is a loop with no hi-boot in the way</span><span>
</span><span id="line-573"></span><span>    </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-574"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-575"></span><span>    </span><span id="local-6989586621681321421"><span class="annot"><span class="annottext">need :: SDoc
</span><a href="#local-6989586621681321421"><span class="hs-identifier hs-var hs-var">need</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Need the hi-boot interface for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-576"></span><span>                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to compare against the Real Thing&quot;</span></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span>    </span><span id="local-6989586621681321403"><span class="annot"><span class="annottext">moduleLoop :: SDoc
</span><a href="#local-6989586621681321403"><span class="hs-identifier hs-var hs-var">moduleLoop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Circular imports: module&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;depends on itself&quot;</span></span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span>    </span><span id="local-6989586621681321404"><span class="annot"><span class="annottext">elaborate :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681321404"><span class="hs-identifier hs-var hs-var">elaborate</span></a></span></span><span> </span><span id="local-6989586621681321401"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321401"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Arity -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not find hi-boot interface for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-582"></span><span>                          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321438"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321401"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span class="annot"><a href="GHC.IfaceToCore.html#mkSelfBootInfo"><span class="hs-identifier hs-type">mkSelfBootInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModDetails.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRn"><span class="hs-identifier hs-type">TcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#SelfBootInfo"><span class="hs-identifier hs-type">SelfBootInfo</span></a></span><span>
</span><span id="line-586"></span><span id="mkSelfBootInfo"><span class="annot"><span class="annottext">mkSelfBootInfo :: ModIface -&gt; ModDetails -&gt; TcRn SelfBootInfo
</span><a href="GHC.IfaceToCore.html#mkSelfBootInfo"><span class="hs-identifier hs-var hs-var">mkSelfBootInfo</span></a></span></span><span> </span><span id="local-6989586621681321397"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321397"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span id="local-6989586621681321396"><span class="annot"><span class="annottext">ModDetails
</span><a href="#local-6989586621681321396"><span class="hs-identifier hs-var">mds</span></a></span></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- NB: This is computed DIRECTLY from the ModIface rather</span><span>
</span><span id="line-588"></span><span>       </span><span class="hs-comment">-- than from the ModDetails, so that we can query 'sb_tcs'</span><span>
</span><span id="line-589"></span><span>       </span><span class="hs-comment">-- WITHOUT forcing the contents of the interface.</span><span>
</span><span id="line-590"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321395"><span class="annot"><span class="annottext">tcs :: [Name]
</span><a href="#local-6989586621681321395"><span class="hs-identifier hs-var hs-var">tcs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span>
</span><span id="line-591"></span><span>                 </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Bool
</span><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span>
</span><span id="line-592"></span><span>                 </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-593"></span><span>                 </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Unit.Module.ModIface.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621681321397"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-594"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#SelfBoot"><span class="hs-identifier hs-type">SelfBoot</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sb_mds :: ModDetails
</span><a href="GHC.Tc.Types.html#sb_mds"><span class="hs-identifier hs-var">sb_mds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModDetails
</span><a href="#local-6989586621681321396"><span class="hs-identifier hs-var">mds</span></a></span><span>
</span><span id="line-595"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sb_tcs :: NameSet
</span><a href="GHC.Tc.Types.html#sb_tcs"><span class="hs-identifier hs-var">sb_tcs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681321395"><span class="hs-identifier hs-var">tcs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-596"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-597"></span><span>    </span><span class="hs-comment">-- | Retuerns @True@ if, when you call 'tcIfaceDecl' on</span><span>
</span><span id="line-598"></span><span>    </span><span class="hs-comment">-- this 'IfaceDecl', an ATyCon would be returned.</span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-comment">-- NB: This code assumes that a TyCon cannot be implicit.</span><span>
</span><span id="line-600"></span><span>    </span><span id="local-6989586621681321393"><span class="annot"><span class="annottext">isIfaceTyCon :: IfaceDecl -&gt; Bool
</span><a href="#local-6989586621681321393"><span class="hs-identifier hs-var hs-var">isIfaceTyCon</span></a></span></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceId"><span class="hs-identifier hs-type">IfaceId</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-601"></span><span>    </span><span class="annot"><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceData"><span class="hs-identifier hs-type">IfaceData</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-602"></span><span>    </span><span class="annot"><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSynonym"><span class="hs-identifier hs-type">IfaceSynonym</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-603"></span><span>    </span><span class="annot"><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamily"><span class="hs-identifier hs-type">IfaceFamily</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-604"></span><span>    </span><span class="annot"><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-605"></span><span>    </span><span class="annot"><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAxiom"><span class="hs-identifier hs-type">IfaceAxiom</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-606"></span><span>    </span><span class="annot"><a href="#local-6989586621681321393"><span class="hs-identifier hs-var">isIfaceTyCon</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfacePatSyn"><span class="hs-identifier hs-type">IfacePatSyn</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Type and class declarations
*                                                                      *
************************************************************************

When typechecking a data type decl, we *lazily* (via forkM) typecheck
the constructor argument types.  This is in the hope that we may never
poke on those argument types, and hence may never need to load the
interface files for types mentioned in the arg types.

E.g.
        data Foo.S = MkS Baz.T
Maybe we can get away without even loading the interface for Baz!

This is not just a performance thing.  Suppose we have
        data Foo.S = MkS Baz.T
        data Baz.T = MkT Foo.S
(in different interface files, of course).
Now, first we load and typecheck Foo.S, and add it to the type envt.
If we do explore MkS's argument, we'll load and typecheck Baz.T.
If we explore MkT's argument we'll find Foo.S already in the envt.

If we typechecked constructor args eagerly, when loading Foo.S we'd try to
typecheck the type Baz.T.  So we'd fault in Baz.T... and then need Foo.S...
which isn't done yet.

All very cunning. However, there is a rather subtle gotcha which bit
me when developing this stuff.  When we typecheck the decl for S, we
extend the type envt with S, MkS, and all its implicit Ids.  Suppose
(a bug, but it happened) that the list of implicit Ids depended in
turn on the constructor arg types.  Then the following sequence of
events takes place:
        * we build a thunk &lt;t&gt; for the constructor arg tys
        * we build a thunk for the extended type environment (depends on &lt;t&gt;)
        * we write the extended type envt into the global EPS mutvar

Now we look something up in the type envt
        * that pulls on &lt;t&gt;
        * which reads the global type envt out of the global EPS mutvar
        * but that depends in turn on &lt;t&gt;

It's subtle, because, it'd work fine if we typechecked the constructor args
eagerly -- they don't need the extended type envt.  They just get the extended
type envt by accident, because they look at it later.

What this means is that the implicitTyThings MUST NOT DEPEND on any of
the forkM stuff.
-}</span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDecl"><span class="hs-identifier hs-type">tcIfaceDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>     </span><span class="hs-comment">-- ^ True &lt;=&gt; discard IdInfo on IfaceId bindings</span><span>
</span><span id="line-660"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-661"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-662"></span><span id="tcIfaceDecl"><span class="annot"><span class="annottext">tcIfaceDecl :: Bool -&gt; IfaceDecl -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceDecl"><span class="hs-identifier hs-var hs-var">tcIfaceDecl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Class -&gt; Bool -&gt; IfaceDecl -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-type">tc_iface_decl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span>  </span><span class="hs-comment">-- ^ For associated type/data family declarations</span><span>
</span><span id="line-665"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>         </span><span class="hs-comment">-- ^ True &lt;=&gt; discard IdInfo on IfaceId bindings</span><span>
</span><span id="line-666"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-667"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-668"></span><span id="tc_iface_decl"><span class="annot"><span class="annottext">tc_iface_decl :: Maybe Class -&gt; Bool -&gt; IfaceDecl -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var hs-var">tc_iface_decl</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Class
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681321385"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321385"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceId"><span class="hs-identifier hs-type">IfaceId</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321384"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321384"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifType :: IfaceDecl -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifType"><span class="hs-identifier hs-var">ifType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321382"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321382"><span class="hs-identifier hs-var">iface_type</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-669"></span><span>                                       </span><span class="annot"><span class="annottext">ifIdDetails :: IfaceDecl -&gt; IfaceIdDetails
</span><a href="GHC.Iface.Syntax.html#ifIdDetails"><span class="hs-identifier hs-var">ifIdDetails</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321381"><span class="annot"><span class="annottext">IfaceIdDetails
</span><a href="#local-6989586621681321381"><span class="hs-identifier hs-var">details</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifIdInfo :: IfaceDecl -&gt; IfaceIdInfo
</span><a href="GHC.Iface.Syntax.html#ifIdInfo"><span class="hs-identifier hs-var">ifIdInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321379"><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681321379"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321378"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321378"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321382"><span class="hs-identifier hs-var">iface_type</span></a></span><span>
</span><span id="line-671"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321376"><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621681321376"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; IfaceIdDetails -&gt; IfL IdDetails
</span><a href="GHC.IfaceToCore.html#tcIdDetails"><span class="hs-identifier hs-var">tcIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321378"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdDetails
</span><a href="#local-6989586621681321381"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-672"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321374"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681321374"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TopLevelFlag -&gt; Name -&gt; Type -&gt; IfaceIdInfo -&gt; IfL IdInfo
</span><a href="GHC.IfaceToCore.html#tcIdInfo"><span class="hs-identifier hs-var">tcIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321385"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321384"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321378"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681321379"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-673"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Type -&gt; IdInfo -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#mkGlobalId"><span class="hs-identifier hs-var">mkGlobalId</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621681321376"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321384"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321378"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681321374"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Class
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceData"><span class="hs-identifier hs-type">IfaceData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321369"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321369"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-676"></span><span>                          </span><span class="annot"><span class="annottext">ifCType :: IfaceDecl -&gt; Maybe CType
</span><a href="GHC.Iface.Syntax.html#ifCType"><span class="hs-identifier hs-var">ifCType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321367"><span class="annot"><span class="annottext">Maybe CType
</span><a href="#local-6989586621681321367"><span class="hs-identifier hs-var">cType</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-677"></span><span>                          </span><span class="annot"><span class="annottext">ifBinders :: IfaceDecl -&gt; [IfaceTyConBinder]
</span><a href="GHC.Iface.Syntax.html#ifBinders"><span class="hs-identifier hs-var">ifBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321365"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321365"><span class="hs-identifier hs-var">binders</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-678"></span><span>                          </span><span class="annot"><span class="annottext">ifResKind :: IfaceDecl -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifResKind"><span class="hs-identifier hs-var">ifResKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321363"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321363"><span class="hs-identifier hs-var">res_kind</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-679"></span><span>                          </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321362"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321362"><span class="hs-identifier hs-var">roles</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-680"></span><span>                          </span><span class="annot"><span class="annottext">ifCtxt :: IfaceDecl -&gt; IfaceContext
</span><a href="GHC.Iface.Syntax.html#ifCtxt"><span class="hs-identifier hs-var">ifCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321360"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321360"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifGadtSyntax :: IfaceDecl -&gt; Bool
</span><a href="GHC.Iface.Syntax.html#ifGadtSyntax"><span class="hs-identifier hs-var">ifGadtSyntax</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321358"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321358"><span class="hs-identifier hs-var">gadt_syn</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-681"></span><span>                          </span><span class="annot"><span class="annottext">ifCons :: IfaceDecl -&gt; IfaceConDecls
</span><a href="GHC.Iface.Syntax.html#ifCons"><span class="hs-identifier hs-var">ifCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321357"><span class="annot"><span class="annottext">IfaceConDecls
</span><a href="#local-6989586621681321357"><span class="hs-identifier hs-var">rdr_cons</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-682"></span><span>                          </span><span class="annot"><span class="annottext">ifParent :: IfaceDecl -&gt; IfaceTyConParent
</span><a href="GHC.Iface.Syntax.html#ifParent"><span class="hs-identifier hs-var">ifParent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321355"><span class="annot"><span class="annottext">IfaceTyConParent
</span><a href="#local-6989586621681321355"><span class="hs-identifier hs-var">mb_parent</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321365"><span class="hs-identifier hs-var">binders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321353"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321353"><span class="hs-identifier hs-var">binders'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-684"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321352"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321352"><span class="hs-identifier hs-var">res_kind'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321363"><span class="hs-identifier hs-var">res_kind</span></a></span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321351"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321351"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321350"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321350"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-687"></span><span>            </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321349"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321349"><span class="hs-identifier hs-var">stupid_theta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceContext -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321360"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-688"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321347"><span class="annot"><span class="annottext">AlgTyConFlav
</span><a href="#local-6989586621681321347"><span class="hs-identifier hs-var">parent'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfaceTyConParent -&gt; IfL AlgTyConFlav
</span><a href="#local-6989586621681321346"><span class="hs-identifier hs-var">tc_parent</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321369"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyConParent
</span><a href="#local-6989586621681321355"><span class="hs-identifier hs-var">mb_parent</span></a></span><span>
</span><span id="line-689"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321345"><span class="annot"><span class="annottext">AlgTyConRhs
</span><a href="#local-6989586621681321345"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TyCon -&gt; [TyConBinder] -&gt; IfaceConDecls -&gt; IfL AlgTyConRhs
</span><a href="GHC.IfaceToCore.html#tcIfaceDataCons"><span class="hs-identifier hs-var">tcIfaceDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321369"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321350"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321353"><span class="hs-identifier hs-var">binders'</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceConDecls
</span><a href="#local-6989586621681321357"><span class="hs-identifier hs-var">rdr_cons</span></a></span><span>
</span><span id="line-690"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; [TyConBinder]
-&gt; Type
-&gt; [Role]
-&gt; Maybe CType
-&gt; ThetaType
-&gt; AlgTyConRhs
-&gt; AlgTyConFlav
-&gt; Bool
-&gt; TyCon
</span><a href="GHC.Core.TyCon.html#mkAlgTyCon"><span class="hs-identifier hs-var">mkAlgTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321369"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321353"><span class="hs-identifier hs-var">binders'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321352"><span class="hs-identifier hs-var">res_kind'</span></a></span><span>
</span><span id="line-691"></span><span>                                 </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321362"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CType
</span><a href="#local-6989586621681321367"><span class="hs-identifier hs-var">cType</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321349"><span class="hs-identifier hs-var">stupid_theta</span></a></span><span>
</span><span id="line-692"></span><span>                                 </span><span class="annot"><span class="annottext">AlgTyConRhs
</span><a href="#local-6989586621681321345"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="annot"><span class="annottext">AlgTyConFlav
</span><a href="#local-6989586621681321347"><span class="hs-identifier hs-var">parent'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321358"><span class="hs-identifier hs-var">gadt_syn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-693"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceDecl4&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321351"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321351"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-695"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-696"></span><span>    </span><span class="annot"><a href="#local-6989586621681321346"><span class="hs-identifier hs-type">tc_parent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceTyConParent"><span class="hs-identifier hs-type">IfaceTyConParent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#AlgTyConFlav"><span class="hs-identifier hs-type">AlgTyConFlav</span></a></span><span>
</span><span id="line-697"></span><span>    </span><span id="local-6989586621681321346"><span class="annot"><span class="annottext">tc_parent :: Name -&gt; IfaceTyConParent -&gt; IfL AlgTyConFlav
</span><a href="#local-6989586621681321346"><span class="hs-identifier hs-var hs-var">tc_parent</span></a></span></span><span> </span><span id="local-6989586621681321341"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321341"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceTyConParent
</span><a href="GHC.Iface.Syntax.html#IfNoParent"><span class="hs-identifier hs-var">IfNoParent</span></a></span><span>
</span><span id="line-698"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321339"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321339"><span class="hs-identifier hs-var">tc_rep_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Name -&gt; TcRnIf gbl lcl Name
</span><a href="GHC.Tc.TyCl.Build.html#newTyConRepName"><span class="hs-identifier hs-var">newTyConRepName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321341"><span class="hs-identifier hs-var">tc_name</span></a></span><span>
</span><span id="line-699"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; AlgTyConFlav
</span><a href="GHC.Core.TyCon.html#VanillaAlgTyCon"><span class="hs-identifier hs-var">VanillaAlgTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321339"><span class="hs-identifier hs-var">tc_rep_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-700"></span><span>    </span><span class="annot"><a href="#local-6989586621681321346"><span class="hs-identifier hs-var">tc_parent</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfDataInstance"><span class="hs-identifier hs-type">IfDataInstance</span></a></span><span> </span><span id="local-6989586621681321335"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321335"><span class="hs-identifier hs-var">ax_name</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681321334"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681321334"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321333"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681321333"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL (CoAxiom Branched)
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321335"><span class="hs-identifier hs-var">ax_name</span></a></span><span>
</span><span id="line-702"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321331"><span class="annot"><span class="annottext">fam_tc :: TyCon
</span><a href="#local-6989586621681321331"><span class="hs-identifier hs-var hs-var">fam_tc</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-var">coAxiomTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681321333"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-703"></span><span>                 </span><span id="local-6989586621681321329"><span class="annot"><span class="annottext">ax_unbr :: CoAxiom Unbranched
</span><a href="#local-6989586621681321329"><span class="hs-identifier hs-var hs-var">ax_unbr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; CoAxiom Unbranched
</span><a href="GHC.Core.Coercion.Axiom.html#toUnbranchedAxiom"><span class="hs-identifier hs-var">toUnbranchedAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681321333"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-704"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321327"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321327"><span class="hs-identifier hs-var">lhs_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceAppArgs"><span class="hs-identifier hs-var">tcIfaceAppArgs</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681321334"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-705"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; TyCon -&gt; ThetaType -&gt; AlgTyConFlav
</span><a href="GHC.Core.TyCon.html#DataFamInstTyCon"><span class="hs-identifier hs-var">DataFamInstTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621681321329"><span class="hs-identifier hs-var">ax_unbr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321331"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321327"><span class="hs-identifier hs-var">lhs_tys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Class
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSynonym"><span class="hs-identifier hs-type">IfaceSynonym</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321324"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321324"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-708"></span><span>                                      </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321323"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321323"><span class="hs-identifier hs-var">roles</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-709"></span><span>                                      </span><span class="annot"><span class="annottext">ifSynRhs :: IfaceDecl -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifSynRhs"><span class="hs-identifier hs-var">ifSynRhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321321"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321321"><span class="hs-identifier hs-var">rhs_ty</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-710"></span><span>                                      </span><span class="annot"><span class="annottext">ifBinders :: IfaceDecl -&gt; [IfaceTyConBinder]
</span><a href="GHC.Iface.Syntax.html#ifBinders"><span class="hs-identifier hs-var">ifBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321320"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321320"><span class="hs-identifier hs-var">binders</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-711"></span><span>                                      </span><span class="annot"><span class="annottext">ifResKind :: IfaceDecl -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifResKind"><span class="hs-identifier hs-var">ifResKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321319"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321319"><span class="hs-identifier hs-var">res_kind</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321320"><span class="hs-identifier hs-var">binders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321318"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321318"><span class="hs-identifier hs-var">binders'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-713"></span><span>     </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321317"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321317"><span class="hs-identifier hs-var">res_kind'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321319"><span class="hs-identifier hs-var">res_kind</span></a></span><span>     </span><span class="hs-comment">-- Note [Synonym kind loop]</span><span>
</span><span id="line-714"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321316"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321316"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321314"><span class="hs-identifier hs-var">mk_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321324"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-715"></span><span>                   </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321321"><span class="hs-identifier hs-var">rhs_ty</span></a></span><span>
</span><span id="line-716"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321313"><span class="annot"><span class="annottext">tycon :: TyCon
</span><a href="#local-6989586621681321313"><span class="hs-identifier hs-var hs-var">tycon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [TyConBinder] -&gt; Type -&gt; [Role] -&gt; Type -&gt; TyCon
</span><a href="GHC.Core.Type.html#buildSynTyCon"><span class="hs-identifier hs-var">buildSynTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321324"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321318"><span class="hs-identifier hs-var">binders'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321317"><span class="hs-identifier hs-var">res_kind'</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321323"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321316"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-717"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321313"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-718"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-719"></span><span>     </span><span id="local-6989586621681321314"><span class="annot"><span class="annottext">mk_doc :: a -&gt; SDoc
</span><a href="#local-6989586621681321314"><span class="hs-identifier hs-var hs-var">mk_doc</span></a></span></span><span> </span><span id="local-6989586621681321309"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321309"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type synonym&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321309"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span id="local-6989586621681321308"><span class="annot"><span class="annottext">Maybe Class
</span><a href="#local-6989586621681321308"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamily"><span class="hs-identifier hs-type">IfaceFamily</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321307"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321307"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-722"></span><span>                                     </span><span class="annot"><span class="annottext">ifFamFlav :: IfaceDecl -&gt; IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#ifFamFlav"><span class="hs-identifier hs-var">ifFamFlav</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321306"><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="#local-6989586621681321306"><span class="hs-identifier hs-var">fam_flav</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-723"></span><span>                                     </span><span class="annot"><span class="annottext">ifBinders :: IfaceDecl -&gt; [IfaceTyConBinder]
</span><a href="GHC.Iface.Syntax.html#ifBinders"><span class="hs-identifier hs-var">ifBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321305"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321305"><span class="hs-identifier hs-var">binders</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-724"></span><span>                                     </span><span class="annot"><span class="annottext">ifResKind :: IfaceDecl -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifResKind"><span class="hs-identifier hs-var">ifResKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321304"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321304"><span class="hs-identifier hs-var">res_kind</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-725"></span><span>                                     </span><span class="annot"><span class="annottext">ifResVar :: IfaceDecl -&gt; Maybe FastString
</span><a href="GHC.Iface.Syntax.html#ifResVar"><span class="hs-identifier hs-var">ifResVar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321302"><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621681321302"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifFamInj :: IfaceDecl -&gt; Injectivity
</span><a href="GHC.Iface.Syntax.html#ifFamInj"><span class="hs-identifier hs-var">ifFamInj</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321300"><span class="annot"><span class="annottext">Injectivity
</span><a href="#local-6989586621681321300"><span class="hs-identifier hs-var">inj</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321305"><span class="hs-identifier hs-var">binders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321299"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321299"><span class="hs-identifier hs-var">binders'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-727"></span><span>     </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321298"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321298"><span class="hs-identifier hs-var">res_kind'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321304"><span class="hs-identifier hs-var">res_kind</span></a></span><span>    </span><span class="hs-comment">-- Note [Synonym kind loop]</span><span>
</span><span id="line-728"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321297"><span class="annot"><span class="annottext">FamTyConFlav
</span><a href="#local-6989586621681321297"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321296"><span class="hs-identifier hs-var">mk_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321307"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-729"></span><span>                   </span><span class="annot"><span class="annottext">Name -&gt; IfaceFamTyConFlav -&gt; IfL FamTyConFlav
</span><a href="#local-6989586621681321295"><span class="hs-identifier hs-var">tc_fam_flav</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321307"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="#local-6989586621681321306"><span class="hs-identifier hs-var">fam_flav</span></a></span><span>
</span><span id="line-730"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321294"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681321294"><span class="hs-identifier hs-var">res_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621681321302"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-731"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321290"><span class="annot"><span class="annottext">tycon :: TyCon
</span><a href="#local-6989586621681321290"><span class="hs-identifier hs-var hs-var">tycon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; [TyConBinder]
-&gt; Type
-&gt; Maybe Name
-&gt; FamTyConFlav
-&gt; Maybe Class
-&gt; Injectivity
-&gt; TyCon
</span><a href="GHC.Core.TyCon.html#mkFamilyTyCon"><span class="hs-identifier hs-var">mkFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321307"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321299"><span class="hs-identifier hs-var">binders'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321298"><span class="hs-identifier hs-var">res_kind'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621681321294"><span class="hs-identifier hs-var">res_name</span></a></span><span> </span><span class="annot"><span class="annottext">FamTyConFlav
</span><a href="#local-6989586621681321297"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Class
</span><a href="#local-6989586621681321308"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="annot"><span class="annottext">Injectivity
</span><a href="#local-6989586621681321300"><span class="hs-identifier hs-var">inj</span></a></span><span>
</span><span id="line-732"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321290"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-733"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-734"></span><span>     </span><span id="local-6989586621681321296"><span class="annot"><span class="annottext">mk_doc :: a -&gt; SDoc
</span><a href="#local-6989586621681321296"><span class="hs-identifier hs-var hs-var">mk_doc</span></a></span></span><span> </span><span id="local-6989586621681321286"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321286"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type synonym&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321286"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span>     </span><span class="annot"><a href="#local-6989586621681321295"><span class="hs-identifier hs-type">tc_fam_flav</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamTyConFlav"><span class="hs-identifier hs-type">IfaceFamTyConFlav</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#FamTyConFlav"><span class="hs-identifier hs-type">FamTyConFlav</span></a></span><span>
</span><span id="line-737"></span><span>     </span><span id="local-6989586621681321295"><span class="annot"><span class="annottext">tc_fam_flav :: Name -&gt; IfaceFamTyConFlav -&gt; IfL FamTyConFlav
</span><a href="#local-6989586621681321295"><span class="hs-identifier hs-var hs-var">tc_fam_flav</span></a></span></span><span> </span><span id="local-6989586621681321285"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321285"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#IfaceDataFamilyTyCon"><span class="hs-identifier hs-var">IfaceDataFamilyTyCon</span></a></span><span>
</span><span id="line-738"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321284"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321284"><span class="hs-identifier hs-var">tc_rep_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Name -&gt; TcRnIf gbl lcl Name
</span><a href="GHC.Tc.TyCl.Build.html#newTyConRepName"><span class="hs-identifier hs-var">newTyConRepName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321285"><span class="hs-identifier hs-var">tc_name</span></a></span><span>
</span><span id="line-739"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FamTyConFlav
</span><a href="GHC.Core.TyCon.html#DataFamilyTyCon"><span class="hs-identifier hs-var">DataFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321284"><span class="hs-identifier hs-var">tc_rep_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-740"></span><span>     </span><span class="annot"><a href="#local-6989586621681321295"><span class="hs-identifier hs-var">tc_fam_flav</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#IfaceOpenSynFamilyTyCon"><span class="hs-identifier hs-var">IfaceOpenSynFamilyTyCon</span></a></span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">FamTyConFlav
</span><a href="GHC.Core.TyCon.html#OpenSynFamilyTyCon"><span class="hs-identifier hs-var">OpenSynFamilyTyCon</span></a></span><span>
</span><span id="line-741"></span><span>     </span><span class="annot"><a href="#local-6989586621681321295"><span class="hs-identifier hs-var">tc_fam_flav</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClosedSynFamilyTyCon"><span class="hs-identifier hs-type">IfaceClosedSynFamilyTyCon</span></a></span><span> </span><span id="local-6989586621681321279"><span class="annot"><span class="annottext">Maybe (Name, [IfaceAxBranch])
</span><a href="#local-6989586621681321279"><span class="hs-identifier hs-var">mb_ax_name_branches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-742"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321278"><span class="annot"><span class="annottext">Maybe (CoAxiom Branched)
</span><a href="#local-6989586621681321278"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; IfL (CoAxiom Branched)
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Name, [IfaceAxBranch])
</span><a href="#local-6989586621681321279"><span class="hs-identifier hs-var">mb_ax_name_branches</span></a></span><span>
</span><span id="line-743"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (CoAxiom Branched) -&gt; FamTyConFlav
</span><a href="GHC.Core.TyCon.html#ClosedSynFamilyTyCon"><span class="hs-identifier hs-var">ClosedSynFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (CoAxiom Branched)
</span><a href="#local-6989586621681321278"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-744"></span><span>     </span><span class="annot"><a href="#local-6989586621681321295"><span class="hs-identifier hs-var">tc_fam_flav</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#IfaceAbstractClosedSynFamilyTyCon"><span class="hs-identifier hs-var">IfaceAbstractClosedSynFamilyTyCon</span></a></span><span>
</span><span id="line-745"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">FamTyConFlav
</span><a href="GHC.Core.TyCon.html#AbstractClosedSynFamilyTyCon"><span class="hs-identifier hs-var">AbstractClosedSynFamilyTyCon</span></a></span><span>
</span><span id="line-746"></span><span>     </span><span class="annot"><a href="#local-6989586621681321295"><span class="hs-identifier hs-var">tc_fam_flav</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IfaceFamTyConFlav
</span><a href="GHC.Iface.Syntax.html#IfaceBuiltInSynFamTyCon"><span class="hs-identifier hs-var">IfaceBuiltInSynFamTyCon</span></a></span><span>
</span><span id="line-747"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc_iface_decl&quot;</span></span><span>
</span><span id="line-748"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;IfaceBuiltInSynFamTyCon in interface file&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span id="local-6989586621681321273"><span class="annot"><span class="annottext">Maybe Class
</span><a href="#local-6989586621681321273"><span class="hs-identifier hs-var">_parent</span></a></span></span><span> </span><span id="local-6989586621681321272"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321272"><span class="hs-identifier hs-var">_ignore_prags</span></a></span></span><span>
</span><span id="line-751"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321271"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321271"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-752"></span><span>                         </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321270"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321270"><span class="hs-identifier hs-var">roles</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-753"></span><span>                         </span><span class="annot"><span class="annottext">ifBinders :: IfaceDecl -&gt; [IfaceTyConBinder]
</span><a href="GHC.Iface.Syntax.html#ifBinders"><span class="hs-identifier hs-var">ifBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321269"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321269"><span class="hs-identifier hs-var">binders</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-754"></span><span>                         </span><span class="annot"><span class="annottext">ifFDs :: IfaceDecl -&gt; [FunDep FastString]
</span><a href="GHC.Iface.Syntax.html#ifFDs"><span class="hs-identifier hs-var">ifFDs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321267"><span class="annot"><span class="annottext">[FunDep FastString]
</span><a href="#local-6989586621681321267"><span class="hs-identifier hs-var">rdr_fds</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-755"></span><span>                         </span><span class="annot"><span class="annottext">ifBody :: IfaceDecl -&gt; IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#IfAbstractClass"><span class="hs-identifier hs-var">IfAbstractClass</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var">bindIfaceTyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321269"><span class="hs-identifier hs-var">binders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321265"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321265"><span class="hs-identifier hs-var">binders'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-757"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321264"><span class="annot"><span class="annottext">[FunDep CoreBndr]
</span><a href="#local-6989586621681321264"><span class="hs-identifier hs-var">fds</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">FunDep FastString -&gt; IfL (FunDep CoreBndr)
</span><a href="GHC.IfaceToCore.html#tc_fd"><span class="hs-identifier hs-var">tc_fd</span></a></span><span> </span><span class="annot"><span class="annottext">[FunDep FastString]
</span><a href="#local-6989586621681321267"><span class="hs-identifier hs-var">rdr_fds</span></a></span><span>
</span><span id="line-758"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321262"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321262"><span class="hs-identifier hs-var">cls</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall m n.
Name
-&gt; [TyConBinder]
-&gt; [Role]
-&gt; [FunDep CoreBndr]
-&gt; Maybe
     (ThetaType, [ClassATItem], [KnotTied MethInfo], ClassMinimalDef)
-&gt; TcRnIf m n Class
</span><a href="GHC.Tc.TyCl.Build.html#buildClass"><span class="hs-identifier hs-var">buildClass</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321271"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321265"><span class="hs-identifier hs-var">binders'</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321270"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">[FunDep CoreBndr]
</span><a href="#local-6989586621681321264"><span class="hs-identifier hs-var">fds</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-759"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; TyCon
</span><a href="GHC.Core.Class.html#classTyCon"><span class="hs-identifier hs-var">classTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321262"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span id="local-6989586621681321259"><span class="annot"><span class="annottext">Maybe Class
</span><a href="#local-6989586621681321259"><span class="hs-identifier hs-var">_parent</span></a></span></span><span> </span><span id="local-6989586621681321258"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321258"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span>
</span><span id="line-762"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClass"><span class="hs-identifier hs-type">IfaceClass</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321257"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321257"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-763"></span><span>                         </span><span class="annot"><span class="annottext">ifRoles :: IfaceDecl -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifRoles"><span class="hs-identifier hs-var">ifRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321256"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321256"><span class="hs-identifier hs-var">roles</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-764"></span><span>                         </span><span class="annot"><span class="annottext">ifBinders :: IfaceDecl -&gt; [IfaceTyConBinder]
</span><a href="GHC.Iface.Syntax.html#ifBinders"><span class="hs-identifier hs-var">ifBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321255"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321255"><span class="hs-identifier hs-var">binders</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-765"></span><span>                         </span><span class="annot"><span class="annottext">ifFDs :: IfaceDecl -&gt; [FunDep FastString]
</span><a href="GHC.Iface.Syntax.html#ifFDs"><span class="hs-identifier hs-var">ifFDs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321254"><span class="annot"><span class="annottext">[FunDep FastString]
</span><a href="#local-6989586621681321254"><span class="hs-identifier hs-var">rdr_fds</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-766"></span><span>                         </span><span class="annot"><span class="annottext">ifBody :: IfaceDecl -&gt; IfaceClassBody
</span><a href="GHC.Iface.Syntax.html#ifBody"><span class="hs-identifier hs-var">ifBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfConcreteClass"><span class="hs-identifier hs-type">IfConcreteClass</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-767"></span><span>                             </span><span class="annot"><span class="annottext">ifClassCtxt :: IfaceClassBody -&gt; IfaceContext
</span><a href="GHC.Iface.Syntax.html#ifClassCtxt"><span class="hs-identifier hs-var">ifClassCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321252"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321252"><span class="hs-identifier hs-var">rdr_ctxt</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-768"></span><span>                             </span><span class="annot"><span class="annottext">ifATs :: IfaceClassBody -&gt; [IfaceAT]
</span><a href="GHC.Iface.Syntax.html#ifATs"><span class="hs-identifier hs-var">ifATs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321250"><span class="annot"><span class="annottext">[IfaceAT]
</span><a href="#local-6989586621681321250"><span class="hs-identifier hs-var">rdr_ats</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifSigs :: IfaceClassBody -&gt; [IfaceClassOp]
</span><a href="GHC.Iface.Syntax.html#ifSigs"><span class="hs-identifier hs-var">ifSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321249"><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321249"><span class="hs-identifier hs-var">rdr_sigs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-769"></span><span>                             </span><span class="annot"><span class="annottext">ifMinDef :: IfaceClassBody -&gt; BooleanFormula FastString
</span><a href="GHC.Iface.Syntax.html#ifMinDef"><span class="hs-identifier hs-var">ifMinDef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321248"><span class="annot"><span class="annottext">BooleanFormula FastString
</span><a href="#local-6989586621681321248"><span class="hs-identifier hs-var">mindef_occ</span></a></span></span><span>
</span><span id="line-770"></span><span>                         </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var">bindIfaceTyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681321255"><span class="hs-identifier hs-var">binders</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321247"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321247"><span class="hs-identifier hs-var">binders'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-772"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc-iface-class1&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321257"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321246"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321246"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681321245"><span class="hs-identifier hs-var">tc_sc</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321252"><span class="hs-identifier hs-var">rdr_ctxt</span></a></span><span>
</span><span id="line-774"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc-iface-class2&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321257"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321244"><span class="annot"><span class="annottext">[KnotTied MethInfo]
</span><a href="#local-6989586621681321244"><span class="hs-identifier hs-var">sigs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceClassOp -&gt; IfL (KnotTied MethInfo)
</span><a href="#local-6989586621681321243"><span class="hs-identifier hs-var">tc_sig</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceClassOp]
</span><a href="#local-6989586621681321249"><span class="hs-identifier hs-var">rdr_sigs</span></a></span><span>
</span><span id="line-776"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321242"><span class="annot"><span class="annottext">[FunDep CoreBndr]
</span><a href="#local-6989586621681321242"><span class="hs-identifier hs-var">fds</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">FunDep FastString -&gt; IfL (FunDep CoreBndr)
</span><a href="GHC.IfaceToCore.html#tc_fd"><span class="hs-identifier hs-var">tc_fd</span></a></span><span> </span><span class="annot"><span class="annottext">[FunDep FastString]
</span><a href="#local-6989586621681321254"><span class="hs-identifier hs-var">rdr_fds</span></a></span><span>
</span><span id="line-777"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc-iface-class3&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321257"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321241"><span class="annot"><span class="annottext">ClassMinimalDef
</span><a href="#local-6989586621681321241"><span class="hs-identifier hs-var">mindef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BooleanFormula FastString
</span><a href="#local-6989586621681321248"><span class="hs-identifier hs-var">mindef_occ</span></a></span><span>
</span><span id="line-779"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321238"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321238"><span class="hs-identifier hs-var">cls</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321237"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321237"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-780"></span><span>              </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321236"><span class="annot"><span class="annottext">[ClassATItem]
</span><a href="#local-6989586621681321236"><span class="hs-identifier hs-var">ats</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; IfaceAT -&gt; IOEnv (Env IfGblEnv IfLclEnv) ClassATItem
</span><a href="#local-6989586621681321235"><span class="hs-identifier hs-var">tc_at</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321237"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[IfaceAT]
</span><a href="#local-6989586621681321250"><span class="hs-identifier hs-var">rdr_ats</span></a></span><span>
</span><span id="line-781"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc-iface-class4&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321257"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n.
Name
-&gt; [TyConBinder]
-&gt; [Role]
-&gt; [FunDep CoreBndr]
-&gt; Maybe
     (ThetaType, [ClassATItem], [KnotTied MethInfo], ClassMinimalDef)
-&gt; TcRnIf m n Class
</span><a href="GHC.Tc.TyCl.Build.html#buildClass"><span class="hs-identifier hs-var">buildClass</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321257"><span class="hs-identifier hs-var">tc_name</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321247"><span class="hs-identifier hs-var">binders'</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321256"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">[FunDep CoreBndr]
</span><a href="#local-6989586621681321242"><span class="hs-identifier hs-var">fds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321246"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ClassATItem]
</span><a href="#local-6989586621681321236"><span class="hs-identifier hs-var">ats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[KnotTied MethInfo]
</span><a href="#local-6989586621681321244"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ClassMinimalDef
</span><a href="#local-6989586621681321241"><span class="hs-identifier hs-var">mindef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; TyCon
</span><a href="GHC.Core.Class.html#classTyCon"><span class="hs-identifier hs-var">classTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321238"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-784"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-785"></span><span>   </span><span id="local-6989586621681321245"><span class="annot"><span class="annottext">tc_sc :: IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681321245"><span class="hs-identifier hs-var hs-var">tc_sc</span></a></span></span><span> </span><span id="local-6989586621681321233"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321233"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321232"><span class="hs-identifier hs-var">mk_sc_doc</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321233"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321233"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>        </span><span class="hs-comment">-- The *length* of the superclasses is used by buildClass, and hence must</span><span>
</span><span id="line-787"></span><span>        </span><span class="hs-comment">-- not be inside the thunk.  But the *content* maybe recursive and hence</span><span>
</span><span id="line-788"></span><span>        </span><span class="hs-comment">-- must be lazy (via forkM).  Example:</span><span>
</span><span id="line-789"></span><span>        </span><span class="hs-comment">--     class C (T a) =&gt; D a where</span><span>
</span><span id="line-790"></span><span>        </span><span class="hs-comment">--       data T a</span><span>
</span><span id="line-791"></span><span>        </span><span class="hs-comment">-- Here the associated type T is knot-tied with the class, and</span><span>
</span><span id="line-792"></span><span>        </span><span class="hs-comment">-- so we must not pull on T too eagerly.  See #5970</span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span>   </span><span class="annot"><a href="#local-6989586621681321243"><span class="hs-identifier hs-type">tc_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier hs-type">TcMethInfo</span></a></span><span>
</span><span id="line-795"></span><span>   </span><span id="local-6989586621681321243"><span class="annot"><span class="annottext">tc_sig :: IfaceClassOp -&gt; IfL (KnotTied MethInfo)
</span><a href="#local-6989586621681321243"><span class="hs-identifier hs-var hs-var">tc_sig</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClassOp"><span class="hs-identifier hs-type">IfaceClassOp</span></a></span><span> </span><span id="local-6989586621681321230"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321230"><span class="hs-identifier hs-var">op_name</span></a></span></span><span> </span><span id="local-6989586621681321229"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321229"><span class="hs-identifier hs-var">rdr_ty</span></a></span></span><span> </span><span id="local-6989586621681321228"><span class="annot"><span class="annottext">Maybe (DefMethSpec IfaceType)
</span><a href="#local-6989586621681321228"><span class="hs-identifier hs-var">dm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321227"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681321227"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a} {a}. (Outputable a, Outputable a) =&gt; a -&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321226"><span class="hs-identifier hs-var">mk_op_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321230"><span class="hs-identifier hs-var">op_name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321229"><span class="hs-identifier hs-var">rdr_ty</span></a></span><span>
</span><span id="line-797"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321225"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321225"><span class="hs-identifier hs-var">op_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321227"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ty&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321229"><span class="hs-identifier hs-var">rdr_ty</span></a></span><span>
</span><span id="line-798"></span><span>                </span><span class="hs-comment">-- Must be done lazily for just the same reason as the</span><span>
</span><span id="line-799"></span><span>                </span><span class="hs-comment">-- type of a data con; to avoid sucking in types that</span><span>
</span><span id="line-800"></span><span>                </span><span class="hs-comment">-- it mentions unless it's necessary to do so</span><span>
</span><span id="line-801"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321224"><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Type))
</span><a href="#local-6989586621681321224"><span class="hs-identifier hs-var">dm'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SDoc
-&gt; Maybe (DefMethSpec IfaceType)
-&gt; IfL (Maybe (DefMethSpec (SrcSpan, Type)))
</span><a href="#local-6989586621681321223"><span class="hs-identifier hs-var">tc_dm</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321227"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec IfaceType)
</span><a href="#local-6989586621681321228"><span class="hs-identifier hs-var">dm</span></a></span><span>
</span><span id="line-802"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321230"><span class="hs-identifier hs-var">op_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321225"><span class="hs-identifier hs-var">op_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Type))
</span><a href="#local-6989586621681321224"><span class="hs-identifier hs-var">dm'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-803"></span><span>
</span><span id="line-804"></span><span>   </span><span class="annot"><a href="#local-6989586621681321223"><span class="hs-identifier hs-type">tc_dm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-805"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>   </span><span id="local-6989586621681321223"><span class="annot"><span class="annottext">tc_dm :: SDoc
-&gt; Maybe (DefMethSpec IfaceType)
-&gt; IfL (Maybe (DefMethSpec (SrcSpan, Type)))
</span><a href="#local-6989586621681321223"><span class="hs-identifier hs-var hs-var">tc_dm</span></a></span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">Maybe (DefMethSpec IfaceType)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-808"></span><span>   </span><span class="annot"><a href="#local-6989586621681321223"><span class="hs-identifier hs-var">tc_dm</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DefMethSpec IfaceType
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall ty. DefMethSpec ty
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>   </span><span class="annot"><a href="#local-6989586621681321223"><span class="hs-identifier hs-var">tc_dm</span></a></span><span> </span><span id="local-6989586621681321221"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321221"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-type">GenericDM</span></a></span><span> </span><span id="local-6989586621681321219"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321219"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Must be done lazily to avoid sucking in types</span><span>
</span><span id="line-811"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321218"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321218"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321221"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dm&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321219"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-812"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ty. ty -&gt; DefMethSpec ty
</span><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321218"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span>   </span><span id="local-6989586621681321235"><span class="annot"><span class="annottext">tc_at :: Class -&gt; IfaceAT -&gt; IOEnv (Env IfGblEnv IfLclEnv) ClassATItem
</span><a href="#local-6989586621681321235"><span class="hs-identifier hs-var hs-var">tc_at</span></a></span></span><span> </span><span id="local-6989586621681321216"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321216"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAT"><span class="hs-identifier hs-type">IfaceAT</span></a></span><span> </span><span id="local-6989586621681321214"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321214"><span class="hs-identifier hs-var">tc_decl</span></a></span></span><span> </span><span id="local-6989586621681321213"><span class="annot"><span class="annottext">Maybe IfaceType
</span><a href="#local-6989586621681321213"><span class="hs-identifier hs-var">if_def</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-815"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621681321212"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321212"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Class -&gt; Bool -&gt; IfaceDecl -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681321216"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321258"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321214"><span class="hs-identifier hs-var">tc_decl</span></a></span><span>
</span><span id="line-816"></span><span>          </span><span id="local-6989586621681321211"><span class="annot"><span class="annottext">Maybe (Type, ATValidityInfo)
</span><a href="#local-6989586621681321211"><span class="hs-identifier hs-var">mb_def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe IfaceType
</span><a href="#local-6989586621681321213"><span class="hs-identifier hs-var">if_def</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-817"></span><span>                      </span><span class="annot"><span class="annottext">Maybe IfaceType
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-818"></span><span>                      </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681321210"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321210"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321209"><span class="hs-identifier hs-var">mk_at_doc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321212"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>                 </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-819"></span><span>                                  </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceTyVarEnv"><span class="hs-identifier hs-var">extendIfaceTyVarEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [CoreBndr]
</span><a href="GHC.Core.TyCon.html#tyConTyVars"><span class="hs-identifier hs-var">tyConTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321212"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-820"></span><span>                                  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321206"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321206"><span class="hs-identifier hs-var">tc_def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321210"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-821"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321206"><span class="hs-identifier hs-var">tc_def</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ATValidityInfo
</span><a href="GHC.Core.Class.html#NoATVI"><span class="hs-identifier hs-var">NoATVI</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-822"></span><span>                  </span><span class="hs-comment">-- Must be done lazily in case the RHS of the defaults mention</span><span>
</span><span id="line-823"></span><span>                  </span><span class="hs-comment">-- the type constructor being defined here</span><span>
</span><span id="line-824"></span><span>                  </span><span class="hs-comment">-- e.g.   type AT a; type AT b = AT [b]   #8002</span><span>
</span><span id="line-825"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Maybe (Type, ATValidityInfo) -&gt; ClassATItem
</span><a href="GHC.Core.Class.html#ATI"><span class="hs-identifier hs-var">ATI</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321212"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Type, ATValidityInfo)
</span><a href="#local-6989586621681321211"><span class="hs-identifier hs-var">mb_def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span>   </span><span id="local-6989586621681321232"><span class="annot"><span class="annottext">mk_sc_doc :: a -&gt; SDoc
</span><a href="#local-6989586621681321232"><span class="hs-identifier hs-var hs-var">mk_sc_doc</span></a></span></span><span> </span><span id="local-6989586621681321201"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321201"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Superclass&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321201"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-828"></span><span>   </span><span id="local-6989586621681321209"><span class="annot"><span class="annottext">mk_at_doc :: a -&gt; SDoc
</span><a href="#local-6989586621681321209"><span class="hs-identifier hs-var hs-var">mk_at_doc</span></a></span></span><span> </span><span id="local-6989586621681321198"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321198"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Associated type&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321198"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-829"></span><span>   </span><span id="local-6989586621681321226"><span class="annot"><span class="annottext">mk_op_doc :: a -&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321226"><span class="hs-identifier hs-var hs-var">mk_op_doc</span></a></span></span><span> </span><span id="local-6989586621681321193"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321193"><span class="hs-identifier hs-var">op_name</span></a></span></span><span> </span><span id="local-6989586621681321192"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321192"><span class="hs-identifier hs-var">op_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Class op&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321193"><span class="hs-identifier hs-var">op_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321192"><span class="hs-identifier hs-var">op_ty</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Class
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAxiom"><span class="hs-identifier hs-type">IfaceAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321190"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321190"><span class="hs-identifier hs-var">tc_name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifTyCon :: IfaceDecl -&gt; IfaceTyCon
</span><a href="GHC.Iface.Syntax.html#ifTyCon"><span class="hs-identifier hs-var">ifTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321188"><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681321188"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-832"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifAxBranches :: IfaceDecl -&gt; [IfaceAxBranch]
</span><a href="GHC.Iface.Syntax.html#ifAxBranches"><span class="hs-identifier hs-var">ifAxBranches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321186"><span class="annot"><span class="annottext">[IfaceAxBranch]
</span><a href="#local-6989586621681321186"><span class="hs-identifier hs-var">branches</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifRole :: IfaceDecl -&gt; Role
</span><a href="GHC.Iface.Syntax.html#ifRole"><span class="hs-identifier hs-var">ifRole</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321184"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681321184"><span class="hs-keyword hs-var">role</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321183"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321183"><span class="hs-identifier hs-var">tc_tycon</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceTyCon -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681321188"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-834"></span><span>       </span><span class="hs-comment">-- Must be done lazily, because axioms are forced when checking</span><span>
</span><span id="line-835"></span><span>       </span><span class="hs-comment">-- for family instance consistency, and the RHS may mention</span><span>
</span><span id="line-836"></span><span>       </span><span class="hs-comment">-- a hs-boot declared type constructor that is going to be</span><span>
</span><span id="line-837"></span><span>       </span><span class="hs-comment">-- defined by this module.</span><span>
</span><span id="line-838"></span><span>       </span><span class="hs-comment">-- e.g. type instance F Int = ToBeDefined</span><span>
</span><span id="line-839"></span><span>       </span><span class="hs-comment">-- See #13803</span><span>
</span><span id="line-840"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321181"><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681321181"><span class="hs-identifier hs-var">tc_branches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Axiom branches&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321190"><span class="hs-identifier hs-var">tc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-841"></span><span>                      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceAxBranch] -&gt; IfL [CoAxBranch]
</span><a href="GHC.IfaceToCore.html#tc_ax_branches"><span class="hs-identifier hs-var">tc_ax_branches</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceAxBranch]
</span><a href="#local-6989586621681321186"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-842"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321179"><span class="annot"><span class="annottext">axiom :: CoAxiom Branched
</span><a href="#local-6989586621681321179"><span class="hs-identifier hs-var hs-var">axiom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_unique :: Unique
</span><a href="#local-6989586621681321177"><span class="hs-identifier hs-var">co_ax_unique</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Unique
</span><a href="GHC.Types.Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321190"><span class="hs-identifier hs-var">tc_name</span></a></span><span>
</span><span id="line-843"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_name :: Name
</span><a href="#local-6989586621681321175"><span class="hs-identifier hs-var">co_ax_name</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321190"><span class="hs-identifier hs-var">tc_name</span></a></span><span>
</span><span id="line-844"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_tc :: TyCon
</span><a href="#local-6989586621681321174"><span class="hs-identifier hs-var">co_ax_tc</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321183"><span class="hs-identifier hs-var">tc_tycon</span></a></span><span>
</span><span id="line-845"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_role :: Role
</span><a href="#local-6989586621681321173"><span class="hs-identifier hs-var">co_ax_role</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681321184"><span class="hs-keyword hs-var">role</span></a></span><span>
</span><span id="line-846"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: Branches Branched
</span><a href="#local-6989586621681321172"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch] -&gt; Branches Branched
</span><a href="GHC.Core.Coercion.Axiom.html#manyBranches"><span class="hs-identifier hs-var">manyBranches</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681321181"><span class="hs-identifier hs-var">tc_branches</span></a></span><span>
</span><span id="line-847"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">co_ax_implicit :: Bool
</span><a href="#local-6989586621681321170"><span class="hs-identifier hs-var">co_ax_implicit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-848"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#ACoAxiom"><span class="hs-identifier hs-var">ACoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681321179"><span class="hs-identifier hs-var">axiom</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl"><span class="hs-identifier hs-var">tc_iface_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Class
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfacePatSyn"><span class="hs-identifier hs-type">IfacePatSyn</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifName :: IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321168"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321168"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-851"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatMatcher :: IfaceDecl -&gt; (Name, Bool)
</span><a href="GHC.Iface.Syntax.html#ifPatMatcher"><span class="hs-identifier hs-var">ifPatMatcher</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321166"><span class="annot"><span class="annottext">(Name, Bool)
</span><a href="#local-6989586621681321166"><span class="hs-identifier hs-var">if_matcher</span></a></span></span><span>
</span><span id="line-852"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatBuilder :: IfaceDecl -&gt; Maybe (Name, Bool)
</span><a href="GHC.Iface.Syntax.html#ifPatBuilder"><span class="hs-identifier hs-var">ifPatBuilder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321164"><span class="annot"><span class="annottext">Maybe (Name, Bool)
</span><a href="#local-6989586621681321164"><span class="hs-identifier hs-var">if_builder</span></a></span></span><span>
</span><span id="line-853"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatIsInfix :: IfaceDecl -&gt; Bool
</span><a href="GHC.Iface.Syntax.html#ifPatIsInfix"><span class="hs-identifier hs-var">ifPatIsInfix</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321162"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321162"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span>
</span><span id="line-854"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatUnivBndrs :: IfaceDecl -&gt; [IfaceForAllSpecBndr]
</span><a href="GHC.Iface.Syntax.html#ifPatUnivBndrs"><span class="hs-identifier hs-var">ifPatUnivBndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321160"><span class="annot"><span class="annottext">[IfaceForAllSpecBndr]
</span><a href="#local-6989586621681321160"><span class="hs-identifier hs-var">univ_bndrs</span></a></span></span><span>
</span><span id="line-855"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatExBndrs :: IfaceDecl -&gt; [IfaceForAllSpecBndr]
</span><a href="GHC.Iface.Syntax.html#ifPatExBndrs"><span class="hs-identifier hs-var">ifPatExBndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321158"><span class="annot"><span class="annottext">[IfaceForAllSpecBndr]
</span><a href="#local-6989586621681321158"><span class="hs-identifier hs-var">ex_bndrs</span></a></span></span><span>
</span><span id="line-856"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatProvCtxt :: IfaceDecl -&gt; IfaceContext
</span><a href="GHC.Iface.Syntax.html#ifPatProvCtxt"><span class="hs-identifier hs-var">ifPatProvCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321156"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321156"><span class="hs-identifier hs-var">prov_ctxt</span></a></span></span><span>
</span><span id="line-857"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatReqCtxt :: IfaceDecl -&gt; IfaceContext
</span><a href="GHC.Iface.Syntax.html#ifPatReqCtxt"><span class="hs-identifier hs-var">ifPatReqCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321154"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321154"><span class="hs-identifier hs-var">req_ctxt</span></a></span></span><span>
</span><span id="line-858"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatArgs :: IfaceDecl -&gt; IfaceContext
</span><a href="GHC.Iface.Syntax.html#ifPatArgs"><span class="hs-identifier hs-var">ifPatArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321152"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321152"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-859"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifPatTy :: IfaceDecl -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifPatTy"><span class="hs-identifier hs-var">ifPatTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321150"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321150"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span>
</span><span id="line-860"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifFieldLabels :: IfaceDecl -&gt; [FieldLabel]
</span><a href="GHC.Iface.Syntax.html#ifFieldLabels"><span class="hs-identifier hs-var">ifFieldLabels</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321148"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681321148"><span class="hs-identifier hs-var">field_labels</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc_iface_decl&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321168"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321147"><span class="annot"><span class="annottext">(Name, Type, Bool)
</span><a href="#local-6989586621681321147"><span class="hs-identifier hs-var">matcher</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name, Bool) -&gt; IfL (Name, Type, Bool)
</span><a href="#local-6989586621681321146"><span class="hs-identifier hs-var">tc_pr</span></a></span><span> </span><span class="annot"><span class="annottext">(Name, Bool)
</span><a href="#local-6989586621681321166"><span class="hs-identifier hs-var">if_matcher</span></a></span><span>
</span><span id="line-863"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321145"><span class="annot"><span class="annottext">Maybe (Name, Type, Bool)
</span><a href="#local-6989586621681321145"><span class="hs-identifier hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Maybe a -&gt; m (Maybe b)
</span><a href="GHC.Utils.Monad.html#fmapMaybeM"><span class="hs-identifier hs-var">fmapMaybeM</span></a></span><span> </span><span class="annot"><span class="annottext">(Name, Bool) -&gt; IfL (Name, Type, Bool)
</span><a href="#local-6989586621681321146"><span class="hs-identifier hs-var">tc_pr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Name, Bool)
</span><a href="#local-6989586621681321164"><span class="hs-identifier hs-var">if_builder</span></a></span><span>
</span><span id="line-864"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall vis a.
[VarBndr IfaceBndr vis]
-&gt; ([VarBndr CoreBndr vis] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndrs"><span class="hs-identifier hs-var">bindIfaceForAllBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceForAllSpecBndr]
</span><a href="#local-6989586621681321160"><span class="hs-identifier hs-var">univ_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681321142"><span class="annot"><span class="annottext">[VarBndr CoreBndr Specificity]
</span><a href="#local-6989586621681321142"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-865"></span><span>       </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall vis a.
[VarBndr IfaceBndr vis]
-&gt; ([VarBndr CoreBndr vis] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndrs"><span class="hs-identifier hs-var">bindIfaceForAllBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceForAllSpecBndr]
</span><a href="#local-6989586621681321158"><span class="hs-identifier hs-var">ex_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681321141"><span class="annot"><span class="annottext">[VarBndr CoreBndr Specificity]
</span><a href="#local-6989586621681321141"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-866"></span><span>       </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321140"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681321140"><span class="hs-identifier hs-var">patsyn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681321139"><span class="hs-identifier hs-var">mk_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321168"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-867"></span><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321138"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321138"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceContext -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321156"><span class="hs-identifier hs-var">prov_ctxt</span></a></span><span>
</span><span id="line-868"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321137"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321137"><span class="hs-identifier hs-var">req_theta</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceContext -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321154"><span class="hs-identifier hs-var">req_ctxt</span></a></span><span>
</span><span id="line-869"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321136"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321136"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321150"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-870"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321135"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321135"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321152"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-871"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Bool
-&gt; (Name, Type, Bool)
-&gt; Maybe (Name, Type, Bool)
-&gt; ([VarBndr CoreBndr Specificity], ThetaType)
-&gt; ([VarBndr CoreBndr Specificity], ThetaType)
-&gt; ThetaType
-&gt; Type
-&gt; [FieldLabel]
-&gt; PatSyn
</span><a href="GHC.Tc.TyCl.Build.html#buildPatSyn"><span class="hs-identifier hs-var">buildPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321168"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321162"><span class="hs-identifier hs-var">is_infix</span></a></span><span> </span><span class="annot"><span class="annottext">(Name, Type, Bool)
</span><a href="#local-6989586621681321147"><span class="hs-identifier hs-var">matcher</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Name, Type, Bool)
</span><a href="#local-6989586621681321145"><span class="hs-identifier hs-var">builder</span></a></span><span>
</span><span id="line-872"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr CoreBndr Specificity]
</span><a href="#local-6989586621681321142"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321137"><span class="hs-identifier hs-var">req_theta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-873"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr CoreBndr Specificity]
</span><a href="#local-6989586621681321141"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321138"><span class="hs-identifier hs-var">prov_theta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>                                       </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321135"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321136"><span class="hs-identifier hs-var">pat_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681321148"><span class="hs-identifier hs-var">field_labels</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-875"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn -&gt; ConLike
</span><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681321140"><span class="hs-identifier hs-var">patsyn</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-877"></span><span>     </span><span id="local-6989586621681321139"><span class="annot"><span class="annottext">mk_doc :: a -&gt; SDoc
</span><a href="#local-6989586621681321139"><span class="hs-identifier hs-var hs-var">mk_doc</span></a></span></span><span> </span><span id="local-6989586621681321129"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321129"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pattern synonym&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681321129"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-878"></span><span>     </span><span class="annot"><a href="#local-6989586621681321146"><span class="hs-identifier hs-type">tc_pr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfExtName"><span class="hs-identifier hs-type">IfExtName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>     </span><span id="local-6989586621681321146"><span class="annot"><span class="annottext">tc_pr :: (Name, Bool) -&gt; IfL (Name, Type, Bool)
</span><a href="#local-6989586621681321146"><span class="hs-identifier hs-var hs-var">tc_pr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681321127"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321127"><span class="hs-identifier hs-var">nm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681321126"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321126"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321125"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681321125"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321127"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; IfL CoreBndr
</span><a href="GHC.IfaceToCore.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321127"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-880"></span><span>                        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321127"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681321125"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321126"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-881"></span><span>
</span><span id="line-882"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-type">tcIfaceDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-883"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Fingerprint-Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-884"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-885"></span><span id="tcIfaceDecls"><span class="annot"><span class="annottext">tcIfaceDecls :: Bool -&gt; [(Fingerprint, IfaceDecl)] -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tcIfaceDecls"><span class="hs-identifier hs-var hs-var">tcIfaceDecls</span></a></span></span><span> </span><span id="local-6989586621681321122"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321122"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span id="local-6989586621681321121"><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
</span><a href="#local-6989586621681321121"><span class="hs-identifier hs-var">ver_decls</span></a></span></span><span>
</span><span id="line-886"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m [b]) -&gt; [a] -&gt; m [b]
</span><a href="GHC.Utils.Monad.html#concatMapM"><span class="hs-identifier hs-var">concatMapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; (Fingerprint, IfaceDecl) -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tc_iface_decl_fingerprint"><span class="hs-identifier hs-var">tc_iface_decl_fingerprint</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321122"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
</span><a href="#local-6989586621681321121"><span class="hs-identifier hs-var">ver_decls</span></a></span><span>
</span><span id="line-887"></span><span>
</span><span id="line-888"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_iface_decl_fingerprint"><span class="hs-identifier hs-type">tc_iface_decl_fingerprint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                    </span><span class="hs-comment">-- Don't load pragmas into the decl pool</span><span>
</span><span id="line-889"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Fingerprint-Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- The list can be poked eagerly, but the</span><span>
</span><span id="line-891"></span><span>                                    </span><span class="hs-comment">-- TyThings are forkM'd thunks</span><span>
</span><span id="line-892"></span><span id="tc_iface_decl_fingerprint"><span class="annot"><span class="annottext">tc_iface_decl_fingerprint :: Bool -&gt; (Fingerprint, IfaceDecl) -&gt; IfL [(Name, TyThing)]
</span><a href="GHC.IfaceToCore.html#tc_iface_decl_fingerprint"><span class="hs-identifier hs-var hs-var">tc_iface_decl_fingerprint</span></a></span></span><span> </span><span id="local-6989586621681321118"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321118"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681321117"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681321117"><span class="hs-identifier hs-var">_version</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681321116"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321116"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-893"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span>       </span><span class="hs-comment">-- Populate the name cache with final versions of all</span><span>
</span><span id="line-894"></span><span>                </span><span class="hs-comment">-- the names associated with the decl</span><span>
</span><span id="line-895"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321115"><span class="annot"><span class="annottext">main_name :: Name
</span><a href="#local-6989586621681321115"><span class="hs-identifier hs-var hs-var">main_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321116"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span>        </span><span class="hs-comment">-- Typecheck the thing, lazily</span><span>
</span><span id="line-898"></span><span>        </span><span class="hs-comment">-- NB. Firstly, the laziness is there in case we never need the</span><span>
</span><span id="line-899"></span><span>        </span><span class="hs-comment">-- declaration (in one-shot mode), and secondly it is there so that</span><span>
</span><span id="line-900"></span><span>        </span><span class="hs-comment">-- we don't look up the occurrence of a name before calling mk_new_bndr</span><span>
</span><span id="line-901"></span><span>        </span><span class="hs-comment">-- on the binder.  This is important because we must get the right name</span><span>
</span><span id="line-902"></span><span>        </span><span class="hs-comment">-- which includes its nameParent.</span><span>
</span><span id="line-903"></span><span>
</span><span id="line-904"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321114"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321114"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681321113"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL ()
</span><a href="GHC.IfaceToCore.html#bumpDeclStats"><span class="hs-identifier hs-var">bumpDeclStats</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321115"><span class="hs-identifier hs-var">main_name</span></a></span><span>
</span><span id="line-905"></span><span>                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IfaceDecl -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceDecl"><span class="hs-identifier hs-var">tcIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321118"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321116"><span class="hs-identifier hs-var">decl</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span>        </span><span class="hs-comment">-- Populate the type environment with the implicitTyThings too.</span><span>
</span><span id="line-908"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-909"></span><span>        </span><span class="hs-comment">-- Note [Tricky iface loop]</span><span>
</span><span id="line-910"></span><span>        </span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-911"></span><span>        </span><span class="hs-comment">-- Summary: The delicate point here is that 'mini-env' must be</span><span>
</span><span id="line-912"></span><span>        </span><span class="hs-comment">-- buildable from 'thing' without demanding any of the things</span><span>
</span><span id="line-913"></span><span>        </span><span class="hs-comment">-- 'forkM'd by tcIfaceDecl.</span><span>
</span><span id="line-914"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-915"></span><span>        </span><span class="hs-comment">-- In more detail: Consider the example</span><span>
</span><span id="line-916"></span><span>        </span><span class="hs-comment">--      data T a = MkT { x :: T a }</span><span>
</span><span id="line-917"></span><span>        </span><span class="hs-comment">-- The implicitTyThings of T are:  [ &lt;datacon MkT&gt;, &lt;selector x&gt;]</span><span>
</span><span id="line-918"></span><span>        </span><span class="hs-comment">-- (plus their workers, wrappers, coercions etc etc)</span><span>
</span><span id="line-919"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-920"></span><span>        </span><span class="hs-comment">-- We want to return an environment</span><span>
</span><span id="line-921"></span><span>        </span><span class="hs-comment">--      [ &quot;MkT&quot; -&gt; &lt;datacon MkT&gt;, &quot;x&quot; -&gt; &lt;selector x&gt;, ... ]</span><span>
</span><span id="line-922"></span><span>        </span><span class="hs-comment">-- (where the &quot;MkT&quot; is the *Name* associated with MkT, etc.)</span><span>
</span><span id="line-923"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-924"></span><span>        </span><span class="hs-comment">-- We do this by mapping the implicit_names to the associated</span><span>
</span><span id="line-925"></span><span>        </span><span class="hs-comment">-- TyThings.  By the invariant on ifaceDeclImplicitBndrs and</span><span>
</span><span id="line-926"></span><span>        </span><span class="hs-comment">-- implicitTyThings, we can use getOccName on the implicit</span><span>
</span><span id="line-927"></span><span>        </span><span class="hs-comment">-- TyThings to make this association: each Name's OccName should</span><span>
</span><span id="line-928"></span><span>        </span><span class="hs-comment">-- be the OccName of exactly one implicitTyThing.  So the key is</span><span>
</span><span id="line-929"></span><span>        </span><span class="hs-comment">-- to define a &quot;mini-env&quot;</span><span>
</span><span id="line-930"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-931"></span><span>        </span><span class="hs-comment">-- [ 'MkT' -&gt; &lt;datacon MkT&gt;, 'x' -&gt; &lt;selector x&gt;, ... ]</span><span>
</span><span id="line-932"></span><span>        </span><span class="hs-comment">-- where the 'MkT' here is the *OccName* associated with MkT.</span><span>
</span><span id="line-933"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-934"></span><span>        </span><span class="hs-comment">-- However, there is a subtlety: due to how type checking needs</span><span>
</span><span id="line-935"></span><span>        </span><span class="hs-comment">-- to be staged, we can't poke on the forkM'd thunks inside the</span><span>
</span><span id="line-936"></span><span>        </span><span class="hs-comment">-- implicitTyThings while building this mini-env.</span><span>
</span><span id="line-937"></span><span>        </span><span class="hs-comment">-- If we poke these thunks too early, two problems could happen:</span><span>
</span><span id="line-938"></span><span>        </span><span class="hs-comment">--    (1) When processing mutually recursive modules across</span><span>
</span><span id="line-939"></span><span>        </span><span class="hs-comment">--        hs-boot boundaries, poking too early will do the</span><span>
</span><span id="line-940"></span><span>        </span><span class="hs-comment">--        type-checking before the recursive knot has been tied,</span><span>
</span><span id="line-941"></span><span>        </span><span class="hs-comment">--        so things will be type-checked in the wrong</span><span>
</span><span id="line-942"></span><span>        </span><span class="hs-comment">--        environment, and necessary variables won't be in</span><span>
</span><span id="line-943"></span><span>        </span><span class="hs-comment">--        scope.</span><span>
</span><span id="line-944"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-945"></span><span>        </span><span class="hs-comment">--    (2) Looking up one OccName in the mini_env will cause</span><span>
</span><span id="line-946"></span><span>        </span><span class="hs-comment">--        others to be looked up, which might cause that</span><span>
</span><span id="line-947"></span><span>        </span><span class="hs-comment">--        original one to be looked up again, and hence loop.</span><span>
</span><span id="line-948"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-949"></span><span>        </span><span class="hs-comment">-- The code below works because of the following invariant:</span><span>
</span><span id="line-950"></span><span>        </span><span class="hs-comment">-- getOccName on a TyThing does not force the suspended type</span><span>
</span><span id="line-951"></span><span>        </span><span class="hs-comment">-- checks in order to extract the name. For example, we don't</span><span>
</span><span id="line-952"></span><span>        </span><span class="hs-comment">-- poke on the &quot;T a&quot; type of &lt;selector x&gt; on the way to</span><span>
</span><span id="line-953"></span><span>        </span><span class="hs-comment">-- extracting &lt;selector x&gt;'s OccName. Of course, there is no</span><span>
</span><span id="line-954"></span><span>        </span><span class="hs-comment">-- reason in principle why getting the OccName should force the</span><span>
</span><span id="line-955"></span><span>        </span><span class="hs-comment">-- thunks, but this means we need to be careful in</span><span>
</span><span id="line-956"></span><span>        </span><span class="hs-comment">-- implicitTyThings and its helper functions.</span><span>
</span><span id="line-957"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-958"></span><span>        </span><span class="hs-comment">-- All a bit too finely-balanced for my liking.</span><span>
</span><span id="line-959"></span><span>
</span><span id="line-960"></span><span>        </span><span class="hs-comment">-- This mini-env and lookup function mediates between the</span><span>
</span><span id="line-961"></span><span>        </span><span class="hs-comment">--'Name's n and the map from 'OccName's to the implicit TyThings</span><span>
</span><span id="line-962"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321111"><span class="annot"><span class="annottext">mini_env :: OccEnv TyThing
</span><a href="#local-6989586621681321111"><span class="hs-identifier hs-var hs-var">mini_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [(OccName, a)] -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#mkOccEnv"><span class="hs-identifier hs-var">mkOccEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321110"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321110"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681321110"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321110"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; [TyThing]
</span><a href="GHC.Types.TyThing.html#implicitTyThings"><span class="hs-identifier hs-var">implicitTyThings</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321114"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-963"></span><span>              </span><span id="local-6989586621681321108"><span class="annot"><span class="annottext">lookup :: Name -&gt; TyThing
</span><a href="#local-6989586621681321108"><span class="hs-identifier hs-var hs-var">lookup</span></a></span></span><span> </span><span id="local-6989586621681321107"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321107"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv TyThing
</span><a href="#local-6989586621681321111"><span class="hs-identifier hs-var">mini_env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321107"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-964"></span><span>                           </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681321105"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321105"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321105"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-965"></span><span>                           </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-966"></span><span>                             </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc_iface_decl_fingerprint&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321115"><span class="hs-identifier hs-var">main_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321107"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321116"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>
</span><span id="line-968"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321103"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681321103"><span class="hs-identifier hs-var">implicit_names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceDecl -&gt; [OccName]
</span><a href="GHC.Iface.Syntax.html#ifaceDeclImplicitBndrs"><span class="hs-identifier hs-var">ifaceDeclImplicitBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321116"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-969"></span><span>
</span><span id="line-970"></span><span class="hs-comment">--         ; traceIf (text &quot;Loading decl for &quot; &lt;&gt; ppr main_name $$ ppr implicit_names)</span><span>
</span><span id="line-971"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321115"><span class="hs-identifier hs-var">main_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681321114"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span>
</span><span id="line-972"></span><span>                      </span><span class="hs-comment">-- uses the invariant that implicit_names and</span><span>
</span><span id="line-973"></span><span>                      </span><span class="hs-comment">-- implicitTyThings are bijective</span><span>
</span><span id="line-974"></span><span>                      </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321101"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TyThing
</span><a href="#local-6989586621681321108"><span class="hs-identifier hs-var">lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321101"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681321101"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321101"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681321103"><span class="hs-identifier hs-var">implicit_names</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-975"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-977"></span><span>    </span><span id="local-6989586621681321113"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681321113"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Declaration for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifName"><span class="hs-identifier hs-var">ifName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621681321116"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="annot"><a href="GHC.IfaceToCore.html#bumpDeclStats"><span class="hs-identifier hs-type">bumpDeclStats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>         </span><span class="hs-comment">-- Record that one more declaration has actually been used</span><span>
</span><span id="line-980"></span><span id="bumpDeclStats"><span class="annot"><span class="annottext">bumpDeclStats :: Name -&gt; IfL ()
</span><a href="GHC.IfaceToCore.html#bumpDeclStats"><span class="hs-identifier hs-var hs-var">bumpDeclStats</span></a></span></span><span> </span><span id="local-6989586621681321100"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321100"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-981"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Loading decl for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321100"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
(ExternalPackageState -&gt; ExternalPackageState) -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#updateEps_"><span class="hs-identifier hs-var">updateEps_</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681321098"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681321098"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321097"><span class="annot"><span class="annottext">stats :: EpsStats
</span><a href="#local-6989586621681321097"><span class="hs-identifier hs-var hs-var">stats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState -&gt; EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var">eps_stats</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681321098"><span class="hs-identifier hs-var">eps</span></a></span><span>
</span><span id="line-983"></span><span>                              </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621681321098"><span class="hs-identifier hs-var">eps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eps_stats :: EpsStats
</span><a href="GHC.Unit.External.html#eps_stats"><span class="hs-identifier hs-var">eps_stats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681321097"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">n_decls_out :: Arity
</span><a href="GHC.Unit.External.html#n_decls_out"><span class="hs-identifier hs-var">n_decls_out</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Arity
</span><a href="GHC.Unit.External.html#n_decls_out"><span class="hs-identifier hs-var">n_decls_out</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621681321097"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_fd"><span class="hs-identifier hs-type">tc_fd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfLclName"><span class="hs-identifier hs-type">IfLclName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span id="tc_fd"><span class="annot"><span class="annottext">tc_fd :: FunDep FastString -&gt; IfL (FunDep CoreBndr)
</span><a href="GHC.IfaceToCore.html#tc_fd"><span class="hs-identifier hs-var hs-var">tc_fd</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681321091"><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681321091"><span class="hs-identifier hs-var">tvs1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681321090"><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681321090"><span class="hs-identifier hs-var">tvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321089"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321089"><span class="hs-identifier hs-var">tvs1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681321091"><span class="hs-identifier hs-var">tvs1</span></a></span><span>
</span><span id="line-988"></span><span>                        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321087"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321087"><span class="hs-identifier hs-var">tvs2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681321090"><span class="hs-identifier hs-var">tvs2</span></a></span><span>
</span><span id="line-989"></span><span>                        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321089"><span class="hs-identifier hs-var">tvs1'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321087"><span class="hs-identifier hs-var">tvs2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-990"></span><span>
</span><span id="line-991"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_ax_branches"><span class="hs-identifier hs-type">tc_ax_branches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAxBranch"><span class="hs-identifier hs-type">IfaceAxBranch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-992"></span><span id="tc_ax_branches"><span class="annot"><span class="annottext">tc_ax_branches :: [IfaceAxBranch] -&gt; IfL [CoAxBranch]
</span><a href="GHC.IfaceToCore.html#tc_ax_branches"><span class="hs-identifier hs-var hs-var">tc_ax_branches</span></a></span></span><span> </span><span id="local-6989586621681321086"><span class="annot"><span class="annottext">[IfaceAxBranch]
</span><a href="#local-6989586621681321086"><span class="hs-identifier hs-var">if_branches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch] -&gt; IfaceAxBranch -&gt; IfL [CoAxBranch]
</span><a href="GHC.IfaceToCore.html#tc_ax_branch"><span class="hs-identifier hs-var">tc_ax_branch</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[IfaceAxBranch]
</span><a href="#local-6989586621681321086"><span class="hs-identifier hs-var">if_branches</span></a></span><span>
</span><span id="line-993"></span><span>
</span><span id="line-994"></span><span class="annot"><a href="GHC.IfaceToCore.html#tc_ax_branch"><span class="hs-identifier hs-type">tc_ax_branch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAxBranch"><span class="hs-identifier hs-type">IfaceAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-995"></span><span id="tc_ax_branch"><span class="annot"><span class="annottext">tc_ax_branch :: [CoAxBranch] -&gt; IfaceAxBranch -&gt; IfL [CoAxBranch]
</span><a href="GHC.IfaceToCore.html#tc_ax_branch"><span class="hs-identifier hs-var hs-var">tc_ax_branch</span></a></span></span><span> </span><span id="local-6989586621681321083"><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681321083"><span class="hs-identifier hs-var">prev_branches</span></a></span></span><span>
</span><span id="line-996"></span><span>             </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAxBranch"><span class="hs-identifier hs-type">IfaceAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifaxbTyVars :: IfaceAxBranch -&gt; [IfaceTvBndr]
</span><a href="GHC.Iface.Syntax.html#ifaxbTyVars"><span class="hs-identifier hs-var">ifaxbTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321080"><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681321080"><span class="hs-identifier hs-var">tv_bndrs</span></a></span></span><span>
</span><span id="line-997"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifaxbEtaTyVars :: IfaceAxBranch -&gt; [IfaceTvBndr]
</span><a href="GHC.Iface.Syntax.html#ifaxbEtaTyVars"><span class="hs-identifier hs-var">ifaxbEtaTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321078"><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681321078"><span class="hs-identifier hs-var">eta_tv_bndrs</span></a></span></span><span>
</span><span id="line-998"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifaxbCoVars :: IfaceAxBranch -&gt; [IfaceIdBndr]
</span><a href="GHC.Iface.Syntax.html#ifaxbCoVars"><span class="hs-identifier hs-var">ifaxbCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321076"><span class="annot"><span class="annottext">[IfaceIdBndr]
</span><a href="#local-6989586621681321076"><span class="hs-identifier hs-var">cv_bndrs</span></a></span></span><span>
</span><span id="line-999"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifaxbLHS :: IfaceAxBranch -&gt; IfaceAppArgs
</span><a href="GHC.Iface.Syntax.html#ifaxbLHS"><span class="hs-identifier hs-var">ifaxbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321074"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681321074"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifaxbRHS :: IfaceAxBranch -&gt; IfaceType
</span><a href="GHC.Iface.Syntax.html#ifaxbRHS"><span class="hs-identifier hs-var">ifaxbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321072"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321072"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-1000"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifaxbRoles :: IfaceAxBranch -&gt; [Role]
</span><a href="GHC.Iface.Syntax.html#ifaxbRoles"><span class="hs-identifier hs-var">ifaxbRoles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321070"><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321070"><span class="hs-identifier hs-var">roles</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifaxbIncomps :: IfaceAxBranch -&gt; [Arity]
</span><a href="GHC.Iface.Syntax.html#ifaxbIncomps"><span class="hs-identifier hs-var">ifaxbIncomps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321068"><span class="annot"><span class="annottext">[Arity]
</span><a href="#local-6989586621681321068"><span class="hs-identifier hs-var">incomps</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a></span><span>
</span><span id="line-1002"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681321067"><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681321067"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceTvBndr -&gt; IfaceBndr
</span><a href="GHC.Iface.Type.html#IfaceTvBndr"><span class="hs-identifier hs-var">IfaceTvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681321067"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgFlag -&gt; TyConBndrVis
</span><a href="GHC.Core.TyCon.html#NamedTCB"><span class="hs-identifier hs-var">NamedTCB</span></a></span><span> </span><span class="annot"><span class="annottext">ArgFlag
</span><a href="GHC.Types.Var.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681321080"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321062"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321062"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1003"></span><span>         </span><span class="hs-comment">-- The _AT variant is needed here; see Note [CoAxBranch type variables] in GHC.Core.Coercion.Axiom</span><span>
</span><span id="line-1004"></span><span>    </span><span class="annot"><span class="annottext">forall a. [IfaceIdBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceIds"><span class="hs-identifier hs-var">bindIfaceIds</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceIdBndr]
</span><a href="#local-6989586621681321076"><span class="hs-identifier hs-var">cv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681321060"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321060"><span class="hs-identifier hs-var">cvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1005"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321059"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321059"><span class="hs-identifier hs-var">tc_lhs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceAppArgs"><span class="hs-identifier hs-var">tcIfaceAppArgs</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681321074"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1006"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321058"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321058"><span class="hs-identifier hs-var">tc_rhs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681321072"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1007"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321057"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321057"><span class="hs-identifier hs-var">eta_tvs</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceTvBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVars"><span class="hs-identifier hs-var">bindIfaceTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681321078"><span class="hs-identifier hs-var">eta_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-1008"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681321055"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321055"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfL Module
</span><a href="GHC.Tc.Utils.Monad.html#getIfModule"><span class="hs-identifier hs-var">getIfModule</span></a></span><span>
</span><span id="line-1009"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681321053"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621681321053"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#mkGeneralSrcSpan"><span class="hs-identifier hs-var">mkGeneralSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;module &quot;</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; FastString -&gt; FastString
</span><a href="GHC.Data.FastString.html#appendFS"><span class="hs-operator hs-var">`appendFS`</span></a></span><span>
</span><span id="line-1010"></span><span>                                  </span><span class="annot"><span class="annottext">ModuleName -&gt; FastString
</span><a href="GHC.Unit.Module.Name.html#moduleNameFS"><span class="hs-identifier hs-var">moduleNameFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681321055"><span class="hs-identifier hs-var">this_mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>          </span><span id="local-6989586621681321048"><span class="annot"><span class="annottext">br :: CoAxBranch
</span><a href="#local-6989586621681321048"><span class="hs-identifier hs-var hs-var">br</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_loc :: SrcSpan
</span><a href="GHC.Core.Coercion.Axiom.html#cab_loc"><span class="hs-identifier hs-var">cab_loc</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681321053"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-1012"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: [CoreBndr]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321062"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-1013"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_eta_tvs :: [CoreBndr]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_eta_tvs"><span class="hs-identifier hs-var">cab_eta_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321057"><span class="hs-identifier hs-var">eta_tvs</span></a></span><span>
</span><span id="line-1014"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: [CoreBndr]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321060"><span class="hs-identifier hs-var">cvs</span></a></span><span>
</span><span id="line-1015"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: ThetaType
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681321059"><span class="hs-identifier hs-var">tc_lhs</span></a></span><span>
</span><span id="line-1016"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_roles :: [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_roles"><span class="hs-identifier hs-var">cab_roles</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681321070"><span class="hs-identifier hs-var">roles</span></a></span><span>
</span><span id="line-1017"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: Type
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681321058"><span class="hs-identifier hs-var">tc_rhs</span></a></span><span>
</span><span id="line-1018"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_incomps :: [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_incomps"><span class="hs-identifier hs-var">cab_incomps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681321083"><span class="hs-identifier hs-var">prev_branches</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; Arity -&gt; a
</span><a href="GHC.Data.List.SetOps.html#getNth"><span class="hs-operator hs-var">`getNth`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arity]
</span><a href="#local-6989586621681321068"><span class="hs-identifier hs-var">incomps</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1019"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621681321083"><span class="hs-identifier hs-var">prev_branches</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621681321048"><span class="hs-identifier hs-var">br</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1020"></span><span>
</span><span id="line-1021"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDataCons"><span class="hs-identifier hs-type">tcIfaceDataCons</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyConBinder"><span class="hs-identifier hs-type">TyConBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceConDecls"><span class="hs-identifier hs-type">IfaceConDecls</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#AlgTyConRhs"><span class="hs-identifier hs-type">AlgTyConRhs</span></a></span><span>
</span><span id="line-1022"></span><span id="tcIfaceDataCons"><span class="annot"><span class="annottext">tcIfaceDataCons :: Name -&gt; TyCon -&gt; [TyConBinder] -&gt; IfaceConDecls -&gt; IfL AlgTyConRhs
</span><a href="GHC.IfaceToCore.html#tcIfaceDataCons"><span class="hs-identifier hs-var hs-var">tcIfaceDataCons</span></a></span></span><span> </span><span id="local-6989586621681321036"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321036"><span class="hs-identifier hs-var">tycon_name</span></a></span></span><span> </span><span id="local-6989586621681321035"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321035"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621681321034"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321034"><span class="hs-identifier hs-var">tc_tybinders</span></a></span></span><span> </span><span id="local-6989586621681321033"><span class="annot"><span class="annottext">IfaceConDecls
</span><a href="#local-6989586621681321033"><span class="hs-identifier hs-var">if_cons</span></a></span></span><span>
</span><span id="line-1023"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceConDecls
</span><a href="#local-6989586621681321033"><span class="hs-identifier hs-var">if_cons</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1024"></span><span>        </span><span class="annot"><span class="annottext">IfaceConDecls
</span><a href="GHC.Iface.Syntax.html#IfAbstractTyCon"><span class="hs-identifier hs-var">IfAbstractTyCon</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">AlgTyConRhs
</span><a href="GHC.Core.TyCon.html#AbstractTyCon"><span class="hs-identifier hs-var">AbstractTyCon</span></a></span><span>
</span><span id="line-1025"></span><span>        </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfDataTyCon"><span class="hs-identifier hs-type">IfDataTyCon</span></a></span><span> </span><span id="local-6989586621681321031"><span class="annot"><span class="annottext">[IfaceConDecl]
</span><a href="#local-6989586621681321031"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321030"><span class="annot"><span class="annottext">[DataCon]
</span><a href="#local-6989586621681321030"><span class="hs-identifier hs-var">data_cons</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceConDecl -&gt; IfL DataCon
</span><a href="#local-6989586621681321029"><span class="hs-identifier hs-var">tc_con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceConDecl]
</span><a href="#local-6989586621681321031"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-1026"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DataCon] -&gt; AlgTyConRhs
</span><a href="GHC.Core.TyCon.html#mkDataTyConRhs"><span class="hs-identifier hs-var">mkDataTyConRhs</span></a></span><span> </span><span class="annot"><span class="annottext">[DataCon]
</span><a href="#local-6989586621681321030"><span class="hs-identifier hs-var">data_cons</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1027"></span><span>        </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfNewTyCon"><span class="hs-identifier hs-type">IfNewTyCon</span></a></span><span>  </span><span id="local-6989586621681321026"><span class="annot"><span class="annottext">IfaceConDecl
</span><a href="#local-6989586621681321026"><span class="hs-identifier hs-var">con</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681321025"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681321025"><span class="hs-identifier hs-var">data_con</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceConDecl -&gt; IfL DataCon
</span><a href="#local-6989586621681321029"><span class="hs-identifier hs-var">tc_con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceConDecl
</span><a href="#local-6989586621681321026"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1028"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. Name -&gt; TyCon -&gt; DataCon -&gt; TcRnIf m n AlgTyConRhs
</span><a href="GHC.Tc.TyCl.Build.html#mkNewTyConRhs"><span class="hs-identifier hs-var">mkNewTyConRhs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321036"><span class="hs-identifier hs-var">tycon_name</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321035"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681321025"><span class="hs-identifier hs-var">data_con</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1029"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1030"></span><span>    </span><span class="annot"><a href="#local-6989586621681321023"><span class="hs-identifier hs-type">univ_tvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1031"></span><span>    </span><span id="local-6989586621681321023"><span class="annot"><span class="annottext">univ_tvs :: [CoreBndr]
</span><a href="#local-6989586621681321023"><span class="hs-identifier hs-var hs-var">univ_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321034"><span class="hs-identifier hs-var">tc_tybinders</span></a></span><span>
</span><span id="line-1032"></span><span>
</span><span id="line-1033"></span><span>    </span><span class="annot"><a href="#local-6989586621681321022"><span class="hs-identifier hs-type">tag_map</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a></span><span>
</span><span id="line-1034"></span><span>    </span><span id="local-6989586621681321022"><span class="annot"><span class="annottext">tag_map :: NameEnv Arity
</span><a href="#local-6989586621681321022"><span class="hs-identifier hs-var hs-var">tag_map</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; NameEnv Arity
</span><a href="GHC.Core.TyCon.html#mkTyConTagMap"><span class="hs-identifier hs-var">mkTyConTagMap</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321035"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span>    </span><span id="local-6989586621681321029"><span class="annot"><span class="annottext">tc_con_decl :: IfaceConDecl -&gt; IfL DataCon
</span><a href="#local-6989586621681321029"><span class="hs-identifier hs-var hs-var">tc_con_decl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfCon"><span class="hs-identifier hs-type">IfCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifConInfix :: IfaceConDecl -&gt; Bool
</span><a href="GHC.Iface.Syntax.html#ifConInfix"><span class="hs-identifier hs-var">ifConInfix</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321017"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321017"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1037"></span><span>                         </span><span class="annot"><span class="annottext">ifConExTCvs :: IfaceConDecl -&gt; [IfaceBndr]
</span><a href="GHC.Iface.Syntax.html#ifConExTCvs"><span class="hs-identifier hs-var">ifConExTCvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321015"><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681321015"><span class="hs-identifier hs-var">ex_bndrs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1038"></span><span>                         </span><span class="annot"><span class="annottext">ifConUserTvBinders :: IfaceConDecl -&gt; [IfaceForAllSpecBndr]
</span><a href="GHC.Iface.Syntax.html#ifConUserTvBinders"><span class="hs-identifier hs-var">ifConUserTvBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321013"><span class="annot"><span class="annottext">[IfaceForAllSpecBndr]
</span><a href="#local-6989586621681321013"><span class="hs-identifier hs-var">user_bndrs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1039"></span><span>                         </span><span class="annot"><span class="annottext">ifConName :: IfaceConDecl -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifConName"><span class="hs-identifier hs-var">ifConName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321011"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1040"></span><span>                         </span><span class="annot"><span class="annottext">ifConCtxt :: IfaceConDecl -&gt; IfaceContext
</span><a href="GHC.Iface.Syntax.html#ifConCtxt"><span class="hs-identifier hs-var">ifConCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321009"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321009"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifConEqSpec :: IfaceConDecl -&gt; [IfaceTvBndr]
</span><a href="GHC.Iface.Syntax.html#ifConEqSpec"><span class="hs-identifier hs-var">ifConEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321007"><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681321007"><span class="hs-identifier hs-var">spec</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1041"></span><span>                         </span><span class="annot"><span class="annottext">ifConArgTys :: IfaceConDecl -&gt; [(IfaceType, IfaceType)]
</span><a href="GHC.Iface.Syntax.html#ifConArgTys"><span class="hs-identifier hs-var">ifConArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321005"><span class="annot"><span class="annottext">[(IfaceType, IfaceType)]
</span><a href="#local-6989586621681321005"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifConFields :: IfaceConDecl -&gt; [FieldLabel]
</span><a href="GHC.Iface.Syntax.html#ifConFields"><span class="hs-identifier hs-var">ifConFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321003"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681321003"><span class="hs-identifier hs-var">lbl_names</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1042"></span><span>                         </span><span class="annot"><span class="annottext">ifConStricts :: IfaceConDecl -&gt; [IfaceBang]
</span><a href="GHC.Iface.Syntax.html#ifConStricts"><span class="hs-identifier hs-var">ifConStricts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681321001"><span class="annot"><span class="annottext">[IfaceBang]
</span><a href="#local-6989586621681321001"><span class="hs-identifier hs-var">if_stricts</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1043"></span><span>                         </span><span class="annot"><span class="annottext">ifConSrcStricts :: IfaceConDecl -&gt; [IfaceSrcBang]
</span><a href="GHC.Iface.Syntax.html#ifConSrcStricts"><span class="hs-identifier hs-var">ifConSrcStricts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320999"><span class="annot"><span class="annottext">[IfaceSrcBang]
</span><a href="#local-6989586621681320999"><span class="hs-identifier hs-var">if_src_stricts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1044"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Universally-quantified tyvars are shared with</span><span>
</span><span id="line-1045"></span><span>       </span><span class="hs-comment">-- parent TyCon, and are already in scope</span><span>
</span><span id="line-1046"></span><span>       </span><span class="annot"><span class="annottext">forall a. [IfaceBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681321015"><span class="hs-identifier hs-var">ex_bndrs</span></a></span><span>    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320997"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320997"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1047"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Start interface-file tc_con_decl&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>
</span><span id="line-1049"></span><span>          </span><span class="hs-comment">-- By this point, we have bound every universal and existential</span><span>
</span><span id="line-1050"></span><span>          </span><span class="hs-comment">-- tyvar. Because of the dcUserTyVarBinders invariant</span><span>
</span><span id="line-1051"></span><span>          </span><span class="hs-comment">-- (see Note [DataCon user type variable binders]), *every* tyvar in</span><span>
</span><span id="line-1052"></span><span>          </span><span class="hs-comment">-- ifConUserTvBinders has a matching counterpart somewhere in the</span><span>
</span><span id="line-1053"></span><span>          </span><span class="hs-comment">-- bound universals/existentials. As a result, calling tcIfaceTyVar</span><span>
</span><span id="line-1054"></span><span>          </span><span class="hs-comment">-- below is always guaranteed to succeed.</span><span>
</span><span id="line-1055"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320996"><span class="annot"><span class="annottext">[VarBndr CoreBndr Specificity]
</span><a href="#local-6989586621681320996"><span class="hs-identifier hs-var">user_tv_bndrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681320995"><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320995"><span class="hs-identifier hs-var">bd</span></a></span></span><span> </span><span id="local-6989586621681320994"><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621681320994"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1056"></span><span>                                   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320995"><span class="hs-identifier hs-var">bd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1057"></span><span>                                     </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320992"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320992"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1058"></span><span>                                       </span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceLclId"><span class="hs-identifier hs-var">tcIfaceLclId</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320992"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621681320994"><span class="hs-identifier hs-var">vis</span></a></span><span>
</span><span id="line-1059"></span><span>                                     </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320989"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320989"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1060"></span><span>                                       </span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320989"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621681320994"><span class="hs-identifier hs-var">vis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>                                </span><span class="annot"><span class="annottext">[IfaceForAllSpecBndr]
</span><a href="#local-6989586621681321013"><span class="hs-identifier hs-var">user_bndrs</span></a></span><span>
</span><span id="line-1062"></span><span>
</span><span id="line-1063"></span><span>        </span><span class="hs-comment">-- Read the context and argument types, but lazily for two reasons</span><span>
</span><span id="line-1064"></span><span>        </span><span class="hs-comment">-- (a) to avoid looking tugging on a recursive use of</span><span>
</span><span id="line-1065"></span><span>        </span><span class="hs-comment">--     the type itself, which is knot-tied</span><span>
</span><span id="line-1066"></span><span>        </span><span class="hs-comment">-- (b) to avoid faulting in the component types unless</span><span>
</span><span id="line-1067"></span><span>        </span><span class="hs-comment">--     they are really needed</span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621681320988"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681320988"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320987"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320987"><span class="hs-identifier hs-var">theta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320986"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681320986"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320985"><span class="annot"><span class="annottext">[HsImplBang]
</span><a href="#local-6989586621681320985"><span class="hs-identifier hs-var">stricts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681320984"><span class="hs-identifier hs-var">mk_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1069"></span><span>             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320983"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681320983"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceTvBndr] -&gt; IfL [EqSpec]
</span><a href="GHC.IfaceToCore.html#tcIfaceEqSpec"><span class="hs-identifier hs-var">tcIfaceEqSpec</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681321007"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-1070"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320981"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320981"><span class="hs-identifier hs-var">theta</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceContext -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceCtxt"><span class="hs-identifier hs-var">tcIfaceCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681321009"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1071"></span><span>                </span><span class="hs-comment">-- This fixes #13710.  The enclosing lazy thunk gets</span><span>
</span><span id="line-1072"></span><span>                </span><span class="hs-comment">-- forced when typechecking record wildcard pattern</span><span>
</span><span id="line-1073"></span><span>                </span><span class="hs-comment">-- matching (it's not completely clear why this</span><span>
</span><span id="line-1074"></span><span>                </span><span class="hs-comment">-- tuple is needed), which causes trouble if one of</span><span>
</span><span id="line-1075"></span><span>                </span><span class="hs-comment">-- the argument types was recursively defined.</span><span>
</span><span id="line-1076"></span><span>                </span><span class="hs-comment">-- See also Note [Tying the knot]</span><span>
</span><span id="line-1077"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320980"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681320980"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="#local-6989586621681320984"><span class="hs-identifier hs-var">mk_doc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg_tys&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1078"></span><span>                           </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681320979"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320979"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320978"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320978"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Type -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.Type.html#mkScaled"><span class="hs-identifier hs-var">mkScaled</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320979"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320978"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(IfaceType, IfaceType)]
</span><a href="#local-6989586621681321005"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1079"></span><span>                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320976"><span class="annot"><span class="annottext">[HsImplBang]
</span><a href="#local-6989586621681320976"><span class="hs-identifier hs-var">stricts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBang -&gt; IfL HsImplBang
</span><a href="#local-6989586621681320975"><span class="hs-identifier hs-var">tc_strict</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceBang]
</span><a href="#local-6989586621681321001"><span class="hs-identifier hs-var">if_stricts</span></a></span><span>
</span><span id="line-1080"></span><span>                        </span><span class="hs-comment">-- The IfBang field can mention</span><span>
</span><span id="line-1081"></span><span>                        </span><span class="hs-comment">-- the type itself; hence inside forkM</span><span>
</span><span id="line-1082"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681320983"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320981"><span class="hs-identifier hs-var">theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681320980"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[HsImplBang]
</span><a href="#local-6989586621681320976"><span class="hs-identifier hs-var">stricts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1083"></span><span>
</span><span id="line-1084"></span><span>        </span><span class="hs-comment">-- Remember, tycon is the representation tycon</span><span>
</span><span id="line-1085"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320974"><span class="annot"><span class="annottext">orig_res_ty :: Type
</span><a href="#local-6989586621681320974"><span class="hs-identifier hs-var hs-var">orig_res_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; ThetaType -&gt; Type
</span><a href="GHC.Core.Type.html#mkFamilyTyConApp"><span class="hs-identifier hs-var">mkFamilyTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321035"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1086"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst -&gt; [CoreBndr] -&gt; ThetaType
</span><a href="GHC.Core.TyCo.Subst.html#substTyCoVars"><span class="hs-identifier hs-var">substTyCoVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(CoreBndr, Type)] -&gt; TCvSubst
</span><a href="GHC.Core.TyCo.Subst.html#mkTvSubstPrs"><span class="hs-identifier hs-var">mkTvSubstPrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">EqSpec -&gt; (CoreBndr, Type)
</span><a href="GHC.Core.DataCon.html#eqSpecPair"><span class="hs-identifier hs-var">eqSpecPair</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681320988"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1087"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681321034"><span class="hs-identifier hs-var">tc_tybinders</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320970"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320970"><span class="hs-identifier hs-var">prom_rep_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Name -&gt; TcRnIf gbl lcl Name
</span><a href="GHC.Tc.TyCl.Build.html#newTyConRepName"><span class="hs-identifier hs-var">newTyConRepName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320969"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320969"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall m n.
FamInstEnvs
-&gt; Name
-&gt; Bool
-&gt; Name
-&gt; [HsSrcBang]
-&gt; Maybe [HsImplBang]
-&gt; [FieldLabel]
-&gt; [CoreBndr]
-&gt; [CoreBndr]
-&gt; [VarBndr CoreBndr Specificity]
-&gt; [EqSpec]
-&gt; ThetaType
-&gt; [Scaled Type]
-&gt; Type
-&gt; TyCon
-&gt; NameEnv Arity
-&gt; TcRnIf m n DataCon
</span><a href="GHC.Tc.TyCl.Build.html#buildDataCon"><span class="hs-identifier hs-var">buildDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceDataCons: FamInstEnvs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1092"></span><span>                       </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681321017"><span class="hs-identifier hs-var">is_infix</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320970"><span class="hs-identifier hs-var">prom_rep_name</span></a></span><span>
</span><span id="line-1093"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceSrcBang -&gt; HsSrcBang
</span><a href="#local-6989586621681320967"><span class="hs-identifier hs-var">src_strict</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceSrcBang]
</span><a href="#local-6989586621681320999"><span class="hs-identifier hs-var">if_src_stricts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1094"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[HsImplBang]
</span><a href="#local-6989586621681320985"><span class="hs-identifier hs-var">stricts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span>                       </span><span class="hs-comment">-- Pass the HsImplBangs (i.e. final</span><span>
</span><span id="line-1096"></span><span>                       </span><span class="hs-comment">-- decisions) to buildDataCon; it'll use</span><span>
</span><span id="line-1097"></span><span>                       </span><span class="hs-comment">-- these to guide the construction of a</span><span>
</span><span id="line-1098"></span><span>                       </span><span class="hs-comment">-- worker.</span><span>
</span><span id="line-1099"></span><span>                       </span><span class="hs-comment">-- See Note [Bangs on imported data constructors] in GHC.Types.Id.Make</span><span>
</span><span id="line-1100"></span><span>                       </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681321003"><span class="hs-identifier hs-var">lbl_names</span></a></span><span>
</span><span id="line-1101"></span><span>                       </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681321023"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320997"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr CoreBndr Specificity]
</span><a href="#local-6989586621681320996"><span class="hs-identifier hs-var">user_tv_bndrs</span></a></span><span>
</span><span id="line-1102"></span><span>                       </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681320988"><span class="hs-identifier hs-var">eq_spec</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320987"><span class="hs-identifier hs-var">theta</span></a></span><span>
</span><span id="line-1103"></span><span>                       </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681320986"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320974"><span class="hs-identifier hs-var">orig_res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681321035"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Arity
</span><a href="#local-6989586621681321022"><span class="hs-identifier hs-var">tag_map</span></a></span><span>
</span><span id="line-1104"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall m n. SDoc -&gt; TcRnIf m n ()
</span><a href="GHC.Tc.Utils.Monad.html#traceIf"><span class="hs-identifier hs-var">traceIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Done interface-file tc_con_decl&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681321011"><span class="hs-identifier hs-var">dc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1105"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320969"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1106"></span><span>    </span><span id="local-6989586621681320984"><span class="annot"><span class="annottext">mk_doc :: a -&gt; SDoc
</span><a href="#local-6989586621681320984"><span class="hs-identifier hs-var hs-var">mk_doc</span></a></span></span><span> </span><span id="local-6989586621681320964"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681320964"><span class="hs-identifier hs-var">con_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Constructor&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681320964"><span class="hs-identifier hs-var">con_name</span></a></span><span>
</span><span id="line-1107"></span><span>
</span><span id="line-1108"></span><span>    </span><span class="annot"><a href="#local-6989586621681320975"><span class="hs-identifier hs-type">tc_strict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceBang"><span class="hs-identifier hs-type">IfaceBang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span>
</span><span id="line-1109"></span><span>    </span><span id="local-6989586621681320975"><span class="annot"><span class="annottext">tc_strict :: IfaceBang -&gt; IfL HsImplBang
</span><a href="#local-6989586621681320975"><span class="hs-identifier hs-var hs-var">tc_strict</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceBang
</span><a href="GHC.Iface.Syntax.html#IfNoBang"><span class="hs-identifier hs-var">IfNoBang</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1110"></span><span>    </span><span class="annot"><a href="#local-6989586621681320975"><span class="hs-identifier hs-var">tc_strict</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBang
</span><a href="GHC.Iface.Syntax.html#IfStrict"><span class="hs-identifier hs-var">IfStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsStrict"><span class="hs-identifier hs-var">HsStrict</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1111"></span><span>    </span><span class="annot"><a href="#local-6989586621681320975"><span class="hs-identifier hs-var">tc_strict</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBang
</span><a href="GHC.Iface.Syntax.html#IfUnpack"><span class="hs-identifier hs-var">IfUnpack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Coercion -&gt; HsImplBang
</span><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-var">HsUnpack</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>    </span><span class="annot"><a href="#local-6989586621681320975"><span class="hs-identifier hs-var">tc_strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfUnpackCo"><span class="hs-identifier hs-type">IfUnpackCo</span></a></span><span> </span><span id="local-6989586621681320956"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320956"><span class="hs-identifier hs-var">if_co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320955"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320955"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320956"><span class="hs-identifier hs-var">if_co</span></a></span><span>
</span><span id="line-1113"></span><span>                                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Coercion -&gt; HsImplBang
</span><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-var">HsUnpack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320955"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1114"></span><span>
</span><span id="line-1115"></span><span>    </span><span class="annot"><a href="#local-6989586621681320967"><span class="hs-identifier hs-type">src_strict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSrcBang"><span class="hs-identifier hs-type">IfaceSrcBang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a></span><span>
</span><span id="line-1116"></span><span>    </span><span id="local-6989586621681320967"><span class="annot"><span class="annottext">src_strict :: IfaceSrcBang -&gt; HsSrcBang
</span><a href="#local-6989586621681320967"><span class="hs-identifier hs-var hs-var">src_strict</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfSrcBang"><span class="hs-identifier hs-type">IfSrcBang</span></a></span><span> </span><span id="local-6989586621681320952"><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621681320952"><span class="hs-identifier hs-var">unpk</span></a></span></span><span> </span><span id="local-6989586621681320951"><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621681320951"><span class="hs-identifier hs-var">bang</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceText -&gt; SrcUnpackedness -&gt; SrcStrictness -&gt; HsSrcBang
</span><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-var">HsSrcBang</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621681320952"><span class="hs-identifier hs-var">unpk</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621681320951"><span class="hs-identifier hs-var">bang</span></a></span><span>
</span><span id="line-1117"></span><span>
</span><span id="line-1118"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceEqSpec"><span class="hs-identifier hs-type">tcIfaceEqSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceEqSpec"><span class="hs-identifier hs-type">IfaceEqSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1119"></span><span id="tcIfaceEqSpec"><span class="annot"><span class="annottext">tcIfaceEqSpec :: [IfaceTvBndr] -&gt; IfL [EqSpec]
</span><a href="GHC.IfaceToCore.html#tcIfaceEqSpec"><span class="hs-identifier hs-var hs-var">tcIfaceEqSpec</span></a></span></span><span> </span><span id="local-6989586621681320947"><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681320947"><span class="hs-identifier hs-var">spec</span></a></span></span><span>
</span><span id="line-1120"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTvBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) EqSpec
</span><a href="#local-6989586621681320946"><span class="hs-identifier hs-var">do_item</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681320947"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-1121"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1122"></span><span>    </span><span id="local-6989586621681320946"><span class="annot"><span class="annottext">do_item :: IfaceTvBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) EqSpec
</span><a href="#local-6989586621681320946"><span class="hs-identifier hs-var hs-var">do_item</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320942"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320942"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320941"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320941"><span class="hs-identifier hs-var">if_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320940"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320940"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320942"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1123"></span><span>                              </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320939"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320939"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320941"><span class="hs-identifier hs-var">if_ty</span></a></span><span>
</span><span id="line-1124"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; Type -&gt; EqSpec
</span><a href="GHC.Core.DataCon.html#mkEqSpec"><span class="hs-identifier hs-var">mkEqSpec</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320940"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320939"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1125"></span><span>
</span><span id="line-1126"></span><span class="hs-comment">{-
Note [Synonym kind loop]
~~~~~~~~~~~~~~~~~~~~~~~~
Notice that we eagerly grab the *kind* from the interface file, but
build a forkM thunk for the *rhs* (and family stuff).  To see why,
consider this (#2412)

M.hs:       module M where { import X; data T = MkT S }
X.hs:       module X where { import {-# SOURCE #-} M; type S = T }
M.hs-boot:  module M where { data T }

When kind-checking M.hs we need S's kind.  But we do not want to
find S's kind from (typeKind S-rhs), because we don't want to look at
S-rhs yet!  Since S is imported from X.hi, S gets just one chance to
be defined, and we must not do that until we've finished with M.T.

Solution: record S's kind in the interface file; now we can safely
look at it.

************************************************************************
*                                                                      *
                Instances
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1151"></span><span>
</span><span id="line-1152"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcRoughTyCon"><span class="hs-identifier hs-type">tcRoughTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyCon"><span class="hs-identifier hs-type">IfaceTyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html#RoughMatchTc"><span class="hs-identifier hs-type">RoughMatchTc</span></a></span><span>
</span><span id="line-1153"></span><span id="tcRoughTyCon"><span class="annot"><span class="annottext">tcRoughTyCon :: Maybe IfaceTyCon -&gt; RoughMatchTc
</span><a href="GHC.IfaceToCore.html#tcRoughTyCon"><span class="hs-identifier hs-var hs-var">tcRoughTyCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320936"><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320936"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RoughMatchTc
</span><a href="GHC.Core.Unify.html#KnownTc"><span class="hs-identifier hs-var">KnownTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceTyCon -&gt; Name
</span><a href="GHC.Iface.Type.html#ifaceTyConName"><span class="hs-identifier hs-var">ifaceTyConName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320936"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1154"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcRoughTyCon"><span class="hs-identifier hs-var">tcRoughTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceTyCon
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RoughMatchTc
</span><a href="GHC.Core.Unify.html#OtherTc"><span class="hs-identifier hs-var">OtherTc</span></a></span><span>
</span><span id="line-1155"></span><span>
</span><span id="line-1156"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier hs-type">tcIfaceInst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClsInst"><span class="hs-identifier hs-type">IfaceClsInst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span>
</span><span id="line-1157"></span><span id="tcIfaceInst"><span class="annot"><span class="annottext">tcIfaceInst :: IfaceClsInst -&gt; IfL ClsInst
</span><a href="GHC.IfaceToCore.html#tcIfaceInst"><span class="hs-identifier hs-var hs-var">tcIfaceInst</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClsInst"><span class="hs-identifier hs-type">IfaceClsInst</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifDFun :: IfaceClsInst -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifDFun"><span class="hs-identifier hs-var">ifDFun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320930"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320930"><span class="hs-identifier hs-var">dfun_name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifOFlag :: IfaceClsInst -&gt; OverlapFlag
</span><a href="GHC.Iface.Syntax.html#ifOFlag"><span class="hs-identifier hs-var">ifOFlag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320928"><span class="annot"><span class="annottext">OverlapFlag
</span><a href="#local-6989586621681320928"><span class="hs-identifier hs-var">oflag</span></a></span></span><span>
</span><span id="line-1158"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifInstCls :: IfaceClsInst -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifInstCls"><span class="hs-identifier hs-var">ifInstCls</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320926"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320926"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifInstTys :: IfaceClsInst -&gt; [Maybe IfaceTyCon]
</span><a href="GHC.Iface.Syntax.html#ifInstTys"><span class="hs-identifier hs-var">ifInstTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320924"><span class="annot"><span class="annottext">[Maybe IfaceTyCon]
</span><a href="#local-6989586621681320924"><span class="hs-identifier hs-var">mb_tcs</span></a></span></span><span>
</span><span id="line-1159"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifInstOrph :: IfaceClsInst -&gt; IsOrphan
</span><a href="GHC.Iface.Syntax.html#ifInstOrph"><span class="hs-identifier hs-var">ifInstOrph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320922"><span class="annot"><span class="annottext">IsOrphan
</span><a href="#local-6989586621681320922"><span class="hs-identifier hs-var">orph</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320921"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320921"><span class="hs-identifier hs-var">dfun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Dict fun&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320930"><span class="hs-identifier hs-var">dfun_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1161"></span><span>                    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; CoreBndr
</span><a href="GHC.Types.TyThing.html#tyThingId"><span class="hs-identifier hs-var">tyThingId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceImplicit"><span class="hs-identifier hs-var">tcIfaceImplicit</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320930"><span class="hs-identifier hs-var">dfun_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1162"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320918"><span class="annot"><span class="annottext">mb_tcs' :: [RoughMatchTc]
</span><a href="#local-6989586621681320918"><span class="hs-identifier hs-var hs-var">mb_tcs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceTyCon -&gt; RoughMatchTc
</span><a href="GHC.IfaceToCore.html#tcRoughTyCon"><span class="hs-identifier hs-var">tcRoughTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe IfaceTyCon]
</span><a href="#local-6989586621681320924"><span class="hs-identifier hs-var">mb_tcs</span></a></span><span>
</span><span id="line-1163"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; [RoughMatchTc]
-&gt; Name
-&gt; CoreBndr
-&gt; OverlapFlag
-&gt; IsOrphan
-&gt; ClsInst
</span><a href="GHC.Core.InstEnv.html#mkImportedInstance"><span class="hs-identifier hs-var">mkImportedInstance</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320926"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[RoughMatchTc]
</span><a href="#local-6989586621681320918"><span class="hs-identifier hs-var">mb_tcs'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320930"><span class="hs-identifier hs-var">dfun_name</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320921"><span class="hs-identifier hs-var">dfun</span></a></span><span> </span><span class="annot"><span class="annottext">OverlapFlag
</span><a href="#local-6989586621681320928"><span class="hs-identifier hs-var">oflag</span></a></span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><a href="#local-6989586621681320922"><span class="hs-identifier hs-var">orph</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier hs-type">tcIfaceFamInst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamInst"><span class="hs-identifier hs-type">IfaceFamInst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span>
</span><span id="line-1166"></span><span id="tcIfaceFamInst"><span class="annot"><span class="annottext">tcIfaceFamInst :: IfaceFamInst -&gt; IfL FamInst
</span><a href="GHC.IfaceToCore.html#tcIfaceFamInst"><span class="hs-identifier hs-var hs-var">tcIfaceFamInst</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamInst"><span class="hs-identifier hs-type">IfaceFamInst</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ifFamInstFam :: IfaceFamInst -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifFamInstFam"><span class="hs-identifier hs-var">ifFamInstFam</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320914"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320914"><span class="hs-identifier hs-var">fam</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifFamInstTys :: IfaceFamInst -&gt; [Maybe IfaceTyCon]
</span><a href="GHC.Iface.Syntax.html#ifFamInstTys"><span class="hs-identifier hs-var">ifFamInstTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320912"><span class="annot"><span class="annottext">[Maybe IfaceTyCon]
</span><a href="#local-6989586621681320912"><span class="hs-identifier hs-var">mb_tcs</span></a></span></span><span>
</span><span id="line-1167"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifFamInstAxiom :: IfaceFamInst -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifFamInstAxiom"><span class="hs-identifier hs-var">ifFamInstAxiom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320910"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320910"><span class="hs-identifier hs-var">axiom_name</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1168"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320909"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681320909"><span class="hs-identifier hs-var">axiom'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Axiom&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320910"><span class="hs-identifier hs-var">axiom_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1169"></span><span>                     </span><span class="annot"><span class="annottext">Name -&gt; IfL (CoAxiom Branched)
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320910"><span class="hs-identifier hs-var">axiom_name</span></a></span><span>
</span><span id="line-1170"></span><span>             </span><span class="hs-comment">-- will panic if branched, but that's OK</span><span>
</span><span id="line-1171"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320908"><span class="annot"><span class="annottext">axiom'' :: CoAxiom Unbranched
</span><a href="#local-6989586621681320908"><span class="hs-identifier hs-var hs-var">axiom''</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; CoAxiom Unbranched
</span><a href="GHC.Core.Coercion.Axiom.html#toUnbranchedAxiom"><span class="hs-identifier hs-var">toUnbranchedAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621681320909"><span class="hs-identifier hs-var">axiom'</span></a></span><span>
</span><span id="line-1172"></span><span>               </span><span id="local-6989586621681320907"><span class="annot"><span class="annottext">mb_tcs' :: [RoughMatchTc]
</span><a href="#local-6989586621681320907"><span class="hs-identifier hs-var hs-var">mb_tcs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceTyCon -&gt; RoughMatchTc
</span><a href="GHC.IfaceToCore.html#tcRoughTyCon"><span class="hs-identifier hs-var">tcRoughTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe IfaceTyCon]
</span><a href="#local-6989586621681320912"><span class="hs-identifier hs-var">mb_tcs</span></a></span><span>
</span><span id="line-1173"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [RoughMatchTc] -&gt; CoAxiom Unbranched -&gt; FamInst
</span><a href="GHC.Core.FamInstEnv.html#mkImportedFamInst"><span class="hs-identifier hs-var">mkImportedFamInst</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320914"><span class="hs-identifier hs-var">fam</span></a></span><span> </span><span class="annot"><span class="annottext">[RoughMatchTc]
</span><a href="#local-6989586621681320907"><span class="hs-identifier hs-var">mb_tcs'</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621681320908"><span class="hs-identifier hs-var">axiom''</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1174"></span><span>
</span><span id="line-1175"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Rules
*                                                                      *
************************************************************************

We move a IfaceRule from eps_rules to eps_rule_base when all its LHS free vars
are in the type environment.  However, remember that typechecking a Rule may
(as a side effect) augment the type envt, and so we may need to iterate the process.
-}</span><span>
</span><span id="line-1186"></span><span>
</span><span id="line-1187"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier hs-type">tcIfaceRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>            </span><span class="hs-comment">-- True &lt;=&gt; ignore rules</span><span>
</span><span id="line-1188"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceRule"><span class="hs-identifier hs-type">IfaceRule</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1189"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1190"></span><span id="tcIfaceRules"><span class="annot"><span class="annottext">tcIfaceRules :: Bool -&gt; [IfaceRule] -&gt; IfL [CoreRule]
</span><a href="GHC.IfaceToCore.html#tcIfaceRules"><span class="hs-identifier hs-var hs-var">tcIfaceRules</span></a></span></span><span> </span><span id="local-6989586621681320905"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320905"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span id="local-6989586621681320904"><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621681320904"><span class="hs-identifier hs-var">if_rules</span></a></span></span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320905"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1192"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceRule -&gt; IfL CoreRule
</span><a href="GHC.IfaceToCore.html#tcIfaceRule"><span class="hs-identifier hs-var">tcIfaceRule</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621681320904"><span class="hs-identifier hs-var">if_rules</span></a></span><span>
</span><span id="line-1193"></span><span>
</span><span id="line-1194"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceRule"><span class="hs-identifier hs-type">tcIfaceRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceRule"><span class="hs-identifier hs-type">IfaceRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span>
</span><span id="line-1195"></span><span id="tcIfaceRule"><span class="annot"><span class="annottext">tcIfaceRule :: IfaceRule -&gt; IfL CoreRule
</span><a href="GHC.IfaceToCore.html#tcIfaceRule"><span class="hs-identifier hs-var hs-var">tcIfaceRule</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceRule"><span class="hs-identifier hs-type">IfaceRule</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ifRuleName :: IfaceRule -&gt; FastString
</span><a href="GHC.Iface.Syntax.html#ifRuleName"><span class="hs-identifier hs-var">ifRuleName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320900"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320900"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifActivation :: IfaceRule -&gt; Activation
</span><a href="GHC.Iface.Syntax.html#ifActivation"><span class="hs-identifier hs-var">ifActivation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320898"><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621681320898"><span class="hs-identifier hs-var">act</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifRuleBndrs :: IfaceRule -&gt; [IfaceBndr]
</span><a href="GHC.Iface.Syntax.html#ifRuleBndrs"><span class="hs-identifier hs-var">ifRuleBndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320896"><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681320896"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1196"></span><span>                        </span><span class="annot"><span class="annottext">ifRuleHead :: IfaceRule -&gt; Name
</span><a href="GHC.Iface.Syntax.html#ifRuleHead"><span class="hs-identifier hs-var">ifRuleHead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320894"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320894"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifRuleArgs :: IfaceRule -&gt; [IfaceExpr]
</span><a href="GHC.Iface.Syntax.html#ifRuleArgs"><span class="hs-identifier hs-var">ifRuleArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320892"><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320892"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifRuleRhs :: IfaceRule -&gt; IfaceExpr
</span><a href="GHC.Iface.Syntax.html#ifRuleRhs"><span class="hs-identifier hs-var">ifRuleRhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320890"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320890"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1197"></span><span>                        </span><span class="annot"><span class="annottext">ifRuleAuto :: IfaceRule -&gt; Bool
</span><a href="GHC.Iface.Syntax.html#ifRuleAuto"><span class="hs-identifier hs-var">ifRuleAuto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320888"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320888"><span class="hs-identifier hs-var">auto</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ifRuleOrph :: IfaceRule -&gt; IsOrphan
</span><a href="GHC.Iface.Syntax.html#ifRuleOrph"><span class="hs-identifier hs-var">ifRuleOrph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681320886"><span class="annot"><span class="annottext">IsOrphan
</span><a href="#local-6989586621681320886"><span class="hs-identifier hs-var">orph</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621681320885"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320885"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320884"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320884"><span class="hs-identifier hs-var">args'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320883"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320883"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1199"></span><span>                </span><span class="hs-comment">-- Typecheck the payload lazily, in the hope it'll never be looked at</span><span>
</span><span id="line-1200"></span><span>                </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SDoc
</span><a href="GHC.Types.Basic.html#pprRuleName"><span class="hs-identifier hs-var">pprRuleName</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320900"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1201"></span><span>                </span><span class="annot"><span class="annottext">forall a. [IfaceBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681320896"><span class="hs-identifier hs-var">bndrs</span></a></span><span>                      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320881"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320881"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1202"></span><span>                </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320880"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320880"><span class="hs-identifier hs-var">args'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320892"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1203"></span><span>                   </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320879"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320879"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320890"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1204"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl.
GeneralFlag -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#whenGOptM"><span class="hs-identifier hs-var">whenGOptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoCoreLinting"><span class="hs-identifier hs-var">Opt_DoCoreLinting</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1205"></span><span>                      </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320876"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320876"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1206"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfGblEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320874"><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320874"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl (gbl, lcl)
</span><a href="GHC.Tc.Utils.Monad.html#getEnvs"><span class="hs-identifier hs-var">getEnvs</span></a></span><span>
</span><span id="line-1207"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681320872"><span class="hs-identifier hs-type">in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1208"></span><span>                            </span><span id="local-6989586621681320872"><span class="annot"><span class="annottext">in_scope :: [CoreBndr]
</span><a href="#local-6989586621681320872"><span class="hs-identifier hs-var hs-var">in_scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall key elt. UniqFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.FM.html#nonDetEltsUFM"><span class="hs-identifier hs-var">nonDetEltsUFM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv -&gt; FastStringEnv CoreBndr
</span><a href="GHC.Tc.Types.html#if_tv_env"><span class="hs-identifier hs-var">if_tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320874"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1209"></span><span>                                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall key elt. UniqFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.FM.html#nonDetEltsUFM"><span class="hs-identifier hs-var">nonDetEltsUFM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv -&gt; FastStringEnv CoreBndr
</span><a href="GHC.Tc.Types.html#if_id_env"><span class="hs-identifier hs-var">if_id_env</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320874"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1210"></span><span>                                        </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320881"><span class="hs-identifier hs-var">bndrs'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-1211"></span><span>                                        </span><span class="annot"><span class="annottext">[CoreExpr] -&gt; [CoreBndr]
</span><a href="GHC.Core.FVs.html#exprsFreeIdsList"><span class="hs-identifier hs-var">exprsFreeIdsList</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320880"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; [CoreBndr] -&gt; CoreExpr -&gt; Maybe (Bag SDoc)
</span><a href="GHC.Core.Lint.html#lintExpr"><span class="hs-identifier hs-var">lintExpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320876"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320872"><span class="hs-identifier hs-var">in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320879"><span class="hs-identifier hs-var">rhs'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1213"></span><span>                          </span><span class="annot"><span class="annottext">Maybe (Bag SDoc)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1214"></span><span>                          </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320865"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681320865"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1215"></span><span>                            </span><span id="local-6989586621681320864"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681320864"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasLogger m =&gt; m Logger
</span><a href="GHC.Utils.Logger.html#getLogger"><span class="hs-identifier hs-var">getLogger</span></a></span><span>
</span><span id="line-1216"></span><span>                            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Bool -&gt; SDoc -&gt; SDoc -&gt; WarnsAndErrs -&gt; IO ()
</span><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-var">displayLintResults</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681320864"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320876"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320860"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1217"></span><span>                                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. OutputableBndr b =&gt; Expr b -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreExpr"><span class="hs-identifier hs-var">pprCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320879"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1218"></span><span>                                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681320865"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1219"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320881"><span class="hs-identifier hs-var">bndrs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320880"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320879"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1220"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320857"><span class="annot"><span class="annottext">mb_tcs :: [Maybe Name]
</span><a href="#local-6989586621681320857"><span class="hs-identifier hs-var hs-var">mb_tcs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; Maybe Name
</span><a href="#local-6989586621681320856"><span class="hs-identifier hs-var">ifTopFreeName</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320892"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1221"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320855"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320855"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfL Module
</span><a href="GHC.Tc.Utils.Monad.html#getIfModule"><span class="hs-identifier hs-var">getIfModule</span></a></span><span>
</span><span id="line-1222"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ru_name :: FastString
</span><a href="GHC.Core.html#ru_name"><span class="hs-identifier hs-var">ru_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320900"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ru_fn :: Name
</span><a href="GHC.Core.html#ru_fn"><span class="hs-identifier hs-var">ru_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320894"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ru_act :: Activation
</span><a href="GHC.Core.html#ru_act"><span class="hs-identifier hs-var">ru_act</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621681320898"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1223"></span><span>                          </span><span class="annot"><span class="annottext">ru_bndrs :: [CoreBndr]
</span><a href="GHC.Core.html#ru_bndrs"><span class="hs-identifier hs-var">ru_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320885"><span class="hs-identifier hs-var">bndrs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ru_args :: [CoreExpr]
</span><a href="GHC.Core.html#ru_args"><span class="hs-identifier hs-var">ru_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320884"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1224"></span><span>                          </span><span class="annot"><span class="annottext">ru_rhs :: CoreExpr
</span><a href="GHC.Core.html#ru_rhs"><span class="hs-identifier hs-var">ru_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; CoreExpr
</span><a href="GHC.Core.Opt.OccurAnal.html#occurAnalyseExpr"><span class="hs-identifier hs-var">occurAnalyseExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320883"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1225"></span><span>                          </span><span class="annot"><span class="annottext">ru_rough :: [Maybe Name]
</span><a href="GHC.Core.html#ru_rough"><span class="hs-identifier hs-var">ru_rough</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe Name]
</span><a href="#local-6989586621681320857"><span class="hs-identifier hs-var">mb_tcs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1226"></span><span>                          </span><span class="annot"><span class="annottext">ru_origin :: Module
</span><a href="GHC.Core.html#ru_origin"><span class="hs-identifier hs-var">ru_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320855"><span class="hs-identifier hs-var">this_mod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1227"></span><span>                          </span><span class="annot"><span class="annottext">ru_orphan :: IsOrphan
</span><a href="GHC.Core.html#ru_orphan"><span class="hs-identifier hs-var">ru_orphan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><a href="#local-6989586621681320886"><span class="hs-identifier hs-var">orph</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1228"></span><span>                          </span><span class="annot"><span class="annottext">ru_auto :: Bool
</span><a href="GHC.Core.html#ru_auto"><span class="hs-identifier hs-var">ru_auto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320888"><span class="hs-identifier hs-var">auto</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1229"></span><span>                          </span><span class="annot"><span class="annottext">ru_local :: Bool
</span><a href="GHC.Core.html#ru_local"><span class="hs-identifier hs-var">ru_local</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-comment">-- An imported RULE is never for a local Id</span><span>
</span><span id="line-1230"></span><span>                                                </span><span class="hs-comment">-- or, even if it is (module loop, perhaps)</span><span>
</span><span id="line-1231"></span><span>                                                </span><span class="hs-comment">-- we'll just leave it in the non-local set</span><span>
</span><span id="line-1232"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1233"></span><span>        </span><span class="hs-comment">-- This function *must* mirror exactly what Rules.roughTopNames does</span><span>
</span><span id="line-1234"></span><span>        </span><span class="hs-comment">-- We could have stored the ru_rough field in the iface file</span><span>
</span><span id="line-1235"></span><span>        </span><span class="hs-comment">-- but that would be redundant, I think.</span><span>
</span><span id="line-1236"></span><span>        </span><span class="hs-comment">-- The only wrinkle is that we must not be deceived by</span><span>
</span><span id="line-1237"></span><span>        </span><span class="hs-comment">-- type synonyms at the top of a type arg.  Since</span><span>
</span><span id="line-1238"></span><span>        </span><span class="hs-comment">-- we can't tell at this point, we are careful not</span><span>
</span><span id="line-1239"></span><span>        </span><span class="hs-comment">-- to write them out in coreRuleToIfaceRule</span><span>
</span><span id="line-1240"></span><span>    </span><span class="annot"><a href="#local-6989586621681320856"><span class="hs-identifier hs-type">ifTopFreeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1241"></span><span>    </span><span id="local-6989586621681320856"><span class="annot"><span class="annottext">ifTopFreeName :: IfaceExpr -&gt; Maybe Name
</span><a href="#local-6989586621681320856"><span class="hs-identifier hs-var hs-var">ifTopFreeName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyConApp"><span class="hs-identifier hs-type">IfaceTyConApp</span></a></span><span> </span><span id="local-6989586621681320840"><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320840"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceTyCon -&gt; Name
</span><a href="GHC.Iface.Type.html#ifaceTyConName"><span class="hs-identifier hs-var">ifaceTyConName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320840"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>    </span><span class="annot"><a href="#local-6989586621681320856"><span class="hs-identifier hs-var">ifTopFreeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTupleTy"><span class="hs-identifier hs-type">IfaceTupleTy</span></a></span><span> </span><span id="local-6989586621681320838"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320838"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681320837"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320837"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TupleSort -&gt; Arity -&gt; Name
</span><a href="GHC.Builtin.Types.html#tupleTyConName"><span class="hs-identifier hs-var">tupleTyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320838"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfaceContext
</span><a href="GHC.Iface.Type.html#appArgsIfaceTypes"><span class="hs-identifier hs-var">appArgsIfaceTypes</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320837"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1243"></span><span>    </span><span class="annot"><a href="#local-6989586621681320856"><span class="hs-identifier hs-var">ifTopFreeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceApp"><span class="hs-identifier hs-type">IfaceApp</span></a></span><span> </span><span id="local-6989586621681320832"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320832"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; Maybe Name
</span><a href="#local-6989586621681320856"><span class="hs-identifier hs-var">ifTopFreeName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320832"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1244"></span><span>    </span><span class="annot"><a href="#local-6989586621681320856"><span class="hs-identifier hs-var">ifTopFreeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceExt"><span class="hs-identifier hs-type">IfaceExt</span></a></span><span> </span><span id="local-6989586621681320830"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320830"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320830"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1245"></span><span>    </span><span class="annot"><a href="#local-6989586621681320856"><span class="hs-identifier hs-var">ifTopFreeName</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><span class="hs-identifier">_</span></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1246"></span><span>
</span><span id="line-1247"></span><span>    </span><span id="local-6989586621681320860"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681320860"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unfolding of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320900"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Annotations
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier hs-type">tcIfaceAnnotations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1258"></span><span id="tcIfaceAnnotations"><span class="annot"><span class="annottext">tcIfaceAnnotations :: [IfaceAnnotation] -&gt; IfL [Annotation]
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotations"><span class="hs-identifier hs-var hs-var">tcIfaceAnnotations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAnnotation -&gt; IfL Annotation
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotation"><span class="hs-identifier hs-var">tcIfaceAnnotation</span></a></span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAnnotation"><span class="hs-identifier hs-type">tcIfaceAnnotation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span>
</span><span id="line-1261"></span><span id="tcIfaceAnnotation"><span class="annot"><span class="annottext">tcIfaceAnnotation :: IfaceAnnotation -&gt; IfL Annotation
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnotation"><span class="hs-identifier hs-var hs-var">tcIfaceAnnotation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a></span><span> </span><span id="local-6989586621681320827"><span class="annot"><span class="annottext">IfaceAnnTarget
</span><a href="#local-6989586621681320827"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621681320826"><span class="annot"><span class="annottext">AnnPayload
</span><a href="#local-6989586621681320826"><span class="hs-identifier hs-var">serialized</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1262"></span><span>    </span><span id="local-6989586621681320825"><span class="annot"><span class="annottext">AnnTarget Name
</span><a href="#local-6989586621681320825"><span class="hs-identifier hs-var">target'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceAnnTarget -&gt; IfL (AnnTarget Name)
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnTarget"><span class="hs-identifier hs-var">tcIfaceAnnTarget</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAnnTarget
</span><a href="#local-6989586621681320827"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1263"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1264"></span><span>        </span><span class="annot"><span class="annottext">ann_target :: AnnTarget Name
</span><a href="GHC.Types.Annotations.html#ann_target"><span class="hs-identifier hs-var">ann_target</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnTarget Name
</span><a href="#local-6989586621681320825"><span class="hs-identifier hs-var">target'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1265"></span><span>        </span><span class="annot"><span class="annottext">ann_value :: AnnPayload
</span><a href="GHC.Types.Annotations.html#ann_value"><span class="hs-identifier hs-var">ann_value</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnPayload
</span><a href="#local-6989586621681320826"><span class="hs-identifier hs-var">serialized</span></a></span><span>
</span><span id="line-1266"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1267"></span><span>
</span><span id="line-1268"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAnnTarget"><span class="hs-identifier hs-type">tcIfaceAnnTarget</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnTarget"><span class="hs-identifier hs-type">IfaceAnnTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Annotations.html#AnnTarget"><span class="hs-identifier hs-type">AnnTarget</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span id="tcIfaceAnnTarget"><span class="annot"><span class="annottext">tcIfaceAnnTarget :: IfaceAnnTarget -&gt; IfL (AnnTarget Name)
</span><a href="GHC.IfaceToCore.html#tcIfaceAnnTarget"><span class="hs-identifier hs-var hs-var">tcIfaceAnnTarget</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Annotations.html#NamedTarget"><span class="hs-identifier hs-type">NamedTarget</span></a></span><span> </span><span id="local-6989586621681320819"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681320819"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1270"></span><span>    </span><span class="annot"><span class="annottext">forall name. name -&gt; AnnTarget name
</span><a href="GHC.Types.Annotations.html#NamedTarget"><span class="hs-identifier hs-var">NamedTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#lookupIfaceTop"><span class="hs-identifier hs-var">lookupIfaceTop</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681320819"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1271"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAnnTarget"><span class="hs-identifier hs-var">tcIfaceAnnTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Annotations.html#ModuleTarget"><span class="hs-identifier hs-type">ModuleTarget</span></a></span><span> </span><span id="local-6989586621681320817"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320817"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1272"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. Module -&gt; AnnTarget name
</span><a href="GHC.Types.Annotations.html#ModuleTarget"><span class="hs-identifier hs-var">ModuleTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320817"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1273"></span><span>
</span><span id="line-1274"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Complete Match Pragmas
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1281"></span><span>
</span><span id="line-1282"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier hs-type">tcIfaceCompleteMatches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCompleteMatch"><span class="hs-identifier hs-type">IfaceCompleteMatch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1283"></span><span id="tcIfaceCompleteMatches"><span class="annot"><span class="annottext">tcIfaceCompleteMatches :: [IfaceCompleteMatch] -&gt; IfL [CompleteMatch]
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatches"><span class="hs-identifier hs-var hs-var">tcIfaceCompleteMatches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCompleteMatch -&gt; IfL CompleteMatch
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatch"><span class="hs-identifier hs-var">tcIfaceCompleteMatch</span></a></span><span>
</span><span id="line-1284"></span><span>
</span><span id="line-1285"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatch"><span class="hs-identifier hs-type">tcIfaceCompleteMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCompleteMatch"><span class="hs-identifier hs-type">IfaceCompleteMatch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span>
</span><span id="line-1286"></span><span id="tcIfaceCompleteMatch"><span class="annot"><span class="annottext">tcIfaceCompleteMatch :: IfaceCompleteMatch -&gt; IfL CompleteMatch
</span><a href="GHC.IfaceToCore.html#tcIfaceCompleteMatch"><span class="hs-identifier hs-var hs-var">tcIfaceCompleteMatch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCompleteMatch"><span class="hs-identifier hs-type">IfaceCompleteMatch</span></a></span><span> </span><span id="local-6989586621681320814"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681320814"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span id="local-6989586621681320813"><span class="annot"><span class="annottext">Maybe IfaceTyCon
</span><a href="#local-6989586621681320813"><span class="hs-identifier hs-var">mtc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#forkM"><span class="hs-identifier hs-var">forkM</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320812"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- See Note [Positioning of forkM]</span><span>
</span><span id="line-1287"></span><span>  </span><span id="local-6989586621681320811"><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681320811"><span class="hs-identifier hs-var">conlikes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; [a] -&gt; UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#mkUniqDSet"><span class="hs-identifier hs-var">mkUniqDSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL ConLike
</span><a href="GHC.IfaceToCore.html#tcIfaceConLike"><span class="hs-identifier hs-var">tcIfaceConLike</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681320814"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1288"></span><span>  </span><span id="local-6989586621681320809"><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681320809"><span class="hs-identifier hs-var">mtc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceTyCon
</span><a href="#local-6989586621681320813"><span class="hs-identifier hs-var">mtc</span></a></span><span>
</span><span id="line-1289"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqDSet ConLike -&gt; Maybe TyCon -&gt; CompleteMatch
</span><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-var">CompleteMatch</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ConLike
</span><a href="#local-6989586621681320811"><span class="hs-identifier hs-var">conlikes</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681320809"><span class="hs-identifier hs-var">mtc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1290"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1291"></span><span>    </span><span id="local-6989586621681320812"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681320812"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;COMPLETE sig&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681320814"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span class="hs-comment">{- Note [Positioning of forkM]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We need to be lazy when type checking the interface, since these functions are
called when the interface itself is being loaded, which means it is not in the
PIT yet. If we are not lazy enough, in certain cases we might recursively try to
load the same interface in an infinite loop.

For this reason, the forkM should be around as much of the computation as
possible.
-}</span><span>
</span><span id="line-1303"></span><span>
</span><span id="line-1304"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                        Types
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1311"></span><span>
</span><span id="line-1312"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-type">tcIfaceType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1313"></span><span id="tcIfaceType"><span class="annot"><span class="annottext">tcIfaceType :: IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var hs-var">tcIfaceType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1314"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1315"></span><span>    </span><span id="local-6989586621681320807"><span class="annot"><span class="annottext">go :: IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyVar"><span class="hs-identifier hs-type">IfaceTyVar</span></a></span><span> </span><span id="local-6989586621681320781"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320781"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-var">TyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceTyVar"><span class="hs-identifier hs-var">tcIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320781"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1316"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceFreeTyVar"><span class="hs-identifier hs-type">IfaceFreeTyVar</span></a></span><span> </span><span id="local-6989586621681320778"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320778"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceType:IfaceFreeTyVar&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320778"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceLitTy"><span class="hs-identifier hs-type">IfaceLitTy</span></a></span><span> </span><span id="local-6989586621681320776"><span class="annot"><span class="annottext">IfaceTyLit
</span><a href="#local-6989586621681320776"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyLit -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-var">LitTy</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyLit -&gt; IfL TyLit
</span><a href="GHC.IfaceToCore.html#tcIfaceTyLit"><span class="hs-identifier hs-var">tcIfaceTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyLit
</span><a href="#local-6989586621681320776"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1318"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceFunTy"><span class="hs-identifier hs-type">IfaceFunTy</span></a></span><span> </span><span id="local-6989586621681320772"><span class="annot"><span class="annottext">AnonArgFlag
</span><a href="#local-6989586621681320772"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621681320771"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320771"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681320770"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320770"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681320769"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320769"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnonArgFlag -&gt; Type -&gt; Type -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-var">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">AnonArgFlag
</span><a href="#local-6989586621681320772"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320771"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320770"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320769"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1319"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTupleTy"><span class="hs-identifier hs-type">IfaceTupleTy</span></a></span><span> </span><span id="local-6989586621681320767"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320767"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681320766"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621681320766"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681320765"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320765"><span class="hs-identifier hs-var">tks</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TupleSort -&gt; PromotionFlag -&gt; IfaceAppArgs -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceTupleTy"><span class="hs-identifier hs-var">tcIfaceTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320767"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621681320766"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320765"><span class="hs-identifier hs-var">tks</span></a></span><span>
</span><span id="line-1320"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceAppTy"><span class="hs-identifier hs-type">IfaceAppTy</span></a></span><span> </span><span id="local-6989586621681320762"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320762"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681320761"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320761"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320760"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320760"><span class="hs-identifier hs-var">t'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320762"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1322"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320759"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320759"><span class="hs-identifier hs-var">ts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfaceContext
</span><a href="GHC.Iface.Type.html#appArgsIfaceTypes"><span class="hs-identifier hs-var">appArgsIfaceTypes</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320761"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-var">AppTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320760"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320759"><span class="hs-identifier hs-var">ts'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1324"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyConApp"><span class="hs-identifier hs-type">IfaceTyConApp</span></a></span><span> </span><span id="local-6989586621681320757"><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320757"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621681320756"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320756"><span class="hs-identifier hs-var">tks</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320755"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320755"><span class="hs-identifier hs-var">tc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceTyCon -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320757"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1326"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320754"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320754"><span class="hs-identifier hs-var">tks'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfaceContext
</span><a href="GHC.Iface.Type.html#appArgsIfaceTypes"><span class="hs-identifier hs-var">appArgsIfaceTypes</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320756"><span class="hs-identifier hs-var">tks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1327"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; ThetaType -&gt; Type
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320755"><span class="hs-identifier hs-var">tc'</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320754"><span class="hs-identifier hs-var">tks'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1328"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceForAllTy"><span class="hs-identifier hs-type">IfaceForAllTy</span></a></span><span> </span><span id="local-6989586621681320751"><span class="annot"><span class="annottext">IfaceForAllBndr
</span><a href="#local-6989586621681320751"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span id="local-6989586621681320750"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320750"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1329"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall vis a.
VarBndr IfaceBndr vis -&gt; (CoreBndr -&gt; vis -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndr"><span class="hs-identifier hs-var">bindIfaceForAllBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceForAllBndr
</span><a href="#local-6989586621681320751"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320748"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320748"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span id="local-6989586621681320747"><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681320747"><span class="hs-identifier hs-var">vis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1330"></span><span>        </span><span class="annot"><span class="annottext">TyCoVarBinder -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320748"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681320747"><span class="hs-identifier hs-var">vis</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320750"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1331"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceCastTy"><span class="hs-identifier hs-type">IfaceCastTy</span></a></span><span> </span><span id="local-6989586621681320744"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320744"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681320743"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320743"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Coercion -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-var">CastTy</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320744"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320743"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1332"></span><span>    </span><span class="annot"><a href="#local-6989586621681320807"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceCoercionTy"><span class="hs-identifier hs-type">IfaceCoercionTy</span></a></span><span> </span><span id="local-6989586621681320740"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320740"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-var">CoercionTy</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320740"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1333"></span><span>
</span><span id="line-1334"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTupleTy"><span class="hs-identifier hs-type">tcIfaceTupleTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceAppArgs"><span class="hs-identifier hs-type">IfaceAppArgs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1335"></span><span id="tcIfaceTupleTy"><span class="annot"><span class="annottext">tcIfaceTupleTy :: TupleSort -&gt; PromotionFlag -&gt; IfaceAppArgs -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceTupleTy"><span class="hs-identifier hs-var hs-var">tcIfaceTupleTy</span></a></span></span><span> </span><span id="local-6989586621681320738"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320738"><span class="hs-identifier hs-var">sort</span></a></span></span><span> </span><span id="local-6989586621681320737"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621681320737"><span class="hs-identifier hs-var">is_promoted</span></a></span></span><span> </span><span id="local-6989586621681320736"><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320736"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1336"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320735"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320735"><span class="hs-identifier hs-var">args'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceAppArgs"><span class="hs-identifier hs-var">tcIfaceAppArgs</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs
</span><a href="#local-6989586621681320736"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1337"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320734"><span class="annot"><span class="annottext">arity :: Arity
</span><a href="#local-6989586621681320734"><span class="hs-identifier hs-var hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320735"><span class="hs-identifier hs-var">args'</span></a></span><span>
</span><span id="line-1338"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320733"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320733"><span class="hs-identifier hs-var">base_tc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TupleSort -&gt; Arity -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcTupleTyCon"><span class="hs-identifier hs-var">tcTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320738"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320734"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1339"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621681320737"><span class="hs-identifier hs-var">is_promoted</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1340"></span><span>          </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="GHC.Types.Basic.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span>
</span><span id="line-1341"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; ThetaType -&gt; Type
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320733"><span class="hs-identifier hs-var">base_tc</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320735"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1342"></span><span>
</span><span id="line-1343"></span><span>          </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="GHC.Types.Basic.html#IsPromoted"><span class="hs-identifier hs-var">IsPromoted</span></a></span><span>
</span><span id="line-1344"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320729"><span class="annot"><span class="annottext">tc :: TyCon
</span><a href="#local-6989586621681320729"><span class="hs-identifier hs-var hs-var">tc</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#promoteDataCon"><span class="hs-identifier hs-var">promoteDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; DataCon
</span><a href="GHC.Core.TyCon.html#tyConSingleDataCon"><span class="hs-identifier hs-var">tyConSingleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320733"><span class="hs-identifier hs-var">base_tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>                        </span><span id="local-6989586621681320726"><span class="annot"><span class="annottext">kind_args :: ThetaType
</span><a href="#local-6989586621681320726"><span class="hs-identifier hs-var hs-var">kind_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320735"><span class="hs-identifier hs-var">args'</span></a></span><span>
</span><span id="line-1346"></span><span>                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; ThetaType -&gt; Type
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320729"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320726"><span class="hs-identifier hs-var">kind_args</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320735"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1347"></span><span>
</span><span id="line-1348"></span><span class="hs-comment">-- See Note [Unboxed tuple RuntimeRep vars] in GHC.Core.TyCon</span><span>
</span><span id="line-1349"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcTupleTyCon"><span class="hs-identifier hs-type">tcTupleTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>    </span><span class="hs-comment">-- True &lt;=&gt; typechecking a *type* (vs. an expr)</span><span>
</span><span id="line-1350"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TupleSort"><span class="hs-identifier hs-type">TupleSort</span></a></span><span>
</span><span id="line-1351"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>   </span><span class="hs-comment">-- the number of args. *not* the tuple arity.</span><span>
</span><span id="line-1352"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1353"></span><span id="tcTupleTyCon"><span class="annot"><span class="annottext">tcTupleTyCon :: Bool -&gt; TupleSort -&gt; Arity -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcTupleTyCon"><span class="hs-identifier hs-var hs-var">tcTupleTyCon</span></a></span></span><span> </span><span id="local-6989586621681320724"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320724"><span class="hs-identifier hs-var">in_type</span></a></span></span><span> </span><span id="local-6989586621681320723"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320723"><span class="hs-identifier hs-var">sort</span></a></span></span><span> </span><span id="local-6989586621681320722"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320722"><span class="hs-identifier hs-var">arity</span></a></span></span><span>
</span><span id="line-1354"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320723"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1355"></span><span>      </span><span class="annot"><span class="annottext">TupleSort
</span><a href="GHC.Types.Basic.html#ConstraintTuple"><span class="hs-identifier hs-var">ConstraintTuple</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; TyCon
</span><a href="GHC.Builtin.Types.html#cTupleTyCon"><span class="hs-identifier hs-var">cTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320722"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>      </span><span class="annot"><span class="annottext">TupleSort
</span><a href="GHC.Types.Basic.html#BoxedTuple"><span class="hs-identifier hs-var">BoxedTuple</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Arity -&gt; TyCon
</span><a href="GHC.Builtin.Types.html#tupleTyCon"><span class="hs-identifier hs-var">tupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="GHC.Types.Basic.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320722"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1357"></span><span>      </span><span class="annot"><span class="annottext">TupleSort
</span><a href="GHC.Types.Basic.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Arity -&gt; TyCon
</span><a href="GHC.Builtin.Types.html#tupleTyCon"><span class="hs-identifier hs-var">tupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="GHC.Types.Basic.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320714"><span class="hs-identifier hs-var">arity'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1358"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681320714"><span class="annot"><span class="annottext">arity' :: Arity
</span><a href="#local-6989586621681320714"><span class="hs-identifier hs-var hs-var">arity'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320724"><span class="hs-identifier hs-var">in_type</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320722"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Real.html#div"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1359"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320722"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1360"></span><span>                      </span><span class="hs-comment">-- in expressions, we only have term args</span><span>
</span><span id="line-1361"></span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAppArgs"><span class="hs-identifier hs-type">tcIfaceAppArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceAppArgs"><span class="hs-identifier hs-type">IfaceAppArgs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1363"></span><span id="tcIfaceAppArgs"><span class="annot"><span class="annottext">tcIfaceAppArgs :: IfaceAppArgs -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceAppArgs"><span class="hs-identifier hs-var hs-var">tcIfaceAppArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceAppArgs -&gt; IfaceContext
</span><a href="GHC.Iface.Type.html#appArgsIfaceTypes"><span class="hs-identifier hs-var">appArgsIfaceTypes</span></a></span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span class="hs-comment">-----------------------------------------</span><span>
</span><span id="line-1366"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCtxt"><span class="hs-identifier hs-type">tcIfaceCtxt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceContext"><span class="hs-identifier hs-type">IfaceContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-1367"></span><span id="tcIfaceCtxt"><span class="annot"><span class="annottext">tcIfaceCtxt :: IfaceContext -&gt; IfL ThetaType
</span><a href="GHC.IfaceToCore.html#tcIfaceCtxt"><span class="hs-identifier hs-var hs-var">tcIfaceCtxt</span></a></span></span><span> </span><span id="local-6989586621681320712"><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681320712"><span class="hs-identifier hs-var">sts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceContext
</span><a href="#local-6989586621681320712"><span class="hs-identifier hs-var">sts</span></a></span><span>
</span><span id="line-1368"></span><span>
</span><span id="line-1369"></span><span class="hs-comment">-----------------------------------------</span><span>
</span><span id="line-1370"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTyLit"><span class="hs-identifier hs-type">tcIfaceTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyLit"><span class="hs-identifier hs-type">IfaceTyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span>
</span><span id="line-1371"></span><span id="tcIfaceTyLit"><span class="annot"><span class="annottext">tcIfaceTyLit :: IfaceTyLit -&gt; IfL TyLit
</span><a href="GHC.IfaceToCore.html#tcIfaceTyLit"><span class="hs-identifier hs-var hs-var">tcIfaceTyLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceNumTyLit"><span class="hs-identifier hs-type">IfaceNumTyLit</span></a></span><span> </span><span id="local-6989586621681320710"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681320710"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; TyLit
</span><a href="GHC.Core.TyCo.Rep.html#NumTyLit"><span class="hs-identifier hs-var">NumTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681320710"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1372"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTyLit"><span class="hs-identifier hs-var">tcIfaceTyLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceStrTyLit"><span class="hs-identifier hs-type">IfaceStrTyLit</span></a></span><span> </span><span id="local-6989586621681320707"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320707"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; TyLit
</span><a href="GHC.Core.TyCo.Rep.html#StrTyLit"><span class="hs-identifier hs-var">StrTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320707"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1373"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTyLit"><span class="hs-identifier hs-var">tcIfaceTyLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceCharTyLit"><span class="hs-identifier hs-type">IfaceCharTyLit</span></a></span><span> </span><span id="local-6989586621681320704"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681320704"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; TyLit
</span><a href="GHC.Core.TyCo.Rep.html#CharTyLit"><span class="hs-identifier hs-var">CharTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681320704"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1374"></span><span>
</span><span id="line-1375"></span><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
                        Coercions
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1382"></span><span>
</span><span id="line-1383"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-type">tcIfaceCo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceCoercion"><span class="hs-identifier hs-type">IfaceCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1384"></span><span id="tcIfaceCo"><span class="annot"><span class="annottext">tcIfaceCo :: IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var hs-var">tcIfaceCo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1385"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1386"></span><span>    </span><span id="local-6989586621681320652"><span class="annot"><span class="annottext">go_mco :: IfaceMCoercion -&gt; IOEnv (Env IfGblEnv IfLclEnv) MCoercion
</span><a href="#local-6989586621681320652"><span class="hs-identifier hs-var hs-var">go_mco</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceMCoercion
</span><a href="GHC.Iface.Type.html#IfaceMRefl"><span class="hs-identifier hs-var">IfaceMRefl</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">MCoercion
</span><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span><span>
</span><span id="line-1387"></span><span>    </span><span class="annot"><a href="#local-6989586621681320652"><span class="hs-identifier hs-var">go_mco</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceMCo"><span class="hs-identifier hs-type">IfaceMCo</span></a></span><span> </span><span id="local-6989586621681320648"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320648"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; MCoercion
</span><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-var">MCo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320648"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1388"></span><span>
</span><span id="line-1389"></span><span>    </span><span id="local-6989586621681320702"><span class="annot"><span class="annottext">go :: IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceReflCo"><span class="hs-identifier hs-type">IfaceReflCo</span></a></span><span> </span><span id="local-6989586621681320645"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320645"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320645"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1390"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceGReflCo"><span class="hs-identifier hs-type">IfaceGReflCo</span></a></span><span> </span><span id="local-6989586621681320642"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320642"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681320641"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320641"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681320640"><span class="annot"><span class="annottext">IfaceMCoercion
</span><a href="#local-6989586621681320640"><span class="hs-identifier hs-var">mco</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role -&gt; Type -&gt; MCoercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-var">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320642"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320641"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceMCoercion -&gt; IOEnv (Env IfGblEnv IfLclEnv) MCoercion
</span><a href="#local-6989586621681320652"><span class="hs-identifier hs-var">go_mco</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceMCoercion
</span><a href="#local-6989586621681320640"><span class="hs-identifier hs-var">mco</span></a></span><span>
</span><span id="line-1391"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceFunCo"><span class="hs-identifier hs-type">IfaceFunCo</span></a></span><span> </span><span id="local-6989586621681320637"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320637"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681320636"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320636"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681320635"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320635"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681320634"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320634"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role -&gt; Coercion -&gt; Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkFunCo"><span class="hs-identifier hs-var">mkFunCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320637"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320636"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320635"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320634"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1392"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyConAppCo"><span class="hs-identifier hs-type">IfaceTyConAppCo</span></a></span><span> </span><span id="local-6989586621681320631"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320631"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681320630"><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320630"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621681320629"><span class="annot"><span class="annottext">[IfaceCoercion]
</span><a href="#local-6989586621681320629"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role -&gt; TyCon -&gt; [Coercion] -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-var">TyConAppCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320631"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon
</span><a href="#local-6989586621681320630"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCoercion]
</span><a href="#local-6989586621681320629"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-1394"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceAppCo"><span class="hs-identifier hs-type">IfaceAppCo</span></a></span><span> </span><span id="local-6989586621681320626"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320626"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681320625"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320625"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#AppCo"><span class="hs-identifier hs-var">AppCo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320626"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320625"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1395"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceForAllCo"><span class="hs-identifier hs-type">IfaceForAllCo</span></a></span><span> </span><span id="local-6989586621681320622"><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320622"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681320621"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320621"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681320620"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320620"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320619"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320619"><span class="hs-identifier hs-var">k'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320621"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1396"></span><span>                                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320622"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320617"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320617"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1397"></span><span>                                        </span><span class="annot"><span class="annottext">CoreBndr -&gt; Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#ForAllCo"><span class="hs-identifier hs-var">ForAllCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320617"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320619"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320620"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1398"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceCoVarCo"><span class="hs-identifier hs-type">IfaceCoVarCo</span></a></span><span> </span><span id="local-6989586621681320614"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320614"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-var">CoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="#local-6989586621681320612"><span class="hs-identifier hs-var">go_var</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320614"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1399"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceAxiomInstCo"><span class="hs-identifier hs-type">IfaceAxiomInstCo</span></a></span><span> </span><span id="local-6989586621681320610"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320610"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681320609"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320609"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681320608"><span class="annot"><span class="annottext">[IfaceCoercion]
</span><a href="#local-6989586621681320608"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Arity -&gt; [Coercion] -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#AxiomInstCo"><span class="hs-identifier hs-var">AxiomInstCo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL (CoAxiom Branched)
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var">tcIfaceCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320610"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320609"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCoercion]
</span><a href="#local-6989586621681320608"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-1400"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceUnivCo"><span class="hs-identifier hs-type">IfaceUnivCo</span></a></span><span> </span><span id="local-6989586621681320605"><span class="annot"><span class="annottext">IfaceUnivCoProv
</span><a href="#local-6989586621681320605"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681320604"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320604"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681320603"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320603"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681320602"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320602"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance -&gt; Role -&gt; Type -&gt; Type -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#UnivCo"><span class="hs-identifier hs-var">UnivCo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceUnivCoProv -&gt; IfL UnivCoProvenance
</span><a href="GHC.IfaceToCore.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-var">tcIfaceUnivCoProv</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceUnivCoProv
</span><a href="#local-6989586621681320605"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681320604"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1401"></span><span>                                          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320603"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320602"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1402"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceSymCo"><span class="hs-identifier hs-type">IfaceSymCo</span></a></span><span> </span><span id="local-6989586621681320598"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320598"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#SymCo"><span class="hs-identifier hs-var">SymCo</span></a></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320598"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1403"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTransCo"><span class="hs-identifier hs-type">IfaceTransCo</span></a></span><span> </span><span id="local-6989586621681320595"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320595"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681320594"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320594"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#TransCo"><span class="hs-identifier hs-var">TransCo</span></a></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320595"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1404"></span><span>                                            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320594"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1405"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceInstCo"><span class="hs-identifier hs-type">IfaceInstCo</span></a></span><span> </span><span id="local-6989586621681320591"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320591"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681320590"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320590"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-var">InstCo</span></a></span><span>   </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320591"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1406"></span><span>                                            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320590"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1407"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceNthCo"><span class="hs-identifier hs-type">IfaceNthCo</span></a></span><span> </span><span id="local-6989586621681320587"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320587"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621681320586"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320586"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320585"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320585"><span class="hs-identifier hs-var">c'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320586"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1408"></span><span>                                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Role -&gt; Arity -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkNthCo"><span class="hs-identifier hs-var">mkNthCo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Coercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#nthCoRole"><span class="hs-identifier hs-var">nthCoRole</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320587"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320585"><span class="hs-identifier hs-var">c'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320587"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681320585"><span class="hs-identifier hs-var">c'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1409"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceLRCo"><span class="hs-identifier hs-type">IfaceLRCo</span></a></span><span> </span><span id="local-6989586621681320581"><span class="annot"><span class="annottext">LeftOrRight
</span><a href="#local-6989586621681320581"><span class="hs-identifier hs-var">lr</span></a></span></span><span> </span><span id="local-6989586621681320580"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320580"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LeftOrRight -&gt; Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#LRCo"><span class="hs-identifier hs-var">LRCo</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><a href="#local-6989586621681320581"><span class="hs-identifier hs-var">lr</span></a></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320580"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1410"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceKindCo"><span class="hs-identifier hs-type">IfaceKindCo</span></a></span><span> </span><span id="local-6989586621681320577"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320577"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#KindCo"><span class="hs-identifier hs-var">KindCo</span></a></span><span>   </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320577"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1411"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceSubCo"><span class="hs-identifier hs-type">IfaceSubCo</span></a></span><span> </span><span id="local-6989586621681320574"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320574"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#SubCo"><span class="hs-identifier hs-var">SubCo</span></a></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320574"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1412"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceAxiomRuleCo"><span class="hs-identifier hs-type">IfaceAxiomRuleCo</span></a></span><span> </span><span id="local-6989586621681320571"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320571"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span id="local-6989586621681320570"><span class="annot"><span class="annottext">[IfaceCoercion]
</span><a href="#local-6989586621681320570"><span class="hs-identifier hs-var">cos</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiomRule -&gt; [Coercion] -&gt; Coercion
</span><a href="GHC.Core.TyCo.Rep.html#AxiomRuleCo"><span class="hs-identifier hs-var">AxiomRuleCo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoAxiomRule
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiomRule"><span class="hs-identifier hs-var">tcIfaceCoAxiomRule</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320571"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-1413"></span><span>                                               </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCoercion]
</span><a href="#local-6989586621681320570"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-1414"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceFreeCoVar"><span class="hs-identifier hs-type">IfaceFreeCoVar</span></a></span><span> </span><span id="local-6989586621681320566"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320566"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceCo:IfaceFreeCoVar&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320566"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1415"></span><span>    </span><span class="annot"><a href="#local-6989586621681320702"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceHoleCo"><span class="hs-identifier hs-type">IfaceHoleCo</span></a></span><span> </span><span id="local-6989586621681320564"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320564"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceCo:IfaceHoleCo&quot;</span></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320564"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span>
</span><span id="line-1417"></span><span>    </span><span class="annot"><a href="#local-6989586621681320612"><span class="hs-identifier hs-type">go_var</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span>
</span><span id="line-1418"></span><span>    </span><span id="local-6989586621681320612"><span class="annot"><span class="annottext">go_var :: FastString -&gt; IfL CoreBndr
</span><a href="#local-6989586621681320612"><span class="hs-identifier hs-var hs-var">go_var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceLclId"><span class="hs-identifier hs-var">tcIfaceLclId</span></a></span><span>
</span><span id="line-1419"></span><span>
</span><span id="line-1420"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-type">tcIfaceUnivCoProv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceUnivCoProv"><span class="hs-identifier hs-type">IfaceUnivCoProv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCoProvenance"><span class="hs-identifier hs-type">UnivCoProvenance</span></a></span><span>
</span><span id="line-1421"></span><span id="tcIfaceUnivCoProv"><span class="annot"><span class="annottext">tcIfaceUnivCoProv :: IfaceUnivCoProv -&gt; IfL UnivCoProvenance
</span><a href="GHC.IfaceToCore.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-var hs-var">tcIfaceUnivCoProv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfacePhantomProv"><span class="hs-identifier hs-type">IfacePhantomProv</span></a></span><span> </span><span id="local-6989586621681320561"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320561"><span class="hs-identifier hs-var">kco</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; UnivCoProvenance
</span><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-var">PhantomProv</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320561"><span class="hs-identifier hs-var">kco</span></a></span><span>
</span><span id="line-1422"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-var">tcIfaceUnivCoProv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceProofIrrelProv"><span class="hs-identifier hs-type">IfaceProofIrrelProv</span></a></span><span> </span><span id="local-6989586621681320558"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320558"><span class="hs-identifier hs-var">kco</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; UnivCoProvenance
</span><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-var">ProofIrrelProv</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320558"><span class="hs-identifier hs-var">kco</span></a></span><span>
</span><span id="line-1423"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-var">tcIfaceUnivCoProv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfacePluginProv"><span class="hs-identifier hs-type">IfacePluginProv</span></a></span><span> </span><span id="local-6989586621681320555"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681320555"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UnivCoProvenance
</span><a href="GHC.Core.TyCo.Rep.html#PluginProv"><span class="hs-identifier hs-var">PluginProv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681320555"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-1424"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceUnivCoProv"><span class="hs-identifier hs-var">tcIfaceUnivCoProv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceCorePrepProv"><span class="hs-identifier hs-type">IfaceCorePrepProv</span></a></span><span> </span><span id="local-6989586621681320552"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320552"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; UnivCoProvenance
</span><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-var">CorePrepProv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320552"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1425"></span><span>
</span><span id="line-1426"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                        Core
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1433"></span><span>
</span><span id="line-1434"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-type">tcIfaceExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1435"></span><span id="tcIfaceExpr"><span class="annot"><span class="annottext">tcIfaceExpr :: IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var hs-var">tcIfaceExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceType"><span class="hs-identifier hs-type">IfaceType</span></a></span><span> </span><span id="local-6989586621681320550"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320550"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1436"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320550"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1437"></span><span>
</span><span id="line-1438"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCo"><span class="hs-identifier hs-type">IfaceCo</span></a></span><span> </span><span id="local-6989586621681320547"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320547"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Coercion -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320547"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCast"><span class="hs-identifier hs-type">IfaceCast</span></a></span><span> </span><span id="local-6989586621681320544"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320544"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681320543"><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320543"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1442"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; Coercion -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320544"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion -&gt; IfL Coercion
</span><a href="GHC.IfaceToCore.html#tcIfaceCo"><span class="hs-identifier hs-var">tcIfaceCo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceCoercion
</span><a href="#local-6989586621681320543"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1443"></span><span>
</span><span id="line-1444"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLcl"><span class="hs-identifier hs-type">IfaceLcl</span></a></span><span> </span><span id="local-6989586621681320540"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320540"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. CoreBndr -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; IfL CoreBndr
</span><a href="GHC.Iface.Env.html#tcIfaceLclId"><span class="hs-identifier hs-var">tcIfaceLclId</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320540"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1446"></span><span>
</span><span id="line-1447"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceExt"><span class="hs-identifier hs-type">IfaceExt</span></a></span><span> </span><span id="local-6989586621681320538"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320538"><span class="hs-identifier hs-var">gbl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1448"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. CoreBndr -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL CoreBndr
</span><a href="GHC.IfaceToCore.html#tcIfaceExtId"><span class="hs-identifier hs-var">tcIfaceExtId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320538"><span class="hs-identifier hs-var">gbl</span></a></span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLitRubbish"><span class="hs-identifier hs-type">IfaceLitRubbish</span></a></span><span> </span><span id="local-6989586621681320536"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320536"><span class="hs-identifier hs-var">rep</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1451"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681320535"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320535"><span class="hs-identifier hs-var">rep'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320536"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-1452"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Literal
</span><a href="GHC.Types.Literal.html#LitRubbish"><span class="hs-identifier hs-var">LitRubbish</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320535"><span class="hs-identifier hs-var">rep'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1453"></span><span>
</span><span id="line-1454"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLit"><span class="hs-identifier hs-type">IfaceLit</span></a></span><span> </span><span id="local-6989586621681320531"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320531"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1455"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681320530"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320530"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; IfL Literal
</span><a href="GHC.IfaceToCore.html#tcIfaceLit"><span class="hs-identifier hs-var">tcIfaceLit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320531"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1456"></span><span>       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320530"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>
</span><span id="line-1458"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFCall"><span class="hs-identifier hs-type">IfaceFCall</span></a></span><span> </span><span id="local-6989586621681320527"><span class="annot"><span class="annottext">ForeignCall
</span><a href="#local-6989586621681320527"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span id="local-6989586621681320526"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320526"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1459"></span><span>    </span><span id="local-6989586621681320525"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320525"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320526"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1460"></span><span>    </span><span id="local-6989586621681320524"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681320524"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl Unique
</span><a href="GHC.Tc.Utils.Monad.html#newUnique"><span class="hs-identifier hs-var">newUnique</span></a></span><span>
</span><span id="line-1461"></span><span>    </span><span id="local-6989586621681320522"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320522"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1462"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. CoreBndr -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Unique -&gt; ForeignCall -&gt; Type -&gt; CoreBndr
</span><a href="GHC.Types.Id.Make.html#mkFCallId"><span class="hs-identifier hs-var">mkFCallId</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320522"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681320524"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignCall
</span><a href="#local-6989586621681320527"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320525"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1463"></span><span>
</span><span id="line-1464"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceTuple"><span class="hs-identifier hs-type">IfaceTuple</span></a></span><span> </span><span id="local-6989586621681320519"><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320519"><span class="hs-identifier hs-var">sort</span></a></span></span><span> </span><span id="local-6989586621681320518"><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320518"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1465"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320517"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320517"><span class="hs-identifier hs-var">args'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320518"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1466"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320516"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320516"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TupleSort -&gt; Arity -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcTupleTyCon"><span class="hs-identifier hs-var">tcTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320519"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320515"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1467"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320514"><span class="annot"><span class="annottext">con_tys :: ThetaType
</span><a href="#local-6989586621681320514"><span class="hs-identifier hs-var hs-var">con_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Type
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320517"><span class="hs-identifier hs-var">args'</span></a></span><span>
</span><span id="line-1468"></span><span>             </span><span id="local-6989586621681320512"><span class="annot"><span class="annottext">some_con_args :: [CoreExpr]
</span><a href="#local-6989586621681320512"><span class="hs-identifier hs-var hs-var">some_con_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320514"><span class="hs-identifier hs-var">con_tys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320517"><span class="hs-identifier hs-var">args'</span></a></span><span>
</span><span id="line-1469"></span><span>             </span><span id="local-6989586621681320511"><span class="annot"><span class="annottext">con_args :: [CoreExpr]
</span><a href="#local-6989586621681320511"><span class="hs-identifier hs-var hs-var">con_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TupleSort
</span><a href="#local-6989586621681320519"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1470"></span><span>               </span><span class="annot"><span class="annottext">TupleSort
</span><a href="GHC.Types.Basic.html#UnboxedTuple"><span class="hs-identifier hs-var">UnboxedTuple</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#getRuntimeRep"><span class="hs-identifier hs-var">getRuntimeRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320514"><span class="hs-identifier hs-var">con_tys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320512"><span class="hs-identifier hs-var">some_con_args</span></a></span><span>
</span><span id="line-1471"></span><span>               </span><span class="annot"><span class="annottext">TupleSort
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320512"><span class="hs-identifier hs-var">some_con_args</span></a></span><span>
</span><span id="line-1472"></span><span>                        </span><span class="hs-comment">-- Put the missing type arguments back in</span><span>
</span><span id="line-1473"></span><span>             </span><span id="local-6989586621681320509"><span class="annot"><span class="annottext">con_id :: CoreBndr
</span><a href="#local-6989586621681320509"><span class="hs-identifier hs-var hs-var">con_id</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; CoreBndr
</span><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier hs-var">dataConWorkId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; DataCon
</span><a href="GHC.Core.TyCon.html#tyConSingleDataCon"><span class="hs-identifier hs-var">tyConSingleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320516"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1474"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-identifier hs-var">mkApps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. CoreBndr -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320509"><span class="hs-identifier hs-var">con_id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320511"><span class="hs-identifier hs-var">con_args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1475"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1476"></span><span>    </span><span id="local-6989586621681320515"><span class="annot"><span class="annottext">arity :: Arity
</span><a href="#local-6989586621681320515"><span class="hs-identifier hs-var hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320518"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1477"></span><span>
</span><span id="line-1478"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLam"><span class="hs-identifier hs-type">IfaceLam</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320505"><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320505"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320504"><span class="annot"><span class="annottext">IfaceOneShot
</span><a href="#local-6989586621681320504"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320503"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320503"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1479"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320505"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320502"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320502"><span class="hs-identifier hs-var">bndr'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1480"></span><span>    </span><span class="annot"><span class="annottext">forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceOneShot -&gt; CoreBndr -&gt; CoreBndr
</span><a href="#local-6989586621681320500"><span class="hs-identifier hs-var">tcIfaceOneShot</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceOneShot
</span><a href="#local-6989586621681320504"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320502"><span class="hs-identifier hs-var">bndr'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320503"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1481"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1482"></span><span>    </span><span id="local-6989586621681320500"><span class="annot"><span class="annottext">tcIfaceOneShot :: IfaceOneShot -&gt; CoreBndr -&gt; CoreBndr
</span><a href="#local-6989586621681320500"><span class="hs-identifier hs-var hs-var">tcIfaceOneShot</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceOneShot
</span><a href="GHC.Iface.Type.html#IfaceOneShot"><span class="hs-identifier hs-var">IfaceOneShot</span></a></span><span> </span><span id="local-6989586621681320498"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320498"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#setOneShotLambda"><span class="hs-identifier hs-var">setOneShotLambda</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320498"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1483"></span><span>    </span><span class="annot"><a href="#local-6989586621681320500"><span class="hs-identifier hs-var">tcIfaceOneShot</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceOneShot
</span><span class="hs-identifier">_</span></span><span>            </span><span id="local-6989586621681320496"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320496"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320496"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1484"></span><span>
</span><span id="line-1485"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceApp"><span class="hs-identifier hs-type">IfaceApp</span></a></span><span> </span><span id="local-6989586621681320495"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320495"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621681320494"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320494"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320495"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320494"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceECase"><span class="hs-identifier hs-type">IfaceECase</span></a></span><span> </span><span id="local-6989586621681320491"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320491"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681320490"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320490"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1489"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320489"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320489"><span class="hs-identifier hs-var">scrut'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320491"><span class="hs-identifier hs-var">scrut</span></a></span><span>
</span><span id="line-1490"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320488"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320488"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320490"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1491"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Type -&gt; CoreExpr
</span><a href="GHC.Core.Make.html#castBottomExpr"><span class="hs-identifier hs-var">castBottomExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320489"><span class="hs-identifier hs-var">scrut'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320488"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCase"><span class="hs-identifier hs-type">IfaceCase</span></a></span><span> </span><span id="local-6989586621681320485"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320485"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681320484"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320484"><span class="hs-identifier hs-var">case_bndr</span></a></span></span><span> </span><span id="local-6989586621681320483"><span class="annot"><span class="annottext">[IfaceAlt]
</span><a href="#local-6989586621681320483"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1494"></span><span>    </span><span id="local-6989586621681320482"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320482"><span class="hs-identifier hs-var">scrut'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320485"><span class="hs-identifier hs-var">scrut</span></a></span><span>
</span><span id="line-1495"></span><span>    </span><span id="local-6989586621681320481"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320481"><span class="hs-identifier hs-var">case_bndr_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320484"><span class="hs-identifier hs-var">case_bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1496"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-1497"></span><span>        </span><span id="local-6989586621681320480"><span class="annot"><span class="annottext">scrut_ty :: Type
</span><a href="#local-6989586621681320480"><span class="hs-identifier hs-var hs-var">scrut_ty</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Type
</span><a href="GHC.Core.Utils.html#exprType"><span class="hs-identifier hs-var">exprType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320482"><span class="hs-identifier hs-var">scrut'</span></a></span><span>
</span><span id="line-1498"></span><span>        </span><span id="local-6989586621681320479"><span class="annot"><span class="annottext">case_mult :: Type
</span><a href="#local-6989586621681320479"><span class="hs-identifier hs-var hs-var">case_mult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span>
</span><span id="line-1499"></span><span>        </span><span id="local-6989586621681320477"><span class="annot"><span class="annottext">case_bndr' :: CoreBndr
</span><a href="#local-6989586621681320477"><span class="hs-identifier hs-var hs-var">case_bndr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; Type -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320481"><span class="hs-identifier hs-var">case_bndr_name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320479"><span class="hs-identifier hs-var">case_mult</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320480"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span>
</span><span id="line-1500"></span><span>     </span><span class="hs-comment">-- &quot;OrCoVar&quot; since a coercion can be a scrutinee with -fdefer-type-errors</span><span>
</span><span id="line-1501"></span><span>     </span><span class="hs-comment">-- (e.g. see test T15695). Ticket #17291 covers fixing this problem.</span><span>
</span><span id="line-1502"></span><span>        </span><span id="local-6989586621681320475"><span class="annot"><span class="annottext">tc_app :: (TyCon, ThetaType)
</span><a href="#local-6989586621681320475"><span class="hs-identifier hs-var hs-var">tc_app</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; (TyCon, ThetaType)
</span><a href="GHC.Core.Type.html#splitTyConApp"><span class="hs-identifier hs-var">splitTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320480"><span class="hs-identifier hs-var">scrut_ty</span></a></span><span>
</span><span id="line-1503"></span><span>                </span><span class="hs-comment">-- NB: Won't always succeed (polymorphic case)</span><span>
</span><span id="line-1504"></span><span>                </span><span class="hs-comment">--     but won't be demanded in those cases</span><span>
</span><span id="line-1505"></span><span>                </span><span class="hs-comment">-- NB: not tcSplitTyConApp; we are looking at Core here</span><span>
</span><span id="line-1506"></span><span>                </span><span class="hs-comment">--     look through non-rec newtypes to find the tycon that</span><span>
</span><span id="line-1507"></span><span>                </span><span class="hs-comment">--     corresponds to the datacon in this case alternative</span><span>
</span><span id="line-1508"></span><span>
</span><span id="line-1509"></span><span>    </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320477"><span class="hs-identifier hs-var">case_bndr'</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1510"></span><span>     </span><span id="local-6989586621681320472"><span class="annot"><span class="annottext">[CoreAlt]
</span><a href="#local-6989586621681320472"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; Type -&gt; (TyCon, ThetaType) -&gt; IfaceAlt -&gt; IfL CoreAlt
</span><a href="GHC.IfaceToCore.html#tcIfaceAlt"><span class="hs-identifier hs-var">tcIfaceAlt</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320482"><span class="hs-identifier hs-var">scrut'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320479"><span class="hs-identifier hs-var">case_mult</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon, ThetaType)
</span><a href="#local-6989586621681320475"><span class="hs-identifier hs-var">tc_app</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[IfaceAlt]
</span><a href="#local-6989586621681320483"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1511"></span><span>     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Expr b -&gt; b -&gt; Type -&gt; [Alt b] -&gt; Expr b
</span><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320482"><span class="hs-identifier hs-var">scrut'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320477"><span class="hs-identifier hs-var">case_bndr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreAlt] -&gt; Type
</span><a href="GHC.Core.Utils.html#coreAltsType"><span class="hs-identifier hs-var">coreAltsType</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreAlt]
</span><a href="#local-6989586621681320472"><span class="hs-identifier hs-var">alts'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreAlt]
</span><a href="#local-6989586621681320472"><span class="hs-identifier hs-var">alts'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1512"></span><span>
</span><span id="line-1513"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLet"><span class="hs-identifier hs-type">IfaceLet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceNonRec"><span class="hs-identifier hs-type">IfaceNonRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLetBndr"><span class="hs-identifier hs-type">IfLetBndr</span></a></span><span> </span><span id="local-6989586621681320465"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320465"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621681320464"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320464"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681320463"><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320463"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621681320462"><span class="annot"><span class="annottext">IfaceJoinInfo
</span><a href="#local-6989586621681320462"><span class="hs-identifier hs-var">ji</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320461"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320461"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320460"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320460"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1514"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320459"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320459"><span class="hs-identifier hs-var">name</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320465"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1515"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320458"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320458"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320464"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1516"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320457"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320457"><span class="hs-identifier hs-var">id_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TopLevelFlag -&gt; Name -&gt; Type -&gt; IfaceIdInfo -&gt; IfL IdInfo
</span><a href="GHC.IfaceToCore.html#tcIdInfo"><span class="hs-identifier hs-var">tcIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">{- Don't ignore prags; we are inside one! -}</span><span>
</span><span id="line-1517"></span><span>                              </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320459"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320458"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320463"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1518"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320455"><span class="annot"><span class="annottext">id :: CoreBndr
</span><a href="#local-6989586621681320455"><span class="hs-identifier hs-var hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Type -&gt; Type -&gt; IdInfo -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#mkLocalIdWithInfo"><span class="hs-identifier hs-var">mkLocalIdWithInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320459"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320458"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320457"><span class="hs-identifier hs-var">id_info</span></a></span><span>
</span><span id="line-1519"></span><span>                     </span><span class="annot"><span class="annottext">CoreBndr -&gt; Maybe Arity -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-operator hs-var">`asJoinId_maybe`</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceJoinInfo -&gt; Maybe Arity
</span><a href="GHC.IfaceToCore.html#tcJoinInfo"><span class="hs-identifier hs-var">tcJoinInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceJoinInfo
</span><a href="#local-6989586621681320462"><span class="hs-identifier hs-var">ji</span></a></span><span>
</span><span id="line-1520"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320451"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320451"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320461"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1521"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320450"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320450"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320455"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320460"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320455"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320451"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320450"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1523"></span><span>
</span><span id="line-1524"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLet"><span class="hs-identifier hs-type">IfaceLet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceRec"><span class="hs-identifier hs-type">IfaceRec</span></a></span><span> </span><span id="local-6989586621681320446"><span class="annot"><span class="annottext">[(IfaceLetBndr, IfaceExpr)]
</span><a href="#local-6989586621681320446"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320445"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320445"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320444"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320444"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceLetBndr -&gt; IfL CoreBndr
</span><a href="#local-6989586621681320443"><span class="hs-identifier hs-var">tc_rec_bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(IfaceLetBndr, IfaceExpr)]
</span><a href="#local-6989586621681320446"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1526"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320444"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1527"></span><span>       </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320442"><span class="annot"><span class="annottext">[(CoreBndr, CoreExpr)]
</span><a href="#local-6989586621681320442"><span class="hs-identifier hs-var">pairs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m [c]
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a></span><span> </span><span class="annot"><span class="annottext">(IfaceLetBndr, IfaceExpr)
-&gt; CoreBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) (CoreBndr, CoreExpr)
</span><a href="#local-6989586621681320440"><span class="hs-identifier hs-var">tc_pair</span></a></span><span> </span><span class="annot"><span class="annottext">[(IfaceLetBndr, IfaceExpr)]
</span><a href="#local-6989586621681320446"><span class="hs-identifier hs-var">pairs</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320444"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-1528"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320439"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320439"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320445"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1529"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">[(CoreBndr, CoreExpr)]
</span><a href="#local-6989586621681320442"><span class="hs-identifier hs-var">pairs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320439"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1530"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1531"></span><span>   </span><span id="local-6989586621681320443"><span class="annot"><span class="annottext">tc_rec_bndr :: IfaceLetBndr -&gt; IfL CoreBndr
</span><a href="#local-6989586621681320443"><span class="hs-identifier hs-var hs-var">tc_rec_bndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLetBndr"><span class="hs-identifier hs-type">IfLetBndr</span></a></span><span> </span><span id="local-6989586621681320433"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320433"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621681320432"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320432"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681320431"><span class="annot"><span class="annottext">IfaceJoinInfo
</span><a href="#local-6989586621681320431"><span class="hs-identifier hs-var">ji</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320430"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320430"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320433"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1533"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320429"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320429"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320432"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1534"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Type -&gt; Type -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-var">mkLocalId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320430"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Core.Type.html#Many"><span class="hs-identifier hs-var">Many</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320429"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; Maybe Arity -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-operator hs-var">`asJoinId_maybe`</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceJoinInfo -&gt; Maybe Arity
</span><a href="GHC.IfaceToCore.html#tcJoinInfo"><span class="hs-identifier hs-var">tcJoinInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceJoinInfo
</span><a href="#local-6989586621681320431"><span class="hs-identifier hs-var">ji</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1535"></span><span>   </span><span id="local-6989586621681320440"><span class="annot"><span class="annottext">tc_pair :: (IfaceLetBndr, IfaceExpr)
-&gt; CoreBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) (CoreBndr, CoreExpr)
</span><a href="#local-6989586621681320440"><span class="hs-identifier hs-var hs-var">tc_pair</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLetBndr"><span class="hs-identifier hs-type">IfLetBndr</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681320424"><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320424"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceJoinInfo
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320423"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320423"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320422"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320422"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-1536"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320421"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320421"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320423"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1537"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320420"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320420"><span class="hs-identifier hs-var">id_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TopLevelFlag -&gt; Name -&gt; Type -&gt; IfaceIdInfo -&gt; IfL IdInfo
</span><a href="GHC.IfaceToCore.html#tcIdInfo"><span class="hs-identifier hs-var">tcIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">{- Don't ignore prags; we are inside one! -}</span><span>
</span><span id="line-1538"></span><span>                                </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320422"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320422"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320424"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1539"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; IdInfo -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#setIdInfo"><span class="hs-identifier hs-var">setIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320422"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320420"><span class="hs-identifier hs-var">id_info</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320421"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1540"></span><span>
</span><span id="line-1541"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceTick"><span class="hs-identifier hs-type">IfaceTick</span></a></span><span> </span><span id="local-6989586621681320416"><span class="annot"><span class="annottext">IfaceTickish
</span><a href="#local-6989586621681320416"><span class="hs-identifier hs-var">tickish</span></a></span></span><span> </span><span id="local-6989586621681320415"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320415"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1542"></span><span>    </span><span id="local-6989586621681320414"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320414"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320415"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1543"></span><span>    </span><span class="hs-comment">-- If debug flag is not set: Ignore source notes</span><span>
</span><span id="line-1544"></span><span>    </span><span id="local-6989586621681320413"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320413"><span class="hs-identifier hs-var">need_notes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#needSourceNotes"><span class="hs-identifier hs-var">needSourceNotes</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1545"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceTickish
</span><a href="#local-6989586621681320416"><span class="hs-identifier hs-var">tickish</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1546"></span><span>      </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSource"><span class="hs-identifier hs-type">IfaceSource</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320413"><span class="hs-identifier hs-var">need_notes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320414"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-1548"></span><span>      </span><span id="local-6989586621681320410"><span class="annot"><span class="annottext">IfaceTickish
</span><a href="#local-6989586621681320410"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1549"></span><span>        </span><span id="local-6989586621681320409"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681320409"><span class="hs-identifier hs-var">tickish'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall lcl. IfaceTickish -&gt; IfM lcl CoreTickish
</span><a href="GHC.IfaceToCore.html#tcIfaceTickish"><span class="hs-identifier hs-var">tcIfaceTickish</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTickish
</span><a href="#local-6989586621681320416"><span class="hs-identifier hs-var">tickish</span></a></span><span>
</span><span id="line-1550"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. CoreTickish -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621681320409"><span class="hs-identifier hs-var">tickish'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320414"><span class="hs-identifier hs-var">expr'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>
</span><span id="line-1552"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-1553"></span><span id="local-6989586621681322239"><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTickish"><span class="hs-identifier hs-type">tcIfaceTickish</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceTickish"><span class="hs-identifier hs-type">IfaceTickish</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfM"><span class="hs-identifier hs-type">IfM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322239"><span class="hs-identifier hs-type">lcl</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span></span><span>
</span><span id="line-1554"></span><span id="tcIfaceTickish"><span class="annot"><span class="annottext">tcIfaceTickish :: forall lcl. IfaceTickish -&gt; IfM lcl CoreTickish
</span><a href="GHC.IfaceToCore.html#tcIfaceTickish"><span class="hs-identifier hs-var hs-var">tcIfaceTickish</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceHpcTick"><span class="hs-identifier hs-type">IfaceHpcTick</span></a></span><span> </span><span id="local-6989586621681320402"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320402"><span class="hs-identifier hs-var">modl</span></a></span></span><span> </span><span id="local-6989586621681320401"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320401"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (pass :: TickishPass). Module -&gt; Arity -&gt; GenTickish pass
</span><a href="GHC.Types.Tickish.html#HpcTick"><span class="hs-identifier hs-var">HpcTick</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320402"><span class="hs-identifier hs-var">modl</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320401"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1555"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTickish"><span class="hs-identifier hs-var">tcIfaceTickish</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSCC"><span class="hs-identifier hs-type">IfaceSCC</span></a></span><span>  </span><span id="local-6989586621681320398"><span class="annot"><span class="annottext">CostCentre
</span><a href="#local-6989586621681320398"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span id="local-6989586621681320397"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320397"><span class="hs-identifier hs-var">tick</span></a></span></span><span> </span><span id="local-6989586621681320396"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320396"><span class="hs-identifier hs-var">push</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (pass :: TickishPass).
CostCentre -&gt; Bool -&gt; Bool -&gt; GenTickish pass
</span><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-var">ProfNote</span></a></span><span> </span><span class="annot"><span class="annottext">CostCentre
</span><a href="#local-6989586621681320398"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320397"><span class="hs-identifier hs-var">tick</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320396"><span class="hs-identifier hs-var">push</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1556"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTickish"><span class="hs-identifier hs-var">tcIfaceTickish</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceSource"><span class="hs-identifier hs-type">IfaceSource</span></a></span><span> </span><span id="local-6989586621681320394"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621681320394"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681320393"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681320393"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (pass :: TickishPass).
RealSrcSpan -&gt; String -&gt; GenTickish pass
</span><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-var">SourceNote</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621681320394"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681320393"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>
</span><span id="line-1558"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-1559"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceLit"><span class="hs-identifier hs-type">tcIfaceLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span>
</span><span id="line-1560"></span><span id="tcIfaceLit"><span class="annot"><span class="annottext">tcIfaceLit :: Literal -&gt; IfL Literal
</span><a href="GHC.IfaceToCore.html#tcIfaceLit"><span class="hs-identifier hs-var hs-var">tcIfaceLit</span></a></span></span><span> </span><span id="local-6989586621681320391"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320391"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320391"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1561"></span><span>
</span><span id="line-1562"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-1563"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAlt"><span class="hs-identifier hs-type">tcIfaceAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1564"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAlt"><span class="hs-identifier hs-type">IfaceAlt</span></a></span><span>
</span><span id="line-1565"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1566"></span><span id="tcIfaceAlt"><span class="annot"><span class="annottext">tcIfaceAlt :: CoreExpr -&gt; Type -&gt; (TyCon, ThetaType) -&gt; IfaceAlt -&gt; IfL CoreAlt
</span><a href="GHC.IfaceToCore.html#tcIfaceAlt"><span class="hs-identifier hs-var hs-var">tcIfaceAlt</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(TyCon, ThetaType)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAlt"><span class="hs-identifier hs-type">IfaceAlt</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceConAlt
</span><a href="GHC.Iface.Syntax.html#IfaceDefault"><span class="hs-identifier hs-var">IfaceDefault</span></a></span><span> </span><span id="local-6989586621681320387"><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681320387"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621681320386"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320386"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1567"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1568"></span><span>    </span><span class="hs-identifier">rhs'</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-identifier">rhs</span><span>
</span><span id="line-1569"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Alt</span><span> </span><span class="hs-identifier">DEFAULT</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-identifier">rhs'</span><span class="hs-special">)</span><span>
</span><span id="line-1570"></span><span>
</span><span id="line-1571"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAlt"><span class="hs-identifier hs-var">tcIfaceAlt</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(TyCon, ThetaType)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAlt"><span class="hs-identifier hs-type">IfaceAlt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLitAlt"><span class="hs-identifier hs-type">IfaceLitAlt</span></a></span><span> </span><span id="local-6989586621681320377"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681320377"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320376"><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681320376"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621681320375"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320375"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1572"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1573"></span><span>    </span><span class="hs-identifier">lit'</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tcIfaceLit</span><span> </span><span class="hs-identifier">lit</span><span>
</span><span id="line-1574"></span><span>    </span><span class="hs-identifier">rhs'</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">tcIfaceExpr</span><span> </span><span class="hs-identifier">rhs</span><span>
</span><span id="line-1575"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Alt</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">LitAlt</span><span> </span><span class="hs-identifier">lit'</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-identifier">rhs'</span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span>
</span><span id="line-1577"></span><span class="hs-comment">-- A case alternative is made quite a bit more complicated</span><span>
</span><span id="line-1578"></span><span class="hs-comment">-- by the fact that we omit type annotations because we can</span><span>
</span><span id="line-1579"></span><span class="hs-comment">-- work them out.  True enough, but its not that easy!</span><span>
</span><span id="line-1580"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceAlt"><span class="hs-identifier hs-var">tcIfaceAlt</span></a></span><span> </span><span id="local-6989586621681320371"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320371"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681320370"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320370"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320369"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320369"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320368"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320368"><span class="hs-identifier hs-var">inst_tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAlt"><span class="hs-identifier hs-type">IfaceAlt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDataAlt"><span class="hs-identifier hs-type">IfaceDataAlt</span></a></span><span> </span><span id="local-6989586621681320366"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320366"><span class="hs-identifier hs-var">data_occ</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320365"><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681320365"><span class="hs-identifier hs-var">arg_strs</span></a></span></span><span> </span><span id="local-6989586621681320364"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320364"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1581"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320363"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320363"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL DataCon
</span><a href="GHC.IfaceToCore.html#tcIfaceDataCon"><span class="hs-identifier hs-var">tcIfaceDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320366"><span class="hs-identifier hs-var">data_occ</span></a></span><span>
</span><span id="line-1582"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320363"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320369"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1583"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#failIfM"><span class="hs-identifier hs-var">failIfM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320371"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320363"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320369"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681320369"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1584"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Type
-&gt; DataCon -&gt; ThetaType -&gt; [FastString] -&gt; IfaceExpr -&gt; IfL CoreAlt
</span><a href="GHC.IfaceToCore.html#tcIfaceDataAlt"><span class="hs-identifier hs-var">tcIfaceDataAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320370"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320363"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320368"><span class="hs-identifier hs-var">inst_tys</span></a></span><span> </span><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681320365"><span class="hs-identifier hs-var">arg_strs</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320364"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDataAlt"><span class="hs-identifier hs-type">tcIfaceDataAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a></span><span>
</span><span id="line-1587"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1588"></span><span id="tcIfaceDataAlt"><span class="annot"><span class="annottext">tcIfaceDataAlt :: Type
-&gt; DataCon -&gt; ThetaType -&gt; [FastString] -&gt; IfaceExpr -&gt; IfL CoreAlt
</span><a href="GHC.IfaceToCore.html#tcIfaceDataAlt"><span class="hs-identifier hs-var hs-var">tcIfaceDataAlt</span></a></span></span><span> </span><span id="local-6989586621681320356"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320356"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681320355"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320355"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681320354"><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320354"><span class="hs-identifier hs-var">inst_tys</span></a></span></span><span> </span><span id="local-6989586621681320353"><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681320353"><span class="hs-identifier hs-var">arg_strs</span></a></span></span><span> </span><span id="local-6989586621681320352"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320352"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-1589"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320351"><span class="annot"><span class="annottext">UniqSupply
</span><a href="#local-6989586621681320351"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl UniqSupply
</span><a href="GHC.Tc.Utils.Monad.html#newUniqueSupply"><span class="hs-identifier hs-var">newUniqueSupply</span></a></span><span>
</span><span id="line-1590"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320349"><span class="annot"><span class="annottext">uniqs :: [Unique]
</span><a href="#local-6989586621681320349"><span class="hs-identifier hs-var hs-var">uniqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSupply -&gt; [Unique]
</span><a href="GHC.Types.Unique.Supply.html#uniqsFromSupply"><span class="hs-identifier hs-var">uniqsFromSupply</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSupply
</span><a href="#local-6989586621681320351"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-1591"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320347"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320347"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320346"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320346"><span class="hs-identifier hs-var">arg_ids</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FastString]
-&gt; [Unique] -&gt; Type -&gt; DataCon -&gt; ThetaType -&gt; FunDep CoreBndr
</span><a href="GHC.Core.Utils.html#dataConRepFSInstPat"><span class="hs-identifier hs-var">dataConRepFSInstPat</span></a></span><span> </span><span class="annot"><span class="annottext">[FastString]
</span><a href="#local-6989586621681320353"><span class="hs-identifier hs-var">arg_strs</span></a></span><span> </span><span class="annot"><span class="annottext">[Unique]
</span><a href="#local-6989586621681320349"><span class="hs-identifier hs-var">uniqs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320356"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320355"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><a href="#local-6989586621681320354"><span class="hs-identifier hs-var">inst_tys</span></a></span><span>
</span><span id="line-1593"></span><span>
</span><span id="line-1594"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320344"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320344"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceEnvs"><span class="hs-identifier hs-var">extendIfaceEnvs</span></a></span><span>  </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320347"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>       </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1595"></span><span>                  </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320346"><span class="hs-identifier hs-var">arg_ids</span></a></span><span>      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1596"></span><span>                  </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320352"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1597"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. AltCon -&gt; [b] -&gt; Expr b -&gt; Alt b
</span><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-var">Alt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; AltCon
</span><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-var">DataAlt</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320355"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320347"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320346"><span class="hs-identifier hs-var">arg_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320344"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1598"></span><span>
</span><span id="line-1599"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                IdInfo
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1606"></span><span>
</span><span id="line-1607"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIdDetails"><span class="hs-identifier hs-type">tcIdDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceIdDetails"><span class="hs-identifier hs-type">IfaceIdDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a></span><span>
</span><span id="line-1608"></span><span id="tcIdDetails"><span class="annot"><span class="annottext">tcIdDetails :: Type -&gt; IfaceIdDetails -&gt; IfL IdDetails
</span><a href="GHC.IfaceToCore.html#tcIdDetails"><span class="hs-identifier hs-var hs-var">tcIdDetails</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">IfaceIdDetails
</span><a href="GHC.Iface.Syntax.html#IfVanillaId"><span class="hs-identifier hs-var">IfVanillaId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span>
</span><span id="line-1609"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIdDetails"><span class="hs-identifier hs-var">tcIdDetails</span></a></span><span> </span><span id="local-6989586621681320339"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320339"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceIdDetails
</span><a href="GHC.Iface.Syntax.html#IfDFunId"><span class="hs-identifier hs-var">IfDFunId</span></a></span><span>
</span><span id="line-1610"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#DFunId"><span class="hs-identifier hs-var">DFunId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; TyCon
</span><a href="GHC.Core.Class.html#classTyCon"><span class="hs-identifier hs-var">classTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681320336"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1611"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1612"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreBndr]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320336"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681320336"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([CoreBndr], ThetaType, Class, ThetaType)
</span><a href="GHC.Tc.Utils.TcType.html#tcSplitDFunTy"><span class="hs-identifier hs-var">tcSplitDFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320339"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1613"></span><span>
</span><span id="line-1614"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIdDetails"><span class="hs-identifier hs-var">tcIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfRecSelId"><span class="hs-identifier hs-type">IfRecSelId</span></a></span><span> </span><span id="local-6989586621681320333"><span class="annot"><span class="annottext">Either IfaceTyCon IfaceDecl
</span><a href="#local-6989586621681320333"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621681320332"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320332"><span class="hs-identifier hs-var">naughty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320331"><span class="annot"><span class="annottext">RecSelParent
</span><a href="#local-6989586621681320331"><span class="hs-identifier hs-var">tc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#RecSelData"><span class="hs-identifier hs-var">RecSelData</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyCon -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-var">tcIfaceTyCon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#RecSelPatSyn"><span class="hs-identifier hs-var">RecSelPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; PatSyn
</span><a href="#local-6989586621681320327"><span class="hs-identifier hs-var">tyThingPatSyn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IfaceDecl -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceDecl"><span class="hs-identifier hs-var">tcIfaceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1617"></span><span>                       </span><span class="annot"><span class="annottext">Either IfaceTyCon IfaceDecl
</span><a href="#local-6989586621681320333"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1618"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sel_tycon :: RecSelParent
</span><a href="GHC.Types.Id.Info.html#sel_tycon"><span class="hs-identifier hs-var">sel_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecSelParent
</span><a href="#local-6989586621681320331"><span class="hs-identifier hs-var">tc'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sel_naughty :: Bool
</span><a href="GHC.Types.Id.Info.html#sel_naughty"><span class="hs-identifier hs-var">sel_naughty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320332"><span class="hs-identifier hs-var">naughty</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1619"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1620"></span><span>    </span><span id="local-6989586621681320327"><span class="annot"><span class="annottext">tyThingPatSyn :: TyThing -&gt; PatSyn
</span><a href="#local-6989586621681320327"><span class="hs-identifier hs-var hs-var">tyThingPatSyn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span id="local-6989586621681320323"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681320323"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681320323"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1621"></span><span>    </span><span class="annot"><a href="#local-6989586621681320327"><span class="hs-identifier hs-var">tyThingPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIdDetails: expecting patsyn&quot;</span></span><span>
</span><span id="line-1622"></span><span>
</span><span id="line-1623"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIdInfo"><span class="hs-identifier hs-type">tcIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceIdInfo"><span class="hs-identifier hs-type">IfaceIdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span>
</span><span id="line-1624"></span><span id="tcIdInfo"><span class="annot"><span class="annottext">tcIdInfo :: Bool -&gt; TopLevelFlag -&gt; Name -&gt; Type -&gt; IfaceIdInfo -&gt; IfL IdInfo
</span><a href="GHC.IfaceToCore.html#tcIdInfo"><span class="hs-identifier hs-var hs-var">tcIdInfo</span></a></span></span><span> </span><span id="local-6989586621681320321"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320321"><span class="hs-identifier hs-var">ignore_prags</span></a></span></span><span> </span><span id="local-6989586621681320320"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320320"><span class="hs-identifier hs-var">toplvl</span></a></span></span><span> </span><span id="local-6989586621681320319"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320319"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681320318"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320318"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681320317"><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320317"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1625"></span><span>    </span><span id="local-6989586621681320316"><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320316"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl lcl
</span><a href="GHC.Tc.Utils.Monad.html#getLclEnv"><span class="hs-identifier hs-var">getLclEnv</span></a></span><span>
</span><span id="line-1626"></span><span>    </span><span class="hs-comment">-- Set the CgInfo to something sensible but uninformative before</span><span>
</span><span id="line-1627"></span><span>    </span><span class="hs-comment">-- we start; default assumption is that it has CAFs</span><span>
</span><span id="line-1628"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320314"><span class="annot"><span class="annottext">init_info :: IdInfo
</span><a href="#local-6989586621681320314"><span class="hs-identifier hs-var hs-var">init_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">IfLclEnv -&gt; IsBootInterface
</span><a href="GHC.Tc.Types.html#if_boot"><span class="hs-identifier hs-var">if_boot</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320316"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span>
</span><span id="line-1629"></span><span>                      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Unfolding -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setUnfoldingInfo"><span class="hs-operator hs-var">`setUnfoldingInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span><span>
</span><span id="line-1630"></span><span>                      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span>
</span><span id="line-1631"></span><span>
</span><span id="line-1632"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; IfaceInfoItem -&gt; IfL IdInfo
</span><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320314"><span class="hs-identifier hs-var">init_info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceIdInfo -&gt; IfaceIdInfo
</span><a href="#local-6989586621681320308"><span class="hs-identifier hs-var">needed_prags</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320317"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1633"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1634"></span><span>    </span><span class="annot"><a href="#local-6989586621681320308"><span class="hs-identifier hs-type">needed_prags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceInfoItem"><span class="hs-identifier hs-type">IfaceInfoItem</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceInfoItem"><span class="hs-identifier hs-type">IfaceInfoItem</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1635"></span><span>    </span><span id="local-6989586621681320308"><span class="annot"><span class="annottext">needed_prags :: IfaceIdInfo -&gt; IfaceIdInfo
</span><a href="#local-6989586621681320308"><span class="hs-identifier hs-var hs-var">needed_prags</span></a></span></span><span> </span><span id="local-6989586621681320307"><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320307"><span class="hs-identifier hs-var">items</span></a></span></span><span>
</span><span id="line-1636"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320321"><span class="hs-identifier hs-var">ignore_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320307"><span class="hs-identifier hs-var">items</span></a></span><span>
</span><span id="line-1637"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceInfoItem -&gt; Bool
</span><a href="#local-6989586621681320306"><span class="hs-identifier hs-var">need_prag</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdInfo
</span><a href="#local-6989586621681320307"><span class="hs-identifier hs-var">items</span></a></span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span>    </span><span class="annot"><a href="#local-6989586621681320306"><span class="hs-identifier hs-type">need_prag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceInfoItem"><span class="hs-identifier hs-type">IfaceInfoItem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1640"></span><span>      </span><span class="hs-comment">-- Always read in compulsory unfoldings</span><span>
</span><span id="line-1641"></span><span>      </span><span class="hs-comment">-- See Note [Always expose compulsory unfoldings] in GHC.Iface.Tidy</span><span>
</span><span id="line-1642"></span><span>    </span><span id="local-6989586621681320306"><span class="annot"><span class="annottext">need_prag :: IfaceInfoItem -&gt; Bool
</span><a href="#local-6989586621681320306"><span class="hs-identifier hs-var hs-var">need_prag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsUnfold"><span class="hs-identifier hs-type">HsUnfold</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfCompulsory"><span class="hs-identifier hs-type">IfCompulsory</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1643"></span><span>    </span><span class="annot"><a href="#local-6989586621681320306"><span class="hs-identifier hs-var">need_prag</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceInfoItem
</span><span class="hs-identifier">_</span></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1644"></span><span>
</span><span id="line-1645"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-type">tcPrag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceInfoItem"><span class="hs-identifier hs-type">IfaceInfoItem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span>
</span><span id="line-1646"></span><span>    </span><span id="local-6989586621681320309"><span class="annot"><span class="annottext">tcPrag :: IdInfo -&gt; IfaceInfoItem -&gt; IfL IdInfo
</span><a href="#local-6989586621681320309"><span class="hs-identifier hs-var hs-var">tcPrag</span></a></span></span><span> </span><span id="local-6989586621681320303"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320303"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceInfoItem
</span><a href="GHC.Iface.Syntax.html#HsNoCafRefs"><span class="hs-identifier hs-var">HsNoCafRefs</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320303"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; CafInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setCafInfo"><span class="hs-operator hs-var">`setCafInfo`</span></a></span><span>   </span><span class="annot"><span class="annottext">CafInfo
</span><a href="GHC.Types.Id.Info.html#NoCafRefs"><span class="hs-identifier hs-var">NoCafRefs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1647"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320299"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320299"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsArity"><span class="hs-identifier hs-type">HsArity</span></a></span><span> </span><span id="local-6989586621681320297"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320297"><span class="hs-identifier hs-var">arity</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320299"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Arity -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setArityInfo"><span class="hs-operator hs-var">`setArityInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320297"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1648"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320295"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320295"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsStrictness"><span class="hs-identifier hs-type">HsStrictness</span></a></span><span> </span><span id="local-6989586621681320293"><span class="annot"><span class="annottext">StrictSig
</span><a href="#local-6989586621681320293"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320295"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; StrictSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setStrictnessInfo"><span class="hs-operator hs-var">`setStrictnessInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSig
</span><a href="#local-6989586621681320293"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1649"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320291"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320291"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsCpr"><span class="hs-identifier hs-type">HsCpr</span></a></span><span> </span><span id="local-6989586621681320289"><span class="annot"><span class="annottext">CprSig
</span><a href="#local-6989586621681320289"><span class="hs-identifier hs-var">cpr</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320291"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; CprSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setCprInfo"><span class="hs-operator hs-var">`setCprInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">CprSig
</span><a href="#local-6989586621681320289"><span class="hs-identifier hs-var">cpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1650"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320287"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320287"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsInline"><span class="hs-identifier hs-type">HsInline</span></a></span><span> </span><span id="local-6989586621681320285"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621681320285"><span class="hs-identifier hs-var">prag</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320287"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setInlinePragInfo"><span class="hs-operator hs-var">`setInlinePragInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621681320285"><span class="hs-identifier hs-var">prag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1651"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320283"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320283"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceInfoItem
</span><a href="GHC.Iface.Syntax.html#HsLevity"><span class="hs-identifier hs-var">HsLevity</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320283"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; IdInfo -&gt; Type -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setNeverLevPoly"><span class="hs-operator hs-var">`setNeverLevPoly`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320318"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1652"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320280"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320280"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsLFInfo"><span class="hs-identifier hs-type">HsLFInfo</span></a></span><span> </span><span id="local-6989586621681320278"><span class="annot"><span class="annottext">IfaceLFInfo
</span><a href="#local-6989586621681320278"><span class="hs-identifier hs-var">lf_info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1653"></span><span>      </span><span id="local-6989586621681320277"><span class="annot"><span class="annottext">LambdaFormInfo
</span><a href="#local-6989586621681320277"><span class="hs-identifier hs-var">lf_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceLFInfo -&gt; IfL LambdaFormInfo
</span><a href="GHC.IfaceToCore.html#tcLFInfo"><span class="hs-identifier hs-var">tcLFInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceLFInfo
</span><a href="#local-6989586621681320278"><span class="hs-identifier hs-var">lf_info</span></a></span><span>
</span><span id="line-1654"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320280"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; LambdaFormInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setLFInfo"><span class="hs-operator hs-var">`setLFInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">LambdaFormInfo
</span><a href="#local-6989586621681320277"><span class="hs-identifier hs-var">lf_info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1655"></span><span>
</span><span id="line-1656"></span><span>        </span><span class="hs-comment">-- The next two are lazy, so they don't transitively suck stuff in</span><span>
</span><span id="line-1657"></span><span>    </span><span class="annot"><a href="#local-6989586621681320309"><span class="hs-identifier hs-var">tcPrag</span></a></span><span> </span><span id="local-6989586621681320274"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320274"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#HsUnfold"><span class="hs-identifier hs-type">HsUnfold</span></a></span><span> </span><span id="local-6989586621681320273"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320273"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681320272"><span class="annot"><span class="annottext">IfaceUnfolding
</span><a href="#local-6989586621681320272"><span class="hs-identifier hs-var">if_unf</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1658"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320271"><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621681320271"><span class="hs-identifier hs-var">unf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
-&gt; Name -&gt; Type -&gt; IdInfo -&gt; IfaceUnfolding -&gt; IfL Unfolding
</span><a href="GHC.IfaceToCore.html#tcUnfolding"><span class="hs-identifier hs-var">tcUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320320"><span class="hs-identifier hs-var">toplvl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320319"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320318"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320274"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceUnfolding
</span><a href="#local-6989586621681320272"><span class="hs-identifier hs-var">if_unf</span></a></span><span>
</span><span id="line-1659"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320269"><span class="annot"><span class="annottext">info1 :: IdInfo
</span><a href="#local-6989586621681320269"><span class="hs-identifier hs-var hs-var">info1</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320273"><span class="hs-identifier hs-var">lb</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320274"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; OccInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setOccInfo"><span class="hs-operator hs-var">`setOccInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">OccInfo
</span><a href="GHC.Types.Basic.html#strongLoopBreaker"><span class="hs-identifier hs-var">strongLoopBreaker</span></a></span><span>
</span><span id="line-1660"></span><span>                       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320274"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1661"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320269"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Unfolding -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setUnfoldingInfo"><span class="hs-operator hs-var">`setUnfoldingInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621681320271"><span class="hs-identifier hs-var">unf</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1662"></span><span>
</span><span id="line-1663"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcJoinInfo"><span class="hs-identifier hs-type">tcJoinInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceJoinInfo"><span class="hs-identifier hs-type">IfaceJoinInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span>
</span><span id="line-1664"></span><span id="tcJoinInfo"><span class="annot"><span class="annottext">tcJoinInfo :: IfaceJoinInfo -&gt; Maybe Arity
</span><a href="GHC.IfaceToCore.html#tcJoinInfo"><span class="hs-identifier hs-var hs-var">tcJoinInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceJoinPoint"><span class="hs-identifier hs-type">IfaceJoinPoint</span></a></span><span> </span><span id="local-6989586621681320264"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320264"><span class="hs-identifier hs-var">ar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320264"><span class="hs-identifier hs-var">ar</span></a></span><span>
</span><span id="line-1665"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcJoinInfo"><span class="hs-identifier hs-var">tcJoinInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceJoinInfo
</span><a href="GHC.Iface.Syntax.html#IfaceNotJoinPoint"><span class="hs-identifier hs-var">IfaceNotJoinPoint</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1666"></span><span>
</span><span id="line-1667"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcLFInfo"><span class="hs-identifier hs-type">tcLFInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceLFInfo"><span class="hs-identifier hs-type">IfaceLFInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.StgToCmm.Types.html#LambdaFormInfo"><span class="hs-identifier hs-type">LambdaFormInfo</span></a></span><span>
</span><span id="line-1668"></span><span id="tcLFInfo"><span class="annot"><span class="annottext">tcLFInfo :: IfaceLFInfo -&gt; IfL LambdaFormInfo
</span><a href="GHC.IfaceToCore.html#tcLFInfo"><span class="hs-identifier hs-var hs-var">tcLFInfo</span></a></span></span><span> </span><span id="local-6989586621681320262"><span class="annot"><span class="annottext">IfaceLFInfo
</span><a href="#local-6989586621681320262"><span class="hs-identifier hs-var">lfi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceLFInfo
</span><a href="#local-6989586621681320262"><span class="hs-identifier hs-var">lfi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1669"></span><span>    </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLFReEntrant"><span class="hs-identifier hs-type">IfLFReEntrant</span></a></span><span> </span><span id="local-6989586621681320260"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320260"><span class="hs-identifier hs-var">rep_arity</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1670"></span><span>      </span><span class="hs-comment">-- LFReEntrant closures in interface files are guaranteed to</span><span>
</span><span id="line-1671"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1672"></span><span>      </span><span class="hs-comment">-- - Be top-level, as only top-level closures are exported.</span><span>
</span><span id="line-1673"></span><span>      </span><span class="hs-comment">-- - Have no free variables, as only non-top-level closures have free</span><span>
</span><span id="line-1674"></span><span>      </span><span class="hs-comment">--   variables</span><span>
</span><span id="line-1675"></span><span>      </span><span class="hs-comment">-- - Don't have ArgDescrs, as ArgDescr is used when generating code for</span><span>
</span><span id="line-1676"></span><span>      </span><span class="hs-comment">--   the closure</span><span>
</span><span id="line-1677"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1678"></span><span>      </span><span class="hs-comment">-- These invariants are checked when generating LFInfos in toIfaceLFInfo.</span><span>
</span><span id="line-1679"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TopLevelFlag -&gt; Arity -&gt; Bool -&gt; ArgDescr -&gt; LambdaFormInfo
</span><a href="GHC.StgToCmm.Types.html#LFReEntrant"><span class="hs-identifier hs-var">LFReEntrant</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320260"><span class="hs-identifier hs-var">rep_arity</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ArgDescr
</span><a href="GHC.StgToCmm.Types.html#ArgUnknown"><span class="hs-identifier hs-var">ArgUnknown</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1680"></span><span>
</span><span id="line-1681"></span><span>    </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLFThunk"><span class="hs-identifier hs-type">IfLFThunk</span></a></span><span> </span><span id="local-6989586621681320256"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320256"><span class="hs-identifier hs-var">updatable</span></a></span></span><span> </span><span id="local-6989586621681320255"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320255"><span class="hs-identifier hs-var">mb_fun</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1682"></span><span>      </span><span class="hs-comment">-- LFThunk closure in interface files are guaranteed to</span><span>
</span><span id="line-1683"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1684"></span><span>      </span><span class="hs-comment">-- - Be top-level</span><span>
</span><span id="line-1685"></span><span>      </span><span class="hs-comment">-- - No have free variables</span><span>
</span><span id="line-1686"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1687"></span><span>      </span><span class="hs-comment">-- These invariants are checked when generating LFInfos in toIfaceLFInfo.</span><span>
</span><span id="line-1688"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TopLevelFlag
-&gt; Bool -&gt; Bool -&gt; StandardFormInfo -&gt; Bool -&gt; LambdaFormInfo
</span><a href="GHC.StgToCmm.Types.html#LFThunk"><span class="hs-identifier hs-var">LFThunk</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320256"><span class="hs-identifier hs-var">updatable</span></a></span><span> </span><span class="annot"><span class="annottext">StandardFormInfo
</span><a href="GHC.StgToCmm.Types.html#NonStandardThunk"><span class="hs-identifier hs-var">NonStandardThunk</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320255"><span class="hs-identifier hs-var">mb_fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1689"></span><span>
</span><span id="line-1690"></span><span>    </span><span class="annot"><span class="annottext">IfaceLFInfo
</span><a href="GHC.Iface.Syntax.html#IfLFUnlifted"><span class="hs-identifier hs-var">IfLFUnlifted</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1691"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LambdaFormInfo
</span><a href="GHC.StgToCmm.Types.html#LFUnlifted"><span class="hs-identifier hs-var">LFUnlifted</span></a></span><span>
</span><span id="line-1692"></span><span>
</span><span id="line-1693"></span><span>    </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLFCon"><span class="hs-identifier hs-type">IfLFCon</span></a></span><span> </span><span id="local-6989586621681320249"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320249"><span class="hs-identifier hs-var">con_name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1694"></span><span>      </span><span class="annot"><span class="annottext">DataCon -&gt; LambdaFormInfo
</span><a href="GHC.StgToCmm.Types.html#LFCon"><span class="hs-identifier hs-var">LFCon</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#%3C%24%21%3E"><span class="hs-operator hs-var">&lt;$!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL DataCon
</span><a href="GHC.IfaceToCore.html#tcIfaceDataCon"><span class="hs-identifier hs-var">tcIfaceDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320249"><span class="hs-identifier hs-var">con_name</span></a></span><span>
</span><span id="line-1695"></span><span>
</span><span id="line-1696"></span><span>    </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfLFUnknown"><span class="hs-identifier hs-type">IfLFUnknown</span></a></span><span> </span><span id="local-6989586621681320245"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320245"><span class="hs-identifier hs-var">fun_flag</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1697"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; LambdaFormInfo
</span><a href="GHC.StgToCmm.Types.html#LFUnknown"><span class="hs-identifier hs-var">LFUnknown</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320245"><span class="hs-identifier hs-var">fun_flag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1698"></span><span>
</span><span id="line-1699"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcUnfolding"><span class="hs-identifier hs-type">tcUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceUnfolding"><span class="hs-identifier hs-type">IfaceUnfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-1700"></span><span id="tcUnfolding"><span class="annot"><span class="annottext">tcUnfolding :: TopLevelFlag
-&gt; Name -&gt; Type -&gt; IdInfo -&gt; IfaceUnfolding -&gt; IfL Unfolding
</span><a href="GHC.IfaceToCore.html#tcUnfolding"><span class="hs-identifier hs-var hs-var">tcUnfolding</span></a></span></span><span> </span><span id="local-6989586621681320243"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320243"><span class="hs-identifier hs-var">toplvl</span></a></span></span><span> </span><span id="local-6989586621681320242"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320242"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681320241"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320241"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfCoreUnfold"><span class="hs-identifier hs-type">IfCoreUnfold</span></a></span><span> </span><span id="local-6989586621681320239"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320239"><span class="hs-identifier hs-var">stable</span></a></span></span><span> </span><span id="local-6989586621681320238"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320238"><span class="hs-identifier hs-var">if_expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1701"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320237"><span class="annot"><span class="annottext">UnfoldingOpts
</span><a href="#local-6989586621681320237"><span class="hs-identifier hs-var">uf_opts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; UnfoldingOpts
</span><a href="GHC.Driver.Session.html#unfoldingOpts"><span class="hs-identifier hs-var">unfoldingOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/Data-Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1702"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320235"><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681320235"><span class="hs-identifier hs-var">mb_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TopLevelFlag -&gt; Name -&gt; IfaceExpr -&gt; IfL (Maybe CoreExpr)
</span><a href="GHC.IfaceToCore.html#tcPragExpr"><span class="hs-identifier hs-var">tcPragExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320243"><span class="hs-identifier hs-var">toplvl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320242"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320238"><span class="hs-identifier hs-var">if_expr</span></a></span><span>
</span><span id="line-1703"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320233"><span class="annot"><span class="annottext">unf_src :: UnfoldingSource
</span><a href="#local-6989586621681320233"><span class="hs-identifier hs-var hs-var">unf_src</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320239"><span class="hs-identifier hs-var">stable</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="GHC.Core.html#InlineStable"><span class="hs-identifier hs-var">InlineStable</span></a></span><span>
</span><span id="line-1704"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="GHC.Core.html#InlineRhs"><span class="hs-identifier hs-var">InlineRhs</span></a></span><span>
</span><span id="line-1705"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681320235"><span class="hs-identifier hs-var">mb_expr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1706"></span><span>            </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>
</span><span id="line-1707"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320229"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320229"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnfoldingOpts
-&gt; UnfoldingSource -&gt; StrictSig -&gt; CoreExpr -&gt; Unfolding
</span><a href="GHC.Core.Unfold.Make.html#mkFinalUnfolding"><span class="hs-identifier hs-var">mkFinalUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingOpts
</span><a href="#local-6989586621681320237"><span class="hs-identifier hs-var">uf_opts</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621681320233"><span class="hs-identifier hs-var">unf_src</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSig
</span><a href="#local-6989586621681320227"><span class="hs-identifier hs-var">strict_sig</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320229"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1708"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1709"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1710"></span><span>    </span><span class="hs-comment">-- Strictness should occur before unfolding!</span><span>
</span><span id="line-1711"></span><span>    </span><span id="local-6989586621681320227"><span class="annot"><span class="annottext">strict_sig :: StrictSig
</span><a href="#local-6989586621681320227"><span class="hs-identifier hs-var hs-var">strict_sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; StrictSig
</span><a href="GHC.Types.Id.Info.html#strictnessInfo"><span class="hs-identifier hs-var">strictnessInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621681320241"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1712"></span><span>
</span><span id="line-1713"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcUnfolding"><span class="hs-identifier hs-var">tcUnfolding</span></a></span><span> </span><span id="local-6989586621681320225"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320225"><span class="hs-identifier hs-var">toplvl</span></a></span></span><span> </span><span id="local-6989586621681320224"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320224"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfCompulsory"><span class="hs-identifier hs-type">IfCompulsory</span></a></span><span> </span><span id="local-6989586621681320223"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320223"><span class="hs-identifier hs-var">if_expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1714"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320222"><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681320222"><span class="hs-identifier hs-var">mb_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TopLevelFlag -&gt; Name -&gt; IfaceExpr -&gt; IfL (Maybe CoreExpr)
</span><a href="GHC.IfaceToCore.html#tcPragExpr"><span class="hs-identifier hs-var">tcPragExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320225"><span class="hs-identifier hs-var">toplvl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320224"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320223"><span class="hs-identifier hs-var">if_expr</span></a></span><span>
</span><span id="line-1715"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681320222"><span class="hs-identifier hs-var">mb_expr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1716"></span><span>                    </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>
</span><span id="line-1717"></span><span>                    </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320221"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320221"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Unfolding
</span><a href="GHC.Core.Unfold.Make.html#mkCompulsoryUnfolding%27"><span class="hs-identifier hs-var">mkCompulsoryUnfolding'</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320221"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1718"></span><span>
</span><span id="line-1719"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcUnfolding"><span class="hs-identifier hs-var">tcUnfolding</span></a></span><span> </span><span id="local-6989586621681320219"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320219"><span class="hs-identifier hs-var">toplvl</span></a></span></span><span> </span><span id="local-6989586621681320218"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320218"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfInlineRule"><span class="hs-identifier hs-type">IfInlineRule</span></a></span><span> </span><span id="local-6989586621681320216"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320216"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621681320215"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320215"><span class="hs-identifier hs-var">unsat_ok</span></a></span></span><span> </span><span id="local-6989586621681320214"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320214"><span class="hs-identifier hs-var">boring_ok</span></a></span></span><span> </span><span id="local-6989586621681320213"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320213"><span class="hs-identifier hs-var">if_expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1720"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320212"><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681320212"><span class="hs-identifier hs-var">mb_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TopLevelFlag -&gt; Name -&gt; IfaceExpr -&gt; IfL (Maybe CoreExpr)
</span><a href="GHC.IfaceToCore.html#tcPragExpr"><span class="hs-identifier hs-var">tcPragExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320219"><span class="hs-identifier hs-var">toplvl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320218"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320213"><span class="hs-identifier hs-var">if_expr</span></a></span><span>
</span><span id="line-1721"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="#local-6989586621681320212"><span class="hs-identifier hs-var">mb_expr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1722"></span><span>                    </span><span class="annot"><span class="annottext">Maybe CoreExpr
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>
</span><span id="line-1723"></span><span>                    </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320211"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320211"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
-&gt; Bool -&gt; CoreExpr -&gt; UnfoldingGuidance -&gt; Unfolding
</span><a href="GHC.Core.Unfold.Make.html#mkCoreUnfolding"><span class="hs-identifier hs-var">mkCoreUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="GHC.Core.html#InlineStable"><span class="hs-identifier hs-var">InlineStable</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320211"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingGuidance
</span><a href="#local-6989586621681320209"><span class="hs-identifier hs-var">guidance</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-1724"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1725"></span><span>    </span><span id="local-6989586621681320209"><span class="annot"><span class="annottext">guidance :: UnfoldingGuidance
</span><a href="#local-6989586621681320209"><span class="hs-identifier hs-var hs-var">guidance</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#UnfWhen"><span class="hs-identifier hs-type">UnfWhen</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ug_arity :: Arity
</span><a href="GHC.Core.html#ug_arity"><span class="hs-identifier hs-var">ug_arity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681320216"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ug_unsat_ok :: Bool
</span><a href="GHC.Core.html#ug_unsat_ok"><span class="hs-identifier hs-var">ug_unsat_ok</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320215"><span class="hs-identifier hs-var">unsat_ok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ug_boring_ok :: Bool
</span><a href="GHC.Core.html#ug_boring_ok"><span class="hs-identifier hs-var">ug_boring_ok</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320214"><span class="hs-identifier hs-var">boring_ok</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1726"></span><span>
</span><span id="line-1727"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcUnfolding"><span class="hs-identifier hs-var">tcUnfolding</span></a></span><span> </span><span id="local-6989586621681320204"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320204"><span class="hs-identifier hs-var">_toplvl</span></a></span></span><span> </span><span id="local-6989586621681320203"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320203"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681320202"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320202"><span class="hs-identifier hs-var">dfun_ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfDFunUnfold"><span class="hs-identifier hs-type">IfDFunUnfold</span></a></span><span> </span><span id="local-6989586621681320200"><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681320200"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621681320199"><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320199"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1728"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [IfaceBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681320200"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320198"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320198"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1729"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320197"><span class="annot"><span class="annottext">Maybe [CoreExpr]
</span><a href="#local-6989586621681320197"><span class="hs-identifier hs-var">mb_ops1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL (Maybe a)
</span><a href="GHC.Tc.Utils.Monad.html#forkM_maybe"><span class="hs-identifier hs-var">forkM_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320195"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExpr]
</span><a href="#local-6989586621681320199"><span class="hs-identifier hs-var">ops</span></a></span><span>
</span><span id="line-1730"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe [CoreExpr]
</span><a href="#local-6989586621681320197"><span class="hs-identifier hs-var">mb_ops1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1731"></span><span>                    </span><span class="annot"><span class="annottext">Maybe [CoreExpr]
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier hs-var">noUnfolding</span></a></span><span>
</span><span id="line-1732"></span><span>                    </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320193"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320193"><span class="hs-identifier hs-var">ops1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; DataCon -&gt; [CoreExpr] -&gt; Unfolding
</span><a href="GHC.Core.Unfold.Make.html#mkDFunUnfolding"><span class="hs-identifier hs-var">mkDFunUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320198"><span class="hs-identifier hs-var">bs'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; DataCon
</span><a href="GHC.Core.DataCon.html#classDataCon"><span class="hs-identifier hs-var">classDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681320190"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621681320193"><span class="hs-identifier hs-var">ops1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1733"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1734"></span><span>    </span><span id="local-6989586621681320195"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681320195"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Class ops for dfun&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320203"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1735"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreBndr]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320190"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681320190"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThetaType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([CoreBndr], ThetaType, Class, ThetaType)
</span><a href="GHC.Tc.Utils.TcType.html#tcSplitDFunTy"><span class="hs-identifier hs-var">tcSplitDFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320202"><span class="hs-identifier hs-var">dfun_ty</span></a></span><span>
</span><span id="line-1736"></span><span>
</span><span id="line-1737"></span><span class="hs-comment">{-
For unfoldings we try to do the job lazily, so that we never type check
an unfolding that isn't going to be looked at.
-}</span><span>
</span><span id="line-1741"></span><span>
</span><span id="line-1742"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcPragExpr"><span class="hs-identifier hs-type">tcPragExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>  </span><span class="hs-comment">-- Is this unfolding compulsory?</span><span>
</span><span id="line-1743"></span><span>                    </span><span class="hs-comment">-- See Note [Checking for levity polymorphism] in GHC.Core.Lint</span><span>
</span><span id="line-1744"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceExpr"><span class="hs-identifier hs-type">IfaceExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1745"></span><span id="tcPragExpr"><span class="annot"><span class="annottext">tcPragExpr :: Bool -&gt; TopLevelFlag -&gt; Name -&gt; IfaceExpr -&gt; IfL (Maybe CoreExpr)
</span><a href="GHC.IfaceToCore.html#tcPragExpr"><span class="hs-identifier hs-var hs-var">tcPragExpr</span></a></span></span><span> </span><span id="local-6989586621681320189"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320189"><span class="hs-identifier hs-var">is_compulsory</span></a></span></span><span> </span><span id="local-6989586621681320188"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320188"><span class="hs-identifier hs-var">toplvl</span></a></span></span><span> </span><span id="local-6989586621681320187"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320187"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681320186"><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320186"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-1746"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a -&gt; IfL (Maybe a)
</span><a href="GHC.Tc.Utils.Monad.html#forkM_maybe"><span class="hs-identifier hs-var">forkM_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320185"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1747"></span><span>    </span><span id="local-6989586621681320184"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320184"><span class="hs-identifier hs-var">core_expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceExpr -&gt; IfL CoreExpr
</span><a href="GHC.IfaceToCore.html#tcIfaceExpr"><span class="hs-identifier hs-var">tcIfaceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExpr
</span><a href="#local-6989586621681320186"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1748"></span><span>
</span><span id="line-1749"></span><span>    </span><span class="hs-comment">-- Check for type consistency in the unfolding</span><span>
</span><span id="line-1750"></span><span>    </span><span class="hs-comment">-- See Note [Linting Unfoldings from Interfaces] in GHC.Core.Lint</span><span>
</span><span id="line-1751"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TopLevelFlag -&gt; Bool
</span><a href="GHC.Types.Basic.html#isTopLevel"><span class="hs-identifier hs-var">isTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681320188"><span class="hs-identifier hs-var">toplvl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1752"></span><span>      </span><span class="annot"><span class="annottext">forall gbl lcl.
GeneralFlag -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#whenGOptM"><span class="hs-identifier hs-var">whenGOptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DoCoreLinting"><span class="hs-identifier hs-var">Opt_DoCoreLinting</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1753"></span><span>        </span><span id="local-6989586621681320182"><span class="annot"><span class="annottext">VarSet
</span><a href="#local-6989586621681320182"><span class="hs-identifier hs-var">in_scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfL VarSet
</span><a href="#local-6989586621681320181"><span class="hs-identifier hs-var">get_in_scope</span></a></span><span>
</span><span id="line-1754"></span><span>        </span><span id="local-6989586621681320180"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320180"><span class="hs-identifier hs-var">dflags</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1755"></span><span>        </span><span id="local-6989586621681320179"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681320179"><span class="hs-identifier hs-var">logger</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasLogger m =&gt; m Logger
</span><a href="GHC.Utils.Logger.html#getLogger"><span class="hs-identifier hs-var">getLogger</span></a></span><span>
</span><span id="line-1756"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; DynFlags -&gt; SrcLoc -&gt; VarSet -&gt; CoreExpr -&gt; Maybe (Bag SDoc)
</span><a href="GHC.Core.Lint.html#lintUnfolding"><span class="hs-identifier hs-var">lintUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320189"><span class="hs-identifier hs-var">is_compulsory</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320180"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="GHC.Types.SrcLoc.html#noSrcLoc"><span class="hs-identifier hs-var">noSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">VarSet
</span><a href="#local-6989586621681320182"><span class="hs-identifier hs-var">in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320184"><span class="hs-identifier hs-var">core_expr'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1757"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Bag SDoc)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1758"></span><span>          </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320176"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681320176"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1759"></span><span>            </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Bool -&gt; SDoc -&gt; SDoc -&gt; WarnsAndErrs -&gt; IO ()
</span><a href="GHC.Core.Lint.html#displayLintResults"><span class="hs-identifier hs-var">displayLintResults</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681320179"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681320180"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320185"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1760"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall b. OutputableBndr b =&gt; Expr b -&gt; SDoc
</span><a href="GHC.Core.Ppr.html#pprCoreExpr"><span class="hs-identifier hs-var">pprCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320184"><span class="hs-identifier hs-var">core_expr'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621681320176"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1761"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621681320184"><span class="hs-identifier hs-var">core_expr'</span></a></span><span>
</span><span id="line-1762"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1763"></span><span>    </span><span id="local-6989586621681320185"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681320185"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681320189"><span class="hs-identifier hs-var">is_compulsory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Compulsory&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1764"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unfolding of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320187"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1765"></span><span>
</span><span id="line-1766"></span><span>    </span><span class="annot"><a href="#local-6989586621681320181"><span class="hs-identifier hs-type">get_in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span> </span><span class="hs-comment">-- Totally disgusting; but just for linting</span><span>
</span><span id="line-1767"></span><span>    </span><span id="local-6989586621681320181"><span class="annot"><span class="annottext">get_in_scope :: IfL VarSet
</span><a href="#local-6989586621681320181"><span class="hs-identifier hs-var hs-var">get_in_scope</span></a></span></span><span>
</span><span id="line-1768"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320174"><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681320174"><span class="hs-identifier hs-var">gbl_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320173"><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320173"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl (gbl, lcl)
</span><a href="GHC.Tc.Utils.Monad.html#getEnvs"><span class="hs-identifier hs-var">getEnvs</span></a></span><span>
</span><span id="line-1769"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320172"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320172"><span class="hs-identifier hs-var">rec_ids</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfGblEnv -&gt; Maybe (Module, IfG TypeEnv)
</span><a href="GHC.Tc.Types.html#if_rec_types"><span class="hs-identifier hs-var">if_rec_types</span></a></span><span> </span><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681320174"><span class="hs-identifier hs-var">gbl_env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1770"></span><span>                            </span><span class="annot"><span class="annottext">Maybe (Module, IfG TypeEnv)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1771"></span><span>                            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320170"><span class="annot"><span class="annottext">IfG TypeEnv
</span><a href="#local-6989586621681320170"><span class="hs-identifier hs-var">get_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1772"></span><span>                               </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320169"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320169"><span class="hs-identifier hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall lcl' gbl a lcl.
lcl' -&gt; TcRnIf gbl lcl' a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setLclEnv"><span class="hs-identifier hs-var">setLclEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IfG TypeEnv
</span><a href="#local-6989586621681320170"><span class="hs-identifier hs-var">get_env</span></a></span><span>
</span><span id="line-1773"></span><span>                               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeEnv -&gt; [CoreBndr]
</span><a href="GHC.Types.TypeEnv.html#typeEnvIds"><span class="hs-identifier hs-var">typeEnvIds</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320169"><span class="hs-identifier hs-var">type_env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1774"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastStringEnv CoreBndr -&gt; VarSet
</span><a href="#local-6989586621681320166"><span class="hs-identifier hs-var">bindingsVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfLclEnv -&gt; FastStringEnv CoreBndr
</span><a href="GHC.Tc.Types.html#if_tv_env"><span class="hs-identifier hs-var">if_tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320173"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; VarSet -&gt; VarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span>
</span><span id="line-1775"></span><span>                       </span><span class="annot"><span class="annottext">FastStringEnv CoreBndr -&gt; VarSet
</span><a href="#local-6989586621681320166"><span class="hs-identifier hs-var">bindingsVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfLclEnv -&gt; FastStringEnv CoreBndr
</span><a href="GHC.Tc.Types.html#if_id_env"><span class="hs-identifier hs-var">if_id_env</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320173"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; VarSet -&gt; VarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span>
</span><span id="line-1776"></span><span>                       </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; VarSet
</span><a href="GHC.Types.Var.Set.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320172"><span class="hs-identifier hs-var">rec_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1777"></span><span>
</span><span id="line-1778"></span><span>    </span><span class="annot"><a href="#local-6989586621681320166"><span class="hs-identifier hs-type">bindingsVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.Env.html#FastStringEnv"><span class="hs-identifier hs-type">FastStringEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-1779"></span><span>    </span><span id="local-6989586621681320166"><span class="annot"><span class="annottext">bindingsVars :: FastStringEnv CoreBndr -&gt; VarSet
</span><a href="#local-6989586621681320166"><span class="hs-identifier hs-var hs-var">bindingsVars</span></a></span></span><span> </span><span id="local-6989586621681320163"><span class="annot"><span class="annottext">FastStringEnv CoreBndr
</span><a href="#local-6989586621681320163"><span class="hs-identifier hs-var">ufm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; VarSet
</span><a href="GHC.Types.Var.Set.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall key elt. UniqFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.FM.html#nonDetEltsUFM"><span class="hs-identifier hs-var">nonDetEltsUFM</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv CoreBndr
</span><a href="#local-6989586621681320163"><span class="hs-identifier hs-var">ufm</span></a></span><span>
</span><span id="line-1780"></span><span>      </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here because we immediately forget</span><span>
</span><span id="line-1781"></span><span>      </span><span class="hs-comment">-- the ordering by creating a set</span><span>
</span><span id="line-1782"></span><span>
</span><span id="line-1783"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceOneShot"><span class="hs-identifier hs-type">tcIfaceOneShot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceOneShot"><span class="hs-identifier hs-type">IfaceOneShot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a></span><span>
</span><span id="line-1784"></span><span id="tcIfaceOneShot"><span class="annot"><span class="annottext">tcIfaceOneShot :: IfaceOneShot -&gt; OneShotInfo
</span><a href="GHC.IfaceToCore.html#tcIfaceOneShot"><span class="hs-identifier hs-var hs-var">tcIfaceOneShot</span></a></span></span><span> </span><span class="annot"><span class="annottext">IfaceOneShot
</span><a href="GHC.Iface.Type.html#IfaceNoOneShot"><span class="hs-identifier hs-var">IfaceNoOneShot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a></span><span>
</span><span id="line-1785"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceOneShot"><span class="hs-identifier hs-var">tcIfaceOneShot</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceOneShot
</span><a href="GHC.Iface.Type.html#IfaceOneShot"><span class="hs-identifier hs-var">IfaceOneShot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a></span><span>
</span><span id="line-1786"></span><span>
</span><span id="line-1787"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Getting from Names to TyThings
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1794"></span><span>
</span><span id="line-1795"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-type">tcIfaceGlobal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-1796"></span><span id="tcIfaceGlobal"><span class="annot"><span class="annottext">tcIfaceGlobal :: Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-var hs-var">tcIfaceGlobal</span></a></span></span><span> </span><span id="local-6989586621681320159"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320159"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1797"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320158"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320158"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe TyThing
</span><a href="GHC.Types.Name.html#wiredInNameTyThing_maybe"><span class="hs-identifier hs-var">wiredInNameTyThing_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320159"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1798"></span><span>        </span><span class="hs-comment">-- Wired-in things include TyCons, DataCons, and Ids</span><span>
</span><span id="line-1799"></span><span>        </span><span class="hs-comment">-- Even though we are in an interface file, we want to make</span><span>
</span><span id="line-1800"></span><span>        </span><span class="hs-comment">-- sure the instances and RULES of this thing (particularly TyCon) are loaded</span><span>
</span><span id="line-1801"></span><span>        </span><span class="hs-comment">-- Imagine: f :: Double -&gt; Double</span><span>
</span><span id="line-1802"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; IfL ()
</span><a href="GHC.Iface.Load.html#ifCheckWiredInThing"><span class="hs-identifier hs-var">ifCheckWiredInThing</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320158"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320158"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1803"></span><span>
</span><span id="line-1804"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1805"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320155"><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681320155"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl gbl
</span><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a></span><span>
</span><span id="line-1806"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfGblEnv -&gt; Maybe (Module, IfG TypeEnv)
</span><a href="GHC.Tc.Types.html#if_rec_types"><span class="hs-identifier hs-var">if_rec_types</span></a></span><span> </span><span class="annot"><span class="annottext">IfGblEnv
</span><a href="#local-6989586621681320155"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>    </span><span class="hs-comment">-- Note [Tying the knot]</span><span>
</span><span id="line-1807"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320153"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320153"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320152"><span class="annot"><span class="annottext">IfG TypeEnv
</span><a href="#local-6989586621681320152"><span class="hs-identifier hs-var">get_type_env</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1808"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681320153"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320159"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1809"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>           </span><span class="hs-comment">-- It's defined in the module being compiled</span><span>
</span><span id="line-1810"></span><span>                </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320150"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320150"><span class="hs-identifier hs-var">type_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall lcl' gbl a lcl.
lcl' -&gt; TcRnIf gbl lcl' a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setLclEnv"><span class="hs-identifier hs-var">setLclEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IfG TypeEnv
</span><a href="#local-6989586621681320152"><span class="hs-identifier hs-var">get_type_env</span></a></span><span>         </span><span class="hs-comment">-- yuk</span><span>
</span><span id="line-1811"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320150"><span class="hs-identifier hs-var">type_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320159"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1812"></span><span>                    </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320148"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320148"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320148"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1813"></span><span>                    </span><span class="hs-comment">-- See Note [Knot-tying fallback on boot]</span><span>
</span><span id="line-1814"></span><span>                    </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IfL TyThing
</span><a href="#local-6989586621681320147"><span class="hs-identifier hs-var">via_external</span></a></span><span>
</span><span id="line-1815"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1816"></span><span>
</span><span id="line-1817"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe (Module, IfG TypeEnv)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IfL TyThing
</span><a href="#local-6989586621681320147"><span class="hs-identifier hs-var">via_external</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1818"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1819"></span><span>    </span><span id="local-6989586621681320147"><span class="annot"><span class="annottext">via_external :: IfL TyThing
</span><a href="#local-6989586621681320147"><span class="hs-identifier hs-var hs-var">via_external</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">do</span><span>
</span><span id="line-1820"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320146"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681320146"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HscEnv
</span><a href="GHC.Tc.Utils.Monad.html#getTopEnv"><span class="hs-identifier hs-var">getTopEnv</span></a></span><span>
</span><span id="line-1821"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320144"><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="#local-6989586621681320144"><span class="hs-identifier hs-var">mb_thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; Name -&gt; IO (Maybe TyThing)
</span><a href="GHC.Driver.Env.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621681320146"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320159"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1822"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="#local-6989586621681320144"><span class="hs-identifier hs-var">mb_thing</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1823"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320142"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320142"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320142"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-1824"></span><span>            </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1825"></span><span>
</span><span id="line-1826"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320141"><span class="annot"><span class="annottext">MaybeErr SDoc TyThing
</span><a href="#local-6989586621681320141"><span class="hs-identifier hs-var">mb_thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall lcl. Name -&gt; IfM lcl (MaybeErr SDoc TyThing)
</span><a href="GHC.Iface.Load.html#importDecl"><span class="hs-identifier hs-var">importDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320159"><span class="hs-identifier hs-var">name</span></a></span><span>   </span><span class="hs-comment">-- It's imported; go get it</span><span>
</span><span id="line-1827"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MaybeErr SDoc TyThing
</span><a href="#local-6989586621681320141"><span class="hs-identifier hs-var">mb_thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1828"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Failed"><span class="hs-identifier hs-type">Failed</span></a></span><span> </span><span id="local-6989586621681320140"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320140"><span class="hs-identifier hs-var">err</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; IfL a
</span><a href="GHC.Tc.Utils.Monad.html#failIfM"><span class="hs-identifier hs-var">failIfM</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681320140"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1829"></span><span>            </span><span class="annot"><a href="GHC.Data.Maybe.html#Succeeded"><span class="hs-identifier hs-type">Succeeded</span></a></span><span> </span><span id="local-6989586621681320139"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320139"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320139"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1830"></span><span>        </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1831"></span><span>
</span><span id="line-1832"></span><span class="hs-comment">-- Note [Tying the knot]</span><span>
</span><span id="line-1833"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-1834"></span><span class="hs-comment">-- The if_rec_types field is used when we are compiling M.hs, which indirectly</span><span>
</span><span id="line-1835"></span><span class="hs-comment">-- imports Foo.hi, which mentions M.T Then we look up M.T in M's type</span><span>
</span><span id="line-1836"></span><span class="hs-comment">-- environment, which is splatted into if_rec_types after we've built M's type</span><span>
</span><span id="line-1837"></span><span class="hs-comment">-- envt.</span><span>
</span><span id="line-1838"></span><span class="hs-comment">--</span><span>
</span><span id="line-1839"></span><span class="hs-comment">-- This is a dark and complicated part of GHC type checking, with a lot</span><span>
</span><span id="line-1840"></span><span class="hs-comment">-- of moving parts.  Interested readers should also look at:</span><span>
</span><span id="line-1841"></span><span class="hs-comment">--</span><span>
</span><span id="line-1842"></span><span class="hs-comment">--      * Note [Knot-tying typecheckIface]</span><span>
</span><span id="line-1843"></span><span class="hs-comment">--      * Note [DFun knot-tying]</span><span>
</span><span id="line-1844"></span><span class="hs-comment">--      * Note [hsc_type_env_var hack]</span><span>
</span><span id="line-1845"></span><span class="hs-comment">--      * Note [Knot-tying fallback on boot]</span><span>
</span><span id="line-1846"></span><span class="hs-comment">--</span><span>
</span><span id="line-1847"></span><span class="hs-comment">-- There is also a wiki page on the subject, see:</span><span>
</span><span id="line-1848"></span><span class="hs-comment">--</span><span>
</span><span id="line-1849"></span><span class="hs-comment">--      https://gitlab.haskell.org/ghc/ghc/wikis/commentary/compiler/tying-the-knot</span><span>
</span><span id="line-1850"></span><span>
</span><span id="line-1851"></span><span class="hs-comment">-- Note [Knot-tying fallback on boot]</span><span>
</span><span id="line-1852"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-1853"></span><span class="hs-comment">-- Suppose that you are typechecking A.hs, which transitively imports,</span><span>
</span><span id="line-1854"></span><span class="hs-comment">-- via B.hs, A.hs-boot. When we poke on B.hs and discover that it</span><span>
</span><span id="line-1855"></span><span class="hs-comment">-- has a reference to a type T from A, what TyThing should we wire</span><span>
</span><span id="line-1856"></span><span class="hs-comment">-- it up with? Clearly, if we have already typechecked T and</span><span>
</span><span id="line-1857"></span><span class="hs-comment">-- added it into the type environment, we should go ahead and use that</span><span>
</span><span id="line-1858"></span><span class="hs-comment">-- type. But what if we haven't typechecked it yet?</span><span>
</span><span id="line-1859"></span><span class="hs-comment">--</span><span>
</span><span id="line-1860"></span><span class="hs-comment">-- For the longest time, GHC adopted the policy that this was</span><span>
</span><span id="line-1861"></span><span class="hs-comment">-- *an error condition*; that you MUST NEVER poke on B.hs's reference</span><span>
</span><span id="line-1862"></span><span class="hs-comment">-- to a T defined in A.hs until A.hs has gotten around to kind-checking</span><span>
</span><span id="line-1863"></span><span class="hs-comment">-- T and adding it to the env. However, actually ensuring this is the</span><span>
</span><span id="line-1864"></span><span class="hs-comment">-- case has proven to be a bug farm, because it's really difficult to</span><span>
</span><span id="line-1865"></span><span class="hs-comment">-- actually ensure this never happens. The problem was especially poignant</span><span>
</span><span id="line-1866"></span><span class="hs-comment">-- with type family consistency checks, which eagerly happen before any</span><span>
</span><span id="line-1867"></span><span class="hs-comment">-- typechecking takes place.</span><span>
</span><span id="line-1868"></span><span class="hs-comment">--</span><span>
</span><span id="line-1869"></span><span class="hs-comment">-- Today, we take a different strategy: if we ever try to access</span><span>
</span><span id="line-1870"></span><span class="hs-comment">-- an entity from A which doesn't exist, we just fall back on the</span><span>
</span><span id="line-1871"></span><span class="hs-comment">-- definition of A from the hs-boot file. This is complicated in</span><span>
</span><span id="line-1872"></span><span class="hs-comment">-- its own way: it means that you may end up with a mix of A.hs and</span><span>
</span><span id="line-1873"></span><span class="hs-comment">-- A.hs-boot TyThings during the course of typechecking.  We don't</span><span>
</span><span id="line-1874"></span><span class="hs-comment">-- think (and have not observed) any cases where this would cause</span><span>
</span><span id="line-1875"></span><span class="hs-comment">-- problems, but the hypothetical situation one might worry about</span><span>
</span><span id="line-1876"></span><span class="hs-comment">-- is something along these lines in Core:</span><span>
</span><span id="line-1877"></span><span class="hs-comment">--</span><span>
</span><span id="line-1878"></span><span class="hs-comment">--    case x of</span><span>
</span><span id="line-1879"></span><span class="hs-comment">--        A -&gt; e1</span><span>
</span><span id="line-1880"></span><span class="hs-comment">--        B -&gt; e2</span><span>
</span><span id="line-1881"></span><span class="hs-comment">--</span><span>
</span><span id="line-1882"></span><span class="hs-comment">-- If, when typechecking this, we find x :: T, and the T we are hooked</span><span>
</span><span id="line-1883"></span><span class="hs-comment">-- up with is the abstract one from the hs-boot file, rather than the</span><span>
</span><span id="line-1884"></span><span class="hs-comment">-- one defined in this module with constructors A and B.  But it's hard</span><span>
</span><span id="line-1885"></span><span class="hs-comment">-- to see how this could happen, especially because the reference to</span><span>
</span><span id="line-1886"></span><span class="hs-comment">-- the constructor (A and B) means that GHC will always typecheck</span><span>
</span><span id="line-1887"></span><span class="hs-comment">-- this expression *after* typechecking T.</span><span>
</span><span id="line-1888"></span><span>
</span><span id="line-1889"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-type">tcIfaceTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyCon"><span class="hs-identifier hs-type">IfaceTyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1890"></span><span id="tcIfaceTyCon"><span class="annot"><span class="annottext">tcIfaceTyCon :: IfaceTyCon -&gt; IOEnv (Env IfGblEnv IfLclEnv) TyCon
</span><a href="GHC.IfaceToCore.html#tcIfaceTyCon"><span class="hs-identifier hs-var hs-var">tcIfaceTyCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyCon"><span class="hs-identifier hs-type">IfaceTyCon</span></a></span><span> </span><span id="local-6989586621681320137"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320137"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681320136"><span class="annot"><span class="annottext">IfaceTyConInfo
</span><a href="#local-6989586621681320136"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1891"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320135"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320135"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320137"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1892"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceTyConInfo -&gt; PromotionFlag
</span><a href="GHC.Iface.Type.html#ifaceTyConIsPromoted"><span class="hs-identifier hs-var">ifaceTyConIsPromoted</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyConInfo
</span><a href="#local-6989586621681320136"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1893"></span><span>           </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="GHC.Types.Basic.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; TyCon
</span><a href="GHC.Types.TyThing.html#tyThingTyCon"><span class="hs-identifier hs-var">tyThingTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320135"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1894"></span><span>           </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="GHC.Types.Basic.html#IsPromoted"><span class="hs-identifier hs-var">IsPromoted</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#promoteDataCon"><span class="hs-identifier hs-var">promoteDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; DataCon
</span><a href="GHC.Types.TyThing.html#tyThingDataCon"><span class="hs-identifier hs-var">tyThingDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320135"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1895"></span><span>
</span><span id="line-1896"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCoAxiom"><span class="hs-identifier hs-type">tcIfaceCoAxiom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1897"></span><span id="tcIfaceCoAxiom"><span class="annot"><span class="annottext">tcIfaceCoAxiom :: Name -&gt; IfL (CoAxiom Branched)
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiom"><span class="hs-identifier hs-var hs-var">tcIfaceCoAxiom</span></a></span></span><span> </span><span id="local-6989586621681320131"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320131"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320130"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320130"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceImplicit"><span class="hs-identifier hs-var">tcIfaceImplicit</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320131"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1898"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; CoAxiom Branched
</span><a href="GHC.Types.TyThing.html#tyThingCoAxiom"><span class="hs-identifier hs-var">tyThingCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320130"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1899"></span><span>
</span><span id="line-1900"></span><span>
</span><span id="line-1901"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceCoAxiomRule"><span class="hs-identifier hs-type">tcIfaceCoAxiomRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfLclName"><span class="hs-identifier hs-type">IfLclName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span>
</span><span id="line-1902"></span><span class="hs-comment">-- Unlike CoAxioms, which arise form user 'type instance' declarations,</span><span>
</span><span id="line-1903"></span><span class="hs-comment">-- there are a fixed set of CoAxiomRules,</span><span>
</span><span id="line-1904"></span><span class="hs-comment">-- currently enumerated in typeNatCoAxiomRules</span><span>
</span><span id="line-1905"></span><span id="tcIfaceCoAxiomRule"><span class="annot"><span class="annottext">tcIfaceCoAxiomRule :: FastString -&gt; IfL CoAxiomRule
</span><a href="GHC.IfaceToCore.html#tcIfaceCoAxiomRule"><span class="hs-identifier hs-var hs-var">tcIfaceCoAxiomRule</span></a></span></span><span> </span><span id="local-6989586621681320128"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320128"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-1906"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall key elt. Uniquable key =&gt; UniqFM key elt -&gt; key -&gt; Maybe elt
</span><a href="GHC.Types.Unique.FM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM FastString CoAxiomRule
</span><a href="GHC.Builtin.Types.Literals.html#typeNatCoAxiomRules"><span class="hs-identifier hs-var">typeNatCoAxiomRules</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320128"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1907"></span><span>        </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320127"><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681320127"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><a href="#local-6989586621681320127"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-1908"></span><span>        </span><span class="annot"><span class="annottext">Maybe CoAxiomRule
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceCoAxiomRule&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320128"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1909"></span><span>
</span><span id="line-1910"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceDataCon"><span class="hs-identifier hs-type">tcIfaceDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-1911"></span><span id="tcIfaceDataCon"><span class="annot"><span class="annottext">tcIfaceDataCon :: Name -&gt; IfL DataCon
</span><a href="GHC.IfaceToCore.html#tcIfaceDataCon"><span class="hs-identifier hs-var hs-var">tcIfaceDataCon</span></a></span></span><span> </span><span id="local-6989586621681320126"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320126"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320125"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320125"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320126"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1912"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320125"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1913"></span><span>                                </span><span class="annot"><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681320123"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320123"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681320123"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1914"></span><span>                                </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceDataCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320126"><span class="hs-identifier hs-var">name</span></a></span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320125"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1915"></span><span>
</span><span id="line-1916"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceConLike"><span class="hs-identifier hs-type">tcIfaceConLike</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span>
</span><span id="line-1917"></span><span id="tcIfaceConLike"><span class="annot"><span class="annottext">tcIfaceConLike :: Name -&gt; IfL ConLike
</span><a href="GHC.IfaceToCore.html#tcIfaceConLike"><span class="hs-identifier hs-var hs-var">tcIfaceConLike</span></a></span></span><span> </span><span id="local-6989586621681320122"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320122"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320121"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320121"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320122"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1918"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320121"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1919"></span><span>                                </span><span class="annot"><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span id="local-6989586621681320120"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681320120"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621681320120"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-1920"></span><span>                                </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceConLike&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320122"><span class="hs-identifier hs-var">name</span></a></span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320121"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1921"></span><span>
</span><span id="line-1922"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceExtId"><span class="hs-identifier hs-type">tcIfaceExtId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1923"></span><span id="tcIfaceExtId"><span class="annot"><span class="annottext">tcIfaceExtId :: Name -&gt; IfL CoreBndr
</span><a href="GHC.IfaceToCore.html#tcIfaceExtId"><span class="hs-identifier hs-var hs-var">tcIfaceExtId</span></a></span></span><span> </span><span id="local-6989586621681320118"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320118"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320117"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320117"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320118"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1924"></span><span>                       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320117"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1925"></span><span>                          </span><span class="annot"><a href="GHC.Types.TyThing.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621681320116"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320116"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320116"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1926"></span><span>                          </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceExtId&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320118"><span class="hs-identifier hs-var">name</span></a></span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320117"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1927"></span><span>
</span><span id="line-1928"></span><span class="hs-comment">-- See Note [Resolving never-exported Names] in GHC.IfaceToCore</span><span>
</span><span id="line-1929"></span><span class="annot"><a href="GHC.IfaceToCore.html#tcIfaceImplicit"><span class="hs-identifier hs-type">tcIfaceImplicit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-1930"></span><span id="tcIfaceImplicit"><span class="annot"><span class="annottext">tcIfaceImplicit :: Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceImplicit"><span class="hs-identifier hs-var hs-var">tcIfaceImplicit</span></a></span></span><span> </span><span id="local-6989586621681320115"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320115"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1931"></span><span>    </span><span id="local-6989586621681320114"><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320114"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl lcl
</span><a href="GHC.Tc.Utils.Monad.html#getLclEnv"><span class="hs-identifier hs-var">getLclEnv</span></a></span><span>
</span><span id="line-1932"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfLclEnv -&gt; Maybe TypeEnv
</span><a href="GHC.Tc.Types.html#if_implicits_env"><span class="hs-identifier hs-var">if_implicits_env</span></a></span><span> </span><span class="annot"><span class="annottext">IfLclEnv
</span><a href="#local-6989586621681320114"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1933"></span><span>        </span><span class="annot"><span class="annottext">Maybe TypeEnv
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfL TyThing
</span><a href="GHC.IfaceToCore.html#tcIfaceGlobal"><span class="hs-identifier hs-var">tcIfaceGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320115"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1934"></span><span>        </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320112"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320112"><span class="hs-identifier hs-var">tenv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1935"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; Maybe TyThing
</span><a href="GHC.Types.TypeEnv.html#lookupTypeEnv"><span class="hs-identifier hs-var">lookupTypeEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320112"><span class="hs-identifier hs-var">tenv</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320115"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1936"></span><span>                </span><span class="annot"><span class="annottext">Maybe TyThing
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcIfaceInst&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320115"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621681320112"><span class="hs-identifier hs-var">tenv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1937"></span><span>                </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320110"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320110"><span class="hs-identifier hs-var">tything</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681320110"><span class="hs-identifier hs-var">tything</span></a></span><span>
</span><span id="line-1938"></span><span>
</span><span id="line-1939"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Bindings
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1946"></span><span>
</span><span id="line-1947"></span><span id="local-6989586621681322180"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceId"><span class="hs-identifier hs-type">bindIfaceId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322180"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322180"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1948"></span><span id="bindIfaceId"><span class="annot"><span class="annottext">bindIfaceId :: forall a. IfaceIdBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceId"><span class="hs-identifier hs-var hs-var">bindIfaceId</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320105"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320105"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320104"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320104"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681320103"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320103"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320102"><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320102"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1949"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320101"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320101"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320104"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1950"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320100"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320100"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320103"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1951"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320099"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320099"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320105"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1952"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681320098"><span class="annot"><span class="annottext">id :: CoreBndr
</span><a href="#local-6989586621681320098"><span class="hs-identifier hs-var hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; Type -&gt; CoreBndr
</span><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320101"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320099"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320100"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1953"></span><span>          </span><span class="hs-comment">-- We should not have &quot;OrCoVar&quot; here, this is a bug (#17545)</span><span>
</span><span id="line-1954"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceIdEnv"><span class="hs-identifier hs-var">extendIfaceIdEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320098"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320102"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320098"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1955"></span><span>
</span><span id="line-1956"></span><span id="local-6989586621681322343"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceIds"><span class="hs-identifier hs-type">bindIfaceIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322343"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322343"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1957"></span><span id="bindIfaceIds"><span class="annot"><span class="annottext">bindIfaceIds :: forall a. [IfaceIdBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceIds"><span class="hs-identifier hs-var hs-var">bindIfaceIds</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681320097"><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320097"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320097"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1958"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceIds"><span class="hs-identifier hs-var">bindIfaceIds</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320096"><span class="annot"><span class="annottext">IfaceIdBndr
</span><a href="#local-6989586621681320096"><span class="hs-identifier hs-var">b</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681320095"><span class="annot"><span class="annottext">[IfaceIdBndr]
</span><a href="#local-6989586621681320095"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320094"><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320094"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1959"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceIdBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceId"><span class="hs-identifier hs-var">bindIfaceId</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdBndr
</span><a href="#local-6989586621681320096"><span class="hs-identifier hs-var">b</span></a></span><span>   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320093"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320093"><span class="hs-identifier hs-var">b'</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1960"></span><span>    </span><span class="annot"><span class="annottext">forall a. [IfaceIdBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceIds"><span class="hs-identifier hs-var">bindIfaceIds</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceIdBndr]
</span><a href="#local-6989586621681320095"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320092"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320092"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1961"></span><span>    </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320094"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320093"><span class="hs-identifier hs-var">b'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320092"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1962"></span><span>
</span><span id="line-1963"></span><span id="local-6989586621681322265"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-type">bindIfaceBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322265"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322265"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1964"></span><span id="bindIfaceBndr"><span class="annot"><span class="annottext">bindIfaceBndr :: forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var hs-var">bindIfaceBndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a></span><span> </span><span id="local-6989586621681320091"><span class="annot"><span class="annottext">IfaceIdBndr
</span><a href="#local-6989586621681320091"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320090"><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320090"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1965"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceIdBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceId"><span class="hs-identifier hs-var">bindIfaceId</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdBndr
</span><a href="#local-6989586621681320091"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320090"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-1966"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a></span><span> </span><span id="local-6989586621681320089"><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681320089"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320088"><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320088"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1967"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceTvBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681320089"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320088"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-1968"></span><span>
</span><span id="line-1969"></span><span id="local-6989586621681322333"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-type">bindIfaceBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322333"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1970"></span><span id="bindIfaceBndrs"><span class="annot"><span class="annottext">bindIfaceBndrs :: forall a. [IfaceBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-var hs-var">bindIfaceBndrs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span id="local-6989586621681320086"><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320086"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320086"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1971"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320085"><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320085"><span class="hs-identifier hs-var">b</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681320084"><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681320084"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320083"><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320083"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1972"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320085"><span class="hs-identifier hs-var">b</span></a></span><span>     </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320082"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320082"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1973"></span><span>    </span><span class="annot"><span class="annottext">forall a. [IfaceBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndrs"><span class="hs-identifier hs-var">bindIfaceBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceBndr]
</span><a href="#local-6989586621681320084"><span class="hs-identifier hs-var">bs</span></a></span><span>   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320081"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320081"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1974"></span><span>    </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320083"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320082"><span class="hs-identifier hs-var">b'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320081"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1975"></span><span>
</span><span id="line-1976"></span><span class="hs-comment">-----------------------</span><span>
</span><span id="line-1977"></span><span id="local-6989586621681322365"><span id="local-6989586621681322367"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceForAllBndrs"><span class="hs-identifier hs-type">bindIfaceForAllBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322367"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322367"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322365"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322365"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1978"></span><span id="bindIfaceForAllBndrs"><span class="annot"><span class="annottext">bindIfaceForAllBndrs :: forall vis a.
[VarBndr IfaceBndr vis]
-&gt; ([VarBndr CoreBndr vis] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndrs"><span class="hs-identifier hs-var hs-var">bindIfaceForAllBndrs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681320079"><span class="annot"><span class="annottext">[VarBndr CoreBndr vis] -&gt; IfL a
</span><a href="#local-6989586621681320079"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr CoreBndr vis] -&gt; IfL a
</span><a href="#local-6989586621681320079"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1979"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceForAllBndrs"><span class="hs-identifier hs-var">bindIfaceForAllBndrs</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320078"><span class="annot"><span class="annottext">VarBndr IfaceBndr vis
</span><a href="#local-6989586621681320078"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681320077"><span class="annot"><span class="annottext">[VarBndr IfaceBndr vis]
</span><a href="#local-6989586621681320077"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320076"><span class="annot"><span class="annottext">[VarBndr CoreBndr vis] -&gt; IfL a
</span><a href="#local-6989586621681320076"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1980"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall vis a.
VarBndr IfaceBndr vis -&gt; (CoreBndr -&gt; vis -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndr"><span class="hs-identifier hs-var">bindIfaceForAllBndr</span></a></span><span> </span><span class="annot"><span class="annottext">VarBndr IfaceBndr vis
</span><a href="#local-6989586621681320078"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320075"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320075"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681320074"><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681320074"><span class="hs-identifier hs-var">vis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1981"></span><span>    </span><span class="annot"><span class="annottext">forall vis a.
[VarBndr IfaceBndr vis]
-&gt; ([VarBndr CoreBndr vis] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndrs"><span class="hs-identifier hs-var">bindIfaceForAllBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr IfaceBndr vis]
</span><a href="#local-6989586621681320077"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320073"><span class="annot"><span class="annottext">[VarBndr CoreBndr vis]
</span><a href="#local-6989586621681320073"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1982"></span><span>    </span><span class="annot"><span class="annottext">[VarBndr CoreBndr vis] -&gt; IfL a
</span><a href="#local-6989586621681320076"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320075"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681320074"><span class="hs-identifier hs-var">vis</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[VarBndr CoreBndr vis]
</span><a href="#local-6989586621681320073"><span class="hs-identifier hs-var">bndrs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1983"></span><span>
</span><span id="line-1984"></span><span id="local-6989586621681322271"><span id="local-6989586621681322272"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceForAllBndr"><span class="hs-identifier hs-type">bindIfaceForAllBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322272"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681322272"><span class="hs-identifier hs-type">vis</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322271"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322271"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1985"></span><span id="bindIfaceForAllBndr"><span class="annot"><span class="annottext">bindIfaceForAllBndr :: forall vis a.
VarBndr IfaceBndr vis -&gt; (CoreBndr -&gt; vis -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceForAllBndr"><span class="hs-identifier hs-var hs-var">bindIfaceForAllBndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a></span><span> </span><span id="local-6989586621681320072"><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681320072"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320071"><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681320071"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320070"><span class="annot"><span class="annottext">CoreBndr -&gt; vis -&gt; IfL a
</span><a href="#local-6989586621681320070"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1986"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceTvBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681320072"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320069"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320069"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; vis -&gt; IfL a
</span><a href="#local-6989586621681320070"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320069"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681320071"><span class="hs-identifier hs-var">vis</span></a></span><span>
</span><span id="line-1987"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceForAllBndr"><span class="hs-identifier hs-var">bindIfaceForAllBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceIdBndr"><span class="hs-identifier hs-type">IfaceIdBndr</span></a></span><span> </span><span id="local-6989586621681320068"><span class="annot"><span class="annottext">IfaceIdBndr
</span><a href="#local-6989586621681320068"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320067"><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681320067"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320066"><span class="annot"><span class="annottext">CoreBndr -&gt; vis -&gt; IfL a
</span><a href="#local-6989586621681320066"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1988"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceIdBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceId"><span class="hs-identifier hs-var">bindIfaceId</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceIdBndr
</span><a href="#local-6989586621681320068"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320065"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320065"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; vis -&gt; IfL a
</span><a href="#local-6989586621681320066"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320065"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681320067"><span class="hs-identifier hs-var">vis</span></a></span><span>
</span><span id="line-1989"></span><span>
</span><span id="line-1990"></span><span id="local-6989586621681322176"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyVar"><span class="hs-identifier hs-type">bindIfaceTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322176"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322176"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1991"></span><span id="bindIfaceTyVar"><span class="annot"><span class="annottext">bindIfaceTyVar :: forall a. IfaceTvBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVar"><span class="hs-identifier hs-var hs-var">bindIfaceTyVar</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320062"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320062"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681320061"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320061"><span class="hs-identifier hs-var">kind</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320060"><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320060"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1992"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320059"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320059"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IOEnv (Env IfGblEnv IfLclEnv) Name
</span><a href="GHC.Iface.Env.html#newIfaceName"><span class="hs-identifier hs-var">newIfaceName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681320062"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1993"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681320058"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320058"><span class="hs-identifier hs-var">tyvar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfaceType -&gt; IfL CoreBndr
</span><a href="GHC.IfaceToCore.html#mk_iface_tyvar"><span class="hs-identifier hs-var">mk_iface_tyvar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320059"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320061"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-1994"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. [CoreBndr] -&gt; IfL a -&gt; IfL a
</span><a href="GHC.Iface.Env.html#extendIfaceTyVarEnv"><span class="hs-identifier hs-var">extendIfaceTyVarEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320058"><span class="hs-identifier hs-var">tyvar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr -&gt; IfL a
</span><a href="#local-6989586621681320060"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320058"><span class="hs-identifier hs-var">tyvar</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1995"></span><span>
</span><span id="line-1996"></span><span id="local-6989586621681322342"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyVars"><span class="hs-identifier hs-type">bindIfaceTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTvBndr"><span class="hs-identifier hs-type">IfaceTvBndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322342"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322342"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1997"></span><span id="bindIfaceTyVars"><span class="annot"><span class="annottext">bindIfaceTyVars :: forall a. [IfaceTvBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVars"><span class="hs-identifier hs-var hs-var">bindIfaceTyVars</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681320056"><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320056"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320056"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1998"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyVars"><span class="hs-identifier hs-var">bindIfaceTyVars</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320055"><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681320055"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681320054"><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681320054"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320053"><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320053"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1999"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceTvBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVar"><span class="hs-identifier hs-var">bindIfaceTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTvBndr
</span><a href="#local-6989586621681320055"><span class="hs-identifier hs-var">bndr</span></a></span><span>   </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320052"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320052"><span class="hs-identifier hs-var">tv</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2000"></span><span>    </span><span class="annot"><span class="annottext">forall a. [IfaceTvBndr] -&gt; ([CoreBndr] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyVars"><span class="hs-identifier hs-var">bindIfaceTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTvBndr]
</span><a href="#local-6989586621681320054"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320051"><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320051"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2001"></span><span>    </span><span class="annot"><span class="annottext">[CoreBndr] -&gt; IfL a
</span><a href="#local-6989586621681320053"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320052"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CoreBndr]
</span><a href="#local-6989586621681320051"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2002"></span><span>
</span><span id="line-2003"></span><span class="annot"><a href="GHC.IfaceToCore.html#mk_iface_tyvar"><span class="hs-identifier hs-type">mk_iface_tyvar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceKind"><span class="hs-identifier hs-type">IfaceKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-2004"></span><span id="mk_iface_tyvar"><span class="annot"><span class="annottext">mk_iface_tyvar :: Name -&gt; IfaceType -&gt; IfL CoreBndr
</span><a href="GHC.IfaceToCore.html#mk_iface_tyvar"><span class="hs-identifier hs-var hs-var">mk_iface_tyvar</span></a></span></span><span> </span><span id="local-6989586621681320049"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320049"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681320048"><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320048"><span class="hs-identifier hs-var">ifKind</span></a></span></span><span>
</span><span id="line-2005"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320047"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320047"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceType -&gt; IfL Type
</span><a href="GHC.IfaceToCore.html#tcIfaceType"><span class="hs-identifier hs-var">tcIfaceType</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceType
</span><a href="#local-6989586621681320048"><span class="hs-identifier hs-var">ifKind</span></a></span><span>
</span><span id="line-2006"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; CoreBndr
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">Var.mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681320049"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681320047"><span class="hs-identifier hs-var">kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span id="local-6989586621681320045"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders"><span class="hs-identifier hs-type">bindIfaceTyConBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyConBinder"><span class="hs-identifier hs-type">IfaceTyConBinder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2009"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyConBinder"><span class="hs-identifier hs-type">TyConBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681320045"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681320045"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2010"></span><span id="bindIfaceTyConBinders"><span class="annot"><span class="annottext">bindIfaceTyConBinders :: forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var hs-var">bindIfaceTyConBinders</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681320044"><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320044"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320044"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2011"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var">bindIfaceTyConBinders</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320043"><span class="annot"><span class="annottext">IfaceTyConBinder
</span><a href="#local-6989586621681320043"><span class="hs-identifier hs-var">b</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681320042"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681320042"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320041"><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320041"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2012"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a)
-&gt; IfaceTyConBinder -&gt; (TyConBinder -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinderX"><span class="hs-identifier hs-var">bindIfaceTyConBinderX</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyConBinder
</span><a href="#local-6989586621681320043"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320039"><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621681320039"><span class="hs-identifier hs-var">b'</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2013"></span><span>    </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders"><span class="hs-identifier hs-var">bindIfaceTyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681320042"><span class="hs-identifier hs-var">bs</span></a></span><span>              </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681320038"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681320038"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2014"></span><span>    </span><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320041"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621681320039"><span class="hs-identifier hs-var">b'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681320038"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2015"></span><span>
</span><span id="line-2016"></span><span id="local-6989586621681322415"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-type">bindIfaceTyConBinders_AT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyConBinder"><span class="hs-identifier hs-type">IfaceTyConBinder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2017"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyConBinder"><span class="hs-identifier hs-type">TyConBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322415"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322415"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2018"></span><span class="hs-comment">-- Used for type variable in nested associated data/type declarations</span><span>
</span><span id="line-2019"></span><span class="hs-comment">-- where some of the type variables are already in scope</span><span>
</span><span id="line-2020"></span><span class="hs-comment">--    class C a where { data T a b }</span><span>
</span><span id="line-2021"></span><span class="hs-comment">-- Here 'a' is in scope when we look at the 'data T'</span><span>
</span><span id="line-2022"></span><span id="bindIfaceTyConBinders_AT"><span class="annot"><span class="annottext">bindIfaceTyConBinders_AT :: forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var hs-var">bindIfaceTyConBinders_AT</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681320037"><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320037"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2023"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320037"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2024"></span><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681320036"><span class="annot"><span class="annottext">IfaceTyConBinder
</span><a href="#local-6989586621681320036"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681320035"><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681320035"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320034"><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320034"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2025"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a)
-&gt; IfaceTyConBinder -&gt; (TyConBinder -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinderX"><span class="hs-identifier hs-var">bindIfaceTyConBinderX</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="#local-6989586621681320033"><span class="hs-identifier hs-var">bind_tv</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTyConBinder
</span><a href="#local-6989586621681320036"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320032"><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621681320032"><span class="hs-identifier hs-var">b'</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2026"></span><span>    </span><span class="annot"><span class="annottext">forall a. [IfaceTyConBinder] -&gt; ([TyConBinder] -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinders_AT"><span class="hs-identifier hs-var">bindIfaceTyConBinders_AT</span></a></span><span>      </span><span class="annot"><span class="annottext">[IfaceTyConBinder]
</span><a href="#local-6989586621681320035"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320031"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681320031"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2027"></span><span>    </span><span class="annot"><span class="annottext">[TyConBinder] -&gt; IfL a
</span><a href="#local-6989586621681320034"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621681320032"><span class="hs-identifier hs-var">b'</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681320031"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2028"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2029"></span><span>    </span><span id="local-6989586621681320033"><span class="annot"><span class="annottext">bind_tv :: IfaceBndr
-&gt; (CoreBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) b)
-&gt; IOEnv (Env IfGblEnv IfLclEnv) b
</span><a href="#local-6989586621681320033"><span class="hs-identifier hs-var hs-var">bind_tv</span></a></span></span><span> </span><span id="local-6989586621681320029"><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320029"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681320028"><span class="annot"><span class="annottext">CoreBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) b
</span><a href="#local-6989586621681320028"><span class="hs-identifier hs-var">thing</span></a></span></span><span>
</span><span id="line-2030"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681320027"><span class="annot"><span class="annottext">Maybe CoreBndr
</span><a href="#local-6989586621681320027"><span class="hs-identifier hs-var">mb_tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IfaceBndr -&gt; IfL (Maybe CoreBndr)
</span><a href="GHC.Iface.Env.html#lookupIfaceVar"><span class="hs-identifier hs-var">lookupIfaceVar</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320029"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-2031"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CoreBndr
</span><a href="#local-6989586621681320027"><span class="hs-identifier hs-var">mb_tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2032"></span><span>               </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681320025"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320025"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) b
</span><a href="#local-6989586621681320028"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320025"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-2033"></span><span>               </span><span class="annot"><span class="annottext">Maybe CoreBndr
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceBndr"><span class="hs-identifier hs-var">bindIfaceBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320029"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr -&gt; IOEnv (Env IfGblEnv IfLclEnv) b
</span><a href="#local-6989586621681320028"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2034"></span><span>
</span><span id="line-2035"></span><span id="local-6989586621681322167"><span class="annot"><a href="GHC.IfaceToCore.html#bindIfaceTyConBinderX"><span class="hs-identifier hs-type">bindIfaceTyConBinderX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Iface.Type.html#IfaceBndr"><span class="hs-identifier hs-type">IfaceBndr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322167"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322167"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2036"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Iface.Type.html#IfaceTyConBinder"><span class="hs-identifier hs-type">IfaceTyConBinder</span></a></span><span>
</span><span id="line-2037"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#TyConBinder"><span class="hs-identifier hs-type">TyConBinder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322167"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#IfL"><span class="hs-identifier hs-type">IfL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681322167"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2038"></span><span id="bindIfaceTyConBinderX"><span class="annot"><span class="annottext">bindIfaceTyConBinderX :: forall a.
(IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a)
-&gt; IfaceTyConBinder -&gt; (TyConBinder -&gt; IfL a) -&gt; IfL a
</span><a href="GHC.IfaceToCore.html#bindIfaceTyConBinderX"><span class="hs-identifier hs-var hs-var">bindIfaceTyConBinderX</span></a></span></span><span> </span><span id="local-6989586621681320024"><span class="annot"><span class="annottext">IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="#local-6989586621681320024"><span class="hs-identifier hs-var">bind_tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681320023"><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320023"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681320022"><span class="annot"><span class="annottext">TyConBndrVis
</span><a href="#local-6989586621681320022"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681320021"><span class="annot"><span class="annottext">TyConBinder -&gt; IfL a
</span><a href="#local-6989586621681320021"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-2039"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceBndr -&gt; (CoreBndr -&gt; IfL a) -&gt; IfL a
</span><a href="#local-6989586621681320024"><span class="hs-identifier hs-var">bind_tv</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBndr
</span><a href="#local-6989586621681320023"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681320020"><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320020"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2040"></span><span>    </span><span class="annot"><span class="annottext">TyConBinder -&gt; IfL a
</span><a href="#local-6989586621681320021"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">CoreBndr
</span><a href="#local-6989586621681320020"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">TyConBndrVis
</span><a href="#local-6989586621681320022"><span class="hs-identifier hs-var">vis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2041"></span></pre></body></html>