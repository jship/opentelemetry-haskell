<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP                 #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns   #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-record-updates #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Tc.Errors</span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.html#reportUnsolved"><span class="hs-identifier">reportUnsolved</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#reportAllUnsolved"><span class="hs-identifier">reportAllUnsolved</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#warnAllUnsolved"><span class="hs-identifier">warnAllUnsolved</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.html#warnDefaulting"><span class="hs-identifier">warnDefaulting</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.html#solverDepthErrorTcS"><span class="hs-identifier">solverDepthErrorTcS</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html"><span class="hs-identifier">GHC.Tc.Types</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html"><span class="hs-identifier">GHC.Tc.Types.Constraint</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcMType.html"><span class="hs-identifier">GHC.Tc.Utils.TcMType</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html"><span class="hs-identifier">GHC.Tc.Utils.Env</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html#tcInitTidyEnv"><span class="hs-identifier">tcInitTidyEnv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Unify.html"><span class="hs-identifier">GHC.Tc.Utils.Unify</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Unify.html#checkTyVarEq"><span class="hs-identifier">checkTyVarEq</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html"><span class="hs-identifier">GHC.Tc.Types.Origin</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html"><span class="hs-identifier">GHC.Rename.Unbound</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#unknownNameSuggestions"><span class="hs-identifier">unknownNameSuggestions</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier">pprTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprWithExplicitKindsWhen"><span class="hs-identifier">pprWithExplicitKindsWhen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprSourceTyCon"><span class="hs-identifier">pprSourceTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprWithTYPE"><span class="hs-identifier">pprWithTYPE</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html"><span class="hs-identifier">GHC.Core.Unify</span></a></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html#tcMatchTys"><span class="hs-identifier">tcMatchTys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html#flattenTys"><span class="hs-identifier">flattenTys</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Instance.Family.html"><span class="hs-identifier">GHC.Tc.Instance.Family</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Instantiate.html"><span class="hs-identifier">GHC.Tc.Utils.Instantiate</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.EvTerm.html"><span class="hs-identifier">GHC.Tc.Types.EvTerm</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html"><span class="hs-identifier">GHC.Hs.Binds</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier">PatSynBind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier">lookupGRE_Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier">mkRdrUnqual</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#typeableClassName"><span class="hs-identifier">typeableClassName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier">pprLocMsgEnvelope</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier">nonDetEltsUniqSet</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier">ConLike</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">O</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Ppr.html"><span class="hs-identifier">GHC.Driver.Ppr</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#equivClasses"><span class="hs-identifier">equivClasses</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.2.7/src/GHC-LanguageExtensions.html#"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html"><span class="hs-identifier">GHC.Utils.FV</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier">fvVarList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#unionFV"><span class="hs-identifier">unionFV</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier">when</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad.html#foldM"><span class="hs-identifier">foldM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Foldable.html#forM_"><span class="hs-identifier">forM_</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Foldable.html#"><span class="hs-identifier">Data.Foldable</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Foldable.html#toList"><span class="hs-identifier">toList</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier">partition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapAccumL"><span class="hs-identifier">mapAccumL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-OldList.html#sortBy"><span class="hs-identifier">sortBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-OldList.html#unfoldr"><span class="hs-identifier">unfoldr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Hole.html"><span class="hs-identifier">GHC.Tc.Errors.Hole</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Hole.html#findValidHoleFits"><span class="hs-identifier">findValidHoleFits</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-- import Data.Semigroup   ( Semigroup )</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Semigroup.html#"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Semigroup</span></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\section{Errors and contexts}
*                                                                      *
************************************************************************

ToDo: for these error messages, should we note the location as coming
from the insts, or just whatever seems to be around in the monad just
now?

Note [Deferring coercion errors to runtime]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
While developing, sometimes it is desirable to allow compilation to succeed even
if there are type errors in the code. Consider the following case:

  module Main where

  a :: Int
  a = 'a'

  main = print &quot;b&quot;

Even though `a` is ill-typed, it is not used in the end, so if all that we're
interested in is `main` it is handy to be able to ignore the problems in `a`.

Since we treat type equalities as evidence, this is relatively simple. Whenever
we run into a type mismatch in GHC.Tc.Utils.Unify, we normally just emit an error. But it
is always safe to defer the mismatch to the main constraint solver. If we do
that, `a` will get transformed into

  co :: Int ~ Char
  co = ...

  a :: Int
  a = 'a' `cast` co

The constraint solver would realize that `co` is an insoluble constraint, and
emit an error with `reportUnsolved`. But we can also replace the right-hand side
of `co` with `error &quot;Deferred type error: Int ~ Char&quot;`. This allows the program
to compile, and it will run fine unless we evaluate `a`. This is what
`deferErrorsToRuntime` does.

It does this by keeping track of which errors correspond to which coercion
in GHC.Tc.Errors. GHC.Tc.Errors.reportTidyWanteds does not print the errors
and does not fail if -fdefer-type-errors is on, so that we can continue
compilation. The errors are turned into warnings in `reportUnsolved`.
-}</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | Report unsolved goals as errors or warnings. We may also turn some into</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- deferred run-time errors if `-fdefer-type-errors` is on.</span><span>
</span><span id="line-132"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportUnsolved"><span class="hs-identifier hs-type">reportUnsolved</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span id="reportUnsolved"><span class="annot"><span class="annottext">reportUnsolved :: WantedConstraints -&gt; TcM (Bag EvBind)
</span><a href="GHC.Tc.Errors.html#reportUnsolved"><span class="hs-identifier hs-var hs-var">reportUnsolved</span></a></span></span><span> </span><span id="local-6989586621681343622"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343622"><span class="hs-identifier hs-var">wanted</span></a></span></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343621"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343621"><span class="hs-identifier hs-var">binds_var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM EvBindsVar
</span><a href="GHC.Tc.Utils.Monad.html#newTcEvBinds"><span class="hs-identifier hs-var">newTcEvBinds</span></a></span><span>
</span><span id="line-135"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343619"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343619"><span class="hs-identifier hs-var">defer_errors</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DeferTypeErrors"><span class="hs-identifier hs-var">Opt_DeferTypeErrors</span></a></span><span>
</span><span id="line-136"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343616"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343616"><span class="hs-identifier hs-var">warn_errors</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnDeferredTypeErrors"><span class="hs-identifier hs-var">Opt_WarnDeferredTypeErrors</span></a></span><span> </span><span class="hs-comment">-- implement #10283</span><span>
</span><span id="line-137"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343613"><span class="annot"><span class="annottext">type_errors :: TypeErrorChoice
</span><a href="#local-6989586621681343613"><span class="hs-identifier hs-var hs-var">type_errors</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343619"><span class="hs-identifier hs-var">defer_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span><span>
</span><span id="line-138"></span><span>                         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343616"><span class="hs-identifier hs-var">warn_errors</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeWarn"><span class="hs-identifier hs-var">TypeWarn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnDeferredTypeErrors"><span class="hs-identifier hs-var">Opt_WarnDeferredTypeErrors</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>                         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeDefer"><span class="hs-identifier hs-var">TypeDefer</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343607"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343607"><span class="hs-identifier hs-var">defer_holes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DeferTypedHoles"><span class="hs-identifier hs-var">Opt_DeferTypedHoles</span></a></span><span>
</span><span id="line-142"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343605"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343605"><span class="hs-identifier hs-var">warn_holes</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnTypedHoles"><span class="hs-identifier hs-var">Opt_WarnTypedHoles</span></a></span><span>
</span><span id="line-143"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343603"><span class="annot"><span class="annottext">expr_holes :: HoleChoice
</span><a href="#local-6989586621681343603"><span class="hs-identifier hs-var hs-var">expr_holes</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343607"><span class="hs-identifier hs-var">defer_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-144"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343605"><span class="hs-identifier hs-var">warn_holes</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>
</span><span id="line-145"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343599"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343599"><span class="hs-identifier hs-var">partial_sigs</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PartialTypeSignatures</span></span><span>
</span><span id="line-148"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343596"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343596"><span class="hs-identifier hs-var">warn_partial_sigs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnPartialTypeSignatures"><span class="hs-identifier hs-var">Opt_WarnPartialTypeSignatures</span></a></span><span>
</span><span id="line-149"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343594"><span class="annot"><span class="annottext">type_holes :: HoleChoice
</span><a href="#local-6989586621681343594"><span class="hs-identifier hs-var hs-var">type_holes</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343599"><span class="hs-identifier hs-var">partial_sigs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-150"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343596"><span class="hs-identifier hs-var">warn_partial_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>
</span><span id="line-151"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343593"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343593"><span class="hs-identifier hs-var">defer_out_of_scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_DeferOutOfScopeVariables"><span class="hs-identifier hs-var">Opt_DeferOutOfScopeVariables</span></a></span><span>
</span><span id="line-154"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343591"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343591"><span class="hs-identifier hs-var">warn_out_of_scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnDeferredOutOfScopeVariables"><span class="hs-identifier hs-var">Opt_WarnDeferredOutOfScopeVariables</span></a></span><span>
</span><span id="line-155"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343589"><span class="annot"><span class="annottext">out_of_scope_holes :: HoleChoice
</span><a href="#local-6989586621681343589"><span class="hs-identifier hs-var hs-var">out_of_scope_holes</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343593"><span class="hs-identifier hs-var">defer_out_of_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-156"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343591"><span class="hs-identifier hs-var">warn_out_of_scope</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>
</span><span id="line-157"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; EvBindsVar
-&gt; WantedConstraints
-&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#report_unsolved"><span class="hs-identifier hs-var">report_unsolved</span></a></span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="#local-6989586621681343613"><span class="hs-identifier hs-var">type_errors</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343603"><span class="hs-identifier hs-var">expr_holes</span></a></span><span>
</span><span id="line-160"></span><span>                         </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343594"><span class="hs-identifier hs-var">type_holes</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343589"><span class="hs-identifier hs-var">out_of_scope_holes</span></a></span><span>
</span><span id="line-161"></span><span>                         </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343621"><span class="hs-identifier hs-var">binds_var</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343622"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343587"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621681343587"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; TcM EvBindMap
</span><a href="GHC.Tc.Utils.Monad.html#getTcEvBindsMap"><span class="hs-identifier hs-var">getTcEvBindsMap</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343621"><span class="hs-identifier hs-var">binds_var</span></a></span><span>
</span><span id="line-164"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; Bag EvBind
</span><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier hs-var">evBindMapBinds</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621681343587"><span class="hs-identifier hs-var">ev_binds</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">-- | Report *all* unsolved goals as errors, even if -fdefer-type-errors is on</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- However, do not make any evidence bindings, because we don't</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- have any convenient place to put them.</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- NB: Type-level holes are OK, because there are no bindings.</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- See Note [Deferring coercion errors to runtime]</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- Used by solveEqualities for kind equalities</span><span>
</span><span id="line-172"></span><span class="hs-comment">--      (see Note [Fail fast on kind errors] in &quot;GHC.Tc.Solver&quot;)</span><span>
</span><span id="line-173"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportAllUnsolved"><span class="hs-identifier hs-type">reportAllUnsolved</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span id="reportAllUnsolved"><span class="annot"><span class="annottext">reportAllUnsolved :: WantedConstraints -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportAllUnsolved"><span class="hs-identifier hs-var hs-var">reportAllUnsolved</span></a></span></span><span> </span><span id="local-6989586621681343584"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343584"><span class="hs-identifier hs-var">wanted</span></a></span></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343583"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343583"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM EvBindsVar
</span><a href="GHC.Tc.Utils.Monad.html#newNoTcEvBinds"><span class="hs-identifier hs-var">newNoTcEvBinds</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343581"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343581"><span class="hs-identifier hs-var">partial_sigs</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PartialTypeSignatures</span></span><span>
</span><span id="line-178"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343580"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343580"><span class="hs-identifier hs-var">warn_partial_sigs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnPartialTypeSignatures"><span class="hs-identifier hs-var">Opt_WarnPartialTypeSignatures</span></a></span><span>
</span><span id="line-179"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343579"><span class="annot"><span class="annottext">type_holes :: HoleChoice
</span><a href="#local-6989586621681343579"><span class="hs-identifier hs-var hs-var">type_holes</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343581"><span class="hs-identifier hs-var">partial_sigs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-180"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343580"><span class="hs-identifier hs-var">warn_partial_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>
</span><span id="line-181"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; EvBindsVar
-&gt; WantedConstraints
-&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#report_unsolved"><span class="hs-identifier hs-var">report_unsolved</span></a></span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343579"><span class="hs-identifier hs-var">type_holes</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-184"></span><span>                         </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343583"><span class="hs-identifier hs-var">ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343584"><span class="hs-identifier hs-var">wanted</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- | Report all unsolved goals as warnings (but without deferring any errors to</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- run-time). See Note [Safe Haskell Overlapping Instances Implementation] in</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- &quot;GHC.Tc.Solver&quot;</span><span>
</span><span id="line-189"></span><span class="annot"><a href="GHC.Tc.Errors.html#warnAllUnsolved"><span class="hs-identifier hs-type">warnAllUnsolved</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span id="warnAllUnsolved"><span class="annot"><span class="annottext">warnAllUnsolved :: WantedConstraints -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#warnAllUnsolved"><span class="hs-identifier hs-var hs-var">warnAllUnsolved</span></a></span></span><span> </span><span id="local-6989586621681343578"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343578"><span class="hs-identifier hs-var">wanted</span></a></span></span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343577"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343577"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM EvBindsVar
</span><a href="GHC.Tc.Utils.Monad.html#newTcEvBinds"><span class="hs-identifier hs-var">newTcEvBinds</span></a></span><span>
</span><span id="line-192"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; EvBindsVar
-&gt; WantedConstraints
-&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#report_unsolved"><span class="hs-identifier hs-var">report_unsolved</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarnReason -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeWarn"><span class="hs-identifier hs-var">TypeWarn</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>
</span><span id="line-193"></span><span>                         </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343577"><span class="hs-identifier hs-var">ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343578"><span class="hs-identifier hs-var">wanted</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-comment">-- | Report unsolved goals as errors or warnings.</span><span>
</span><span id="line-196"></span><span class="annot"><a href="GHC.Tc.Errors.html#report_unsolved"><span class="hs-identifier hs-type">report_unsolved</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#TypeErrorChoice"><span class="hs-identifier hs-type">TypeErrorChoice</span></a></span><span>   </span><span class="hs-comment">-- Deferred type errors</span><span>
</span><span id="line-197"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span>        </span><span class="hs-comment">-- Expression holes</span><span>
</span><span id="line-198"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span>        </span><span class="hs-comment">-- Type holes</span><span>
</span><span id="line-199"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span>        </span><span class="hs-comment">-- Out of scope holes</span><span>
</span><span id="line-200"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span>        </span><span class="hs-comment">-- cec_binds</span><span>
</span><span id="line-201"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span id="report_unsolved"><span class="annot"><span class="annottext">report_unsolved :: TypeErrorChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; HoleChoice
-&gt; EvBindsVar
-&gt; WantedConstraints
-&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#report_unsolved"><span class="hs-identifier hs-var hs-var">report_unsolved</span></a></span></span><span> </span><span id="local-6989586621681343575"><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="#local-6989586621681343575"><span class="hs-identifier hs-var">type_errors</span></a></span></span><span> </span><span id="local-6989586621681343574"><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343574"><span class="hs-identifier hs-var">expr_holes</span></a></span></span><span>
</span><span id="line-203"></span><span>    </span><span id="local-6989586621681343573"><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343573"><span class="hs-identifier hs-var">type_holes</span></a></span></span><span> </span><span id="local-6989586621681343572"><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343572"><span class="hs-identifier hs-var">out_of_scope_holes</span></a></span></span><span> </span><span id="local-6989586621681343571"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343571"><span class="hs-identifier hs-var">binds_var</span></a></span></span><span> </span><span id="local-6989586621681343570"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343570"><span class="hs-identifier hs-var">wanted</span></a></span></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyWC"><span class="hs-identifier hs-var">isEmptyWC</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343570"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportUnsolved {&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-208"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type errors:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="#local-6989586621681343575"><span class="hs-identifier hs-var">type_errors</span></a></span><span>
</span><span id="line-209"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expr holes:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343574"><span class="hs-identifier hs-var">expr_holes</span></a></span><span>
</span><span id="line-210"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type holes:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343573"><span class="hs-identifier hs-var">type_holes</span></a></span><span>
</span><span id="line-211"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scope holes:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343572"><span class="hs-identifier hs-var">out_of_scope_holes</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-212"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportUnsolved (before zonking and tidying)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343570"><span class="hs-identifier hs-var">wanted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343563"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343563"><span class="hs-identifier hs-var">wanted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; TcM WantedConstraints
</span><a href="GHC.Tc.Utils.TcMType.html#zonkWC"><span class="hs-identifier hs-var">zonkWC</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343570"><span class="hs-identifier hs-var">wanted</span></a></span><span>   </span><span class="hs-comment">-- Zonk to reveal all information</span><span>
</span><span id="line-215"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343561"><span class="annot"><span class="annottext">tidy_env :: TidyEnv
</span><a href="#local-6989586621681343561"><span class="hs-identifier hs-var hs-var">tidy_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [TcId] -&gt; TidyEnv
</span><a href="GHC.Core.TyCo.Tidy.html#tidyFreeTyCoVars"><span class="hs-identifier hs-var">tidyFreeTyCoVars</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="GHC.Types.Var.Env.html#emptyTidyEnv"><span class="hs-identifier hs-var">emptyTidyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343558"><span class="hs-identifier hs-var">free_tvs</span></a></span><span>
</span><span id="line-216"></span><span>             </span><span id="local-6989586621681343558"><span class="annot"><span class="annottext">free_tvs :: [TcId]
</span><a href="#local-6989586621681343558"><span class="hs-identifier hs-var hs-var">free_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-217"></span><span>                        </span><span class="annot"><span class="annottext">WantedConstraints -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWCList"><span class="hs-identifier hs-var">tyCoVarsOfWCList</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343563"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-218"></span><span>                        </span><span class="hs-comment">-- tyCoVarsOfWC returns free coercion *holes*, even though</span><span>
</span><span id="line-219"></span><span>                        </span><span class="hs-comment">-- they are &quot;bound&quot; by other wanted constraints. They in</span><span>
</span><span id="line-220"></span><span>                        </span><span class="hs-comment">-- turn may mention variables bound further in, which makes</span><span>
</span><span id="line-221"></span><span>                        </span><span class="hs-comment">-- no sense. Really we should not return those holes at all;</span><span>
</span><span id="line-222"></span><span>                        </span><span class="hs-comment">-- for now we just filter them out.</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportUnsolved (after zonking):&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-225"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Free tyvars:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier hs-var">pprTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343558"><span class="hs-identifier hs-var">free_tvs</span></a></span><span>
</span><span id="line-226"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Tidy env:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343561"><span class="hs-identifier hs-var">tidy_env</span></a></span><span>
</span><span id="line-227"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Wanted:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343563"><span class="hs-identifier hs-var">wanted</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343554"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343554"><span class="hs-identifier hs-var">warn_redundant</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnRedundantConstraints"><span class="hs-identifier hs-var">Opt_WarnRedundantConstraints</span></a></span><span>
</span><span id="line-230"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343552"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343552"><span class="hs-identifier hs-var">exp_syns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_PrintExpandedSynonyms"><span class="hs-identifier hs-var">Opt_PrintExpandedSynonyms</span></a></span><span>
</span><span id="line-231"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343550"><span class="annot"><span class="annottext">err_ctxt :: ReportErrCtxt
</span><a href="#local-6989586621681343550"><span class="hs-identifier hs-var hs-var">err_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-type">CEC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_encl :: [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-232"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_tidy :: TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343561"><span class="hs-identifier hs-var">tidy_env</span></a></span><span>
</span><span id="line-233"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_defer_type_errors :: TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var">cec_defer_type_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="#local-6989586621681343575"><span class="hs-identifier hs-var">type_errors</span></a></span><span>
</span><span id="line-234"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_expr_holes :: HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_expr_holes"><span class="hs-identifier hs-var">cec_expr_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343574"><span class="hs-identifier hs-var">expr_holes</span></a></span><span>
</span><span id="line-235"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_type_holes :: HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_type_holes"><span class="hs-identifier hs-var">cec_type_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343573"><span class="hs-identifier hs-var">type_holes</span></a></span><span>
</span><span id="line-236"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_out_of_scope_holes :: HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_out_of_scope_holes"><span class="hs-identifier hs-var">cec_out_of_scope_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343572"><span class="hs-identifier hs-var">out_of_scope_holes</span></a></span><span>
</span><span id="line-237"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleWC"><span class="hs-identifier hs-var">insolubleWC</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343563"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-238"></span><span>                                 </span><span class="hs-comment">-- See Note [Suppressing error messages]</span><span>
</span><span id="line-239"></span><span>                                 </span><span class="hs-comment">-- Suppress low-priority errors if there</span><span>
</span><span id="line-240"></span><span>                                 </span><span class="hs-comment">-- are insoluble errors anywhere;</span><span>
</span><span id="line-241"></span><span>                                 </span><span class="hs-comment">-- See #15539 and c.f. setting ic_status</span><span>
</span><span id="line-242"></span><span>                                 </span><span class="hs-comment">-- in GHC.Tc.Solver.setImplicationStatus</span><span>
</span><span id="line-243"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_warn_redundant :: Bool
</span><a href="GHC.Tc.Errors.html#cec_warn_redundant"><span class="hs-identifier hs-var">cec_warn_redundant</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343554"><span class="hs-identifier hs-var">warn_redundant</span></a></span><span>
</span><span id="line-244"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_expand_syns :: Bool
</span><a href="GHC.Tc.Errors.html#cec_expand_syns"><span class="hs-identifier hs-var">cec_expand_syns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343552"><span class="hs-identifier hs-var">exp_syns</span></a></span><span>
</span><span id="line-245"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_binds :: EvBindsVar
</span><a href="GHC.Tc.Errors.html#cec_binds"><span class="hs-identifier hs-var">cec_binds</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343571"><span class="hs-identifier hs-var">binds_var</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343537"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343537"><span class="hs-identifier hs-var">tc_lvl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM TcLevel
</span><a href="GHC.Tc.Utils.Monad.html#getTcLevel"><span class="hs-identifier hs-var">getTcLevel</span></a></span><span>
</span><span id="line-248"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcLevel -&gt; WantedConstraints -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportWanteds"><span class="hs-identifier hs-var">reportWanteds</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343550"><span class="hs-identifier hs-var">err_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343537"><span class="hs-identifier hs-var">tc_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343563"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-249"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportUnsolved }&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-comment">--------------------------------------------</span><span>
</span><span id="line-252"></span><span class="hs-comment">--      Internal functions</span><span>
</span><span id="line-253"></span><span class="hs-comment">--------------------------------------------</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-comment">-- | An error Report collects messages categorised by their importance.</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- See Note [Error report] for details.</span><span>
</span><span id="line-257"></span><span class="hs-keyword">data</span><span> </span><span id="Report"><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-var">Report</span></a></span></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Report"><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-var">Report</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="report_important"><span class="annot"><span class="annottext">Report -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#report_important"><span class="hs-identifier hs-var hs-var">report_important</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-259"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="report_relevant_bindings"><span class="annot"><span class="annottext">Report -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#report_relevant_bindings"><span class="hs-identifier hs-var hs-var">report_relevant_bindings</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-260"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="report_valid_hole_fits"><span class="annot"><span class="annottext">Report -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#report_valid_hole_fits"><span class="hs-identifier hs-var hs-var">report_valid_hole_fits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-261"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span class="hs-keyword">where</span><span>   </span><span class="hs-comment">-- Debugging only</span><span>
</span><span id="line-264"></span><span>  </span><span id="local-6989586621681343526"><span class="annot"><span class="annottext">ppr :: Report -&gt; SDoc
</span><a href="#local-6989586621681343526"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">report_important :: Report -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#report_important"><span class="hs-identifier hs-var">report_important</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343525"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343525"><span class="hs-identifier hs-var">imp</span></a></span></span><span>
</span><span id="line-265"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">report_relevant_bindings :: Report -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#report_relevant_bindings"><span class="hs-identifier hs-var">report_relevant_bindings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343524"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343524"><span class="hs-identifier hs-var">rel</span></a></span></span><span>
</span><span id="line-266"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">report_valid_hole_fits :: Report -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#report_valid_hole_fits"><span class="hs-identifier hs-var">report_valid_hole_fits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343523"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343523"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;important:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343525"><span class="hs-identifier hs-var">imp</span></a></span><span>
</span><span id="line-268"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;relevant:&quot;</span></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343524"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-269"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;valid:&quot;</span></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343523"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-comment">{- Note [Error report]
The idea is that error msgs are divided into three parts: the main msg, the
context block (\&quot;In the second argument of ...\&quot;), and the relevant bindings
block, which are displayed in that order, with a mark to divide them.  The
idea is that the main msg ('report_important') varies depending on the error
in question, but context and relevant bindings are always the same, which
should simplify visual parsing.

The context is added when the Report is passed off to 'mkErrorReport'.
Unfortunately, unlike the context, the relevant bindings are added in
multiple places so they have to be in the Report.
-}</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681343518"><span id="local-6989586621681343520"><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span id="local-6989586621681343516"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343516"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621681343515"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343515"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621681343514"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343514"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681343513"><span class="annot"><span class="annottext">&lt;&gt; :: Report -&gt; Report -&gt; Report
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span id="local-6989586621681343512"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343512"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span id="local-6989586621681343511"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343511"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621681343510"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343510"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; [SDoc] -&gt; [SDoc] -&gt; Report
</span><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-var">Report</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343516"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343512"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343515"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343511"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343514"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681343510"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681343504"><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-288"></span><span>    </span><span id="local-6989586621681343502"><span class="annot"><span class="annottext">mempty :: Report
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; [SDoc] -&gt; [SDoc] -&gt; Report
</span><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-var">Report</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-289"></span><span>    </span><span id="local-6989586621681343500"><span class="annot"><span class="annottext">mappend :: Report -&gt; Report -&gt; Report
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mappend"><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%3C%3E"><span class="hs-operator hs-var">(Semigroup.&lt;&gt;)</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">-- | Put a doc into the important msgs block.</span><span>
</span><span id="line-292"></span><span class="annot"><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-type">important</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-293"></span><span id="important"><span class="annot"><span class="annottext">important :: SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var hs-var">important</span></a></span></span><span> </span><span id="local-6989586621681343498"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343498"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">report_important :: [SDoc]
</span><a href="GHC.Tc.Errors.html#report_important"><span class="hs-identifier hs-var">report_important</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343498"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-comment">-- | Put a doc into the relevant bindings block.</span><span>
</span><span id="line-296"></span><span class="annot"><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-type">mk_relevant_bindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-297"></span><span id="mk_relevant_bindings"><span class="annot"><span class="annottext">mk_relevant_bindings :: SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var hs-var">mk_relevant_bindings</span></a></span></span><span> </span><span id="local-6989586621681343496"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343496"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">report_relevant_bindings :: [SDoc]
</span><a href="GHC.Tc.Errors.html#report_relevant_bindings"><span class="hs-identifier hs-var">report_relevant_bindings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343496"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | Put a doc into the valid hole fits block.</span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Tc.Errors.html#valid_hole_fits"><span class="hs-identifier hs-type">valid_hole_fits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-301"></span><span id="valid_hole_fits"><span class="annot"><span class="annottext">valid_hole_fits :: SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#valid_hole_fits"><span class="hs-identifier hs-var hs-var">valid_hole_fits</span></a></span></span><span> </span><span id="local-6989586621681343494"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343494"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">report_valid_hole_fits :: [SDoc]
</span><a href="GHC.Tc.Errors.html#report_valid_hole_fits"><span class="hs-identifier hs-var">report_valid_hole_fits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343494"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-keyword">data</span><span> </span><span id="TypeErrorChoice"><span class="annot"><a href="GHC.Tc.Errors.html#TypeErrorChoice"><span class="hs-identifier hs-var">TypeErrorChoice</span></a></span></span><span>   </span><span class="hs-comment">-- What to do for type errors found by the type checker</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TypeError"><span class="annot"><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span></span><span>     </span><span class="hs-comment">-- A type error aborts compilation with an error message</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TypeWarn"><span class="annot"><a href="GHC.Tc.Errors.html#TypeWarn"><span class="hs-identifier hs-var">TypeWarn</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarnReason"><span class="hs-identifier hs-type">WarnReason</span></a></span><span>
</span><span id="line-306"></span><span>                  </span><span class="hs-comment">-- A type error is deferred to runtime, plus a compile-time warning</span><span>
</span><span id="line-307"></span><span>                  </span><span class="hs-comment">-- The WarnReason should usually be (Reason Opt_WarnDeferredTypeErrors)</span><span>
</span><span id="line-308"></span><span>                  </span><span class="hs-comment">-- but it isn't for the Safe Haskell Overlapping Instances warnings</span><span>
</span><span id="line-309"></span><span>                  </span><span class="hs-comment">-- see warnAllUnsolved</span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TypeDefer"><span class="annot"><a href="GHC.Tc.Errors.html#TypeDefer"><span class="hs-identifier hs-var">TypeDefer</span></a></span></span><span>     </span><span class="hs-comment">-- A type error is deferred to runtime; no error or warning at compile time</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">data</span><span> </span><span id="HoleChoice"><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-var">HoleChoice</span></a></span></span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HoleError"><span class="annot"><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span></span><span>     </span><span class="hs-comment">-- A hole is a compile-time error</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HoleWarn"><span class="annot"><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span></span><span>      </span><span class="hs-comment">-- Defer to runtime, emit a compile-time warning</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HoleDefer"><span class="annot"><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span></span><span>     </span><span class="hs-comment">-- Defer to runtime, no warning</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>  </span><span id="local-6989586621681343492"><span class="annot"><span class="annottext">ppr :: HoleChoice -&gt; SDoc
</span><a href="#local-6989586621681343492"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HoleError&quot;</span></span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HoleWarn&quot;</span></span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HoleDefer&quot;</span></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#TypeErrorChoice"><span class="hs-identifier hs-type">TypeErrorChoice</span></a></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621681343488"><span class="annot"><span class="annottext">ppr :: TypeErrorChoice -&gt; SDoc
</span><a href="#local-6989586621681343488"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TypeError&quot;</span></span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#TypeWarn"><span class="hs-identifier hs-type">TypeWarn</span></a></span><span> </span><span id="local-6989586621681343487"><span class="annot"><span class="annottext">WarnReason
</span><a href="#local-6989586621681343487"><span class="hs-identifier hs-var">reason</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TypeWarn&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="#local-6989586621681343487"><span class="hs-identifier hs-var">reason</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeDefer"><span class="hs-identifier hs-var">TypeDefer</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TypeDefer&quot;</span></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-keyword">data</span><span> </span><span id="ReportErrCtxt"><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-var">ReportErrCtxt</span></a></span></span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="CEC"><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-var">CEC</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="cec_encl"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var hs-var">cec_encl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Enclosing implications</span><span>
</span><span id="line-329"></span><span>                                       </span><span class="hs-comment">--   (innermost first)</span><span>
</span><span id="line-330"></span><span>                                       </span><span class="hs-comment">-- ic_skols and givens are tidied, rest are not</span><span>
</span><span id="line-331"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_tidy"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var hs-var">cec_tidy</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#TidyEnv"><span class="hs-identifier hs-type">TidyEnv</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_binds"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; EvBindsVar
</span><a href="GHC.Tc.Errors.html#cec_binds"><span class="hs-identifier hs-var hs-var">cec_binds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span>    </span><span class="hs-comment">-- Make some errors (depending on cec_defer)</span><span>
</span><span id="line-334"></span><span>                                       </span><span class="hs-comment">-- into warnings, and emit evidence bindings</span><span>
</span><span id="line-335"></span><span>                                       </span><span class="hs-comment">-- into 'cec_binds' for unsolved constraints</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_defer_type_errors"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var hs-var">cec_defer_type_errors</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#TypeErrorChoice"><span class="hs-identifier hs-type">TypeErrorChoice</span></a></span><span> </span><span class="hs-comment">-- Defer type errors until runtime</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span>          </span><span class="hs-comment">-- cec_expr_holes is a union of:</span><span>
</span><span id="line-340"></span><span>          </span><span class="hs-comment">--   cec_type_holes - a set of typed holes: '_', '_a', '_foo'</span><span>
</span><span id="line-341"></span><span>          </span><span class="hs-comment">--   cec_out_of_scope_holes - a set of variables which are</span><span>
</span><span id="line-342"></span><span>          </span><span class="hs-comment">--                            out of scope: 'x', 'y', 'bar'</span><span>
</span><span id="line-343"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_expr_holes"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_expr_holes"><span class="hs-identifier hs-var hs-var">cec_expr_holes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span>           </span><span class="hs-comment">-- Holes in expressions</span><span>
</span><span id="line-344"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_type_holes"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_type_holes"><span class="hs-identifier hs-var hs-var">cec_type_holes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span>           </span><span class="hs-comment">-- Holes in types</span><span>
</span><span id="line-345"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_out_of_scope_holes"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_out_of_scope_holes"><span class="hs-identifier hs-var hs-var">cec_out_of_scope_holes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#HoleChoice"><span class="hs-identifier hs-type">HoleChoice</span></a></span><span>   </span><span class="hs-comment">-- Out of scope holes</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_warn_redundant"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_warn_redundant"><span class="hs-identifier hs-var hs-var">cec_warn_redundant</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>    </span><span class="hs-comment">-- True &lt;=&gt; -Wredundant-constraints</span><span>
</span><span id="line-348"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_expand_syns"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_expand_syns"><span class="hs-identifier hs-var hs-var">cec_expand_syns</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>    </span><span class="hs-comment">-- True &lt;=&gt; -fprint-expanded-synonyms</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="cec_suppress"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var hs-var">cec_suppress</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>    </span><span class="hs-comment">-- True &lt;=&gt; More important errors have occurred,</span><span>
</span><span id="line-351"></span><span>                                    </span><span class="hs-comment">--          so create bindings if need be, but</span><span>
</span><span id="line-352"></span><span>                                    </span><span class="hs-comment">--          don't issue any more errors/warnings</span><span>
</span><span id="line-353"></span><span>                                    </span><span class="hs-comment">-- See Note [Suppressing error messages]</span><span>
</span><span id="line-354"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-357"></span><span>  </span><span id="local-6989586621681343475"><span class="annot"><span class="annottext">ppr :: ReportErrCtxt -&gt; SDoc
</span><a href="#local-6989586621681343475"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-type">CEC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_binds :: ReportErrCtxt -&gt; EvBindsVar
</span><a href="GHC.Tc.Errors.html#cec_binds"><span class="hs-identifier hs-var">cec_binds</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343474"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343474"><span class="hs-identifier hs-var">bvar</span></a></span></span><span>
</span><span id="line-358"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_defer_type_errors :: ReportErrCtxt -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var">cec_defer_type_errors</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343473"><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="#local-6989586621681343473"><span class="hs-identifier hs-var">dte</span></a></span></span><span>
</span><span id="line-359"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_expr_holes :: ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_expr_holes"><span class="hs-identifier hs-var">cec_expr_holes</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343472"><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343472"><span class="hs-identifier hs-var">eh</span></a></span></span><span>
</span><span id="line-360"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_type_holes :: ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_type_holes"><span class="hs-identifier hs-var">cec_type_holes</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343471"><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343471"><span class="hs-identifier hs-var">th</span></a></span></span><span>
</span><span id="line-361"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_out_of_scope_holes :: ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_out_of_scope_holes"><span class="hs-identifier hs-var">cec_out_of_scope_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343470"><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343470"><span class="hs-identifier hs-var">osh</span></a></span></span><span>
</span><span id="line-362"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_warn_redundant :: ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_warn_redundant"><span class="hs-identifier hs-var">cec_warn_redundant</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343469"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343469"><span class="hs-identifier hs-var">wr</span></a></span></span><span>
</span><span id="line-363"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_expand_syns :: ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_expand_syns"><span class="hs-identifier hs-var">cec_expand_syns</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343468"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343468"><span class="hs-identifier hs-var">es</span></a></span></span><span>
</span><span id="line-364"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343467"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343467"><span class="hs-identifier hs-var">sup</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CEC&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-366"></span><span>         </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_binds&quot;</span></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343474"><span class="hs-identifier hs-var">bvar</span></a></span><span>
</span><span id="line-367"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_defer_type_errors&quot;</span></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="#local-6989586621681343473"><span class="hs-identifier hs-var">dte</span></a></span><span>
</span><span id="line-368"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_expr_holes&quot;</span></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343472"><span class="hs-identifier hs-var">eh</span></a></span><span>
</span><span id="line-369"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_type_holes&quot;</span></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343471"><span class="hs-identifier hs-var">th</span></a></span><span>
</span><span id="line-370"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_out_of_scope_holes&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="#local-6989586621681343470"><span class="hs-identifier hs-var">osh</span></a></span><span>
</span><span id="line-371"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_warn_redundant&quot;</span></span><span>     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343469"><span class="hs-identifier hs-var">wr</span></a></span><span>
</span><span id="line-372"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_expand_syns&quot;</span></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343468"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-373"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_suppress&quot;</span></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343467"><span class="hs-identifier hs-var">sup</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">-- | Returns True &lt;=&gt; the ReportErrCtxt indicates that something is deferred</span><span>
</span><span id="line-376"></span><span class="annot"><a href="GHC.Tc.Errors.html#deferringAnyBindings"><span class="hs-identifier hs-type">deferringAnyBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-comment">-- Don't check cec_type_holes, as these don't cause bindings to be deferred</span><span>
</span><span id="line-378"></span><span id="deferringAnyBindings"><span class="annot"><span class="annottext">deferringAnyBindings :: ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#deferringAnyBindings"><span class="hs-identifier hs-var hs-var">deferringAnyBindings</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-type">CEC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_defer_type_errors :: ReportErrCtxt -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var">cec_defer_type_errors</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span><span>
</span><span id="line-379"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_expr_holes :: ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_expr_holes"><span class="hs-identifier hs-var">cec_expr_holes</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-380"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_out_of_scope_holes :: ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_out_of_scope_holes"><span class="hs-identifier hs-var">cec_out_of_scope_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-381"></span><span class="annot"><a href="GHC.Tc.Errors.html#deferringAnyBindings"><span class="hs-identifier hs-var">deferringAnyBindings</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span>                                            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeSwitchOffDefer"><span class="hs-identifier hs-type">maybeSwitchOffDefer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span>
</span><span id="line-384"></span><span class="hs-comment">-- Switch off defer-type-errors inside CoEvBindsVar</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- See Note [Failing equalities with no evidence bindings]</span><span>
</span><span id="line-386"></span><span id="maybeSwitchOffDefer"><span class="annot"><span class="annottext">maybeSwitchOffDefer :: EvBindsVar -&gt; ReportErrCtxt -&gt; ReportErrCtxt
</span><a href="GHC.Tc.Errors.html#maybeSwitchOffDefer"><span class="hs-identifier hs-var hs-var">maybeSwitchOffDefer</span></a></span></span><span> </span><span id="local-6989586621681343462"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343462"><span class="hs-identifier hs-var">evb</span></a></span></span><span> </span><span id="local-6989586621681343461"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343461"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-387"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-type">CoEvBindsVar</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343462"><span class="hs-identifier hs-var">evb</span></a></span><span>
</span><span id="line-388"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343461"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_defer_type_errors :: TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var">cec_defer_type_errors</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span><span>
</span><span id="line-389"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_expr_holes :: HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_expr_holes"><span class="hs-identifier hs-var">cec_expr_holes</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_out_of_scope_holes :: HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_out_of_scope_holes"><span class="hs-identifier hs-var">cec_out_of_scope_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-391"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-392"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343461"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-comment">{- Note [Failing equalities with no evidence bindings]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If we go inside an implication that has no term evidence
(e.g. unifying under a forall), we can't defer type errors.  You could
imagine using the /enclosing/ bindings (in cec_binds), but that may
not have enough stuff in scope for the bindings to be well typed.  So
we just switch off deferred type errors altogether.  See #14605.

This is done by maybeSwitchOffDefer.  It's also useful in one other
place: see Note [Wrapping failing kind equalities] in GHC.Tc.Solver.

Note [Suppressing error messages]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The cec_suppress flag says &quot;don't report any errors&quot;.  Instead, just create
evidence bindings (as usual).  It's used when more important errors have occurred.

Specifically (see reportWanteds)
  * If there are insoluble Givens, then we are in unreachable code and all bets
    are off.  So don't report any further errors.
  * If there are any insolubles (eg Int~Bool), here or in a nested implication,
    then suppress errors from the simple constraints here.  Sometimes the
    simple-constraint errors are a knock-on effect of the insolubles.

This suppression behaviour is controlled by the Bool flag in
ReportErrorSpec, as used in reportWanteds.

But we need to take care: flags can turn errors into warnings, and we
don't want those warnings to suppress subsequent errors (including
suppressing the essential addTcEvBind for them: #15152). So in
tryReporter we use askNoErrs to see if any error messages were
/actually/ produced; if not, we don't switch on suppression.

A consequence is that warnings never suppress warnings, so turning an
error into a warning may allow subsequent warnings to appear that were
previously suppressed.   (e.g. partial-sigs/should_fail/T14584)
-}</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportImplic"><span class="hs-identifier hs-type">reportImplic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span id="reportImplic"><span class="annot"><span class="annottext">reportImplic :: ReportErrCtxt -&gt; Implication -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportImplic"><span class="hs-identifier hs-var hs-var">reportImplic</span></a></span></span><span> </span><span id="local-6989586621681343458"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343457"><span class="annot"><span class="annottext">implic :: Implication
</span><a href="#local-6989586621681343457"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343454"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343454"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-433"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343452"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343452"><span class="hs-identifier hs-var">given</span></a></span></span><span>
</span><span id="line-434"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_wanted :: Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343450"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343450"><span class="hs-identifier hs-var">wanted</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_binds :: Implication -&gt; EvBindsVar
</span><a href="GHC.Tc.Types.Constraint.html#ic_binds"><span class="hs-identifier hs-var">ic_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343448"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343448"><span class="hs-identifier hs-var">evb</span></a></span></span><span>
</span><span id="line-435"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_status :: Implication -&gt; ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var">ic_status</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343446"><span class="annot"><span class="annottext">ImplicStatus
</span><a href="#local-6989586621681343446"><span class="hs-identifier hs-var">status</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343444"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343444"><span class="hs-identifier hs-var">info</span></a></span></span><span>
</span><span id="line-436"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_tclvl :: Implication -&gt; TcLevel
</span><a href="GHC.Tc.Types.Constraint.html#ic_tclvl"><span class="hs-identifier hs-var">ic_tclvl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343442"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343442"><span class="hs-identifier hs-var">tc_lvl</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="GHC.Tc.Types.Origin.html#BracketSkol"><span class="hs-identifier hs-var">BracketSkol</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343444"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343440"><span class="hs-identifier hs-var">insoluble</span></a></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>        </span><span class="hs-comment">-- For Template Haskell brackets report only</span><span>
</span><span id="line-440"></span><span>                     </span><span class="hs-comment">-- definite errors. The whole thing will be re-checked</span><span>
</span><span id="line-441"></span><span>                     </span><span class="hs-comment">-- later when we plug it in, and meanwhile there may</span><span>
</span><span id="line-442"></span><span>                     </span><span class="hs-comment">-- certainly be un-satisfied constraints</span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-445"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportImplic&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343439"><span class="hs-identifier hs-var">implic'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343438"><span class="hs-identifier hs-var">bad_telescope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcLclEnv -&gt; SkolemInfo -&gt; [TcId] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportBadTelescope"><span class="hs-identifier hs-var">reportBadTelescope</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343436"><span class="hs-identifier hs-var">tcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343444"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343454"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-447"></span><span>               </span><span class="hs-comment">-- Do /not/ use the tidied tvs because then are in the</span><span>
</span><span id="line-448"></span><span>               </span><span class="hs-comment">-- wrong order, so tidying will rename things wrongly</span><span>
</span><span id="line-449"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcLevel -&gt; WantedConstraints -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportWanteds"><span class="hs-identifier hs-var">reportWanteds</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343435"><span class="hs-identifier hs-var">ctxt'</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343442"><span class="hs-identifier hs-var">tc_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621681343450"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-450"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_warn_redundant"><span class="hs-identifier hs-var">cec_warn_redundant</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-451"></span><span>         </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcLclEnv -&gt; SkolemInfo -&gt; [TcId] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#warnRedundantConstraints"><span class="hs-identifier hs-var">warnRedundantConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343435"><span class="hs-identifier hs-var">ctxt'</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343436"><span class="hs-identifier hs-var">tcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343433"><span class="hs-identifier hs-var">info'</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343432"><span class="hs-identifier hs-var">dead_givens</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-453"></span><span>    </span><span id="local-6989586621681343436"><span class="annot"><span class="annottext">tcl_env :: TcLclEnv
</span><a href="#local-6989586621681343436"><span class="hs-identifier hs-var hs-var">tcl_env</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343457"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-454"></span><span>    </span><span id="local-6989586621681343440"><span class="annot"><span class="annottext">insoluble :: Bool
</span><a href="#local-6989586621681343440"><span class="hs-identifier hs-var hs-var">insoluble</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImplicStatus -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier hs-var">isInsolubleStatus</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="#local-6989586621681343446"><span class="hs-identifier hs-var">status</span></a></span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681343429"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343429"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343428"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343428"><span class="hs-identifier hs-var">tvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) s a b.
Traversable t =&gt;
(s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><a href="../../base-4.16.4.0/src/Data-Traversable.html#mapAccumL"><span class="hs-identifier hs-var">mapAccumL</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; TcId -&gt; (TidyEnv, TcId)
</span><a href="GHC.Core.TyCo.Tidy.html#tidyVarBndr"><span class="hs-identifier hs-var">tidyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-456"></span><span>                   </span><span class="annot"><span class="annottext">[TcId] -&gt; [TcId]
</span><a href="GHC.Core.TyCo.FVs.html#scopedSort"><span class="hs-identifier hs-var">scopedSort</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343454"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-457"></span><span>        </span><span class="hs-comment">-- scopedSort: the ic_skols may not be in dependency order</span><span>
</span><span id="line-458"></span><span>        </span><span class="hs-comment">-- (see Note [Skolems in an implication] in GHC.Tc.Types.Constraint)</span><span>
</span><span id="line-459"></span><span>        </span><span class="hs-comment">-- but tidying goes wrong on out-of-order constraints;</span><span>
</span><span id="line-460"></span><span>        </span><span class="hs-comment">-- so we sort them here before tidying</span><span>
</span><span id="line-461"></span><span>    </span><span id="local-6989586621681343433"><span class="annot"><span class="annottext">info' :: SkolemInfo
</span><a href="#local-6989586621681343433"><span class="hs-identifier hs-var hs-var">info'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; SkolemInfo -&gt; SkolemInfo
</span><a href="GHC.Tc.Utils.TcMType.html#tidySkolemInfo"><span class="hs-identifier hs-var">tidySkolemInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343429"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343444"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span id="local-6989586621681343439"><span class="annot"><span class="annottext">implic' :: Implication
</span><a href="#local-6989586621681343439"><span class="hs-identifier hs-var hs-var">implic'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343457"><span class="hs-identifier hs-var">implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_skols :: [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343428"><span class="hs-identifier hs-var">tvs'</span></a></span><span>
</span><span id="line-463"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given :: [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv -&gt; TcId -&gt; TcId
</span><a href="GHC.Tc.Utils.TcMType.html#tidyEvVar"><span class="hs-identifier hs-var">tidyEvVar</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343429"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343452"><span class="hs-identifier hs-var">given</span></a></span><span>
</span><span id="line-464"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343433"><span class="hs-identifier hs-var">info'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span>    </span><span id="local-6989586621681343423"><span class="annot"><span class="annottext">ctxt1 :: ReportErrCtxt
</span><a href="#local-6989586621681343423"><span class="hs-identifier hs-var hs-var">ctxt1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; ReportErrCtxt -&gt; ReportErrCtxt
</span><a href="GHC.Tc.Errors.html#maybeSwitchOffDefer"><span class="hs-identifier hs-var">maybeSwitchOffDefer</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343448"><span class="hs-identifier hs-var">evb</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-467"></span><span>    </span><span id="local-6989586621681343435"><span class="annot"><span class="annottext">ctxt' :: ReportErrCtxt
</span><a href="#local-6989586621681343435"><span class="hs-identifier hs-var hs-var">ctxt'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343423"><span class="hs-identifier hs-var">ctxt1</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_tidy :: TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343429"><span class="hs-identifier hs-var">env1</span></a></span><span>
</span><span id="line-468"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_encl :: [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343439"><span class="hs-identifier hs-var">implic'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343440"><span class="hs-identifier hs-var">insoluble</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343458"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-471"></span><span>                        </span><span class="hs-comment">-- Suppress inessential errors if there</span><span>
</span><span id="line-472"></span><span>                        </span><span class="hs-comment">-- are insolubles anywhere in the</span><span>
</span><span id="line-473"></span><span>                        </span><span class="hs-comment">-- tree rooted here, or we've come across</span><span>
</span><span id="line-474"></span><span>                        </span><span class="hs-comment">-- a suppress-worthy constraint higher up (#11541)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_binds :: EvBindsVar
</span><a href="GHC.Tc.Errors.html#cec_binds"><span class="hs-identifier hs-var">cec_binds</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343448"><span class="hs-identifier hs-var">evb</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span>    </span><span id="local-6989586621681343432"><span class="annot"><span class="annottext">dead_givens :: [TcId]
</span><a href="#local-6989586621681343432"><span class="hs-identifier hs-var hs-var">dead_givens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="#local-6989586621681343446"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-479"></span><span>                    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_Solved"><span class="hs-identifier hs-type">IC_Solved</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ics_dead :: ImplicStatus -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ics_dead"><span class="hs-identifier hs-var">ics_dead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343419"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343419"><span class="hs-identifier hs-var">dead</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343419"><span class="hs-identifier hs-var">dead</span></a></span><span>
</span><span id="line-480"></span><span>                    </span><span class="annot"><span class="annottext">ImplicStatus
</span><span class="hs-identifier">_</span></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span>    </span><span id="local-6989586621681343438"><span class="annot"><span class="annottext">bad_telescope :: Bool
</span><a href="#local-6989586621681343438"><span class="hs-identifier hs-var hs-var">bad_telescope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="#local-6989586621681343446"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-483"></span><span>              </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_BadTelescope"><span class="hs-identifier hs-var">IC_BadTelescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-484"></span><span>              </span><span class="annot"><span class="annottext">ImplicStatus
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="annot"><a href="GHC.Tc.Errors.html#warnRedundantConstraints"><span class="hs-identifier hs-type">warnRedundantConstraints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfo"><span class="hs-identifier hs-type">SkolemInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- See Note [Tracking redundant constraints] in GHC.Tc.Solver</span><span>
</span><span id="line-488"></span><span id="warnRedundantConstraints"><span class="annot"><span class="annottext">warnRedundantConstraints :: ReportErrCtxt -&gt; TcLclEnv -&gt; SkolemInfo -&gt; [TcId] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#warnRedundantConstraints"><span class="hs-identifier hs-var hs-var">warnRedundantConstraints</span></a></span></span><span> </span><span id="local-6989586621681343416"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343416"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343415"><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343415"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681343414"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343414"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621681343413"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343413"><span class="hs-identifier hs-var">ev_vars</span></a></span></span><span>
</span><span id="line-489"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343411"><span class="hs-identifier hs-var">redundant_evs</span></a></span><span>
</span><span id="line-490"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-type">SigSkol</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343414"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-493"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall lcl' gbl a lcl.
lcl' -&gt; TcRnIf gbl lcl' a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#setLclEnv"><span class="hs-identifier hs-var">setLclEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343415"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>  </span><span class="hs-comment">-- We want to add &quot;In the type signature for f&quot;</span><span>
</span><span id="line-494"></span><span>                    </span><span class="hs-comment">-- to the error context, which is a bit tiresome</span><span>
</span><span id="line-495"></span><span>   </span><span class="annot"><span class="annottext">forall a. SDoc -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#addErrCtxt"><span class="hs-identifier hs-var">addErrCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343414"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-496"></span><span>   </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343407"><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343407"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl lcl
</span><a href="GHC.Tc.Utils.Monad.html#getLclEnv"><span class="hs-identifier hs-var">getLclEnv</span></a></span><span>
</span><span id="line-497"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343405"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343405"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; TcLclEnv -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-var">mkErrorReport</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343416"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343407"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343403"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnRedundantConstraints"><span class="hs-identifier hs-var">Opt_WarnRedundantConstraints</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343405"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-comment">-- But for InstSkol there already *is* a surrounding</span><span>
</span><span id="line-501"></span><span>              </span><span class="hs-comment">-- &quot;In the instance declaration for Eq [a]&quot; context</span><span>
</span><span id="line-502"></span><span>              </span><span class="hs-comment">-- and we don't want to say it twice. Seems a bit ad-hoc</span><span>
</span><span id="line-503"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343401"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343401"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; TcLclEnv -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-var">mkErrorReport</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343416"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343415"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343403"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnRedundantConstraints"><span class="hs-identifier hs-var">Opt_WarnRedundantConstraints</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343401"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-505"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-506"></span><span>   </span><span id="local-6989586621681343403"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681343403"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Redundant constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343411"><span class="hs-identifier hs-var">redundant_evs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-507"></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId] -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVarTheta"><span class="hs-identifier hs-var">pprEvVarTheta</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343411"><span class="hs-identifier hs-var">redundant_evs</span></a></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>   </span><span id="local-6989586621681343411"><span class="annot"><span class="annottext">redundant_evs :: [TcId]
</span><a href="#local-6989586621681343411"><span class="hs-identifier hs-var hs-var">redundant_evs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>       </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="#local-6989586621681343396"><span class="hs-identifier hs-var">is_type_error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-511"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343414"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- See Note [Redundant constraints in instance decls]</span><span>
</span><span id="line-512"></span><span>         </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="GHC.Tc.Types.Origin.html#InstSkol"><span class="hs-identifier hs-var">InstSkol</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621681343394"><span class="hs-identifier hs-var">improving</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343413"><span class="hs-identifier hs-var">ev_vars</span></a></span><span>
</span><span id="line-513"></span><span>         </span><span class="annot"><span class="annottext">SkolemInfo
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343413"><span class="hs-identifier hs-var">ev_vars</span></a></span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span>   </span><span class="hs-comment">-- See #15232</span><span>
</span><span id="line-516"></span><span>   </span><span id="local-6989586621681343396"><span class="annot"><span class="annottext">is_type_error :: TcId -&gt; Bool
</span><a href="#local-6989586621681343396"><span class="hs-identifier hs-var hs-var">is_type_error</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#userTypeError_maybe"><span class="hs-identifier hs-var">userTypeError_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span>   </span><span id="local-6989586621681343394"><span class="annot"><span class="annottext">improving :: Type -&gt; Bool
</span><a href="#local-6989586621681343394"><span class="hs-identifier hs-var hs-var">improving</span></a></span></span><span> </span><span id="local-6989586621681343388"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343388"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-comment">-- (transSuperClasses p) does not include p</span><span>
</span><span id="line-519"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isImprovementPred"><span class="hs-identifier hs-var">isImprovementPred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343388"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
</span><a href="GHC.Tc.Utils.TcType.html#transSuperClasses"><span class="hs-identifier hs-var">transSuperClasses</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343388"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportBadTelescope"><span class="hs-identifier hs-type">reportBadTelescope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfo"><span class="hs-identifier hs-type">SkolemInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span id="reportBadTelescope"><span class="annot"><span class="annottext">reportBadTelescope :: ReportErrCtxt -&gt; TcLclEnv -&gt; SkolemInfo -&gt; [TcId] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportBadTelescope"><span class="hs-identifier hs-var hs-var">reportBadTelescope</span></a></span></span><span> </span><span id="local-6989586621681343383"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343383"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343382"><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343382"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ForAllSkol"><span class="hs-identifier hs-type">ForAllSkol</span></a></span><span> </span><span id="local-6989586621681343380"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343380"><span class="hs-identifier hs-var">telescope</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681343379"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343379"><span class="hs-identifier hs-var">skols</span></a></span></span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343378"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343378"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; TcLclEnv -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-var">mkErrorReport</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343383"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681343382"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343377"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportError"><span class="hs-identifier hs-var">reportError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343378"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-525"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-526"></span><span>    </span><span id="local-6989586621681343377"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681343377"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;These kind and type variables:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343380"><span class="hs-identifier hs-var">telescope</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-527"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;are out of dependency order. Perhaps try this ordering:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>             </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TcId] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier hs-var">pprTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343373"><span class="hs-identifier hs-var">sorted_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span>    </span><span id="local-6989586621681343373"><span class="annot"><span class="annottext">sorted_tvs :: [TcId]
</span><a href="#local-6989586621681343373"><span class="hs-identifier hs-var hs-var">sorted_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcId] -&gt; [TcId]
</span><a href="GHC.Core.TyCo.FVs.html#scopedSort"><span class="hs-identifier hs-var">scopedSort</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343379"><span class="hs-identifier hs-var">skols</span></a></span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportBadTelescope"><span class="hs-identifier hs-var">reportBadTelescope</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681343372"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343372"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span id="local-6989586621681343371"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343371"><span class="hs-identifier hs-var">skols</span></a></span></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportBadTelescope&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681343372"><span class="hs-identifier hs-var">skol_info</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681343371"><span class="hs-identifier hs-var">skols</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-comment">{- Note [Redundant constraints in instance decls]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For instance declarations, we don't report unused givens if
they can give rise to improvement.  Example (#10100):
    class Add a b ab | a b -&gt; ab, a ab -&gt; b
    instance Add Zero b b
    instance Add a b ab =&gt; Add (Succ a) b (Succ ab)
The context (Add a b ab) for the instance is clearly unused in terms
of evidence, since the dictionary has no fields.  But it is still
needed!  With the context, a wanted constraint
   Add (Succ Zero) beta (Succ Zero)
we will reduce to (Add Zero beta Zero), and thence we get beta := Zero.
But without the context we won't find beta := Zero.

This only matters in instance declarations..
-}</span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportWanteds"><span class="hs-identifier hs-type">reportWanteds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcLevel"><span class="hs-identifier hs-type">TcLevel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span id="reportWanteds"><span class="annot"><span class="annottext">reportWanteds :: ReportErrCtxt -&gt; TcLevel -&gt; WantedConstraints -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportWanteds"><span class="hs-identifier hs-var hs-var">reportWanteds</span></a></span></span><span> </span><span id="local-6989586621681343369"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343368"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343368"><span class="hs-identifier hs-var">tc_lvl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343365"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621681343365"><span class="hs-identifier hs-var">simples</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343363"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621681343363"><span class="hs-identifier hs-var">implics</span></a></span></span><span>
</span><span id="line-554"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_holes :: WantedConstraints -&gt; Bag Hole
</span><a href="GHC.Tc.Types.Constraint.html#wc_holes"><span class="hs-identifier hs-var">wc_holes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343361"><span class="annot"><span class="annottext">Bag Hole
</span><a href="#local-6989586621681343361"><span class="hs-identifier hs-var">holes</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportWanteds&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Simples =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621681343365"><span class="hs-identifier hs-var">simples</span></a></span><span>
</span><span id="line-556"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Suppress =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tidy_cts =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343360"><span class="hs-identifier hs-var">tidy_cts</span></a></span><span>
</span><span id="line-558"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tidy_holes = &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343359"><span class="hs-identifier hs-var">tidy_holes</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span>         </span><span class="hs-comment">-- First, deal with any out-of-scope errors:</span><span>
</span><span id="line-561"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343358"><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343358"><span class="hs-identifier hs-var">out_of_scope</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343357"><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343357"><span class="hs-identifier hs-var">other_holes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">Hole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-var">isOutOfScopeHole</span></a></span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343359"><span class="hs-identifier hs-var">tidy_holes</span></a></span><span>
</span><span id="line-562"></span><span>               </span><span class="hs-comment">-- don't suppress out-of-scope errors</span><span>
</span><span id="line-563"></span><span>             </span><span id="local-6989586621681343355"><span class="annot"><span class="annottext">ctxt_for_scope_errs :: ReportErrCtxt
</span><a href="#local-6989586621681343355"><span class="hs-identifier hs-var hs-var">ctxt_for_scope_errs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-564"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343354"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343354"><span class="hs-identifier hs-var">no_out_of_scope</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. TcRn a -&gt; TcRn (a, Bool)
</span><a href="GHC.Tc.Utils.Monad.html#askNoErrs"><span class="hs-identifier hs-var">askNoErrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-565"></span><span>                                 </span><span class="annot"><span class="annottext">[Ct] -&gt; ReportErrCtxt -&gt; [Hole] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportHoles"><span class="hs-identifier hs-var">reportHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343360"><span class="hs-identifier hs-var">tidy_cts</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343355"><span class="hs-identifier hs-var">ctxt_for_scope_errs</span></a></span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343358"><span class="hs-identifier hs-var">out_of_scope</span></a></span><span>
</span><span id="line-566"></span><span>
</span><span id="line-567"></span><span>         </span><span class="hs-comment">-- Next, deal with things that are utterly wrong</span><span>
</span><span id="line-568"></span><span>         </span><span class="hs-comment">-- Like Int ~ Bool (incl nullary TyCons)</span><span>
</span><span id="line-569"></span><span>         </span><span class="hs-comment">-- or  Int ~ t a   (AppTy on one side)</span><span>
</span><span id="line-570"></span><span>         </span><span class="hs-comment">-- These /ones/ are not suppressed by the incoming context</span><span>
</span><span id="line-571"></span><span>         </span><span class="hs-comment">-- (but will be by out-of-scope errors)</span><span>
</span><span id="line-572"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343351"><span class="annot"><span class="annottext">ctxt_for_insols :: ReportErrCtxt
</span><a href="#local-6989586621681343351"><span class="hs-identifier hs-var hs-var">ctxt_for_insols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343354"><span class="hs-identifier hs-var">no_out_of_scope</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-573"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; ReportErrCtxt -&gt; [Hole] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportHoles"><span class="hs-identifier hs-var">reportHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343360"><span class="hs-identifier hs-var">tidy_cts</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343351"><span class="hs-identifier hs-var">ctxt_for_insols</span></a></span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343357"><span class="hs-identifier hs-var">other_holes</span></a></span><span>
</span><span id="line-574"></span><span>          </span><span class="hs-comment">-- holes never suppress</span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343350"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343350"><span class="hs-identifier hs-var">ctxt1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343349"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343349"><span class="hs-identifier hs-var">cts1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; [ReporterSpec] -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="GHC.Tc.Errors.html#tryReporters"><span class="hs-identifier hs-var">tryReporters</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343351"><span class="hs-identifier hs-var">ctxt_for_insols</span></a></span><span> </span><span class="annot"><span class="annottext">[ReporterSpec]
</span><a href="#local-6989586621681343347"><span class="hs-identifier hs-var">report1</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343360"><span class="hs-identifier hs-var">tidy_cts</span></a></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span>         </span><span class="hs-comment">-- Now all the other constraints.  We suppress errors here if</span><span>
</span><span id="line-579"></span><span>         </span><span class="hs-comment">-- any of the first batch failed, or if the enclosing context</span><span>
</span><span id="line-580"></span><span>         </span><span class="hs-comment">-- says to suppress</span><span>
</span><span id="line-581"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343346"><span class="annot"><span class="annottext">ctxt2 :: ReportErrCtxt
</span><a href="#local-6989586621681343346"><span class="hs-identifier hs-var hs-var">ctxt2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343350"><span class="hs-identifier hs-var">ctxt1</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-582"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343345"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343345"><span class="hs-identifier hs-var">leftovers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; [ReporterSpec] -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="GHC.Tc.Errors.html#tryReporters"><span class="hs-identifier hs-var">tryReporters</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343346"><span class="hs-identifier hs-var">ctxt2</span></a></span><span> </span><span class="annot"><span class="annottext">[ReporterSpec]
</span><a href="#local-6989586621681343344"><span class="hs-identifier hs-var">report2</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343349"><span class="hs-identifier hs-var">cts1</span></a></span><span>
</span><span id="line-583"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-identifier">MASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">leftovers</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">leftovers</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span>            </span><span class="hs-comment">-- All the Derived ones have been filtered out of simples</span><span>
</span><span id="line-586"></span><span>            </span><span class="hs-comment">-- by the constraint solver. This is ok; we don't want</span><span>
</span><span id="line-587"></span><span>            </span><span class="hs-comment">-- to report unsolved Derived goals as errors</span><span>
</span><span id="line-588"></span><span>            </span><span class="hs-comment">-- See Note [Do not report derived but soluble errors]</span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; Bag a -&gt; m ()
</span><a href="GHC.Data.Bag.html#mapBagM_"><span class="hs-identifier hs-var">mapBagM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Implication -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportImplic"><span class="hs-identifier hs-var">reportImplic</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343346"><span class="hs-identifier hs-var">ctxt2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621681343363"><span class="hs-identifier hs-var">implics</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-591"></span><span>            </span><span class="hs-comment">-- NB ctxt2: don't suppress inner insolubles if there's only a</span><span>
</span><span id="line-592"></span><span>            </span><span class="hs-comment">-- wanted insoluble here; but do suppress inner insolubles</span><span>
</span><span id="line-593"></span><span>            </span><span class="hs-comment">-- if there's a *given* insoluble here (= inaccessible code)</span><span>
</span><span id="line-594"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-595"></span><span>    </span><span id="local-6989586621681343339"><span class="annot"><span class="annottext">env :: TidyEnv
</span><a href="#local-6989586621681343339"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-596"></span><span>    </span><span id="local-6989586621681343360"><span class="annot"><span class="annottext">tidy_cts :: [Ct]
</span><a href="#local-6989586621681343360"><span class="hs-identifier hs-var hs-var">tidy_cts</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv -&gt; Ct -&gt; Ct
</span><a href="GHC.Tc.Utils.TcMType.html#tidyCt"><span class="hs-identifier hs-var">tidyCt</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343339"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621681343365"><span class="hs-identifier hs-var">simples</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>    </span><span id="local-6989586621681343359"><span class="annot"><span class="annottext">tidy_holes :: [Hole]
</span><a href="#local-6989586621681343359"><span class="hs-identifier hs-var hs-var">tidy_holes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv -&gt; Hole -&gt; Hole
</span><a href="GHC.Tc.Utils.TcMType.html#tidyHole"><span class="hs-identifier hs-var">tidyHole</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343339"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag Hole
</span><a href="#local-6989586621681343361"><span class="hs-identifier hs-var">holes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-comment">-- report1: ones that should *not* be suppressed by</span><span>
</span><span id="line-600"></span><span>    </span><span class="hs-comment">--          an insoluble somewhere else in the tree</span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-comment">-- It's crucial that anything that is considered insoluble</span><span>
</span><span id="line-602"></span><span>    </span><span class="hs-comment">-- (see GHC.Tc.Utils.insolubleCt) is caught here, otherwise</span><span>
</span><span id="line-603"></span><span>    </span><span class="hs-comment">-- we might suppress its error message, and proceed on past</span><span>
</span><span id="line-604"></span><span>    </span><span class="hs-comment">-- type checking to get a Lint error later</span><span>
</span><span id="line-605"></span><span>    </span><span id="local-6989586621681343347"><span class="annot"><span class="annottext">report1 :: [ReporterSpec]
</span><a href="#local-6989586621681343347"><span class="hs-identifier hs-var hs-var">report1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;custom_error&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p}. Ct -&gt; p -&gt; Bool
</span><a href="#local-6989586621681343333"><span class="hs-identifier hs-var">is_user_type_error</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">Reporter
</span><a href="GHC.Tc.Errors.html#mkUserTypeErrorReporter"><span class="hs-identifier hs-var">mkUserTypeErrorReporter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReporterSpec
</span><a href="#local-6989586621681343331"><span class="hs-identifier hs-var">given_eq_spec</span></a></span><span>
</span><span id="line-608"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;insoluble2&quot;</span></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p}. p -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343330"><span class="hs-identifier hs-var">utterly_wrong</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var">mkGroupReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-var">mkEqErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;skolem eq1&quot;</span></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343327"><span class="hs-identifier hs-var">very_wrong</span></a></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reporter
</span><a href="GHC.Tc.Errors.html#mkSkolReporter"><span class="hs-identifier hs-var">mkSkolReporter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;skolem eq2&quot;</span></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343325"><span class="hs-identifier hs-var">skolem_eq</span></a></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reporter
</span><a href="GHC.Tc.Errors.html#mkSkolReporter"><span class="hs-identifier hs-var">mkSkolReporter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;non-tv eq&quot;</span></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p}. p -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343324"><span class="hs-identifier hs-var">non_tv_eq</span></a></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reporter
</span><a href="GHC.Tc.Errors.html#mkSkolReporter"><span class="hs-identifier hs-var">mkSkolReporter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span>                  </span><span class="hs-comment">-- The only remaining equalities are alpha ~ ty,</span><span>
</span><span id="line-614"></span><span>                  </span><span class="hs-comment">-- where alpha is untouchable; and representational equalities</span><span>
</span><span id="line-615"></span><span>                  </span><span class="hs-comment">-- Prefer homogeneous equalities over hetero, because the</span><span>
</span><span id="line-616"></span><span>                  </span><span class="hs-comment">-- former might be holding up the latter.</span><span>
</span><span id="line-617"></span><span>                  </span><span class="hs-comment">-- See Note [Equalities with incompatible kinds] in GHC.Tc.Solver.Canonical</span><span>
</span><span id="line-618"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Homo eqs&quot;</span></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">forall {p}. p -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343323"><span class="hs-identifier hs-var">is_homo_equality</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var">mkGroupReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-var">mkEqErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Other eqs&quot;</span></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">(Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343322"><span class="hs-identifier hs-var">is_equality</span></a></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var">mkGroupReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-var">mkEqErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Blocked eqs&quot;</span></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343322"><span class="hs-identifier hs-var">is_equality</span></a></span><span class="hs-special">,</span><span>           </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkSuppressReporter"><span class="hs-identifier hs-var">mkSuppressReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkBlockedEqErr"><span class="hs-identifier hs-var">mkBlockedEqErr</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span>    </span><span class="hs-comment">-- report2: we suppress these if there are insolubles elsewhere in the tree</span><span>
</span><span id="line-623"></span><span>    </span><span id="local-6989586621681343344"><span class="annot"><span class="annottext">report2 :: [ReporterSpec]
</span><a href="#local-6989586621681343344"><span class="hs-identifier hs-var hs-var">report2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Implicit params&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343319"><span class="hs-identifier hs-var">is_ip</span></a></span><span class="hs-special">,</span><span>           </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var">mkGroupReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkIPErr"><span class="hs-identifier hs-var">mkIPErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Irreds&quot;</span></span><span class="hs-special">,</span><span>          </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343317"><span class="hs-identifier hs-var">is_irred</span></a></span><span class="hs-special">,</span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var">mkGroupReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkIrredErr"><span class="hs-identifier hs-var">mkIrredErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Dicts&quot;</span></span><span class="hs-special">,</span><span>           </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343315"><span class="hs-identifier hs-var">is_dict</span></a></span><span class="hs-special">,</span><span>         </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var">mkGroupReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkDictErr"><span class="hs-identifier hs-var">mkDictErr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span>    </span><span class="hs-comment">-- also checks to make sure the constraint isn't HoleBlockerReason</span><span>
</span><span id="line-628"></span><span>    </span><span class="hs-comment">-- See TcCanonical Note [Equalities with incompatible kinds], (4)</span><span>
</span><span id="line-629"></span><span>    </span><span class="annot"><a href="#local-6989586621681343334"><span class="hs-identifier hs-type">unblocked</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#Pred"><span class="hs-identifier hs-type">Pred</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#Pred"><span class="hs-identifier hs-type">Pred</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-630"></span><span>    </span><span id="local-6989586621681343334"><span class="annot"><span class="annottext">unblocked :: (Ct -&gt; Pred -&gt; Bool) -&gt; Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343334"><span class="hs-identifier hs-var hs-var">unblocked</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cc_reason :: Ct -&gt; CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#cc_reason"><span class="hs-identifier hs-var">cc_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleBlockerReason"><span class="hs-identifier hs-type">HoleBlockerReason</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-631"></span><span>    </span><span class="annot"><a href="#local-6989586621681343334"><span class="hs-identifier hs-var">unblocked</span></a></span><span> </span><span id="local-6989586621681343310"><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343310"><span class="hs-identifier hs-var">checker</span></a></span></span><span> </span><span id="local-6989586621681343309"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343309"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681343308"><span class="annot"><span class="annottext">Pred
</span><a href="#local-6989586621681343308"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343310"><span class="hs-identifier hs-var">checker</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343309"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Pred
</span><a href="#local-6989586621681343308"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-632"></span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-comment">-- rigid_nom_eq, rigid_nom_tv_eq,</span><span>
</span><span id="line-634"></span><span>    </span><span class="annot"><a href="#local-6989586621681343315"><span class="hs-identifier hs-type">is_dict</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681343322"><span class="hs-identifier hs-type">is_equality</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681343319"><span class="hs-identifier hs-type">is_ip</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681343317"><span class="hs-identifier hs-type">is_irred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#Pred"><span class="hs-identifier hs-type">Pred</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span>    </span><span id="local-6989586621681343307"><span class="annot"><span class="annottext">is_given_eq :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343307"><span class="hs-identifier hs-var hs-var">is_given_eq</span></a></span></span><span> </span><span id="local-6989586621681343306"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343306"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681343305"><span class="annot"><span class="annottext">Pred
</span><a href="#local-6989586621681343305"><span class="hs-identifier hs-var">pred</span></a></span></span><span>
</span><span id="line-637"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Pred
</span><a href="#local-6989586621681343305"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#arisesFromGivens"><span class="hs-identifier hs-var">arisesFromGivens</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343306"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-638"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-639"></span><span>       </span><span class="hs-comment">-- I think all given residuals are equalities</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span>    </span><span class="hs-comment">-- Things like (Int ~N Bool)</span><span>
</span><span id="line-642"></span><span>    </span><span id="local-6989586621681343330"><span class="annot"><span class="annottext">utterly_wrong :: p -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343330"><span class="hs-identifier hs-var hs-var">utterly_wrong</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span id="local-6989586621681343301"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343301"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681343300"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343300"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRigidTy"><span class="hs-identifier hs-var">isRigidTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343301"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRigidTy"><span class="hs-identifier hs-var">isRigidTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343300"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-643"></span><span>    </span><span class="annot"><a href="#local-6989586621681343330"><span class="hs-identifier hs-var">utterly_wrong</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span>    </span><span class="hs-comment">-- Things like (a ~N Int)</span><span>
</span><span id="line-646"></span><span>    </span><span id="local-6989586621681343327"><span class="annot"><span class="annottext">very_wrong :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343327"><span class="hs-identifier hs-var hs-var">very_wrong</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span id="local-6989586621681343298"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343298"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681343297"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343297"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Errors.html#isSkolemTy"><span class="hs-identifier hs-var">isSkolemTy</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343368"><span class="hs-identifier hs-var">tc_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343298"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRigidTy"><span class="hs-identifier hs-var">isRigidTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343297"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-647"></span><span>    </span><span class="annot"><a href="#local-6989586621681343327"><span class="hs-identifier hs-var">very_wrong</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-648"></span><span>
</span><span id="line-649"></span><span>    </span><span class="hs-comment">-- Things like (a ~N b) or (a  ~N  F Bool)</span><span>
</span><span id="line-650"></span><span>    </span><span id="local-6989586621681343325"><span class="annot"><span class="annottext">skolem_eq :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343325"><span class="hs-identifier hs-var hs-var">skolem_eq</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span id="local-6989586621681343295"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343295"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Errors.html#isSkolemTy"><span class="hs-identifier hs-var">isSkolemTy</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343368"><span class="hs-identifier hs-var">tc_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343295"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-651"></span><span>    </span><span class="annot"><a href="#local-6989586621681343325"><span class="hs-identifier hs-var">skolem_eq</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-652"></span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-comment">-- Things like (F a  ~N  Int)</span><span>
</span><span id="line-654"></span><span>    </span><span id="local-6989586621681343324"><span class="annot"><span class="annottext">non_tv_eq :: p -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343324"><span class="hs-identifier hs-var hs-var">non_tv_eq</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span id="local-6989586621681343294"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343294"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isTyVarTy"><span class="hs-identifier hs-var">isTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343294"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>    </span><span class="annot"><a href="#local-6989586621681343324"><span class="hs-identifier hs-var">non_tv_eq</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span>    </span><span id="local-6989586621681343333"><span class="annot"><span class="annottext">is_user_type_error :: Ct -&gt; p -&gt; Bool
</span><a href="#local-6989586621681343333"><span class="hs-identifier hs-var hs-var">is_user_type_error</span></a></span></span><span> </span><span id="local-6989586621681343292"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343292"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isUserTypeErrorCt"><span class="hs-identifier hs-var">isUserTypeErrorCt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343292"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span>    </span><span id="local-6989586621681343323"><span class="annot"><span class="annottext">is_homo_equality :: p -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343323"><span class="hs-identifier hs-var hs-var">is_homo_equality</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681343287"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343287"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681343286"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343286"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#tcTypeKind"><span class="hs-identifier hs-var">tcTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343287"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#tcEqType"><span class="hs-operator hs-var">`tcEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#tcTypeKind"><span class="hs-identifier hs-var">tcTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343286"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-660"></span><span>    </span><span class="annot"><a href="#local-6989586621681343323"><span class="hs-identifier hs-var">is_homo_equality</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span>    </span><span id="local-6989586621681343322"><span class="annot"><span class="annottext">is_equality :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343322"><span class="hs-identifier hs-var hs-var">is_equality</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-663"></span><span>    </span><span class="annot"><a href="#local-6989586621681343322"><span class="hs-identifier hs-var">is_equality</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-664"></span><span>
</span><span id="line-665"></span><span>    </span><span id="local-6989586621681343315"><span class="annot"><span class="annottext">is_dict :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343315"><span class="hs-identifier hs-var hs-var">is_dict</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#ClassPred"><span class="hs-identifier hs-type">ClassPred</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-666"></span><span>    </span><span class="annot"><a href="#local-6989586621681343315"><span class="hs-identifier hs-var">is_dict</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-667"></span><span>
</span><span id="line-668"></span><span>    </span><span id="local-6989586621681343319"><span class="annot"><span class="annottext">is_ip :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343319"><span class="hs-identifier hs-var hs-var">is_ip</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#ClassPred"><span class="hs-identifier hs-type">ClassPred</span></a></span><span> </span><span id="local-6989586621681343282"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681343282"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Class -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isIPClass"><span class="hs-identifier hs-var">isIPClass</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681343282"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="#local-6989586621681343319"><span class="hs-identifier hs-var">is_ip</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-670"></span><span>
</span><span id="line-671"></span><span>    </span><span id="local-6989586621681343317"><span class="annot"><span class="annottext">is_irred :: Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343317"><span class="hs-identifier hs-var hs-var">is_irred</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#IrredPred"><span class="hs-identifier hs-type">IrredPred</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-672"></span><span>    </span><span class="annot"><a href="#local-6989586621681343317"><span class="hs-identifier hs-var">is_irred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span>    </span><span id="local-6989586621681343331"><span class="annot"><span class="annottext">given_eq_spec :: ReporterSpec
</span><a href="#local-6989586621681343331"><span class="hs-identifier hs-var hs-var">given_eq_spec</span></a></span></span><span>  </span><span class="hs-comment">-- See Note [Given errors]</span><span>
</span><span id="line-675"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; Bool
</span><a href="#local-6989586621681343279"><span class="hs-identifier hs-var">has_gadt_match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343369"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;insoluble1a&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343307"><span class="hs-identifier hs-var">is_given_eq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">Reporter
</span><a href="GHC.Tc.Errors.html#mkGivenErrorReporter"><span class="hs-identifier hs-var">mkGivenErrorReporter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-678"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;insoluble1b&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343307"><span class="hs-identifier hs-var">is_given_eq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reporter
</span><a href="GHC.Tc.Errors.html#ignoreErrorReporter"><span class="hs-identifier hs-var">ignoreErrorReporter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>          </span><span class="hs-comment">-- False means don't suppress subsequent errors</span><span>
</span><span id="line-680"></span><span>          </span><span class="hs-comment">-- Reason: we don't report all given errors</span><span>
</span><span id="line-681"></span><span>          </span><span class="hs-comment">--         (see mkGivenErrorReporter), and we should only suppress</span><span>
</span><span id="line-682"></span><span>          </span><span class="hs-comment">--         subsequent errors if we actually report this one!</span><span>
</span><span id="line-683"></span><span>          </span><span class="hs-comment">--         #13446 is an example</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span>    </span><span class="hs-comment">-- See Note [Given errors]</span><span>
</span><span id="line-686"></span><span>    </span><span id="local-6989586621681343279"><span class="annot"><span class="annottext">has_gadt_match :: [Implication] -&gt; Bool
</span><a href="#local-6989586621681343279"><span class="hs-identifier hs-var hs-var">has_gadt_match</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><a href="#local-6989586621681343279"><span class="hs-identifier hs-var">has_gadt_match</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343275"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343275"><span class="hs-identifier hs-var">implic</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681343274"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681343274"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSkol"><span class="hs-identifier hs-type">PatSkol</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343275"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-689"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#ic_given_eqs"><span class="hs-identifier hs-var">ic_given_eqs</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343275"><span class="hs-identifier hs-var">implic</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span>
</span><span id="line-690"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#ic_warn_inaccessible"><span class="hs-identifier hs-var">ic_warn_inaccessible</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343275"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-691"></span><span>          </span><span class="hs-comment">-- Don't bother doing this if -Winaccessible-code isn't enabled.</span><span>
</span><span id="line-692"></span><span>          </span><span class="hs-comment">-- See Note [Avoid -Winaccessible-code when deriving] in GHC.Tc.TyCl.Instance.</span><span>
</span><span id="line-693"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-694"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-695"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; Bool
</span><a href="#local-6989586621681343279"><span class="hs-identifier hs-var">has_gadt_match</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681343274"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-698"></span><span class="annot"><a href="GHC.Tc.Errors.html#isSkolemTy"><span class="hs-identifier hs-type">isSkolemTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcLevel"><span class="hs-identifier hs-type">TcLevel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-699"></span><span class="hs-comment">-- The type is a skolem tyvar</span><span>
</span><span id="line-700"></span><span id="isSkolemTy"><span class="annot"><span class="annottext">isSkolemTy :: TcLevel -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Errors.html#isSkolemTy"><span class="hs-identifier hs-var hs-var">isSkolemTy</span></a></span></span><span> </span><span id="local-6989586621681343268"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343268"><span class="hs-identifier hs-var">tc_lvl</span></a></span></span><span> </span><span id="local-6989586621681343267"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343267"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681343266"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343266"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe TcId
</span><a href="GHC.Core.Type.html#getTyVar_maybe"><span class="hs-identifier hs-var">getTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343267"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isSkolemTyVar"><span class="hs-identifier hs-var">isSkolemTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343266"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-703"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isTyVarTyVar"><span class="hs-identifier hs-var">isTyVarTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343266"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isTouchableMetaTyVar"><span class="hs-identifier hs-var">isTouchableMetaTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681343268"><span class="hs-identifier hs-var">tc_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343266"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>     </span><span class="hs-comment">-- The last case is for touchable TyVarTvs</span><span>
</span><span id="line-705"></span><span>     </span><span class="hs-comment">-- we postpone untouchables to a latter test (too obscure)</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-708"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="annot"><a href="GHC.Tc.Errors.html#isTyFun_maybe"><span class="hs-identifier hs-type">isTyFun_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-711"></span><span id="isTyFun_maybe"><span class="annot"><span class="annottext">isTyFun_maybe :: Type -&gt; Maybe TyCon
</span><a href="GHC.Tc.Errors.html#isTyFun_maybe"><span class="hs-identifier hs-var hs-var">isTyFun_maybe</span></a></span></span><span> </span><span id="local-6989586621681343260"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343260"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343260"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-712"></span><span>                      </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343258"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681343258"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeFamilyTyCon"><span class="hs-identifier hs-var">isTypeFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681343258"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681343258"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-713"></span><span>                      </span><span class="annot"><span class="annottext">Maybe (TyCon, [Type])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="hs-comment">--------------------------------------------</span><span>
</span><span id="line-716"></span><span class="hs-comment">--      Reporters</span><span>
</span><span id="line-717"></span><span class="hs-comment">--------------------------------------------</span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span class="hs-keyword">type</span><span> </span><span id="Reporter"><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-var">Reporter</span></a></span></span><span>
</span><span id="line-720"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span class="hs-keyword">type</span><span> </span><span id="ReporterSpec"><span class="annot"><a href="GHC.Tc.Errors.html#ReporterSpec"><span class="hs-identifier hs-var">ReporterSpec</span></a></span></span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>                     </span><span class="hs-comment">-- Name</span><span>
</span><span id="line-723"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#Pred"><span class="hs-identifier hs-type">Pred</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>         </span><span class="hs-comment">-- Pick these ones</span><span>
</span><span id="line-724"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                       </span><span class="hs-comment">-- True &lt;=&gt; suppress subsequent reporters</span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span class="hs-special">)</span><span>                  </span><span class="hs-comment">-- The reporter itself</span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkSkolReporter"><span class="hs-identifier hs-type">mkSkolReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-728"></span><span class="hs-comment">-- Suppress duplicates with either the same LHS, or same location</span><span>
</span><span id="line-729"></span><span id="mkSkolReporter"><span class="annot"><span class="annottext">mkSkolReporter :: Reporter
</span><a href="GHC.Tc.Errors.html#mkSkolReporter"><span class="hs-identifier hs-var hs-var">mkSkolReporter</span></a></span></span><span> </span><span id="local-6989586621681343256"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343256"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343255"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343255"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-730"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#reportGroup"><span class="hs-identifier hs-var">reportGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-var">mkEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343256"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Ct] -&gt; [[Ct]]
</span><a href="#local-6989586621681343252"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343255"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-732"></span><span>     </span><span id="local-6989586621681343252"><span class="annot"><span class="annottext">group :: [Ct] -&gt; [[Ct]]
</span><a href="#local-6989586621681343252"><span class="hs-identifier hs-var hs-var">group</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-733"></span><span>     </span><span class="annot"><a href="#local-6989586621681343252"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343251"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343251"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681343250"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343250"><span class="hs-identifier hs-var">cts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343251"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343249"><span class="hs-identifier hs-var">yeses</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; [[Ct]]
</span><a href="#local-6989586621681343252"><span class="hs-identifier hs-var">group</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343248"><span class="hs-identifier hs-var">noes</span></a></span><span>
</span><span id="line-734"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-735"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681343249"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343249"><span class="hs-identifier hs-var">yeses</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343248"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343248"><span class="hs-identifier hs-var">noes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Ct -&gt; Bool
</span><a href="#local-6989586621681343247"><span class="hs-identifier hs-var">group_with</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343251"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343250"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span>     </span><span id="local-6989586621681343247"><span class="annot"><span class="annottext">group_with :: Ct -&gt; Ct -&gt; Bool
</span><a href="#local-6989586621681343247"><span class="hs-identifier hs-var hs-var">group_with</span></a></span></span><span> </span><span id="local-6989586621681343246"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343246"><span class="hs-identifier hs-var">ct1</span></a></span></span><span> </span><span id="local-6989586621681343245"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343245"><span class="hs-identifier hs-var">ct2</span></a></span></span><span>
</span><span id="line-738"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Ct -&gt; Ordering
</span><a href="GHC.Tc.Errors.html#cmp_loc"><span class="hs-identifier hs-var">cmp_loc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343246"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343245"><span class="hs-identifier hs-var">ct2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-739"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Ct -&gt; Bool
</span><a href="GHC.Tc.Errors.html#eq_lhs_type"><span class="hs-identifier hs-var">eq_lhs_type</span></a></span><span>   </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343246"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343245"><span class="hs-identifier hs-var">ct2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-740"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportHoles"><span class="hs-identifier hs-type">reportHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- other (tidied) constraints</span><span>
</span><span id="line-743"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span id="reportHoles"><span class="annot"><span class="annottext">reportHoles :: [Ct] -&gt; ReportErrCtxt -&gt; [Hole] -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#reportHoles"><span class="hs-identifier hs-var hs-var">reportHoles</span></a></span></span><span> </span><span id="local-6989586621681343242"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343242"><span class="hs-identifier hs-var">tidy_cts</span></a></span></span><span> </span><span id="local-6989586621681343241"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343241"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343240"><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343240"><span class="hs-identifier hs-var">holes</span></a></span></span><span>
</span><span id="line-745"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-746"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343239"><span class="annot"><span class="annottext">holes' :: [Hole]
</span><a href="#local-6989586621681343239"><span class="hs-identifier hs-var hs-var">holes'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Hole -&gt; Bool
</span><a href="GHC.Tc.Errors.html#keepThisHole"><span class="hs-identifier hs-var">keepThisHole</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343241"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343240"><span class="hs-identifier hs-var">holes</span></a></span><span>
</span><span id="line-747"></span><span>      </span><span class="hs-comment">-- Zonk and tidy all the TcLclEnvs before calling `mkHoleError`</span><span>
</span><span id="line-748"></span><span>      </span><span class="hs-comment">-- because otherwise types will be zonked and tidied many times over.</span><span>
</span><span id="line-749"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681343237"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343237"><span class="hs-identifier hs-var">tidy_env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343236"><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681343236"><span class="hs-identifier hs-var">lcl_name_cache</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [TcLclEnv] -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="GHC.Tc.Errors.html#zonkTidyTcLclEnvs"><span class="hs-identifier hs-var">zonkTidyTcLclEnvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343241"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ctl_env"><span class="hs-identifier hs-var">ctl_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Hole -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#hole_loc"><span class="hs-identifier hs-var">hole_loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343239"><span class="hs-identifier hs-var">holes'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343232"><span class="annot"><span class="annottext">ctxt' :: ReportErrCtxt
</span><a href="#local-6989586621681343232"><span class="hs-identifier hs-var hs-var">ctxt'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343241"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_tidy :: TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343237"><span class="hs-identifier hs-var">tidy_env'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-751"></span><span>      </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[Hole]
</span><a href="#local-6989586621681343239"><span class="hs-identifier hs-var">holes'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681343231"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343231"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-752"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343230"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343230"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameEnv Type
-&gt; [Ct] -&gt; ReportErrCtxt -&gt; Hole -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkHoleError"><span class="hs-identifier hs-var">mkHoleError</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681343236"><span class="hs-identifier hs-var">lcl_name_cache</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343242"><span class="hs-identifier hs-var">tidy_cts</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343232"><span class="hs-identifier hs-var">ctxt'</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343231"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-753"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Hole -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeReportHoleError"><span class="hs-identifier hs-var">maybeReportHoleError</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343241"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343231"><span class="hs-identifier hs-var">hole</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343230"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-754"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; Hole -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeAddDeferredHoleBinding"><span class="hs-identifier hs-var">maybeAddDeferredHoleBinding</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343241"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343230"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343231"><span class="hs-identifier hs-var">hole</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="annot"><a href="GHC.Tc.Errors.html#keepThisHole"><span class="hs-identifier hs-type">keepThisHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-757"></span><span class="hs-comment">-- See Note [Skip type holes rapidly]</span><span>
</span><span id="line-758"></span><span id="keepThisHole"><span class="annot"><span class="annottext">keepThisHole :: ReportErrCtxt -&gt; Hole -&gt; Bool
</span><a href="GHC.Tc.Errors.html#keepThisHole"><span class="hs-identifier hs-var hs-var">keepThisHole</span></a></span></span><span> </span><span id="local-6989586621681343226"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343226"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343225"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343225"><span class="hs-identifier hs-var">hole</span></a></span></span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343225"><span class="hs-identifier hs-var">hole</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-760"></span><span>       </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-type">ExprHole</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-761"></span><span>       </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#TypeHole"><span class="hs-identifier hs-var">TypeHole</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343221"><span class="hs-identifier hs-var">keep_type_hole</span></a></span><span>
</span><span id="line-762"></span><span>       </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#ConstraintHole"><span class="hs-identifier hs-var">ConstraintHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343221"><span class="hs-identifier hs-var">keep_type_hole</span></a></span><span>
</span><span id="line-763"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-764"></span><span>    </span><span id="local-6989586621681343221"><span class="annot"><span class="annottext">keep_type_hole :: Bool
</span><a href="#local-6989586621681343221"><span class="hs-identifier hs-var hs-var">keep_type_hole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_type_holes"><span class="hs-identifier hs-var">cec_type_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343226"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-765"></span><span>                         </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-766"></span><span>                         </span><span class="annot"><span class="annottext">HoleChoice
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span class="hs-comment">-- | zonkTidyTcLclEnvs takes a bunch of 'TcLclEnv's, each from a Hole.</span><span>
</span><span id="line-769"></span><span class="hs-comment">-- It returns a ('Name' :-&gt; 'Type') mapping which gives the zonked, tidied</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- type for each Id in any of the binder stacks in the  'TcLclEnv's.</span><span>
</span><span id="line-771"></span><span class="hs-comment">-- Since there is a huge overlap between these stacks, is is much,</span><span>
</span><span id="line-772"></span><span class="hs-comment">-- much faster to do them all at once, avoiding duplication.</span><span>
</span><span id="line-773"></span><span class="annot"><a href="GHC.Tc.Errors.html#zonkTidyTcLclEnvs"><span class="hs-identifier hs-type">zonkTidyTcLclEnvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#TidyEnv"><span class="hs-identifier hs-type">TidyEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.Env.html#TidyEnv"><span class="hs-identifier hs-type">TidyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span id="zonkTidyTcLclEnvs"><span class="annot"><span class="annottext">zonkTidyTcLclEnvs :: TidyEnv -&gt; [TcLclEnv] -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="GHC.Tc.Errors.html#zonkTidyTcLclEnvs"><span class="hs-identifier hs-var hs-var">zonkTidyTcLclEnvs</span></a></span></span><span> </span><span id="local-6989586621681343219"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343219"><span class="hs-identifier hs-var">tidy_env</span></a></span></span><span> </span><span id="local-6989586621681343218"><span class="annot"><span class="annottext">[TcLclEnv]
</span><a href="#local-6989586621681343218"><span class="hs-identifier hs-var">lcls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="../../base-4.16.4.0/src/Control-Monad.html#foldM"><span class="hs-identifier hs-var">foldM</span></a></span><span> </span><span class="annot"><span class="annottext">(TidyEnv, NameEnv Type) -&gt; TcBinder -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343219"><span class="hs-identifier hs-var">tidy_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a
</span><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier hs-var">emptyNameEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv -&gt; TcBinderStack
</span><a href="GHC.Tc.Types.html#tcl_bndrs"><span class="hs-identifier hs-var">tcl_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[TcLclEnv]
</span><a href="#local-6989586621681343218"><span class="hs-identifier hs-var">lcls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-776"></span><span>    </span><span id="local-6989586621681343217"><span class="annot"><span class="annottext">go :: (TidyEnv, NameEnv Type) -&gt; TcBinder -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343217"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681343210"><span class="annot"><span class="annottext">(TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343210"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span id="local-6989586621681343209"><span class="annot"><span class="annottext">TcBinder
</span><a href="#local-6989586621681343209"><span class="hs-identifier hs-var">tc_bndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcBinder
</span><a href="#local-6989586621681343209"><span class="hs-identifier hs-var">tc_bndr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-777"></span><span>          </span><span class="annot"><a href="GHC.Tc.Types.html#TcTvBndr"><span class="hs-identifier hs-type">TcTvBndr</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343210"><span class="hs-identifier hs-var">envs</span></a></span><span>
</span><span id="line-778"></span><span>          </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdBndr"><span class="hs-identifier hs-type">TcIdBndr</span></a></span><span> </span><span id="local-6989586621681343206"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343206"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681343205"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681343205"><span class="hs-identifier hs-var">_top_lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Type -&gt; (TidyEnv, NameEnv Type) -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343204"><span class="hs-identifier hs-var">go_one</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343206"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343206"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343210"><span class="hs-identifier hs-var">envs</span></a></span><span>
</span><span id="line-779"></span><span>          </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdBndr_ExpType"><span class="hs-identifier hs-type">TcIdBndr_ExpType</span></a></span><span> </span><span id="local-6989586621681343201"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681343201"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681343200"><span class="annot"><span class="annottext">ExpType
</span><a href="#local-6989586621681343200"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621681343199"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681343199"><span class="hs-identifier hs-var">_top_lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-780"></span><span>            </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343198"><span class="annot"><span class="annottext">Maybe Type
</span><a href="#local-6989586621681343198"><span class="hs-identifier hs-var">mb_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExpType -&gt; TcM (Maybe Type)
</span><a href="GHC.Tc.Utils.TcMType.html#readExpType_maybe"><span class="hs-identifier hs-var">readExpType_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">ExpType
</span><a href="#local-6989586621681343200"><span class="hs-identifier hs-var">et</span></a></span><span>
</span><span id="line-781"></span><span>                   </span><span class="hs-comment">-- et really should be filled in by now. But there's a chance</span><span>
</span><span id="line-782"></span><span>                   </span><span class="hs-comment">-- it hasn't, if, say, we're reporting a kind error en route to</span><span>
</span><span id="line-783"></span><span>                   </span><span class="hs-comment">-- checking a term. See test indexed-types/should_fail/T8129</span><span>
</span><span id="line-784"></span><span>                   </span><span class="hs-comment">-- Or we are reporting errors from the ambiguity check on</span><span>
</span><span id="line-785"></span><span>                   </span><span class="hs-comment">-- a local type signature</span><span>
</span><span id="line-786"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Type
</span><a href="#local-6989586621681343198"><span class="hs-identifier hs-var">mb_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-787"></span><span>                   </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681343196"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343196"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Type -&gt; (TidyEnv, NameEnv Type) -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343204"><span class="hs-identifier hs-var">go_one</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681343201"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343196"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343210"><span class="hs-identifier hs-var">envs</span></a></span><span>
</span><span id="line-788"></span><span>                   </span><span class="annot"><span class="annottext">Maybe Type
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343210"><span class="hs-identifier hs-var">envs</span></a></span><span>
</span><span id="line-789"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-790"></span><span>    </span><span id="local-6989586621681343204"><span class="annot"><span class="annottext">go_one :: Name
-&gt; Type -&gt; (TidyEnv, NameEnv Type) -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="#local-6989586621681343204"><span class="hs-identifier hs-var hs-var">go_one</span></a></span></span><span> </span><span id="local-6989586621681343192"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681343192"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681343191"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343191"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343190"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343190"><span class="hs-identifier hs-var">tidy_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343189"><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681343189"><span class="hs-identifier hs-var">name_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-791"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681343192"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Name -&gt; NameEnv a -&gt; Bool
</span><a href="GHC.Types.Name.Env.html#elemNameEnv"><span class="hs-operator hs-var">`elemNameEnv`</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681343189"><span class="hs-identifier hs-var">name_env</span></a></span><span>
</span><span id="line-792"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343190"><span class="hs-identifier hs-var">tidy_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681343189"><span class="hs-identifier hs-var">name_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-794"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681343187"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343187"><span class="hs-identifier hs-var">tidy_env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343186"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343186"><span class="hs-identifier hs-var">tidy_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; Type -&gt; TcM (TidyEnv, Type)
</span><a href="GHC.Tc.Utils.TcMType.html#zonkTidyTcType"><span class="hs-identifier hs-var">zonkTidyTcType</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343190"><span class="hs-identifier hs-var">tidy_env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343191"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-795"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681343187"><span class="hs-identifier hs-var">tidy_env'</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; a -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnv"><span class="hs-identifier hs-var">extendNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681343189"><span class="hs-identifier hs-var">name_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681343192"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343186"><span class="hs-identifier hs-var">tidy_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-comment">{- Note [Skip type holes rapidly]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we have module with a /lot/ of partial type signatures, and we
compile it while suppressing partial-type-signature warnings.  Then
we don't want to spend ages constructing error messages and lists of
relevant bindings that we never display! This happened in #14766, in
which partial type signatures in a Happy-generated parser cause a huge
increase in compile time.

The function ignoreThisHole short-circuits the error/warning generation
machinery, in cases where it is definitely going to be a no-op.
-}</span><span>
</span><span id="line-809"></span><span>
</span><span id="line-810"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkUserTypeErrorReporter"><span class="hs-identifier hs-type">mkUserTypeErrorReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-811"></span><span id="mkUserTypeErrorReporter"><span class="annot"><span class="annottext">mkUserTypeErrorReporter :: Reporter
</span><a href="GHC.Tc.Errors.html#mkUserTypeErrorReporter"><span class="hs-identifier hs-var hs-var">mkUserTypeErrorReporter</span></a></span></span><span> </span><span id="local-6989586621681343183"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343183"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681343182"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343182"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343181"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343181"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkUserTypeError"><span class="hs-identifier hs-var">mkUserTypeError</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343183"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343182"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-813"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeReportError"><span class="hs-identifier hs-var">maybeReportError</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343183"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343181"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-814"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; Ct -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#addDeferredBinding"><span class="hs-identifier hs-var">addDeferredBinding</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343183"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343181"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343182"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkUserTypeError"><span class="hs-identifier hs-type">mkUserTypeError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-817"></span><span id="mkUserTypeError"><span class="annot"><span class="annottext">mkUserTypeError :: ReportErrCtxt -&gt; Ct -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkUserTypeError"><span class="hs-identifier hs-var hs-var">mkUserTypeError</span></a></span></span><span> </span><span id="local-6989586621681343177"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343177"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343176"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343176"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343177"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343176"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-818"></span><span>                        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span>
</span><span id="line-819"></span><span>                        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.Type.html#pprUserTypeErrorTy"><span class="hs-identifier hs-var">pprUserTypeErrorTy</span></a></span><span>
</span><span id="line-820"></span><span>                        </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe Type
</span><a href="GHC.Tc.Types.Constraint.html#getUserTypeErrorMsg"><span class="hs-identifier hs-var">getUserTypeErrorMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343176"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-821"></span><span>                            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681343172"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343172"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343172"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-822"></span><span>                            </span><span class="annot"><span class="annottext">Maybe Type
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkUserTypeError&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343176"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkGivenErrorReporter"><span class="hs-identifier hs-type">mkGivenErrorReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-826"></span><span class="hs-comment">-- See Note [Given errors]</span><span>
</span><span id="line-827"></span><span id="mkGivenErrorReporter"><span class="annot"><span class="annottext">mkGivenErrorReporter :: Reporter
</span><a href="GHC.Tc.Errors.html#mkGivenErrorReporter"><span class="hs-identifier hs-var hs-var">mkGivenErrorReporter</span></a></span></span><span> </span><span id="local-6989586621681343171"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343171"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343170"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343170"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-828"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343169"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343169"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343168"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343168"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343167"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343167"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; TcM (ReportErrCtxt, SDoc, Ct)
</span><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-var">relevantBindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343171"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343165"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-829"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343164"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343164"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-830"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343162"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343162"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Implication]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343169"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-831"></span><span>                 </span><span class="hs-comment">-- Always non-empty when mkGivenErrorReporter is called</span><span>
</span><span id="line-832"></span><span>             </span><span id="local-6989586621681343161"><span class="annot"><span class="annottext">ct' :: Ct
</span><a href="#local-6989586621681343161"><span class="hs-identifier hs-var hs-var">ct'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtLoc -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#setCtLoc"><span class="hs-identifier hs-var">setCtLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343167"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; TcLclEnv -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#setCtLocEnv"><span class="hs-identifier hs-var">setCtLocEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343167"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343162"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>                   </span><span class="hs-comment">-- For given constraints we overwrite the env (and hence src-loc)</span><span>
</span><span id="line-834"></span><span>                   </span><span class="hs-comment">-- with one from the immediately-enclosing implication.</span><span>
</span><span id="line-835"></span><span>                   </span><span class="hs-comment">-- See Note [Inaccessible code]</span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span>             </span><span id="local-6989586621681343157"><span class="annot"><span class="annottext">inaccessible_msg :: SDoc
</span><a href="#local-6989586621681343157"><span class="hs-identifier hs-var hs-var">inaccessible_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Inaccessible code in&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>                                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681343162"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-839"></span><span>             </span><span id="local-6989586621681343156"><span class="annot"><span class="annottext">report :: Report
</span><a href="#local-6989586621681343156"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343157"><span class="hs-identifier hs-var">inaccessible_msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span>
</span><span id="line-840"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var">mk_relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343168"><span class="hs-identifier hs-var">binds_msg</span></a></span><span>
</span><span id="line-841"></span><span>
</span><span id="line-842"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681343155"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343155"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; Type
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr_help"><span class="hs-identifier hs-var">mkEqErr_help</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343164"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343169"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681343156"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343161"><span class="hs-identifier hs-var">ct'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343153"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343152"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkGivenErrorReporter&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343167"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnInaccessibleCode"><span class="hs-identifier hs-var">Opt_WarnInaccessibleCode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343155"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-846"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-847"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681343165"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343165"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343170"><span class="hs-identifier hs-var">cts</span></a></span><span>    </span><span class="hs-comment">-- Never empty</span><span>
</span><span id="line-848"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681343153"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343153"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343152"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343152"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; (Type, Type)
</span><a href="GHC.Core.Predicate.html#getEqPredTys"><span class="hs-identifier hs-var">getEqPredTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343165"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="annot"><a href="GHC.Tc.Errors.html#ignoreErrorReporter"><span class="hs-identifier hs-type">ignoreErrorReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-851"></span><span class="hs-comment">-- Discard Given errors that don't come from</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- a pattern match; maybe we should warn instead?</span><span>
</span><span id="line-853"></span><span id="ignoreErrorReporter"><span class="annot"><span class="annottext">ignoreErrorReporter :: Reporter
</span><a href="GHC.Tc.Errors.html#ignoreErrorReporter"><span class="hs-identifier hs-var hs-var">ignoreErrorReporter</span></a></span></span><span> </span><span id="local-6989586621681343148"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343148"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343147"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343147"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkGivenErrorReporter no&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343147"><span class="hs-identifier hs-var">cts</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343148"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-855"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span class="hs-comment">{- Note [Given errors]
~~~~~~~~~~~~~~~~~~~~~~
Given constraints represent things for which we have (or will have)
evidence, so they aren't errors.  But if a Given constraint is
insoluble, this code is inaccessible, and we might want to at least
warn about that.  A classic case is

   data T a where
     T1 :: T Int
     T2 :: T a
     T3 :: T Bool

   f :: T Int -&gt; Bool
   f T1 = ...
   f T2 = ...
   f T3 = ...  -- We want to report this case as inaccessible

We'd like to point out that the T3 match is inaccessible. It
will have a Given constraint [G] Int ~ Bool.

But we don't want to report ALL insoluble Given constraints.  See Trac
#12466 for a long discussion.  For example, if we aren't careful
we'll complain about
   f :: ((Int ~ Bool) =&gt; a -&gt; a) -&gt; Int
which arguably is OK.  It's more debatable for
   g :: (Int ~ Bool) =&gt; Int -&gt; Int
but it's tricky to distinguish these cases so we don't report
either.

The bottom line is this: has_gadt_match looks for an enclosing
pattern match which binds some equality constraints.  If we
find one, we report the insoluble Given.
-}</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-type">mkGroupReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-893"></span><span>                             </span><span class="hs-comment">-- Make error message for a group</span><span>
</span><span id="line-894"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>  </span><span class="hs-comment">-- Deal with lots of constraints</span><span>
</span><span id="line-895"></span><span class="hs-comment">-- Group together errors from same location,</span><span>
</span><span id="line-896"></span><span class="hs-comment">-- and report only the first (to avoid a cascade)</span><span>
</span><span id="line-897"></span><span id="mkGroupReporter"><span class="annot"><span class="annottext">mkGroupReporter :: (ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkGroupReporter"><span class="hs-identifier hs-var hs-var">mkGroupReporter</span></a></span></span><span> </span><span id="local-6989586621681343146"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343146"><span class="hs-identifier hs-var">mk_err</span></a></span></span><span> </span><span id="local-6989586621681343145"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343145"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343144"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343144"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#reportGroup"><span class="hs-identifier hs-var">reportGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343146"><span class="hs-identifier hs-var">mk_err</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343145"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [NonEmpty a]
</span><a href="GHC.Data.List.SetOps.html#equivClasses"><span class="hs-identifier hs-var">equivClasses</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Ct -&gt; Ordering
</span><a href="GHC.Tc.Errors.html#cmp_loc"><span class="hs-identifier hs-var">cmp_loc</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343144"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="hs-comment">-- Like mkGroupReporter, but doesn't actually print error messages</span><span>
</span><span id="line-901"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkSuppressReporter"><span class="hs-identifier hs-type">mkSuppressReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-902"></span><span id="mkSuppressReporter"><span class="annot"><span class="annottext">mkSuppressReporter :: (ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#mkSuppressReporter"><span class="hs-identifier hs-var hs-var">mkSuppressReporter</span></a></span></span><span> </span><span id="local-6989586621681343143"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343143"><span class="hs-identifier hs-var">mk_err</span></a></span></span><span> </span><span id="local-6989586621681343142"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343142"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343141"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343141"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#suppressGroup"><span class="hs-identifier hs-var">suppressGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343143"><span class="hs-identifier hs-var">mk_err</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343142"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [NonEmpty a]
</span><a href="GHC.Data.List.SetOps.html#equivClasses"><span class="hs-identifier hs-var">equivClasses</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Ct -&gt; Ordering
</span><a href="GHC.Tc.Errors.html#cmp_loc"><span class="hs-identifier hs-var">cmp_loc</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343141"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span class="annot"><a href="GHC.Tc.Errors.html#eq_lhs_type"><span class="hs-identifier hs-type">eq_lhs_type</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-906"></span><span id="eq_lhs_type"><span class="annot"><span class="annottext">eq_lhs_type :: Ct -&gt; Ct -&gt; Bool
</span><a href="GHC.Tc.Errors.html#eq_lhs_type"><span class="hs-identifier hs-var hs-var">eq_lhs_type</span></a></span></span><span> </span><span id="local-6989586621681343139"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343139"><span class="hs-identifier hs-var">ct1</span></a></span></span><span> </span><span id="local-6989586621681343138"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343138"><span class="hs-identifier hs-var">ct2</span></a></span></span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343139"><span class="hs-identifier hs-var">ct1</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343138"><span class="hs-identifier hs-var">ct2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-908"></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span id="local-6989586621681343136"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621681343136"><span class="hs-identifier hs-var">eq_rel1</span></a></span></span><span> </span><span id="local-6989586621681343135"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343135"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span id="local-6989586621681343134"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621681343134"><span class="hs-identifier hs-var">eq_rel2</span></a></span></span><span> </span><span id="local-6989586621681343133"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343133"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-909"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621681343136"><span class="hs-identifier hs-var">eq_rel1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621681343134"><span class="hs-identifier hs-var">eq_rel2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343135"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343133"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-910"></span><span>       </span><span class="annot"><span class="annottext">(Pred, Pred)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkSkolReporter&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343139"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343138"><span class="hs-identifier hs-var">ct2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span class="annot"><a href="GHC.Tc.Errors.html#cmp_loc"><span class="hs-identifier hs-type">cmp_loc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-913"></span><span id="cmp_loc"><span class="annot"><span class="annottext">cmp_loc :: Ct -&gt; Ct -&gt; Ordering
</span><a href="GHC.Tc.Errors.html#cmp_loc"><span class="hs-identifier hs-var hs-var">cmp_loc</span></a></span></span><span> </span><span id="local-6989586621681343131"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343131"><span class="hs-identifier hs-var">ct1</span></a></span></span><span> </span><span id="local-6989586621681343130"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343130"><span class="hs-identifier hs-var">ct2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; RealSrcLoc
</span><a href="#local-6989586621681343129"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343131"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; RealSrcLoc
</span><a href="#local-6989586621681343129"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343130"><span class="hs-identifier hs-var">ct2</span></a></span><span>
</span><span id="line-914"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-915"></span><span>    </span><span id="local-6989586621681343129"><span class="annot"><span class="annottext">get :: Ct -&gt; RealSrcLoc
</span><a href="#local-6989586621681343129"><span class="hs-identifier hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681343127"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343127"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; RealSrcLoc
</span><a href="GHC.Types.SrcLoc.html#realSrcSpanStart"><span class="hs-identifier hs-var">realSrcSpanStart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.Constraint.html#ctLocSpan"><span class="hs-identifier hs-var">ctLocSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343127"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-916"></span><span>             </span><span class="hs-comment">-- Reduce duplication by reporting only one error from each</span><span>
</span><span id="line-917"></span><span>             </span><span class="hs-comment">-- /starting/ location even if the end location differs</span><span>
</span><span id="line-918"></span><span>
</span><span id="line-919"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportGroup"><span class="hs-identifier hs-type">reportGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-920"></span><span id="reportGroup"><span class="annot"><span class="annottext">reportGroup :: (ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#reportGroup"><span class="hs-identifier hs-var hs-var">reportGroup</span></a></span></span><span> </span><span id="local-6989586621681343124"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343124"><span class="hs-identifier hs-var">mk_err</span></a></span></span><span> </span><span id="local-6989586621681343123"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343123"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343122"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343122"><span class="hs-identifier hs-var">cts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-921"></span><span>  </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">cts</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343120"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343120"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343124"><span class="hs-identifier hs-var">mk_err</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343123"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343122"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-923"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;About to maybeReportErr&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-924"></span><span>       </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Constraint:&quot;</span></span><span>             </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343122"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-925"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_suppress =&quot;</span></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343123"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cec_defer_type_errors =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var">cec_defer_type_errors</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343123"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-927"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeReportError"><span class="hs-identifier hs-var">maybeReportError</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343123"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343120"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-928"></span><span>         </span><span class="hs-comment">-- But see Note [Always warn with -fdefer-type-errors]</span><span>
</span><span id="line-929"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reportGroup&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343122"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-930"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; Ct -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#addDeferredBinding"><span class="hs-identifier hs-var">addDeferredBinding</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343123"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343120"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343122"><span class="hs-identifier hs-var">cts</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-931"></span><span>         </span><span class="hs-comment">-- Add deferred bindings for all</span><span>
</span><span id="line-932"></span><span>         </span><span class="hs-comment">-- Redundant if we are going to abort compilation,</span><span>
</span><span id="line-933"></span><span>         </span><span class="hs-comment">-- but that's hard to know for sure, and if we don't</span><span>
</span><span id="line-934"></span><span>         </span><span class="hs-comment">-- abort, we need bindings for all (e.g. #12156)</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-comment">-- like reportGroup, but does not actually report messages. It still adds</span><span>
</span><span id="line-937"></span><span class="hs-comment">-- -fdefer-type-errors bindings, though.</span><span>
</span><span id="line-938"></span><span class="annot"><a href="GHC.Tc.Errors.html#suppressGroup"><span class="hs-identifier hs-type">suppressGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Reporter"><span class="hs-identifier hs-type">Reporter</span></a></span><span>
</span><span id="line-939"></span><span id="suppressGroup"><span class="annot"><span class="annottext">suppressGroup :: (ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc))
-&gt; Reporter
</span><a href="GHC.Tc.Errors.html#suppressGroup"><span class="hs-identifier hs-var hs-var">suppressGroup</span></a></span></span><span> </span><span id="local-6989586621681343119"><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343119"><span class="hs-identifier hs-var">mk_err</span></a></span></span><span> </span><span id="local-6989586621681343118"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343118"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343117"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343117"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-940"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343116"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343116"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681343119"><span class="hs-identifier hs-var">mk_err</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343118"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343117"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-941"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Suppressing errors for&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343117"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-942"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; Ct -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#addDeferredBinding"><span class="hs-identifier hs-var">addDeferredBinding</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343118"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343116"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343117"><span class="hs-identifier hs-var">cts</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeReportHoleError"><span class="hs-identifier hs-type">maybeReportHoleError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-945"></span><span id="maybeReportHoleError"><span class="annot"><span class="annottext">maybeReportHoleError :: ReportErrCtxt -&gt; Hole -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeReportHoleError"><span class="hs-identifier hs-var hs-var">maybeReportHoleError</span></a></span></span><span> </span><span id="local-6989586621681343115"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343115"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343114"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343114"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span id="local-6989586621681343113"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343113"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-946"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-var">isOutOfScopeHole</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343114"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-947"></span><span>  </span><span class="hs-comment">-- Always report an error for out-of-scope variables</span><span>
</span><span id="line-948"></span><span>  </span><span class="hs-comment">-- Unless -fdefer-out-of-scope-variables is on,</span><span>
</span><span id="line-949"></span><span>  </span><span class="hs-comment">-- in which case the messages are discarded.</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-comment">-- See #12170, #12406</span><span>
</span><span id="line-951"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- If deferring, report a warning only if -Wout-of-scope-variables is on</span><span>
</span><span id="line-952"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_out_of_scope_holes"><span class="hs-identifier hs-var">cec_out_of_scope_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343115"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-953"></span><span>      </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportError"><span class="hs-identifier hs-var">reportError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343113"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-954"></span><span>      </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-955"></span><span>        </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnDeferredOutOfScopeVariables"><span class="hs-identifier hs-var">Opt_WarnDeferredOutOfScopeVariables</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343113"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-956"></span><span>      </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="hs-comment">-- Unlike maybeReportError, these &quot;hole&quot; errors are</span><span>
</span><span id="line-959"></span><span class="hs-comment">-- /not/ suppressed by cec_suppress.  We want to see them!</span><span>
</span><span id="line-960"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeReportHoleError"><span class="hs-identifier hs-var">maybeReportHoleError</span></a></span><span> </span><span id="local-6989586621681343112"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343112"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343110"><span class="annot"><span class="annottext">HoleSort
</span><a href="#local-6989586621681343110"><span class="hs-identifier hs-var">hole_sort</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681343109"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343109"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-961"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="#local-6989586621681343110"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#TypeHole"><span class="hs-identifier hs-var">TypeHole</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-962"></span><span>                      </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#ConstraintHole"><span class="hs-identifier hs-var">ConstraintHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-963"></span><span>                      </span><span class="annot"><span class="annottext">HoleSort
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-964"></span><span>  </span><span class="hs-comment">-- When -XPartialTypeSignatures is on, warnings (instead of errors) are</span><span>
</span><span id="line-965"></span><span>  </span><span class="hs-comment">-- generated for holes in partial type signatures.</span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-comment">-- Unless -fwarn-partial-type-signatures is not on,</span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-comment">-- in which case the messages are discarded.</span><span>
</span><span id="line-968"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- For partial type signatures, generate warnings only, and do that</span><span>
</span><span id="line-969"></span><span>    </span><span class="hs-comment">-- only if -fwarn-partial-type-signatures is on</span><span>
</span><span id="line-970"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_type_holes"><span class="hs-identifier hs-var">cec_type_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343112"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-971"></span><span>       </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportError"><span class="hs-identifier hs-var">reportError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343109"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-972"></span><span>       </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnPartialTypeSignatures"><span class="hs-identifier hs-var">Opt_WarnPartialTypeSignatures</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343109"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-973"></span><span>       </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeReportHoleError"><span class="hs-identifier hs-var">maybeReportHoleError</span></a></span><span> </span><span id="local-6989586621681343108"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343108"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343107"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681343107"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span id="local-6989586621681343106"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343106"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-comment">-- Otherwise this is a typed hole in an expression,</span><span>
</span><span id="line-977"></span><span>  </span><span class="hs-comment">-- but not for an out-of-scope variable (because that goes through a</span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-comment">-- different function)</span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- If deferring, report a warning only if -Wtyped-holes is on</span><span>
</span><span id="line-980"></span><span>    </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">isOutOfScopeHole</span><span> </span><span class="hs-identifier">hole</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-981"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_expr_holes"><span class="hs-identifier hs-var">cec_expr_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343108"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-982"></span><span>       </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportError"><span class="hs-identifier hs-var">reportError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343106"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-983"></span><span>       </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleWarn"><span class="hs-identifier hs-var">HoleWarn</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnTypedHoles"><span class="hs-identifier hs-var">Opt_WarnTypedHoles</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343106"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-984"></span><span>       </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleDefer"><span class="hs-identifier hs-var">HoleDefer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeReportError"><span class="hs-identifier hs-type">maybeReportError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span class="hs-comment">-- Report the error and/or make a deferred binding for it</span><span>
</span><span id="line-988"></span><span id="maybeReportError"><span class="annot"><span class="annottext">maybeReportError :: ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeReportError"><span class="hs-identifier hs-var hs-var">maybeReportError</span></a></span></span><span> </span><span id="local-6989586621681343105"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343105"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343104"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343104"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-989"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343105"><span class="hs-identifier hs-var">ctxt</span></a></span><span>    </span><span class="hs-comment">-- Some worse error has occurred;</span><span>
</span><span id="line-990"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>            </span><span class="hs-comment">-- so suppress this error/warning</span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#cec_defer_type_errors"><span class="hs-identifier hs-var">cec_defer_type_errors</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343105"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-994"></span><span>      </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeDefer"><span class="hs-identifier hs-var">TypeDefer</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-995"></span><span>      </span><span class="annot"><a href="GHC.Tc.Errors.html#TypeWarn"><span class="hs-identifier hs-type">TypeWarn</span></a></span><span> </span><span id="local-6989586621681343103"><span class="annot"><span class="annottext">WarnReason
</span><a href="#local-6989586621681343103"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportWarning"><span class="hs-identifier hs-var">reportWarning</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="#local-6989586621681343103"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343104"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-996"></span><span>      </span><span class="annot"><span class="annottext">TypeErrorChoice
</span><a href="GHC.Tc.Errors.html#TypeError"><span class="hs-identifier hs-var">TypeError</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#reportError"><span class="hs-identifier hs-var">reportError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343104"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-997"></span><span>
</span><span id="line-998"></span><span class="annot"><a href="GHC.Tc.Errors.html#addDeferredBinding"><span class="hs-identifier hs-type">addDeferredBinding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span class="hs-comment">-- See Note [Deferring coercion errors to runtime]</span><span>
</span><span id="line-1000"></span><span id="addDeferredBinding"><span class="annot"><span class="annottext">addDeferredBinding :: ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; Ct -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#addDeferredBinding"><span class="hs-identifier hs-var hs-var">addDeferredBinding</span></a></span></span><span> </span><span id="local-6989586621681343102"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343102"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343101"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343101"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681343100"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343100"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#deferringAnyBindings"><span class="hs-identifier hs-var">deferringAnyBindings</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343102"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_pred :: CtEvidence -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var">ctev_pred</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343097"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343097"><span class="hs-identifier hs-var">pred</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681343095"><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621681343095"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343100"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1003"></span><span>    </span><span class="hs-comment">-- Only add deferred bindings for Wanted constraints</span><span>
</span><span id="line-1004"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343093"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343093"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1005"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343092"><span class="annot"><span class="annottext">err_tm :: EvTerm
</span><a href="#local-6989586621681343092"><span class="hs-identifier hs-var hs-var">err_tm</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Type -&gt; MsgEnvelope DecoratedSDoc -&gt; EvTerm
</span><a href="GHC.Tc.Errors.html#mkErrorTerm"><span class="hs-identifier hs-var">mkErrorTerm</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343093"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343097"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343101"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1006"></span><span>             </span><span id="local-6989586621681343090"><span class="annot"><span class="annottext">ev_binds_var :: EvBindsVar
</span><a href="#local-6989586621681343090"><span class="hs-identifier hs-var hs-var">ev_binds_var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; EvBindsVar
</span><a href="GHC.Tc.Errors.html#cec_binds"><span class="hs-identifier hs-var">cec_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343102"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1007"></span><span>
</span><span id="line-1008"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621681343095"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1009"></span><span>           </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-type">EvVarDest</span></a></span><span> </span><span id="local-6989586621681343088"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343088"><span class="hs-identifier hs-var">evar</span></a></span></span><span>
</span><span id="line-1010"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; EvBind -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addTcEvBind"><span class="hs-identifier hs-var">addTcEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343090"><span class="hs-identifier hs-var">ev_binds_var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; EvTerm -&gt; EvBind
</span><a href="GHC.Tc.Types.Evidence.html#mkWantedEvBind"><span class="hs-identifier hs-var">mkWantedEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343088"><span class="hs-identifier hs-var">evar</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681343092"><span class="hs-identifier hs-var">err_tm</span></a></span><span>
</span><span id="line-1011"></span><span>           </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621681343084"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681343084"><span class="hs-identifier hs-var">hole</span></a></span></span><span>
</span><span id="line-1012"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- See Note [Deferred errors for coercion holes]</span><span>
</span><span id="line-1013"></span><span>                     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343083"><span class="annot"><span class="annottext">co_var :: TcId
</span><a href="#local-6989586621681343083"><span class="hs-identifier hs-var hs-var">co_var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; TcId
</span><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier hs-var">coHoleCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681343084"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1014"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; EvBind -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addTcEvBind"><span class="hs-identifier hs-var">addTcEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681343090"><span class="hs-identifier hs-var">ev_binds_var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; EvTerm -&gt; EvBind
</span><a href="GHC.Tc.Types.Evidence.html#mkWantedEvBind"><span class="hs-identifier hs-var">mkWantedEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343083"><span class="hs-identifier hs-var">co_var</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681343092"><span class="hs-identifier hs-var">err_tm</span></a></span><span>
</span><span id="line-1015"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; Coercion -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#fillCoercionHole"><span class="hs-identifier hs-var">fillCoercionHole</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681343084"><span class="hs-identifier hs-var">hole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Coercion
</span><a href="GHC.Tc.Types.Evidence.html#mkTcCoVarCo"><span class="hs-identifier hs-var">mkTcCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681343083"><span class="hs-identifier hs-var">co_var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1016"></span><span>
</span><span id="line-1017"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-comment">-- Do not set any evidence for Given/Derived</span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkErrorTerm"><span class="hs-identifier hs-type">mkErrorTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>  </span><span class="hs-comment">-- of the error term</span><span>
</span><span id="line-1021"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-1022"></span><span id="mkErrorTerm"><span class="annot"><span class="annottext">mkErrorTerm :: DynFlags -&gt; Type -&gt; MsgEnvelope DecoratedSDoc -&gt; EvTerm
</span><a href="GHC.Tc.Errors.html#mkErrorTerm"><span class="hs-identifier hs-var hs-var">mkErrorTerm</span></a></span></span><span> </span><span id="local-6989586621681343079"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343079"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681343078"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343078"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681343077"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343077"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; FastString -&gt; EvTerm
</span><a href="GHC.Tc.Types.EvTerm.html#evDelayedError"><span class="hs-identifier hs-var">evDelayedError</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343078"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681343075"><span class="hs-identifier hs-var">err_fs</span></a></span><span>
</span><span id="line-1023"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1024"></span><span>    </span><span id="local-6989586621681343074"><span class="annot"><span class="annottext">err_msg :: SDoc
</span><a href="#local-6989586621681343074"><span class="hs-identifier hs-var hs-var">err_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall e. RenderableDiagnostic e =&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-var">pprLocMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343077"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1025"></span><span>    </span><span id="local-6989586621681343075"><span class="annot"><span class="annottext">err_fs :: FastString
</span><a href="#local-6989586621681343075"><span class="hs-identifier hs-var hs-var">err_fs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#mkFastString"><span class="hs-identifier hs-var">mkFastString</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; SDoc -&gt; String
</span><a href="GHC.Driver.Ppr.html#showSDoc"><span class="hs-identifier hs-var">showSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343079"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1026"></span><span>              </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343074"><span class="hs-identifier hs-var">err_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(deferred type error)&quot;</span></span><span>
</span><span id="line-1027"></span><span>
</span><span id="line-1028"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeAddDeferredHoleBinding"><span class="hs-identifier hs-type">maybeAddDeferredHoleBinding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1029"></span><span id="maybeAddDeferredHoleBinding"><span class="annot"><span class="annottext">maybeAddDeferredHoleBinding :: ReportErrCtxt -&gt; MsgEnvelope DecoratedSDoc -&gt; Hole -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#maybeAddDeferredHoleBinding"><span class="hs-identifier hs-var hs-var">maybeAddDeferredHoleBinding</span></a></span></span><span> </span><span id="local-6989586621681343071"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343071"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343070"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343070"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-type">ExprHole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-type">HER</span></a></span><span> </span><span id="local-6989586621681343068"><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621681343068"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681343067"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343067"><span class="hs-identifier hs-var">ref_ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Unique
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1030"></span><span class="hs-comment">-- Only add bindings for holes in expressions</span><span>
</span><span id="line-1031"></span><span class="hs-comment">-- not for holes in partial type signatures</span><span>
</span><span id="line-1032"></span><span class="hs-comment">-- cf. addDeferredBinding</span><span>
</span><span id="line-1033"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#deferringAnyBindings"><span class="hs-identifier hs-var">deferringAnyBindings</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343071"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1034"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681343066"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343066"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1035"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343065"><span class="annot"><span class="annottext">err_tm :: EvTerm
</span><a href="#local-6989586621681343065"><span class="hs-identifier hs-var hs-var">err_tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Type -&gt; MsgEnvelope DecoratedSDoc -&gt; EvTerm
</span><a href="GHC.Tc.Errors.html#mkErrorTerm"><span class="hs-identifier hs-var">mkErrorTerm</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681343066"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681343067"><span class="hs-identifier hs-var">ref_ty</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681343070"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-1036"></span><span>           </span><span class="hs-comment">-- NB: ref_ty, not hole_ty. hole_ty might be rewritten.</span><span>
</span><span id="line-1037"></span><span>           </span><span class="hs-comment">-- See Note [Holes] in GHC.Tc.Types.Constraint</span><span>
</span><span id="line-1038"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a env. IORef a -&gt; a -&gt; IOEnv env ()
</span><a href="GHC.Data.IOEnv.html#writeMutVar"><span class="hs-identifier hs-var">writeMutVar</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621681343068"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681343065"><span class="hs-identifier hs-var">err_tm</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1039"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1040"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeAddDeferredHoleBinding"><span class="hs-identifier hs-var">maybeAddDeferredHoleBinding</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#TypeHole"><span class="hs-identifier hs-var">TypeHole</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span class="annot"><a href="GHC.Tc.Errors.html#maybeAddDeferredHoleBinding"><span class="hs-identifier hs-var">maybeAddDeferredHoleBinding</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#ConstraintHole"><span class="hs-identifier hs-var">ConstraintHole</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1044"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1045"></span><span>
</span><span id="line-1046"></span><span class="annot"><a href="GHC.Tc.Errors.html#tryReporters"><span class="hs-identifier hs-type">tryReporters</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#ReporterSpec"><span class="hs-identifier hs-type">ReporterSpec</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- Use the first reporter in the list whose predicate says True</span><span>
</span><span id="line-1048"></span><span id="tryReporters"><span class="annot"><span class="annottext">tryReporters :: ReportErrCtxt
-&gt; [ReporterSpec] -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="GHC.Tc.Errors.html#tryReporters"><span class="hs-identifier hs-var hs-var">tryReporters</span></a></span></span><span> </span><span id="local-6989586621681343063"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343063"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343062"><span class="annot"><span class="annottext">[ReporterSpec]
</span><a href="#local-6989586621681343062"><span class="hs-identifier hs-var">reporters</span></a></span></span><span> </span><span id="local-6989586621681343061"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343061"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-1049"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343060"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343060"><span class="hs-identifier hs-var">vis_cts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343059"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343059"><span class="hs-identifier hs-var">invis_cts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtOrigin -&gt; Bool
</span><a href="GHC.Tc.Types.Origin.html#isVisibleOrigin"><span class="hs-identifier hs-var">isVisibleOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343061"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1050"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tryReporters {&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343060"><span class="hs-identifier hs-var">vis_cts</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343059"><span class="hs-identifier hs-var">invis_cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1051"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343056"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343056"><span class="hs-identifier hs-var">ctxt'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343055"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343055"><span class="hs-identifier hs-var">cts'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; [ReporterSpec] -&gt; [Ct] -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="#local-6989586621681343054"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343063"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[ReporterSpec]
</span><a href="#local-6989586621681343062"><span class="hs-identifier hs-var">reporters</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343060"><span class="hs-identifier hs-var">vis_cts</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343059"><span class="hs-identifier hs-var">invis_cts</span></a></span><span>
</span><span id="line-1052"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tryReporters }&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343055"><span class="hs-identifier hs-var">cts'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1053"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343056"><span class="hs-identifier hs-var">ctxt'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343055"><span class="hs-identifier hs-var">cts'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1054"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1055"></span><span>    </span><span id="local-6989586621681343054"><span class="annot"><span class="annottext">go :: ReportErrCtxt
-&gt; [ReporterSpec] -&gt; [Ct] -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="#local-6989586621681343054"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681343050"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343050"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681343049"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343049"><span class="hs-identifier hs-var">vis_cts</span></a></span></span><span> </span><span id="local-6989586621681343048"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343048"><span class="hs-identifier hs-var">invis_cts</span></a></span></span><span>
</span><span id="line-1056"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343050"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343049"><span class="hs-identifier hs-var">vis_cts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343048"><span class="hs-identifier hs-var">invis_cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1057"></span><span>
</span><span id="line-1058"></span><span>    </span><span class="annot"><a href="#local-6989586621681343054"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681343047"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343047"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343046"><span class="annot"><span class="annottext">ReporterSpec
</span><a href="#local-6989586621681343046"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681343045"><span class="annot"><span class="annottext">[ReporterSpec]
</span><a href="#local-6989586621681343045"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681343044"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343044"><span class="hs-identifier hs-var">vis_cts</span></a></span></span><span> </span><span id="local-6989586621681343043"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343043"><span class="hs-identifier hs-var">invis_cts</span></a></span></span><span>
</span><span id="line-1059"></span><span>       </span><span class="hs-comment">-- always look at *visible* Origins before invisible ones</span><span>
</span><span id="line-1060"></span><span>       </span><span class="hs-comment">-- this is the whole point of isVisibleOrigin</span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343042"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343042"><span class="hs-identifier hs-var">ctxt'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343041"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343041"><span class="hs-identifier hs-var">vis_cts'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; ReporterSpec -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="GHC.Tc.Errors.html#tryReporter"><span class="hs-identifier hs-var">tryReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343047"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">ReporterSpec
</span><a href="#local-6989586621681343046"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343044"><span class="hs-identifier hs-var">vis_cts</span></a></span><span>
</span><span id="line-1062"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343039"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343039"><span class="hs-identifier hs-var">ctxt''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343038"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343038"><span class="hs-identifier hs-var">invis_cts'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; ReporterSpec -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="GHC.Tc.Errors.html#tryReporter"><span class="hs-identifier hs-var">tryReporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343042"><span class="hs-identifier hs-var">ctxt'</span></a></span><span> </span><span class="annot"><span class="annottext">ReporterSpec
</span><a href="#local-6989586621681343046"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343043"><span class="hs-identifier hs-var">invis_cts</span></a></span><span>
</span><span id="line-1063"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; [ReporterSpec] -&gt; [Ct] -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="#local-6989586621681343054"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343039"><span class="hs-identifier hs-var">ctxt''</span></a></span><span> </span><span class="annot"><span class="annottext">[ReporterSpec]
</span><a href="#local-6989586621681343045"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343041"><span class="hs-identifier hs-var">vis_cts'</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343038"><span class="hs-identifier hs-var">invis_cts'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1064"></span><span>                </span><span class="hs-comment">-- Carry on with the rest, because we must make</span><span>
</span><span id="line-1065"></span><span>                </span><span class="hs-comment">-- deferred bindings for them if we have -fdefer-type-errors</span><span>
</span><span id="line-1066"></span><span>                </span><span class="hs-comment">-- But suppress their error messages</span><span>
</span><span id="line-1067"></span><span>
</span><span id="line-1068"></span><span class="annot"><a href="GHC.Tc.Errors.html#tryReporter"><span class="hs-identifier hs-type">tryReporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReporterSpec"><span class="hs-identifier hs-type">ReporterSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1069"></span><span id="tryReporter"><span class="annot"><span class="annottext">tryReporter :: ReportErrCtxt -&gt; ReporterSpec -&gt; [Ct] -&gt; TcM (ReportErrCtxt, [Ct])
</span><a href="GHC.Tc.Errors.html#tryReporter"><span class="hs-identifier hs-var hs-var">tryReporter</span></a></span></span><span> </span><span id="local-6989586621681343037"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343037"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343036"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681343036"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343035"><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343035"><span class="hs-identifier hs-var">keep_me</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681343034"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343034"><span class="hs-identifier hs-var">suppress_after</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343033"><span class="annot"><span class="annottext">Reporter
</span><a href="#local-6989586621681343033"><span class="hs-identifier hs-var">reporter</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681343032"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343032"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-1070"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343031"><span class="hs-identifier hs-var">yeses</span></a></span><span>
</span><span id="line-1071"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343037"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343032"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1073"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tryReporter{ &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681343036"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343031"><span class="hs-identifier hs-var">yeses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343030"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343030"><span class="hs-identifier hs-var">no_errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. TcRn a -&gt; TcRn (a, Bool)
</span><a href="GHC.Tc.Utils.Monad.html#askNoErrs"><span class="hs-identifier hs-var">askNoErrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reporter
</span><a href="#local-6989586621681343033"><span class="hs-identifier hs-var">reporter</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343037"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343031"><span class="hs-identifier hs-var">yeses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1075"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681343029"><span class="annot"><span class="annottext">suppress_now :: Bool
</span><a href="#local-6989586621681343029"><span class="hs-identifier hs-var hs-var">suppress_now</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343030"><span class="hs-identifier hs-var">no_errs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343034"><span class="hs-identifier hs-var">suppress_after</span></a></span><span>
</span><span id="line-1076"></span><span>                            </span><span class="hs-comment">-- See Note [Suppressing error messages]</span><span>
</span><span id="line-1077"></span><span>             </span><span id="local-6989586621681343028"><span class="annot"><span class="annottext">ctxt' :: ReportErrCtxt
</span><a href="#local-6989586621681343028"><span class="hs-identifier hs-var hs-var">ctxt'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343037"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_suppress :: Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343029"><span class="hs-identifier hs-var">suppress_now</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343037"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1078"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tryReporter end }&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681343036"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_suppress"><span class="hs-identifier hs-var">cec_suppress</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343037"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681343034"><span class="hs-identifier hs-var">suppress_after</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343028"><span class="hs-identifier hs-var">ctxt'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343027"><span class="hs-identifier hs-var">nos</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1080"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1081"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681343031"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343031"><span class="hs-identifier hs-var">yeses</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681343027"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343027"><span class="hs-identifier hs-var">nos</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681343026"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343026"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Pred -&gt; Bool
</span><a href="#local-6989586621681343035"><span class="hs-identifier hs-var">keep_me</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343026"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343026"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343032"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1082"></span><span>
</span><span id="line-1083"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprArising"><span class="hs-identifier hs-type">pprArising</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1084"></span><span class="hs-comment">-- Used for the main, top-level error message</span><span>
</span><span id="line-1085"></span><span class="hs-comment">-- We've done special processing for TypeEq, KindEq, givens</span><span>
</span><span id="line-1086"></span><span id="pprArising"><span class="annot"><span class="annottext">pprArising :: CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprArising"><span class="hs-identifier hs-var hs-var">pprArising</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1087"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprArising"><span class="hs-identifier hs-var">pprArising</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#KindEqOrigin"><span class="hs-identifier hs-type">KindEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1088"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprArising"><span class="hs-identifier hs-var">pprArising</span></a></span><span> </span><span id="local-6989586621681343022"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681343022"><span class="hs-identifier hs-var">orig</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; Bool
</span><a href="GHC.Tc.Types.Origin.html#isGivenOrigin"><span class="hs-identifier hs-var">isGivenOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681343022"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1089"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Types.Origin.html#pprCtOrigin"><span class="hs-identifier hs-var">pprCtOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681343022"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="hs-comment">-- Add the &quot;arising from...&quot; part to a message about bunch of dicts</span><span>
</span><span id="line-1092"></span><span class="annot"><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-type">addArising</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1093"></span><span id="addArising"><span class="annot"><span class="annottext">addArising :: CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var hs-var">addArising</span></a></span></span><span> </span><span id="local-6989586621681343018"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681343018"><span class="hs-identifier hs-var">orig</span></a></span></span><span> </span><span id="local-6989586621681343017"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343017"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681343017"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprArising"><span class="hs-identifier hs-var">pprArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681343018"><span class="hs-identifier hs-var">orig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1094"></span><span>
</span><span id="line-1095"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprWithArising"><span class="hs-identifier hs-type">pprWithArising</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1096"></span><span class="hs-comment">-- Print something like</span><span>
</span><span id="line-1097"></span><span class="hs-comment">--    (Eq a) arising from a use of x at y</span><span>
</span><span id="line-1098"></span><span class="hs-comment">--    (Show a) arising from a use of p at q</span><span>
</span><span id="line-1099"></span><span class="hs-comment">-- Also return a location for the error message</span><span>
</span><span id="line-1100"></span><span class="hs-comment">-- Works for Wanted/Derived only</span><span>
</span><span id="line-1101"></span><span id="pprWithArising"><span class="annot"><span class="annottext">pprWithArising :: [Ct] -&gt; (CtLoc, SDoc)
</span><a href="GHC.Tc.Errors.html#pprWithArising"><span class="hs-identifier hs-var hs-var">pprWithArising</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1102"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pprWithArising&quot;</span></span><span>
</span><span id="line-1103"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprWithArising"><span class="hs-identifier hs-var">pprWithArising</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681343014"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343014"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681343013"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343013"><span class="hs-identifier hs-var">cts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343013"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1105"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681343012"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctLocOrigin"><span class="hs-identifier hs-var">ctLocOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681343012"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTheta"><span class="hs-identifier hs-var">pprTheta</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343014"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1108"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681343012"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; SDoc
</span><a href="#local-6989586621681343009"><span class="hs-identifier hs-var">ppr_one</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343014"><span class="hs-identifier hs-var">ct</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681343013"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1109"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1110"></span><span>    </span><span id="local-6989586621681343012"><span class="annot"><span class="annottext">loc :: CtLoc
</span><a href="#local-6989586621681343012"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343014"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1111"></span><span>    </span><span id="local-6989586621681343009"><span class="annot"><span class="annottext">ppr_one :: Ct -&gt; SDoc
</span><a href="#local-6989586621681343009"><span class="hs-identifier hs-var hs-var">ppr_one</span></a></span></span><span> </span><span id="local-6989586621681343008"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343008"><span class="hs-identifier hs-var">ct'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343008"><span class="hs-identifier hs-var">ct'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>                     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprCtLoc"><span class="hs-identifier hs-var">pprCtLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343008"><span class="hs-identifier hs-var">ct'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1113"></span><span>
</span><span id="line-1114"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-type">mkErrorMsgFromCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1115"></span><span id="mkErrorMsgFromCt"><span class="annot"><span class="annottext">mkErrorMsgFromCt :: ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var hs-var">mkErrorMsgFromCt</span></a></span></span><span> </span><span id="local-6989586621681343004"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343004"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681343003"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343003"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681343002"><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681343002"><span class="hs-identifier hs-var">report</span></a></span></span><span>
</span><span id="line-1116"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; TcLclEnv -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-var">mkErrorReport</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343004"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ctLocEnv"><span class="hs-identifier hs-var">ctLocEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681343003"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681343002"><span class="hs-identifier hs-var">report</span></a></span><span>
</span><span id="line-1117"></span><span>
</span><span id="line-1118"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-type">mkErrorReport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span id="mkErrorReport"><span class="annot"><span class="annottext">mkErrorReport :: ReportErrCtxt
-&gt; TcLclEnv -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-var hs-var">mkErrorReport</span></a></span></span><span> </span><span id="local-6989586621681343000"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343000"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342999"><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342999"><span class="hs-identifier hs-var">tcl_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span id="local-6989586621681342998"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342998"><span class="hs-identifier hs-var">important</span></a></span></span><span> </span><span id="local-6989586621681342997"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342997"><span class="hs-identifier hs-var">relevant_bindings</span></a></span></span><span> </span><span id="local-6989586621681342996"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342996"><span class="hs-identifier hs-var">valid_subs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1120"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342995"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342995"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [ErrCtxt] -&gt; TcM SDoc
</span><a href="GHC.Tc.Utils.Monad.html#mkErrInfo"><span class="hs-identifier hs-var">mkErrInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681343000"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; [ErrCtxt]
</span><a href="GHC.Tc.Types.html#tcl_ctxt"><span class="hs-identifier hs-var">tcl_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342999"><span class="hs-identifier hs-var">tcl_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; SDoc -&gt; SDoc -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Utils.Monad.html#mkDecoratedSDocAt"><span class="hs-identifier hs-var">mkDecoratedSDocAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342999"><span class="hs-identifier hs-var">tcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342998"><span class="hs-identifier hs-var">important</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1123"></span><span>                           </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342995"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-1124"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342997"><span class="hs-identifier hs-var">relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342996"><span class="hs-identifier hs-var">valid_subs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1126"></span><span>
</span><span id="line-1127"></span><span class="hs-keyword">type</span><span> </span><span id="UserGiven"><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-var">UserGiven</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span class="annot"><a href="GHC.Tc.Errors.html#getUserGivens"><span class="hs-identifier hs-type">getUserGivens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1130"></span><span class="hs-comment">-- One item for each enclosing implication</span><span>
</span><span id="line-1131"></span><span id="getUserGivens"><span class="annot"><span class="annottext">getUserGivens :: ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivens"><span class="hs-identifier hs-var hs-var">getUserGivens</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-type">CEC</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cec_encl :: ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342987"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342987"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivensFromImplics"><span class="hs-identifier hs-var">getUserGivensFromImplics</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342987"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-1132"></span><span>
</span><span id="line-1133"></span><span class="annot"><a href="GHC.Tc.Errors.html#getUserGivensFromImplics"><span class="hs-identifier hs-type">getUserGivensFromImplics</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1134"></span><span id="getUserGivensFromImplics"><span class="annot"><span class="annottext">getUserGivensFromImplics :: [Implication] -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivensFromImplics"><span class="hs-identifier hs-var hs-var">getUserGivensFromImplics</span></a></span></span><span> </span><span id="local-6989586621681342985"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342985"><span class="hs-identifier hs-var">implics</span></a></span></span><span>
</span><span id="line-1135"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342985"><span class="hs-identifier hs-var">implics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span>
</span><span id="line-1137"></span><span class="hs-comment">{- Note [Always warn with -fdefer-type-errors]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When -fdefer-type-errors is on we warn about *all* type errors, even
if cec_suppress is on.  This can lead to a lot more warnings than you
would get errors without -fdefer-type-errors, but if we suppress any of
them you might get a runtime error that wasn't warned about at compile
time.

This is an easy design choice to change; just flip the order of the
first two equations for maybeReportError

To be consistent, we should also report multiple warnings from a single
location in mkGroupReporter, when -fdefer-type-errors is on.  But that
is perhaps a bit *over*-consistent! Again, an easy choice to change.

With #10283, you can now opt out of deferred type error warnings.

Note [Deferred errors for coercion holes]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we need to defer a type error where the destination for the evidence
is a coercion hole. We can't just put the error in the hole, because we can't
make an erroneous coercion. (Remember that coercions are erased for runtime.)
Instead, we invent a new EvVar, bind it to an error and then make a coercion
from that EvVar, filling the hole with that coercion. Because coercions'
types are unlifted, the error is guaranteed to be hit before we get to the
coercion.

Note [Do not report derived but soluble errors]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The wc_simples include Derived constraints that have not been solved,
but are not insoluble (in that case they'd be reported by 'report1').
We do not want to report these as errors:

* Superclass constraints. If we have an unsolved [W] Ord a, we'll also have
  an unsolved [D] Eq a, and we do not want to report that; it's just noise.

* Functional dependencies.  For givens, consider
      class C a b | a -&gt; b
      data T a where
         MkT :: C a d =&gt; [d] -&gt; T a
      f :: C a b =&gt; T a -&gt; F Int
      f (MkT xs) = length xs
  Then we get a [D] b~d.  But there *is* a legitimate call to
  f, namely   f (MkT [True]) :: T Bool, in which b=d.  So we should
  not reject the program.

  For wanteds, something similar
      data T a where
        MkT :: C Int b =&gt; a -&gt; b -&gt; T a
      g :: C Int c =&gt; c -&gt; ()
      f :: T a -&gt; ()
      f (MkT x y) = g x
  Here we get [G] C Int b, [W] C Int a, hence [D] a~b.
  But again f (MkT True True) is a legitimate call.

(We leave the Deriveds in wc_simple until reportErrors, so that we don't lose
derived superclasses between iterations of the solver.)

For functional dependencies, here is a real example,
stripped off from libraries/utf8-string/Codec/Binary/UTF8/Generic.hs

  class C a b | a -&gt; b
  g :: C a b =&gt; a -&gt; b -&gt; ()
  f :: C a b =&gt; a -&gt; b -&gt; ()
  f xa xb =
      let loop = g xa
      in loop xb

We will first try to infer a type for loop, and we will succeed:
    C a b' =&gt; b' -&gt; ()
Subsequently, we will type check (loop xb) and all is good. But,
recall that we have to solve a final implication constraint:
    C a b =&gt; (C a b' =&gt; .... cts from body of loop .... ))
And now we have a problem as we will generate an equality b ~ b' and fail to
solve it.


************************************************************************
*                                                                      *
                Irreducible predicate errors
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkIrredErr"><span class="hs-identifier hs-type">mkIrredErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1222"></span><span id="mkIrredErr"><span class="annot"><span class="annottext">mkIrredErr :: ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkIrredErr"><span class="hs-identifier hs-var hs-var">mkIrredErr</span></a></span></span><span> </span><span id="local-6989586621681342983"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342983"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342982"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342982"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-1223"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342981"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342981"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342980"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342980"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342979"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342979"><span class="hs-identifier hs-var">ct1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; TcM (ReportErrCtxt, SDoc, Ct)
</span><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-var">relevantBindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342983"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342978"><span class="hs-identifier hs-var">ct1</span></a></span><span>
</span><span id="line-1224"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342977"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342977"><span class="hs-identifier hs-var hs-var">orig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342979"><span class="hs-identifier hs-var">ct1</span></a></span><span>
</span><span id="line-1225"></span><span>             </span><span id="local-6989586621681342976"><span class="annot"><span class="annottext">msg :: Report
</span><a href="#local-6989586621681342976"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; ([Type], CtOrigin) -&gt; Report
</span><a href="GHC.Tc.Errors.html#couldNotDeduce"><span class="hs-identifier hs-var">couldNotDeduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivens"><span class="hs-identifier hs-var">getUserGivens</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342981"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342982"><span class="hs-identifier hs-var">cts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342977"><span class="hs-identifier hs-var">orig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342981"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342979"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1227"></span><span>         </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342976"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var">mk_relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342980"><span class="hs-identifier hs-var">binds_msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1228"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1229"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342978"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342978"><span class="hs-identifier hs-var">ct1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342982"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1230"></span><span>
</span><span id="line-1231"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-1232"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkHoleError"><span class="hs-identifier hs-type">mkHoleError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1233"></span><span id="mkHoleError"><span class="annot"><span class="annottext">mkHoleError :: NameEnv Type
-&gt; [Ct] -&gt; ReportErrCtxt -&gt; Hole -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkHoleError"><span class="hs-identifier hs-var hs-var">mkHoleError</span></a></span></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342974"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342974"><span class="hs-identifier hs-var">_tidy_simples</span></a></span></span><span> </span><span id="local-6989586621681342973"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342973"><span class="hs-identifier hs-var">_ctxt</span></a></span></span><span> </span><span id="local-6989586621681342972"><span class="annot"><span class="annottext">hole :: Hole
</span><a href="#local-6989586621681342972"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_occ :: Hole -&gt; OccName
</span><a href="GHC.Tc.Types.Constraint.html#hole_occ"><span class="hs-identifier hs-var">hole_occ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342970"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342970"><span class="hs-identifier hs-var">occ</span></a></span></span><span>
</span><span id="line-1234"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_ty :: Hole -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#hole_ty"><span class="hs-identifier hs-var">hole_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342968"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342968"><span class="hs-identifier hs-var">hole_ty</span></a></span></span><span>
</span><span id="line-1235"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_loc :: Hole -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#hole_loc"><span class="hs-identifier hs-var">hole_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342967"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342967"><span class="hs-identifier hs-var">ct_loc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-var">isOutOfScopeHole</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681342972"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1237"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342966"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342966"><span class="hs-identifier hs-var">dflags</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1238"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342965"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681342965"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn GlobalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-1239"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342963"><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681342963"><span class="hs-identifier hs-var">imp_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn ImportAvails
</span><a href="GHC.Tc.Utils.Monad.html#getImports"><span class="hs-identifier hs-var">getImports</span></a></span><span>
</span><span id="line-1240"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342961"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681342961"><span class="hs-identifier hs-var">curr_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasModule m =&gt; m Module
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-1241"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342959"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681342959"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. TcRnIf gbl lcl HomePackageTable
</span><a href="GHC.Tc.Utils.Monad.html#getHpt"><span class="hs-identifier hs-var">getHpt</span></a></span><span>
</span><span id="line-1242"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; SDoc -&gt; SDoc -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Utils.Monad.html#mkDecoratedSDocAt"><span class="hs-identifier hs-var">mkDecoratedSDocAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342957"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1243"></span><span>                           </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342956"><span class="hs-identifier hs-var">out_of_scope_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">O.empty</span></a></span><span>
</span><span id="line-1244"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags
-&gt; HomePackageTable
-&gt; Module
-&gt; GlobalRdrEnv
-&gt; LocalRdrEnv
-&gt; ImportAvails
-&gt; RdrName
-&gt; SDoc
</span><a href="GHC.Rename.Unbound.html#unknownNameSuggestions"><span class="hs-identifier hs-var">unknownNameSuggestions</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342966"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621681342959"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681342961"><span class="hs-identifier hs-var">curr_mod</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681342965"><span class="hs-identifier hs-var">rdr_env</span></a></span><span>
</span><span id="line-1245"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; LocalRdrEnv
</span><a href="GHC.Tc.Types.html#tcl_rdr"><span class="hs-identifier hs-var">tcl_rdr</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342957"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681342963"><span class="hs-identifier hs-var">imp_info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342970"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1246"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1247"></span><span>    </span><span id="local-6989586621681342954"><span class="annot"><span class="annottext">herald :: SDoc
</span><a href="#local-6989586621681342954"><span class="hs-identifier hs-var hs-var">herald</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataOcc"><span class="hs-identifier hs-var">isDataOcc</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342970"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data constructor not in scope:&quot;</span></span><span>
</span><span id="line-1248"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Variable not in scope:&quot;</span></span><span>
</span><span id="line-1249"></span><span>
</span><span id="line-1250"></span><span>    </span><span id="local-6989586621681342956"><span class="annot"><span class="annottext">out_of_scope_msg :: SDoc
</span><a href="#local-6989586621681342956"><span class="hs-identifier hs-var hs-var">out_of_scope_msg</span></a></span></span><span> </span><span class="hs-comment">-- Print v :: ty only if the type has structure</span><span>
</span><span id="line-1251"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342952"><span class="hs-identifier hs-var">boring_type</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342954"><span class="hs-identifier hs-var">herald</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342970"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1252"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342954"><span class="hs-identifier hs-var">herald</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pp_occ_with_type"><span class="hs-identifier hs-var">pp_occ_with_type</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342970"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342968"><span class="hs-identifier hs-var">hole_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span>    </span><span id="local-6989586621681342957"><span class="annot"><span class="annottext">lcl_env :: TcLclEnv
</span><a href="#local-6989586621681342957"><span class="hs-identifier hs-var hs-var">lcl_env</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ctLocEnv"><span class="hs-identifier hs-var">ctLocEnv</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342967"><span class="hs-identifier hs-var">ct_loc</span></a></span><span>
</span><span id="line-1255"></span><span>    </span><span id="local-6989586621681342952"><span class="annot"><span class="annottext">boring_type :: Bool
</span><a href="#local-6989586621681342952"><span class="hs-identifier hs-var hs-var">boring_type</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isTyVarTy"><span class="hs-identifier hs-var">isTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342968"><span class="hs-identifier hs-var">hole_ty</span></a></span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span> </span><span class="hs-comment">-- general case: not an out-of-scope error</span><span>
</span><span id="line-1258"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkHoleError"><span class="hs-identifier hs-var">mkHoleError</span></a></span><span> </span><span id="local-6989586621681342950"><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681342950"><span class="hs-identifier hs-var">lcl_name_cache</span></a></span></span><span> </span><span id="local-6989586621681342949"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342949"><span class="hs-identifier hs-var">tidy_simples</span></a></span></span><span> </span><span id="local-6989586621681342948"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342948"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342947"><span class="annot"><span class="annottext">hole :: Hole
</span><a href="#local-6989586621681342947"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_occ :: Hole -&gt; OccName
</span><a href="GHC.Tc.Types.Constraint.html#hole_occ"><span class="hs-identifier hs-var">hole_occ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342946"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342946"><span class="hs-identifier hs-var">occ</span></a></span></span><span>
</span><span id="line-1259"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_ty :: Hole -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#hole_ty"><span class="hs-identifier hs-var">hole_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342945"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span></span><span>
</span><span id="line-1260"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342944"><span class="annot"><span class="annottext">HoleSort
</span><a href="#local-6989586621681342944"><span class="hs-identifier hs-var">sort</span></a></span></span><span>
</span><span id="line-1261"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_loc :: Hole -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#hole_loc"><span class="hs-identifier hs-var">hole_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342943"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342943"><span class="hs-identifier hs-var">ct_loc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342942"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342942"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span>
</span><span id="line-1263"></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcLclEnv -&gt; NameEnv Type -&gt; TyCoVarSet -&gt; TcM SDoc
</span><a href="GHC.Tc.Errors.html#relevant_bindings"><span class="hs-identifier hs-var">relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342940"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681342950"><span class="hs-identifier hs-var">lcl_name_cache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1264"></span><span>               </span><span class="hs-comment">-- The 'False' means &quot;don't filter the bindings&quot;; see Trac #8191</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342938"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342938"><span class="hs-identifier hs-var">show_hole_constraints</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_ShowHoleConstraints"><span class="hs-identifier hs-var">Opt_ShowHoleConstraints</span></a></span><span>
</span><span id="line-1267"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342936"><span class="annot"><span class="annottext">constraints_msg :: SDoc
</span><a href="#local-6989586621681342936"><span class="hs-identifier hs-var hs-var">constraints_msg</span></a></span></span><span>
</span><span id="line-1268"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-type">ExprHole</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="#local-6989586621681342944"><span class="hs-identifier hs-var">sort</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342938"><span class="hs-identifier hs-var">show_hole_constraints</span></a></span><span>
</span><span id="line-1269"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#givenConstraintsMsg"><span class="hs-identifier hs-var">givenConstraintsMsg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342948"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1270"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1271"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1272"></span><span>
</span><span id="line-1273"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342934"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342934"><span class="hs-identifier hs-var">show_valid_hole_fits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. GeneralFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#goptM"><span class="hs-identifier hs-var">goptM</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_ShowValidHoleFits"><span class="hs-identifier hs-var">Opt_ShowValidHoleFits</span></a></span><span>
</span><span id="line-1274"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342932"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342932"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342931"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342931"><span class="hs-identifier hs-var">sub_msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342934"><span class="hs-identifier hs-var">show_valid_hole_fits</span></a></span><span>
</span><span id="line-1275"></span><span>                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Ct] -&gt; Hole -&gt; TcM (ReportErrCtxt, SDoc)
</span><a href="GHC.Tc.Errors.html#validHoleFits"><span class="hs-identifier hs-var">validHoleFits</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342948"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342949"><span class="hs-identifier hs-var">tidy_simples</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681342947"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1276"></span><span>                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342948"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; TcLclEnv -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorReport"><span class="hs-identifier hs-var">mkErrorReport</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342932"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342940"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1279"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342929"><span class="hs-identifier hs-var">hole_msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span>
</span><span id="line-1280"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var">mk_relevant_bindings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342942"><span class="hs-identifier hs-var">binds_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342936"><span class="hs-identifier hs-var">constraints_msg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span>
</span><span id="line-1281"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#valid_hole_fits"><span class="hs-identifier hs-var">valid_hole_fits</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342931"><span class="hs-identifier hs-var">sub_msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1284"></span><span>    </span><span id="local-6989586621681342940"><span class="annot"><span class="annottext">lcl_env :: TcLclEnv
</span><a href="#local-6989586621681342940"><span class="hs-identifier hs-var hs-var">lcl_env</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ctLocEnv"><span class="hs-identifier hs-var">ctLocEnv</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342943"><span class="hs-identifier hs-var">ct_loc</span></a></span><span>
</span><span id="line-1285"></span><span>    </span><span id="local-6989586621681342928"><span class="annot"><span class="annottext">hole_kind :: Type
</span><a href="#local-6989586621681342928"><span class="hs-identifier hs-var hs-var">hole_kind</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#tcTypeKind"><span class="hs-identifier hs-var">tcTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span>
</span><span id="line-1286"></span><span>    </span><span id="local-6989586621681342927"><span class="annot"><span class="annottext">tyvars :: [TcId]
</span><a href="#local-6989586621681342927"><span class="hs-identifier hs-var hs-var">tyvars</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [TcId]
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypeList"><span class="hs-identifier hs-var">tyCoVarsOfTypeList</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span>
</span><span id="line-1287"></span><span>
</span><span id="line-1288"></span><span>    </span><span id="local-6989586621681342929"><span class="annot"><span class="annottext">hole_msg :: SDoc
</span><a href="#local-6989586621681342929"><span class="hs-identifier hs-var hs-var">hole_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="#local-6989586621681342944"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1289"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-type">ExprHole</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found hole:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1290"></span><span>                            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pp_occ_with_type"><span class="hs-identifier hs-var">pp_occ_with_type</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342946"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1291"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342925"><span class="hs-identifier hs-var">tyvars_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342924"><span class="hs-identifier hs-var">expr_hole_hint</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1292"></span><span>      </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#TypeHole"><span class="hs-identifier hs-var">TypeHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found type wildcard&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342946"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1293"></span><span>                            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;standing for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342922"><span class="hs-identifier hs-var">pp_hole_type_with_kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342925"><span class="hs-identifier hs-var">tyvars_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342921"><span class="hs-identifier hs-var">type_hole_hint</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1295"></span><span>      </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#ConstraintHole"><span class="hs-identifier hs-var">ConstraintHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found extra-constraints wildcard standing for&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>                                  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- always kind constraint</span><span>
</span><span id="line-1297"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342925"><span class="hs-identifier hs-var">tyvars_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342921"><span class="hs-identifier hs-var">type_hole_hint</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1298"></span><span>
</span><span id="line-1299"></span><span>    </span><span id="local-6989586621681342922"><span class="annot"><span class="annottext">pp_hole_type_with_kind :: SDoc
</span><a href="#local-6989586621681342922"><span class="hs-identifier hs-var hs-var">pp_hole_type_with_kind</span></a></span></span><span>
</span><span id="line-1300"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedTypeKind"><span class="hs-identifier hs-var">isLiftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342928"><span class="hs-identifier hs-var">hole_kind</span></a></span><span>
</span><span id="line-1301"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span> </span><span class="hs-comment">-- Don't print the kind of unlifted</span><span>
</span><span id="line-1302"></span><span>                               </span><span class="hs-comment">-- equalities (#15039)</span><span>
</span><span id="line-1303"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span>
</span><span id="line-1304"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1305"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342945"><span class="hs-identifier hs-var">hole_ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprKind"><span class="hs-identifier hs-var">pprKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342928"><span class="hs-identifier hs-var">hole_kind</span></a></span><span>
</span><span id="line-1306"></span><span>
</span><span id="line-1307"></span><span>    </span><span id="local-6989586621681342925"><span class="annot"><span class="annottext">tyvars_msg :: SDoc
</span><a href="#local-6989586621681342925"><span class="hs-identifier hs-var hs-var">tyvars_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342927"><span class="hs-identifier hs-var">tyvars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1308"></span><span>                 </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Where:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; SDoc
</span><a href="#local-6989586621681342915"><span class="hs-identifier hs-var">loc_msg</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342914"><span class="hs-identifier hs-var">other_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1309"></span><span>                                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [TcId] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprSkols"><span class="hs-identifier hs-var">pprSkols</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342948"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342912"><span class="hs-identifier hs-var">skol_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1310"></span><span>       </span><span class="hs-keyword">where</span><span>
</span><span id="line-1311"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621681342912"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342912"><span class="hs-identifier hs-var">skol_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342914"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342914"><span class="hs-identifier hs-var">other_tvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="#local-6989586621681342911"><span class="hs-identifier hs-var">is_skol</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342927"><span class="hs-identifier hs-var">tyvars</span></a></span><span>
</span><span id="line-1312"></span><span>         </span><span id="local-6989586621681342911"><span class="annot"><span class="annottext">is_skol :: TcId -&gt; Bool
</span><a href="#local-6989586621681342911"><span class="hs-identifier hs-var hs-var">is_skol</span></a></span></span><span> </span><span id="local-6989586621681342910"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342910"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Types.Var.html#isTcTyVar"><span class="hs-identifier hs-var">isTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342910"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isSkolemTyVar"><span class="hs-identifier hs-var">isSkolemTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342910"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1313"></span><span>                      </span><span class="hs-comment">-- Coercion variables can be free in the</span><span>
</span><span id="line-1314"></span><span>                      </span><span class="hs-comment">-- hole, via kind casts</span><span>
</span><span id="line-1315"></span><span>
</span><span id="line-1316"></span><span>    </span><span id="local-6989586621681342921"><span class="annot"><span class="annottext">type_hole_hint :: SDoc
</span><a href="#local-6989586621681342921"><span class="hs-identifier hs-var hs-var">type_hole_hint</span></a></span></span><span>
</span><span id="line-1317"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HoleChoice
</span><a href="GHC.Tc.Errors.html#HoleError"><span class="hs-identifier hs-var">HoleError</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; HoleChoice
</span><a href="GHC.Tc.Errors.html#cec_type_holes"><span class="hs-identifier hs-var">cec_type_holes</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342948"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1318"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;To use the inferred type, enable PartialTypeSignatures&quot;</span></span><span>
</span><span id="line-1319"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1320"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span>    </span><span id="local-6989586621681342924"><span class="annot"><span class="annottext">expr_hole_hint :: SDoc
</span><a href="#local-6989586621681342924"><span class="hs-identifier hs-var hs-var">expr_hole_hint</span></a></span></span><span>                       </span><span class="hs-comment">-- Give hint for, say,   f x = _x</span><span>
</span><span id="line-1323"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Int
</span><a href="GHC.Data.FastString.html#lengthFS"><span class="hs-identifier hs-var">lengthFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342946"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>  </span><span class="hs-comment">-- Don't give this hint for plain &quot;_&quot;</span><span>
</span><span id="line-1324"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Or perhaps&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342946"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is mis-spelled, or not in scope&quot;</span></span><span>
</span><span id="line-1326"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1327"></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1328"></span><span>
</span><span id="line-1329"></span><span>    </span><span id="local-6989586621681342915"><span class="annot"><span class="annottext">loc_msg :: TcId -&gt; SDoc
</span><a href="#local-6989586621681342915"><span class="hs-identifier hs-var hs-var">loc_msg</span></a></span></span><span> </span><span id="local-6989586621681342903"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342903"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1330"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342903"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1331"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; TcTyVarDetails
</span><a href="GHC.Types.Var.html#tcTyVarDetails"><span class="hs-identifier hs-var">tcTyVarDetails</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342903"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1332"></span><span>           </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#MetaTv"><span class="hs-identifier hs-type">MetaTv</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342903"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is an ambiguous type variable&quot;</span></span><span>
</span><span id="line-1333"></span><span>           </span><span class="annot"><span class="annottext">TcTyVarDetails
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>  </span><span class="hs-comment">-- Skolems dealt with already</span><span>
</span><span id="line-1334"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-comment">-- A coercion variable can be free in the hole type</span><span>
</span><span id="line-1335"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDocContext -&gt; Bool) -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhenOption"><span class="hs-identifier hs-var">ppWhenOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintExplicitCoercions"><span class="hs-identifier hs-var">sdocPrintExplicitCoercions</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1336"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342903"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is a coercion variable&quot;</span></span><span>
</span><span id="line-1337"></span><span>
</span><span id="line-1338"></span><span class="annot"><a href="GHC.Tc.Errors.html#pp_occ_with_type"><span class="hs-identifier hs-type">pp_occ_with_type</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1339"></span><span id="pp_occ_with_type"><span class="annot"><span class="annottext">pp_occ_with_type :: OccName -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pp_occ_with_type"><span class="hs-identifier hs-var hs-var">pp_occ_with_type</span></a></span></span><span> </span><span id="local-6989586621681342897"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342897"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621681342896"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342896"><span class="hs-identifier hs-var">hole_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprPrefixOcc"><span class="hs-identifier hs-var">pprPrefixOcc</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681342897"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342896"><span class="hs-identifier hs-var">hole_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1340"></span><span>
</span><span id="line-1341"></span><span class="hs-comment">-- We unwrap the ReportErrCtxt here, to avoid introducing a loop in module</span><span>
</span><span id="line-1342"></span><span class="hs-comment">-- imports</span><span>
</span><span id="line-1343"></span><span class="annot"><a href="GHC.Tc.Errors.html#validHoleFits"><span class="hs-identifier hs-type">validHoleFits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-comment">-- The context we're in, i.e. the</span><span>
</span><span id="line-1344"></span><span>                                        </span><span class="hs-comment">-- implications and the tidy environment</span><span>
</span><span id="line-1345"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span>          </span><span class="hs-comment">-- Unsolved simple constraints</span><span>
</span><span id="line-1346"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span>          </span><span class="hs-comment">-- The hole</span><span>
</span><span id="line-1347"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- We return the new context</span><span>
</span><span id="line-1348"></span><span>                                                    </span><span class="hs-comment">-- with a possibly updated</span><span>
</span><span id="line-1349"></span><span>                                                    </span><span class="hs-comment">-- tidy environment, and</span><span>
</span><span id="line-1350"></span><span>                                                    </span><span class="hs-comment">-- the message.</span><span>
</span><span id="line-1351"></span><span id="validHoleFits"><span class="annot"><span class="annottext">validHoleFits :: ReportErrCtxt -&gt; [Ct] -&gt; Hole -&gt; TcM (ReportErrCtxt, SDoc)
</span><a href="GHC.Tc.Errors.html#validHoleFits"><span class="hs-identifier hs-var hs-var">validHoleFits</span></a></span></span><span> </span><span id="local-6989586621681342894"><span class="annot"><span class="annottext">ctxt :: ReportErrCtxt
</span><a href="#local-6989586621681342894"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-type">CEC</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cec_encl :: ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342893"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342893"><span class="hs-identifier hs-var">implics</span></a></span></span><span>
</span><span id="line-1352"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cec_tidy :: ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342892"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342892"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681342891"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342891"><span class="hs-identifier hs-var">simps</span></a></span></span><span> </span><span id="local-6989586621681342890"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681342890"><span class="hs-identifier hs-var">hole</span></a></span></span><span>
</span><span id="line-1353"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342889"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342889"><span class="hs-identifier hs-var">tidy_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342888"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342888"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [Implication] -&gt; [Ct] -&gt; Hole -&gt; TcM (TidyEnv, SDoc)
</span><a href="GHC.Tc.Errors.Hole.html#findValidHoleFits"><span class="hs-identifier hs-var">findValidHoleFits</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342892"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342893"><span class="hs-identifier hs-var">implics</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342891"><span class="hs-identifier hs-var">simps</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621681342890"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1354"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342894"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cec_tidy :: TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342889"><span class="hs-identifier hs-var">tidy_env</span></a></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342888"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1355"></span><span>
</span><span id="line-1356"></span><span class="hs-comment">-- See Note [Constraints include ...]</span><span>
</span><span id="line-1357"></span><span class="annot"><a href="GHC.Tc.Errors.html#givenConstraintsMsg"><span class="hs-identifier hs-type">givenConstraintsMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1358"></span><span id="givenConstraintsMsg"><span class="annot"><span class="annottext">givenConstraintsMsg :: ReportErrCtxt -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#givenConstraintsMsg"><span class="hs-identifier hs-var hs-var">givenConstraintsMsg</span></a></span></span><span> </span><span id="local-6989586621681342887"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342887"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1359"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681342886"><span class="hs-identifier hs-type">constraints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1360"></span><span>        </span><span id="local-6989586621681342886"><span class="annot"><span class="annottext">constraints :: [(Type, RealSrcSpan)]
</span><a href="#local-6989586621681342886"><span class="hs-identifier hs-var hs-var">constraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1361"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342885"><span class="annot"><span class="annottext">implic :: Implication
</span><a href="#local-6989586621681342885"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342884"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342884"><span class="hs-identifier hs-var">given</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342887"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1362"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342883"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342883"><span class="hs-identifier hs-var">constraint</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342884"><span class="hs-identifier hs-var">given</span></a></span><span>
</span><span id="line-1363"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342883"><span class="hs-identifier hs-var">constraint</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342885"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span>        </span><span id="local-6989586621681342877"><span class="annot"><span class="annottext">pprConstraint :: (a, a) -&gt; SDoc
</span><a href="#local-6989586621681342877"><span class="hs-identifier hs-var hs-var">pprConstraint</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342876"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681342876"><span class="hs-identifier hs-var">constraint</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342875"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681342875"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1366"></span><span>          </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681342876"><span class="hs-identifier hs-var">constraint</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681342875"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>
</span><span id="line-1368"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Type, RealSrcSpan)]
</span><a href="#local-6989586621681342886"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1369"></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Constraints include&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a}. (Outputable a, Outputable a) =&gt; (a, a) -&gt; SDoc
</span><a href="#local-6989586621681342877"><span class="hs-identifier hs-var">pprConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">[(Type, RealSrcSpan)]
</span><a href="#local-6989586621681342886"><span class="hs-identifier hs-var">constraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>
</span><span id="line-1372"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-1373"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkIPErr"><span class="hs-identifier hs-type">mkIPErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1374"></span><span id="mkIPErr"><span class="annot"><span class="annottext">mkIPErr :: ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkIPErr"><span class="hs-identifier hs-var hs-var">mkIPErr</span></a></span></span><span> </span><span id="local-6989586621681342873"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342873"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342872"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342872"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-1375"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342871"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342871"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342870"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342870"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342869"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342869"><span class="hs-identifier hs-var">ct1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; TcM (ReportErrCtxt, SDoc, Ct)
</span><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-var">relevantBindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342873"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342868"><span class="hs-identifier hs-var">ct1</span></a></span><span>
</span><span id="line-1376"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342867"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342867"><span class="hs-identifier hs-var hs-var">orig</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342869"><span class="hs-identifier hs-var">ct1</span></a></span><span>
</span><span id="line-1377"></span><span>             </span><span id="local-6989586621681342866"><span class="annot"><span class="annottext">preds :: [Type]
</span><a href="#local-6989586621681342866"><span class="hs-identifier hs-var hs-var">preds</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342872"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1378"></span><span>             </span><span id="local-6989586621681342865"><span class="annot"><span class="annottext">givens :: [Implication]
</span><a href="#local-6989586621681342865"><span class="hs-identifier hs-var hs-var">givens</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivens"><span class="hs-identifier hs-var">getUserGivens</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342871"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1379"></span><span>             </span><span id="local-6989586621681342864"><span class="annot"><span class="annottext">msg :: Report
</span><a href="#local-6989586621681342864"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342865"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-1380"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342867"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1381"></span><span>                   </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unbound implicit parameter&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342872"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1382"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendTheta"><span class="hs-identifier hs-var">pprParendTheta</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342866"><span class="hs-identifier hs-var">preds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1383"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1384"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; ([Type], CtOrigin) -&gt; Report
</span><a href="GHC.Tc.Errors.html#couldNotDeduce"><span class="hs-identifier hs-var">couldNotDeduce</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342865"><span class="hs-identifier hs-var">givens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342866"><span class="hs-identifier hs-var">preds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342867"><span class="hs-identifier hs-var">orig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1385"></span><span>
</span><span id="line-1386"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342871"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342869"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1387"></span><span>         </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342864"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var">mk_relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342870"><span class="hs-identifier hs-var">binds_msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1388"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1389"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342868"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342868"><span class="hs-identifier hs-var">ct1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342872"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span class="hs-comment">{-
Note [Constraints include ...]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
'givenConstraintsMsg' returns the &quot;Constraints include ...&quot; message enabled by
-fshow-hole-constraints. For example, the following hole:

    foo :: (Eq a, Show a) =&gt; a -&gt; String
    foo x = _

would generate the message:

    Constraints include
      Eq a (from foo.hs:1:1-36)
      Show a (from foo.hs:1:1-36)

Constraints are displayed in order from innermost (closest to the hole) to
outermost. There's currently no filtering or elimination of duplicates.

************************************************************************
*                                                                      *
                Equality errors
*                                                                      *
************************************************************************

Note [Inaccessible code]
~~~~~~~~~~~~~~~~~~~~~~~~
Consider
   data T a where
     T1 :: T a
     T2 :: T Bool

   f :: (a ~ Int) =&gt; T a -&gt; Int
   f T1 = 3
   f T2 = 4   -- Unreachable code

Here the second equation is unreachable. The original constraint
(a~Int) from the signature gets rewritten by the pattern-match to
(Bool~Int), so the danger is that we report the error as coming from
the *signature* (#7293).  So, for Given errors we replace the
env (and hence src-loc) on its CtLoc with that from the immediately
enclosing implication.

Note [Error messages for untouchables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider (#9109)
  data G a where { GBool :: G Bool }
  foo x = case x of GBool -&gt; True

Here we can't solve (t ~ Bool), where t is the untouchable result
meta-var 't', because of the (a ~ Bool) from the pattern match.
So we infer the type
   f :: forall a t. G a -&gt; t
making the meta-var 't' into a skolem.  So when we come to report
the unsolved (t ~ Bool), t won't look like an untouchable meta-var
any more.  So we don't assert that it is.
-}</span><span>
</span><span id="line-1447"></span><span>
</span><span id="line-1448"></span><span class="hs-comment">-- Don't have multiple equality errors from the same location</span><span>
</span><span id="line-1449"></span><span class="hs-comment">-- E.g.   (Int,Bool) ~ (Bool,Int)   one error will do!</span><span>
</span><span id="line-1450"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-type">mkEqErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1451"></span><span id="mkEqErr"><span class="annot"><span class="annottext">mkEqErr :: ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-var hs-var">mkEqErr</span></a></span></span><span> </span><span id="local-6989586621681342861"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342861"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342860"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342860"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr1"><span class="hs-identifier hs-var">mkEqErr1</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342861"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342860"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1452"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkEqErr"><span class="hs-identifier hs-var">mkEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkEqErr&quot;</span></span><span>
</span><span id="line-1453"></span><span>
</span><span id="line-1454"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkEqErr1"><span class="hs-identifier hs-type">mkEqErr1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1455"></span><span id="mkEqErr1"><span class="annot"><span class="annottext">mkEqErr1 :: ReportErrCtxt -&gt; Ct -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr1"><span class="hs-identifier hs-var hs-var">mkEqErr1</span></a></span></span><span> </span><span id="local-6989586621681342858"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342858"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342857"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342857"><span class="hs-identifier hs-var">ct</span></a></span></span><span>   </span><span class="hs-comment">-- Wanted or derived;</span><span>
</span><span id="line-1456"></span><span>                   </span><span class="hs-comment">-- givens handled in mkGivenErrorReporter</span><span>
</span><span id="line-1457"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342856"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342856"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342855"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342855"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342854"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342854"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; TcM (ReportErrCtxt, SDoc, Ct)
</span><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-var">relevantBindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342858"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342857"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1458"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342853"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681342853"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn GlobalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-1459"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342852"><span class="annot"><span class="annottext">FamInstEnvs
</span><a href="#local-6989586621681342852"><span class="hs-identifier hs-var">fam_envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM FamInstEnvs
</span><a href="GHC.Tc.Instance.Family.html#tcGetFamInstEnvs"><span class="hs-identifier hs-var">tcGetFamInstEnvs</span></a></span><span>
</span><span id="line-1460"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342850"><span class="annot"><span class="annottext">coercible_msg :: SDoc
</span><a href="#local-6989586621681342850"><span class="hs-identifier hs-var hs-var">coercible_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEqRel"><span class="hs-identifier hs-var">ctEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342854"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1461"></span><span>               </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1462"></span><span>               </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; FamInstEnvs -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mkCoercibleExplanation"><span class="hs-identifier hs-var">mkCoercibleExplanation</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681342853"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">FamInstEnvs
</span><a href="#local-6989586621681342852"><span class="hs-identifier hs-var">fam_envs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342846"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342845"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1463"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342844"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342844"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-1464"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkEqErr1&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342854"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Types.Origin.html#pprCtOrigin"><span class="hs-identifier hs-var">pprCtOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342854"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1465"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342843"><span class="annot"><span class="annottext">report :: Report
</span><a href="#local-6989586621681342843"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342850"><span class="hs-identifier hs-var">coercible_msg</span></a></span><span>
</span><span id="line-1466"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var">mk_relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342855"><span class="hs-identifier hs-var">binds_msg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1467"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; Type
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr_help"><span class="hs-identifier hs-var">mkEqErr_help</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342844"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342856"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342843"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342854"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342846"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342845"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1468"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1469"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342846"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342846"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342845"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342845"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; (Type, Type)
</span><a href="GHC.Core.Predicate.html#getEqPredTys"><span class="hs-identifier hs-var">getEqPredTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342857"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1470"></span><span>
</span><span id="line-1471"></span><span class="hs-comment">-- | This function tries to reconstruct why a &quot;Coercible ty1 ty2&quot; constraint</span><span>
</span><span id="line-1472"></span><span class="hs-comment">-- is left over.</span><span>
</span><span id="line-1473"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkCoercibleExplanation"><span class="hs-identifier hs-type">mkCoercibleExplanation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInstEnvs"><span class="hs-identifier hs-type">FamInstEnvs</span></a></span><span>
</span><span id="line-1474"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1475"></span><span id="mkCoercibleExplanation"><span class="annot"><span class="annottext">mkCoercibleExplanation :: GlobalRdrEnv -&gt; FamInstEnvs -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mkCoercibleExplanation"><span class="hs-identifier hs-var hs-var">mkCoercibleExplanation</span></a></span></span><span> </span><span id="local-6989586621681342841"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681342841"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span id="local-6989586621681342840"><span class="annot"><span class="annottext">FamInstEnvs
</span><a href="#local-6989586621681342840"><span class="hs-identifier hs-var">fam_envs</span></a></span></span><span> </span><span id="local-6989586621681342839"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342839"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342838"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342838"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1476"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342837"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342837"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342836"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342836"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342839"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1477"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342835"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342835"><span class="hs-identifier hs-var">rep_tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FamInstEnvs -&gt; TyCon -&gt; [Type] -&gt; (TyCon, [Type], Coercion)
</span><a href="GHC.Tc.Instance.Family.html#tcLookupDataFamInst"><span class="hs-identifier hs-var">tcLookupDataFamInst</span></a></span><span> </span><span class="annot"><span class="annottext">FamInstEnvs
</span><a href="#local-6989586621681342840"><span class="hs-identifier hs-var">fam_envs</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342837"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342836"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1478"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342833"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342833"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe SDoc
</span><a href="#local-6989586621681342832"><span class="hs-identifier hs-var">coercible_msg_for_tycon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342835"><span class="hs-identifier hs-var">rep_tc</span></a></span><span>
</span><span id="line-1479"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342833"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1480"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342831"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342831"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342830"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342830"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342838"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1481"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342828"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342828"><span class="hs-identifier hs-var">rep_tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FamInstEnvs -&gt; TyCon -&gt; [Type] -&gt; (TyCon, [Type], Coercion)
</span><a href="GHC.Tc.Instance.Family.html#tcLookupDataFamInst"><span class="hs-identifier hs-var">tcLookupDataFamInst</span></a></span><span> </span><span class="annot"><span class="annottext">FamInstEnvs
</span><a href="#local-6989586621681342840"><span class="hs-identifier hs-var">fam_envs</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342831"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342830"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1482"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342827"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342827"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe SDoc
</span><a href="#local-6989586621681342832"><span class="hs-identifier hs-var">coercible_msg_for_tycon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342828"><span class="hs-identifier hs-var">rep_tc</span></a></span><span>
</span><span id="line-1483"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342827"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1484"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342826"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342826"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Tc.Utils.TcType.html#tcSplitAppTy_maybe"><span class="hs-identifier hs-var">tcSplitAppTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342839"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1485"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342824"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342824"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Tc.Utils.TcType.html#tcSplitAppTy_maybe"><span class="hs-identifier hs-var">tcSplitAppTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342838"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1486"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342826"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342824"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-1487"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621681342823"><span class="hs-identifier hs-var">has_unknown_roles</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342826"><span class="hs-identifier hs-var">s1</span></a></span><span>
</span><span id="line-1488"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NB: We cannot know what roles the parameters to&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1489"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342826"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;have;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;we must assume that the role is nominal&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1491"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1492"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1493"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1494"></span><span>    </span><span id="local-6989586621681342832"><span class="annot"><span class="annottext">coercible_msg_for_tycon :: TyCon -&gt; Maybe SDoc
</span><a href="#local-6989586621681342832"><span class="hs-identifier hs-var hs-var">coercible_msg_for_tycon</span></a></span></span><span> </span><span id="local-6989586621681342822"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342822"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-1495"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isAbstractTyCon"><span class="hs-identifier hs-var">isAbstractTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342822"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1496"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NB: The type constructor&quot;</span></span><span>
</span><span id="line-1497"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprSourceTyCon"><span class="hs-identifier hs-var">pprSourceTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342822"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1498"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is abstract&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1499"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342822"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1500"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681342818"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681342818"><span class="hs-identifier hs-var">data_con</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342822"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1501"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342816"><span class="annot"><span class="annottext">dc_name :: Name
</span><a href="#local-6989586621681342816"><span class="hs-identifier hs-var hs-var">dc_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681342818"><span class="hs-identifier hs-var">data_con</span></a></span><span>
</span><span id="line-1502"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Maybe GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-var">lookupGRE_Name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621681342841"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342816"><span class="hs-identifier hs-var">dc_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1503"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The data constructor&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342816"><span class="hs-identifier hs-var">dc_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>                    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;of newtype&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprSourceTyCon"><span class="hs-identifier hs-var">pprSourceTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342822"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is not in scope&quot;</span></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1506"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1507"></span><span>
</span><span id="line-1508"></span><span>    </span><span id="local-6989586621681342823"><span class="annot"><span class="annottext">has_unknown_roles :: Type -&gt; Bool
</span><a href="#local-6989586621681342823"><span class="hs-identifier hs-var hs-var">has_unknown_roles</span></a></span></span><span> </span><span id="local-6989586621681342811"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342811"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1509"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342810"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342810"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342809"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342809"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342811"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1510"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342809"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthAtLeast"><span class="hs-operator hs-var">`lengthAtLeast`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Int
</span><a href="GHC.Core.TyCon.html#tyConArity"><span class="hs-identifier hs-var">tyConArity</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342810"><span class="hs-identifier hs-var">tc</span></a></span><span>  </span><span class="hs-comment">-- oversaturated tycon</span><span>
</span><span id="line-1511"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342806"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342806"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Tc.Utils.TcType.html#tcSplitAppTy_maybe"><span class="hs-identifier hs-var">tcSplitAppTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342811"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1512"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621681342823"><span class="hs-identifier hs-var">has_unknown_roles</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342806"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1513"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isTyVarTy"><span class="hs-identifier hs-var">isTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342811"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1514"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1515"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1516"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1517"></span><span>
</span><span id="line-1518"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkEqErr_help"><span class="hs-identifier hs-type">mkEqErr_help</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1519"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-1520"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span id="mkEqErr_help"><span class="annot"><span class="annottext">mkEqErr_help :: DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; Type
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkEqErr_help"><span class="hs-identifier hs-var hs-var">mkEqErr_help</span></a></span></span><span> </span><span id="local-6989586621681342805"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342805"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681342804"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342804"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342803"><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342803"><span class="hs-identifier hs-var">report</span></a></span></span><span> </span><span id="local-6989586621681342802"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342802"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342801"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342801"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342800"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342800"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1522"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342799"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342799"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (TcId, Coercion)
</span><a href="GHC.Tc.Utils.TcType.html#tcGetCastedTyVar_maybe"><span class="hs-identifier hs-var">tcGetCastedTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342801"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1523"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; TcId
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkTyVarEqErr"><span class="hs-identifier hs-var">mkTyVarEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342805"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342804"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342803"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342802"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342799"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342800"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1524"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342796"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342796"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (TcId, Coercion)
</span><a href="GHC.Tc.Utils.TcType.html#tcGetCastedTyVar_maybe"><span class="hs-identifier hs-var">tcGetCastedTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342800"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1525"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; TcId
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkTyVarEqErr"><span class="hs-identifier hs-var">mkTyVarEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342805"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342804"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342803"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342802"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342796"><span class="hs-identifier hs-var">tv2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342801"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1526"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1527"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; Report -&gt; Ct -&gt; Type -&gt; Type -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#reportEqErr"><span class="hs-identifier hs-var">reportEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342804"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342803"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342802"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342801"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342800"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1528"></span><span>
</span><span id="line-1529"></span><span class="annot"><a href="GHC.Tc.Errors.html#reportEqErr"><span class="hs-identifier hs-type">reportEqErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1530"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-1531"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span id="reportEqErr"><span class="annot"><span class="annottext">reportEqErr :: ReportErrCtxt
-&gt; Report -&gt; Ct -&gt; Type -&gt; Type -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#reportEqErr"><span class="hs-identifier hs-var hs-var">reportEqErr</span></a></span></span><span> </span><span id="local-6989586621681342794"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342794"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342793"><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342793"><span class="hs-identifier hs-var">report</span></a></span></span><span> </span><span id="local-6989586621681342792"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342792"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342791"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342791"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342790"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342790"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1533"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342794"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342792"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342789"><span class="hs-identifier hs-var">misMatch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342793"><span class="hs-identifier hs-var">report</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342788"><span class="hs-identifier hs-var">eqInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1535"></span><span>    </span><span id="local-6989586621681342789"><span class="annot"><span class="annottext">misMatch :: Report
</span><a href="#local-6989586621681342789"><span class="hs-identifier hs-var hs-var">misMatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchOrCND"><span class="hs-identifier hs-var">misMatchOrCND</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342794"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342792"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342791"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342790"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1536"></span><span>    </span><span id="local-6989586621681342788"><span class="annot"><span class="annottext">eqInfo :: Report
</span><a href="#local-6989586621681342788"><span class="hs-identifier hs-var hs-var">eqInfo</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#mkEqInfoMsg"><span class="hs-identifier hs-var">mkEqInfoMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342792"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342791"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342790"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1537"></span><span>
</span><span id="line-1538"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkTyVarEqErr"><span class="hs-identifier hs-type">mkTyVarEqErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#mkTyVarEqErr%27"><span class="hs-identifier hs-type">mkTyVarEqErr'</span></a></span><span>
</span><span id="line-1539"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-1540"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1541"></span><span class="hs-comment">-- tv1 and ty2 are already tidied</span><span>
</span><span id="line-1542"></span><span id="mkTyVarEqErr"><span class="annot"><span class="annottext">mkTyVarEqErr :: DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; TcId
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkTyVarEqErr"><span class="hs-identifier hs-var hs-var">mkTyVarEqErr</span></a></span></span><span> </span><span id="local-6989586621681342784"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342784"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681342783"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342783"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342782"><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342782"><span class="hs-identifier hs-var">report</span></a></span></span><span> </span><span id="local-6989586621681342781"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342781"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342780"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342780"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621681342779"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342779"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1543"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkTyVarEqErr&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342781"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342780"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342779"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; TcId
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkTyVarEqErr%27"><span class="hs-identifier hs-var">mkTyVarEqErr'</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342784"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342783"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342782"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342781"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342780"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342779"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1545"></span><span>
</span><span id="line-1546"></span><span id="mkTyVarEqErr%27"><span class="annot"><span class="annottext">mkTyVarEqErr' :: DynFlags
-&gt; ReportErrCtxt
-&gt; Report
-&gt; Ct
-&gt; TcId
-&gt; Type
-&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkTyVarEqErr%27"><span class="hs-identifier hs-var hs-var">mkTyVarEqErr'</span></a></span></span><span> </span><span id="local-6989586621681342778"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342778"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681342777"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342776"><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span></span><span> </span><span id="local-6989586621681342775"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342774"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621681342773"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1547"></span><span>     </span><span class="hs-comment">-- impredicativity is a simple error to understand; try it first</span><span>
</span><span id="line-1548"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621681342772"><span class="hs-identifier hs-var">check_eq_result</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; CheckTyEqProblem -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasProblem"><span class="hs-operator hs-var">`cterHasProblem`</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier hs-var">cteImpredicative</span></a></span><span>
</span><span id="line-1549"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342769"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681342769"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isSkolemTyVar"><span class="hs-identifier hs-var">isSkolemTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span>
</span><span id="line-1550"></span><span>                      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot equate type variable&quot;</span></span><span>
</span><span id="line-1551"></span><span>                      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot instantiate unification variable&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1552"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with a&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342768"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;involving polytypes:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1554"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-1555"></span><span>       </span><span class="hs-comment">-- Unlike the other reports, this discards the old 'report_important'</span><span>
</span><span id="line-1556"></span><span>       </span><span class="hs-comment">-- instead of augmenting it.  This is because the details are not likely</span><span>
</span><span id="line-1557"></span><span>       </span><span class="hs-comment">-- to be helpful since this is just an unimplemented feature.</span><span>
</span><span id="line-1558"></span><span>    </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-1559"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342767"><span class="hs-identifier hs-var">headline_msg</span></a></span><span>
</span><span id="line-1560"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342769"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1561"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isSkolemTyVar"><span class="hs-identifier hs-var">isSkolemTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcId -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#extraTyVarEqInfo"><span class="hs-identifier hs-var">extraTyVarEqInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1562"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1563"></span><span>
</span><span id="line-1564"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isSkolemTyVar"><span class="hs-identifier hs-var">isSkolemTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span>  </span><span class="hs-comment">-- ty2 won't be a meta-tyvar; we would have</span><span>
</span><span id="line-1565"></span><span>                       </span><span class="hs-comment">-- swapped in Solver.Canonical.canEqTyVarHomo</span><span>
</span><span id="line-1566"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isTyVarTyVar"><span class="hs-identifier hs-var">isTyVarTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isTyVarTy"><span class="hs-identifier hs-var">isTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1567"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEqRel"><span class="hs-identifier hs-var">ctEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span>
</span><span id="line-1568"></span><span>     </span><span class="hs-comment">-- The cases below don't really apply to ReprEq (except occurs check)</span><span>
</span><span id="line-1569"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-1570"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342767"><span class="hs-identifier hs-var">headline_msg</span></a></span><span>
</span><span id="line-1571"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcId -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#extraTyVarEqInfo"><span class="hs-identifier hs-var">extraTyVarEqInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1572"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#suggestAddSig"><span class="hs-identifier hs-var">suggestAddSig</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1573"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span>
</span><span id="line-1574"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1575"></span><span>
</span><span id="line-1576"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasOccursCheck"><span class="hs-identifier hs-var">cterHasOccursCheck</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621681342772"><span class="hs-identifier hs-var">check_eq_result</span></a></span><span>
</span><span id="line-1577"></span><span>    </span><span class="hs-comment">-- We report an &quot;occurs check&quot; even for  a ~ F t a, where F is a type</span><span>
</span><span id="line-1578"></span><span>    </span><span class="hs-comment">-- function; it's not insoluble (because in principle F could reduce)</span><span>
</span><span id="line-1579"></span><span>    </span><span class="hs-comment">-- but we have certainly been unable to solve it</span><span>
</span><span id="line-1580"></span><span>    </span><span class="hs-comment">-- See Note [Occurs check error] in GHC.Tc.Solver.Canonical</span><span>
</span><span id="line-1581"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342762"><span class="annot"><span class="annottext">extra2 :: Report
</span><a href="#local-6989586621681342762"><span class="hs-identifier hs-var hs-var">extra2</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#mkEqInfoMsg"><span class="hs-identifier hs-var">mkEqInfoMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1582"></span><span>
</span><span id="line-1583"></span><span>             </span><span id="local-6989586621681342761"><span class="annot"><span class="annottext">interesting_tyvars :: [TcId]
</span><a href="#local-6989586621681342761"><span class="hs-identifier hs-var hs-var">interesting_tyvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.TyCo.FVs.html#noFreeVarsOfType"><span class="hs-identifier hs-var">noFreeVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1584"></span><span>                                  </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1585"></span><span>                                  </span><span class="annot"><span class="annottext">FV -&gt; [TcId]
</span><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier hs-var">fvVarList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1586"></span><span>                                  </span><span class="annot"><span class="annottext">Type -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsOfType"><span class="hs-identifier hs-var">tyCoFVsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">FV -&gt; FV -&gt; FV
</span><a href="GHC.Utils.FV.html#unionFV"><span class="hs-operator hs-var">`unionFV`</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsOfType"><span class="hs-identifier hs-var">tyCoFVsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1587"></span><span>             </span><span id="local-6989586621681342757"><span class="annot"><span class="annottext">extra3 :: Report
</span><a href="#local-6989586621681342757"><span class="hs-identifier hs-var hs-var">extra3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#mk_relevant_bindings"><span class="hs-identifier hs-var">mk_relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1588"></span><span>                      </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342761"><span class="hs-identifier hs-var">interesting_tyvars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1589"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type variable kinds:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1590"></span><span>                      </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; SDoc
</span><a href="#local-6989586621681342755"><span class="hs-identifier hs-var">tyvar_binding</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; TcId -&gt; TcId
</span><a href="GHC.Core.TyCo.Tidy.html#tidyTyCoVarOcc"><span class="hs-identifier hs-var">tidyTyCoVarOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1591"></span><span>                                </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342761"><span class="hs-identifier hs-var">interesting_tyvars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span>
</span><span id="line-1593"></span><span>             </span><span id="local-6989586621681342755"><span class="annot"><span class="annottext">tyvar_binding :: TcId -&gt; SDoc
</span><a href="#local-6989586621681342755"><span class="hs-identifier hs-var hs-var">tyvar_binding</span></a></span></span><span> </span><span id="local-6989586621681342751"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342751"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342751"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342751"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1594"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1595"></span><span>         </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342767"><span class="hs-identifier hs-var">headline_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342762"><span class="hs-identifier hs-var">extra2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342757"><span class="hs-identifier hs-var">extra3</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1596"></span><span>
</span><span id="line-1597"></span><span>  </span><span class="hs-comment">-- If the immediately-enclosing implication has 'tv' a skolem, and</span><span>
</span><span id="line-1598"></span><span>  </span><span class="hs-comment">-- we know by now its an InferSkol kind of skolem, then presumably</span><span>
</span><span id="line-1599"></span><span>  </span><span class="hs-comment">-- it started life as a TyVarTv, else it'd have been unified, given</span><span>
</span><span id="line-1600"></span><span>  </span><span class="hs-comment">-- that there's no occurs-check or forall problem</span><span>
</span><span id="line-1601"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342750"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342750"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Implication]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1602"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342749"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342749"><span class="hs-identifier hs-var">skols</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342750"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-1603"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342749"><span class="hs-identifier hs-var">skols</span></a></span><span>
</span><span id="line-1604"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-1605"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchMsg"><span class="hs-identifier hs-var">misMatchMsg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1606"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcId -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#extraTyVarEqInfo"><span class="hs-identifier hs-var">extraTyVarEqInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1607"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span>
</span><span id="line-1608"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1609"></span><span>
</span><span id="line-1610"></span><span>  </span><span class="hs-comment">-- Check for skolem escape</span><span>
</span><span id="line-1611"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342746"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342746"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Implication]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span>   </span><span class="hs-comment">-- Get the innermost context</span><span>
</span><span id="line-1612"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342745"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342745"><span class="hs-identifier hs-var">skols</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342744"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342744"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342746"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342743"><span class="annot"><span class="annottext">esc_skols :: [TcId]
</span><a href="#local-6989586621681342743"><span class="hs-identifier hs-var hs-var">esc_skols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; TyCoVarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342745"><span class="hs-identifier hs-var">skols</span></a></span><span>
</span><span id="line-1614"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342743"><span class="hs-identifier hs-var">esc_skols</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342741"><span class="annot"><span class="annottext">msg :: Report
</span><a href="#local-6989586621681342741"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchMsg"><span class="hs-identifier hs-var">misMatchMsg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1616"></span><span>             </span><span id="local-6989586621681342740"><span class="annot"><span class="annottext">esc_doc :: SDoc
</span><a href="#local-6989586621681342740"><span class="hs-identifier hs-var hs-var">esc_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;because&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342768"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342743"><span class="hs-identifier hs-var">esc_skols</span></a></span><span>
</span><span id="line-1617"></span><span>                             </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342743"><span class="hs-identifier hs-var">esc_skols</span></a></span><span>
</span><span id="line-1618"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;would escape&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1619"></span><span>                             </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isSingleton"><span class="hs-identifier hs-var">isSingleton</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342743"><span class="hs-identifier hs-var">esc_skols</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;its scope&quot;</span></span><span>
</span><span id="line-1620"></span><span>                                                      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;their scope&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1621"></span><span>             </span><span id="local-6989586621681342737"><span class="annot"><span class="annottext">tv_extra :: Report
</span><a href="#local-6989586621681342737"><span class="hs-identifier hs-var hs-var">tv_extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1622"></span><span>                        </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342740"><span class="hs-identifier hs-var">esc_doc</span></a></span><span>
</span><span id="line-1623"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isSingleton"><span class="hs-identifier hs-var">isSingleton</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342743"><span class="hs-identifier hs-var">esc_skols</span></a></span><span>
</span><span id="line-1624"></span><span>                                      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This (rigid, skolem)&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1625"></span><span>                                           </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342768"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;variable is&quot;</span></span><span>
</span><span id="line-1626"></span><span>                                      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;These (rigid, skolem)&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1627"></span><span>                                           </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342768"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;variables are&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1628"></span><span>                               </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bound by&quot;</span></span><span>
</span><span id="line-1629"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342744"><span class="hs-identifier hs-var">skol_info</span></a></span><span>
</span><span id="line-1630"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1631"></span><span>                               </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342746"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1632"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342741"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342737"><span class="hs-identifier hs-var">tv_extra</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1633"></span><span>
</span><span id="line-1634"></span><span>  </span><span class="hs-comment">-- Nastiest case: attempt to unify an untouchable variable</span><span>
</span><span id="line-1635"></span><span>  </span><span class="hs-comment">-- So tv is a meta tyvar (or started that way before we</span><span>
</span><span id="line-1636"></span><span>  </span><span class="hs-comment">-- generalised it).  So presumably it is an *untouchable*</span><span>
</span><span id="line-1637"></span><span>  </span><span class="hs-comment">-- meta tyvar or a TyVarTv, else it'd have been unified</span><span>
</span><span id="line-1638"></span><span>  </span><span class="hs-comment">-- See Note [Error messages for untouchables]</span><span>
</span><span id="line-1639"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342736"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342736"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Implication]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span>   </span><span class="hs-comment">-- Get the innermost context</span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342735"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342735"><span class="hs-identifier hs-var">given</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_tclvl :: Implication -&gt; TcLevel
</span><a href="GHC.Tc.Types.Constraint.html#ic_tclvl"><span class="hs-identifier hs-var">ic_tclvl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342734"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621681342734"><span class="hs-identifier hs-var">lvl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342733"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342733"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342736"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">isTouchableMetaTyVar</span><span> </span><span class="hs-identifier">lvl</span><span> </span><span class="hs-identifier">tv1</span><span class="hs-special">)</span><span>
</span><span id="line-1642"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">tv1</span><span> </span><span class="hs-operator">$$</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">lvl</span><span> </span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- See Note [Error messages for untouchables]</span><span>
</span><span id="line-1643"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342732"><span class="annot"><span class="annottext">msg :: Report
</span><a href="#local-6989586621681342732"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchMsg"><span class="hs-identifier hs-var">misMatchMsg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1644"></span><span>             </span><span id="local-6989586621681342731"><span class="annot"><span class="annottext">tclvl_extra :: Report
</span><a href="#local-6989586621681342731"><span class="hs-identifier hs-var hs-var">tclvl_extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1645"></span><span>                  </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1646"></span><span>                  </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is untouchable&quot;</span></span><span>
</span><span id="line-1647"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;inside the constraints:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId] -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVarTheta"><span class="hs-identifier hs-var">pprEvVarTheta</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342735"><span class="hs-identifier hs-var">given</span></a></span><span>
</span><span id="line-1648"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bound by&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342733"><span class="hs-identifier hs-var">skol_info</span></a></span><span>
</span><span id="line-1649"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1650"></span><span>                        </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342736"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1651"></span><span>             </span><span id="local-6989586621681342730"><span class="annot"><span class="annottext">tv_extra :: Report
</span><a href="#local-6989586621681342730"><span class="hs-identifier hs-var hs-var">tv_extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcId -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#extraTyVarEqInfo"><span class="hs-identifier hs-var">extraTyVarEqInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1652"></span><span>             </span><span id="local-6989586621681342729"><span class="annot"><span class="annottext">add_sig :: Report
</span><a href="#local-6989586621681342729"><span class="hs-identifier hs-var hs-var">add_sig</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#suggestAddSig"><span class="hs-identifier hs-var">suggestAddSig</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1653"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-1654"></span><span>            </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342732"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342731"><span class="hs-identifier hs-var">tclvl_extra</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342730"><span class="hs-identifier hs-var">tv_extra</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342729"><span class="hs-identifier hs-var">add_sig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1655"></span><span>
</span><span id="line-1656"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; Report -&gt; Ct -&gt; Type -&gt; Type -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#reportEqErr"><span class="hs-identifier hs-var">reportEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342776"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1658"></span><span>        </span><span class="hs-comment">-- This *can* happen (#6123)</span><span>
</span><span id="line-1659"></span><span>        </span><span class="hs-comment">-- Consider an ambiguous top-level constraint (a ~ F a)</span><span>
</span><span id="line-1660"></span><span>        </span><span class="hs-comment">-- Not an occurs check, because F is a type function.</span><span>
</span><span id="line-1661"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1662"></span><span>    </span><span id="local-6989586621681342767"><span class="annot"><span class="annottext">headline_msg :: Report
</span><a href="#local-6989586621681342767"><span class="hs-identifier hs-var hs-var">headline_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchOrCND"><span class="hs-identifier hs-var">misMatchOrCND</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342727"><span class="hs-identifier hs-var">insoluble_occurs_check</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342777"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1663"></span><span>
</span><span id="line-1664"></span><span>    </span><span id="local-6989586621681342764"><span class="annot"><span class="annottext">ty1 :: Type
</span><a href="#local-6989586621681342764"><span class="hs-identifier hs-var hs-var">ty1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span>
</span><span id="line-1665"></span><span>
</span><span id="line-1666"></span><span>    </span><span id="local-6989586621681342772"><span class="annot"><span class="annottext">check_eq_result :: CheckTyEqResult
</span><a href="#local-6989586621681342772"><span class="hs-identifier hs-var hs-var">check_eq_result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1667"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cc_reason :: Ct -&gt; CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#cc_reason"><span class="hs-identifier hs-var">cc_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NonCanonicalReason"><span class="hs-identifier hs-type">NonCanonicalReason</span></a></span><span> </span><span id="local-6989586621681342725"><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621681342725"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621681342725"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-1668"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cc_reason :: Ct -&gt; CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#cc_reason"><span class="hs-identifier hs-var">cc_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleBlockerReason"><span class="hs-identifier hs-type">HoleBlockerReason</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier hs-var">cteProblem</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteHoleBlocker"><span class="hs-identifier hs-var">cteHoleBlocker</span></a></span><span>
</span><span id="line-1669"></span><span>      </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; TcId -&gt; Type -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Utils.Unify.html#checkTyVarEq"><span class="hs-identifier hs-var">checkTyVarEq</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342778"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342774"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342773"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1670"></span><span>        </span><span class="hs-comment">-- in T2627b, we report an error for F (F a0) ~ a0. Note that the type</span><span>
</span><span id="line-1671"></span><span>        </span><span class="hs-comment">-- variable is on the right, so we don't get useful info for the CIrredCan,</span><span>
</span><span id="line-1672"></span><span>        </span><span class="hs-comment">-- and have to compute the result of checkTyVarEq here.</span><span>
</span><span id="line-1673"></span><span>
</span><span id="line-1674"></span><span>
</span><span id="line-1675"></span><span>    </span><span id="local-6989586621681342727"><span class="annot"><span class="annottext">insoluble_occurs_check :: Bool
</span><a href="#local-6989586621681342727"><span class="hs-identifier hs-var hs-var">insoluble_occurs_check</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621681342772"><span class="hs-identifier hs-var">check_eq_result</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; CheckTyEqProblem -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasProblem"><span class="hs-operator hs-var">`cterHasProblem`</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var">cteInsolubleOccurs</span></a></span><span>
</span><span id="line-1676"></span><span>
</span><span id="line-1677"></span><span>    </span><span id="local-6989586621681342768"><span class="annot"><span class="annottext">what :: SDoc
</span><a href="#local-6989586621681342768"><span class="hs-identifier hs-var hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind -&gt; String
</span><a href="GHC.Tc.Errors.html#levelString"><span class="hs-identifier hs-var">levelString</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1678"></span><span>           </span><span class="annot"><span class="annottext">CtLoc -&gt; Maybe TypeOrKind
</span><a href="GHC.Tc.Types.Constraint.html#ctLocTypeOrKind_maybe"><span class="hs-identifier hs-var">ctLocTypeOrKind_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342775"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-1679"></span><span>
</span><span id="line-1680"></span><span class="annot"><a href="GHC.Tc.Errors.html#levelString"><span class="hs-identifier hs-type">levelString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1681"></span><span id="levelString"><span class="annot"><span class="annottext">levelString :: TypeOrKind -&gt; String
</span><a href="GHC.Tc.Errors.html#levelString"><span class="hs-identifier hs-var hs-var">levelString</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span>
</span><span id="line-1682"></span><span class="annot"><a href="GHC.Tc.Errors.html#levelString"><span class="hs-identifier hs-var">levelString</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind&quot;</span></span><span>
</span><span id="line-1683"></span><span>
</span><span id="line-1684"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkEqInfoMsg"><span class="hs-identifier hs-type">mkEqInfoMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1685"></span><span class="hs-comment">-- Report (a) ambiguity if either side is a type function application</span><span>
</span><span id="line-1686"></span><span class="hs-comment">--            e.g. F a0 ~ Int</span><span>
</span><span id="line-1687"></span><span class="hs-comment">--        (b) warning about injectivity if both sides are the same</span><span>
</span><span id="line-1688"></span><span class="hs-comment">--            type function application   F a ~ F b</span><span>
</span><span id="line-1689"></span><span class="hs-comment">--            See Note [Non-injective type functions]</span><span>
</span><span id="line-1690"></span><span id="mkEqInfoMsg"><span class="annot"><span class="annottext">mkEqInfoMsg :: Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#mkEqInfoMsg"><span class="hs-identifier hs-var hs-var">mkEqInfoMsg</span></a></span></span><span> </span><span id="local-6989586621681342716"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342716"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342715"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342715"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342714"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342714"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1691"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342713"><span class="hs-identifier hs-var">tyfun_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342712"><span class="hs-identifier hs-var">ambig_msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1692"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1693"></span><span>    </span><span id="local-6989586621681342711"><span class="annot"><span class="annottext">mb_fun1 :: Maybe TyCon
</span><a href="#local-6989586621681342711"><span class="hs-identifier hs-var hs-var">mb_fun1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe TyCon
</span><a href="GHC.Tc.Errors.html#isTyFun_maybe"><span class="hs-identifier hs-var">isTyFun_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342715"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1694"></span><span>    </span><span id="local-6989586621681342710"><span class="annot"><span class="annottext">mb_fun2 :: Maybe TyCon
</span><a href="#local-6989586621681342710"><span class="hs-identifier hs-var hs-var">mb_fun2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe TyCon
</span><a href="GHC.Tc.Errors.html#isTyFun_maybe"><span class="hs-identifier hs-var">isTyFun_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342714"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1695"></span><span>
</span><span id="line-1696"></span><span>    </span><span id="local-6989586621681342712"><span class="annot"><span class="annottext">ambig_msg :: SDoc
</span><a href="#local-6989586621681342712"><span class="hs-identifier hs-var hs-var">ambig_msg</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681342711"><span class="hs-identifier hs-var">mb_fun1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681342710"><span class="hs-identifier hs-var">mb_fun2</span></a></span><span>
</span><span id="line-1697"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Ct -&gt; (Bool, SDoc)
</span><a href="GHC.Tc.Errors.html#mkAmbigMsg"><span class="hs-identifier hs-var">mkAmbigMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342716"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1698"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1699"></span><span>
</span><span id="line-1700"></span><span>    </span><span id="local-6989586621681342713"><span class="annot"><span class="annottext">tyfun_msg :: SDoc
</span><a href="#local-6989586621681342713"><span class="hs-identifier hs-var hs-var">tyfun_msg</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342708"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342708"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681342711"><span class="hs-identifier hs-var">mb_fun1</span></a></span><span>
</span><span id="line-1701"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342707"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342707"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="#local-6989586621681342710"><span class="hs-identifier hs-var">mb_fun2</span></a></span><span>
</span><span id="line-1702"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342708"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342707"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-1703"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Role -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isInjectiveTyCon"><span class="hs-identifier hs-var">isInjectiveTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342708"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="GHC.Core.Coercion.Axiom.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1704"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NB:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342708"><span class="hs-identifier hs-var">tc1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1705"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is a non-injective type family&quot;</span></span><span>
</span><span id="line-1706"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1707"></span><span>
</span><span id="line-1708"></span><span class="annot"><a href="GHC.Tc.Errors.html#misMatchOrCND"><span class="hs-identifier hs-type">misMatchOrCND</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-1709"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1710"></span><span class="hs-comment">-- If oriented then ty1 is actual, ty2 is expected</span><span>
</span><span id="line-1711"></span><span id="misMatchOrCND"><span class="annot"><span class="annottext">misMatchOrCND :: Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchOrCND"><span class="hs-identifier hs-var hs-var">misMatchOrCND</span></a></span></span><span> </span><span id="local-6989586621681342704"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342704"><span class="hs-identifier hs-var">insoluble_occurs_check</span></a></span></span><span> </span><span id="local-6989586621681342703"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342703"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342702"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342702"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342701"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342701"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342700"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342700"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1712"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342704"><span class="hs-identifier hs-var">insoluble_occurs_check</span></a></span><span>  </span><span class="hs-comment">-- See Note [Insoluble occurs check]</span><span>
</span><span id="line-1713"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRigidTy"><span class="hs-identifier hs-var">isRigidTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342701"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRigidTy"><span class="hs-identifier hs-var">isRigidTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342700"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1714"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isGivenCt"><span class="hs-identifier hs-var">isGivenCt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342702"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1715"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342698"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-1716"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- If the equality is unconditionally insoluble</span><span>
</span><span id="line-1717"></span><span>    </span><span class="hs-comment">-- or there is no context, don't report the context</span><span>
</span><span id="line-1718"></span><span>    </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchMsg"><span class="hs-identifier hs-var">misMatchMsg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342703"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342702"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342701"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342700"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1719"></span><span>
</span><span id="line-1720"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1721"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; ([Type], CtOrigin) -&gt; Report
</span><a href="GHC.Tc.Errors.html#couldNotDeduce"><span class="hs-identifier hs-var">couldNotDeduce</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342698"><span class="hs-identifier hs-var">givens</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342697"><span class="hs-identifier hs-var">eq_pred</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342696"><span class="hs-identifier hs-var">orig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1722"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TypeOrKind -&gt; Type -&gt; Type -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_supplementary_ea_msg"><span class="hs-identifier hs-var">mk_supplementary_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342703"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342694"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342701"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342700"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342696"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1723"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1724"></span><span>    </span><span id="local-6989586621681342693"><span class="annot"><span class="annottext">ev :: CtEvidence
</span><a href="#local-6989586621681342693"><span class="hs-identifier hs-var hs-var">ev</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342702"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1725"></span><span>    </span><span id="local-6989586621681342697"><span class="annot"><span class="annottext">eq_pred :: Type
</span><a href="#local-6989586621681342697"><span class="hs-identifier hs-var hs-var">eq_pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621681342693"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1726"></span><span>    </span><span id="local-6989586621681342696"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342696"><span class="hs-identifier hs-var hs-var">orig</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctEvOrigin"><span class="hs-identifier hs-var">ctEvOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621681342693"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1727"></span><span>    </span><span id="local-6989586621681342694"><span class="annot"><span class="annottext">level :: TypeOrKind
</span><a href="#local-6989586621681342694"><span class="hs-identifier hs-var hs-var">level</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; Maybe TypeOrKind
</span><a href="GHC.Tc.Types.Constraint.html#ctLocTypeOrKind_maybe"><span class="hs-identifier hs-var">ctLocTypeOrKind_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier hs-var">ctEvLoc</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621681342693"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-1728"></span><span>    </span><span id="local-6989586621681342698"><span class="annot"><span class="annottext">givens :: [Implication]
</span><a href="#local-6989586621681342698"><span class="hs-identifier hs-var hs-var">givens</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342689"><span class="hs-identifier hs-var">given</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681342689"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342689"><span class="hs-identifier hs-var">given</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivens"><span class="hs-identifier hs-var">getUserGivens</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342703"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#ic_given_eqs"><span class="hs-identifier hs-var">ic_given_eqs</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342689"><span class="hs-identifier hs-var">given</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1729"></span><span>              </span><span class="hs-comment">-- Keep only UserGivens that have some equalities.</span><span>
</span><span id="line-1730"></span><span>              </span><span class="hs-comment">-- See Note [Suppress redundant givens during error reporting]</span><span>
</span><span id="line-1731"></span><span>
</span><span id="line-1732"></span><span class="annot"><a href="GHC.Tc.Errors.html#couldNotDeduce"><span class="hs-identifier hs-type">couldNotDeduce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1733"></span><span id="couldNotDeduce"><span class="annot"><span class="annottext">couldNotDeduce :: [Implication] -&gt; ([Type], CtOrigin) -&gt; Report
</span><a href="GHC.Tc.Errors.html#couldNotDeduce"><span class="hs-identifier hs-var hs-var">couldNotDeduce</span></a></span></span><span> </span><span id="local-6989586621681342687"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342687"><span class="hs-identifier hs-var">givens</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342686"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342686"><span class="hs-identifier hs-var">wanteds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342685"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342685"><span class="hs-identifier hs-var">orig</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1734"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1735"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342685"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not deduce:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTheta"><span class="hs-identifier hs-var">pprTheta</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342686"><span class="hs-identifier hs-var">wanteds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1736"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Implication] -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#pp_givens"><span class="hs-identifier hs-var">pp_givens</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342687"><span class="hs-identifier hs-var">givens</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1737"></span><span>
</span><span id="line-1738"></span><span class="annot"><a href="GHC.Tc.Errors.html#pp_givens"><span class="hs-identifier hs-type">pp_givens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1739"></span><span id="pp_givens"><span class="annot"><span class="annottext">pp_givens :: [Implication] -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#pp_givens"><span class="hs-identifier hs-var hs-var">pp_givens</span></a></span></span><span> </span><span id="local-6989586621681342683"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342683"><span class="hs-identifier hs-var">givens</span></a></span></span><span>
</span><span id="line-1740"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342683"><span class="hs-identifier hs-var">givens</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1741"></span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1742"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621681342682"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342682"><span class="hs-identifier hs-var">g</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681342681"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342681"><span class="hs-identifier hs-var">gs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; Implication -&gt; SDoc
</span><a href="#local-6989586621681342680"><span class="hs-identifier hs-var">ppr_given</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from the context:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342682"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-1743"></span><span>                 </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Implication -&gt; SDoc
</span><a href="#local-6989586621681342680"><span class="hs-identifier hs-var">ppr_given</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or from:&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342681"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-1744"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1745"></span><span>       </span><span id="local-6989586621681342680"><span class="annot"><span class="annottext">ppr_given :: SDoc -&gt; Implication -&gt; SDoc
</span><a href="#local-6989586621681342680"><span class="hs-identifier hs-var hs-var">ppr_given</span></a></span></span><span> </span><span id="local-6989586621681342677"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342677"><span class="hs-identifier hs-var">herald</span></a></span></span><span> </span><span id="local-6989586621681342676"><span class="annot"><span class="annottext">implic :: Implication
</span><a href="#local-6989586621681342676"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342675"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342675"><span class="hs-identifier hs-var">gs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342674"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342674"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1746"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342677"><span class="hs-identifier hs-var">herald</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId] -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVarTheta"><span class="hs-identifier hs-var">pprEvVarTheta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Type) -&gt; [a] -&gt; [a]
</span><a href="GHC.Tc.Utils.TcType.html#mkMinimalBySCs"><span class="hs-identifier hs-var">mkMinimalBySCs</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342675"><span class="hs-identifier hs-var">gs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1747"></span><span>             </span><span class="hs-comment">-- See Note [Suppress redundant givens during error reporting]</span><span>
</span><span id="line-1748"></span><span>             </span><span class="hs-comment">-- for why we use mkMinimalBySCs above.</span><span>
</span><span id="line-1749"></span><span>                </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bound by&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342674"><span class="hs-identifier hs-var">skol_info</span></a></span><span>
</span><span id="line-1750"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342676"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1751"></span><span>
</span><span id="line-1752"></span><span class="hs-comment">-- These are for the &quot;blocked&quot; equalities, as described in TcCanonical</span><span>
</span><span id="line-1753"></span><span class="hs-comment">-- Note [Equalities with incompatible kinds], wrinkle (2). There should</span><span>
</span><span id="line-1754"></span><span class="hs-comment">-- always be another unsolved wanted around, which will ordinarily suppress</span><span>
</span><span id="line-1755"></span><span class="hs-comment">-- this message. But this can still be printed out with -fdefer-type-errors</span><span>
</span><span id="line-1756"></span><span class="hs-comment">-- (sigh), so we must produce a message.</span><span>
</span><span id="line-1757"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkBlockedEqErr"><span class="hs-identifier hs-type">mkBlockedEqErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1758"></span><span id="mkBlockedEqErr"><span class="annot"><span class="annottext">mkBlockedEqErr :: ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkBlockedEqErr"><span class="hs-identifier hs-var hs-var">mkBlockedEqErr</span></a></span></span><span> </span><span id="local-6989586621681342671"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342671"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342670"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342670"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342671"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342670"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Report
</span><a href="#local-6989586621681342669"><span class="hs-identifier hs-var">report</span></a></span><span>
</span><span id="line-1759"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1760"></span><span>    </span><span id="local-6989586621681342669"><span class="annot"><span class="annottext">report :: Report
</span><a href="#local-6989586621681342669"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342668"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1761"></span><span>    </span><span id="local-6989586621681342668"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681342668"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot use equality for substitution:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1762"></span><span>                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342670"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1763"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Doing so would be ill-kinded.&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1764"></span><span>          </span><span class="hs-comment">-- This is a terrible message. Perhaps worse, if the user</span><span>
</span><span id="line-1765"></span><span>          </span><span class="hs-comment">-- has -fprint-explicit-kinds on, they will see that the two</span><span>
</span><span id="line-1766"></span><span>          </span><span class="hs-comment">-- sides have the same kind, as there is an invisible cast.</span><span>
</span><span id="line-1767"></span><span>          </span><span class="hs-comment">-- I really don't know how to do better.</span><span>
</span><span id="line-1768"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkBlockedEqErr"><span class="hs-identifier hs-var">mkBlockedEqErr</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkBlockedEqErr no constraints&quot;</span></span><span>
</span><span id="line-1769"></span><span>
</span><span id="line-1770"></span><span class="hs-comment">{-
Note [Suppress redundant givens during error reporting]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When GHC is unable to solve a constraint and prints out an error message, it
will print out what given constraints are in scope to provide some context to
the programmer. But we shouldn't print out /every/ given, since some of them
are not terribly helpful to diagnose type errors. Consider this example:

  foo :: Int :~: Int -&gt; a :~: b -&gt; a :~: c
  foo Refl Refl = Refl

When reporting that GHC can't solve (a ~ c), there are two givens in scope:
(Int ~ Int) and (a ~ b). But (Int ~ Int) is trivially soluble (i.e.,
redundant), so it's not terribly useful to report it in an error message.
To accomplish this, we discard any Implications that do not bind any
equalities by filtering the `givens` selected in `misMatchOrCND` (based on
the `ic_given_eqs` field of the Implication). Note that we discard givens
that have no equalities whatsoever, but we want to keep ones with only *local*
equalities, as these may be helpful to the user in understanding what went
wrong.

But this is not enough to avoid all redundant givens! Consider this example,
from #15361:

  goo :: forall (a :: Type) (b :: Type) (c :: Type).
         a :~~: b -&gt; a :~~: c
  goo HRefl = HRefl

Matching on HRefl brings the /single/ given (* ~ *, a ~ b) into scope.
The (* ~ *) part arises due the kinds of (:~~:) being unified. More
importantly, (* ~ *) is redundant, so we'd like not to report it. However,
the Implication (* ~ *, a ~ b) /does/ bind an equality (as reported by its
ic_given_eqs field), so the test above will keep it wholesale.

To refine this given, we apply mkMinimalBySCs on it to extract just the (a ~ b)
part. This works because mkMinimalBySCs eliminates reflexive equalities in
addition to superclasses (see Note [Remove redundant provided dicts]
in GHC.Tc.TyCl.PatSyn).
-}</span><span>
</span><span id="line-1809"></span><span>
</span><span id="line-1810"></span><span class="annot"><a href="GHC.Tc.Errors.html#extraTyVarEqInfo"><span class="hs-identifier hs-type">extraTyVarEqInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1811"></span><span class="hs-comment">-- Add on extra info about skolem constants</span><span>
</span><span id="line-1812"></span><span class="hs-comment">-- NB: The types themselves are already tidied</span><span>
</span><span id="line-1813"></span><span id="extraTyVarEqInfo"><span class="annot"><span class="annottext">extraTyVarEqInfo :: ReportErrCtxt -&gt; TcId -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#extraTyVarEqInfo"><span class="hs-identifier hs-var hs-var">extraTyVarEqInfo</span></a></span></span><span> </span><span id="local-6989586621681342667"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342667"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342666"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342666"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621681342665"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342665"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1814"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcId -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#extraTyVarInfo"><span class="hs-identifier hs-var">extraTyVarInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342667"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342666"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="#local-6989586621681342663"><span class="hs-identifier hs-var">ty_extra</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342665"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1815"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1816"></span><span>    </span><span id="local-6989586621681342663"><span class="annot"><span class="annottext">ty_extra :: Type -&gt; SDoc
</span><a href="#local-6989586621681342663"><span class="hs-identifier hs-var hs-var">ty_extra</span></a></span></span><span> </span><span id="local-6989586621681342662"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342662"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (TcId, Coercion)
</span><a href="GHC.Tc.Utils.TcType.html#tcGetCastedTyVar_maybe"><span class="hs-identifier hs-var">tcGetCastedTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342662"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1817"></span><span>                    </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342661"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342661"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TcId -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#extraTyVarInfo"><span class="hs-identifier hs-var">extraTyVarInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342667"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342661"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1818"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (TcId, Coercion)
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1819"></span><span>
</span><span id="line-1820"></span><span class="annot"><a href="GHC.Tc.Errors.html#extraTyVarInfo"><span class="hs-identifier hs-type">extraTyVarInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1821"></span><span id="extraTyVarInfo"><span class="annot"><span class="annottext">extraTyVarInfo :: ReportErrCtxt -&gt; TcId -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#extraTyVarInfo"><span class="hs-identifier hs-var hs-var">extraTyVarInfo</span></a></span></span><span> </span><span id="local-6989586621681342660"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342660"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342659"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342659"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1822"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isTyVar</span><span> </span><span class="hs-identifier">tv</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">tv</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1823"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; TcTyVarDetails
</span><a href="GHC.Types.Var.html#tcTyVarDetails"><span class="hs-identifier hs-var">tcTyVarDetails</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342659"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1824"></span><span>          </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#SkolemTv"><span class="hs-identifier hs-type">SkolemTv</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [TcId] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprSkols"><span class="hs-identifier hs-var">pprSkols</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342660"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342659"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1825"></span><span>          </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-type">RuntimeUnk</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342659"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is an interactive-debugger skolem&quot;</span></span><span>
</span><span id="line-1826"></span><span>          </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#MetaTv"><span class="hs-identifier hs-type">MetaTv</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1827"></span><span>
</span><span id="line-1828"></span><span class="annot"><a href="GHC.Tc.Errors.html#suggestAddSig"><span class="hs-identifier hs-type">suggestAddSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1829"></span><span class="hs-comment">-- See Note [Suggest adding a type signature]</span><span>
</span><span id="line-1830"></span><span id="suggestAddSig"><span class="annot"><span class="annottext">suggestAddSig :: ReportErrCtxt -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#suggestAddSig"><span class="hs-identifier hs-var hs-var">suggestAddSig</span></a></span></span><span> </span><span id="local-6989586621681342656"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342656"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342655"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342655"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342654"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342654"><span class="hs-identifier hs-var">_ty2</span></a></span></span><span>
</span><span id="line-1831"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681342653"><span class="hs-identifier hs-var">inferred_bndrs</span></a></span><span>   </span><span class="hs-comment">-- No let-bound inferred binders in context</span><span>
</span><span id="line-1832"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1833"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681342652"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342652"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681342653"><span class="hs-identifier hs-var">inferred_bndrs</span></a></span><span>
</span><span id="line-1834"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Possible fix: add a type signature for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342652"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1835"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1836"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Possible fix: add type signatures for some or all of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681342653"><span class="hs-identifier hs-var">inferred_bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1837"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1838"></span><span>    </span><span id="local-6989586621681342653"><span class="annot"><span class="annottext">inferred_bndrs :: [Name]
</span><a href="#local-6989586621681342653"><span class="hs-identifier hs-var hs-var">inferred_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe TcId
</span><a href="GHC.Tc.Utils.TcType.html#tcGetTyVar_maybe"><span class="hs-identifier hs-var">tcGetTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342655"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1839"></span><span>                       </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342650"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342650"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isSkolemTyVar"><span class="hs-identifier hs-var">isSkolemTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342650"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; Bool -&gt; TcId -&gt; [Name]
</span><a href="#local-6989586621681342649"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342656"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342650"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1840"></span><span>                       </span><span class="annot"><span class="annottext">Maybe TcId
</span><span class="hs-identifier">_</span></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1841"></span><span>
</span><span id="line-1842"></span><span>    </span><span class="hs-comment">-- 'find' returns the binders of an InferSkol for 'tv',</span><span>
</span><span id="line-1843"></span><span>    </span><span class="hs-comment">-- provided there is an intervening implication with</span><span>
</span><span id="line-1844"></span><span>    </span><span class="hs-comment">-- ic_given_eqs /= NoGivenEqs (i.e. a GADT match)</span><span>
</span><span id="line-1845"></span><span>    </span><span id="local-6989586621681342649"><span class="annot"><span class="annottext">find :: [Implication] -&gt; Bool -&gt; TcId -&gt; [Name]
</span><a href="#local-6989586621681342649"><span class="hs-identifier hs-var hs-var">find</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TcId
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1846"></span><span>    </span><span class="annot"><a href="#local-6989586621681342649"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342645"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342645"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681342644"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342644"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681342643"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342643"><span class="hs-identifier hs-var">seen_eqs</span></a></span></span><span> </span><span id="local-6989586621681342642"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342642"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1847"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342642"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342645"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-1848"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InferSkol"><span class="hs-identifier hs-type">InferSkol</span></a></span><span> </span><span id="local-6989586621681342640"><span class="annot"><span class="annottext">[(Name, Type)]
</span><a href="#local-6989586621681342640"><span class="hs-identifier hs-var">prs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342645"><span class="hs-identifier hs-var">implic</span></a></span><span>
</span><span id="line-1849"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342643"><span class="hs-identifier hs-var">seen_eqs</span></a></span><span>
</span><span id="line-1850"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Type)]
</span><a href="#local-6989586621681342640"><span class="hs-identifier hs-var">prs</span></a></span><span>
</span><span id="line-1851"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1852"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; Bool -&gt; TcId -&gt; [Name]
</span><a href="#local-6989586621681342649"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342644"><span class="hs-identifier hs-var">implics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342643"><span class="hs-identifier hs-var">seen_eqs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#ic_given_eqs"><span class="hs-identifier hs-var">ic_given_eqs</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342645"><span class="hs-identifier hs-var">implic</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342642"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1853"></span><span>
</span><span id="line-1854"></span><span class="hs-comment">--------------------</span><span>
</span><span id="line-1855"></span><span class="annot"><a href="GHC.Tc.Errors.html#misMatchMsg"><span class="hs-identifier hs-type">misMatchMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#Report"><span class="hs-identifier hs-type">Report</span></a></span><span>
</span><span id="line-1856"></span><span class="hs-comment">-- Types are already tidy</span><span>
</span><span id="line-1857"></span><span class="hs-comment">-- If oriented then ty1 is actual, ty2 is expected</span><span>
</span><span id="line-1858"></span><span id="misMatchMsg"><span class="annot"><span class="annottext">misMatchMsg :: ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; Report
</span><a href="GHC.Tc.Errors.html#misMatchMsg"><span class="hs-identifier hs-var hs-var">misMatchMsg</span></a></span></span><span> </span><span id="local-6989586621681342639"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342639"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342638"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342638"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342637"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342637"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342636"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342636"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1859"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1860"></span><span>    </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342635"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1861"></span><span>    </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprWithExplicitKindsWhenMismatch"><span class="hs-identifier hs-var">pprWithExplicitKindsWhenMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342637"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342636"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342635"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1862"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342635"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1863"></span><span>            </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#tk_eq_msg"><span class="hs-identifier hs-var">tk_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342639"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342638"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342637"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342636"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342635"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-1864"></span><span>            </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#KindEqOrigin"><span class="hs-identifier hs-type">KindEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#tk_eq_msg"><span class="hs-identifier hs-var">tk_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342639"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342638"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342637"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342636"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342635"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-1865"></span><span>            </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ct -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#headline_eq_msg"><span class="hs-identifier hs-var">headline_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342638"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342637"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342636"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1866"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#sameOccExtra"><span class="hs-identifier hs-var">sameOccExtra</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342636"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342637"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1867"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1868"></span><span>    </span><span id="local-6989586621681342635"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342635"><span class="hs-identifier hs-var hs-var">orig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342638"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1869"></span><span>
</span><span id="line-1870"></span><span class="annot"><a href="GHC.Tc.Errors.html#headline_eq_msg"><span class="hs-identifier hs-type">headline_eq_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1871"></span><span class="hs-comment">-- Generates the main &quot;Could't match 't1' against 't2'</span><span>
</span><span id="line-1872"></span><span class="hs-comment">-- headline message</span><span>
</span><span id="line-1873"></span><span id="headline_eq_msg"><span class="annot"><span class="annottext">headline_eq_msg :: Bool -&gt; Ct -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#headline_eq_msg"><span class="hs-identifier hs-var hs-var">headline_eq_msg</span></a></span></span><span> </span><span id="local-6989586621681342630"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342630"><span class="hs-identifier hs-var">add_ea</span></a></span></span><span> </span><span id="local-6989586621681342629"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342629"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342628"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342627"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1874"></span><span>
</span><span id="line-1875"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedRuntimeRep"><span class="hs-identifier hs-var">isLiftedRuntimeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedRuntimeRep"><span class="hs-identifier hs-var">isUnliftedRuntimeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-1876"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedRuntimeRep"><span class="hs-identifier hs-var">isLiftedRuntimeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedRuntimeRep"><span class="hs-identifier hs-var">isUnliftedRuntimeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-1877"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedLevity"><span class="hs-identifier hs-var">isLiftedLevity</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedLevity"><span class="hs-identifier hs-var">isUnliftedLevity</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-1878"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedLevity"><span class="hs-identifier hs-var">isLiftedLevity</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedLevity"><span class="hs-identifier hs-var">isUnliftedLevity</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1879"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Couldn't match a lifted type with an unlifted type&quot;</span></span><span>
</span><span id="line-1880"></span><span>
</span><span id="line-1881"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isAtomicTy"><span class="hs-identifier hs-var">isAtomicTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isAtomicTy"><span class="hs-identifier hs-var">isAtomicTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1882"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Print with quotes</span><span>
</span><span id="line-1883"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342621"><span class="hs-identifier hs-var">herald1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1884"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342620"><span class="hs-identifier hs-var">padding</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1885"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342619"><span class="hs-identifier hs-var">herald2</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1886"></span><span>
</span><span id="line-1887"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1888"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Print with vertical layout</span><span>
</span><span id="line-1889"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342621"><span class="hs-identifier hs-var">herald1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342628"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1890"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342620"><span class="hs-identifier hs-var">padding</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1891"></span><span>           </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342619"><span class="hs-identifier hs-var">herald2</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342627"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1892"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1893"></span><span>    </span><span id="local-6989586621681342621"><span class="annot"><span class="annottext">herald1 :: String
</span><a href="#local-6989586621681342621"><span class="hs-identifier hs-var hs-var">herald1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621681342618"><span class="hs-identifier hs-var">conc</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Couldn't match&quot;</span></span><span>
</span><span id="line-1894"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342617"><span class="hs-identifier hs-var">is_repr</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;representation of&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1895"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342630"><span class="hs-identifier hs-var">add_ea</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected&quot;</span></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1896"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342616"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1897"></span><span>    </span><span id="local-6989586621681342619"><span class="annot"><span class="annottext">herald2 :: String
</span><a href="#local-6989586621681342619"><span class="hs-identifier hs-var hs-var">herald2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621681342618"><span class="hs-identifier hs-var">conc</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with&quot;</span></span><span>
</span><span id="line-1898"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342617"><span class="hs-identifier hs-var">is_repr</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;that of&quot;</span></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1899"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342630"><span class="hs-identifier hs-var">add_ea</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;actual &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342616"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1900"></span><span>
</span><span id="line-1901"></span><span>    </span><span id="local-6989586621681342620"><span class="annot"><span class="annottext">padding :: Int
</span><a href="#local-6989586621681342620"><span class="hs-identifier hs-var hs-var">padding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342621"><span class="hs-identifier hs-var">herald1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342619"><span class="hs-identifier hs-var">herald2</span></a></span><span>
</span><span id="line-1902"></span><span>
</span><span id="line-1903"></span><span>    </span><span id="local-6989586621681342617"><span class="annot"><span class="annottext">is_repr :: Bool
</span><a href="#local-6989586621681342617"><span class="hs-identifier hs-var hs-var">is_repr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEqRel"><span class="hs-identifier hs-var">ctEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342629"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1904"></span><span>
</span><span id="line-1905"></span><span>    </span><span id="local-6989586621681342616"><span class="annot"><span class="annottext">what :: String
</span><a href="#local-6989586621681342616"><span class="hs-identifier hs-var hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind -&gt; String
</span><a href="GHC.Tc.Errors.html#levelString"><span class="hs-identifier hs-var">levelString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; Maybe TypeOrKind
</span><a href="GHC.Tc.Types.Constraint.html#ctLocTypeOrKind_maybe"><span class="hs-identifier hs-var">ctLocTypeOrKind_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342629"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1906"></span><span>
</span><span id="line-1907"></span><span>    </span><span class="annot"><a href="#local-6989586621681342618"><span class="hs-identifier hs-type">conc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1908"></span><span>    </span><span id="local-6989586621681342618"><span class="annot"><span class="annottext">conc :: [String] -&gt; String
</span><a href="#local-6989586621681342618"><span class="hs-identifier hs-var hs-var">conc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr1"><span class="hs-identifier hs-var">foldr1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="#local-6989586621681342613"><span class="hs-identifier hs-var">add_space</span></a></span><span>
</span><span id="line-1909"></span><span>
</span><span id="line-1910"></span><span>    </span><span class="annot"><a href="#local-6989586621681342613"><span class="hs-identifier hs-type">add_space</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1911"></span><span>    </span><span id="local-6989586621681342613"><span class="annot"><span class="annottext">add_space :: String -&gt; String -&gt; String
</span><a href="#local-6989586621681342613"><span class="hs-identifier hs-var hs-var">add_space</span></a></span></span><span> </span><span id="local-6989586621681342612"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342612"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621681342611"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342611"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342612"><span class="hs-identifier hs-var">s1</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342611"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-1912"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342611"><span class="hs-identifier hs-var">s2</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342612"><span class="hs-identifier hs-var">s1</span></a></span><span>
</span><span id="line-1913"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342612"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342611"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1914"></span><span>
</span><span id="line-1915"></span><span>
</span><span id="line-1916"></span><span class="annot"><a href="GHC.Tc.Errors.html#tk_eq_msg"><span class="hs-identifier hs-type">tk_eq_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span>
</span><span id="line-1917"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1918"></span><span id="tk_eq_msg"><span class="annot"><span class="annottext">tk_eq_msg :: ReportErrCtxt -&gt; Ct -&gt; Type -&gt; Type -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#tk_eq_msg"><span class="hs-identifier hs-var hs-var">tk_eq_msg</span></a></span></span><span> </span><span id="local-6989586621681342610"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342610"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342609"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342609"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342608"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342608"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342607"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342607"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span id="local-6989586621681342606"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342606"><span class="hs-identifier hs-var">orig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uo_actual :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_actual"><span class="hs-identifier hs-var">uo_actual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342604"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span></span><span>
</span><span id="line-1919"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uo_expected :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_expected"><span class="hs-identifier hs-var">uo_expected</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342602"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span></span><span>
</span><span id="line-1920"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uo_thing :: CtOrigin -&gt; Maybe SDoc
</span><a href="GHC.Tc.Types.Origin.html#uo_thing"><span class="hs-identifier hs-var">uo_thing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342600"><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342600"><span class="hs-identifier hs-var">mb_thing</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1921"></span><span>  </span><span class="hs-comment">-- We can use the TypeEqOrigin to</span><span>
</span><span id="line-1922"></span><span>  </span><span class="hs-comment">-- improve the error message quite a lot</span><span>
</span><span id="line-1923"></span><span>
</span><span id="line-1924"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedTypeKind"><span class="hs-identifier hs-var">isUnliftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedTypeKind"><span class="hs-identifier hs-var">isLiftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-1925"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expecting a lifted type, but&quot;</span></span><span>
</span><span id="line-1926"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc -&gt; SDoc -&gt; SDoc -&gt; SDoc
</span><a href="#local-6989586621681342598"><span class="hs-identifier hs-var">thing_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342600"><span class="hs-identifier hs-var">mb_thing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unlifted&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1927"></span><span>
</span><span id="line-1928"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLiftedTypeKind"><span class="hs-identifier hs-var">isLiftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedTypeKind"><span class="hs-identifier hs-var">isUnliftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-1929"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expecting an unlifted type, but&quot;</span></span><span>
</span><span id="line-1930"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc -&gt; SDoc -&gt; SDoc -&gt; SDoc
</span><a href="#local-6989586621681342598"><span class="hs-identifier hs-var">thing_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342600"><span class="hs-identifier hs-var">mb_thing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lifted&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1931"></span><span>
</span><span id="line-1932"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#tcIsLiftedTypeKind"><span class="hs-identifier hs-var">tcIsLiftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-1933"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342596"><span class="hs-identifier hs-var">maybe_num_args_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1934"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected a type, but&quot;</span></span><span>
</span><span id="line-1935"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342600"><span class="hs-identifier hs-var">mb_thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1936"></span><span>            </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;found something with kind&quot;</span></span><span>
</span><span id="line-1937"></span><span>            </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342595"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342595"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342595"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has kind&quot;</span></span><span>
</span><span id="line-1938"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprWithTYPE"><span class="hs-identifier hs-var">pprWithTYPE</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1939"></span><span>
</span><span id="line-1940"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342594"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342594"><span class="hs-identifier hs-var">nargs_msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342593"><span class="hs-identifier hs-var">num_args_msg</span></a></span><span>
</span><span id="line-1941"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342594"><span class="hs-identifier hs-var">nargs_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1942"></span><span>    </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Maybe Ct -&gt; TypeOrKind -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-var">mk_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342610"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342609"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342591"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342606"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-1943"></span><span>
</span><span id="line-1944"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- pprTrace &quot;check&quot; (ppr ea_looks_same $$ ppr exp $$ ppr act $$ ppr ty1 $$ ppr ty2) $</span><span>
</span><span id="line-1945"></span><span>    </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Errors.html#ea_looks_same"><span class="hs-identifier hs-var">ea_looks_same</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342608"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342607"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-1946"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Maybe Ct -&gt; TypeOrKind -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-var">mk_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342610"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342609"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342591"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342606"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-1947"></span><span>
</span><span id="line-1948"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-comment">-- The mismatched types are /inside/ exp and act</span><span>
</span><span id="line-1949"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ct -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#headline_eq_msg"><span class="hs-identifier hs-var">headline_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342609"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342608"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342607"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1950"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Maybe Ct -&gt; TypeOrKind -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-var">mk_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342610"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342591"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342606"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1951"></span><span>
</span><span id="line-1952"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1953"></span><span>    </span><span id="local-6989586621681342589"><span class="annot"><span class="annottext">ct_loc :: CtLoc
</span><a href="#local-6989586621681342589"><span class="hs-identifier hs-var hs-var">ct_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342609"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1954"></span><span>    </span><span id="local-6989586621681342591"><span class="annot"><span class="annottext">level :: TypeOrKind
</span><a href="#local-6989586621681342591"><span class="hs-identifier hs-var hs-var">level</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; Maybe TypeOrKind
</span><a href="GHC.Tc.Types.Constraint.html#ctLocTypeOrKind_maybe"><span class="hs-identifier hs-var">ctLocTypeOrKind_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342589"><span class="hs-identifier hs-var">ct_loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-1955"></span><span>
</span><span id="line-1956"></span><span>    </span><span id="local-6989586621681342598"><span class="annot"><span class="annottext">thing_msg :: Maybe SDoc -&gt; SDoc -&gt; SDoc -&gt; SDoc
</span><a href="#local-6989586621681342598"><span class="hs-identifier hs-var hs-var">thing_msg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342588"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342588"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span>  </span><span id="local-6989586621681342587"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342587"><span class="hs-identifier hs-var">levity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342588"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342587"><span class="hs-identifier hs-var">levity</span></a></span><span>
</span><span id="line-1957"></span><span>    </span><span class="annot"><a href="#local-6989586621681342598"><span class="hs-identifier hs-var">thing_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>      </span><span id="local-6989586621681342586"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342586"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621681342585"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342585"><span class="hs-identifier hs-var">levity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;got&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342586"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342585"><span class="hs-identifier hs-var">levity</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span>
</span><span id="line-1958"></span><span>
</span><span id="line-1959"></span><span>    </span><span id="local-6989586621681342593"><span class="annot"><span class="annottext">num_args_msg :: Maybe SDoc
</span><a href="#local-6989586621681342593"><span class="hs-identifier hs-var hs-var">num_args_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342591"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1960"></span><span>      </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span>
</span><span id="line-1961"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isMetaTyVarTy"><span class="hs-identifier hs-var">isMetaTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isMetaTyVarTy"><span class="hs-identifier hs-var">isMetaTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1962"></span><span>           </span><span class="hs-comment">-- if one is a meta-tyvar, then it's possible that the user</span><span>
</span><span id="line-1963"></span><span>           </span><span class="hs-comment">-- has asked for something impredicative, and we couldn't unify.</span><span>
</span><span id="line-1964"></span><span>           </span><span class="hs-comment">-- Don't bother with counting arguments.</span><span>
</span><span id="line-1965"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342583"><span class="annot"><span class="annottext">n_act :: Int
</span><a href="#local-6989586621681342583"><span class="hs-identifier hs-var hs-var">n_act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="#local-6989586621681342582"><span class="hs-identifier hs-var">count_args</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342604"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-1966"></span><span>               </span><span id="local-6989586621681342581"><span class="annot"><span class="annottext">n_exp :: Int
</span><a href="#local-6989586621681342581"><span class="hs-identifier hs-var hs-var">n_exp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="#local-6989586621681342582"><span class="hs-identifier hs-var">count_args</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342602"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-1967"></span><span>           </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342583"><span class="hs-identifier hs-var">n_act</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342581"><span class="hs-identifier hs-var">n_exp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1968"></span><span>             </span><span id="local-6989586621681342580"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342580"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342580"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>   </span><span class="hs-comment">-- we don't know how many args there are, so don't</span><span>
</span><span id="line-1969"></span><span>                         </span><span class="hs-comment">-- recommend removing args that aren't</span><span>
</span><span id="line-1970"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342579"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342579"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342600"><span class="hs-identifier hs-var">mb_thing</span></a></span><span>
</span><span id="line-1971"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expecting&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#speakN"><span class="hs-identifier hs-var">speakN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#abs"><span class="hs-identifier hs-var">abs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342580"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-1972"></span><span>                         </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342576"><span class="hs-identifier hs-var">more</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342579"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1973"></span><span>               </span><span class="hs-keyword">where</span><span>
</span><span id="line-1974"></span><span>                 </span><span id="local-6989586621681342576"><span class="annot"><span class="annottext">more :: SDoc
</span><a href="#local-6989586621681342576"><span class="hs-identifier hs-var hs-var">more</span></a></span></span><span>
</span><span id="line-1975"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342580"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;more argument to&quot;</span></span><span>
</span><span id="line-1976"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;more arguments to&quot;</span></span><span>  </span><span class="hs-comment">-- n &gt; 1</span><span>
</span><span id="line-1977"></span><span>             </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1978"></span><span>
</span><span id="line-1979"></span><span>      </span><span class="annot"><span class="annottext">TypeOrKind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1980"></span><span>
</span><span id="line-1981"></span><span>    </span><span id="local-6989586621681342596"><span class="annot"><span class="annottext">maybe_num_args_msg :: SDoc
</span><a href="#local-6989586621681342596"><span class="hs-identifier hs-var hs-var">maybe_num_args_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342593"><span class="hs-identifier hs-var">num_args_msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1982"></span><span>
</span><span id="line-1983"></span><span>    </span><span id="local-6989586621681342582"><span class="annot"><span class="annottext">count_args :: Type -&gt; Int
</span><a href="#local-6989586621681342582"><span class="hs-identifier hs-var hs-var">count_args</span></a></span></span><span> </span><span id="local-6989586621681342575"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342575"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; Int
</span><a href="GHC.Utils.Misc.html#count"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoBinder -&gt; Bool
</span><a href="GHC.Core.TyCo.Rep.html#isVisibleBinder"><span class="hs-identifier hs-var">isVisibleBinder</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([TyCoBinder], Type)
</span><a href="GHC.Core.Type.html#splitPiTys"><span class="hs-identifier hs-var">splitPiTys</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342575"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1984"></span><span>
</span><span id="line-1985"></span><span class="annot"><a href="GHC.Tc.Errors.html#tk_eq_msg"><span class="hs-identifier hs-var">tk_eq_msg</span></a></span><span> </span><span id="local-6989586621681342571"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342571"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342570"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342570"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342569"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342569"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342568"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342568"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-1986"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#KindEqOrigin"><span class="hs-identifier hs-type">KindEqOrigin</span></a></span><span> </span><span id="local-6989586621681342567"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342567"><span class="hs-identifier hs-var">cty1</span></a></span></span><span> </span><span id="local-6989586621681342566"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342566"><span class="hs-identifier hs-var">cty2</span></a></span></span><span> </span><span id="local-6989586621681342565"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342565"><span class="hs-identifier hs-var">sub_o</span></a></span></span><span> </span><span id="local-6989586621681342564"><span class="annot"><span class="annottext">Maybe TypeOrKind
</span><a href="#local-6989586621681342564"><span class="hs-identifier hs-var">mb_sub_t_or_k</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1987"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ct -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#headline_eq_msg"><span class="hs-identifier hs-var">headline_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342570"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342569"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342568"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1988"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342563"><span class="hs-identifier hs-var">supplementary_msg</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1989"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1990"></span><span>    </span><span id="local-6989586621681342562"><span class="annot"><span class="annottext">sub_t_or_k :: TypeOrKind
</span><a href="#local-6989586621681342562"><span class="hs-identifier hs-var hs-var">sub_t_or_k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe TypeOrKind
</span><a href="#local-6989586621681342564"><span class="hs-identifier hs-var">mb_sub_t_or_k</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-1991"></span><span>    </span><span id="local-6989586621681342561"><span class="annot"><span class="annottext">sub_whats :: SDoc
</span><a href="#local-6989586621681342561"><span class="hs-identifier hs-var hs-var">sub_whats</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeOrKind -&gt; String
</span><a href="GHC.Tc.Errors.html#levelString"><span class="hs-identifier hs-var">levelString</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342562"><span class="hs-identifier hs-var">sub_t_or_k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'s'</span></span><span>
</span><span id="line-1992"></span><span>                 </span><span class="hs-comment">-- &quot;types&quot; or &quot;kinds&quot;</span><span>
</span><span id="line-1993"></span><span>
</span><span id="line-1994"></span><span>    </span><span id="local-6989586621681342563"><span class="annot"><span class="annottext">supplementary_msg :: SDoc
</span><a href="#local-6989586621681342563"><span class="hs-identifier hs-var hs-var">supplementary_msg</span></a></span></span><span>
</span><span id="line-1995"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintExplicitCoercions"><span class="hs-identifier hs-var">sdocPrintExplicitCoercions</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681342558"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342558"><span class="hs-identifier hs-var">printExplicitCoercions</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1996"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342558"><span class="hs-identifier hs-var">printExplicitCoercions</span></a></span><span>
</span><span id="line-1997"></span><span>           </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342567"><span class="hs-identifier hs-var">cty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#pickyEqType"><span class="hs-operator hs-var">`pickyEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342566"><span class="hs-identifier hs-var">cty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1998"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When matching&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342561"><span class="hs-identifier hs-var">sub_whats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1999"></span><span>                          </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342567"><span class="hs-identifier hs-var">cty1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2000"></span><span>                                   </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#tcTypeKind"><span class="hs-identifier hs-var">tcTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342567"><span class="hs-identifier hs-var">cty1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2001"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342566"><span class="hs-identifier hs-var">cty2</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2002"></span><span>                                   </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#tcTypeKind"><span class="hs-identifier hs-var">tcTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342566"><span class="hs-identifier hs-var">cty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2003"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TypeOrKind -&gt; Type -&gt; Type -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_supplementary_ea_msg"><span class="hs-identifier hs-var">mk_supplementary_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342571"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342562"><span class="hs-identifier hs-var">sub_t_or_k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342567"><span class="hs-identifier hs-var">cty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342566"><span class="hs-identifier hs-var">cty2</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342565"><span class="hs-identifier hs-var">sub_o</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2004"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When matching the kind of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342567"><span class="hs-identifier hs-var">cty1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2005"></span><span>
</span><span id="line-2006"></span><span class="annot"><a href="GHC.Tc.Errors.html#tk_eq_msg"><span class="hs-identifier hs-var">tk_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typeeq_mismatch_msg&quot;</span></span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span class="annot"><a href="GHC.Tc.Errors.html#ea_looks_same"><span class="hs-identifier hs-type">ea_looks_same</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2009"></span><span class="hs-comment">-- True if the faulting types (ty1, ty2) look the same as</span><span>
</span><span id="line-2010"></span><span class="hs-comment">-- the expected/actual types (exp, act).</span><span>
</span><span id="line-2011"></span><span class="hs-comment">-- If so, we don't want to redundantly report the latter</span><span>
</span><span id="line-2012"></span><span id="ea_looks_same"><span class="annot"><span class="annottext">ea_looks_same :: Type -&gt; Type -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Errors.html#ea_looks_same"><span class="hs-identifier hs-var hs-var">ea_looks_same</span></a></span></span><span> </span><span id="local-6989586621681342556"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342556"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342555"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342555"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span id="local-6989586621681342554"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342554"><span class="hs-identifier hs-var">exp</span></a></span></span><span> </span><span id="local-6989586621681342553"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342553"><span class="hs-identifier hs-var">act</span></a></span></span><span>
</span><span id="line-2013"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342553"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342552"><span class="hs-operator hs-var">`looks_same`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342556"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342554"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342552"><span class="hs-operator hs-var">`looks_same`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342555"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-2014"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342554"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342552"><span class="hs-operator hs-var">`looks_same`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342556"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342553"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342552"><span class="hs-operator hs-var">`looks_same`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342555"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2015"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2016"></span><span>    </span><span id="local-6989586621681342552"><span class="annot"><span class="annottext">looks_same :: Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342552"><span class="hs-identifier hs-var hs-var">looks_same</span></a></span></span><span> </span><span id="local-6989586621681342551"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342551"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681342550"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342550"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342551"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#pickyEqType"><span class="hs-operator hs-var">`pickyEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342550"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2017"></span><span>                    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342551"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Builtin.Types.html#liftedTypeKind"><span class="hs-identifier hs-var">liftedTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342550"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Builtin.Types.html#liftedTypeKind"><span class="hs-identifier hs-var">liftedTypeKind</span></a></span><span>
</span><span id="line-2018"></span><span>      </span><span class="hs-comment">-- pickyEqType is sensitive to synonyms, so only replies True</span><span>
</span><span id="line-2019"></span><span>      </span><span class="hs-comment">-- when the types really look the same.  However,</span><span>
</span><span id="line-2020"></span><span>      </span><span class="hs-comment">-- (TYPE 'LiftedRep) and Type both print the same way.</span><span>
</span><span id="line-2021"></span><span>
</span><span id="line-2022"></span><span class="annot"><a href="GHC.Tc.Errors.html#mk_supplementary_ea_msg"><span class="hs-identifier hs-type">mk_supplementary_ea_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span>
</span><span id="line-2023"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2024"></span><span id="mk_supplementary_ea_msg"><span class="annot"><span class="annottext">mk_supplementary_ea_msg :: ReportErrCtxt -&gt; TypeOrKind -&gt; Type -&gt; Type -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_supplementary_ea_msg"><span class="hs-identifier hs-var hs-var">mk_supplementary_ea_msg</span></a></span></span><span> </span><span id="local-6989586621681342548"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342548"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342547"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342547"><span class="hs-identifier hs-var">level</span></a></span></span><span> </span><span id="local-6989586621681342546"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342546"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342545"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342545"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span id="local-6989586621681342544"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342544"><span class="hs-identifier hs-var">orig</span></a></span></span><span>
</span><span id="line-2025"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uo_expected :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_expected"><span class="hs-identifier hs-var">uo_expected</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342543"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342543"><span class="hs-identifier hs-var">exp</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uo_actual :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_actual"><span class="hs-identifier hs-var">uo_actual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342542"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342542"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342544"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-2026"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Errors.html#ea_looks_same"><span class="hs-identifier hs-var">ea_looks_same</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342546"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342545"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342543"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342542"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2027"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Maybe Ct -&gt; TypeOrKind -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-var">mk_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342548"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342547"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342544"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-2028"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2029"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2030"></span><span>
</span><span id="line-2031"></span><span class="annot"><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-type">mk_ea_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2032"></span><span class="hs-comment">-- Constructs a &quot;Couldn't match&quot; message</span><span>
</span><span id="line-2033"></span><span class="hs-comment">-- The (Maybe Ct) says whether this is the main top-level message (Just)</span><span>
</span><span id="line-2034"></span><span class="hs-comment">--     or a supplementary message (Nothing)</span><span>
</span><span id="line-2035"></span><span id="mk_ea_msg"><span class="annot"><span class="annottext">mk_ea_msg :: ReportErrCtxt -&gt; Maybe Ct -&gt; TypeOrKind -&gt; CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-var hs-var">mk_ea_msg</span></a></span></span><span> </span><span id="local-6989586621681342541"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342541"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342540"><span class="annot"><span class="annottext">Maybe Ct
</span><a href="#local-6989586621681342540"><span class="hs-identifier hs-var">at_top</span></a></span></span><span> </span><span id="local-6989586621681342539"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342539"><span class="hs-identifier hs-var">level</span></a></span></span><span>
</span><span id="line-2036"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uo_actual :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_actual"><span class="hs-identifier hs-var">uo_actual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342538"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342538"><span class="hs-identifier hs-var">act</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uo_expected :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_expected"><span class="hs-identifier hs-var">uo_expected</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342537"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uo_thing :: CtOrigin -&gt; Maybe SDoc
</span><a href="GHC.Tc.Types.Origin.html#uo_thing"><span class="hs-identifier hs-var">uo_thing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342536"><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342536"><span class="hs-identifier hs-var">mb_thing</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2037"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342535"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342535"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342536"><span class="hs-identifier hs-var">mb_thing</span></a></span><span>
</span><span id="line-2038"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621681342539"><span class="hs-identifier hs-var">level</span></a></span><span>
</span><span id="line-2039"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342534"><span class="hs-identifier hs-var">kind_desc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2040"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;but&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342535"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has kind&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2041"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342538"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2042"></span><span>
</span><span id="line-2043"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2044"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Ct
</span><a href="#local-6989586621681342540"><span class="hs-identifier hs-var">at_top</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2045"></span><span>              </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342532"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342532"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ct -&gt; Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#headline_eq_msg"><span class="hs-identifier hs-var">headline_eq_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342532"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342538"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-2046"></span><span>              </span><span class="annot"><span class="annottext">Maybe Ct
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342531"><span class="hs-identifier hs-var">supplementary_ea_msg</span></a></span><span>
</span><span id="line-2047"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342530"><span class="hs-identifier hs-var">expand_syns</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342529"><span class="hs-identifier hs-var">expandedTys</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2048"></span><span>
</span><span id="line-2049"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2050"></span><span>    </span><span id="local-6989586621681342531"><span class="annot"><span class="annottext">supplementary_ea_msg :: SDoc
</span><a href="#local-6989586621681342531"><span class="hs-identifier hs-var hs-var">supplementary_ea_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-2051"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  Actual:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342538"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2052"></span><span>
</span><span id="line-2053"></span><span>    </span><span id="local-6989586621681342534"><span class="annot"><span class="annottext">kind_desc :: SDoc
</span><a href="#local-6989586621681342534"><span class="hs-identifier hs-var hs-var">kind_desc</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#tcIsConstraintKind"><span class="hs-identifier hs-var">tcIsConstraintKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a constraint&quot;</span></span><span>
</span><span id="line-2054"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342527"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342527"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#kindRep_maybe"><span class="hs-identifier hs-var">kindRep_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span>  </span><span class="hs-comment">-- TYPE t0</span><span>
</span><span id="line-2055"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#tcIsTyVarTy"><span class="hs-identifier hs-var">tcIsTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342527"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintExplicitRuntimeReps"><span class="hs-identifier hs-var">sdocPrintExplicitRuntimeReps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-2056"></span><span>                                   </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2057"></span><span>                                   </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a type&quot;</span></span><span>
</span><span id="line-2058"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2059"></span><span>
</span><span id="line-2060"></span><span>    </span><span id="local-6989586621681342530"><span class="annot"><span class="annottext">expand_syns :: Bool
</span><a href="#local-6989586621681342530"><span class="hs-identifier hs-var hs-var">expand_syns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Bool
</span><a href="GHC.Tc.Errors.html#cec_expand_syns"><span class="hs-identifier hs-var">cec_expand_syns</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342541"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-2061"></span><span>
</span><span id="line-2062"></span><span>    </span><span id="local-6989586621681342529"><span class="annot"><span class="annottext">expandedTys :: SDoc
</span><a href="#local-6989586621681342529"><span class="hs-identifier hs-var hs-var">expandedTys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342523"><span class="hs-identifier hs-var">expTy1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#pickyEqType"><span class="hs-operator hs-var">`pickyEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342522"><span class="hs-identifier hs-var">expTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#pickyEqType"><span class="hs-operator hs-var">`pickyEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342538"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-2063"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type synonyms expanded:&quot;</span></span><span>
</span><span id="line-2064"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342523"><span class="hs-identifier hs-var">expTy1</span></a></span><span>
</span><span id="line-2065"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  Actual type:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342522"><span class="hs-identifier hs-var">expTy2</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2066"></span><span>
</span><span id="line-2067"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342523"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342523"><span class="hs-identifier hs-var">expTy1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342522"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342522"><span class="hs-identifier hs-var">expTy2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="GHC.Tc.Errors.html#expandSynonymsToMatch"><span class="hs-identifier hs-var">expandSynonymsToMatch</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342537"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342538"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-2068"></span><span>
</span><span id="line-2069"></span><span class="annot"><a href="GHC.Tc.Errors.html#mk_ea_msg"><span class="hs-identifier hs-var">mk_ea_msg</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2070"></span><span>
</span><span id="line-2071"></span><span class="hs-comment">-- | Prints explicit kinds (with @-fprint-explicit-kinds@) in an 'SDoc' when a</span><span>
</span><span id="line-2072"></span><span class="hs-comment">-- type mismatch occurs to due invisible kind arguments.</span><span>
</span><span id="line-2073"></span><span class="hs-comment">--</span><span>
</span><span id="line-2074"></span><span class="hs-comment">-- This function first checks to see if the 'CtOrigin' argument is a</span><span>
</span><span id="line-2075"></span><span class="hs-comment">-- 'TypeEqOrigin', and if so, uses the expected/actual types from that to</span><span>
</span><span id="line-2076"></span><span class="hs-comment">-- check for a kind mismatch (as these types typically have more surrounding</span><span>
</span><span id="line-2077"></span><span class="hs-comment">-- types and are likelier to be able to glean information about whether a</span><span>
</span><span id="line-2078"></span><span class="hs-comment">-- mismatch occurred in an invisible argument position or not). If the</span><span>
</span><span id="line-2079"></span><span class="hs-comment">-- 'CtOrigin' is not a 'TypeEqOrigin', fall back on the actual mismatched types</span><span>
</span><span id="line-2080"></span><span class="hs-comment">-- themselves.</span><span>
</span><span id="line-2081"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprWithExplicitKindsWhenMismatch"><span class="hs-identifier hs-type">pprWithExplicitKindsWhenMismatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span>
</span><span id="line-2082"></span><span>                                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2083"></span><span id="pprWithExplicitKindsWhenMismatch"><span class="annot"><span class="annottext">pprWithExplicitKindsWhenMismatch :: Type -&gt; Type -&gt; CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprWithExplicitKindsWhenMismatch"><span class="hs-identifier hs-var hs-var">pprWithExplicitKindsWhenMismatch</span></a></span></span><span> </span><span id="local-6989586621681342520"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342520"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342519"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342519"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span id="local-6989586621681342518"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342518"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-2084"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprWithExplicitKindsWhen"><span class="hs-identifier hs-var">pprWithExplicitKindsWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342517"><span class="hs-identifier hs-var">show_kinds</span></a></span><span>
</span><span id="line-2085"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2086"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342516"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342516"><span class="hs-identifier hs-var">act_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342515"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342515"><span class="hs-identifier hs-var">exp_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342518"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2087"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uo_actual :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_actual"><span class="hs-identifier hs-var">uo_actual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342514"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342514"><span class="hs-identifier hs-var">act</span></a></span></span><span>
</span><span id="line-2088"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uo_expected :: CtOrigin -&gt; Type
</span><a href="GHC.Tc.Types.Origin.html#uo_expected"><span class="hs-identifier hs-var">uo_expected</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342513"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342513"><span class="hs-identifier hs-var">exp</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342514"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342513"><span class="hs-identifier hs-var">exp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2089"></span><span>      </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span>                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342520"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342519"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2090"></span><span>    </span><span id="local-6989586621681342517"><span class="annot"><span class="annottext">show_kinds :: Bool
</span><a href="#local-6989586621681342517"><span class="hs-identifier hs-var hs-var">show_kinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#tcEqTypeVis"><span class="hs-identifier hs-var">tcEqTypeVis</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342516"><span class="hs-identifier hs-var">act_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342515"><span class="hs-identifier hs-var">exp_ty</span></a></span><span>
</span><span id="line-2091"></span><span>                 </span><span class="hs-comment">-- True when the visible bit of the types look the same,</span><span>
</span><span id="line-2092"></span><span>                 </span><span class="hs-comment">-- so we want to show the kinds in the displayed type</span><span>
</span><span id="line-2093"></span><span>
</span><span id="line-2094"></span><span class="hs-comment">{- Note [Insoluble occurs check]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider [G] a ~ [a],  [W] a ~ [a] (#13674).  The Given is insoluble
so we don't use it for rewriting.  The Wanted is also insoluble, and
we don't solve it from the Given.  It's very confusing to say
    Cannot solve a ~ [a] from given constraints a ~ [a]

And indeed even thinking about the Givens is silly; [W] a ~ [a] is
just as insoluble as Int ~ Bool.

Conclusion: if there's an insoluble occurs check (cteInsolubleOccurs)
then report it directly, not in the &quot;cannot deduce X from Y&quot; form.
This is done in misMatchOrCND (via the insoluble_occurs_check arg)

(NB: there are potentially-soluble ones, like (a ~ F a b), and we don't
want to be as draconian with them.)

Note [Expanding type synonyms to make types similar]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In type error messages, if -fprint-expanded-types is used, we want to expand
type synonyms to make expected and found types as similar as possible, but we
shouldn't expand types too much to make type messages even more verbose and
harder to understand. The whole point here is to make the difference in expected
and found types clearer.

`expandSynonymsToMatch` does this, it takes two types, and expands type synonyms
only as much as necessary. Given two types t1 and t2:

  * If they're already same, it just returns the types.

  * If they're in form `C1 t1_1 .. t1_n` and `C2 t2_1 .. t2_m` (C1 and C2 are
    type constructors), it expands C1 and C2 if they're different type synonyms.
    Then it recursively does the same thing on expanded types. If C1 and C2 are
    same, then it applies the same procedure to arguments of C1 and arguments of
    C2 to make them as similar as possible.

    Most important thing here is to keep number of synonym expansions at
    minimum. For example, if t1 is `T (T3, T5, Int)` and t2 is `T (T5, T3,
    Bool)` where T5 = T4, T4 = T3, ..., T1 = X, it returns `T (T3, T3, Int)` and
    `T (T3, T3, Bool)`.

  * Otherwise types don't have same shapes and so the difference is clearly
    visible. It doesn't do any expansions and show these types.

Note that we only expand top-layer type synonyms. Only when top-layer
constructors are the same we start expanding inner type synonyms.

Suppose top-layer type synonyms of t1 and t2 can expand N and M times,
respectively. If their type-synonym-expanded forms will meet at some point (i.e.
will have same shapes according to `sameShapes` function), it's possible to find
where they meet in O(N+M) top-layer type synonym expansions and O(min(N,M))
comparisons. We first collect all the top-layer expansions of t1 and t2 in two
lists, then drop the prefix of the longer list so that they have same lengths.
Then we search through both lists in parallel, and return the first pair of
types that have same shapes. Inner types of these two types with same shapes
are then expanded using the same algorithm.

In case they don't meet, we return the last pair of types in the lists, which
has top-layer type synonyms completely expanded. (in this case the inner types
are not expanded at all, as the current form already shows the type error)
-}</span><span>
</span><span id="line-2156"></span><span>
</span><span id="line-2157"></span><span class="hs-comment">-- | Expand type synonyms in given types only enough to make them as similar as</span><span>
</span><span id="line-2158"></span><span class="hs-comment">-- possible. Returned types are the same in terms of used type synonyms.</span><span>
</span><span id="line-2159"></span><span class="hs-comment">--</span><span>
</span><span id="line-2160"></span><span class="hs-comment">-- To expand all synonyms, see 'Type.expandTypeSynonyms'.</span><span>
</span><span id="line-2161"></span><span class="hs-comment">--</span><span>
</span><span id="line-2162"></span><span class="hs-comment">-- See `ExpandSynsFail` tests in tests testsuite/tests/typecheck/should_fail for</span><span>
</span><span id="line-2163"></span><span class="hs-comment">-- some examples of how this should work.</span><span>
</span><span id="line-2164"></span><span class="annot"><a href="GHC.Tc.Errors.html#expandSynonymsToMatch"><span class="hs-identifier hs-type">expandSynonymsToMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2165"></span><span id="expandSynonymsToMatch"><span class="annot"><span class="annottext">expandSynonymsToMatch :: Type -&gt; Type -&gt; (Type, Type)
</span><a href="GHC.Tc.Errors.html#expandSynonymsToMatch"><span class="hs-identifier hs-var hs-var">expandSynonymsToMatch</span></a></span></span><span> </span><span id="local-6989586621681342511"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342511"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342510"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342510"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342509"><span class="hs-identifier hs-var">ty1_ret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342508"><span class="hs-identifier hs-var">ty2_ret</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2166"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2167"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342509"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342509"><span class="hs-identifier hs-var">ty1_ret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342508"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342508"><span class="hs-identifier hs-var">ty2_ret</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342511"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342510"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2168"></span><span>
</span><span id="line-2169"></span><span>    </span><span class="hs-comment">-- | Returns (type synonym expanded version of first type,</span><span>
</span><span id="line-2170"></span><span>    </span><span class="hs-comment">--            type synonym expanded version of second type)</span><span>
</span><span id="line-2171"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2172"></span><span>    </span><span id="local-6989586621681342507"><span class="annot"><span class="annottext">go :: Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681342506"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342506"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681342505"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342505"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-2173"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342506"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#pickyEqType"><span class="hs-operator hs-var">`pickyEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342505"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2174"></span><span>        </span><span class="hs-comment">-- Types are same, nothing to do</span><span>
</span><span id="line-2175"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342506"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342505"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2176"></span><span>
</span><span id="line-2177"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681342503"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342503"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621681342502"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342502"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681342501"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342501"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621681342500"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342500"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2178"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342503"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342501"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-2179"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342502"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342500"><span class="hs-identifier hs-var">tys2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2180"></span><span>        </span><span class="hs-comment">-- Type constructors are same. They may be synonyms, but we don't</span><span>
</span><span id="line-2181"></span><span>        </span><span class="hs-comment">-- expand further. The lengths of tys1 and tys2 must be equal;</span><span>
</span><span id="line-2182"></span><span>        </span><span class="hs-comment">-- for example, with type S a = a, we don't want</span><span>
</span><span id="line-2183"></span><span>        </span><span class="hs-comment">-- to zip (S Monad Int) and (S Bool).</span><span>
</span><span id="line-2184"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342498"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342498"><span class="hs-identifier hs-var">tys1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342497"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342497"><span class="hs-identifier hs-var">tys2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2185"></span><span>              </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.16.4.0/src/GHC-List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. String -&gt; (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="GHC.Utils.Misc.html#zipWithEqual"><span class="hs-identifier hs-var">zipWithEqual</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expandSynonymsToMatch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342502"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342500"><span class="hs-identifier hs-var">tys2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2186"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342503"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342498"><span class="hs-identifier hs-var">tys1'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342501"><span class="hs-identifier hs-var">tc2</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342497"><span class="hs-identifier hs-var">tys2'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2187"></span><span>
</span><span id="line-2188"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681342493"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342493"><span class="hs-identifier hs-var">t1_1</span></a></span></span><span> </span><span id="local-6989586621681342492"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342492"><span class="hs-identifier hs-var">t1_2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681342491"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342491"><span class="hs-identifier hs-var">t2_1</span></a></span></span><span> </span><span id="local-6989586621681342490"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342490"><span class="hs-identifier hs-var">t2_2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2189"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342489"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342489"><span class="hs-identifier hs-var">t1_1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342488"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342488"><span class="hs-identifier hs-var">t2_1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342493"><span class="hs-identifier hs-var">t1_1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342491"><span class="hs-identifier hs-var">t2_1</span></a></span><span>
</span><span id="line-2190"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681342487"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342487"><span class="hs-identifier hs-var">t1_2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342486"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342486"><span class="hs-identifier hs-var">t2_2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342492"><span class="hs-identifier hs-var">t1_2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342490"><span class="hs-identifier hs-var">t2_2</span></a></span><span>
</span><span id="line-2191"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#mkAppTy"><span class="hs-identifier hs-var">mkAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342489"><span class="hs-identifier hs-var">t1_1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342487"><span class="hs-identifier hs-var">t1_2'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#mkAppTy"><span class="hs-identifier hs-var">mkAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342488"><span class="hs-identifier hs-var">t2_1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342486"><span class="hs-identifier hs-var">t2_2'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2192"></span><span>
</span><span id="line-2193"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681342484"><span class="annot"><span class="annottext">ty1 :: Type
</span><a href="#local-6989586621681342484"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">AnonArgFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342482"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342482"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621681342481"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342481"><span class="hs-identifier hs-var">t1_1</span></a></span></span><span> </span><span id="local-6989586621681342480"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342480"><span class="hs-identifier hs-var">t1_2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681342479"><span class="annot"><span class="annottext">ty2 :: Type
</span><a href="#local-6989586621681342479"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">AnonArgFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342478"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342478"><span class="hs-identifier hs-var">w2</span></a></span></span><span> </span><span id="local-6989586621681342477"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342477"><span class="hs-identifier hs-var">t2_1</span></a></span></span><span> </span><span id="local-6989586621681342476"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342476"><span class="hs-identifier hs-var">t2_2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342482"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342478"><span class="hs-identifier hs-var">w2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2194"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342475"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342475"><span class="hs-identifier hs-var">t1_1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342474"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342474"><span class="hs-identifier hs-var">t2_1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342481"><span class="hs-identifier hs-var">t1_1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342477"><span class="hs-identifier hs-var">t2_1</span></a></span><span>
</span><span id="line-2195"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681342473"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342473"><span class="hs-identifier hs-var">t1_2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342472"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342472"><span class="hs-identifier hs-var">t2_2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342480"><span class="hs-identifier hs-var">t1_2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342476"><span class="hs-identifier hs-var">t2_2</span></a></span><span>
</span><span id="line-2196"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342484"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_arg :: Type
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var">ft_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342475"><span class="hs-identifier hs-var">t1_1'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_res :: Type
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var">ft_res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342473"><span class="hs-identifier hs-var">t1_2'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2197"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342479"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_arg :: Type
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var">ft_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342474"><span class="hs-identifier hs-var">t2_1'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_res :: Type
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var">ft_res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342472"><span class="hs-identifier hs-var">t2_2'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2198"></span><span>
</span><span id="line-2199"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span id="local-6989586621681342468"><span class="annot"><span class="annottext">TyCoVarBinder
</span><a href="#local-6989586621681342468"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621681342467"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342467"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span id="local-6989586621681342466"><span class="annot"><span class="annottext">TyCoVarBinder
</span><a href="#local-6989586621681342466"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621681342465"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342465"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2200"></span><span>      </span><span class="hs-comment">-- NOTE: We may have a bug here, but we just can't reproduce it easily.</span><span>
</span><span id="line-2201"></span><span>      </span><span class="hs-comment">-- See D1016 comments for details and our attempts at producing a test</span><span>
</span><span id="line-2202"></span><span>      </span><span class="hs-comment">-- case. Short version: We probably need RnEnv2 to really get this right.</span><span>
</span><span id="line-2203"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342464"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342464"><span class="hs-identifier hs-var">t1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342463"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342463"><span class="hs-identifier hs-var">t2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342467"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342465"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2204"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCoVarBinder -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarBinder
</span><a href="#local-6989586621681342468"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342464"><span class="hs-identifier hs-var">t1'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCoVarBinder -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarBinder
</span><a href="#local-6989586621681342466"><span class="hs-identifier hs-var">b2</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342463"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2205"></span><span>
</span><span id="line-2206"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681342461"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342461"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681342460"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342460"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342461"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342460"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2207"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681342459"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342459"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681342458"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342458"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342459"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342458"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2208"></span><span>
</span><span id="line-2209"></span><span>    </span><span class="annot"><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681342457"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342457"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681342456"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342456"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2210"></span><span>      </span><span class="hs-comment">-- See Note [Expanding type synonyms to make types similar] for how this</span><span>
</span><span id="line-2211"></span><span>      </span><span class="hs-comment">-- works</span><span>
</span><span id="line-2212"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-2213"></span><span>        </span><span id="local-6989586621681342455"><span class="annot"><span class="annottext">t1_exp_tys :: [Type]
</span><a href="#local-6989586621681342455"><span class="hs-identifier hs-var hs-var">t1_exp_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342457"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
</span><a href="#local-6989586621681342454"><span class="hs-identifier hs-var">tyExpansions</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342457"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-2214"></span><span>        </span><span id="local-6989586621681342453"><span class="annot"><span class="annottext">t2_exp_tys :: [Type]
</span><a href="#local-6989586621681342453"><span class="hs-identifier hs-var hs-var">t2_exp_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342456"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
</span><a href="#local-6989586621681342454"><span class="hs-identifier hs-var">tyExpansions</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342456"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2215"></span><span>        </span><span id="local-6989586621681342452"><span class="annot"><span class="annottext">t1_exps :: Int
</span><a href="#local-6989586621681342452"><span class="hs-identifier hs-var hs-var">t1_exps</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342455"><span class="hs-identifier hs-var">t1_exp_tys</span></a></span><span>
</span><span id="line-2216"></span><span>        </span><span id="local-6989586621681342451"><span class="annot"><span class="annottext">t2_exps :: Int
</span><a href="#local-6989586621681342451"><span class="hs-identifier hs-var hs-var">t2_exps</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342453"><span class="hs-identifier hs-var">t2_exp_tys</span></a></span><span>
</span><span id="line-2217"></span><span>        </span><span id="local-6989586621681342450"><span class="annot"><span class="annottext">dif :: Int
</span><a href="#local-6989586621681342450"><span class="hs-identifier hs-var hs-var">dif</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#abs"><span class="hs-identifier hs-var">abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342452"><span class="hs-identifier hs-var">t1_exps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342451"><span class="hs-identifier hs-var">t2_exps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2218"></span><span>      </span><span class="hs-keyword">in</span><span>
</span><span id="line-2219"></span><span>        </span><span class="annot"><span class="annottext">[(Type, Type)] -&gt; (Type, Type)
</span><a href="#local-6989586621681342449"><span class="hs-identifier hs-var">followExpansions</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2220"></span><span>          </span><span class="annot"><span class="annottext">forall a b. String -&gt; [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="GHC.Utils.Misc.html#zipEqual"><span class="hs-identifier hs-var">zipEqual</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expandSynonymsToMatch.go&quot;</span></span><span>
</span><span id="line-2221"></span><span>            </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342452"><span class="hs-identifier hs-var">t1_exps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342451"><span class="hs-identifier hs-var">t2_exps</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#drop"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342450"><span class="hs-identifier hs-var">dif</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342455"><span class="hs-identifier hs-var">t1_exp_tys</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342455"><span class="hs-identifier hs-var">t1_exp_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2222"></span><span>            </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342451"><span class="hs-identifier hs-var">t2_exps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342452"><span class="hs-identifier hs-var">t1_exps</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#drop"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342450"><span class="hs-identifier hs-var">dif</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342453"><span class="hs-identifier hs-var">t2_exp_tys</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342453"><span class="hs-identifier hs-var">t2_exp_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2223"></span><span>
</span><span id="line-2224"></span><span>    </span><span class="hs-comment">-- | Expand the top layer type synonyms repeatedly, collect expansions in a</span><span>
</span><span id="line-2225"></span><span>    </span><span class="hs-comment">-- list. The list does not include the original type.</span><span>
</span><span id="line-2226"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2227"></span><span>    </span><span class="hs-comment">-- Example, if you have:</span><span>
</span><span id="line-2228"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2229"></span><span>    </span><span class="hs-comment">--   type T10 = T9</span><span>
</span><span id="line-2230"></span><span>    </span><span class="hs-comment">--   type T9  = T8</span><span>
</span><span id="line-2231"></span><span>    </span><span class="hs-comment">--   ...</span><span>
</span><span id="line-2232"></span><span>    </span><span class="hs-comment">--   type T0  = Int</span><span>
</span><span id="line-2233"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2234"></span><span>    </span><span class="hs-comment">-- `tyExpansions T10` returns [T9, T8, T7, ... Int]</span><span>
</span><span id="line-2235"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2236"></span><span>    </span><span class="hs-comment">-- This only expands the top layer, so if you have:</span><span>
</span><span id="line-2237"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2238"></span><span>    </span><span class="hs-comment">--   type M a = Maybe a</span><span>
</span><span id="line-2239"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-2240"></span><span>    </span><span class="hs-comment">-- `tyExpansions (M T10)` returns [Maybe T10] (T10 is not expanded)</span><span>
</span><span id="line-2241"></span><span>    </span><span class="annot"><a href="#local-6989586621681342454"><span class="hs-identifier hs-type">tyExpansions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2242"></span><span>    </span><span id="local-6989586621681342454"><span class="annot"><span class="annottext">tyExpansions :: Type -&gt; [Type]
</span><a href="#local-6989586621681342454"><span class="hs-identifier hs-var hs-var">tyExpansions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. (b -&gt; Maybe (a, b)) -&gt; b -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#unfoldr"><span class="hs-identifier hs-var">unfoldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681342446"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342446"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681342445"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342445"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342445"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342445"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-operator hs-var">`fmap`</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#tcView"><span class="hs-identifier hs-var">tcView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342446"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2243"></span><span>
</span><span id="line-2244"></span><span>    </span><span class="hs-comment">-- | Drop the type pairs until types in a pair look alike (i.e. the outer</span><span>
</span><span id="line-2245"></span><span>    </span><span class="hs-comment">-- constructors are the same).</span><span>
</span><span id="line-2246"></span><span>    </span><span class="annot"><a href="#local-6989586621681342449"><span class="hs-identifier hs-type">followExpansions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2247"></span><span>    </span><span id="local-6989586621681342449"><span class="annot"><span class="annottext">followExpansions :: [(Type, Type)] -&gt; (Type, Type)
</span><a href="#local-6989586621681342449"><span class="hs-identifier hs-var hs-var">followExpansions</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;followExpansions&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2248"></span><span>    </span><span class="annot"><a href="#local-6989586621681342449"><span class="hs-identifier hs-var">followExpansions</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621681342443"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342443"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342442"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342442"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2249"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342443"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342442"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342443"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342442"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-comment">-- expand subtrees</span><span>
</span><span id="line-2250"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342443"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342442"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- the difference is already visible</span><span>
</span><span id="line-2251"></span><span>    </span><span class="annot"><a href="#local-6989586621681342449"><span class="hs-identifier hs-var">followExpansions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681342440"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342440"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342439"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342439"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681342438"><span class="annot"><span class="annottext">[(Type, Type)]
</span><a href="#local-6989586621681342438"><span class="hs-identifier hs-var">tss</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2252"></span><span>      </span><span class="hs-comment">-- Traverse subtrees when the outer shapes are the same</span><span>
</span><span id="line-2253"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342440"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342439"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; (Type, Type)
</span><a href="#local-6989586621681342507"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342440"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342439"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2254"></span><span>      </span><span class="hs-comment">-- Otherwise follow the expansions until they look alike</span><span>
</span><span id="line-2255"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Type, Type)] -&gt; (Type, Type)
</span><a href="#local-6989586621681342449"><span class="hs-identifier hs-var">followExpansions</span></a></span><span> </span><span class="annot"><span class="annottext">[(Type, Type)]
</span><a href="#local-6989586621681342438"><span class="hs-identifier hs-var">tss</span></a></span><span>
</span><span id="line-2256"></span><span>
</span><span id="line-2257"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-type">sameShapes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2258"></span><span>    </span><span id="local-6989586621681342441"><span class="annot"><span class="annottext">sameShapes :: Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342441"><span class="hs-identifier hs-var hs-var">sameShapes</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2259"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681342437"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342437"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681342436"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342436"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342437"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342436"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-2260"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2261"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2262"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681342435"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342435"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span id="local-6989586621681342434"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342434"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342435"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342434"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2263"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span id="local-6989586621681342433"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342433"><span class="hs-identifier hs-var">ty1</span></a></span></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681342432"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342432"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342433"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342432"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2264"></span><span>    </span><span class="annot"><a href="#local-6989586621681342441"><span class="hs-identifier hs-var">sameShapes</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>                </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2265"></span><span>
</span><span id="line-2266"></span><span class="annot"><a href="GHC.Tc.Errors.html#sameOccExtra"><span class="hs-identifier hs-type">sameOccExtra</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2267"></span><span class="hs-comment">-- See Note [Disambiguating (X ~ X) errors]</span><span>
</span><span id="line-2268"></span><span id="sameOccExtra"><span class="annot"><span class="annottext">sameOccExtra :: Type -&gt; Type -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#sameOccExtra"><span class="hs-identifier hs-var hs-var">sameOccExtra</span></a></span></span><span> </span><span id="local-6989586621681342431"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342431"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681342430"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342430"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-2269"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342429"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342429"><span class="hs-identifier hs-var">tc1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342431"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-2270"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342428"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342428"><span class="hs-identifier hs-var">tc2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342430"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-2271"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342427"><span class="annot"><span class="annottext">n1 :: Name
</span><a href="#local-6989586621681342427"><span class="hs-identifier hs-var hs-var">n1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342429"><span class="hs-identifier hs-var">tc1</span></a></span><span>
</span><span id="line-2272"></span><span>        </span><span id="local-6989586621681342425"><span class="annot"><span class="annottext">n2 :: Name
</span><a href="#local-6989586621681342425"><span class="hs-identifier hs-var hs-var">n2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342428"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-2273"></span><span>        </span><span id="local-6989586621681342424"><span class="annot"><span class="annottext">same_occ :: Bool
</span><a href="#local-6989586621681342424"><span class="hs-identifier hs-var hs-var">same_occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342427"><span class="hs-identifier hs-var">n1</span></a></span><span>                   </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342425"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-2274"></span><span>        </span><span id="local-6989586621681342422"><span class="annot"><span class="annottext">same_pkg :: Bool
</span><a href="#local-6989586621681342422"><span class="hs-identifier hs-var hs-var">same_pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342427"><span class="hs-identifier hs-var">n1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342425"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2275"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342427"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342425"><span class="hs-identifier hs-var">n2</span></a></span><span>   </span><span class="hs-comment">-- Different Names</span><span>
</span><span id="line-2276"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342424"><span class="hs-identifier hs-var">same_occ</span></a></span><span>   </span><span class="hs-comment">-- but same OccName</span><span>
</span><span id="line-2277"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NB:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Name -&gt; SDoc
</span><a href="#local-6989586621681342419"><span class="hs-identifier hs-var">ppr_from</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342422"><span class="hs-identifier hs-var">same_pkg</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342427"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Name -&gt; SDoc
</span><a href="#local-6989586621681342419"><span class="hs-identifier hs-var">ppr_from</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342422"><span class="hs-identifier hs-var">same_pkg</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342425"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2278"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2279"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2280"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2281"></span><span>    </span><span id="local-6989586621681342419"><span class="annot"><span class="annottext">ppr_from :: Bool -&gt; Name -&gt; SDoc
</span><a href="#local-6989586621681342419"><span class="hs-identifier hs-var hs-var">ppr_from</span></a></span></span><span> </span><span id="local-6989586621681342407"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342407"><span class="hs-identifier hs-var">same_pkg</span></a></span></span><span> </span><span id="local-6989586621681342406"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342406"><span class="hs-identifier hs-var">nm</span></a></span></span><span>
</span><span id="line-2282"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#isGoodSrcSpan"><span class="hs-identifier hs-var">isGoodSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681342404"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-2283"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342406"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is defined at&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2284"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681342404"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2285"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-comment">-- Imported things have an UnhelpfulSrcSpan</span><span>
</span><span id="line-2286"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342406"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2287"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is defined in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681342402"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2288"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342407"><span class="hs-identifier hs-var">same_pkg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681342401"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="GHC.Unit.Types.html#mainUnit"><span class="hs-identifier hs-var">mainUnit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2289"></span><span>                    </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in package&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621681342401"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2290"></span><span>       </span><span class="hs-keyword">where</span><span>
</span><span id="line-2291"></span><span>         </span><span id="local-6989586621681342401"><span class="annot"><span class="annottext">pkg :: Unit
</span><a href="#local-6989586621681342401"><span class="hs-identifier hs-var hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681342402"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-2292"></span><span>         </span><span id="local-6989586621681342402"><span class="annot"><span class="annottext">mod :: Module
</span><a href="#local-6989586621681342402"><span class="hs-identifier hs-var hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342406"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-2293"></span><span>         </span><span id="local-6989586621681342404"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621681342404"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342406"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-2294"></span><span>
</span><span id="line-2295"></span><span class="hs-comment">{- Note [Suggest adding a type signature]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The OutsideIn algorithm rejects GADT programs that don't have a principal
type, and indeed some that do.  Example:
   data T a where
     MkT :: Int -&gt; T Int

   f (MkT n) = n

Does this have type f :: T a -&gt; a, or f :: T a -&gt; Int?
The error that shows up tends to be an attempt to unify an
untouchable type variable.  So suggestAddSig sees if the offending
type variable is bound by an *inferred* signature, and suggests
adding a declared signature instead.

More specifically, we suggest adding a type sig if we have p ~ ty, and
p is a skolem bound by an InferSkol.  Those skolems were created from
unification variables in simplifyInfer.  Why didn't we unify?  It must
have been because of an intervening GADT or existential, making it
untouchable. Either way, a type signature would help.  For GADTs, it
might make it typeable; for existentials the attempt to write a
signature will fail -- or at least will produce a better error message
next time

This initially came up in #8968, concerning pattern synonyms.

Note [Disambiguating (X ~ X) errors]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
See #8278

Note [Reporting occurs-check errors]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Given (a ~ [a]), if 'a' is a rigid type variable bound by a user-supplied
type signature, then the best thing is to report that we can't unify
a with [a], because a is a skolem variable.  That avoids the confusing
&quot;occur-check&quot; error message.

But nowadays when inferring the type of a function with no type signature,
even if there are errors inside, we still generalise its signature and
carry on. For example
   f x = x:x
Here we will infer something like
   f :: forall a. a -&gt; [a]
with a deferred error of (a ~ [a]).  So in the deferred unsolved constraint
'a' is now a skolem, but not one bound by the programmer in the context!
Here we really should report an occurs check.

So isUserSkolem distinguishes the two.

Note [Non-injective type functions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It's very confusing to get a message like
     Couldn't match expected type `Depend s'
            against inferred type `Depend s1'
so mkTyFunInfoMsg adds:
       NB: `Depend' is type function, and hence may not be injective

Warn of loopy local equalities that were dropped.


************************************************************************
*                                                                      *
                 Type-class errors
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2361"></span><span>
</span><span id="line-2362"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkDictErr"><span class="hs-identifier hs-type">mkDictErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2363"></span><span id="mkDictErr"><span class="annot"><span class="annottext">mkDictErr :: ReportErrCtxt -&gt; [Ct] -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkDictErr"><span class="hs-identifier hs-var hs-var">mkDictErr</span></a></span></span><span> </span><span id="local-6989586621681342398"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342398"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342397"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342397"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-2364"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">cts</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2365"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342396"><span class="annot"><span class="annottext">InstEnvs
</span><a href="#local-6989586621681342396"><span class="hs-identifier hs-var">inst_envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM InstEnvs
</span><a href="GHC.Tc.Utils.Env.html#tcGetInstEnvs"><span class="hs-identifier hs-var">tcGetInstEnvs</span></a></span><span>
</span><span id="line-2366"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342394"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342394"><span class="hs-identifier hs-var">ct1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342397"><span class="hs-identifier hs-var">cts</span></a></span><span>  </span><span class="hs-comment">-- ct1 just for its location</span><span>
</span><span id="line-2367"></span><span>             </span><span id="local-6989586621681342393"><span class="annot"><span class="annottext">min_cts :: [Ct]
</span><a href="#local-6989586621681342393"><span class="hs-identifier hs-var hs-var">min_cts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; [Ct]
</span><a href="#local-6989586621681342392"><span class="hs-identifier hs-var">elim_superclasses</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342397"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-2368"></span><span>             </span><span id="local-6989586621681342391"><span class="annot"><span class="annottext">lookups :: [(Ct, ClsInstLookupResult)]
</span><a href="#local-6989586621681342391"><span class="hs-identifier hs-var hs-var">lookups</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstEnvs -&gt; Ct -&gt; (Ct, ClsInstLookupResult)
</span><a href="#local-6989586621681342390"><span class="hs-identifier hs-var">lookup_cls_inst</span></a></span><span> </span><span class="annot"><span class="annottext">InstEnvs
</span><a href="#local-6989586621681342396"><span class="hs-identifier hs-var">inst_envs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342393"><span class="hs-identifier hs-var">min_cts</span></a></span><span>
</span><span id="line-2369"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681342389"><span class="annot"><span class="annottext">[(Ct, ClsInstLookupResult)]
</span><a href="#local-6989586621681342389"><span class="hs-identifier hs-var">no_inst_cts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342388"><span class="annot"><span class="annottext">[(Ct, ClsInstLookupResult)]
</span><a href="#local-6989586621681342388"><span class="hs-identifier hs-var">overlap_cts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">(Ct, ClsInstLookupResult) -&gt; Bool
</span><a href="#local-6989586621681342387"><span class="hs-identifier hs-var">is_no_inst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Ct, ClsInstLookupResult)]
</span><a href="#local-6989586621681342391"><span class="hs-identifier hs-var">lookups</span></a></span><span>
</span><span id="line-2370"></span><span>
</span><span id="line-2371"></span><span>       </span><span class="hs-comment">-- Report definite no-instance errors,</span><span>
</span><span id="line-2372"></span><span>       </span><span class="hs-comment">-- or (iff there are none) overlap errors</span><span>
</span><span id="line-2373"></span><span>       </span><span class="hs-comment">-- But we report only one of them (hence 'head') because they all</span><span>
</span><span id="line-2374"></span><span>       </span><span class="hs-comment">-- have the same source-location origin, to try avoid a cascade</span><span>
</span><span id="line-2375"></span><span>       </span><span class="hs-comment">-- of error from one location</span><span>
</span><span id="line-2376"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342386"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342386"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342385"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342385"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
-&gt; (Ct, ClsInstLookupResult) -&gt; TcM (ReportErrCtxt, SDoc)
</span><a href="GHC.Tc.Errors.html#mk_dict_err"><span class="hs-identifier hs-var">mk_dict_err</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342398"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Ct, ClsInstLookupResult)]
</span><a href="#local-6989586621681342389"><span class="hs-identifier hs-var">no_inst_cts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(Ct, ClsInstLookupResult)]
</span><a href="#local-6989586621681342388"><span class="hs-identifier hs-var">overlap_cts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2377"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; Ct -&gt; Report -&gt; TcM (MsgEnvelope DecoratedSDoc)
</span><a href="GHC.Tc.Errors.html#mkErrorMsgFromCt"><span class="hs-identifier hs-var">mkErrorMsgFromCt</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342386"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342394"><span class="hs-identifier hs-var">ct1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Report
</span><a href="GHC.Tc.Errors.html#important"><span class="hs-identifier hs-var">important</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342385"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2378"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2379"></span><span>    </span><span id="local-6989586621681342382"><span class="annot"><span class="annottext">no_givens :: Bool
</span><a href="#local-6989586621681342382"><span class="hs-identifier hs-var hs-var">no_givens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivens"><span class="hs-identifier hs-var">getUserGivens</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342398"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2380"></span><span>
</span><span id="line-2381"></span><span>    </span><span id="local-6989586621681342387"><span class="annot"><span class="annottext">is_no_inst :: (Ct, ClsInstLookupResult) -&gt; Bool
</span><a href="#local-6989586621681342387"><span class="hs-identifier hs-var hs-var">is_no_inst</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342381"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342381"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342380"><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342380"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342379"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342379"><span class="hs-identifier hs-var">unifiers</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2382"></span><span>      </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342382"><span class="hs-identifier hs-var">no_givens</span></a></span><span>
</span><span id="line-2383"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342380"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-2384"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342379"><span class="hs-identifier hs-var">unifiers</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isAmbiguousTyVar"><span class="hs-identifier hs-var">isAmbiguousTyVar</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtList"><span class="hs-identifier hs-var">tyCoVarsOfCtList</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342381"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2385"></span><span>
</span><span id="line-2386"></span><span>    </span><span id="local-6989586621681342390"><span class="annot"><span class="annottext">lookup_cls_inst :: InstEnvs -&gt; Ct -&gt; (Ct, ClsInstLookupResult)
</span><a href="#local-6989586621681342390"><span class="hs-identifier hs-var hs-var">lookup_cls_inst</span></a></span></span><span> </span><span id="local-6989586621681342374"><span class="annot"><span class="annottext">InstEnvs
</span><a href="#local-6989586621681342374"><span class="hs-identifier hs-var">inst_envs</span></a></span></span><span> </span><span id="local-6989586621681342373"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342373"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-2387"></span><span>                </span><span class="hs-comment">-- Note [Flattening in error message generation]</span><span>
</span><span id="line-2388"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342373"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; InstEnvs -&gt; Class -&gt; [Type] -&gt; ClsInstLookupResult
</span><a href="GHC.Core.InstEnv.html#lookupInstEnv"><span class="hs-identifier hs-var">lookupInstEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">InstEnvs
</span><a href="#local-6989586621681342374"><span class="hs-identifier hs-var">inst_envs</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342371"><span class="hs-identifier hs-var">clas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InScopeSet -&gt; [Type] -&gt; [Type]
</span><a href="GHC.Core.Unify.html#flattenTys"><span class="hs-identifier hs-var">flattenTys</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="GHC.Types.Var.Env.html#emptyInScopeSet"><span class="hs-identifier hs-var">emptyInScopeSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342369"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2389"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-2390"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681342371"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342371"><span class="hs-identifier hs-var">clas</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342369"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342369"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; (Class, [Type])
</span><a href="GHC.Core.Predicate.html#getClassPredTys"><span class="hs-identifier hs-var">getClassPredTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342373"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2391"></span><span>
</span><span id="line-2392"></span><span>
</span><span id="line-2393"></span><span>    </span><span class="hs-comment">-- When simplifying [W] Ord (Set a), we need</span><span>
</span><span id="line-2394"></span><span>    </span><span class="hs-comment">--    [W] Eq a, [W] Ord a</span><span>
</span><span id="line-2395"></span><span>    </span><span class="hs-comment">-- but we really only want to report the latter</span><span>
</span><span id="line-2396"></span><span>    </span><span id="local-6989586621681342392"><span class="annot"><span class="annottext">elim_superclasses :: [Ct] -&gt; [Ct]
</span><a href="#local-6989586621681342392"><span class="hs-identifier hs-var hs-var">elim_superclasses</span></a></span></span><span> </span><span id="local-6989586621681342367"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342367"><span class="hs-identifier hs-var">cts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Type) -&gt; [a] -&gt; [a]
</span><a href="GHC.Tc.Utils.TcType.html#mkMinimalBySCs"><span class="hs-identifier hs-var">mkMinimalBySCs</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342367"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-2397"></span><span>
</span><span id="line-2398"></span><span class="hs-comment">-- [Note: mk_dict_err]</span><span>
</span><span id="line-2399"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-2400"></span><span class="hs-comment">-- Different dictionary error messages are reported depending on the number of</span><span>
</span><span id="line-2401"></span><span class="hs-comment">-- matches and unifiers:</span><span>
</span><span id="line-2402"></span><span class="hs-comment">--</span><span>
</span><span id="line-2403"></span><span class="hs-comment">--   - No matches, regardless of unifiers: report &quot;No instance for ...&quot;.</span><span>
</span><span id="line-2404"></span><span class="hs-comment">--   - Two or more matches, regardless of unifiers: report &quot;Overlapping instances for ...&quot;,</span><span>
</span><span id="line-2405"></span><span class="hs-comment">--     and show the matching and unifying instances.</span><span>
</span><span id="line-2406"></span><span class="hs-comment">--   - One match, one or more unifiers: report &quot;Overlapping instances for&quot;, show the</span><span>
</span><span id="line-2407"></span><span class="hs-comment">--     matching and unifying instances, and say &quot;The choice depends on the instantion of ...,</span><span>
</span><span id="line-2408"></span><span class="hs-comment">--     and the result of evaluating ...&quot;.</span><span>
</span><span id="line-2409"></span><span class="annot"><a href="GHC.Tc.Errors.html#mk_dict_err"><span class="hs-identifier hs-type">mk_dict_err</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInstLookupResult"><span class="hs-identifier hs-type">ClsInstLookupResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2410"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2411"></span><span class="hs-comment">-- Report an overlap error if this class constraint results</span><span>
</span><span id="line-2412"></span><span class="hs-comment">-- from an overlap (returning Left clas), otherwise return (Right pred)</span><span>
</span><span id="line-2413"></span><span id="mk_dict_err"><span class="annot"><span class="annottext">mk_dict_err :: ReportErrCtxt
-&gt; (Ct, ClsInstLookupResult) -&gt; TcM (ReportErrCtxt, SDoc)
</span><a href="GHC.Tc.Errors.html#mk_dict_err"><span class="hs-identifier hs-var hs-var">mk_dict_err</span></a></span></span><span> </span><span id="local-6989586621681342366"><span class="annot"><span class="annottext">ctxt :: ReportErrCtxt
</span><a href="#local-6989586621681342366"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#CEC"><span class="hs-identifier hs-type">CEC</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cec_encl :: ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342365"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342365"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342364"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342364"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342363"><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342363"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342362"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342361"><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342361"><span class="hs-identifier hs-var">unsafe_overlapped</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2414"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342363"><span class="hs-identifier hs-var">matches</span></a></span><span>  </span><span class="hs-comment">-- No matches but perhaps several unifiers</span><span>
</span><span id="line-2415"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342360"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342360"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342359"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342359"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342358"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342358"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; TcM (ReportErrCtxt, SDoc, Ct)
</span><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-var">relevantBindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342366"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342364"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2416"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342357"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342357"><span class="hs-identifier hs-var">candidate_insts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM [ClsInst]
</span><a href="#local-6989586621681342356"><span class="hs-identifier hs-var">get_candidate_instances</span></a></span><span>
</span><span id="line-2417"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342360"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; [ClsInst] -&gt; SDoc -&gt; SDoc
</span><a href="#local-6989586621681342355"><span class="hs-identifier hs-var">cannot_resolve_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342358"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342357"><span class="hs-identifier hs-var">candidate_insts</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342359"><span class="hs-identifier hs-var">binds_msg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2418"></span><span>
</span><span id="line-2419"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342361"><span class="hs-identifier hs-var">unsafe_overlapped</span></a></span><span>   </span><span class="hs-comment">-- Some matches =&gt; overlap errors</span><span>
</span><span id="line-2420"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342366"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342354"><span class="hs-identifier hs-var">overlap_msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2421"></span><span>
</span><span id="line-2422"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2423"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342366"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342353"><span class="hs-identifier hs-var">safe_haskell_msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2424"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2425"></span><span>    </span><span id="local-6989586621681342352"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342352"><span class="hs-identifier hs-var hs-var">orig</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342364"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2426"></span><span>    </span><span id="local-6989586621681342351"><span class="annot"><span class="annottext">pred :: Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var hs-var">pred</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Type
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342364"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2427"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342350"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342349"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; (Class, [Type])
</span><a href="GHC.Core.Predicate.html#getClassPredTys"><span class="hs-identifier hs-var">getClassPredTys</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2428"></span><span>    </span><span id="local-6989586621681342348"><span class="annot"><span class="annottext">ispecs :: [ClsInst]
</span><a href="#local-6989586621681342348"><span class="hs-identifier hs-var hs-var">ispecs</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342347"><span class="hs-identifier hs-var">ispec</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342347"><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342347"><span class="hs-identifier hs-var">ispec</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342363"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2429"></span><span>    </span><span id="local-6989586621681342346"><span class="annot"><span class="annottext">unsafe_ispecs :: [ClsInst]
</span><a href="#local-6989586621681342346"><span class="hs-identifier hs-var hs-var">unsafe_ispecs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342345"><span class="hs-identifier hs-var">ispec</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342345"><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342345"><span class="hs-identifier hs-var">ispec</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Maybe Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342361"><span class="hs-identifier hs-var">unsafe_overlapped</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2430"></span><span>    </span><span id="local-6989586621681342344"><span class="annot"><span class="annottext">useful_givens :: [Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var hs-var">useful_givens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; [Implication] -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#discardProvCtxtGivens"><span class="hs-identifier hs-var">discardProvCtxtGivens</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342352"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Implication] -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#getUserGivensFromImplics"><span class="hs-identifier hs-var">getUserGivensFromImplics</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342365"><span class="hs-identifier hs-var">implics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2431"></span><span>         </span><span class="hs-comment">-- useful_givens are the enclosing implications with non-empty givens,</span><span>
</span><span id="line-2432"></span><span>         </span><span class="hs-comment">-- modulo the horrid discardProvCtxtGivens</span><span>
</span><span id="line-2433"></span><span>
</span><span id="line-2434"></span><span>    </span><span class="annot"><a href="#local-6989586621681342356"><span class="hs-identifier hs-type">get_candidate_instances</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2435"></span><span>    </span><span class="hs-comment">-- See Note [Report candidate instances]</span><span>
</span><span id="line-2436"></span><span>    </span><span id="local-6989586621681342356"><span class="annot"><span class="annottext">get_candidate_instances :: TcM [ClsInst]
</span><a href="#local-6989586621681342356"><span class="hs-identifier hs-var hs-var">get_candidate_instances</span></a></span></span><span>
</span><span id="line-2437"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681342342"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342342"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span>   </span><span class="hs-comment">-- Only try for single-parameter classes</span><span>
</span><span id="line-2438"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342341"><span class="annot"><span class="annottext">InstEnvs
</span><a href="#local-6989586621681342341"><span class="hs-identifier hs-var">instEnvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM InstEnvs
</span><a href="GHC.Tc.Utils.Env.html#tcGetInstEnvs"><span class="hs-identifier hs-var">tcGetInstEnvs</span></a></span><span>
</span><span id="line-2439"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; ClsInst -&gt; Bool
</span><a href="#local-6989586621681342340"><span class="hs-identifier hs-var">is_candidate_inst</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342342"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2440"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstEnvs -&gt; Class -&gt; [ClsInst]
</span><a href="GHC.Core.InstEnv.html#classInstances"><span class="hs-identifier hs-var">classInstances</span></a></span><span> </span><span class="annot"><span class="annottext">InstEnvs
</span><a href="#local-6989586621681342341"><span class="hs-identifier hs-var">instEnvs</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2441"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2442"></span><span>
</span><span id="line-2443"></span><span>    </span><span id="local-6989586621681342340"><span class="annot"><span class="annottext">is_candidate_inst :: Type -&gt; ClsInst -&gt; Bool
</span><a href="#local-6989586621681342340"><span class="hs-identifier hs-var hs-var">is_candidate_inst</span></a></span></span><span> </span><span id="local-6989586621681342332"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342332"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681342331"><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342331"><span class="hs-identifier hs-var">inst</span></a></span></span><span> </span><span class="hs-comment">-- See Note [Report candidate instances]</span><span>
</span><span id="line-2444"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681342330"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342330"><span class="hs-identifier hs-var">other_ty</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ClsInst -&gt; [Type]
</span><a href="GHC.Core.InstEnv.html#is_tys"><span class="hs-identifier hs-var">is_tys</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342331"><span class="hs-identifier hs-var">inst</span></a></span><span>
</span><span id="line-2445"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342328"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342328"><span class="hs-identifier hs-var">tc1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342332"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2446"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342327"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342327"><span class="hs-identifier hs-var">tc2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342330"><span class="hs-identifier hs-var">other_ty</span></a></span><span>
</span><span id="line-2447"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342326"><span class="annot"><span class="annottext">n1 :: Name
</span><a href="#local-6989586621681342326"><span class="hs-identifier hs-var hs-var">n1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342328"><span class="hs-identifier hs-var">tc1</span></a></span><span>
</span><span id="line-2448"></span><span>            </span><span id="local-6989586621681342325"><span class="annot"><span class="annottext">n2 :: Name
</span><a href="#local-6989586621681342325"><span class="hs-identifier hs-var hs-var">n2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342327"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-2449"></span><span>            </span><span id="local-6989586621681342324"><span class="annot"><span class="annottext">different_names :: Bool
</span><a href="#local-6989586621681342324"><span class="hs-identifier hs-var hs-var">different_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342326"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342325"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-2450"></span><span>            </span><span id="local-6989586621681342323"><span class="annot"><span class="annottext">same_occ_names :: Bool
</span><a href="#local-6989586621681342323"><span class="hs-identifier hs-var hs-var">same_occ_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342326"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342325"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-2451"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342324"><span class="hs-identifier hs-var">different_names</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342323"><span class="hs-identifier hs-var">same_occ_names</span></a></span><span>
</span><span id="line-2452"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2453"></span><span>
</span><span id="line-2454"></span><span>    </span><span class="annot"><a href="#local-6989586621681342355"><span class="hs-identifier hs-type">cannot_resolve_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2455"></span><span>    </span><span id="local-6989586621681342355"><span class="annot"><span class="annottext">cannot_resolve_msg :: Ct -&gt; [ClsInst] -&gt; SDoc -&gt; SDoc
</span><a href="#local-6989586621681342355"><span class="hs-identifier hs-var hs-var">cannot_resolve_msg</span></a></span></span><span> </span><span id="local-6989586621681342322"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342322"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621681342321"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342321"><span class="hs-identifier hs-var">candidate_insts</span></a></span></span><span> </span><span id="local-6989586621681342320"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342320"><span class="hs-identifier hs-var">binds_msg</span></a></span></span><span>
</span><span id="line-2456"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342319"><span class="hs-identifier hs-var">no_inst_msg</span></a></span><span>
</span><span id="line-2457"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342318"><span class="hs-identifier hs-var">extra_note</span></a></span><span>
</span><span id="line-2458"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Implication] -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#pp_givens"><span class="hs-identifier hs-var">pp_givens</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var">useful_givens</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2459"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342317"><span class="hs-identifier hs-var">mb_patsyn_prov</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2460"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342316"><span class="hs-identifier hs-var">has_ambig_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var">useful_givens</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2461"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342315"><span class="hs-identifier hs-var">lead_with_ambig</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342314"><span class="hs-identifier hs-var">ambig_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342320"><span class="hs-identifier hs-var">binds_msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342313"><span class="hs-identifier hs-var">potential_msg</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2462"></span><span>
</span><span id="line-2463"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
</span><a href="#local-6989586621681342317"><span class="hs-identifier hs-var">mb_patsyn_prov</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2464"></span><span>                   </span><span class="hs-comment">-- Don't suggest fixes for the provided context of a pattern</span><span>
</span><span id="line-2465"></span><span>                   </span><span class="hs-comment">-- synonym; the right fix is to bind more in the pattern</span><span>
</span><span id="line-2466"></span><span>               </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#show_fixes"><span class="hs-identifier hs-var">show_fixes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Type -&gt; [Implication] -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#ctxtFixes"><span class="hs-identifier hs-var">ctxtFixes</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342316"><span class="hs-identifier hs-var">has_ambig_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342365"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-2467"></span><span>                           </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342310"><span class="hs-identifier hs-var">drv_fixes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2468"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342321"><span class="hs-identifier hs-var">candidate_insts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2469"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There are instances for similar types:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2470"></span><span>                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342321"><span class="hs-identifier hs-var">candidate_insts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2471"></span><span>                   </span><span class="hs-comment">-- See Note [Report candidate instances]</span><span>
</span><span id="line-2472"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-2473"></span><span>        </span><span id="local-6989586621681342309"><span class="annot"><span class="annottext">orig :: CtOrigin
</span><a href="#local-6989586621681342309"><span class="hs-identifier hs-var hs-var">orig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var">ctOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342322"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2474"></span><span>        </span><span class="hs-comment">-- See Note [Highlighting ambiguous type variables]</span><span>
</span><span id="line-2475"></span><span>        </span><span id="local-6989586621681342315"><span class="annot"><span class="annottext">lead_with_ambig :: Bool
</span><a href="#local-6989586621681342315"><span class="hs-identifier hs-var hs-var">lead_with_ambig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342316"><span class="hs-identifier hs-var">has_ambig_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRuntimeUnkSkol"><span class="hs-identifier hs-var">isRuntimeUnkSkol</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342307"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2476"></span><span>                        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var">useful_givens</span></a></span><span>
</span><span id="line-2477"></span><span>
</span><span id="line-2478"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681342316"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342316"><span class="hs-identifier hs-var">has_ambig_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342314"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342314"><span class="hs-identifier hs-var">ambig_msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ct -&gt; (Bool, SDoc)
</span><a href="GHC.Tc.Errors.html#mkAmbigMsg"><span class="hs-identifier hs-var">mkAmbigMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342315"><span class="hs-identifier hs-var">lead_with_ambig</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342322"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2479"></span><span>        </span><span id="local-6989586621681342307"><span class="annot"><span class="annottext">ambig_tvs :: [TcId]
</span><a href="#local-6989586621681342307"><span class="hs-identifier hs-var hs-var">ambig_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Tuple.html#uncurry"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; ([TcId], [TcId])
</span><a href="GHC.Tc.Errors.html#getAmbigTkvs"><span class="hs-identifier hs-var">getAmbigTkvs</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342322"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2480"></span><span>
</span><span id="line-2481"></span><span>        </span><span id="local-6989586621681342319"><span class="annot"><span class="annottext">no_inst_msg :: SDoc
</span><a href="#local-6989586621681342319"><span class="hs-identifier hs-var hs-var">no_inst_msg</span></a></span></span><span>
</span><span id="line-2482"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342315"><span class="hs-identifier hs-var">lead_with_ambig</span></a></span><span>
</span><span id="line-2483"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342314"><span class="hs-identifier hs-var">ambig_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprArising"><span class="hs-identifier hs-var">pprArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342309"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-2484"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;prevents the constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2485"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from being solved.&quot;</span></span><span>
</span><span id="line-2486"></span><span>
</span><span id="line-2487"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var">useful_givens</span></a></span><span>
</span><span id="line-2488"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342309"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No instance for&quot;</span></span><span>
</span><span id="line-2489"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2490"></span><span>
</span><span id="line-2491"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2492"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342309"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not deduce&quot;</span></span><span>
</span><span id="line-2493"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2494"></span><span>
</span><span id="line-2495"></span><span>        </span><span id="local-6989586621681342313"><span class="annot"><span class="annottext">potential_msg :: SDoc
</span><a href="#local-6989586621681342313"><span class="hs-identifier hs-var hs-var">potential_msg</span></a></span></span><span>
</span><span id="line-2496"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; Bool
</span><a href="#local-6989586621681342303"><span class="hs-identifier hs-var">want_potential</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342309"><span class="hs-identifier hs-var">orig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2497"></span><span>            </span><span class="annot"><span class="annottext">forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintPotentialInstances"><span class="hs-identifier hs-var">sdocPrintPotentialInstances</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681342301"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342301"><span class="hs-identifier hs-var">print_insts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2498"></span><span>            </span><span class="annot"><span class="annottext">(PprStyle -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#getPprStyle"><span class="hs-identifier hs-var">getPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681342299"><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681342299"><span class="hs-identifier hs-var">sty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2499"></span><span>            </span><span class="annot"><span class="annottext">PrintPotentialInstances -&gt; PprStyle -&gt; SDoc -&gt; [ClsInst] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprPotentials"><span class="hs-identifier hs-var">pprPotentials</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; PrintPotentialInstances
</span><a href="GHC.Tc.Errors.html#PrintPotentialInstances"><span class="hs-identifier hs-var">PrintPotentialInstances</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342301"><span class="hs-identifier hs-var">print_insts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681342299"><span class="hs-identifier hs-var">sty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342296"><span class="hs-identifier hs-var">potential_hdr</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span>
</span><span id="line-2500"></span><span>
</span><span id="line-2501"></span><span>        </span><span id="local-6989586621681342296"><span class="annot"><span class="annottext">potential_hdr :: SDoc
</span><a href="#local-6989586621681342296"><span class="hs-identifier hs-var hs-var">potential_hdr</span></a></span></span><span>
</span><span id="line-2502"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342315"><span class="hs-identifier hs-var">lead_with_ambig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2503"></span><span>                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Probable fix: use a type annotation to specify what&quot;</span></span><span>
</span><span id="line-2504"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342307"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;should be.&quot;</span></span><span>
</span><span id="line-2505"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;These potential instance&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span>
</span><span id="line-2506"></span><span>                   </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exist:&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-2507"></span><span>
</span><span id="line-2508"></span><span>        </span><span class="annot"><a href="#local-6989586621681342317"><span class="hs-identifier hs-type">mb_patsyn_prov</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2509"></span><span>        </span><span id="local-6989586621681342317"><span class="annot"><span class="annottext">mb_patsyn_prov :: Maybe SDoc
</span><a href="#local-6989586621681342317"><span class="hs-identifier hs-var hs-var">mb_patsyn_prov</span></a></span></span><span>
</span><span id="line-2510"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342315"><span class="hs-identifier hs-var">lead_with_ambig</span></a></span><span>
</span><span id="line-2511"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ProvCtxtOrigin"><span class="hs-identifier hs-type">ProvCtxtOrigin</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342291"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621681342291"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342309"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-2512"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In other words, a successful match on the pattern&quot;</span></span><span>
</span><span id="line-2513"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621681342291"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-2514"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;does not provide the constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342351"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2515"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2516"></span><span>
</span><span id="line-2517"></span><span>    </span><span class="hs-comment">-- Report &quot;potential instances&quot; only when the constraint arises</span><span>
</span><span id="line-2518"></span><span>    </span><span class="hs-comment">-- directly from the user's use of an overloaded function</span><span>
</span><span id="line-2519"></span><span>    </span><span id="local-6989586621681342303"><span class="annot"><span class="annottext">want_potential :: CtOrigin -&gt; Bool
</span><a href="#local-6989586621681342303"><span class="hs-identifier hs-var hs-var">want_potential</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TypeEqOrigin"><span class="hs-identifier hs-type">TypeEqOrigin</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2520"></span><span>    </span><span class="annot"><a href="#local-6989586621681342303"><span class="hs-identifier hs-var">want_potential</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2521"></span><span>
</span><span id="line-2522"></span><span>    </span><span id="local-6989586621681342318"><span class="annot"><span class="annottext">extra_note :: SDoc
</span><a href="#local-6989586621681342318"><span class="hs-identifier hs-var hs-var">extra_note</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isFunTy"><span class="hs-identifier hs-var">isFunTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; [Type]
</span><a href="GHC.Core.Type.html#filterOutInvisibleTypes"><span class="hs-identifier hs-var">filterOutInvisibleTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; TyCon
</span><a href="GHC.Core.Class.html#classTyCon"><span class="hs-identifier hs-var">classTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2523"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(maybe you haven't applied a function to enough arguments?)&quot;</span></span><span>
</span><span id="line-2524"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Class -&gt; Name
</span><a href="GHC.Core.Class.html#className"><span class="hs-identifier hs-var">className</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#typeableClassName"><span class="hs-identifier hs-var">typeableClassName</span></a></span><span>  </span><span class="hs-comment">-- Avoid mysterious &quot;No instance for (Typeable T)</span><span>
</span><span id="line-2525"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681342286"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342286"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span>                        </span><span class="hs-comment">-- Look for (Typeable (k-&gt;*) (T k))</span><span>
</span><span id="line-2526"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342285"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342285"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342286"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2527"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeFamilyTyCon"><span class="hs-identifier hs-var">isTypeFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681342285"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2528"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC can't yet do polykinded&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2529"></span><span>                    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Typeable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2530"></span><span>                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342286"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#tcTypeKind"><span class="hs-identifier hs-var">tcTypeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342286"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2531"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2532"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2533"></span><span>
</span><span id="line-2534"></span><span>    </span><span id="local-6989586621681342310"><span class="annot"><span class="annottext">drv_fixes :: [SDoc]
</span><a href="#local-6989586621681342310"><span class="hs-identifier hs-var hs-var">drv_fixes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342352"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2535"></span><span>                   </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="GHC.Tc.Types.Origin.html#DerivClauseOrigin"><span class="hs-identifier hs-var">DerivClauseOrigin</span></a></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621681342283"><span class="hs-identifier hs-var">drv_fix</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">]</span><span>
</span><span id="line-2536"></span><span>                   </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="GHC.Tc.Types.Origin.html#StandAloneDerivOrigin"><span class="hs-identifier hs-var">StandAloneDerivOrigin</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621681342283"><span class="hs-identifier hs-var">drv_fix</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">]</span><span>
</span><span id="line-2537"></span><span>                   </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DerivOriginDC"><span class="hs-identifier hs-type">DerivOriginDC</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>       </span><span id="local-6989586621681342280"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342280"><span class="hs-identifier hs-var">standalone</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621681342283"><span class="hs-identifier hs-var">drv_fix</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342280"><span class="hs-identifier hs-var">standalone</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2538"></span><span>                   </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DerivOriginCoerce"><span class="hs-identifier hs-type">DerivOriginCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342278"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342278"><span class="hs-identifier hs-var">standalone</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621681342283"><span class="hs-identifier hs-var">drv_fix</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342278"><span class="hs-identifier hs-var">standalone</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2539"></span><span>                   </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2540"></span><span>
</span><span id="line-2541"></span><span>    </span><span id="local-6989586621681342283"><span class="annot"><span class="annottext">drv_fix :: Bool -&gt; SDoc
</span><a href="#local-6989586621681342283"><span class="hs-identifier hs-var hs-var">drv_fix</span></a></span></span><span> </span><span id="local-6989586621681342277"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342277"><span class="hs-identifier hs-var">standalone_wildcard</span></a></span></span><span>
</span><span id="line-2542"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342277"><span class="hs-identifier hs-var">standalone_wildcard</span></a></span><span>
</span><span id="line-2543"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fill in the wildcard constraint yourself&quot;</span></span><span>
</span><span id="line-2544"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2545"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;use a standalone 'deriving instance' declaration,&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2546"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;so you can specify the instance context yourself&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2547"></span><span>
</span><span id="line-2548"></span><span>    </span><span class="hs-comment">-- Normal overlap error</span><span>
</span><span id="line-2549"></span><span>    </span><span id="local-6989586621681342354"><span class="annot"><span class="annottext">overlap_msg :: SDoc
</span><a href="#local-6989586621681342354"><span class="hs-identifier hs-var hs-var">overlap_msg</span></a></span></span><span>
</span><span id="line-2550"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">matches</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2551"></span><span>        </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span>  </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342352"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Overlapping instances for&quot;</span></span><span>
</span><span id="line-2552"></span><span>                                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [Type] -&gt; Type
</span><a href="GHC.Core.Predicate.html#mkClassPred"><span class="hs-identifier hs-var">mkClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2553"></span><span>
</span><span id="line-2554"></span><span>             </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342275"><span class="hs-identifier hs-var">matching_givens</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2555"></span><span>                  </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Matching givens (or their superclasses):&quot;</span></span><span>
</span><span id="line-2556"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342275"><span class="hs-identifier hs-var">matching_givens</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2557"></span><span>
</span><span id="line-2558"></span><span>             </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintPotentialInstances"><span class="hs-identifier hs-var">sdocPrintPotentialInstances</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681342274"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342274"><span class="hs-identifier hs-var">print_insts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2559"></span><span>                </span><span class="annot"><span class="annottext">(PprStyle -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#getPprStyle"><span class="hs-identifier hs-var">getPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681342273"><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681342273"><span class="hs-identifier hs-var">sty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2560"></span><span>                </span><span class="annot"><span class="annottext">PrintPotentialInstances -&gt; PprStyle -&gt; SDoc -&gt; [ClsInst] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprPotentials"><span class="hs-identifier hs-var">pprPotentials</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; PrintPotentialInstances
</span><a href="GHC.Tc.Errors.html#PrintPotentialInstances"><span class="hs-identifier hs-var">PrintPotentialInstances</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342274"><span class="hs-identifier hs-var">print_insts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681342273"><span class="hs-identifier hs-var">sty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Matching instances:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2561"></span><span>                </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342348"><span class="hs-identifier hs-var">ispecs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span>
</span><span id="line-2562"></span><span>
</span><span id="line-2563"></span><span>             </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342275"><span class="hs-identifier hs-var">matching_givens</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isSingleton"><span class="hs-identifier hs-var">isSingleton</span></a></span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342363"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342362"><span class="hs-identifier hs-var">unifiers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2564"></span><span>                </span><span class="hs-comment">-- Intuitively, some given matched the wanted in their</span><span>
</span><span id="line-2565"></span><span>                </span><span class="hs-comment">-- flattened or rewritten (from given equalities) form</span><span>
</span><span id="line-2566"></span><span>                </span><span class="hs-comment">-- but the matcher can't figure that out because the</span><span>
</span><span id="line-2567"></span><span>                </span><span class="hs-comment">-- constraints are non-flat and non-rewritten so we</span><span>
</span><span id="line-2568"></span><span>                </span><span class="hs-comment">-- simply report back the whole given</span><span>
</span><span id="line-2569"></span><span>                </span><span class="hs-comment">-- context. Accelerate Smart.hs showed this problem.</span><span>
</span><span id="line-2570"></span><span>                  </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There exists a (perhaps superclass) match:&quot;</span></span><span>
</span><span id="line-2571"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Implication] -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#pp_givens"><span class="hs-identifier hs-var">pp_givens</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var">useful_givens</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2572"></span><span>
</span><span id="line-2573"></span><span>             </span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isSingleton"><span class="hs-identifier hs-var">isSingleton</span></a></span><span> </span><span class="annot"><span class="annottext">[InstMatch]
</span><a href="#local-6989586621681342363"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2574"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342272"><span class="hs-identifier hs-var">tyCoVars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2575"></span><span>                                 </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The choice depends on the instantiation of&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2576"></span><span>                                   </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342272"><span class="hs-identifier hs-var">tyCoVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2577"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621681342270"><span class="hs-identifier hs-var">famTyCons</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2578"></span><span>                                 </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342272"><span class="hs-identifier hs-var">tyCoVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2579"></span><span>                                   </span><span class="hs-keyword">then</span><span>
</span><span id="line-2580"></span><span>                                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The choice depends on the result of evaluating&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2581"></span><span>                                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621681342270"><span class="hs-identifier hs-var">famTyCons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2582"></span><span>                                   </span><span class="hs-keyword">else</span><span>
</span><span id="line-2583"></span><span>                                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and the result of evaluating&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2584"></span><span>                                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621681342270"><span class="hs-identifier hs-var">famTyCons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2585"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342275"><span class="hs-identifier hs-var">matching_givens</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2586"></span><span>                               </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;To pick the first instance above, use IncoherentInstances&quot;</span></span><span>
</span><span id="line-2587"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;when compiling the other instance declarations&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-2588"></span><span>                        </span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2589"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-2590"></span><span>        </span><span id="local-6989586621681342272"><span class="annot"><span class="annottext">tyCoVars :: [TcId]
</span><a href="#local-6989586621681342272"><span class="hs-identifier hs-var hs-var">tyCoVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [TcId]
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypesList"><span class="hs-identifier hs-var">tyCoVarsOfTypesList</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-2591"></span><span>        </span><span id="local-6989586621681342270"><span class="annot"><span class="annottext">famTyCons :: [TyCon]
</span><a href="#local-6989586621681342270"><span class="hs-identifier hs-var hs-var">famTyCons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isFamilyTyCon"><span class="hs-identifier hs-var">isFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall elt. UniqSet elt -&gt; [elt]
</span><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier hs-var">nonDetEltsUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; UniqSet TyCon
</span><a href="GHC.Core.Type.html#tyConsOfType"><span class="hs-identifier hs-var">tyConsOfType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-2592"></span><span>
</span><span id="line-2593"></span><span>    </span><span id="local-6989586621681342275"><span class="annot"><span class="annottext">matching_givens :: [SDoc]
</span><a href="#local-6989586621681342275"><span class="hs-identifier hs-var hs-var">matching_givens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Maybe SDoc
</span><a href="#local-6989586621681342265"><span class="hs-identifier hs-var">matchable</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342344"><span class="hs-identifier hs-var">useful_givens</span></a></span><span>
</span><span id="line-2594"></span><span>
</span><span id="line-2595"></span><span>    </span><span id="local-6989586621681342265"><span class="annot"><span class="annottext">matchable :: Implication -&gt; Maybe SDoc
</span><a href="#local-6989586621681342265"><span class="hs-identifier hs-var hs-var">matchable</span></a></span></span><span> </span><span id="local-6989586621681342264"><span class="annot"><span class="annottext">implic :: Implication
</span><a href="#local-6989586621681342264"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342263"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342263"><span class="hs-identifier hs-var">evvars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681342262"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342262"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2596"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342261"><span class="hs-identifier hs-var">ev_vars_matching</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2597"></span><span>             </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2598"></span><span>             </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTheta"><span class="hs-identifier hs-var">pprTheta</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342261"><span class="hs-identifier hs-var">ev_vars_matching</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2599"></span><span>                            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bound by&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342262"><span class="hs-identifier hs-var">skol_info</span></a></span><span>
</span><span id="line-2600"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2601"></span><span>                                     </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclEnv -&gt; RealSrcSpan
</span><a href="GHC.Tc.Types.html#tcl_loc"><span class="hs-identifier hs-var">tcl_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342264"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2602"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681342261"><span class="annot"><span class="annottext">ev_vars_matching :: [Type]
</span><a href="#local-6989586621681342261"><span class="hs-identifier hs-var hs-var">ev_vars_matching</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342260"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2603"></span><span>                                 </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681342259"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342259"><span class="hs-identifier hs-var">ev_var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342263"><span class="hs-identifier hs-var">evvars</span></a></span><span>
</span><span id="line-2604"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342260"><span class="annot"><span class="annottext">pred :: Type
</span><a href="#local-6989586621681342260"><span class="hs-identifier hs-var hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342259"><span class="hs-identifier hs-var">ev_var</span></a></span><span>
</span><span id="line-2605"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621681342258"><span class="hs-identifier hs-var">can_match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342260"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
</span><a href="GHC.Tc.Utils.TcType.html#transSuperClasses"><span class="hs-identifier hs-var">transSuperClasses</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342260"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2606"></span><span>              </span><span id="local-6989586621681342258"><span class="annot"><span class="annottext">can_match :: Type -&gt; Bool
</span><a href="#local-6989586621681342258"><span class="hs-identifier hs-var hs-var">can_match</span></a></span></span><span> </span><span id="local-6989586621681342257"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342257"><span class="hs-identifier hs-var">pred</span></a></span></span><span>
</span><span id="line-2607"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Class, [Type])
</span><a href="GHC.Core.Predicate.html#getClassPredTys_maybe"><span class="hs-identifier hs-var">getClassPredTys_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342257"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2608"></span><span>                     </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342255"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342255"><span class="hs-identifier hs-var">clas'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342254"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342254"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342255"><span class="hs-identifier hs-var">clas'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span><span>
</span><span id="line-2609"></span><span>                                          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Maybe TCvSubst
</span><a href="GHC.Core.Unify.html#tcMatchTys"><span class="hs-identifier hs-var">tcMatchTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342254"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2610"></span><span>                     </span><span class="annot"><span class="annottext">Maybe (Class, [Type])
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2611"></span><span>
</span><span id="line-2612"></span><span>    </span><span class="hs-comment">-- Overlap error because of Safe Haskell (first</span><span>
</span><span id="line-2613"></span><span>    </span><span class="hs-comment">-- match should be the most specific match)</span><span>
</span><span id="line-2614"></span><span>    </span><span id="local-6989586621681342353"><span class="annot"><span class="annottext">safe_haskell_msg :: SDoc
</span><a href="#local-6989586621681342353"><span class="hs-identifier hs-var hs-var">safe_haskell_msg</span></a></span></span><span>
</span><span id="line-2615"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">matches</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">lengthIs</span><span class="hs-special">`</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-operator">&amp;&amp;</span><span> </span><span class="hs-identifier">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">null</span><span> </span><span class="hs-identifier">unsafe_ispecs</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2616"></span><span>       </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#addArising"><span class="hs-identifier hs-var">addArising</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342352"><span class="hs-identifier hs-var">orig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unsafe overlapping instances for&quot;</span></span><span>
</span><span id="line-2617"></span><span>                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [Type] -&gt; Type
</span><a href="GHC.Core.Predicate.html#mkClassPred"><span class="hs-identifier hs-var">mkClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681342350"><span class="hs-identifier hs-var">clas</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681342349"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2618"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The matching instance is:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-2619"></span><span>                   </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClsInst -&gt; SDoc
</span><a href="GHC.Core.InstEnv.html#pprInstance"><span class="hs-identifier hs-var">pprInstance</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342348"><span class="hs-identifier hs-var">ispecs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2620"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;It is compiled in a Safe module and as such can only&quot;</span></span><span>
</span><span id="line-2621"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;overlap instances from the same module, however it&quot;</span></span><span>
</span><span id="line-2622"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;overlaps the following instances from different&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-2623"></span><span>                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;modules:&quot;</span></span><span>
</span><span id="line-2624"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[ClsInst] -&gt; SDoc
</span><a href="GHC.Core.InstEnv.html#pprInstances"><span class="hs-identifier hs-var">pprInstances</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342346"><span class="hs-identifier hs-var">unsafe_ispecs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2625"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-2626"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-2627"></span><span>
</span><span id="line-2628"></span><span>
</span><span id="line-2629"></span><span class="annot"><a href="GHC.Tc.Errors.html#ctxtFixes"><span class="hs-identifier hs-type">ctxtFixes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2630"></span><span id="ctxtFixes"><span class="annot"><span class="annottext">ctxtFixes :: Bool -&gt; Type -&gt; [Implication] -&gt; [SDoc]
</span><a href="GHC.Tc.Errors.html#ctxtFixes"><span class="hs-identifier hs-var hs-var">ctxtFixes</span></a></span></span><span> </span><span id="local-6989586621681342249"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342249"><span class="hs-identifier hs-var">has_ambig_tvs</span></a></span></span><span> </span><span id="local-6989586621681342248"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342248"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span id="local-6989586621681342247"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342247"><span class="hs-identifier hs-var">implics</span></a></span></span><span>
</span><span id="line-2631"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342249"><span class="hs-identifier hs-var">has_ambig_tvs</span></a></span><span>
</span><span id="line-2632"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isTyVarClassPred"><span class="hs-identifier hs-var">isTyVarClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342248"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2633"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342245"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342245"><span class="hs-identifier hs-var">skol</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681342244"><span class="annot"><span class="annottext">[SkolemInfo]
</span><a href="#local-6989586621681342244"><span class="hs-identifier hs-var">skols</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; Type -&gt; [SkolemInfo]
</span><a href="GHC.Tc.Errors.html#usefulContext"><span class="hs-identifier hs-var">usefulContext</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342247"><span class="hs-identifier hs-var">implics</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342248"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2634"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342242"><span class="annot"><span class="annottext">what :: SDoc
</span><a href="#local-6989586621681342242"><span class="hs-identifier hs-var hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[SkolemInfo]
</span><a href="#local-6989586621681342244"><span class="hs-identifier hs-var">skols</span></a></span><span>
</span><span id="line-2635"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-type">SigSkol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSynCtxt"><span class="hs-identifier hs-type">PatSynCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Name, TcId)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342245"><span class="hs-identifier hs-var">skol</span></a></span><span>
</span><span id="line-2636"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;required\&quot;&quot;</span></span><span>
</span><span id="line-2637"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2638"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2639"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;add&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342248"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2640"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to the&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342242"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;context of&quot;</span></span><span>
</span><span id="line-2641"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo -&gt; SDoc
</span><a href="#local-6989586621681342240"><span class="hs-identifier hs-var">ppr_skol</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342245"><span class="hs-identifier hs-var">skol</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-2642"></span><span>                    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo -&gt; SDoc
</span><a href="#local-6989586621681342240"><span class="hs-identifier hs-var">ppr_skol</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342239"><span class="hs-identifier hs-var">skol</span></a></span><span>
</span><span id="line-2643"></span><span>                         </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681342239"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342239"><span class="hs-identifier hs-var">skol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[SkolemInfo]
</span><a href="#local-6989586621681342244"><span class="hs-identifier hs-var">skols</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2644"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2645"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2646"></span><span>    </span><span id="local-6989586621681342240"><span class="annot"><span class="annottext">ppr_skol :: SkolemInfo -&gt; SDoc
</span><a href="#local-6989586621681342240"><span class="hs-identifier hs-var hs-var">ppr_skol</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSkol"><span class="hs-identifier hs-type">PatSkol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681342232"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681342232"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the data constructor&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681342232"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2647"></span><span>    </span><span class="annot"><a href="#local-6989586621681342240"><span class="hs-identifier hs-var">ppr_skol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSkol"><span class="hs-identifier hs-type">PatSkol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span id="local-6989586621681342230"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681342230"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the pattern synonym&quot;</span></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621681342230"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2648"></span><span>    </span><span class="annot"><a href="#local-6989586621681342240"><span class="hs-identifier hs-var">ppr_skol</span></a></span><span> </span><span id="local-6989586621681342229"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342229"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342229"><span class="hs-identifier hs-var">skol_info</span></a></span><span>
</span><span id="line-2649"></span><span>
</span><span id="line-2650"></span><span class="annot"><a href="GHC.Tc.Errors.html#discardProvCtxtGivens"><span class="hs-identifier hs-type">discardProvCtxtGivens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2651"></span><span id="discardProvCtxtGivens"><span class="annot"><span class="annottext">discardProvCtxtGivens :: CtOrigin -&gt; [Implication] -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#discardProvCtxtGivens"><span class="hs-identifier hs-var hs-var">discardProvCtxtGivens</span></a></span></span><span> </span><span id="local-6989586621681342228"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342228"><span class="hs-identifier hs-var">orig</span></a></span></span><span> </span><span id="local-6989586621681342227"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342227"><span class="hs-identifier hs-var">givens</span></a></span></span><span>  </span><span class="hs-comment">-- See Note [discardProvCtxtGivens]</span><span>
</span><span id="line-2652"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ProvCtxtOrigin"><span class="hs-identifier hs-type">ProvCtxtOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342225"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342225"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342228"><span class="hs-identifier hs-var">orig</span></a></span><span>
</span><span id="line-2653"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Implication -&gt; Bool
</span><a href="#local-6989586621681342224"><span class="hs-identifier hs-var">discard</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342225"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342227"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-2654"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2655"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342227"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-2656"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2657"></span><span>    </span><span id="local-6989586621681342224"><span class="annot"><span class="annottext">discard :: Name -&gt; Implication -&gt; Bool
</span><a href="#local-6989586621681342224"><span class="hs-identifier hs-var hs-var">discard</span></a></span></span><span> </span><span id="local-6989586621681342222"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342222"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-type">SigSkol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSynCtxt"><span class="hs-identifier hs-type">PatSynCtxt</span></a></span><span> </span><span id="local-6989586621681342221"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342221"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Name, TcId)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342222"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342221"><span class="hs-identifier hs-var">n'</span></a></span><span>
</span><span id="line-2658"></span><span>    </span><span class="annot"><a href="#local-6989586621681342224"><span class="hs-identifier hs-var">discard</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Implication
</span><span class="hs-identifier">_</span></span><span>                                                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2659"></span><span>
</span><span id="line-2660"></span><span class="annot"><a href="GHC.Tc.Errors.html#usefulContext"><span class="hs-identifier hs-type">usefulContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfo"><span class="hs-identifier hs-type">SkolemInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2661"></span><span class="hs-comment">-- usefulContext picks out the implications whose context</span><span>
</span><span id="line-2662"></span><span class="hs-comment">-- the programmer might plausibly augment to solve 'pred'</span><span>
</span><span id="line-2663"></span><span id="usefulContext"><span class="annot"><span class="annottext">usefulContext :: [Implication] -&gt; Type -&gt; [SkolemInfo]
</span><a href="GHC.Tc.Errors.html#usefulContext"><span class="hs-identifier hs-var hs-var">usefulContext</span></a></span></span><span> </span><span id="local-6989586621681342220"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342220"><span class="hs-identifier hs-var">implics</span></a></span></span><span> </span><span id="local-6989586621681342219"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342219"><span class="hs-identifier hs-var">pred</span></a></span></span><span>
</span><span id="line-2664"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; [SkolemInfo]
</span><a href="#local-6989586621681342218"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342220"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-2665"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2666"></span><span>    </span><span id="local-6989586621681342217"><span class="annot"><span class="annottext">pred_tvs :: TyCoVarSet
</span><a href="#local-6989586621681342217"><span class="hs-identifier hs-var hs-var">pred_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342219"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-2667"></span><span>    </span><span id="local-6989586621681342218"><span class="annot"><span class="annottext">go :: [Implication] -&gt; [SkolemInfo]
</span><a href="#local-6989586621681342218"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2668"></span><span>    </span><span class="annot"><a href="#local-6989586621681342218"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342216"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342216"><span class="hs-identifier hs-var">ic</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681342215"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342215"><span class="hs-identifier hs-var">ics</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2669"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Bool
</span><a href="#local-6989586621681342214"><span class="hs-identifier hs-var">implausible</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342216"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SkolemInfo]
</span><a href="#local-6989586621681342213"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2670"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342216"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SkolemInfo]
</span><a href="#local-6989586621681342213"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-2671"></span><span>       </span><span class="hs-keyword">where</span><span>
</span><span id="line-2672"></span><span>          </span><span class="hs-comment">-- Stop when the context binds a variable free in the predicate</span><span>
</span><span id="line-2673"></span><span>          </span><span id="local-6989586621681342213"><span class="annot"><span class="annottext">rest :: [SkolemInfo]
</span><a href="#local-6989586621681342213"><span class="hs-identifier hs-var hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; TyCoVarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342217"><span class="hs-identifier hs-var">pred_tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342216"><span class="hs-identifier hs-var">ic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2674"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; [SkolemInfo]
</span><a href="#local-6989586621681342218"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342215"><span class="hs-identifier hs-var">ics</span></a></span><span>
</span><span id="line-2675"></span><span>
</span><span id="line-2676"></span><span>    </span><span id="local-6989586621681342214"><span class="annot"><span class="annottext">implausible :: Implication -&gt; Bool
</span><a href="#local-6989586621681342214"><span class="hs-identifier hs-var hs-var">implausible</span></a></span></span><span> </span><span id="local-6989586621681342211"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342211"><span class="hs-identifier hs-var">ic</span></a></span></span><span>
</span><span id="line-2677"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342211"><span class="hs-identifier hs-var">ic</span></a></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2678"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SkolemInfo -&gt; Bool
</span><a href="#local-6989586621681342210"><span class="hs-identifier hs-var">implausible_info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342211"><span class="hs-identifier hs-var">ic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2679"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2680"></span><span>
</span><span id="line-2681"></span><span>    </span><span id="local-6989586621681342210"><span class="annot"><span class="annottext">implausible_info :: SkolemInfo -&gt; Bool
</span><a href="#local-6989586621681342210"><span class="hs-identifier hs-var hs-var">implausible_info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-type">SigSkol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InfSigCtxt"><span class="hs-identifier hs-type">InfSigCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Name, TcId)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2682"></span><span>    </span><span class="annot"><a href="#local-6989586621681342210"><span class="hs-identifier hs-var">implausible_info</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><span class="hs-identifier">_</span></span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2683"></span><span>    </span><span class="hs-comment">-- Do not suggest adding constraints to an *inferred* type signature</span><span>
</span><span id="line-2684"></span><span>
</span><span id="line-2685"></span><span class="hs-comment">{- Note [Report candidate instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If we have an unsolved (Num Int), where `Int` is not the Prelude Int,
but comes from some other module, then it may be helpful to point out
that there are some similarly named instances elsewhere.  So we get
something like
    No instance for (Num Int) arising from the literal &#8216;3&#8217;
    There are instances for similar types:
      instance Num GHC.Types.Int -- Defined in &#8216;GHC.Num&#8217;
Discussion in #9611.

Note [Highlighting ambiguous type variables]
~-------------------------------------------
When we encounter ambiguous type variables (i.e. type variables
that remain metavariables after type inference), we need a few more
conditions before we can reason that *ambiguity* prevents constraints
from being solved:
  - We can't have any givens, as encountering a typeclass error
    with given constraints just means we couldn't deduce
    a solution satisfying those constraints and as such couldn't
    bind the type variable to a known type.
  - If we don't have any unifiers, we don't even have potential
    instances from which an ambiguity could arise.
  - Lastly, I don't want to mess with error reporting for
    unknown runtime types so we just fall back to the old message there.
Once these conditions are satisfied, we can safely say that ambiguity prevents
the constraint from being solved.

Note [discardProvCtxtGivens]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
In most situations we call all enclosing implications &quot;useful&quot;. There is one
exception, and that is when the constraint that causes the error is from the
&quot;provided&quot; context of a pattern synonym declaration:

  pattern Pat :: (Num a, Eq a) =&gt; Show a   =&gt; a -&gt; Maybe a
             --  required      =&gt; provided =&gt; type
  pattern Pat x &lt;- (Just x, 4)

When checking the pattern RHS we must check that it does actually bind all
the claimed &quot;provided&quot; constraints; in this case, does the pattern (Just x, 4)
bind the (Show a) constraint.  Answer: no!

But the implication we generate for this will look like
   forall a. (Num a, Eq a) =&gt; [W] Show a
because when checking the pattern we must make the required
constraints available, since they are needed to match the pattern (in
this case the literal '4' needs (Num a, Eq a)).

BUT we don't want to suggest adding (Show a) to the &quot;required&quot; constraints
of the pattern synonym, thus:
  pattern Pat :: (Num a, Eq a, Show a) =&gt; Show a =&gt; a -&gt; Maybe a
It would then typecheck but it's silly.  We want the /pattern/ to bind
the alleged &quot;provided&quot; constraints, Show a.

So we suppress that Implication in discardProvCtxtGivens.  It's
painfully ad-hoc but the truth is that adding it to the &quot;required&quot;
constraints would work.  Suppressing it solves two problems.  First,
we never tell the user that we could not deduce a &quot;provided&quot;
constraint from the &quot;required&quot; context. Second, we never give a
possible fix that suggests to add a &quot;provided&quot; constraint to the
&quot;required&quot; context.

For example, without this distinction the above code gives a bad error
message (showing both problems):

  error: Could not deduce (Show a) ... from the context: (Eq a)
         ... Possible fix: add (Show a) to the context of
         the signature for pattern synonym `Pat' ...

-}</span><span>
</span><span id="line-2755"></span><span>
</span><span id="line-2756"></span><span class="annot"><a href="GHC.Tc.Errors.html#show_fixes"><span class="hs-identifier hs-type">show_fixes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2757"></span><span id="show_fixes"><span class="annot"><span class="annottext">show_fixes :: [SDoc] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#show_fixes"><span class="hs-identifier hs-var hs-var">show_fixes</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2758"></span><span class="annot"><a href="GHC.Tc.Errors.html#show_fixes"><span class="hs-identifier hs-var">show_fixes</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342208"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342208"><span class="hs-identifier hs-var">f</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681342207"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342207"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Possible fix:&quot;</span></span><span>
</span><span id="line-2759"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342208"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342207"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2760"></span><span>
</span><span id="line-2761"></span><span>
</span><span id="line-2762"></span><span class="hs-comment">-- Avoid boolean blindness</span><span>
</span><span id="line-2763"></span><span class="hs-keyword">newtype</span><span> </span><span id="PrintPotentialInstances"><span class="annot"><a href="GHC.Tc.Errors.html#PrintPotentialInstances"><span class="hs-identifier hs-var">PrintPotentialInstances</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrintPotentialInstances"><span class="annot"><a href="GHC.Tc.Errors.html#PrintPotentialInstances"><span class="hs-identifier hs-var">PrintPotentialInstances</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2764"></span><span>
</span><span id="line-2765"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprPotentials"><span class="hs-identifier hs-type">pprPotentials</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#PrintPotentialInstances"><span class="hs-identifier hs-type">PrintPotentialInstances</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PprStyle"><span class="hs-identifier hs-type">PprStyle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2766"></span><span class="hs-comment">-- See Note [Displaying potential instances]</span><span>
</span><span id="line-2767"></span><span id="pprPotentials"><span class="annot"><span class="annottext">pprPotentials :: PrintPotentialInstances -&gt; PprStyle -&gt; SDoc -&gt; [ClsInst] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprPotentials"><span class="hs-identifier hs-var hs-var">pprPotentials</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#PrintPotentialInstances"><span class="hs-identifier hs-type">PrintPotentialInstances</span></a></span><span> </span><span id="local-6989586621681342206"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342206"><span class="hs-identifier hs-var">show_potentials</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681342205"><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681342205"><span class="hs-identifier hs-var">sty</span></a></span></span><span> </span><span id="local-6989586621681342204"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342204"><span class="hs-identifier hs-var">herald</span></a></span></span><span> </span><span id="local-6989586621681342203"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342203"><span class="hs-identifier hs-var">insts</span></a></span></span><span>
</span><span id="line-2768"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342203"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-2769"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2770"></span><span>
</span><span id="line-2771"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342202"><span class="hs-identifier hs-var">show_these</span></a></span><span>
</span><span id="line-2772"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342204"><span class="hs-identifier hs-var">herald</span></a></span><span>
</span><span id="line-2773"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681342201"><span class="hs-identifier hs-var">not_in_scope_msg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2774"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342200"><span class="hs-identifier hs-var">flag_hint</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2775"></span><span>
</span><span id="line-2776"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2777"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342204"><span class="hs-identifier hs-var">herald</span></a></span><span>
</span><span id="line-2778"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[ClsInst] -&gt; SDoc
</span><a href="GHC.Core.InstEnv.html#pprInstances"><span class="hs-identifier hs-var">pprInstances</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342202"><span class="hs-identifier hs-var">show_these</span></a></span><span>
</span><span id="line-2779"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342199"><span class="hs-identifier hs-var">n_in_scope_hidden</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2780"></span><span>                 </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...plus&quot;</span></span><span>
</span><span id="line-2781"></span><span>                   </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#speakNOf"><span class="hs-identifier hs-var">speakNOf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342199"><span class="hs-identifier hs-var">n_in_scope_hidden</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2782"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681342201"><span class="hs-identifier hs-var">not_in_scope_msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...plus&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2783"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342200"><span class="hs-identifier hs-var">flag_hint</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2784"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2785"></span><span>    </span><span id="local-6989586621681342197"><span class="annot"><span class="annottext">n_show :: Int
</span><a href="#local-6989586621681342197"><span class="hs-identifier hs-var hs-var">n_show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-2786"></span><span>
</span><span id="line-2787"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342196"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342196"><span class="hs-identifier hs-var">in_scope</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342195"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342195"><span class="hs-identifier hs-var">not_in_scope</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInst -&gt; Bool
</span><a href="#local-6989586621681342194"><span class="hs-identifier hs-var">inst_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342203"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-2788"></span><span>    </span><span id="local-6989586621681342193"><span class="annot"><span class="annottext">sorted :: [ClsInst]
</span><a href="#local-6989586621681342193"><span class="hs-identifier hs-var hs-var">sorted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#sortBy"><span class="hs-identifier hs-var">sortBy</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInst -&gt; ClsInst -&gt; Ordering
</span><a href="GHC.Core.InstEnv.html#fuzzyClsInstCmp"><span class="hs-identifier hs-var">fuzzyClsInstCmp</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342196"><span class="hs-identifier hs-var">in_scope</span></a></span><span>
</span><span id="line-2789"></span><span>    </span><span id="local-6989586621681342202"><span class="annot"><span class="annottext">show_these :: [ClsInst]
</span><a href="#local-6989586621681342202"><span class="hs-identifier hs-var hs-var">show_these</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342206"><span class="hs-identifier hs-var">show_potentials</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342193"><span class="hs-identifier hs-var">sorted</span></a></span><span>
</span><span id="line-2790"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#take"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342197"><span class="hs-identifier hs-var">n_show</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342193"><span class="hs-identifier hs-var">sorted</span></a></span><span>
</span><span id="line-2791"></span><span>    </span><span id="local-6989586621681342199"><span class="annot"><span class="annottext">n_in_scope_hidden :: Int
</span><a href="#local-6989586621681342199"><span class="hs-identifier hs-var hs-var">n_in_scope_hidden</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342193"><span class="hs-identifier hs-var">sorted</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342202"><span class="hs-identifier hs-var">show_these</span></a></span><span>
</span><span id="line-2792"></span><span>
</span><span id="line-2793"></span><span>       </span><span class="hs-comment">-- &quot;in scope&quot; means that all the type constructors</span><span>
</span><span id="line-2794"></span><span>       </span><span class="hs-comment">-- are lexically in scope; these instances are likely</span><span>
</span><span id="line-2795"></span><span>       </span><span class="hs-comment">-- to be more useful</span><span>
</span><span id="line-2796"></span><span>    </span><span class="annot"><a href="#local-6989586621681342194"><span class="hs-identifier hs-type">inst_in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2797"></span><span>    </span><span id="local-6989586621681342194"><span class="annot"><span class="annottext">inst_in_scope :: ClsInst -&gt; Bool
</span><a href="#local-6989586621681342194"><span class="hs-identifier hs-var hs-var">inst_in_scope</span></a></span></span><span> </span><span id="local-6989586621681342190"><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342190"><span class="hs-identifier hs-var">cls_inst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#nameSetAll"><span class="hs-identifier hs-var">nameSetAll</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="#local-6989586621681342188"><span class="hs-identifier hs-var">name_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2798"></span><span>                             </span><span class="annot"><span class="annottext">[Type] -&gt; NameSet
</span><a href="GHC.Core.FVs.html#orphNamesOfTypes"><span class="hs-identifier hs-var">orphNamesOfTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClsInst -&gt; [Type]
</span><a href="GHC.Core.InstEnv.html#is_tys"><span class="hs-identifier hs-var">is_tys</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621681342190"><span class="hs-identifier hs-var">cls_inst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2799"></span><span>
</span><span id="line-2800"></span><span>    </span><span id="local-6989586621681342188"><span class="annot"><span class="annottext">name_in_scope :: Name -&gt; Bool
</span><a href="#local-6989586621681342188"><span class="hs-identifier hs-var hs-var">name_in_scope</span></a></span></span><span> </span><span id="local-6989586621681342186"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342186"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-2801"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isBuiltInSyntax"><span class="hs-identifier hs-var">isBuiltInSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342186"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2802"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- E.g. (-&gt;)</span><span>
</span><span id="line-2803"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342184"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681342184"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Module
</span><a href="GHC.Types.Name.html#nameModule_maybe"><span class="hs-identifier hs-var">nameModule_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342186"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2804"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifyName -&gt; Bool
</span><a href="#local-6989586621681342182"><span class="hs-identifier hs-var">qual_in_scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprStyle -&gt; QueryQualifyName
</span><a href="GHC.Utils.Outputable.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621681342205"><span class="hs-identifier hs-var">sty</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681342184"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342186"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2805"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2806"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2807"></span><span>
</span><span id="line-2808"></span><span>    </span><span class="annot"><a href="#local-6989586621681342182"><span class="hs-identifier hs-type">qual_in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#QualifyName"><span class="hs-identifier hs-type">QualifyName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2809"></span><span>    </span><span id="local-6989586621681342182"><span class="annot"><span class="annottext">qual_in_scope :: QualifyName -&gt; Bool
</span><a href="#local-6989586621681342182"><span class="hs-identifier hs-var hs-var">qual_in_scope</span></a></span></span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameUnqual"><span class="hs-identifier hs-var">NameUnqual</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2810"></span><span>    </span><span class="annot"><a href="#local-6989586621681342182"><span class="hs-identifier hs-var">qual_in_scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#NameQual"><span class="hs-identifier hs-type">NameQual</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2811"></span><span>    </span><span class="annot"><a href="#local-6989586621681342182"><span class="hs-identifier hs-var">qual_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2812"></span><span>
</span><span id="line-2813"></span><span>    </span><span id="local-6989586621681342201"><span class="annot"><span class="annottext">not_in_scope_msg :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681342201"><span class="hs-identifier hs-var hs-var">not_in_scope_msg</span></a></span></span><span> </span><span id="local-6989586621681342178"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342178"><span class="hs-identifier hs-var">herald</span></a></span></span><span>
</span><span id="line-2814"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342195"><span class="hs-identifier hs-var">not_in_scope</span></a></span><span>
</span><span id="line-2815"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2816"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2817"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342178"><span class="hs-identifier hs-var">herald</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#speakNOf"><span class="hs-identifier hs-var">speakNOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342195"><span class="hs-identifier hs-var">not_in_scope</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;instance&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2818"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;involving out-of-scope types&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2819"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342206"><span class="hs-identifier hs-var">show_potentials</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ClsInst] -&gt; SDoc
</span><a href="GHC.Core.InstEnv.html#pprInstances"><span class="hs-identifier hs-var">pprInstances</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342195"><span class="hs-identifier hs-var">not_in_scope</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2820"></span><span>
</span><span id="line-2821"></span><span>    </span><span id="local-6989586621681342200"><span class="annot"><span class="annottext">flag_hint :: SDoc
</span><a href="#local-6989586621681342200"><span class="hs-identifier hs-var hs-var">flag_hint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342206"><span class="hs-identifier hs-var">show_potentials</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-identifier hs-var">equalLength</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342202"><span class="hs-identifier hs-var">show_these</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621681342203"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2822"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(use -fprint-potential-instances to see them all)&quot;</span></span><span>
</span><span id="line-2823"></span><span>
</span><span id="line-2824"></span><span class="hs-comment">{- Note [Displaying potential instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When showing a list of instances for
  - overlapping instances (show ones that match)
  - no such instance (show ones that could match)
we want to give it a bit of structure.  Here's the plan

* Say that an instance is &quot;in scope&quot; if all of the
  type constructors it mentions are lexically in scope.
  These are the ones most likely to be useful to the programmer.

* Show at most n_show in-scope instances,
  and summarise the rest (&quot;plus 3 others&quot;)

* Summarise the not-in-scope instances (&quot;plus 4 not in scope&quot;)

* Add the flag -fshow-potential-instances which replaces the
  summary with the full list
-}</span><span>
</span><span id="line-2843"></span><span>
</span><span id="line-2844"></span><span class="hs-comment">{-
Note [Flattening in error message generation]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider (C (Maybe (F x))), where F is a type function, and we have
instances
                C (Maybe Int) and C (Maybe a)
Since (F x) might turn into Int, this is an overlap situation, and
indeed the main solver will have refrained
from solving.  But by the time we get to error message generation, we've
un-flattened the constraint.  So we must *re*-flatten it before looking
up in the instance environment, lest we only report one matching
instance when in fact there are two.

Note [Kind arguments in error messages]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It can be terribly confusing to get an error message like (#9171)

    Couldn't match expected type &#8216;GetParam Base (GetParam Base Int)&#8217;
                with actual type &#8216;GetParam Base (GetParam Base Int)&#8217;

The reason may be that the kinds don't match up.  Typically you'll get
more useful information, but not when it's as a result of ambiguity.

To mitigate this, GHC attempts to enable the -fprint-explicit-kinds flag
whenever any error message arises due to a kind mismatch. This means that
the above error message would instead be displayed as:

    Couldn't match expected type
                  &#8216;GetParam @* @k2 @* Base (GetParam @* @* @k2 Base Int)&#8217;
                with actual type
                  &#8216;GetParam @* @k20 @* Base (GetParam @* @* @k20 Base Int)&#8217;

Which makes it clearer that the culprit is the mismatch between `k2` and `k20`.
-}</span><span>
</span><span id="line-2878"></span><span>
</span><span id="line-2879"></span><span class="annot"><a href="GHC.Tc.Errors.html#mkAmbigMsg"><span class="hs-identifier hs-type">mkAmbigMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- True when message has to be at beginning of sentence</span><span>
</span><span id="line-2880"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2881"></span><span id="mkAmbigMsg"><span class="annot"><span class="annottext">mkAmbigMsg :: Bool -&gt; Ct -&gt; (Bool, SDoc)
</span><a href="GHC.Tc.Errors.html#mkAmbigMsg"><span class="hs-identifier hs-var hs-var">mkAmbigMsg</span></a></span></span><span> </span><span id="local-6989586621681342177"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342177"><span class="hs-identifier hs-var">prepend_msg</span></a></span></span><span> </span><span id="local-6989586621681342176"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342176"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-2882"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342175"><span class="hs-identifier hs-var">ambig_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2883"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342173"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2884"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2885"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342175"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342175"><span class="hs-identifier hs-var">ambig_kvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342174"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; ([TcId], [TcId])
</span><a href="GHC.Tc.Errors.html#getAmbigTkvs"><span class="hs-identifier hs-var">getAmbigTkvs</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342176"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2886"></span><span>
</span><span id="line-2887"></span><span>    </span><span id="local-6989586621681342173"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681342173"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRuntimeUnkSkol"><span class="hs-identifier hs-var">isRuntimeUnkSkol</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342175"><span class="hs-identifier hs-var">ambig_kvs</span></a></span><span>  </span><span class="hs-comment">-- See Note [Runtime skolems]</span><span>
</span><span id="line-2888"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRuntimeUnkSkol"><span class="hs-identifier hs-var">isRuntimeUnkSkol</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span>
</span><span id="line-2889"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot resolve unknown runtime type&quot;</span></span><span>
</span><span id="line-2890"></span><span>                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span>
</span><span id="line-2891"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use :print or :force to determine these types&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-2892"></span><span>
</span><span id="line-2893"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2894"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; [TcId] -&gt; SDoc
</span><a href="#local-6989586621681342172"><span class="hs-identifier hs-var">pp_ambig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342174"><span class="hs-identifier hs-var">ambig_tvs</span></a></span><span>
</span><span id="line-2895"></span><span>
</span><span id="line-2896"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2897"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; [TcId] -&gt; SDoc
</span><a href="#local-6989586621681342172"><span class="hs-identifier hs-var">pp_ambig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kind&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342175"><span class="hs-identifier hs-var">ambig_kvs</span></a></span><span>
</span><span id="line-2898"></span><span>
</span><span id="line-2899"></span><span>    </span><span id="local-6989586621681342172"><span class="annot"><span class="annottext">pp_ambig :: SDoc -&gt; [TcId] -&gt; SDoc
</span><a href="#local-6989586621681342172"><span class="hs-identifier hs-var hs-var">pp_ambig</span></a></span></span><span> </span><span id="local-6989586621681342171"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342171"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681342170"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342170"><span class="hs-identifier hs-var">tkvs</span></a></span></span><span>
</span><span id="line-2900"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342177"><span class="hs-identifier hs-var">prepend_msg</span></a></span><span> </span><span class="hs-comment">-- &quot;Ambiguous type variable 't0'&quot;</span><span>
</span><span id="line-2901"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ambiguous&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342171"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;variable&quot;</span></span><span>
</span><span id="line-2902"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342170"><span class="hs-identifier hs-var">tkvs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342170"><span class="hs-identifier hs-var">tkvs</span></a></span><span>
</span><span id="line-2903"></span><span>
</span><span id="line-2904"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-comment">-- &quot;The type variable 't0' is ambiguous&quot;</span><span>
</span><span id="line-2905"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342171"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342170"><span class="hs-identifier hs-var">tkvs</span></a></span><span>
</span><span id="line-2906"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342170"><span class="hs-identifier hs-var">tkvs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#isOrAre"><span class="hs-identifier hs-var">isOrAre</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342170"><span class="hs-identifier hs-var">tkvs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ambiguous&quot;</span></span><span>
</span><span id="line-2907"></span><span>
</span><span id="line-2908"></span><span class="annot"><a href="GHC.Tc.Errors.html#pprSkols"><span class="hs-identifier hs-type">pprSkols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2909"></span><span id="pprSkols"><span class="annot"><span class="annottext">pprSkols :: ReportErrCtxt -&gt; [TcId] -&gt; SDoc
</span><a href="GHC.Tc.Errors.html#pprSkols"><span class="hs-identifier hs-var hs-var">pprSkols</span></a></span></span><span> </span><span id="local-6989586621681342168"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342168"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342167"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342167"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-2910"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}.
(Outputable a, NamedThing a) =&gt;
(SkolemInfo, [a]) -&gt; SDoc
</span><a href="#local-6989586621681342166"><span class="hs-identifier hs-var">pp_one</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Implication] -&gt; [TcId] -&gt; [(SkolemInfo, [TcId])]
</span><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; [Implication]
</span><a href="GHC.Tc.Errors.html#cec_encl"><span class="hs-identifier hs-var">cec_encl</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342168"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342167"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2911"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2912"></span><span>    </span><span id="local-6989586621681342166"><span class="annot"><span class="annottext">pp_one :: (SkolemInfo, [a]) -&gt; SDoc
</span><a href="#local-6989586621681342166"><span class="hs-identifier hs-var hs-var">pp_one</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="GHC.Tc.Types.Origin.html#UnkSkol"><span class="hs-identifier hs-var">UnkSkol</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342155"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342155"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2913"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342155"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2914"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {a}. [a] -&gt; String -&gt; String -&gt; SDoc
</span><a href="#local-6989586621681342154"><span class="hs-identifier hs-var">is_or_are</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342155"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknown&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2915"></span><span>    </span><span class="annot"><a href="#local-6989586621681342166"><span class="hs-identifier hs-var">pp_one</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="GHC.Tc.Types.Origin.html#RuntimeUnkSkol"><span class="hs-identifier hs-var">RuntimeUnkSkol</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342152"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342152"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2916"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342152"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2917"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {a}. [a] -&gt; String -&gt; String -&gt; SDoc
</span><a href="#local-6989586621681342154"><span class="hs-identifier hs-var">is_or_are</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342152"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknown runtime&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2918"></span><span>    </span><span class="annot"><a href="#local-6989586621681342166"><span class="hs-identifier hs-var">pp_one</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342151"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342151"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342150"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342150"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2919"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342150"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2920"></span><span>                  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {a}. [a] -&gt; String -&gt; String -&gt; SDoc
</span><a href="#local-6989586621681342154"><span class="hs-identifier hs-var">is_or_are</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342150"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a&quot;</span></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rigid&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bound by&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2921"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SkolemInfo -&gt; SDoc
</span><a href="GHC.Tc.Types.Origin.html#pprSkolInfo"><span class="hs-identifier hs-var">pprSkolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621681342151"><span class="hs-identifier hs-var">skol_info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2922"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#foldr1"><span class="hs-identifier hs-var">foldr1</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#getSrcSpan"><span class="hs-identifier hs-var">getSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681342150"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2923"></span><span>
</span><span id="line-2924"></span><span>    </span><span id="local-6989586621681342154"><span class="annot"><span class="annottext">is_or_are :: [a] -&gt; String -&gt; String -&gt; SDoc
</span><a href="#local-6989586621681342154"><span class="hs-identifier hs-var hs-var">is_or_are</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span id="local-6989586621681342146"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342146"><span class="hs-identifier hs-var">article</span></a></span></span><span> </span><span id="local-6989586621681342145"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342145"><span class="hs-identifier hs-var">adjective</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342146"><span class="hs-identifier hs-var">article</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342145"><span class="hs-identifier hs-var">adjective</span></a></span><span>
</span><span id="line-2925"></span><span>                                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type variable&quot;</span></span><span>
</span><span id="line-2926"></span><span>    </span><span class="annot"><a href="#local-6989586621681342154"><span class="hs-identifier hs-var">is_or_are</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span>       </span><span id="local-6989586621681342144"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342144"><span class="hs-identifier hs-var">adjective</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;are&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681342144"><span class="hs-identifier hs-var">adjective</span></a></span><span>
</span><span id="line-2927"></span><span>                                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type variables&quot;</span></span><span>
</span><span id="line-2928"></span><span>
</span><span id="line-2929"></span><span class="annot"><a href="GHC.Tc.Errors.html#getAmbigTkvs"><span class="hs-identifier hs-type">getAmbigTkvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2930"></span><span id="getAmbigTkvs"><span class="annot"><span class="annottext">getAmbigTkvs :: Ct -&gt; ([TcId], [TcId])
</span><a href="GHC.Tc.Errors.html#getAmbigTkvs"><span class="hs-identifier hs-var hs-var">getAmbigTkvs</span></a></span></span><span> </span><span id="local-6989586621681342142"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342142"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-2931"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; TyCoVarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342141"><span class="hs-identifier hs-var">dep_tkv_set</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342140"><span class="hs-identifier hs-var">ambig_tkvs</span></a></span><span>
</span><span id="line-2932"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2933"></span><span>    </span><span id="local-6989586621681342139"><span class="annot"><span class="annottext">tkvs :: [TcId]
</span><a href="#local-6989586621681342139"><span class="hs-identifier hs-var hs-var">tkvs</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtList"><span class="hs-identifier hs-var">tyCoVarsOfCtList</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342142"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2934"></span><span>    </span><span id="local-6989586621681342140"><span class="annot"><span class="annottext">ambig_tkvs :: [TcId]
</span><a href="#local-6989586621681342140"><span class="hs-identifier hs-var hs-var">ambig_tkvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isAmbiguousTyVar"><span class="hs-identifier hs-var">isAmbiguousTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342139"><span class="hs-identifier hs-var">tkvs</span></a></span><span>
</span><span id="line-2935"></span><span>    </span><span id="local-6989586621681342141"><span class="annot"><span class="annottext">dep_tkv_set :: TyCoVarSet
</span><a href="#local-6989586621681342141"><span class="hs-identifier hs-var hs-var">dep_tkv_set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342139"><span class="hs-identifier hs-var">tkvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2936"></span><span>
</span><span id="line-2937"></span><span class="annot"><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-type">getSkolemInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2938"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfo"><span class="hs-identifier hs-type">SkolemInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>                    </span><span class="hs-comment">-- #14628</span><span>
</span><span id="line-2939"></span><span class="hs-comment">-- Get the skolem info for some type variables</span><span>
</span><span id="line-2940"></span><span class="hs-comment">-- from the implication constraints that bind them.</span><span>
</span><span id="line-2941"></span><span class="hs-comment">--</span><span>
</span><span id="line-2942"></span><span class="hs-comment">-- In the returned (skolem, tvs) pairs, the 'tvs' part is non-empty</span><span>
</span><span id="line-2943"></span><span id="getSkolemInfo"><span class="annot"><span class="annottext">getSkolemInfo :: [Implication] -&gt; [TcId] -&gt; [(SkolemInfo, [TcId])]
</span><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-var hs-var">getSkolemInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2944"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2945"></span><span>
</span><span id="line-2946"></span><span class="annot"><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681342137"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342137"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-2947"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">TcId -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isRuntimeUnkSkol"><span class="hs-identifier hs-var">isRuntimeUnkSkol</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342137"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="GHC.Tc.Types.Origin.html#RuntimeUnkSkol"><span class="hs-identifier hs-var">RuntimeUnkSkol</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342137"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- #14628</span><span>
</span><span id="line-2948"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No skolem info:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342137"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2949"></span><span>
</span><span id="line-2950"></span><span class="annot"><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342136"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342136"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681342135"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342135"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681342134"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342134"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-2951"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342133"><span class="hs-identifier hs-var">tvs_here</span></a></span><span> </span><span class="hs-glyph">=</span><span>                            </span><span class="annot"><span class="annottext">[Implication] -&gt; [TcId] -&gt; [(SkolemInfo, [TcId])]
</span><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342135"><span class="hs-identifier hs-var">implics</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342134"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-2952"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; SkolemInfo
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342136"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342133"><span class="hs-identifier hs-var">tvs_here</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; [TcId] -&gt; [(SkolemInfo, [TcId])]
</span><a href="GHC.Tc.Errors.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621681342135"><span class="hs-identifier hs-var">implics</span></a></span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342132"><span class="hs-identifier hs-var">tvs_other</span></a></span><span>
</span><span id="line-2953"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2954"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681342133"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342133"><span class="hs-identifier hs-var">tvs_here</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342132"><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342132"><span class="hs-identifier hs-var">tvs_other</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621681342136"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TcId]
</span><a href="#local-6989586621681342134"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-2955"></span><span>
</span><span id="line-2956"></span><span class="hs-comment">-----------------------</span><span>
</span><span id="line-2957"></span><span class="hs-comment">-- relevantBindings looks at the value environment and finds values whose</span><span>
</span><span id="line-2958"></span><span class="hs-comment">-- types mention any of the offending type variables.  It has to be</span><span>
</span><span id="line-2959"></span><span class="hs-comment">-- careful to zonk the Id's type first, so it has to be in the monad.</span><span>
</span><span id="line-2960"></span><span class="hs-comment">-- We must be careful to pass it a zonked type variable, too.</span><span>
</span><span id="line-2961"></span><span class="hs-comment">--</span><span>
</span><span id="line-2962"></span><span class="hs-comment">-- We always remove closed top-level bindings, though,</span><span>
</span><span id="line-2963"></span><span class="hs-comment">-- since they are never relevant (cf #8233)</span><span>
</span><span id="line-2964"></span><span>
</span><span id="line-2965"></span><span class="annot"><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-type">relevantBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>  </span><span class="hs-comment">-- True &lt;=&gt; filter by tyvar; False &lt;=&gt; no filtering</span><span>
</span><span id="line-2966"></span><span>                          </span><span class="hs-comment">-- See #8191</span><span>
</span><span id="line-2967"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-2968"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.html#ReportErrCtxt"><span class="hs-identifier hs-type">ReportErrCtxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2969"></span><span class="hs-comment">-- Also returns the zonked and tidied CtOrigin of the constraint</span><span>
</span><span id="line-2970"></span><span id="relevantBindings"><span class="annot"><span class="annottext">relevantBindings :: Bool -&gt; ReportErrCtxt -&gt; Ct -&gt; TcM (ReportErrCtxt, SDoc, Ct)
</span><a href="GHC.Tc.Errors.html#relevantBindings"><span class="hs-identifier hs-var hs-var">relevantBindings</span></a></span></span><span> </span><span id="local-6989586621681342131"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342131"><span class="hs-identifier hs-var">want_filtering</span></a></span></span><span> </span><span id="local-6989586621681342130"><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342130"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621681342129"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342129"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-2971"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;relevantBindings&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342129"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2972"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342128"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342128"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342127"><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342127"><span class="hs-identifier hs-var">tidy_orig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; CtOrigin -&gt; TcM (TidyEnv, CtOrigin)
</span><a href="GHC.Tc.Utils.TcMType.html#zonkTidyOrigin"><span class="hs-identifier hs-var">zonkTidyOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt -&gt; TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342130"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctLocOrigin"><span class="hs-identifier hs-var">ctLocOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342125"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2973"></span><span>
</span><span id="line-2974"></span><span>             </span><span class="hs-comment">-- For *kind* errors, report the relevant bindings of the</span><span>
</span><span id="line-2975"></span><span>             </span><span class="hs-comment">-- enclosing *type* equality, because that's more useful for the programmer</span><span>
</span><span id="line-2976"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342124"><span class="annot"><span class="annottext">extra_tvs :: TyCoVarSet
</span><a href="#local-6989586621681342124"><span class="hs-identifier hs-var hs-var">extra_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342127"><span class="hs-identifier hs-var">tidy_orig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2977"></span><span>                             </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#KindEqOrigin"><span class="hs-identifier hs-type">KindEqOrigin</span></a></span><span> </span><span id="local-6989586621681342123"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342123"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681342122"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342122"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe TypeOrKind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342123"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342122"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2978"></span><span>                             </span><span class="annot"><span class="annottext">CtOrigin
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-2979"></span><span>             </span><span id="local-6989586621681342120"><span class="annot"><span class="annottext">ct_fvs :: TyCoVarSet
</span><a href="#local-6989586621681342120"><span class="hs-identifier hs-var hs-var">ct_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; TyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCt"><span class="hs-identifier hs-var">tyCoVarsOfCt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342129"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet -&gt; TyCoVarSet -&gt; TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342124"><span class="hs-identifier hs-var">extra_tvs</span></a></span><span>
</span><span id="line-2980"></span><span>
</span><span id="line-2981"></span><span>             </span><span class="hs-comment">-- Put a zonked, tidied CtOrigin into the Ct</span><span>
</span><span id="line-2982"></span><span>             </span><span id="local-6989586621681342117"><span class="annot"><span class="annottext">loc' :: CtLoc
</span><a href="#local-6989586621681342117"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; CtOrigin -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#setCtLocOrigin"><span class="hs-identifier hs-var">setCtLocOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342125"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">CtOrigin
</span><a href="#local-6989586621681342127"><span class="hs-identifier hs-var">tidy_orig</span></a></span><span>
</span><span id="line-2983"></span><span>             </span><span id="local-6989586621681342115"><span class="annot"><span class="annottext">ct' :: Ct
</span><a href="#local-6989586621681342115"><span class="hs-identifier hs-var hs-var">ct'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtLoc -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#setCtLoc"><span class="hs-identifier hs-var">setCtLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342129"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342117"><span class="hs-identifier hs-var">loc'</span></a></span><span>
</span><span id="line-2984"></span><span>
</span><span id="line-2985"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342114"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342114"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342113"><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681342113"><span class="hs-identifier hs-var">lcl_name_cache</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [TcLclEnv] -&gt; TcM (TidyEnv, NameEnv Type)
</span><a href="GHC.Tc.Errors.html#zonkTidyTcLclEnvs"><span class="hs-identifier hs-var">zonkTidyTcLclEnvs</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342128"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342112"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2986"></span><span>
</span><span id="line-2987"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342111"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342111"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcLclEnv -&gt; NameEnv Type -&gt; TyCoVarSet -&gt; TcM SDoc
</span><a href="GHC.Tc.Errors.html#relevant_bindings"><span class="hs-identifier hs-var">relevant_bindings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342131"><span class="hs-identifier hs-var">want_filtering</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342112"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681342113"><span class="hs-identifier hs-var">lcl_name_cache</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342120"><span class="hs-identifier hs-var">ct_fvs</span></a></span><span>
</span><span id="line-2988"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342110"><span class="annot"><span class="annottext">ctxt' :: ReportErrCtxt
</span><a href="#local-6989586621681342110"><span class="hs-identifier hs-var hs-var">ctxt'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342130"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cec_tidy :: TidyEnv
</span><a href="GHC.Tc.Errors.html#cec_tidy"><span class="hs-identifier hs-var">cec_tidy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342114"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2989"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReportErrCtxt
</span><a href="#local-6989586621681342110"><span class="hs-identifier hs-var">ctxt'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342111"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342115"><span class="hs-identifier hs-var">ct'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2990"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2991"></span><span>    </span><span id="local-6989586621681342125"><span class="annot"><span class="annottext">loc :: CtLoc
</span><a href="#local-6989586621681342125"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621681342129"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-2992"></span><span>    </span><span id="local-6989586621681342112"><span class="annot"><span class="annottext">lcl_env :: TcLclEnv
</span><a href="#local-6989586621681342112"><span class="hs-identifier hs-var hs-var">lcl_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; TcLclEnv
</span><a href="GHC.Tc.Types.Constraint.html#ctLocEnv"><span class="hs-identifier hs-var">ctLocEnv</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342125"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-2993"></span><span>
</span><span id="line-2994"></span><span class="hs-comment">-- slightly more general version, to work also with holes</span><span>
</span><span id="line-2995"></span><span class="annot"><a href="GHC.Tc.Errors.html#relevant_bindings"><span class="hs-identifier hs-type">relevant_bindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2996"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span>
</span><span id="line-2997"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-comment">-- Cache of already zonked and tidied types</span><span>
</span><span id="line-2998"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyCoVarSet"><span class="hs-identifier hs-type">TyCoVarSet</span></a></span><span>
</span><span id="line-2999"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3000"></span><span id="relevant_bindings"><span class="annot"><span class="annottext">relevant_bindings :: Bool -&gt; TcLclEnv -&gt; NameEnv Type -&gt; TyCoVarSet -&gt; TcM SDoc
</span><a href="GHC.Tc.Errors.html#relevant_bindings"><span class="hs-identifier hs-var hs-var">relevant_bindings</span></a></span></span><span> </span><span id="local-6989586621681342109"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342109"><span class="hs-identifier hs-var">want_filtering</span></a></span></span><span> </span><span id="local-6989586621681342108"><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342108"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span> </span><span id="local-6989586621681342107"><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681342107"><span class="hs-identifier hs-var">lcl_name_env</span></a></span></span><span> </span><span id="local-6989586621681342106"><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342106"><span class="hs-identifier hs-var">ct_tvs</span></a></span></span><span>
</span><span id="line-3001"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342105"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342105"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-3002"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;relevant_bindings&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3003"></span><span>           </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342106"><span class="hs-identifier hs-var">ct_tvs</span></a></span><span>
</span><span id="line-3004"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342103"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342103"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3005"></span><span>                                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdBndr"><span class="hs-identifier hs-type">TcIdBndr</span></a></span><span> </span><span id="local-6989586621681342103"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342103"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcLclEnv -&gt; TcBinderStack
</span><a href="GHC.Tc.Types.html#tcl_bndrs"><span class="hs-identifier hs-var">tcl_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342108"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3006"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-3007"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342102"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdBndr_ExpType"><span class="hs-identifier hs-type">TcIdBndr_ExpType</span></a></span><span> </span><span id="local-6989586621681342102"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342102"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="annot"><span class="annottext">ExpType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcLclEnv -&gt; TcBinderStack
</span><a href="GHC.Tc.Types.html#tcl_bndrs"><span class="hs-identifier hs-var">tcl_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342108"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3008"></span><span>
</span><span id="line-3009"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342101"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342101"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342100"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342100"><span class="hs-identifier hs-var">discards</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-3010"></span><span>              </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; Maybe Int
-&gt; TyCoVarSet
-&gt; [SDoc]
-&gt; Bool
-&gt; TcBinderStack
-&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342099"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342105"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Maybe Int
</span><a href="GHC.Driver.Session.html#maxRelevantBinds"><span class="hs-identifier hs-var">maxRelevantBinds</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342105"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3011"></span><span>                    </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-3012"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasOccName a =&gt; [a] -&gt; [a]
</span><a href="GHC.Tc.Types.html#removeBindingShadowing"><span class="hs-identifier hs-var">removeBindingShadowing</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv -&gt; TcBinderStack
</span><a href="GHC.Tc.Types.html#tcl_bndrs"><span class="hs-identifier hs-var">tcl_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclEnv
</span><a href="#local-6989586621681342108"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3013"></span><span>         </span><span class="hs-comment">-- tcl_bndrs has the innermost bindings first,</span><span>
</span><span id="line-3014"></span><span>         </span><span class="hs-comment">-- which are probably the most relevant ones</span><span>
</span><span id="line-3015"></span><span>
</span><span id="line-3016"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342096"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681342096"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342101"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3017"></span><span>                   </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Relevant bindings include&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3018"></span><span>                      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342101"><span class="hs-identifier hs-var">docs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342100"><span class="hs-identifier hs-var">discards</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Tc.Errors.html#discardMsg"><span class="hs-identifier hs-var">discardMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3019"></span><span>
</span><span id="line-3020"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342096"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3021"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3022"></span><span>    </span><span class="annot"><a href="#local-6989586621681342094"><span class="hs-identifier hs-type">run_out</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3023"></span><span>    </span><span id="local-6989586621681342094"><span class="annot"><span class="annottext">run_out :: Maybe Int -&gt; Bool
</span><a href="#local-6989586621681342094"><span class="hs-identifier hs-var hs-var">run_out</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-3024"></span><span>    </span><span class="annot"><a href="#local-6989586621681342094"><span class="hs-identifier hs-var">run_out</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342093"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342093"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342093"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-3025"></span><span>
</span><span id="line-3026"></span><span>    </span><span class="annot"><a href="#local-6989586621681342091"><span class="hs-identifier hs-type">dec_max</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-3027"></span><span>    </span><span id="local-6989586621681342091"><span class="annot"><span class="annottext">dec_max :: Maybe Int -&gt; Maybe Int
</span><a href="#local-6989586621681342091"><span class="hs-identifier hs-var hs-var">dec_max</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681342090"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342090"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681342090"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-3028"></span><span>
</span><span id="line-3029"></span><span>
</span><span id="line-3030"></span><span>    </span><span class="annot"><a href="#local-6989586621681342099"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyVarSet"><span class="hs-identifier hs-type">TcTyVarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3031"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                          </span><span class="hs-comment">-- True &lt;=&gt; some filtered out due to lack of fuel</span><span>
</span><span id="line-3032"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcBinder"><span class="hs-identifier hs-type">TcBinder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3033"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- The bool says if we filtered any out</span><span>
</span><span id="line-3034"></span><span>                                        </span><span class="hs-comment">-- because of lack of fuel</span><span>
</span><span id="line-3035"></span><span>    </span><span id="local-6989586621681342099"><span class="annot"><span class="annottext">go :: DynFlags
-&gt; Maybe Int
-&gt; TyCoVarSet
-&gt; [SDoc]
-&gt; Bool
-&gt; TcBinderStack
-&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342099"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681342088"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342088"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span id="local-6989586621681342087"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342087"><span class="hs-identifier hs-var">discards</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-3036"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342088"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342087"><span class="hs-identifier hs-var">discards</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3037"></span><span>    </span><span class="annot"><a href="#local-6989586621681342099"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681342086"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342086"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681342085"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681342085"><span class="hs-identifier hs-var">n_left</span></a></span></span><span> </span><span id="local-6989586621681342084"><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342084"><span class="hs-identifier hs-var">tvs_seen</span></a></span></span><span> </span><span id="local-6989586621681342083"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342083"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span id="local-6989586621681342082"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342082"><span class="hs-identifier hs-var">discards</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681342081"><span class="annot"><span class="annottext">TcBinder
</span><a href="#local-6989586621681342081"><span class="hs-identifier hs-var">tc_bndr</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681342080"><span class="annot"><span class="annottext">TcBinderStack
</span><a href="#local-6989586621681342080"><span class="hs-identifier hs-var">tc_bndrs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-3038"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcBinder
</span><a href="#local-6989586621681342081"><span class="hs-identifier hs-var">tc_bndr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3039"></span><span>          </span><span class="annot"><a href="GHC.Tc.Types.html#TcTvBndr"><span class="hs-identifier hs-type">TcTvBndr</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342079"><span class="hs-identifier hs-var">discard_it</span></a></span><span>
</span><span id="line-3040"></span><span>          </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdBndr"><span class="hs-identifier hs-type">TcIdBndr</span></a></span><span> </span><span id="local-6989586621681342078"><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342078"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681342077"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681342077"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TopLevelFlag -&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342076"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcId -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">TcId
</span><a href="#local-6989586621681342078"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681342077"><span class="hs-identifier hs-var">top_lvl</span></a></span><span>
</span><span id="line-3041"></span><span>          </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdBndr_ExpType"><span class="hs-identifier hs-type">TcIdBndr_ExpType</span></a></span><span> </span><span id="local-6989586621681342075"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342075"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681342074"><span class="annot"><span class="annottext">ExpType
</span><a href="#local-6989586621681342074"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621681342073"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681342073"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3042"></span><span>            </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342072"><span class="annot"><span class="annottext">Maybe Type
</span><a href="#local-6989586621681342072"><span class="hs-identifier hs-var">mb_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExpType -&gt; TcM (Maybe Type)
</span><a href="GHC.Tc.Utils.TcMType.html#readExpType_maybe"><span class="hs-identifier hs-var">readExpType_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">ExpType
</span><a href="#local-6989586621681342074"><span class="hs-identifier hs-var">et</span></a></span><span>
</span><span id="line-3043"></span><span>                   </span><span class="hs-comment">-- et really should be filled in by now. But there's a chance</span><span>
</span><span id="line-3044"></span><span>                   </span><span class="hs-comment">-- it hasn't, if, say, we're reporting a kind error en route to</span><span>
</span><span id="line-3045"></span><span>                   </span><span class="hs-comment">-- checking a term. See test indexed-types/should_fail/T8129</span><span>
</span><span id="line-3046"></span><span>                   </span><span class="hs-comment">-- Or we are reporting errors from the ambiguity check on</span><span>
</span><span id="line-3047"></span><span>                   </span><span class="hs-comment">-- a local type signature</span><span>
</span><span id="line-3048"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Type
</span><a href="#local-6989586621681342072"><span class="hs-identifier hs-var">mb_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3049"></span><span>                   </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342071"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342071"><span class="hs-identifier hs-var">_ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TopLevelFlag -&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342076"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342075"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681342073"><span class="hs-identifier hs-var">top_lvl</span></a></span><span>
</span><span id="line-3050"></span><span>                   </span><span class="annot"><span class="annottext">Maybe Type
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342079"><span class="hs-identifier hs-var">discard_it</span></a></span><span>  </span><span class="hs-comment">-- No info; discard</span><span>
</span><span id="line-3051"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-3052"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-3053"></span><span>        </span><span id="local-6989586621681342079"><span class="annot"><span class="annottext">discard_it :: TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342079"><span class="hs-identifier hs-var hs-var">discard_it</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; Maybe Int
-&gt; TyCoVarSet
-&gt; [SDoc]
-&gt; Bool
-&gt; TcBinderStack
-&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342099"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342086"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681342085"><span class="hs-identifier hs-var">n_left</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342084"><span class="hs-identifier hs-var">tvs_seen</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342083"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-3054"></span><span>                        </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342082"><span class="hs-identifier hs-var">discards</span></a></span><span> </span><span class="annot"><span class="annottext">TcBinderStack
</span><a href="#local-6989586621681342080"><span class="hs-identifier hs-var">tc_bndrs</span></a></span><span>
</span><span id="line-3055"></span><span>        </span><span id="local-6989586621681342076"><span class="annot"><span class="annottext">go2 :: Name -&gt; TopLevelFlag -&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342076"><span class="hs-identifier hs-var hs-var">go2</span></a></span></span><span> </span><span id="local-6989586621681342070"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342070"><span class="hs-identifier hs-var">id_name</span></a></span></span><span> </span><span id="local-6989586621681342069"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681342069"><span class="hs-identifier hs-var">top_lvl</span></a></span></span><span>
</span><span id="line-3056"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342068"><span class="annot"><span class="annottext">tidy_ty :: Type
</span><a href="#local-6989586621681342068"><span class="hs-identifier hs-var hs-var">tidy_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv Type
</span><a href="#local-6989586621681342107"><span class="hs-identifier hs-var">lcl_name_env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342070"><span class="hs-identifier hs-var">id_name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3057"></span><span>                                  </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681342066"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342066"><span class="hs-identifier hs-var">tty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342066"><span class="hs-identifier hs-var">tty</span></a></span><span>
</span><span id="line-3058"></span><span>                                  </span><span class="annot"><span class="annottext">Maybe Type
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;relevant_bindings&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342070"><span class="hs-identifier hs-var">id_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3059"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;relevantBindings 1&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342070"><span class="hs-identifier hs-var">id_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342068"><span class="hs-identifier hs-var">tidy_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3060"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342065"><span class="annot"><span class="annottext">id_tvs :: TyCoVarSet
</span><a href="#local-6989586621681342065"><span class="hs-identifier hs-var hs-var">id_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342068"><span class="hs-identifier hs-var">tidy_ty</span></a></span><span>
</span><span id="line-3061"></span><span>                     </span><span id="local-6989586621681342064"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681342064"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. OutputableBndr a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprPrefixOcc"><span class="hs-identifier hs-var">pprPrefixOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342070"><span class="hs-identifier hs-var">id_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342068"><span class="hs-identifier hs-var">tidy_ty</span></a></span><span>
</span><span id="line-3062"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bound at&quot;</span></span><span>
</span><span id="line-3063"></span><span>                                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NamedThing a =&gt; a -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#getSrcLoc"><span class="hs-identifier hs-var">getSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681342070"><span class="hs-identifier hs-var">id_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3064"></span><span>                     </span><span id="local-6989586621681342062"><span class="annot"><span class="annottext">new_seen :: TyCoVarSet
</span><a href="#local-6989586621681342062"><span class="hs-identifier hs-var hs-var">new_seen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342084"><span class="hs-identifier hs-var">tvs_seen</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet -&gt; TyCoVarSet -&gt; TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342065"><span class="hs-identifier hs-var">id_tvs</span></a></span><span>
</span><span id="line-3065"></span><span>
</span><span id="line-3066"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342109"><span class="hs-identifier hs-var">want_filtering</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#hasPprDebug"><span class="hs-identifier hs-var">hasPprDebug</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342086"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3067"></span><span>                                    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342065"><span class="hs-identifier hs-var">id_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet -&gt; TyCoVarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#disjointVarSet"><span class="hs-operator hs-var">`disjointVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342106"><span class="hs-identifier hs-var">ct_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3068"></span><span>                          </span><span class="hs-comment">-- We want to filter out this binding anyway</span><span>
</span><span id="line-3069"></span><span>                          </span><span class="hs-comment">-- so discard it silently</span><span>
</span><span id="line-3070"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342079"><span class="hs-identifier hs-var">discard_it</span></a></span><span>
</span><span id="line-3071"></span><span>
</span><span id="line-3072"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag -&gt; Bool
</span><a href="GHC.Types.Basic.html#isTopLevel"><span class="hs-identifier hs-var">isTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621681342069"><span class="hs-identifier hs-var">top_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#isNothing"><span class="hs-identifier hs-var">isNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681342085"><span class="hs-identifier hs-var">n_left</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3073"></span><span>                          </span><span class="hs-comment">-- It's a top-level binding and we have not specified</span><span>
</span><span id="line-3074"></span><span>                          </span><span class="hs-comment">-- -fno-max-relevant-bindings, so discard it silently</span><span>
</span><span id="line-3075"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342079"><span class="hs-identifier hs-var">discard_it</span></a></span><span>
</span><span id="line-3076"></span><span>
</span><span id="line-3077"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Bool
</span><a href="#local-6989586621681342094"><span class="hs-identifier hs-var">run_out</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681342085"><span class="hs-identifier hs-var">n_left</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342065"><span class="hs-identifier hs-var">id_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet -&gt; TyCoVarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#subVarSet"><span class="hs-operator hs-var">`subVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342084"><span class="hs-identifier hs-var">tvs_seen</span></a></span><span>
</span><span id="line-3078"></span><span>                          </span><span class="hs-comment">-- We've run out of n_left fuel and this binding only</span><span>
</span><span id="line-3079"></span><span>                          </span><span class="hs-comment">-- mentions already-seen type variables, so discard it</span><span>
</span><span id="line-3080"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; Maybe Int
-&gt; TyCoVarSet
-&gt; [SDoc]
-&gt; Bool
-&gt; TcBinderStack
-&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342099"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342086"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681342085"><span class="hs-identifier hs-var">n_left</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342084"><span class="hs-identifier hs-var">tvs_seen</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342083"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-3081"></span><span>                         </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>      </span><span class="hs-comment">-- Record that we have now discarded something</span><span>
</span><span id="line-3082"></span><span>                         </span><span class="annot"><span class="annottext">TcBinderStack
</span><a href="#local-6989586621681342080"><span class="hs-identifier hs-var">tc_bndrs</span></a></span><span>
</span><span id="line-3083"></span><span>
</span><span id="line-3084"></span><span>                          </span><span class="hs-comment">-- Keep this binding, decrement fuel</span><span>
</span><span id="line-3085"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DynFlags
-&gt; Maybe Int
-&gt; TyCoVarSet
-&gt; [SDoc]
-&gt; Bool
-&gt; TcBinderStack
-&gt; TcM ([SDoc], Bool)
</span><a href="#local-6989586621681342099"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681342086"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int -&gt; Maybe Int
</span><a href="#local-6989586621681342091"><span class="hs-identifier hs-var">dec_max</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681342085"><span class="hs-identifier hs-var">n_left</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="#local-6989586621681342062"><span class="hs-identifier hs-var">new_seen</span></a></span><span>
</span><span id="line-3086"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342064"><span class="hs-identifier hs-var">doc</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681342083"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342082"><span class="hs-identifier hs-var">discards</span></a></span><span> </span><span class="annot"><span class="annottext">TcBinderStack
</span><a href="#local-6989586621681342080"><span class="hs-identifier hs-var">tc_bndrs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3087"></span><span>
</span><span id="line-3088"></span><span>
</span><span id="line-3089"></span><span class="annot"><a href="GHC.Tc.Errors.html#discardMsg"><span class="hs-identifier hs-type">discardMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-3090"></span><span id="discardMsg"><span class="annot"><span class="annottext">discardMsg :: SDoc
</span><a href="GHC.Tc.Errors.html#discardMsg"><span class="hs-identifier hs-var hs-var">discardMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(Some bindings suppressed;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-3091"></span><span>             </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;use -fmax-relevant-binds=N or -fno-max-relevant-binds)&quot;</span></span><span>
</span><span id="line-3092"></span><span>
</span><span id="line-3093"></span><span class="hs-comment">-----------------------</span><span>
</span><span id="line-3094"></span><span class="annot"><a href="GHC.Tc.Errors.html#warnDefaulting"><span class="hs-identifier hs-type">warnDefaulting</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3095"></span><span id="warnDefaulting"><span class="annot"><span class="annottext">warnDefaulting :: [Ct] -&gt; Type -&gt; TcM ()
</span><a href="GHC.Tc.Errors.html#warnDefaulting"><span class="hs-identifier hs-var hs-var">warnDefaulting</span></a></span></span><span> </span><span id="local-6989586621681342057"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342057"><span class="hs-identifier hs-var">wanteds</span></a></span></span><span> </span><span id="local-6989586621681342056"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342056"><span class="hs-identifier hs-var">default_ty</span></a></span></span><span>
</span><span id="line-3096"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342055"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342055"><span class="hs-identifier hs-var">warn_default</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall gbl lcl. WarningFlag -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#woptM"><span class="hs-identifier hs-var">woptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnTypeDefaults"><span class="hs-identifier hs-var">Opt_WarnTypeDefaults</span></a></span><span>
</span><span id="line-3097"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342053"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342053"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM TidyEnv
</span><a href="GHC.Tc.Utils.Env.html#tcInitTidyEnv"><span class="hs-identifier hs-var">tcInitTidyEnv</span></a></span><span>
</span><span id="line-3098"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342052"><span class="annot"><span class="annottext">tidy_env :: TidyEnv
</span><a href="#local-6989586621681342052"><span class="hs-identifier hs-var hs-var">tidy_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [TcId] -&gt; TidyEnv
</span><a href="GHC.Core.TyCo.Tidy.html#tidyFreeTyCoVars"><span class="hs-identifier hs-var">tidyFreeTyCoVars</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342053"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3099"></span><span>                        </span><span class="annot"><span class="annottext">Cts -&gt; [TcId]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtsList"><span class="hs-identifier hs-var">tyCoVarsOfCtsList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-var">listToBag</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342057"><span class="hs-identifier hs-var">wanteds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3100"></span><span>             </span><span id="local-6989586621681342049"><span class="annot"><span class="annottext">tidy_wanteds :: [Ct]
</span><a href="#local-6989586621681342049"><span class="hs-identifier hs-var hs-var">tidy_wanteds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv -&gt; Ct -&gt; Ct
</span><a href="GHC.Tc.Utils.TcMType.html#tidyCt"><span class="hs-identifier hs-var">tidyCt</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342052"><span class="hs-identifier hs-var">tidy_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342057"><span class="hs-identifier hs-var">wanteds</span></a></span><span>
</span><span id="line-3101"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681342048"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342048"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681342047"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342047"><span class="hs-identifier hs-var">ppr_wanteds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; (CtLoc, SDoc)
</span><a href="GHC.Tc.Errors.html#pprWithArising"><span class="hs-identifier hs-var">pprWithArising</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342049"><span class="hs-identifier hs-var">tidy_wanteds</span></a></span><span>
</span><span id="line-3102"></span><span>             </span><span id="local-6989586621681342046"><span class="annot"><span class="annottext">warn_msg :: SDoc
</span><a href="#local-6989586621681342046"><span class="hs-identifier hs-var hs-var">warn_msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3103"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting the following&quot;</span></span><span>
</span><span id="line-3104"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621681342049"><span class="hs-identifier hs-var">tidy_wanteds</span></a></span><span>
</span><span id="line-3105"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;to type&quot;</span></span><span>
</span><span id="line-3106"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342056"><span class="hs-identifier hs-var">default_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-3107"></span><span>                     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-3108"></span><span>                     </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342047"><span class="hs-identifier hs-var">ppr_wanteds</span></a></span><span>
</span><span id="line-3109"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. CtLoc -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#setCtLocM"><span class="hs-identifier hs-var">setCtLocM</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342048"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason -&gt; Bool -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#warnTc"><span class="hs-identifier hs-var">warnTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#Reason"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnTypeDefaults"><span class="hs-identifier hs-var">Opt_WarnTypeDefaults</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681342055"><span class="hs-identifier hs-var">warn_default</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342046"><span class="hs-identifier hs-var">warn_msg</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3110"></span><span>
</span><span id="line-3111"></span><span class="hs-comment">{-
Note [Runtime skolems]
~~~~~~~~~~~~~~~~~~~~~~
We want to give a reasonably helpful error message for ambiguity
arising from *runtime* skolems in the debugger.  These
are created by in GHC.Runtime.Heap.Inspect.zonkRTTIType.

************************************************************************
*                                                                      *
                 Error from the canonicaliser
         These ones are called *during* constraint simplification
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-3125"></span><span>
</span><span id="line-3126"></span><span id="local-6989586621681344164"><span class="annot"><a href="GHC.Tc.Errors.html#solverDepthErrorTcS"><span class="hs-identifier hs-type">solverDepthErrorTcS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681344164"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-3127"></span><span id="solverDepthErrorTcS"><span class="annot"><span class="annottext">solverDepthErrorTcS :: forall a. CtLoc -&gt; Type -&gt; TcM a
</span><a href="GHC.Tc.Errors.html#solverDepthErrorTcS"><span class="hs-identifier hs-var hs-var">solverDepthErrorTcS</span></a></span></span><span> </span><span id="local-6989586621681342038"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342038"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681342037"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342037"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-3128"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. CtLoc -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#setCtLocM"><span class="hs-identifier hs-var">setCtLocM</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342038"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3129"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681342036"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342036"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TcM Type
</span><a href="GHC.Tc.Utils.TcMType.html#zonkTcType"><span class="hs-identifier hs-var">zonkTcType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342037"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-3130"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681342034"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342034"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM TidyEnv
</span><a href="GHC.Tc.Utils.Env.html#tcInitTidyEnv"><span class="hs-identifier hs-var">tcInitTidyEnv</span></a></span><span>
</span><span id="line-3131"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681342033"><span class="annot"><span class="annottext">tidy_env :: TidyEnv
</span><a href="#local-6989586621681342033"><span class="hs-identifier hs-var hs-var">tidy_env</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [TcId] -&gt; TidyEnv
</span><a href="GHC.Core.TyCo.Tidy.html#tidyFreeTyCoVars"><span class="hs-identifier hs-var">tidyFreeTyCoVars</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342034"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; [TcId]
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypeList"><span class="hs-identifier hs-var">tyCoVarsOfTypeList</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342036"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3132"></span><span>             </span><span id="local-6989586621681342032"><span class="annot"><span class="annottext">tidy_ty :: Type
</span><a href="#local-6989586621681342032"><span class="hs-identifier hs-var hs-var">tidy_ty</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Tidy.html#tidyType"><span class="hs-identifier hs-var">tidyType</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342033"><span class="hs-identifier hs-var">tidy_env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342036"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-3133"></span><span>             </span><span id="local-6989586621681342030"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621681342030"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span>
</span><span id="line-3134"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Reduction stack overflow; size =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SubGoalDepth
</span><a href="#local-6989586621681342029"><span class="hs-identifier hs-var">depth</span></a></span><span>
</span><span id="line-3135"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When simplifying the following type:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3136"></span><span>                           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681342032"><span class="hs-identifier hs-var">tidy_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3137"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342028"><span class="hs-identifier hs-var">note</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3138"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. (TidyEnv, SDoc) -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTcM"><span class="hs-identifier hs-var">failWithTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621681342033"><span class="hs-identifier hs-var">tidy_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681342030"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3139"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3140"></span><span>    </span><span id="local-6989586621681342029"><span class="annot"><span class="annottext">depth :: SubGoalDepth
</span><a href="#local-6989586621681342029"><span class="hs-identifier hs-var hs-var">depth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; SubGoalDepth
</span><a href="GHC.Tc.Types.Constraint.html#ctLocDepth"><span class="hs-identifier hs-var">ctLocDepth</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621681342038"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-3141"></span><span>    </span><span id="local-6989586621681342028"><span class="annot"><span class="annottext">note :: SDoc
</span><a href="#local-6989586621681342028"><span class="hs-identifier hs-var hs-var">note</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-3142"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Use -freduction-depth=0 to disable this check&quot;</span></span><span>
</span><span id="line-3143"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(any upper bound you could choose might fail unpredictably with&quot;</span></span><span>
</span><span id="line-3144"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; minor updates to GHC, so disabling the check is recommended if&quot;</span></span><span>
</span><span id="line-3145"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; you're sure that type checking should terminate)&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3146"></span></pre></body></html>