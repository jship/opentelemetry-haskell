<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns    #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes      #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns    #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">{-
(c) The AQUA Project, Glasgow University, 1994-1998

\section[ErrsUtils]{Utilities for error reporting}
-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Utils.Error</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-13"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Basic types</span></span><span>
</span><span id="line-14"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier">Validity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier">andValid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier">allValid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#isValid"><span class="hs-identifier">isValid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#getInvalids"><span class="hs-identifier">getInvalids</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#orValid"><span class="hs-identifier">orValid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier">Severity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Messages</span></span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#WarnMsg"><span class="hs-identifier">WarnMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier">MsgEnvelope</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier">SDoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier">DecoratedSDoc</span></a></span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier">unDecorated</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier">Messages</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#ErrorMessages"><span class="hs-identifier">ErrorMessages</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#WarningMessages"><span class="hs-identifier">WarningMessages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#unionMessages"><span class="hs-identifier">unionMessages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#errorsFound"><span class="hs-identifier">errorsFound</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#isEmptyMessages"><span class="hs-identifier">isEmptyMessages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Formatting</span></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier">pprMessageBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier">pprMsgEnvelopeBagWithLoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier">pprLocMsgEnvelope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier">formatBulleted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Construction</span></span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#emptyMessages"><span class="hs-identifier">emptyMessages</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier">mkDecorated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier">mkLocMessage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessageAnn"><span class="hs-identifier">mkLocMessageAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#makeIntoWarning"><span class="hs-identifier">makeIntoWarning</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkMsgEnvelope"><span class="hs-identifier">mkMsgEnvelope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkPlainMsgEnvelope"><span class="hs-identifier">mkPlainMsgEnvelope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkErr"><span class="hs-identifier">mkErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkLongMsgEnvelope"><span class="hs-identifier">mkLongMsgEnvelope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkWarnMsg"><span class="hs-identifier">mkWarnMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkPlainWarnMsg"><span class="hs-identifier">mkPlainWarnMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkLongWarnMsg"><span class="hs-identifier">mkLongWarnMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#doIfSet"><span class="hs-identifier">doIfSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#doIfSet_dyn"><span class="hs-identifier">doIfSet_dyn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#getCaretDiagnostic"><span class="hs-identifier">getCaretDiagnostic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Issuing messages during compilation</span></span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#putMsg"><span class="hs-identifier">putMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#printInfoForUser"><span class="hs-identifier">printInfoForUser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#printOutputForUser"><span class="hs-identifier">printOutputForUser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier">logInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier">logOutput</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier">errorMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#warningMsg"><span class="hs-identifier">warningMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#fatalErrorMsg"><span class="hs-identifier">fatalErrorMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#fatalErrorMsg%27%27"><span class="hs-identifier">fatalErrorMsg''</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#compilationProgressMsg"><span class="hs-identifier">compilationProgressMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier">showPass</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier">withTiming</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier">withTimingSilent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier">debugTraceMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier">ghcExit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#prettyPrintGhcErrors"><span class="hs-identifier">prettyPrintGhcErrors</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#traceCmd"><span class="hs-identifier">traceCmd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier">sortMsgBag</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Ppr.html"><span class="hs-identifier">GHC.Driver.Ppr</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Exception.html"><span class="hs-identifier">GHC.Utils.Exception</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/System-Exit.html#"><span class="hs-identifier">System.Exit</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-IO-Exception.html#ExitCode"><span class="hs-identifier">ExitCode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/System-Exit.html#exitWith"><span class="hs-identifier">exitWith</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-List.html#"><span class="hs-identifier">Data.List</span></a></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-OldList.html#sortBy"><span class="hs-identifier">sortBy</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#"><span class="hs-identifier">Data.Maybe</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier">fromMaybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Data-Function.html#"><span class="hs-identifier">Data.Function</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Debug-Trace.html#"><span class="hs-identifier">Debug.Trace</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../exceptions-0.10.4/src/Control-Monad-Catch.html#"><span class="hs-identifier">Control.Monad.Catch</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../exceptions-0.10.4/src/Control-Monad-Catch.html#handle"><span class="hs-identifier">handle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Conc.html#"><span class="hs-identifier">GHC.Conc</span></a></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Conc-Sync.html#getAllocationCounter"><span class="hs-identifier">getAllocationCounter</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/System-CPUTime.html#"><span class="hs-identifier">System.CPUTime</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-84"></span><span class="hs-keyword">data</span><span> </span><span id="Validity"><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-var">Validity</span></a></span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsValid"><span class="annot"><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span></span><span>            </span><span class="hs-comment">-- ^ Everything is fine</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotValid"><span class="annot"><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-var">NotValid</span></a></span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>    </span><span class="hs-comment">-- ^ A problem, and some indication of why</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="GHC.Utils.Error.html#isValid"><span class="hs-identifier hs-type">isValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-89"></span><span id="isValid"><span class="annot"><span class="annottext">isValid :: Validity -&gt; Bool
</span><a href="GHC.Utils.Error.html#isValid"><span class="hs-identifier hs-var hs-var">isValid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-90"></span><span class="annot"><a href="GHC.Utils.Error.html#isValid"><span class="hs-identifier hs-var">isValid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-type">NotValid</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="annot"><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier hs-type">andValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span>
</span><span id="line-93"></span><span id="andValid"><span class="annot"><span class="annottext">andValid :: Validity -&gt; Validity -&gt; Validity
</span><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier hs-var hs-var">andValid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span> </span><span id="local-6989586621681023736"><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023736"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023736"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-94"></span><span class="annot"><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier hs-var">andValid</span></a></span><span> </span><span id="local-6989586621681023735"><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023735"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Validity
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023735"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-comment">-- | If they aren't all valid, return the first</span><span>
</span><span id="line-97"></span><span class="annot"><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-type">allValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span>
</span><span id="line-98"></span><span id="allValid"><span class="annot"><span class="annottext">allValid :: [Validity] -&gt; Validity
</span><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-var hs-var">allValid</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-99"></span><span class="annot"><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-var">allValid</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681023734"><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023734"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681023733"><span class="annot"><span class="annottext">[Validity]
</span><a href="#local-6989586621681023733"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023734"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Validity -&gt; Validity -&gt; Validity
</span><a href="GHC.Utils.Error.html#andValid"><span class="hs-operator hs-var">`andValid`</span></a></span><span> </span><span class="annot"><span class="annottext">[Validity] -&gt; Validity
</span><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-var">allValid</span></a></span><span> </span><span class="annot"><span class="annottext">[Validity]
</span><a href="#local-6989586621681023733"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><a href="GHC.Utils.Error.html#getInvalids"><span class="hs-identifier hs-type">getInvalids</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-102"></span><span id="getInvalids"><span class="annot"><span class="annottext">getInvalids :: [Validity] -&gt; [SDoc]
</span><a href="GHC.Utils.Error.html#getInvalids"><span class="hs-identifier hs-var hs-var">getInvalids</span></a></span></span><span> </span><span id="local-6989586621681023732"><span class="annot"><span class="annottext">[Validity]
</span><a href="#local-6989586621681023732"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023731"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-type">NotValid</span></a></span><span> </span><span id="local-6989586621681023731"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023731"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Validity]
</span><a href="#local-6989586621681023732"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="annot"><a href="GHC.Utils.Error.html#orValid"><span class="hs-identifier hs-type">orValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-type">Validity</span></a></span><span>
</span><span id="line-105"></span><span id="orValid"><span class="annot"><span class="annottext">orValid :: Validity -&gt; Validity -&gt; Validity
</span><a href="GHC.Utils.Error.html#orValid"><span class="hs-identifier hs-var hs-var">orValid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span> </span><span class="annot"><span class="annottext">Validity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-106"></span><span class="annot"><a href="GHC.Utils.Error.html#orValid"><span class="hs-identifier hs-var">orValid</span></a></span><span> </span><span class="annot"><span class="annottext">Validity
</span><span class="hs-identifier">_</span></span><span>       </span><span id="local-6989586621681023730"><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023730"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity
</span><a href="#local-6989586621681023730"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- Collecting up messages for later ordering and printing.</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- | Formats the input list of structured document, where each element of the list gets a bullet.</span><span>
</span><span id="line-113"></span><span class="annot"><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier hs-type">formatBulleted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDocContext"><span class="hs-identifier hs-type">SDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-114"></span><span id="formatBulleted"><span class="annot"><span class="annottext">formatBulleted :: SDocContext -&gt; DecoratedSDoc -&gt; SDoc
</span><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier hs-var hs-var">formatBulleted</span></a></span></span><span> </span><span id="local-6989586621681023729"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023729"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; [SDoc]
</span><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier hs-var">unDecorated</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621681023728"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681023728"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681023727"><span class="hs-identifier hs-var">msgs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-116"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-117"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621681023725"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023725"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023725"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><span class="annottext">[SDoc]
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681023723"><span class="hs-identifier hs-var">starred</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681023727"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621681023727"><span class="annot"><span class="annottext">msgs :: [SDoc]
</span><a href="#local-6989586621681023727"><span class="hs-identifier hs-var hs-var">msgs</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#isEmpty"><span class="hs-identifier hs-var">Outputable.isEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023729"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681023728"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621681023723"><span class="annot"><span class="annottext">starred :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681023723"><span class="hs-identifier hs-var hs-var">starred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#bullet"><span class="hs-identifier hs-var">bullet</span></a></span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier hs-type">pprMsgEnvelopeBagWithLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-124"></span><span id="pprMsgEnvelopeBagWithLoc"><span class="annot"><span class="annottext">pprMsgEnvelopeBagWithLoc :: Bag (MsgEnvelope DecoratedSDoc) -&gt; [SDoc]
</span><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier hs-var hs-var">pprMsgEnvelopeBagWithLoc</span></a></span></span><span> </span><span id="local-6989586621681023717"><span class="annot"><span class="annottext">Bag (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681023717"><span class="hs-identifier hs-var">bag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall e. RenderableDiagnostic e =&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-var">pprLocMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681023716"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681023716"><span class="annot"><span class="annottext">MsgEnvelope DecoratedSDoc
</span><a href="#local-6989586621681023716"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e. Maybe DynFlags -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
</span><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-var">sortMsgBag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope DecoratedSDoc)
</span><a href="#local-6989586621681023717"><span class="hs-identifier hs-var">bag</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span id="local-6989586621681023902"><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-type">pprLocMsgEnvelope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#RenderableDiagnostic"><span class="hs-identifier hs-type">RenderableDiagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023902"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023902"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-127"></span><span id="pprLocMsgEnvelope"><span class="annot"><span class="annottext">pprLocMsgEnvelope :: forall e. RenderableDiagnostic e =&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-var hs-var">pprLocMsgEnvelope</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">errMsgSpan :: forall e. MsgEnvelope e -&gt; SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var">errMsgSpan</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681023711"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681023711"><span class="hs-identifier hs-var">s</span></a></span></span><span>
</span><span id="line-128"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgDiagnostic :: forall e. MsgEnvelope e -&gt; e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var">errMsgDiagnostic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681023709"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681023709"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-129"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgSeverity :: forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681023707"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621681023707"><span class="hs-identifier hs-var">sev</span></a></span></span><span>
</span><span id="line-130"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgContext :: forall e. MsgEnvelope e -&gt; PrintUnqualified
</span><a href="GHC.Types.Error.html#errMsgContext"><span class="hs-identifier hs-var">errMsgContext</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681023705"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681023705"><span class="hs-identifier hs-var">unqual</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDocContext -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocWithContext"><span class="hs-identifier hs-var">sdocWithContext</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681023703"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023703"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><span class="annottext">PrintUnqualified -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withErrStyle"><span class="hs-identifier hs-var">withErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681023705"><span class="hs-identifier hs-var">unqual</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; SrcSpan -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier hs-var">mkLocMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621681023707"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681023711"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDocContext -&gt; DecoratedSDoc -&gt; SDoc
</span><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier hs-var">formatBulleted</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023703"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. RenderableDiagnostic a =&gt; a -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#renderDiagnostic"><span class="hs-identifier hs-var">renderDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681023709"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span id="local-6989586621681023900"><span class="annot"><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-type">sortMsgBag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023900"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023900"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-135"></span><span id="sortMsgBag"><span class="annot"><span class="annottext">sortMsgBag :: forall e. Maybe DynFlags -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
</span><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-var hs-var">sortMsgBag</span></a></span></span><span> </span><span id="local-6989586621681023695"><span class="annot"><span class="annottext">Maybe DynFlags
</span><a href="#local-6989586621681023695"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MsgEnvelope e] -&gt; [MsgEnvelope e]
</span><a href="#local-6989586621681023694"><span class="hs-identifier hs-var">maybeLimit</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/Data-OldList.html#sortBy"><span class="hs-identifier hs-var">sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="#local-6989586621681023693"><span class="hs-identifier hs-var">cmp</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/Data-Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">forall e. MsgEnvelope e -&gt; SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var">errMsgSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681023693"><span class="annot"><span class="annottext">cmp :: SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="#local-6989586621681023693"><span class="hs-identifier hs-var hs-var">cmp</span></a></span></span><span>
</span><span id="line-137"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../base-4.16.4.0/src/Data-Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#reverseErrors"><span class="hs-identifier hs-var">reverseErrors</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DynFlags
</span><a href="#local-6989586621681023695"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#rightmost_smallest"><span class="hs-identifier hs-var">SrcLoc.rightmost_smallest</span></a></span><span>
</span><span id="line-138"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#leftmost_smallest"><span class="hs-identifier hs-var">SrcLoc.leftmost_smallest</span></a></span><span>
</span><span id="line-139"></span><span>        </span><span id="local-6989586621681023694"><span class="annot"><span class="annottext">maybeLimit :: [MsgEnvelope e] -&gt; [MsgEnvelope e]
</span><a href="#local-6989586621681023694"><span class="hs-identifier hs-var hs-var">maybeLimit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#join"><span class="hs-identifier hs-var">join</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Maybe Int
</span><a href="GHC.Driver.Session.html#maxErrors"><span class="hs-identifier hs-var">maxErrors</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DynFlags
</span><a href="#local-6989586621681023695"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-140"></span><span>          </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-141"></span><span>          </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681023685"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023685"><span class="hs-identifier hs-var">err_limit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-List.html#take"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023685"><span class="hs-identifier hs-var">err_limit</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="annot"><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier hs-type">ghcExit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span id="ghcExit"><span class="annot"><span class="annottext">ghcExit :: Logger -&gt; DynFlags -&gt; Int -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier hs-var hs-var">ghcExit</span></a></span></span><span> </span><span id="local-6989586621681023683"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023683"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023682"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023682"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023681"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023681"><span class="hs-identifier hs-var">val</span></a></span></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023681"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. ExitCode -&gt; IO a
</span><a href="../../base-4.16.4.0/src/System-Exit.html#exitWith"><span class="hs-identifier hs-var">exitWith</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../base-4.16.4.0/src/GHC-IO-Exception.html#ExitSuccess"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier hs-var">errorMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023683"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023682"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nCompilation had errors\n\n&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>                   </span><span class="annot"><span class="annottext">forall a. ExitCode -&gt; IO a
</span><a href="../../base-4.16.4.0/src/System-Exit.html#exitWith"><span class="hs-identifier hs-var">exitWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ExitCode
</span><a href="../../base-4.16.4.0/src/GHC-IO-Exception.html#ExitFailure"><span class="hs-identifier hs-var">ExitFailure</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023681"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="annot"><a href="GHC.Utils.Error.html#doIfSet"><span class="hs-identifier hs-type">doIfSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span id="doIfSet"><span class="annot"><span class="annottext">doIfSet :: Bool -&gt; IO () -&gt; IO ()
</span><a href="GHC.Utils.Error.html#doIfSet"><span class="hs-identifier hs-var hs-var">doIfSet</span></a></span></span><span> </span><span id="local-6989586621681023677"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681023677"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621681023676"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023676"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681023677"><span class="hs-identifier hs-var">flag</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023676"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-151"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="annot"><a href="GHC.Utils.Error.html#doIfSet_dyn"><span class="hs-identifier hs-type">doIfSet_dyn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#GeneralFlag"><span class="hs-identifier hs-type">GeneralFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span id="doIfSet_dyn"><span class="annot"><span class="annottext">doIfSet_dyn :: DynFlags -&gt; GeneralFlag -&gt; IO () -&gt; IO ()
</span><a href="GHC.Utils.Error.html#doIfSet_dyn"><span class="hs-identifier hs-var hs-var">doIfSet_dyn</span></a></span></span><span> </span><span id="local-6989586621681023675"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023675"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023674"><span class="annot"><span class="annottext">GeneralFlag
</span><a href="#local-6989586621681023674"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621681023673"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023673"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="#local-6989586621681023674"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023675"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023673"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-155"></span><span>                               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- Outputting messages from the compiler</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- We want all messages to go through one place, so that we can</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- redirect them if necessary.  For example, when GHC is used as a</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- library we might want to catch all messages that GHC tries to</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- output and do something else with them.</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><a href="GHC.Utils.Error.html#ifVerbose"><span class="hs-identifier hs-type">ifVerbose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span id="ifVerbose"><span class="annot"><span class="annottext">ifVerbose :: DynFlags -&gt; Int -&gt; IO () -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ifVerbose"><span class="hs-identifier hs-var hs-var">ifVerbose</span></a></span></span><span> </span><span id="local-6989586621681023670"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023670"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023669"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023669"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681023668"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023668"><span class="hs-identifier hs-var">act</span></a></span></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#verbosity"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023670"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023669"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023668"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#ifVerbose"><span class="hs-pragma hs-type">ifVerbose</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>  </span><span class="hs-comment">-- see Note [INLINE conditional tracing utilities]</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="annot"><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier hs-type">errorMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span id="errorMsg"><span class="annot"><span class="annottext">errorMsg :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier hs-var hs-var">errorMsg</span></a></span></span><span> </span><span id="local-6989586621681023666"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023666"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023665"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023665"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023664"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023664"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-173"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023666"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023665"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultErrStyle"><span class="hs-identifier hs-var">defaultErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023664"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><a href="GHC.Utils.Error.html#warningMsg"><span class="hs-identifier hs-type">warningMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span id="warningMsg"><span class="annot"><span class="annottext">warningMsg :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#warningMsg"><span class="hs-identifier hs-var hs-var">warningMsg</span></a></span></span><span> </span><span id="local-6989586621681023657"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023657"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023656"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023656"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023655"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023655"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-177"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023657"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023656"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultErrStyle"><span class="hs-identifier hs-var">defaultErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023655"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><a href="GHC.Utils.Error.html#fatalErrorMsg"><span class="hs-identifier hs-type">fatalErrorMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span id="fatalErrorMsg"><span class="annot"><span class="annottext">fatalErrorMsg :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#fatalErrorMsg"><span class="hs-identifier hs-var hs-var">fatalErrorMsg</span></a></span></span><span> </span><span id="local-6989586621681023653"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023653"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023652"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023652"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023651"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023651"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023653"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023652"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevFatal"><span class="hs-identifier hs-var">SevFatal</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultErrStyle"><span class="hs-identifier hs-var">defaultErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023651"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="annot"><a href="GHC.Utils.Error.html#fatalErrorMsg%27%27"><span class="hs-identifier hs-type">fatalErrorMsg''</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#FatalMessager"><span class="hs-identifier hs-type">FatalMessager</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span id="fatalErrorMsg%27%27"><span class="annot"><span class="annottext">fatalErrorMsg'' :: FatalMessager -&gt; FatalMessager
</span><a href="GHC.Utils.Error.html#fatalErrorMsg%27%27"><span class="hs-identifier hs-var hs-var">fatalErrorMsg''</span></a></span></span><span> </span><span id="local-6989586621681023649"><span class="annot"><span class="annottext">FatalMessager
</span><a href="#local-6989586621681023649"><span class="hs-identifier hs-var">fm</span></a></span></span><span> </span><span id="local-6989586621681023648"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023648"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="#local-6989586621681023649"><span class="hs-identifier hs-var">fm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023648"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="annot"><a href="GHC.Utils.Error.html#compilationProgressMsg"><span class="hs-identifier hs-type">compilationProgressMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span id="compilationProgressMsg"><span class="annot"><span class="annottext">compilationProgressMsg :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#compilationProgressMsg"><span class="hs-identifier hs-var hs-var">compilationProgressMsg</span></a></span></span><span> </span><span id="local-6989586621681023647"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023647"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023646"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023646"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023645"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023645"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681023644"><span class="annot"><span class="annottext">str :: String
</span><a href="#local-6989586621681023644"><span class="hs-identifier hs-var hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; SDoc -&gt; String
</span><a href="GHC.Driver.Ppr.html#showSDoc"><span class="hs-identifier hs-var">showSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023646"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023645"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="../../base-4.16.4.0/src/Debug-Trace.html#traceEventIO"><span class="hs-identifier hs-var">traceEventIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC progress: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023644"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><span class="annottext">DynFlags -&gt; Int -&gt; IO () -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ifVerbose"><span class="hs-identifier hs-var">ifVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023646"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-var">logOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023647"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023646"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023645"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="annot"><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-type">showPass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span id="showPass"><span class="annot"><span class="annottext">showPass :: Logger -&gt; DynFlags -&gt; FatalMessager
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var hs-var">showPass</span></a></span></span><span> </span><span id="local-6989586621681023640"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023640"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023639"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023639"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023638"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023638"><span class="hs-identifier hs-var">what</span></a></span></span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Int -&gt; IO () -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ifVerbose"><span class="hs-identifier hs-var">ifVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023639"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023640"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023639"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;***&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023638"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-keyword">data</span><span> </span><span id="PrintTimings"><span class="annot"><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrintTimings"><span class="annot"><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DontPrintTimings"><span class="annot"><a href="GHC.Utils.Error.html#DontPrintTimings"><span class="hs-identifier hs-var">DontPrintTimings</span></a></span></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681023630"><span id="local-6989586621681023632"><span class="annot"><span class="annottext">PrintTimings -&gt; PrintTimings -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PrintTimings -&gt; PrintTimings -&gt; Bool
$c/= :: PrintTimings -&gt; PrintTimings -&gt; Bool
== :: PrintTimings -&gt; PrintTimings -&gt; Bool
$c== :: PrintTimings -&gt; PrintTimings -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681023623"><span id="local-6989586621681023625"><span id="local-6989586621681023627"><span class="annot"><span class="annottext">Int -&gt; PrintTimings -&gt; ShowS
[PrintTimings] -&gt; ShowS
PrintTimings -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PrintTimings] -&gt; ShowS
$cshowList :: [PrintTimings] -&gt; ShowS
show :: PrintTimings -&gt; String
$cshow :: PrintTimings -&gt; String
showsPrec :: Int -&gt; PrintTimings -&gt; ShowS
$cshowsPrec :: Int -&gt; PrintTimings -&gt; ShowS
</span><a href="../../base-4.16.4.0/src/GHC-Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">-- | Time a compilation phase.</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- When timings are enabled (e.g. with the @-v2@ flag), the allocations</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- and CPU time used by the phase will be reported to stderr. Consider</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- a typical usage:</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- @withTiming getDynFlags (text &quot;simplify&quot;) force PrintTimings pass@.</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- When timings are enabled the following costs are included in the</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- produced accounting,</span><span>
</span><span id="line-209"></span><span class="hs-comment">--</span><span>
</span><span id="line-210"></span><span class="hs-comment">--  - The cost of executing @pass@ to a result @r@ in WHNF</span><span>
</span><span id="line-211"></span><span class="hs-comment">--  - The cost of evaluating @force r@ to WHNF (e.g. @()@)</span><span>
</span><span id="line-212"></span><span class="hs-comment">--</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- The choice of the @force@ function depends upon the amount of forcing</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- desired; the goal here is to ensure that the cost of evaluating the result</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- is, to the greatest extent possible, included in the accounting provided by</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- 'withTiming'. Often the pass already sufficiently forces its result during</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- construction; in this case @const ()@ is a reasonable choice.</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- In other cases, it is necessary to evaluate the result to normal form, in</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- which case something like @Control.DeepSeq.rnf@ is appropriate.</span><span>
</span><span id="line-220"></span><span class="hs-comment">--</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- To avoid adversely affecting compiler performance when timings are not</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- requested, the result is only forced when timings are enabled.</span><span>
</span><span id="line-223"></span><span class="hs-comment">--</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- See Note [withTiming] for more.</span><span>
</span><span id="line-225"></span><span id="local-6989586621681023861"><span id="local-6989586621681023863"><span class="annot"><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier hs-type">withTiming</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023863"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-226"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-227"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>     </span><span class="hs-comment">-- ^ DynFlags</span><span>
</span><span id="line-228"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>         </span><span class="hs-comment">-- ^ The name of the phase</span><span>
</span><span id="line-229"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681023861"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- ^ A function to force the result</span><span>
</span><span id="line-230"></span><span>                           </span><span class="hs-comment">-- (often either @const ()@ or 'rnf')</span><span>
</span><span id="line-231"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023863"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023861"><span class="hs-identifier hs-type">a</span></a></span><span>          </span><span class="hs-comment">-- ^ The body of the phase to be timed</span><span>
</span><span id="line-232"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023863"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023861"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-233"></span><span id="withTiming"><span class="annot"><span class="annottext">withTiming :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; DynFlags -&gt; SDoc -&gt; (a -&gt; ()) -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier hs-var hs-var">withTiming</span></a></span></span><span> </span><span id="local-6989586621681023619"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023619"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023618"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023618"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023617"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023617"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681023616"><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681023616"><span class="hs-identifier hs-var">force</span></a></span></span><span> </span><span id="local-6989586621681023615"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023615"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger
-&gt; DynFlags -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-var">withTiming'</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023619"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023618"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023617"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681023616"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023615"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- | Same as 'withTiming', but doesn't print timings in the</span><span>
</span><span id="line-237"></span><span class="hs-comment">--   console (when given @-vN@, @N &gt;= 2@ or @-ddump-timings@).</span><span>
</span><span id="line-238"></span><span class="hs-comment">--</span><span>
</span><span id="line-239"></span><span class="hs-comment">--   See Note [withTiming] for more.</span><span>
</span><span id="line-240"></span><span id="local-6989586621681023612"><span id="local-6989586621681023613"><span class="annot"><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier hs-type">withTimingSilent</span></a></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023613"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>   </span><span class="hs-comment">-- ^ DynFlags</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>       </span><span class="hs-comment">-- ^ The name of the phase</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681023612"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ A function to force the result</span><span>
</span><span id="line-246"></span><span>                </span><span class="hs-comment">-- (often either @const ()@ or 'rnf')</span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023612"><span class="hs-identifier hs-type">a</span></a></span><span>        </span><span class="hs-comment">-- ^ The body of the phase to be timed</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023612"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-249"></span><span id="withTimingSilent"><span class="annot"><span class="annottext">withTimingSilent :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; DynFlags -&gt; SDoc -&gt; (a -&gt; ()) -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier hs-var hs-var">withTimingSilent</span></a></span></span><span> </span><span id="local-6989586621681023609"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023609"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023608"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023608"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023607"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023607"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681023606"><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681023606"><span class="hs-identifier hs-var">force</span></a></span></span><span> </span><span id="local-6989586621681023605"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023605"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger
-&gt; DynFlags -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-var">withTiming'</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023609"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023608"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023607"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681023606"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#DontPrintTimings"><span class="hs-identifier hs-var">DontPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023605"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-comment">-- | Worker for 'withTiming' and 'withTimingSilent'.</span><span>
</span><span id="line-253"></span><span id="local-6989586621681023857"><span id="local-6989586621681023858"><span class="annot"><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-type">withTiming'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023858"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-254"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-255"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>   </span><span class="hs-comment">-- ^ 'DynFlags'</span><span>
</span><span id="line-256"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>         </span><span class="hs-comment">-- ^ The name of the phase</span><span>
</span><span id="line-257"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681023857"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- ^ A function to force the result</span><span>
</span><span id="line-258"></span><span>                            </span><span class="hs-comment">-- (often either @const ()@ or 'rnf')</span><span>
</span><span id="line-259"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-type">PrintTimings</span></a></span><span> </span><span class="hs-comment">-- ^ Whether to print the timings</span><span>
</span><span id="line-260"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023858"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023857"><span class="hs-identifier hs-type">a</span></a></span><span>          </span><span class="hs-comment">-- ^ The body of the phase to be timed</span><span>
</span><span id="line-261"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023858"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023857"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-262"></span><span id="withTiming%27"><span class="annot"><span class="annottext">withTiming' :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger
-&gt; DynFlags -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-var hs-var">withTiming'</span></a></span></span><span> </span><span id="local-6989586621681023540"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023540"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023539"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023538"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023538"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681023537"><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681023537"><span class="hs-identifier hs-var">force_result</span></a></span></span><span> </span><span id="local-6989586621681023536"><span class="annot"><span class="annottext">PrintTimings
</span><a href="#local-6989586621681023536"><span class="hs-identifier hs-var">prtimings</span></a></span></span><span> </span><span id="local-6989586621681023535"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023535"><span class="hs-identifier hs-var">action</span></a></span></span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#verbosity"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">DumpFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#dopt"><span class="hs-identifier hs-var">dopt</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_timings"><span class="hs-identifier hs-var">Opt_D_dump_timings</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681023531"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-265"></span><span>              </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023540"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-266"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;***&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023538"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-267"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681023530"><span class="annot"><span class="annottext">ctx :: SDocContext
</span><a href="#local-6989586621681023530"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; SDocContext
</span><a href="GHC.Driver.Session.html#initDefaultSDocContext"><span class="hs-identifier hs-var">initDefaultSDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-268"></span><span>            </span><span id="local-6989586621681023528"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023528"><span class="hs-identifier hs-var">alloc0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Int64
</span><a href="../../base-4.16.4.0/src/GHC-Conc-Sync.html#getAllocationCounter"><span class="hs-identifier hs-var">getAllocationCounter</span></a></span><span>
</span><span id="line-269"></span><span>            </span><span id="local-6989586621681023526"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681023526"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Integer
</span><a href="../../base-4.16.4.0/src/System-CPUTime.html#getCPUTime"><span class="hs-identifier hs-var">getCPUTime</span></a></span><span>
</span><span id="line-270"></span><span>            </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681023524"><span class="hs-identifier hs-var">eventBegins</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023530"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023538"><span class="hs-identifier hs-var">what</span></a></span><span>
</span><span id="line-271"></span><span>            </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {a}. (MonadIO m, Show a) =&gt; a -&gt; m ()
</span><a href="#local-6989586621681023523"><span class="hs-identifier hs-var">recordAllocs</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023528"><span class="hs-identifier hs-var">alloc0</span></a></span><span>
</span><span id="line-272"></span><span>            </span><span class="hs-glyph">!</span><span id="local-6989586621681023522"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681023522"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023535"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-273"></span><span>            </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681023537"><span class="hs-identifier hs-var">force_result</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681023522"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-274"></span><span>            </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681023521"><span class="hs-identifier hs-var">eventEnds</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023530"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023538"><span class="hs-identifier hs-var">what</span></a></span><span>
</span><span id="line-275"></span><span>            </span><span id="local-6989586621681023520"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681023520"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Integer
</span><a href="../../base-4.16.4.0/src/System-CPUTime.html#getCPUTime"><span class="hs-identifier hs-var">getCPUTime</span></a></span><span>
</span><span id="line-276"></span><span>            </span><span id="local-6989586621681023519"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023519"><span class="hs-identifier hs-var">alloc1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Int64
</span><a href="../../base-4.16.4.0/src/GHC-Conc-Sync.html#getAllocationCounter"><span class="hs-identifier hs-var">getAllocationCounter</span></a></span><span>
</span><span id="line-277"></span><span>            </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {a}. (MonadIO m, Show a) =&gt; a -&gt; m ()
</span><a href="#local-6989586621681023523"><span class="hs-identifier hs-var">recordAllocs</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023519"><span class="hs-identifier hs-var">alloc1</span></a></span><span>
</span><span id="line-278"></span><span>            </span><span class="hs-comment">-- recall that allocation counter counts down</span><span>
</span><span id="line-279"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681023518"><span class="annot"><span class="annottext">alloc :: Int64
</span><a href="#local-6989586621681023518"><span class="hs-identifier hs-var hs-var">alloc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023528"><span class="hs-identifier hs-var">alloc0</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023519"><span class="hs-identifier hs-var">alloc1</span></a></span><span>
</span><span id="line-280"></span><span>                </span><span id="local-6989586621681023517"><span class="annot"><span class="annottext">time :: Double
</span><a href="#local-6989586621681023517"><span class="hs-identifier hs-var hs-var">time</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681023520"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681023526"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1e-9</span></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#verbosity"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="#local-6989586621681023536"><span class="hs-identifier hs-var">prtimings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>                </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023540"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span>
</span><span id="line-284"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;!!!&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023538"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;finished in&quot;</span></span><span>
</span><span id="line-285"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doublePrec"><span class="hs-identifier hs-var">doublePrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681023517"><span class="hs-identifier hs-var">time</span></a></span><span>
</span><span id="line-286"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;milliseconds&quot;</span></span><span>
</span><span id="line-287"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-288"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;allocated&quot;</span></span><span>
</span><span id="line-289"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doublePrec"><span class="hs-identifier hs-var">doublePrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023518"><span class="hs-identifier hs-var">alloc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Real.html#%2F"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1024</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.16.4.0/src/GHC-Real.html#%2F"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1024</span></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;megabytes&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681023531"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-293"></span><span>                </span><span class="annot"><span class="annottext">Logger
-&gt; DynFlags -&gt; DumpFlag -&gt; String -&gt; DumpFormat -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#dumpIfSet_dyn"><span class="hs-identifier hs-var">dumpIfSet_dyn</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023540"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023539"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_timings"><span class="hs-identifier hs-var">Opt_D_dump_timings</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">DumpFormat
</span><a href="GHC.Utils.Logger.html#FormatText"><span class="hs-identifier hs-var">FormatText</span></a></span><span>
</span><span id="line-294"></span><span>                    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023530"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-295"></span><span>                    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023538"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-296"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;alloc=&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681023518"><span class="hs-identifier hs-var">alloc</span></a></span><span>
</span><span id="line-297"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;time=&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doublePrec"><span class="hs-identifier hs-var">doublePrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681023517"><span class="hs-identifier hs-var">time</span></a></span><span>
</span><span id="line-298"></span><span>                           </span><span class="hs-special">]</span><span>
</span><span id="line-299"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681023522"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-300"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681023535"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681023531"><span class="annot"><span class="annottext">whenPrintTimings :: IO () -&gt; m ()
</span><a href="#local-6989586621681023531"><span class="hs-identifier hs-var hs-var">whenPrintTimings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintTimings
</span><a href="#local-6989586621681023536"><span class="hs-identifier hs-var">prtimings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span>          </span><span id="local-6989586621681023523"><span class="annot"><span class="annottext">recordAllocs :: a -&gt; m ()
</span><a href="#local-6989586621681023523"><span class="hs-identifier hs-var hs-var">recordAllocs</span></a></span></span><span> </span><span id="local-6989586621681023501"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681023501"><span class="hs-identifier hs-var">alloc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="../../base-4.16.4.0/src/Debug-Trace.html#traceMarkerIO"><span class="hs-identifier hs-var">traceMarkerIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC:allocs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.4.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681023501"><span class="hs-identifier hs-var">alloc</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>          </span><span id="local-6989586621681023524"><span class="annot"><span class="annottext">eventBegins :: SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681023524"><span class="hs-identifier hs-var hs-var">eventBegins</span></a></span></span><span> </span><span id="local-6989586621681023498"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023498"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681023497"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023497"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-308"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681023496"><span class="annot"><span class="annottext">doc :: String
</span><a href="#local-6989586621681023496"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681023495"><span class="hs-identifier hs-var">eventBeginsDoc</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023498"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023497"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-309"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681023531"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="../../base-4.16.4.0/src/Debug-Trace.html#traceMarkerIO"><span class="hs-identifier hs-var">traceMarkerIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023496"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-310"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="../../base-4.16.4.0/src/Debug-Trace.html#traceEventIO"><span class="hs-identifier hs-var">traceEventIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023496"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>          </span><span id="local-6989586621681023521"><span class="annot"><span class="annottext">eventEnds :: SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681023521"><span class="hs-identifier hs-var hs-var">eventEnds</span></a></span></span><span> </span><span id="local-6989586621681023494"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023494"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681023493"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023493"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-313"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681023492"><span class="annot"><span class="annottext">doc :: String
</span><a href="#local-6989586621681023492"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681023491"><span class="hs-identifier hs-var">eventEndsDoc</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023494"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023493"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-314"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681023531"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="../../base-4.16.4.0/src/Debug-Trace.html#traceMarkerIO"><span class="hs-identifier hs-var">traceMarkerIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023492"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-315"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FatalMessager
</span><a href="../../base-4.16.4.0/src/Debug-Trace.html#traceEventIO"><span class="hs-identifier hs-var">traceEventIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023492"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span>          </span><span id="local-6989586621681023495"><span class="annot"><span class="annottext">eventBeginsDoc :: SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681023495"><span class="hs-identifier hs-var hs-var">eventBeginsDoc</span></a></span></span><span> </span><span id="local-6989586621681023490"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023490"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681023489"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023489"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023490"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC:started:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023489"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-318"></span><span>          </span><span id="local-6989586621681023491"><span class="annot"><span class="annottext">eventEndsDoc :: SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681023491"><span class="hs-identifier hs-var hs-var">eventEndsDoc</span></a></span></span><span>   </span><span id="local-6989586621681023488"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023488"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681023487"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023487"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023488"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC:finished:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023487"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-type">debugTraceMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span id="debugTraceMsg"><span class="annot"><span class="annottext">debugTraceMsg :: Logger -&gt; DynFlags -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var hs-var">debugTraceMsg</span></a></span></span><span> </span><span id="local-6989586621681023486"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023486"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023485"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023485"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023484"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023484"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681023483"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023483"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-322"></span><span>   </span><span class="annot"><span class="annottext">DynFlags -&gt; Int -&gt; IO () -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ifVerbose"><span class="hs-identifier hs-var">ifVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023485"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023484"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-323"></span><span>      </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023486"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023485"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultDumpStyle"><span class="hs-identifier hs-var">defaultDumpStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023483"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-pragma hs-type">debugTraceMsg</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>  </span><span class="hs-comment">-- see Note [INLINE conditional tracing utilities]</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="annot"><a href="GHC.Utils.Error.html#putMsg"><span class="hs-identifier hs-type">putMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span id="putMsg"><span class="annot"><span class="annottext">putMsg :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#putMsg"><span class="hs-identifier hs-var hs-var">putMsg</span></a></span></span><span> </span><span id="local-6989586621681023481"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023481"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023480"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023480"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023479"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023479"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023481"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023480"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023479"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="annot"><a href="GHC.Utils.Error.html#printInfoForUser"><span class="hs-identifier hs-type">printInfoForUser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span id="printInfoForUser"><span class="annot"><span class="annottext">printInfoForUser :: Logger -&gt; DynFlags -&gt; PrintUnqualified -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#printInfoForUser"><span class="hs-identifier hs-var hs-var">printInfoForUser</span></a></span></span><span> </span><span id="local-6989586621681023478"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023478"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023477"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023477"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023476"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681023476"><span class="hs-identifier hs-var">print_unqual</span></a></span></span><span> </span><span id="local-6989586621681023475"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023475"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023478"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023477"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintUnqualified -&gt; Depth -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withUserStyle"><span class="hs-identifier hs-var">withUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681023476"><span class="hs-identifier hs-var">print_unqual</span></a></span><span> </span><span class="annot"><span class="annottext">Depth
</span><a href="GHC.Utils.Outputable.html#AllTheWay"><span class="hs-identifier hs-var">AllTheWay</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023475"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="annot"><a href="GHC.Utils.Error.html#printOutputForUser"><span class="hs-identifier hs-type">printOutputForUser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span id="printOutputForUser"><span class="annot"><span class="annottext">printOutputForUser :: Logger -&gt; DynFlags -&gt; PrintUnqualified -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#printOutputForUser"><span class="hs-identifier hs-var hs-var">printOutputForUser</span></a></span></span><span> </span><span id="local-6989586621681023472"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023472"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023471"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023471"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023470"><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681023470"><span class="hs-identifier hs-var">print_unqual</span></a></span></span><span> </span><span id="local-6989586621681023469"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023469"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-var">logOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023472"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023471"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintUnqualified -&gt; Depth -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withUserStyle"><span class="hs-identifier hs-var">withUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="#local-6989586621681023470"><span class="hs-identifier hs-var">print_unqual</span></a></span><span> </span><span class="annot"><span class="annottext">Depth
</span><a href="GHC.Utils.Outputable.html#AllTheWay"><span class="hs-identifier hs-var">AllTheWay</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023469"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="annot"><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-type">logInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span id="logInfo"><span class="annot"><span class="annottext">logInfo :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var hs-var">logInfo</span></a></span></span><span> </span><span id="local-6989586621681023468"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023468"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023467"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023467"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023466"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023466"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023468"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023467"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevInfo"><span class="hs-identifier hs-var">SevInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023466"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-comment">-- | Like 'logInfo' but with 'SevOutput' rather then 'SevInfo'</span><span>
</span><span id="line-342"></span><span class="annot"><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-type">logOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span id="logOutput"><span class="annot"><span class="annottext">logOutput :: Logger -&gt; DynFlags -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-var hs-var">logOutput</span></a></span></span><span> </span><span id="local-6989586621681023464"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023464"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023463"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023463"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023462"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023462"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogAction
</span><a href="GHC.Utils.Logger.html#putLogMsg"><span class="hs-identifier hs-var">putLogMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023464"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023463"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.Flags.html#NoReason"><span class="hs-identifier hs-var">NoReason</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevOutput"><span class="hs-identifier hs-var">SevOutput</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023462"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span id="local-6989586621681023834"><span id="local-6989586621681023836"><span class="annot"><a href="GHC.Utils.Error.html#prettyPrintGhcErrors"><span class="hs-identifier hs-type">prettyPrintGhcErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Exception.html#ExceptionMonad"><span class="hs-identifier hs-type">ExceptionMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023836"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023836"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023834"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681023836"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681023834"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-347"></span><span id="prettyPrintGhcErrors"><span class="annot"><span class="annottext">prettyPrintGhcErrors :: forall (m :: * -&gt; *) a. ExceptionMonad m =&gt; DynFlags -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#prettyPrintGhcErrors"><span class="hs-identifier hs-var hs-var">prettyPrintGhcErrors</span></a></span></span><span> </span><span id="local-6989586621681023452"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023452"><span class="hs-identifier hs-var">dflags</span></a></span></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) e a.
(MonadCatch m, Exception e) =&gt;
(e -&gt; m a) -&gt; m a -&gt; m a
</span><a href="../../exceptions-0.10.4/src/Control-Monad-Catch.html#handle"><span class="hs-identifier hs-var">MC.handle</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681023451"><span class="annot"><span class="annottext">GhcException
</span><a href="#local-6989586621681023451"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GhcException
</span><a href="#local-6989586621681023451"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-349"></span><span>                      </span><span class="annot"><a href="GHC.Utils.Panic.html#PprPanic"><span class="hs-identifier hs-type">PprPanic</span></a></span><span> </span><span id="local-6989586621681023449"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023449"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681023448"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023448"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-350"></span><span>                          </span><span class="annot"><span class="annottext">forall a. SDocContext -&gt; (String -&gt; a) -&gt; SDoc -&gt; SDoc -&gt; a
</span><a href="GHC.Driver.Ppr.html#pprDebugAndThen"><span class="hs-identifier hs-var">pprDebugAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023446"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023449"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023448"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-351"></span><span>                      </span><span class="annot"><a href="GHC.Utils.Panic.html#PprSorry"><span class="hs-identifier hs-type">PprSorry</span></a></span><span> </span><span id="local-6989586621681023443"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023443"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681023442"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023442"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-352"></span><span>                          </span><span class="annot"><span class="annottext">forall a. SDocContext -&gt; (String -&gt; a) -&gt; SDoc -&gt; SDoc -&gt; a
</span><a href="GHC.Driver.Ppr.html#pprDebugAndThen"><span class="hs-identifier hs-var">pprDebugAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023446"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#sorry"><span class="hs-identifier hs-var">sorry</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023443"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023442"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-353"></span><span>                      </span><span class="annot"><a href="GHC.Utils.Panic.html#PprProgramError"><span class="hs-identifier hs-type">PprProgramError</span></a></span><span> </span><span id="local-6989586621681023439"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023439"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681023438"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023438"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-354"></span><span>                          </span><span class="annot"><span class="annottext">forall a. SDocContext -&gt; (String -&gt; a) -&gt; SDoc -&gt; SDoc -&gt; a
</span><a href="GHC.Driver.Ppr.html#pprDebugAndThen"><span class="hs-identifier hs-var">pprDebugAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681023446"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#pgmError"><span class="hs-identifier hs-var">pgmError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023439"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681023438"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-355"></span><span>                      </span><span class="annot"><span class="annottext">GhcException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-356"></span><span>                          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.16.4.0/src/Control-Monad-IO-Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.16.4.0/src/GHC-Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.16.4.0/src/GHC-IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">GhcException
</span><a href="#local-6989586621681023451"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-357"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-358"></span><span>         </span><span id="local-6989586621681023446"><span class="annot"><span class="annottext">ctx :: SDocContext
</span><a href="#local-6989586621681023446"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; PprStyle -&gt; SDocContext
</span><a href="GHC.Driver.Session.html#initSDocContext"><span class="hs-identifier hs-var">initSDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023452"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span id="local-6989586621681023818"><span class="annot"><a href="GHC.Utils.Error.html#traceCmd"><span class="hs-identifier hs-type">traceCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621681023818"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621681023818"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-361"></span><span class="hs-comment">-- trace the command (at two levels of verbosity)</span><span>
</span><span id="line-362"></span><span id="traceCmd"><span class="annot"><span class="annottext">traceCmd :: forall a. Logger -&gt; DynFlags -&gt; String -&gt; String -&gt; IO a -&gt; IO a
</span><a href="GHC.Utils.Error.html#traceCmd"><span class="hs-identifier hs-var hs-var">traceCmd</span></a></span></span><span> </span><span id="local-6989586621681023426"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023426"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681023425"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621681023424"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023424"><span class="hs-identifier hs-var">phase_name</span></a></span></span><span> </span><span id="local-6989586621681023423"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023423"><span class="hs-identifier hs-var">cmd_line</span></a></span></span><span> </span><span id="local-6989586621681023422"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621681023422"><span class="hs-identifier hs-var">action</span></a></span></span><span>
</span><span id="line-363"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>   </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681023421"><span class="annot"><span class="annottext">verb :: Int
</span><a href="#local-6989586621681023421"><span class="hs-identifier hs-var hs-var">verb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#verbosity"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; FatalMessager
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var">showPass</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023426"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023424"><span class="hs-identifier hs-var">phase_name</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023426"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023423"><span class="hs-identifier hs-var">cmd_line</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; FlushErr
</span><a href="GHC.Driver.Session.html#flushErr"><span class="hs-identifier hs-var">flushErr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-367"></span><span>              </span><span class="annot"><a href="GHC.Driver.Session.html#FlushErr"><span class="hs-identifier hs-type">FlushErr</span></a></span><span> </span><span id="local-6989586621681023418"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023418"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681023418"><span class="hs-identifier hs-var">io</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span>           </span><span class="hs-comment">-- And run it!</span><span>
</span><span id="line-370"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621681023422"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
</span><a href="GHC.Utils.Exception.html#catchIO"><span class="hs-operator hs-var">`catchIO`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IOException -&gt; IO a
</span><a href="#local-6989586621681023416"><span class="hs-identifier hs-var">handle_exn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023421"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-371"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-373"></span><span>    </span><span id="local-6989586621681023416"><span class="annot"><span class="annottext">handle_exn :: Int -&gt; IOException -&gt; IO a
</span><a href="#local-6989586621681023416"><span class="hs-identifier hs-var hs-var">handle_exn</span></a></span></span><span> </span><span id="local-6989586621681023415"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681023415"><span class="hs-identifier hs-var">_verb</span></a></span></span><span> </span><span id="local-6989586621681023414"><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621681023414"><span class="hs-identifier hs-var">exn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023426"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681023426"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621681023425"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-375"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed:&quot;</span></span><span>
</span><span id="line-376"></span><span>                                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681023423"><span class="hs-identifier hs-var">cmd_line</span></a></span><span>
</span><span id="line-377"></span><span>                                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.4.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621681023414"><span class="hs-identifier hs-var">exn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">forall a. GhcException -&gt; IO a
</span><a href="GHC.Utils.Panic.html#throwGhcExceptionIO"><span class="hs-identifier hs-var">throwGhcExceptionIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GhcException
</span><a href="GHC.Utils.Panic.html#ProgramError"><span class="hs-identifier hs-var">ProgramError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.16.4.0/src/GHC-Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621681023414"><span class="hs-identifier hs-var">exn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">{- Note [withTiming]
~~~~~~~~~~~~~~~~~~~~

For reference:

  withTiming
    :: MonadIO
    =&gt; m DynFlags   -- how to get the DynFlags
    -&gt; SDoc         -- label for the computation we're timing
    -&gt; (a -&gt; ())    -- how to evaluate the result
    -&gt; PrintTimings -- whether to report the timings when passed
                    -- -v2 or -ddump-timings
    -&gt; m a          -- computation we're timing
    -&gt; m a

withTiming lets you run an action while:

(1) measuring the CPU time it took and reporting that on stderr
    (when PrintTimings is passed),
(2) emitting start/stop events to GHC's event log, with the label
    given as an argument.

Evaluation of the result
------------------------

'withTiming' takes as an argument a function of type 'a -&gt; ()', whose purpose is
to evaluate the result &quot;sufficiently&quot;. A given pass might return an 'm a' for
some monad 'm' and result type 'a', but where the 'a' is complex enough
that evaluating it to WHNF barely scratches its surface and leaves many
complex and time-consuming computations unevaluated. Those would only be
forced by the next pass, and the time needed to evaluate them would be
mis-attributed to that next pass. A more appropriate function would be
one that deeply evaluates the result, so as to assign the time spent doing it
to the pass we're timing.

Note: as hinted at above, the time spent evaluating the application of the
forcing function to the result is included in the timings reported by
'withTiming'.

How we use it
-------------

We measure the time and allocations of various passes in GHC's pipeline by just
wrapping the whole pass with 'withTiming'. This also materializes by having
a label for each pass in the eventlog, where each pass is executed in one go,
during a continuous time window.

However, from STG onwards, the pipeline uses streams to emit groups of
STG/Cmm/etc declarations one at a time, and process them until we get to
assembly code generation. This means that the execution of those last few passes
is interleaved and that we cannot measure how long they take by just wrapping
the whole thing with 'withTiming'. Instead we wrap the processing of each
individual stream element, all along the codegen pipeline, using the appropriate
label for the pass to which this processing belongs. That generates a lot more
data but allows us to get fine-grained timings about all the passes and we can
easily compute totals with tools like ghc-events-analyze (see below).


Producing an eventlog for GHC
-----------------------------

To actually produce the eventlog, you need an eventlog-capable GHC build:

  With Hadrian:
  $ hadrian/build -j &quot;stage1.ghc-bin.ghc.link.opts += -eventlog&quot;

  With Make:
  $ make -j GhcStage2HcOpts+=-eventlog

You can then produce an eventlog when compiling say hello.hs by simply
doing:

  If GHC was built by Hadrian:
  $ _build/stage1/bin/ghc -ddump-timings hello.hs -o hello +RTS -l

  If GHC was built with Make:
  $ inplace/bin/ghc-stage2 -ddump-timing hello.hs -o hello +RTS -l

You could alternatively use -v&lt;N&gt; (with N &gt;= 2) instead of -ddump-timings,
to ask GHC to report timings (on stderr and the eventlog).

This will write the eventlog to ./ghc.eventlog in both cases. You can then
visualize it or look at the totals for each label by using ghc-events-analyze,
threadscope or any other eventlog consumer. Illustrating with
ghc-events-analyze:

  $ ghc-events-analyze --timed --timed-txt --totals \
                       --start &quot;GHC:started:&quot; --stop &quot;GHC:finished:&quot; \
                       ghc.eventlog

This produces ghc.timed.txt (all event timestamps), ghc.timed.svg (visualisation
of the execution through the various labels) and ghc.totals.txt (total time
spent in each label).

-}</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span></pre></body></html>