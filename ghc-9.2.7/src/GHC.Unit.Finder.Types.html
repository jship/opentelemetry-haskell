<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Unit.Finder.Types</span><span>
</span><span id="line-2"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#FinderCache"><span class="hs-identifier">FinderCache</span></a></span><span>
</span><span id="line-3"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#FindResult"><span class="hs-identifier">FindResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFindResult"><span class="hs-identifier">InstalledFindResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">where</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.html"><span class="hs-identifier">GHC.Unit</span></a></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.State.html"><span class="hs-identifier">GHC.Unit.State</span></a></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-comment">-- | The 'FinderCache' maps modules to the result of</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- searching for that module. It records the results of searching for</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- modules along the search path. On @:load@, we flush the entire</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- contents of this cache.</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-keyword">type</span><span> </span><span id="FinderCache"><span class="annot"><a href="GHC.Unit.Finder.Types.html#FinderCache"><span class="hs-identifier hs-var">FinderCache</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#InstalledModuleEnv"><span class="hs-identifier hs-type">InstalledModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFindResult"><span class="hs-identifier hs-type">InstalledFindResult</span></a></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">data</span><span> </span><span id="InstalledFindResult"><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFindResult"><span class="hs-identifier hs-var">InstalledFindResult</span></a></span></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="InstalledFound"><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledFound"><span class="hs-identifier hs-var">InstalledFound</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#InstalledModule"><span class="hs-identifier hs-type">InstalledModule</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InstalledNoPackage"><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledNoPackage"><span class="hs-identifier hs-var">InstalledNoPackage</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InstalledNotFound"><span class="annot"><a href="GHC.Unit.Finder.Types.html#InstalledNotFound"><span class="hs-identifier hs-var">InstalledNotFound</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-comment">-- | The result of searching for an imported module.</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- NB: FindResult manages both user source-import lookups</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- (which can result in 'Module') as well as direct imports</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- for interfaces (which always result in 'InstalledModule').</span><span>
</span><span id="line-29"></span><span class="hs-keyword">data</span><span> </span><span id="FindResult"><span class="annot"><a href="GHC.Unit.Finder.Types.html#FindResult"><span class="hs-identifier hs-var">FindResult</span></a></span></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Found"><span class="annot"><a href="GHC.Unit.Finder.Types.html#Found"><span class="hs-identifier hs-var">Found</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-31"></span><span>        </span><span class="hs-comment">-- ^ The module was found</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoPackage"><span class="annot"><a href="GHC.Unit.Finder.Types.html#NoPackage"><span class="hs-identifier hs-var">NoPackage</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span>
</span><span id="line-33"></span><span>        </span><span class="hs-comment">-- ^ The requested unit was not found</span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FoundMultiple"><span class="annot"><a href="GHC.Unit.Finder.Types.html#FoundMultiple"><span class="hs-identifier hs-var">FoundMultiple</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#ModuleOrigin"><span class="hs-identifier hs-type">ModuleOrigin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-35"></span><span>        </span><span class="hs-comment">-- ^ _Error_: both in multiple packages</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>        </span><span class="hs-comment">-- | Not found</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotFound"><span class="annot"><a href="GHC.Unit.Finder.Types.html#NotFound"><span class="hs-identifier hs-var">NotFound</span></a></span></span><span>
</span><span id="line-39"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="fr_paths"><span class="annot"><span class="annottext">FindResult -&gt; [FilePath]
</span><a href="GHC.Unit.Finder.Types.html#fr_paths"><span class="hs-identifier hs-var hs-var">fr_paths</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- ^ Places where I looked</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_pkg"><span class="annot"><span class="annottext">FindResult -&gt; Maybe Unit
</span><a href="GHC.Unit.Finder.Types.html#fr_pkg"><span class="hs-identifier hs-var hs-var">fr_pkg</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.16.4.0/src/GHC-Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span>       </span><span class="hs-comment">-- ^ Just p =&gt; module is in this unit's</span><span>
</span><span id="line-42"></span><span>                                           </span><span class="hs-comment">--   manifest, but couldn't find the</span><span>
</span><span id="line-43"></span><span>                                           </span><span class="hs-comment">--   .hi file</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_mods_hidden"><span class="annot"><span class="annottext">FindResult -&gt; [Unit]
</span><a href="GHC.Unit.Finder.Types.html#fr_mods_hidden"><span class="hs-identifier hs-var hs-var">fr_mods_hidden</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span class="hs-special">]</span><span>           </span><span class="hs-comment">-- ^ Module is in these units,</span><span>
</span><span id="line-46"></span><span>                                           </span><span class="hs-comment">--   but the *module* is hidden</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_pkgs_hidden"><span class="annot"><span class="annottext">FindResult -&gt; [Unit]
</span><a href="GHC.Unit.Finder.Types.html#fr_pkgs_hidden"><span class="hs-identifier hs-var hs-var">fr_pkgs_hidden</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span class="hs-special">]</span><span>           </span><span class="hs-comment">-- ^ Module is in these units,</span><span>
</span><span id="line-49"></span><span>                                           </span><span class="hs-comment">--   but the *unit* is hidden</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>        </span><span class="hs-comment">-- | Module is in these units, but it is unusable</span><span>
</span><span id="line-52"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_unusables"><span class="annot"><span class="annottext">FindResult -&gt; [(Unit, UnusableUnitReason)]
</span><a href="GHC.Unit.Finder.Types.html#fr_unusables"><span class="hs-identifier hs-var hs-var">fr_unusables</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnusableUnitReason"><span class="hs-identifier hs-type">UnusableUnitReason</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_suggestions"><span class="annot"><span class="annottext">FindResult -&gt; [ModuleSuggestion]
</span><a href="GHC.Unit.Finder.Types.html#fr_suggestions"><span class="hs-identifier hs-var hs-var">fr_suggestions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.State.html#ModuleSuggestion"><span class="hs-identifier hs-type">ModuleSuggestion</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ Possible mis-spelled modules</span><span>
</span><span id="line-55"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span></pre></body></html>