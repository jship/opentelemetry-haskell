<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Types.Demand</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.2.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Types.Demand.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Types.Demand</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Demands</a><ul><li><a href="#g:2">Algebra</a><ul><li><a href="#g:3">Least upper bound</a></li><li><a href="#g:4">Plus</a></li><li><a href="#g:5">Multiply</a></li></ul></li><li><a href="#g:6">Predicates on <code>Card</code>inalities and <code>Demand</code>s</a></li><li><a href="#g:7">Special demands</a><ul><li><a href="#g:8">Demands used in PrimOp signatures</a></li></ul></li><li><a href="#g:9">Other <code>Demand</code> operations</a></li><li><a href="#g:10">Extracting one-shot information</a></li></ul></li><li><a href="#g:11">Demand environments</a></li><li><a href="#g:12">Divergence</a></li><li><a href="#g:13">Demand types</a><ul><li><a href="#g:14">Algebra</a><ul><li><a href="#g:15">PlusDmdArg</a></li></ul></li><li><a href="#g:16">Other operations</a></li></ul></li><li><a href="#g:17">Demand signatures</a><ul><li><a href="#g:18">Handling arity adjustments</a></li></ul></li><li><a href="#g:19">Demand transformers from demand signatures</a></li><li><a href="#g:20">Trim to a type shape</a></li><li><a href="#g:21"><code>seq</code>ing stuff</a></li><li><a href="#g:22">Zapping usage information</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A language to express the evaluation context of an expression as a
 <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code> and track how an expression evaluates free variables and arguments
 in turn as a <code><a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></code>.</p><p>Lays out the abstract domain for <a href="GHC-Core-Opt-DmdAnal.html">GHC.Core.Opt.DmdAnal</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Card">Card</a><ul class="subs"><li>= <a href="#v:C_00">C_00</a></li><li>| <a href="#v:C_01">C_01</a></li><li>| <a href="#v:C_0N">C_0N</a></li><li>| <a href="#v:C_11">C_11</a></li><li>| <a href="#v:C_1N">C_1N</a></li><li>| <a href="#v:C_10">C_10</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Demand">Demand</a> = !<a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="#v::-42-">:*</a> !<a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:SubDemand">SubDemand</a> = <a href="#v:Prod">Prod</a> ![<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>]</li><li class="src short"><a href="#v:mkProd">mkProd</a> :: [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:viewProd">viewProd</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Prelude.html#t:Maybe" title="GHC.Prelude">Maybe</a> [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>]</li><li class="src short"><a href="#v:absDmd">absDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:topDmd">topDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:botDmd">botDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:seqDmd">seqDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:topSubDmd">topSubDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:lubCard">lubCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></li><li class="src short"><a href="#v:lubDmd">lubDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:lubSubDmd">lubSubDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:plusCard">plusCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></li><li class="src short"><a href="#v:plusDmd">plusDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:plusSubDmd">plusSubDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:multCard">multCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></li><li class="src short"><a href="#v:multDmd">multDmd</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:multSubDmd">multSubDmd</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:isAbs">isAbs</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isUsedOnce">isUsedOnce</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isStrict">isStrict</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isAbsDmd">isAbsDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isUsedOnceDmd">isUsedOnceDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isStrUsedDmd">isStrUsedDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isStrictDmd">isStrictDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isTopDmd">isTopDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isSeqDmd">isSeqDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isWeakDmd">isWeakDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:evalDmd">evalDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:lazyApply1Dmd">lazyApply1Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:lazyApply2Dmd">lazyApply2Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:strictOnceApply1Dmd">strictOnceApply1Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:strictManyApply1Dmd">strictManyApply1Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:oneifyCard">oneifyCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></li><li class="src short"><a href="#v:oneifyDmd">oneifyDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:strictifyDmd">strictifyDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:strictifyDictDmd">strictifyDictDmd</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:mkWorkerDemand">mkWorkerDemand</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:peelCallDmd">peelCallDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; (<a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a>, <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a>)</li><li class="src short"><a href="#v:peelManyCalls">peelManyCalls</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></li><li class="src short"><a href="#v:mkCalledOnceDmd">mkCalledOnceDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:mkCalledOnceDmds">mkCalledOnceDmds</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></li><li class="src short"><a href="#v:addCaseBndrDmd">addCaseBndrDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>]</li><li class="src short"><a href="#v:argOneShots">argOneShots</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; [<a href="GHC-Types-Id-Info.html#t:OneShotInfo" title="GHC.Types.Id.Info">OneShotInfo</a>]</li><li class="src short"><a href="#v:argsOneShots">argsOneShots</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; [[<a href="GHC-Types-Id-Info.html#t:OneShotInfo" title="GHC.Types.Id.Info">OneShotInfo</a>]]</li><li class="src short"><a href="#v:saturatedByOneShots">saturatedByOneShots</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DmdEnv">DmdEnv</a> = <a href="GHC-Types-Var-Env.html#t:VarEnv" title="GHC.Types.Var.Env">VarEnv</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:emptyDmdEnv">emptyDmdEnv</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a></li><li class="src short"><a href="#v:keepAliveDmdEnv">keepAliveDmdEnv</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> -&gt; <a href="GHC-Types-Var-Set.html#t:IdSet" title="GHC.Types.Var.Set">IdSet</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a></li><li class="src short"><a href="#v:reuseEnv">reuseEnv</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Divergence">Divergence</a><ul class="subs"><li>= <a href="#v:Diverges">Diverges</a></li><li>| <a href="#v:ExnOrDiv">ExnOrDiv</a></li><li>| <a href="#v:Dunno">Dunno</a></li></ul></li><li class="src short"><a href="#v:topDiv">topDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></li><li class="src short"><a href="#v:botDiv">botDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></li><li class="src short"><a href="#v:exnDiv">exnDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></li><li class="src short"><a href="#v:lubDivergence">lubDivergence</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></li><li class="src short"><a href="#v:isDeadEndDiv">isDeadEndDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DmdType">DmdType</a> = <a href="#v:DmdType">DmdType</a> {<ul class="subs"><li><a href="#v:dt_env">dt_env</a> :: !<a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a></li><li><a href="#v:dt_args">dt_args</a> :: ![<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>]</li><li><a href="#v:dt_div">dt_div</a> :: !<a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></li></ul>}</li><li class="src short"><a href="#v:dmdTypeDepth">dmdTypeDepth</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a></li><li class="src short"><a href="#v:nopDmdType">nopDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:botDmdType">botDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:lubDmdType">lubDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:plusDmdType">plusDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:PlusDmdArg" title="GHC.Types.Demand">PlusDmdArg</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:multDmdType">multDmdType</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:PlusDmdArg">PlusDmdArg</a> = (<a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a>, <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a>)</li><li class="src short"><a href="#v:mkPlusDmdArg">mkPlusDmdArg</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> -&gt; <a href="GHC-Types-Demand.html#t:PlusDmdArg" title="GHC.Types.Demand">PlusDmdArg</a></li><li class="src short"><a href="#v:toPlusDmdArg">toPlusDmdArg</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:PlusDmdArg" title="GHC.Types.Demand">PlusDmdArg</a></li><li class="src short"><a href="#v:peelFV">peelFV</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Var.html#t:Var" title="GHC.Types.Var">Var</a> -&gt; (<a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a>, <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>)</li><li class="src short"><a href="#v:findIdDemand">findIdDemand</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Var.html#t:Var" title="GHC.Types.Var">Var</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:addDemand">addDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:splitDmdTy">splitDmdTy</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; (<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>, <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a>)</li><li class="src short"><a href="#v:deferAfterPreciseException">deferAfterPreciseException</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:keepAliveDmdType">keepAliveDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Var-Set.html#t:VarSet" title="GHC.Types.Var.Set">VarSet</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:StrictSig">StrictSig</a> = <a href="#v:StrictSig">StrictSig</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:mkStrictSigForArity">mkStrictSigForArity</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><a href="#v:mkClosedStrictSig">mkClosedStrictSig</a> :: [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><a href="#v:splitStrictSig">splitStrictSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; ([<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>], <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a>)</li><li class="src short"><a href="#v:strictSigDmdEnv">strictSigDmdEnv</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a></li><li class="src short"><a href="#v:hasDemandEnvSig">hasDemandEnvSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:nopSig">nopSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><a href="#v:botSig">botSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><a href="#v:isTopSig">isTopSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isDeadEndSig">isDeadEndSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:isDeadEndAppSig">isDeadEndAppSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a></li><li class="src short"><a href="#v:prependArgsStrictSig">prependArgsStrictSig</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><a href="#v:etaConvertStrictSig">etaConvertStrictSig</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DmdTransformer">DmdTransformer</a> = <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></li><li class="src short"><a href="#v:dmdTransformSig">dmdTransformSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a></li><li class="src short"><a href="#v:dmdTransformDataConSig">dmdTransformDataConSig</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a></li><li class="src short"><a href="#v:dmdTransformDictSelSig">dmdTransformDictSelSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TypeShape">TypeShape</a><ul class="subs"><li>= <a href="#v:TsFun">TsFun</a> <a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a></li><li>| <a href="#v:TsProd">TsProd</a> [<a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a>]</li><li>| <a href="#v:TsUnk">TsUnk</a></li></ul></li><li class="src short"><a href="#v:trimToType">trimToType</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:seqDemand">seqDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; ()</li><li class="src short"><a href="#v:seqDemandList">seqDemandList</a> :: [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; ()</li><li class="src short"><a href="#v:seqDmdType">seqDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; ()</li><li class="src short"><a href="#v:seqStrictSig">seqStrictSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; ()</li><li class="src short"><a href="#v:zapUsageDemand">zapUsageDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:zapDmdEnvSig">zapDmdEnvSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li><li class="src short"><a href="#v:zapUsedOnceDemand">zapUsedOnceDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></li><li class="src short"><a href="#v:zapUsedOnceSig">zapUsedOnceSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Demands</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Card" class="def">Card</a> <a href="src/GHC.Types.Demand.html#Card" class="link">Source</a> <a href="#t:Card" class="selflink">#</a></p><div class="doc"><p>Describes an interval of <em>evaluation cardinalities</em>.
 See Note [Evaluation cardinalities]</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:C_00" class="def">C_00</a></td><td class="doc"><p>{0}     Absent.</p></td></tr><tr><td class="src"><a id="v:C_01" class="def">C_01</a></td><td class="doc"><p>{0,1}   Used at most once.</p></td></tr><tr><td class="src"><a id="v:C_0N" class="def">C_0N</a></td><td class="doc"><p>{0,1,n} Every possible cardinality; the top element.</p></td></tr><tr><td class="src"><a id="v:C_11" class="def">C_11</a></td><td class="doc"><p>{1}     Strict and used once.</p></td></tr><tr><td class="src"><a id="v:C_1N" class="def">C_1N</a></td><td class="doc"><p>{1,n}   Strict and used (possibly) many times.</p></td></tr><tr><td class="src"><a id="v:C_10" class="def">C_10</a></td><td class="doc"><p>{}      The empty interval; the bottom element of the lattice.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Card">Instances</h4><details id="i:Card" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Card:Binary:1"></span> <a href="GHC-Utils-Binary.html#t:Binary" title="GHC.Utils.Binary">Binary</a> <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></span> <a href="src/GHC.Types.Demand.html#line-1854" class="link">Source</a> <a href="#t:Card" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Card:Binary:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put_">put_</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> () <a href="src/GHC.Utils.Binary.html#put_" class="link">Source</a> <a href="#v:put_" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> (<a href="GHC-Utils-Binary.html#t:Bin" title="GHC.Utils.Binary">Bin</a> <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a>) <a href="src/GHC.Utils.Binary.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="src/GHC.Utils.Binary.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Card:Outputable:2"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></span> <a href="src/GHC.Types.Demand.html#line-1805" class="link">Source</a> <a href="#t:Card" class="selflink">#</a></td><td class="doc"><p>See Note [Demand notation]
 Current syntax was discussed in #19016.</p></td></tr><tr><td colspan="2"><details id="i:id:Card:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Card:Eq:3"></span> <a href="GHC-Prelude.html#t:Eq" title="GHC.Prelude">Eq</a> <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></span> <a href="src/GHC.Types.Demand.html#line-144" class="link">Source</a> <a href="#t:Card" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Card:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Demand" class="def">Demand</a> <a href="src/GHC.Types.Demand.html#Demand" class="link">Source</a> <a href="#t:Demand" class="selflink">#</a></p><div class="doc"><p>A demand describes a <em>scaled evaluation context</em>, e.g. how many times
 and how deep the denoted thing is evaluated.</p><p>The &quot;how many&quot; component is represented by a <code><a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></code>inality.
 The &quot;how deep&quot; component is represented by a <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code>.
 Examples (using Note [Demand notation]):</p><ul><li><code><a href="GHC-Prelude.html#v:seq" title="GHC.Prelude">seq</a></code> puts demand <code>1A</code> on its first argument: It evaluates the argument
     strictly (<code>1</code>), but not any deeper (<code>A</code>).</li><li><code><a href="GHC-Prelude.html#v:fst" title="GHC.Prelude">fst</a></code> puts demand <code>1P(1L,A)</code> on its argument: It evaluates the argument
     pair strictly and the first component strictly, but no nested info
     beyond that (<code>L</code>). Its second argument is not used at all.</li><li><code><a href="GHC-Prelude.html#v:-36-" title="GHC.Prelude">$</a></code> puts demand <code>1C1(L)</code> on its first argument: It calls (<code>C</code>) the
     argument function with one argument, exactly once (<code>1</code>). No info
     on how the result of that call is evaluated (<code>L</code>).</li><li><code><a href="GHC-Prelude.html#v:maybe" title="GHC.Prelude">maybe</a></code> puts demand <code>MCM(L)</code> on its second argument: It evaluates
     the argument function at most once ((M)aybe) and calls it once when
     it is evaluated.</li><li><code>fst p + fst p</code> puts demand <code>SP(SL,A)</code> on <code>p</code>: It's <code>1P(1L,A)</code>
     multiplied by two, so we get <code>S</code> (used at least once, possibly multiple
     times).</li></ul><p>This data type is quite similar to <code><code>Scaled</code> <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code></code>, but it's scaled
 by <code><a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></code>, which is an <em>interval</em> on <code>Multiplicity</code>, the upper bound of
 which could be used to infer uniqueness types.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src">!<a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a id="v::-42-" class="def">:*</a> !<a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Demand">Instances</h4><details id="i:Demand" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Demand:Binary:1"></span> <a href="GHC-Utils-Binary.html#t:Binary" title="GHC.Utils.Binary">Binary</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></span> <a href="src/GHC.Types.Demand.html#line-1872" class="link">Source</a> <a href="#t:Demand" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Demand:Binary:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put_">put_</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> () <a href="src/GHC.Utils.Binary.html#put_" class="link">Source</a> <a href="#v:put_" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> (<a href="GHC-Utils-Binary.html#t:Bin" title="GHC.Utils.Binary">Bin</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>) <a href="src/GHC.Utils.Binary.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Utils.Binary.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Demand:Outputable:2"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></span> <a href="src/GHC.Types.Demand.html#line-1814" class="link">Source</a> <a href="#t:Demand" class="selflink">#</a></td><td class="doc"><p>See Note [Demand notation]</p></td></tr><tr><td colspan="2"><details id="i:id:Demand:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Demand:Eq:3"></span> <a href="GHC-Prelude.html#t:Eq" title="GHC.Prelude">Eq</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></span> <a href="src/GHC.Types.Demand.html#line-269" class="link">Source</a> <a href="#t:Demand" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Demand:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SubDemand" class="def">SubDemand</a> <a href="src/GHC.Types.Demand.html#SubDemand" class="link">Source</a> <a href="#t:SubDemand" class="selflink">#</a></p><div class="doc"><p>A sub-demand describes an <em>evaluation context</em>, e.g. how deep the
 denoted thing is evaluated. See <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code> for examples.</p><p>The nested <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code> <code>d</code> of a <code>Call</code> <code>Cn(d)</code> is <em>relative</em> to a single such call.
 E.g. The expression <code>f 1 2 + f 3 4</code> puts call demand <code>SCS(C1(L))</code> on <code>f</code>:
 <code>f</code> is called exactly twice (<code>S</code>), each time exactly once (<code>1</code>) with an
 additional argument.</p><p>The nested <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code>s <code>dn</code> of a <code><a href="GHC-Types-Demand.html#v:Prod" title="GHC.Types.Demand">Prod</a></code> <code>P(d1,d2,...)</code> apply <em>absolutely</em>:
 If <code>dn</code> is a used once demand (cf. <code><a href="GHC-Types-Demand.html#v:isUsedOnce" title="GHC.Types.Demand">isUsedOnce</a></code>), then that means that
 the denoted sub-expression is used once in the entire evaluation context
 described by the surrounding <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code>. E.g., <code>LP(ML)</code> means that the
 field of the denoted expression is used at most once, although the
 entire expression might be used many times.</p><p>See Note [Call demands are relative]
 and Note [Demand notation].</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Prod" class="def">Prod</a> ![<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>]</td><td class="doc"><p><code>Prod ds</code> describes the evaluation context of a case scrutinisation
 on an expression of product type, where the product components are
 evaluated according to <code>ds</code>.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:SubDemand">Instances</h4><details id="i:SubDemand" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SubDemand:Binary:1"></span> <a href="GHC-Utils-Binary.html#t:Binary" title="GHC.Utils.Binary">Binary</a> <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></span> <a href="src/GHC.Types.Demand.html#line-1876" class="link">Source</a> <a href="#t:SubDemand" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SubDemand:Binary:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put_">put_</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> () <a href="src/GHC.Utils.Binary.html#put_" class="link">Source</a> <a href="#v:put_" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> (<a href="GHC-Utils-Binary.html#t:Bin" title="GHC.Utils.Binary">Bin</a> <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a>) <a href="src/GHC.Utils.Binary.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Utils.Binary.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SubDemand:Outputable:2"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></span> <a href="src/GHC.Types.Demand.html#line-1821" class="link">Source</a> <a href="#t:SubDemand" class="selflink">#</a></td><td class="doc"><p>See Note [Demand notation]</p></td></tr><tr><td colspan="2"><details id="i:id:SubDemand:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SubDemand:Eq:3"></span> <a href="GHC-Prelude.html#t:Eq" title="GHC.Prelude">Eq</a> <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></span> <a href="src/GHC.Types.Demand.html#line-313" class="link">Source</a> <a href="#t:SubDemand" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SubDemand:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkProd" class="def">mkProd</a> :: [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#mkProd" class="link">Source</a> <a href="#v:mkProd" class="selflink">#</a></p><div class="doc"><p>A smart constructor for <code><a href="GHC-Types-Demand.html#v:Prod" title="GHC.Types.Demand">Prod</a></code>, applying rewrite rules along the semantic
 equality <code>Prod [polyDmd n, ...] === polyDmd n</code>, simplifying to <code>Poly</code>
 <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code>s when possible. Note that this degrades boxity information! E.g. a
 polymorphic demand will never unbox.</p></div></div><div class="top"><p class="src"><a id="v:viewProd" class="def">viewProd</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Prelude.html#t:Maybe" title="GHC.Prelude">Maybe</a> [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] <a href="src/GHC.Types.Demand.html#viewProd" class="link">Source</a> <a href="#v:viewProd" class="selflink">#</a></p><div class="doc"><p><code>viewProd n sd</code> interprets <code>sd</code> as a <code><a href="GHC-Types-Demand.html#v:Prod" title="GHC.Types.Demand">Prod</a></code> of arity <code>n</code>, expanding <code>Poly</code>
 demands as necessary.</p></div></div><a href="#g:2" id="g:2"><h2>Algebra</h2></a><div class="top"><p class="src"><a id="v:absDmd" class="def">absDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#absDmd" class="link">Source</a> <a href="#v:absDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:topDmd" class="def">topDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#topDmd" class="link">Source</a> <a href="#v:topDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:botDmd" class="def">botDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#botDmd" class="link">Source</a> <a href="#v:botDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:seqDmd" class="def">seqDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#seqDmd" class="link">Source</a> <a href="#v:seqDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:topSubDmd" class="def">topSubDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#topSubDmd" class="link">Source</a> <a href="#v:topSubDmd" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h3>Least upper bound</h3></a><div class="top"><p class="src"><a id="v:lubCard" class="def">lubCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="src/GHC.Types.Demand.html#lubCard" class="link">Source</a> <a href="#v:lubCard" class="selflink">#</a></p><div class="doc"><p>Denotes <code>&#8746;</code> on <code><a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:lubDmd" class="def">lubDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#lubDmd" class="link">Source</a> <a href="#v:lubDmd" class="selflink">#</a></p><div class="doc"><p>Denotes <code>&#8746;</code> on <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:lubSubDmd" class="def">lubSubDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#lubSubDmd" class="link">Source</a> <a href="#v:lubSubDmd" class="selflink">#</a></p><div class="doc"><p>Denotes <code>&#8746;</code> on <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code>.</p></div></div><a href="#g:4" id="g:4"><h3>Plus</h3></a><div class="top"><p class="src"><a id="v:plusCard" class="def">plusCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="src/GHC.Types.Demand.html#plusCard" class="link">Source</a> <a href="#v:plusCard" class="selflink">#</a></p><div class="doc"><p>Denotes <code><a href="GHC-Prelude.html#v:-43-" title="GHC.Prelude">+</a></code> on <code><a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:plusDmd" class="def">plusDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#plusDmd" class="link">Source</a> <a href="#v:plusDmd" class="selflink">#</a></p><div class="doc"><p>Denotes <code><a href="GHC-Prelude.html#v:-43-" title="GHC.Prelude">+</a></code> on <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:plusSubDmd" class="def">plusSubDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#plusSubDmd" class="link">Source</a> <a href="#v:plusSubDmd" class="selflink">#</a></p><div class="doc"><p>Denotes <code><a href="GHC-Prelude.html#v:-43-" title="GHC.Prelude">+</a></code> on <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code>.</p></div></div><a href="#g:5" id="g:5"><h3>Multiply</h3></a><div class="top"><p class="src"><a id="v:multCard" class="def">multCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="src/GHC.Types.Demand.html#multCard" class="link">Source</a> <a href="#v:multCard" class="selflink">#</a></p><div class="doc"><p>Denotes <code><a href="GHC-Prelude.html#v:-42-" title="GHC.Prelude">*</a></code> on <code><a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:multDmd" class="def">multDmd</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#multDmd" class="link">Source</a> <a href="#v:multDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:multSubDmd" class="def">multSubDmd</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#multSubDmd" class="link">Source</a> <a href="#v:multSubDmd" class="selflink">#</a></p></div><a href="#g:6" id="g:6"><h2>Predicates on <code>Card</code>inalities and <code>Demand</code>s</h2></a><div class="top"><p class="src"><a id="v:isAbs" class="def">isAbs</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isAbs" class="link">Source</a> <a href="#v:isAbs" class="selflink">#</a></p><div class="doc"><p>True <a href="=">=</a> upper bound is 0.</p></div></div><div class="top"><p class="src"><a id="v:isUsedOnce" class="def">isUsedOnce</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isUsedOnce" class="link">Source</a> <a href="#v:isUsedOnce" class="selflink">#</a></p><div class="doc"><p>True <a href="=">=</a> upper bound is 1.</p></div></div><div class="top"><p class="src"><a id="v:isStrict" class="def">isStrict</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isStrict" class="link">Source</a> <a href="#v:isStrict" class="selflink">#</a></p><div class="doc"><p>True <a href="=">=</a> lower bound is 1.</p></div></div><div class="top"><p class="src"><a id="v:isAbsDmd" class="def">isAbsDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isAbsDmd" class="link">Source</a> <a href="#v:isAbsDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isUsedOnceDmd" class="def">isUsedOnceDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isUsedOnceDmd" class="link">Source</a> <a href="#v:isUsedOnceDmd" class="selflink">#</a></p><div class="doc"><p>Is the value used at most once?</p></div></div><div class="top"><p class="src"><a id="v:isStrUsedDmd" class="def">isStrUsedDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isStrUsedDmd" class="link">Source</a> <a href="#v:isStrUsedDmd" class="selflink">#</a></p><div class="doc"><p>Not absent and used strictly. See Note [Strict demands]</p></div></div><div class="top"><p class="src"><a id="v:isStrictDmd" class="def">isStrictDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isStrictDmd" class="link">Source</a> <a href="#v:isStrictDmd" class="selflink">#</a></p><div class="doc"><p>Contrast with isStrictUsedDmd. See Note [Strict demands]</p></div></div><div class="top"><p class="src"><a id="v:isTopDmd" class="def">isTopDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isTopDmd" class="link">Source</a> <a href="#v:isTopDmd" class="selflink">#</a></p><div class="doc"><p>Used to suppress pretty-printing of an uninformative demand</p></div></div><div class="top"><p class="src"><a id="v:isSeqDmd" class="def">isSeqDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isSeqDmd" class="link">Source</a> <a href="#v:isSeqDmd" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isWeakDmd" class="def">isWeakDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isWeakDmd" class="link">Source</a> <a href="#v:isWeakDmd" class="selflink">#</a></p><div class="doc"><p>We try to avoid tracking weak free variable demands in strictness
 signatures for analysis performance reasons.
 See Note [Lazy and unleashable free variables] in <a href="GHC-Core-Opt-DmdAnal.html">GHC.Core.Opt.DmdAnal</a>.</p></div></div><a href="#g:7" id="g:7"><h2>Special demands</h2></a><div class="top"><p class="src"><a id="v:evalDmd" class="def">evalDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#evalDmd" class="link">Source</a> <a href="#v:evalDmd" class="selflink">#</a></p></div><a href="#g:8" id="g:8"><h3>Demands used in PrimOp signatures</h3></a><div class="top"><p class="src"><a id="v:lazyApply1Dmd" class="def">lazyApply1Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#lazyApply1Dmd" class="link">Source</a> <a href="#v:lazyApply1Dmd" class="selflink">#</a></p><div class="doc"><p>First argument of catch#: <code>MCM(L)</code>.
 Evaluates its arg lazily, but then applies it exactly once to one argument.</p></div></div><div class="top"><p class="src"><a id="v:lazyApply2Dmd" class="def">lazyApply2Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#lazyApply2Dmd" class="link">Source</a> <a href="#v:lazyApply2Dmd" class="selflink">#</a></p><div class="doc"><p>Second argument of catch#: <code>MCM(C1(L))</code>.
 Calls its arg lazily, but then applies it exactly once to an additional argument.</p></div></div><div class="top"><p class="src"><a id="v:strictOnceApply1Dmd" class="def">strictOnceApply1Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#strictOnceApply1Dmd" class="link">Source</a> <a href="#v:strictOnceApply1Dmd" class="selflink">#</a></p><div class="doc"><p>First argument of 'GHC.Exts.maskAsyncExceptions#': <code>1C1(L)</code>.
 Called exactly once.</p></div></div><div class="top"><p class="src"><a id="v:strictManyApply1Dmd" class="def">strictManyApply1Dmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#strictManyApply1Dmd" class="link">Source</a> <a href="#v:strictManyApply1Dmd" class="selflink">#</a></p><div class="doc"><p>First argument of 'GHC.Exts.atomically#': <code>SCS(L)</code>.
 Called at least once, possibly many times.</p></div></div><a href="#g:9" id="g:9"><h2>Other <code>Demand</code> operations</h2></a><div class="top"><p class="src"><a id="v:oneifyCard" class="def">oneifyCard</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="src/GHC.Types.Demand.html#oneifyCard" class="link">Source</a> <a href="#v:oneifyCard" class="selflink">#</a></p><div class="doc"><p>Intersect with [0,1].</p></div></div><div class="top"><p class="src"><a id="v:oneifyDmd" class="def">oneifyDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#oneifyDmd" class="link">Source</a> <a href="#v:oneifyDmd" class="selflink">#</a></p><div class="doc"><p>Make a <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code> evaluated at-most-once.</p></div></div><div class="top"><p class="src"><a id="v:strictifyDmd" class="def">strictifyDmd</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#strictifyDmd" class="link">Source</a> <a href="#v:strictifyDmd" class="selflink">#</a></p><div class="doc"><p>Make a <code><a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></code> evaluated at-least-once (e.g. strict).</p></div></div><div class="top"><p class="src"><a id="v:strictifyDictDmd" class="def">strictifyDictDmd</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#strictifyDictDmd" class="link">Source</a> <a href="#v:strictifyDictDmd" class="selflink">#</a></p><div class="doc"><p>If the argument is a used non-newtype dictionary, give it strict demand.
 Also split the product type &amp; demand and recur in order to similarly
 strictify the argument's contained used non-newtype superclass dictionaries.
 We use the demand as our recursive measure to guarantee termination.</p></div></div><div class="top"><p class="src"><a id="v:mkWorkerDemand" class="def">mkWorkerDemand</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#mkWorkerDemand" class="link">Source</a> <a href="#v:mkWorkerDemand" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:peelCallDmd" class="def">peelCallDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; (<a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a>, <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a>) <a href="src/GHC.Types.Demand.html#peelCallDmd" class="link">Source</a> <a href="#v:peelCallDmd" class="selflink">#</a></p><div class="doc"><p>Peels one call level from the sub-demand, and also returns how many
 times we entered the lambda body.</p></div></div><div class="top"><p class="src"><a id="v:peelManyCalls" class="def">peelManyCalls</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> <a href="src/GHC.Types.Demand.html#peelManyCalls" class="link">Source</a> <a href="#v:peelManyCalls" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkCalledOnceDmd" class="def">mkCalledOnceDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#mkCalledOnceDmd" class="link">Source</a> <a href="#v:mkCalledOnceDmd" class="selflink">#</a></p><div class="doc"><p>Wraps the <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code> with a one-shot call demand: <code>d</code> -&gt; <code>C1(d)</code>.</p></div></div><div class="top"><p class="src"><a id="v:mkCalledOnceDmds" class="def">mkCalledOnceDmds</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> <a href="src/GHC.Types.Demand.html#mkCalledOnceDmds" class="link">Source</a> <a href="#v:mkCalledOnceDmds" class="selflink">#</a></p><div class="doc"><p><code>mkCalledOnceDmds n d</code> returns <code>C1(C1...(C1 d))</code> where there are <code>n</code> <code>C1</code>'s.</p></div></div><div class="top"><p class="src"><a id="v:addCaseBndrDmd" class="def">addCaseBndrDmd</a> :: <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] <a href="src/GHC.Types.Demand.html#addCaseBndrDmd" class="link">Source</a> <a href="#v:addCaseBndrDmd" class="selflink">#</a></p></div><a href="#g:10" id="g:10"><h2>Extracting one-shot information</h2></a><div class="top"><p class="src"><a id="v:argOneShots" class="def">argOneShots</a> <a href="src/GHC.Types.Demand.html#argOneShots" class="link">Source</a> <a href="#v:argOneShots" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a></td><td class="doc"><p>depending on saturation</p></td></tr><tr><td class="src">-&gt; [<a href="GHC-Types-Id-Info.html#t:OneShotInfo" title="GHC.Types.Id.Info">OneShotInfo</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>See Note [Computing one-shot info]</p></div></div><div class="top"><p class="src"><a id="v:argsOneShots" class="def">argsOneShots</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; [[<a href="GHC-Types-Id-Info.html#t:OneShotInfo" title="GHC.Types.Id.Info">OneShotInfo</a>]] <a href="src/GHC.Types.Demand.html#argsOneShots" class="link">Source</a> <a href="#v:argsOneShots" class="selflink">#</a></p><div class="doc"><p>See Note [Computing one-shot info]</p></div></div><div class="top"><p class="src"><a id="v:saturatedByOneShots" class="def">saturatedByOneShots</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#saturatedByOneShots" class="link">Source</a> <a href="#v:saturatedByOneShots" class="selflink">#</a></p><div class="doc"><p><code>saturatedByOneShots n CM(CM(...)) = True</code>
   <a href="=">=</a>
 There are at least n nested CM(..) calls.
 See Note [Demand on the worker] in GHC.Core.Opt.WorkWrap</p></div></div><a href="#g:11" id="g:11"><h1>Demand environments</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DmdEnv" class="def">DmdEnv</a> = <a href="GHC-Types-Var-Env.html#t:VarEnv" title="GHC.Types.Var.Env">VarEnv</a> <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#DmdEnv" class="link">Source</a> <a href="#t:DmdEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emptyDmdEnv" class="def">emptyDmdEnv</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> <a href="src/GHC.Types.Demand.html#emptyDmdEnv" class="link">Source</a> <a href="#v:emptyDmdEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:keepAliveDmdEnv" class="def">keepAliveDmdEnv</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> -&gt; <a href="GHC-Types-Var-Set.html#t:IdSet" title="GHC.Types.Var.Set">IdSet</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> <a href="src/GHC.Types.Demand.html#keepAliveDmdEnv" class="link">Source</a> <a href="#v:keepAliveDmdEnv" class="selflink">#</a></p><div class="doc"><p><code>keepAliveDmdType dt vs</code> makes sure that the Ids in <code>vs</code> have
 <em>some</em> usage in the returned demand types -- they are not Absent.
 See Note [Absence analysis for stable unfoldings and RULES]
     in <a href="GHC-Core-Opt-DmdAnal.html">GHC.Core.Opt.DmdAnal</a>.</p></div></div><div class="top"><p class="src"><a id="v:reuseEnv" class="def">reuseEnv</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> <a href="src/GHC.Types.Demand.html#reuseEnv" class="link">Source</a> <a href="#v:reuseEnv" class="selflink">#</a></p></div><a href="#g:12" id="g:12"><h1>Divergence</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Divergence" class="def">Divergence</a> <a href="src/GHC.Types.Demand.html#Divergence" class="link">Source</a> <a href="#t:Divergence" class="selflink">#</a></p><div class="doc"><p><code><a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></code> characterises whether something surely diverges.
 Models a subset lattice of the following exhaustive set of divergence
 results:</p><dl><dt>n</dt><dd>nontermination (e.g. loops)</dd><dt>i</dt><dd>throws imprecise exception</dd><dt>p</dt><dd>throws precise exceTtion</dd><dt>c</dt><dd>converges (reduces to WHNF).</dd></dl><p>The different lattice elements correspond to different subsets, indicated by
 juxtaposition of indicators (e.g. <strong>nc</strong> definitely doesn't throw an
 exception, and may or may not reduce to WHNF).</p><pre>            Dunno (nipc)
                 |
           ExnOrDiv (nip)
                 |
           Diverges (ni)
</pre><p>As you can see, we don't distinguish <strong>n</strong> and <strong>i</strong>.
 See Note [Precise exceptions and strictness analysis] for why <strong>p</strong> is so
 special compared to <strong>i</strong>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Diverges" class="def">Diverges</a></td><td class="doc"><p>Definitely throws an imprecise exception or diverges.</p></td></tr><tr><td class="src"><a id="v:ExnOrDiv" class="def">ExnOrDiv</a></td><td class="doc"><p>Definitely throws a *precise* exception, an imprecise
   exception or diverges. Never converges, hence <code><a href="GHC-Types-Demand.html#v:isDeadEndDiv" title="GHC.Types.Demand">isDeadEndDiv</a></code>!
   See scenario 1 in Note [Precise exceptions and strictness analysis].</p></td></tr><tr><td class="src"><a id="v:Dunno" class="def">Dunno</a></td><td class="doc"><p>Might diverge, throw any kind of exception or converge.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Divergence">Instances</h4><details id="i:Divergence" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Divergence:Binary:1"></span> <a href="GHC-Utils-Binary.html#t:Binary" title="GHC.Utils.Binary">Binary</a> <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></span> <a href="src/GHC.Types.Demand.html#line-1897" class="link">Source</a> <a href="#t:Divergence" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Divergence:Binary:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put_">put_</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> () <a href="src/GHC.Utils.Binary.html#put_" class="link">Source</a> <a href="#v:put_" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> (<a href="GHC-Utils-Binary.html#t:Bin" title="GHC.Utils.Binary">Bin</a> <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a>) <a href="src/GHC.Utils.Binary.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> <a href="src/GHC.Utils.Binary.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Divergence:Outputable:2"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></span> <a href="src/GHC.Types.Demand.html#line-1830" class="link">Source</a> <a href="#t:Divergence" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Divergence:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Divergence:Eq:3"></span> <a href="GHC-Prelude.html#t:Eq" title="GHC.Prelude">Eq</a> <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></span> <a href="src/GHC.Types.Demand.html#line-803" class="link">Source</a> <a href="#t:Divergence" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Divergence:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:topDiv" class="def">topDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> <a href="src/GHC.Types.Demand.html#topDiv" class="link">Source</a> <a href="#v:topDiv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:botDiv" class="def">botDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> <a href="src/GHC.Types.Demand.html#botDiv" class="link">Source</a> <a href="#v:botDiv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:exnDiv" class="def">exnDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> <a href="src/GHC.Types.Demand.html#exnDiv" class="link">Source</a> <a href="#v:exnDiv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lubDivergence" class="def">lubDivergence</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> <a href="src/GHC.Types.Demand.html#lubDivergence" class="link">Source</a> <a href="#v:lubDivergence" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDeadEndDiv" class="def">isDeadEndDiv</a> :: <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isDeadEndDiv" class="link">Source</a> <a href="#v:isDeadEndDiv" class="selflink">#</a></p><div class="doc"><p>True if the <code><a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></code> indicates that evaluation will not return.
 See Note [Dead ends].</p></div></div><a href="#g:13" id="g:13"><h1>Demand types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DmdType" class="def">DmdType</a> <a href="src/GHC.Types.Demand.html#DmdType" class="link">Source</a> <a href="#t:DmdType" class="selflink">#</a></p><div class="doc"><p>Characterises how an expression
    * Evaluates its free variables (<code><a href="GHC-Types-Demand.html#v:dt_env" title="GHC.Types.Demand">dt_env</a></code>)
    * Evaluates its arguments (<code><a href="GHC-Types-Demand.html#v:dt_args" title="GHC.Types.Demand">dt_args</a></code>)
    * Diverges on every code path or not (<code><a href="GHC-Types-Demand.html#v:dt_div" title="GHC.Types.Demand">dt_div</a></code>)</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DmdType" class="def">DmdType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dt_env" class="def">dt_env</a> :: !<a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a></dfn><div class="doc"><p>Demand on explicitly-mentioned free variables</p></div></li><li><dfn class="src"><a id="v:dt_args" class="def">dt_args</a> :: ![<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>]</dfn><div class="doc"><p>Demand on arguments</p></div></li><li><dfn class="src"><a id="v:dt_div" class="def">dt_div</a> :: !<a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></dfn><div class="doc"><p>Whether evaluation diverges.
 See Note [Demand type Divergence]</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DmdType">Instances</h4><details id="i:DmdType" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DmdType:Binary:1"></span> <a href="GHC-Utils-Binary.html#t:Binary" title="GHC.Utils.Binary">Binary</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></span> <a href="src/GHC.Types.Demand.html#line-1892" class="link">Source</a> <a href="#t:DmdType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DmdType:Binary:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put_">put_</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> () <a href="src/GHC.Utils.Binary.html#put_" class="link">Source</a> <a href="#v:put_" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> (<a href="GHC-Utils-Binary.html#t:Bin" title="GHC.Utils.Binary">Bin</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a>) <a href="src/GHC.Utils.Binary.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Utils.Binary.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DmdType:Outputable:2"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></span> <a href="src/GHC.Types.Demand.html#line-1835" class="link">Source</a> <a href="#t:DmdType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DmdType:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DmdType:Eq:3"></span> <a href="GHC-Prelude.html#t:Eq" title="GHC.Prelude">Eq</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></span> <a href="src/GHC.Types.Demand.html#line-1127" class="link">Source</a> <a href="#t:DmdType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DmdType:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:dmdTypeDepth" class="def">dmdTypeDepth</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> <a href="src/GHC.Types.Demand.html#dmdTypeDepth" class="link">Source</a> <a href="#v:dmdTypeDepth" class="selflink">#</a></p></div><a href="#g:14" id="g:14"><h2>Algebra</h2></a><div class="top"><p class="src"><a id="v:nopDmdType" class="def">nopDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#nopDmdType" class="link">Source</a> <a href="#v:nopDmdType" class="selflink">#</a></p><div class="doc"><p>The demand type of doing nothing (lazy, absent, no Divergence
 information). Note that it is '<code>not'</code> the top of the lattice (which would be
 &quot;may use everything&quot;), so it is (no longer) called topDmdType.</p></div></div><div class="top"><p class="src"><a id="v:botDmdType" class="def">botDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#botDmdType" class="link">Source</a> <a href="#v:botDmdType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lubDmdType" class="def">lubDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#lubDmdType" class="link">Source</a> <a href="#v:lubDmdType" class="selflink">#</a></p><div class="doc"><p>Compute the least upper bound of two <code><a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></code>s elicited /by the same
 incoming demand/!</p></div></div><div class="top"><p class="src"><a id="v:plusDmdType" class="def">plusDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:PlusDmdArg" title="GHC.Types.Demand">PlusDmdArg</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#plusDmdType" class="link">Source</a> <a href="#v:plusDmdType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:multDmdType" class="def">multDmdType</a> :: <a href="GHC-Types-Demand.html#t:Card" title="GHC.Types.Demand">Card</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#multDmdType" class="link">Source</a> <a href="#v:multDmdType" class="selflink">#</a></p></div><a href="#g:15" id="g:15"><h3>PlusDmdArg</h3></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PlusDmdArg" class="def">PlusDmdArg</a> = (<a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a>, <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a>) <a href="src/GHC.Types.Demand.html#PlusDmdArg" class="link">Source</a> <a href="#t:PlusDmdArg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkPlusDmdArg" class="def">mkPlusDmdArg</a> :: <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> -&gt; <a href="GHC-Types-Demand.html#t:PlusDmdArg" title="GHC.Types.Demand">PlusDmdArg</a> <a href="src/GHC.Types.Demand.html#mkPlusDmdArg" class="link">Source</a> <a href="#v:mkPlusDmdArg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:toPlusDmdArg" class="def">toPlusDmdArg</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:PlusDmdArg" title="GHC.Types.Demand">PlusDmdArg</a> <a href="src/GHC.Types.Demand.html#toPlusDmdArg" class="link">Source</a> <a href="#v:toPlusDmdArg" class="selflink">#</a></p></div><a href="#g:16" id="g:16"><h2>Other operations</h2></a><div class="top"><p class="src"><a id="v:peelFV" class="def">peelFV</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Var.html#t:Var" title="GHC.Types.Var">Var</a> -&gt; (<a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a>, <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>) <a href="src/GHC.Types.Demand.html#peelFV" class="link">Source</a> <a href="#v:peelFV" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findIdDemand" class="def">findIdDemand</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Var.html#t:Var" title="GHC.Types.Var">Var</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#findIdDemand" class="link">Source</a> <a href="#v:findIdDemand" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addDemand" class="def">addDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#addDemand" class="link">Source</a> <a href="#v:addDemand" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:splitDmdTy" class="def">splitDmdTy</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; (<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>, <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a>) <a href="src/GHC.Types.Demand.html#splitDmdTy" class="link">Source</a> <a href="#v:splitDmdTy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:deferAfterPreciseException" class="def">deferAfterPreciseException</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#deferAfterPreciseException" class="link">Source</a> <a href="#v:deferAfterPreciseException" class="selflink">#</a></p><div class="doc"><p>When e is evaluated after executing an IO action that may throw a precise
 exception, we act as if there is an additional control flow path that is
 taken if e throws a precise exception. The demand type of this control flow
 path
   * is lazy and absent (<code><a href="GHC-Types-Demand.html#v:topDmd" title="GHC.Types.Demand">topDmd</a></code>) in all free variables and arguments
   * has <code><a href="GHC-Types-Demand.html#v:exnDiv" title="GHC.Types.Demand">exnDiv</a></code> <code><a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a></code> result
 So we can simply take a variant of <code><a href="GHC-Types-Demand.html#v:nopDmdType" title="GHC.Types.Demand">nopDmdType</a></code>, <code>exnDmdType</code>.
 Why not <code><a href="GHC-Types-Demand.html#v:nopDmdType" title="GHC.Types.Demand">nopDmdType</a></code>? Because then the result of <code>e</code> can never be <code><a href="GHC-Types-Demand.html#v:exnDiv" title="GHC.Types.Demand">exnDiv</a></code>!
 That means failure to drop dead-ends, see #18086.
 See Note [Precise exceptions and strictness analysis]</p></div></div><div class="top"><p class="src"><a id="v:keepAliveDmdType" class="def">keepAliveDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Var-Set.html#t:VarSet" title="GHC.Types.Var.Set">VarSet</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#keepAliveDmdType" class="link">Source</a> <a href="#v:keepAliveDmdType" class="selflink">#</a></p><div class="doc"><p>See <code><a href="GHC-Types-Demand.html#v:keepAliveDmdEnv" title="GHC.Types.Demand">keepAliveDmdEnv</a></code>.</p></div></div><a href="#g:17" id="g:17"><h1>Demand signatures</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:StrictSig" class="def">StrictSig</a> <a href="src/GHC.Types.Demand.html#StrictSig" class="link">Source</a> <a href="#t:StrictSig" class="selflink">#</a></p><div class="doc"><p>The depth of the wrapped <code><a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></code> encodes the arity at which it is safe
 to unleash. Better construct this through <code><a href="GHC-Types-Demand.html#v:mkStrictSigForArity" title="GHC.Types.Demand">mkStrictSigForArity</a></code>.
 See Note [Understanding DmdType and StrictSig]</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:StrictSig" class="def">StrictSig</a> <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:StrictSig">Instances</h4><details id="i:StrictSig" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StrictSig:Binary:1"></span> <a href="GHC-Utils-Binary.html#t:Binary" title="GHC.Utils.Binary">Binary</a> <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></span> <a href="src/GHC.Types.Demand.html#line-1888" class="link">Source</a> <a href="#t:StrictSig" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StrictSig:Binary:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put_">put_</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> () <a href="src/GHC.Utils.Binary.html#put_" class="link">Source</a> <a href="#v:put_" class="selflink">#</a></p><p class="src"><a href="#v:put">put</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> (<a href="GHC-Utils-Binary.html#t:Bin" title="GHC.Utils.Binary">Bin</a> <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a>) <a href="src/GHC.Utils.Binary.html#put" class="link">Source</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="GHC-Utils-Binary.html#t:BinHandle" title="GHC.Utils.Binary">BinHandle</a> -&gt; <a href="GHC-Prelude.html#t:IO" title="GHC.Prelude">IO</a> <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Utils.Binary.html#get" class="link">Source</a> <a href="#v:get" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StrictSig:Outputable:2"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></span> <a href="src/GHC.Types.Demand.html#line-1846" class="link">Source</a> <a href="#t:StrictSig" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StrictSig:Outputable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StrictSig:Eq:3"></span> <a href="GHC-Prelude.html#t:Eq" title="GHC.Prelude">Eq</a> <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></span> <a href="src/GHC.Types.Demand.html#line-1436" class="link">Source</a> <a href="#t:StrictSig" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StrictSig:Eq:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkStrictSigForArity" class="def">mkStrictSigForArity</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#mkStrictSigForArity" class="link">Source</a> <a href="#v:mkStrictSigForArity" class="selflink">#</a></p><div class="doc"><p>Turns a <code><a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></code> computed for the particular <code><a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a></code> into a <code><a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></code>
 unleashable at that arity. See Note [Understanding DmdType and StrictSig]</p></div></div><div class="top"><p class="src"><a id="v:mkClosedStrictSig" class="def">mkClosedStrictSig</a> :: [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#mkClosedStrictSig" class="link">Source</a> <a href="#v:mkClosedStrictSig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:splitStrictSig" class="def">splitStrictSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; ([<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>], <a href="GHC-Types-Demand.html#t:Divergence" title="GHC.Types.Demand">Divergence</a>) <a href="src/GHC.Types.Demand.html#splitStrictSig" class="link">Source</a> <a href="#v:splitStrictSig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:strictSigDmdEnv" class="def">strictSigDmdEnv</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdEnv" title="GHC.Types.Demand">DmdEnv</a> <a href="src/GHC.Types.Demand.html#strictSigDmdEnv" class="link">Source</a> <a href="#v:strictSigDmdEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hasDemandEnvSig" class="def">hasDemandEnvSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#hasDemandEnvSig" class="link">Source</a> <a href="#v:hasDemandEnvSig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:nopSig" class="def">nopSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#nopSig" class="link">Source</a> <a href="#v:nopSig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:botSig" class="def">botSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#botSig" class="link">Source</a> <a href="#v:botSig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isTopSig" class="def">isTopSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isTopSig" class="link">Source</a> <a href="#v:isTopSig" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDeadEndSig" class="def">isDeadEndSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isDeadEndSig" class="link">Source</a> <a href="#v:isDeadEndSig" class="selflink">#</a></p><div class="doc"><p>True if the signature diverges or throws an exception in a saturated call.
 See Note [Dead ends].</p></div></div><div class="top"><p class="src"><a id="v:isDeadEndAppSig" class="def">isDeadEndAppSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Prelude.html#t:Bool" title="GHC.Prelude">Bool</a> <a href="src/GHC.Types.Demand.html#isDeadEndAppSig" class="link">Source</a> <a href="#v:isDeadEndAppSig" class="selflink">#</a></p><div class="doc"><p>Returns true if an application to n value args would diverge or throw an
 exception.</p><p>If a function having <code><a href="GHC-Types-Demand.html#v:botDiv" title="GHC.Types.Demand">botDiv</a></code> is applied to a less number of arguments than
 its syntactic arity, we cannot say for sure that it is going to diverge.
 Hence this function conservatively returns False in that case.
 See Note [Dead ends].</p></div></div><a href="#g:18" id="g:18"><h2>Handling arity adjustments</h2></a><div class="top"><p class="src"><a id="v:prependArgsStrictSig" class="def">prependArgsStrictSig</a> :: <a href="GHC-Prelude.html#t:Int" title="GHC.Prelude">Int</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#prependArgsStrictSig" class="link">Source</a> <a href="#v:prependArgsStrictSig" class="selflink">#</a></p><div class="doc"><p>Add extra (<code><a href="GHC-Types-Demand.html#v:topDmd" title="GHC.Types.Demand">topDmd</a></code>) arguments to a strictness signature.
 In contrast to <code><a href="GHC-Types-Demand.html#v:etaConvertStrictSig" title="GHC.Types.Demand">etaConvertStrictSig</a></code>, this <em>prepends</em> additional argument
 demands. This is used by FloatOut.</p></div></div><div class="top"><p class="src"><a id="v:etaConvertStrictSig" class="def">etaConvertStrictSig</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#etaConvertStrictSig" class="link">Source</a> <a href="#v:etaConvertStrictSig" class="selflink">#</a></p><div class="doc"><p>We are expanding (x y. e) to (x y z. e z) or reducing from the latter to
 the former (when the Simplifier identifies a new join points, for example).
 In contrast to <code><a href="GHC-Types-Demand.html#v:prependArgsStrictSig" title="GHC.Types.Demand">prependArgsStrictSig</a></code>, this <em>appends</em> extra arg demands if
 necessary.
 This works by looking at the <code><a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></code> (which was produced under a call
 demand for the old arity) and trying to transfer as many facts as we can to
 the call demand of new arity.
 An arity increase (resulting in a stronger incoming demand) can retain much
 of the info, while an arity decrease (a weakening of the incoming demand)
 must fall back to a conservative default.</p></div></div><a href="#g:19" id="g:19"><h1>Demand transformers from demand signatures</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DmdTransformer" class="def">DmdTransformer</a> = <a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> <a href="src/GHC.Types.Demand.html#DmdTransformer" class="link">Source</a> <a href="#t:DmdTransformer" class="selflink">#</a></p><div class="doc"><p>A <em>demand transformer</em> is a monotone function from an incoming evaluation
 context (<code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code>) to a <code><a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a></code>, describing how the denoted thing
 (i.e. expression, function) uses its arguments and free variables, and
 whether it diverges.</p><p>See Note [Understanding DmdType and StrictSig]
 and Note [What are demand signatures?].</p></div></div><div class="top"><p class="src"><a id="v:dmdTransformSig" class="def">dmdTransformSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a> <a href="src/GHC.Types.Demand.html#dmdTransformSig" class="link">Source</a> <a href="#v:dmdTransformSig" class="selflink">#</a></p><div class="doc"><p>Extrapolate a demand signature (<code><a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></code>) into a <code><a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a></code>.</p><p>Given a function's <code><a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a></code> and a <code><a href="GHC-Types-Demand.html#t:SubDemand" title="GHC.Types.Demand">SubDemand</a></code> for the evaluation context,
 return how the function evaluates its free variables and arguments.</p></div></div><div class="top"><p class="src"><a id="v:dmdTransformDataConSig" class="def">dmdTransformDataConSig</a> :: <a href="GHC-Types-Basic.html#t:Arity" title="GHC.Types.Basic">Arity</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a> <a href="src/GHC.Types.Demand.html#dmdTransformDataConSig" class="link">Source</a> <a href="#v:dmdTransformDataConSig" class="selflink">#</a></p><div class="doc"><p>A special <code><a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a></code> for data constructors that feeds product
 demands into the constructor arguments.</p></div></div><div class="top"><p class="src"><a id="v:dmdTransformDictSelSig" class="def">dmdTransformDictSelSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a> <a href="src/GHC.Types.Demand.html#dmdTransformDictSelSig" class="link">Source</a> <a href="#v:dmdTransformDictSelSig" class="selflink">#</a></p><div class="doc"><p>A special <code><a href="GHC-Types-Demand.html#t:DmdTransformer" title="GHC.Types.Demand">DmdTransformer</a></code> for dictionary selectors that feeds the demand
 on the result into the indicated dictionary component (if saturated).</p></div></div><a href="#g:20" id="g:20"><h1>Trim to a type shape</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TypeShape" class="def">TypeShape</a> <a href="src/GHC.Types.Demand.html#TypeShape" class="link">Source</a> <a href="#t:TypeShape" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TsFun" class="def">TsFun</a> <a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:TsProd" class="def">TsProd</a> [<a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:TsUnk" class="def">TsUnk</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TypeShape">Instances</h4><details id="i:TypeShape" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TypeShape:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a></span> <a href="src/GHC.Types.Demand.html#line-1849" class="link">Source</a> <a href="#t:TypeShape" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TypeShape:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Types-Demand.html">GHC.Types.Demand</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:trimToType" class="def">trimToType</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:TypeShape" title="GHC.Types.Demand">TypeShape</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#trimToType" class="link">Source</a> <a href="#v:trimToType" class="selflink">#</a></p></div><a href="#g:21" id="g:21"><h1><code>seq</code>ing stuff</h1></a><div class="top"><p class="src"><a id="v:seqDemand" class="def">seqDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; () <a href="src/GHC.Types.Demand.html#seqDemand" class="link">Source</a> <a href="#v:seqDemand" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:seqDemandList" class="def">seqDemandList</a> :: [<a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a>] -&gt; () <a href="src/GHC.Types.Demand.html#seqDemandList" class="link">Source</a> <a href="#v:seqDemandList" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:seqDmdType" class="def">seqDmdType</a> :: <a href="GHC-Types-Demand.html#t:DmdType" title="GHC.Types.Demand">DmdType</a> -&gt; () <a href="src/GHC.Types.Demand.html#seqDmdType" class="link">Source</a> <a href="#v:seqDmdType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:seqStrictSig" class="def">seqStrictSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; () <a href="src/GHC.Types.Demand.html#seqStrictSig" class="link">Source</a> <a href="#v:seqStrictSig" class="selflink">#</a></p></div><a href="#g:22" id="g:22"><h1>Zapping usage information</h1></a><div class="top"><p class="src"><a id="v:zapUsageDemand" class="def">zapUsageDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#zapUsageDemand" class="link">Source</a> <a href="#v:zapUsageDemand" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:zapDmdEnvSig" class="def">zapDmdEnvSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#zapDmdEnvSig" class="link">Source</a> <a href="#v:zapDmdEnvSig" class="selflink">#</a></p><div class="doc"><p>Remove the demand environment from the signature.</p></div></div><div class="top"><p class="src"><a id="v:zapUsedOnceDemand" class="def">zapUsedOnceDemand</a> :: <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> -&gt; <a href="GHC-Types-Demand.html#t:Demand" title="GHC.Types.Demand">Demand</a> <a href="src/GHC.Types.Demand.html#zapUsedOnceDemand" class="link">Source</a> <a href="#v:zapUsedOnceDemand" class="selflink">#</a></p><div class="doc"><p>Remove all `C_01 :*` info (but not <code>CM</code> sub-demands) from the demand</p></div></div><div class="top"><p class="src"><a id="v:zapUsedOnceSig" class="def">zapUsedOnceSig</a> :: <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> -&gt; <a href="GHC-Types-Demand.html#t:StrictSig" title="GHC.Types.Demand">StrictSig</a> <a href="src/GHC.Types.Demand.html#zapUsedOnceSig" class="link">Source</a> <a href="#v:zapUsedOnceSig" class="selflink">#</a></p><div class="doc"><p>Remove all `C_01 :*` info (but not <code>CM</code> sub-demands) from the strictness
   signature</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>