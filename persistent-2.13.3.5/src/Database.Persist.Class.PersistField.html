<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards, DataKinds, TypeOperators, UndecidableInstances, GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Persist.Class.PersistField</span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#SomePersistField"><span class="hs-identifier">SomePersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier">getPersistMap</span></a></span><span>
</span><span id="line-10"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#OverflowNatural"><span class="hs-identifier">OverflowNatural</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">second</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;=&lt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;|&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unpack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readInt</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Fixed</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Int16</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Int32</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IM</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Read</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">double</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TE</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding.Error</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TERR</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TL</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word16</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word32</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Word64</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Numeric.Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.Blaze.Html</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.Blaze.Html.Renderer.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">renderHtml</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html"><span class="hs-identifier">Database.Persist.Types.Base</span></a></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Time</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Day</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TimeOfDay</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">UTCTime</span></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><span class="hs-identifier">parseTimeM</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Time</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">defaultTimeLocale</span></span><span class="hs-special">)</span><span class="hs-cpp">

#ifdef HIGH_PRECISION_DATE
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Time.Clock.POSIX</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">posixSecondsToUTCTime</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-- | This class teaches Persistent how to take a custom type and marshal it to and from a 'PersistValue', allowing it to be stored in a database.</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- ==== __Examples__</span><span>
</span><span id="line-52"></span><span class="hs-comment">--</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- ===== Simple Newtype</span><span>
</span><span id="line-54"></span><span class="hs-comment">--</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- You can use @newtype@ to add more type safety/readability to a basis type like 'ByteString'. In these cases, just derive 'PersistField' and @PersistFieldSql@:</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- {-\# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-59"></span><span class="hs-comment">--</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- newtype HashedPassword = HashedPassword 'ByteString'</span><span>
</span><span id="line-61"></span><span class="hs-comment">--   deriving (Eq, Show, 'PersistField', PersistFieldSql)</span><span>
</span><span id="line-62"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-63"></span><span class="hs-comment">--</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- ===== Smart Constructor Newtype</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- In this example, we create a 'PersistField' instance for a newtype following the &quot;Smart Constructor&quot; pattern.</span><span>
</span><span id="line-67"></span><span class="hs-comment">--</span><span>
</span><span id="line-68"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- {-\# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- import qualified &quot;Data.Text&quot; as T</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- import qualified &quot;Data.Char&quot; as C</span><span>
</span><span id="line-72"></span><span class="hs-comment">--</span><span>
</span><span id="line-73"></span><span class="hs-comment">-- -- | An American Social Security Number</span><span>
</span><span id="line-74"></span><span class="hs-comment">-- newtype SSN = SSN 'Text'</span><span>
</span><span id="line-75"></span><span class="hs-comment">--  deriving (Eq, Show, PersistFieldSql)</span><span>
</span><span id="line-76"></span><span class="hs-comment">--</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- mkSSN :: 'Text' -&gt; 'Either' 'Text' SSN</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- mkSSN t = if (T.length t == 9) &amp;&amp; (T.all C.isDigit t)</span><span>
</span><span id="line-79"></span><span class="hs-comment">--  then 'Right' $ SSN t</span><span>
</span><span id="line-80"></span><span class="hs-comment">--  else 'Left' $ &quot;Invalid SSN: &quot; &lt;&gt; t</span><span>
</span><span id="line-81"></span><span class="hs-comment">--</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- instance 'PersistField' SSN where</span><span>
</span><span id="line-83"></span><span class="hs-comment">--   'toPersistValue' (SSN t) = 'PersistText' t</span><span>
</span><span id="line-84"></span><span class="hs-comment">--   'fromPersistValue' ('PersistText' t) = mkSSN t</span><span>
</span><span id="line-85"></span><span class="hs-comment">--   -- Handle cases where the database does not give us PersistText</span><span>
</span><span id="line-86"></span><span class="hs-comment">--   'fromPersistValue' x = 'Left' $ &quot;File.hs: When trying to deserialize an SSN: expected PersistText, received: &quot; &lt;&gt; T.pack (show x)</span><span>
</span><span id="line-87"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-88"></span><span class="hs-comment">--</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- Tips:</span><span>
</span><span id="line-90"></span><span class="hs-comment">--</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- * This file contain dozens of 'PersistField' instances you can look at for examples.</span><span>
</span><span id="line-92"></span><span class="hs-comment">-- * Typically custom 'PersistField' instances will only accept a single 'PersistValue' constructor in 'fromPersistValue'.</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- * Internal 'PersistField' instances accept a wide variety of 'PersistValue's to accomodate e.g. storing booleans as integers, booleans or strings.</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- * If you're making a custom instance and using a SQL database, you'll also need @PersistFieldSql@ to specify the type of the database column.</span><span>
</span><span id="line-95"></span><span class="hs-keyword">class</span><span> </span><span id="PersistField"><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-var">PersistField</span></a></span></span><span> </span><span id="local-6989586621679928004"><span class="annot"><a href="#local-6989586621679928004"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-96"></span><span>    </span><span id="toPersistValue"><span class="annot"><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-type">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679928004"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span id="fromPersistValue"><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-type">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679928004"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-cpp">

#ifndef NO_OVERLAP
</span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>    </span><span id="local-6989586621679927811"><span class="annot"><span class="annottext">toPersistValue :: [Char] -&gt; PersistValue
</span><a href="#local-6989586621679927811"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-var">PersistText</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span>
</span><span id="line-102"></span><span>    </span><span id="local-6989586621679927791"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text [Char]
</span><a href="#local-6989586621679927791"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927790"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927790"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927790"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927787"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927787"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError -&gt; ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8With</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError
</span><span class="hs-identifier hs-var">TERR.lenientDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927787"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927783"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927783"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927783"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927780"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927780"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927780"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistRational"><span class="hs-identifier hs-type">PersistRational</span></a></span><span> </span><span id="local-6989586621679927778"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927778"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927778"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDay"><span class="hs-identifier hs-type">PersistDay</span></a></span><span> </span><span id="local-6989586621679927776"><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927776"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927776"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistTimeOfDay"><span class="hs-identifier hs-type">PersistTimeOfDay</span></a></span><span> </span><span id="local-6989586621679927774"><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927774"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927774"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistUTCTime"><span class="hs-identifier hs-type">PersistUTCTime</span></a></span><span> </span><span id="local-6989586621679927772"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927772"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927772"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unexpected null&quot;</span></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistBool"><span class="hs-identifier hs-type">PersistBool</span></a></span><span> </span><span id="local-6989586621679927769"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679927769"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">Prelude.show</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679927769"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistList"><span class="hs-identifier hs-type">PersistList</span></a></span><span> </span><span class="annot"><span class="annottext">[PersistValue]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot convert PersistList to String&quot;</span></span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistMap"><span class="hs-identifier hs-type">PersistMap</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, PersistValue)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot convert PersistMap to String&quot;</span></span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistLiteral_"><span class="hs-identifier hs-type">PersistLiteral_</span></a></span><span> </span><span class="annot"><span class="annottext">LiteralType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot convert PersistLiteral_ to String&quot;</span></span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistArray"><span class="hs-identifier hs-type">PersistArray</span></a></span><span> </span><span class="annot"><span class="annottext">[PersistValue]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot convert PersistArray to String&quot;</span></span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistObjectId"><span class="hs-identifier hs-type">PersistObjectId</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot convert PersistObjectId to String&quot;</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621679927760"><span class="annot"><span class="annottext">toPersistValue :: ByteString -&gt; PersistValue
</span><a href="#local-6989586621679927760"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-var">PersistByteString</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621679927755"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text ByteString
</span><a href="#local-6989586621679927755"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927754"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927754"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927754"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927753"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927753"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927753"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-126"></span><span>    </span><span id="local-6989586621679927748"><span class="annot"><span class="annottext">toPersistValue :: Text -&gt; PersistValue
</span><a href="#local-6989586621679927748"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-var">PersistText</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span id="local-6989586621679927747"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Text
</span><a href="#local-6989586621679927747"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PersistValue -&gt; Either Text Text
</span><a href="Database.Persist.PersistValue.html#fromPersistValueText"><span class="hs-identifier hs-var">fromPersistValueText</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TL.Text</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>    </span><span id="local-6989586621679927741"><span class="annot"><span class="annottext">toPersistValue :: Text -&gt; PersistValue
</span><a href="#local-6989586621679927741"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><span class="hs-identifier hs-var">TL.toStrict</span></span><span>
</span><span id="line-131"></span><span>    </span><span id="local-6989586621679927737"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Text
</span><a href="#local-6989586621679927737"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><span class="hs-identifier hs-var">TL.fromStrict</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Html</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-134"></span><span>    </span><span id="local-6989586621679927732"><span class="annot"><span class="annottext">toPersistValue :: Html -&gt; PersistValue
</span><a href="#local-6989586621679927732"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-var">PersistText</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><span class="hs-identifier hs-var">TL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Html -&gt; Text
</span><span class="hs-identifier hs-var">renderHtml</span></span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621679927727"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Html
</span><a href="#local-6989586621679927727"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. ToMarkup a =&gt; a -&gt; Html
</span><span class="hs-identifier hs-var">preEscapedToMarkup</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Html</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679927718"><span class="annot"><span class="annottext">toPersistValue :: Int -&gt; PersistValue
</span><a href="#local-6989586621679927718"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621679927708"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Int
</span><a href="#local-6989586621679927708"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927707"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927707"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927707"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927706"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927706"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">truncate</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927706"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927704"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927704"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927704"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int8</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621679927696"><span class="annot"><span class="annottext">toPersistValue :: Int8 -&gt; PersistValue
</span><a href="#local-6989586621679927696"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-145"></span><span>    </span><span id="local-6989586621679927678"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Int8
</span><a href="#local-6989586621679927678"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927677"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927677"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927677"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927676"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927676"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">truncate</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927676"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int8</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927675"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927675"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">readInt</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927675"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-148"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927674"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927674"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927674"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-149"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927673"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927673"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927672"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927672"><span class="hs-identifier hs-var">extra</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall result.
Show result =&gt;
Text -&gt; ByteString -&gt; result -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#extraInputError"><span class="hs-identifier hs-var">extraInputError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927675"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927673"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927672"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-150"></span><span>                                               </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#intParseError"><span class="hs-identifier hs-var">intParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927675"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927669"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927669"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int8&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927669"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int16</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>    </span><span id="local-6989586621679927662"><span class="annot"><span class="annottext">toPersistValue :: Int16 -&gt; PersistValue
</span><a href="#local-6989586621679927662"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621679927647"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Int16
</span><a href="#local-6989586621679927647"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927646"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927646"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927646"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927645"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927645"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">truncate</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927645"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int16</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927644"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927644"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">readInt</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927644"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-158"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927643"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927643"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927643"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-159"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927642"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927642"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927641"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927641"><span class="hs-identifier hs-var">extra</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall result.
Show result =&gt;
Text -&gt; ByteString -&gt; result -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#extraInputError"><span class="hs-identifier hs-var">extraInputError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927644"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927642"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927641"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-160"></span><span>                                               </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#intParseError"><span class="hs-identifier hs-var">intParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927644"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927640"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927640"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int16&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927640"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621679927633"><span class="annot"><span class="annottext">toPersistValue :: Int32 -&gt; PersistValue
</span><a href="#local-6989586621679927633"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621679927618"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Int32
</span><a href="#local-6989586621679927618"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927617"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927617"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927617"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927616"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927616"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">truncate</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927616"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927615"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927615"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">readInt</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927615"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-168"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927614"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927614"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927614"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-169"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927613"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927613"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927612"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927612"><span class="hs-identifier hs-var">extra</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall result.
Show result =&gt;
Text -&gt; ByteString -&gt; result -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#extraInputError"><span class="hs-identifier hs-var">extraInputError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927615"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927613"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927612"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-170"></span><span>                                               </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#intParseError"><span class="hs-identifier hs-var">intParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927615"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927611"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927611"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int32&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927611"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621679927607"><span class="annot"><span class="annottext">toPersistValue :: Int64 -&gt; PersistValue
</span><a href="#local-6989586621679927607"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621679927595"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Int64
</span><a href="#local-6989586621679927595"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927594"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927594"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927594"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927593"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927593"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">truncate</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927593"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927592"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927592"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">readInt</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927592"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- oracle</span><span>
</span><span id="line-178"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927591"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927591"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927591"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-179"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927590"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927590"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927589"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927589"><span class="hs-identifier hs-var">extra</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall result.
Show result =&gt;
Text -&gt; ByteString -&gt; result -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#extraInputError"><span class="hs-identifier hs-var">extraInputError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927592"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679927590"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927589"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-180"></span><span>                                               </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#intParseError"><span class="hs-identifier hs-var">intParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927592"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927588"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927588"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927588"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span id="local-6989586621679927971"><span class="annot"><a href="Database.Persist.Class.PersistField.html#extraInputError"><span class="hs-identifier hs-type">extraInputError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679927971"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Haskell type</span><span>
</span><span id="line-185"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-comment">-- ^ Original bytestring</span><span>
</span><span id="line-186"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679927971"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-comment">-- ^ Integer result</span><span>
</span><span id="line-187"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-comment">-- ^  Extra bytestring</span><span>
</span><span id="line-188"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span></span><span> </span><span class="hs-comment">-- ^ Error message</span><span>
</span><span id="line-189"></span><span id="extraInputError"><span class="annot"><span class="annottext">extraInputError :: forall result.
Show result =&gt;
Text -&gt; ByteString -&gt; result -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#extraInputError"><span class="hs-identifier hs-var hs-var">extraInputError</span></a></span></span><span> </span><span id="local-6989586621679927581"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927581"><span class="hs-identifier hs-var">haskellType</span></a></span></span><span> </span><span id="local-6989586621679927580"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927580"><span class="hs-identifier hs-var">original</span></a></span></span><span> </span><span id="local-6989586621679927579"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679927579"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span id="local-6989586621679927578"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927578"><span class="hs-identifier hs-var">extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Parsed &quot;</span></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927580"><span class="hs-identifier hs-var">original</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; into Haskell type `&quot;</span></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927581"><span class="hs-identifier hs-var">haskellType</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;` with value&quot;</span></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679927579"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;but had extra input: &quot;</span></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927578"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#intParseError"><span class="hs-identifier hs-type">intParseError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Haskell type</span><span>
</span><span id="line-201"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-comment">-- ^ Original bytestring</span><span>
</span><span id="line-202"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Error message</span><span>
</span><span id="line-203"></span><span id="intParseError"><span class="annot"><span class="annottext">intParseError :: Text -&gt; ByteString -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#intParseError"><span class="hs-identifier hs-var hs-var">intParseError</span></a></span></span><span> </span><span id="local-6989586621679927575"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927575"><span class="hs-identifier hs-var">haskellType</span></a></span></span><span> </span><span id="local-6989586621679927574"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927574"><span class="hs-identifier hs-var">original</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to parse Haskell type `&quot;</span></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927575"><span class="hs-identifier hs-var">haskellType</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; from &quot;</span></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927574"><span class="hs-identifier hs-var">original</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data.Word.Word</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621679927567"><span class="annot"><span class="annottext">toPersistValue :: Word -&gt; PersistValue
</span><a href="#local-6989586621679927567"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621679927561"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Word
</span><a href="#local-6989586621679927561"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927560"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927560"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927560"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927559"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927559"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Word&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927559"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621679927552"><span class="annot"><span class="annottext">toPersistValue :: Word8 -&gt; PersistValue
</span><a href="#local-6989586621679927552"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-217"></span><span>    </span><span id="local-6989586621679927546"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Word8
</span><a href="#local-6989586621679927546"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927545"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927545"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927545"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927544"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927544"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Word8&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927544"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621679927537"><span class="annot"><span class="annottext">toPersistValue :: Word16 -&gt; PersistValue
</span><a href="#local-6989586621679927537"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621679927531"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Word16
</span><a href="#local-6989586621679927531"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927530"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927530"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927530"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927529"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927529"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Word16&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927529"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621679927522"><span class="annot"><span class="annottext">toPersistValue :: Word32 -&gt; PersistValue
</span><a href="#local-6989586621679927522"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621679927516"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Word32
</span><a href="#local-6989586621679927516"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927515"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927515"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927515"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927514"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927514"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Word32&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927514"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>    </span><span id="local-6989586621679927507"><span class="annot"><span class="annottext">toPersistValue :: Word64 -&gt; PersistValue
</span><a href="#local-6989586621679927507"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-var">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621679927501"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Word64
</span><a href="#local-6989586621679927501"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927500"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927500"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927500"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927499"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927499"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Word64&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927499"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679927495"><span class="annot"><span class="annottext">toPersistValue :: Double -&gt; PersistValue
</span><a href="#local-6989586621679927495"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-var">PersistDouble</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621679927487"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Double
</span><a href="#local-6989586621679927487"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927486"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927486"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927486"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistRational"><span class="hs-identifier hs-type">PersistRational</span></a></span><span> </span><span id="local-6989586621679927485"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927485"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927485"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927484"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927484"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927484"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927483"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927483"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Double&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;double, rational, or integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927483"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927965"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasResolution</span></span><span> </span><span class="annot"><a href="#local-6989586621679927965"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Fixed</span></span><span> </span><span class="annot"><a href="#local-6989586621679927965"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-243"></span><span>    </span><span id="local-6989586621679927476"><span class="annot"><span class="annottext">toPersistValue :: Fixed a -&gt; PersistValue
</span><a href="#local-6989586621679927476"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistRational"><span class="hs-identifier hs-var">PersistRational</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span>
</span><span id="line-244"></span><span>    </span><span id="local-6989586621679927451"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (Fixed a)
</span><a href="#local-6989586621679927451"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistRational"><span class="hs-identifier hs-type">PersistRational</span></a></span><span> </span><span id="local-6989586621679927450"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927450"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927450"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927449"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927449"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927449"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">--  NOTE: Sqlite can store rationals just as string</span><span>
</span><span id="line-246"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621679927447"><span class="annot"><span class="annottext">Fixed a
</span><a href="#local-6989586621679927447"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Fixed a
</span><a href="#local-6989586621679927447"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-247"></span><span>      </span><span class="annot"><span class="annottext">[(Fixed a, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Can not read &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927449"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; as Fixed&quot;</span></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927446"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927446"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">realToFrac</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927446"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927445"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927445"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927445"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927444"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927444"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Fixed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;rational, string, double, or integer&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927444"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621679927440"><span class="annot"><span class="annottext">toPersistValue :: Rational -&gt; PersistValue
</span><a href="#local-6989586621679927440"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistRational"><span class="hs-identifier hs-var">PersistRational</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621679927393"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Rational
</span><a href="#local-6989586621679927393"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistRational"><span class="hs-identifier hs-type">PersistRational</span></a></span><span> </span><span id="local-6989586621679927392"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927392"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679927392"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDouble"><span class="hs-identifier hs-type">PersistDouble</span></a></span><span> </span><span id="local-6989586621679927391"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927391"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927391"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927390"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927390"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927390"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">--  NOTE: Sqlite can store rationals just as string</span><span>
</span><span id="line-257"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621679927389"><span class="annot"><span class="annottext">Pico
</span><a href="#local-6989586621679927389"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pico
</span><a href="#local-6989586621679927389"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pico</span></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>      </span><span class="annot"><span class="annottext">[(Pico, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Can not read &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927390"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; as Rational (Pico in fact)&quot;</span></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927388"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927388"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927388"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927387"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927387"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Reader Double
</span><span class="hs-identifier hs-var">double</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'0'</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError -&gt; ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8With</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError
</span><span class="hs-identifier hs-var">TERR.lenientDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927387"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-261"></span><span>                                                </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927385"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927385"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927385"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-262"></span><span>                                                </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927384"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927384"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927383"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927383"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Invalid bytestring[&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927387"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;]: expected a double but returned &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679927384"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927383"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>                                                </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679927382"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679927382"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Invalid bytestring[&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927387"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;]: expected a double but returned &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679927382"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927381"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927381"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Rational&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;rational, double, string, integer, or bytestring&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927381"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621679927377"><span class="annot"><span class="annottext">toPersistValue :: Bool -&gt; PersistValue
</span><a href="#local-6989586621679927377"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistBool"><span class="hs-identifier hs-var">PersistBool</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span id="local-6989586621679927353"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Bool
</span><a href="#local-6989586621679927353"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistBool"><span class="hs-identifier hs-type">PersistBool</span></a></span><span> </span><span id="local-6989586621679927352"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679927352"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679927352"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927351"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927351"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927351"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927349"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927349"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">readInt</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927349"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-271"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-272"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-273"></span><span>                                               </span><span id="local-6989586621679927348"><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><a href="#local-6989586621679927348"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Failed to parse Haskell type `Bool` from PersistByteString. Original value:&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927349"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;. Parsed by `readInt` as &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><a href="#local-6989586621679927348"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;. Expected '1'.&quot;</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927347"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927347"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Bool&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;boolean, integer, or bytestring of '1' or '0'&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927347"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Day</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-277"></span><span>    </span><span id="local-6989586621679927343"><span class="annot"><span class="annottext">toPersistValue :: Day -&gt; PersistValue
</span><a href="#local-6989586621679927343"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Day -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistDay"><span class="hs-identifier hs-var">PersistDay</span></a></span><span>
</span><span id="line-278"></span><span>    </span><span id="local-6989586621679927332"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Day
</span><a href="#local-6989586621679927332"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistDay"><span class="hs-identifier hs-type">PersistDay</span></a></span><span> </span><span id="local-6989586621679927331"><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927331"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927331"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span id="local-6989586621679927330"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927330"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Day
</span><span class="hs-identifier hs-var">ModifiedJulianDay</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927330"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927328"><span class="annot"><span class="annottext">x :: PersistValue
</span><a href="#local-6989586621679927328"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927327"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927327"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927327"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-282"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679927326"><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927326"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[(Day, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927326"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-283"></span><span>            </span><span class="annot"><span class="annottext">[(Day, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var">fromPersistValueParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Day&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927328"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927324"><span class="annot"><span class="annottext">x :: PersistValue
</span><a href="#local-6989586621679927324"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927323"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927323"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><span class="hs-identifier hs-var">unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927323"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-286"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679927322"><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927322"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[(Day, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Day
</span><a href="#local-6989586621679927322"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-287"></span><span>            </span><span class="annot"><span class="annottext">[(Day, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var">fromPersistValueParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Day&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927324"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927321"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927321"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Day&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;day, integer, string or bytestring&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927321"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TimeOfDay</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-291"></span><span>    </span><span id="local-6989586621679927317"><span class="annot"><span class="annottext">toPersistValue :: TimeOfDay -&gt; PersistValue
</span><a href="#local-6989586621679927317"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeOfDay -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistTimeOfDay"><span class="hs-identifier hs-var">PersistTimeOfDay</span></a></span><span>
</span><span id="line-292"></span><span>    </span><span id="local-6989586621679927307"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text TimeOfDay
</span><a href="#local-6989586621679927307"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistTimeOfDay"><span class="hs-identifier hs-type">PersistTimeOfDay</span></a></span><span> </span><span id="local-6989586621679927306"><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927306"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927306"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927305"><span class="annot"><span class="annottext">x :: PersistValue
</span><a href="#local-6989586621679927305"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927304"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927304"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927304"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-295"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679927303"><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927303"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[(TimeOfDay, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927303"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-296"></span><span>            </span><span class="annot"><span class="annottext">[(TimeOfDay, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var">fromPersistValueParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TimeOfDay&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927305"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927302"><span class="annot"><span class="annottext">x :: PersistValue
</span><a href="#local-6989586621679927302"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927301"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927301"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-298"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><span class="hs-identifier hs-var">unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927301"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-299"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679927300"><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927300"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[(TimeOfDay, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">TimeOfDay
</span><a href="#local-6989586621679927300"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-300"></span><span>            </span><span class="annot"><span class="annottext">[(TimeOfDay, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var">fromPersistValueParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TimeOfDay&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927302"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927299"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927299"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TimeOfDay&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;time, string, or bytestring&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927299"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTCTime</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>    </span><span id="local-6989586621679927295"><span class="annot"><span class="annottext">toPersistValue :: UTCTime -&gt; PersistValue
</span><a href="#local-6989586621679927295"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistUTCTime"><span class="hs-identifier hs-var">PersistUTCTime</span></a></span><span>
</span><span id="line-305"></span><span>    </span><span id="local-6989586621679927283"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text UTCTime
</span><a href="#local-6989586621679927283"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistUTCTime"><span class="hs-identifier hs-type">PersistUTCTime</span></a></span><span> </span><span id="local-6989586621679927282"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927282"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927282"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-cpp">
#ifdef HIGH_PRECISION_DATE
</span><span>    </span><span class="hs-identifier">fromPersistValue</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">PersistInt64</span><span> </span><span class="hs-identifier">i</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">Right</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">posixSecondsToUTCTime</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-special">(</span><span class="hs-operator">/</span><span> </span><span class="hs-special">(</span><span class="hs-number">1000</span><span> </span><span class="hs-operator">*</span><span> </span><span class="hs-number">1000</span><span> </span><span class="hs-operator">*</span><span> </span><span class="hs-number">1000</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">i</span><span class="hs-cpp">
#endif
</span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927281"><span class="annot"><span class="annottext">x :: PersistValue
</span><a href="#local-6989586621679927281"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927280"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927280"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-310"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679927279"><span class="annot"><span class="annottext">s :: [Char]
</span><a href="#local-6989586621679927279"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927280"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-311"></span><span>        </span><span class="hs-keyword">in</span><span>
</span><span id="line-312"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NonEmpty.nonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679927279"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-313"></span><span>            </span><span class="annot"><span class="annottext">Maybe (NonEmpty (UTCTime, [Char]))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927277"><span class="hs-identifier hs-var">parse8601</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679927279"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927276"><span class="hs-identifier hs-var">parsePretty</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679927279"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-315"></span><span>                    </span><span class="annot"><span class="annottext">Maybe UTCTime
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var">fromPersistValueParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;UTCTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927281"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-316"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679927275"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927275"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927275"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-317"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679927274"><span class="annot"><span class="annottext">NonEmpty (UTCTime, [Char])
</span><a href="#local-6989586621679927274"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-318"></span><span>                </span><span class="hs-comment">-- The 'Read UTCTime' instance in newer versions of 'time' is</span><span>
</span><span id="line-319"></span><span>                </span><span class="hs-comment">-- more flexible when parsing UTCTime strings and will return</span><span>
</span><span id="line-320"></span><span>                </span><span class="hs-comment">-- UTCTimes with different microsecond parsings. The last result</span><span>
</span><span id="line-321"></span><span>                </span><span class="hs-comment">-- here contains the parsed UTCTime with as much microsecond</span><span>
</span><span id="line-322"></span><span>                </span><span class="hs-comment">-- precision parsed as posssible.</span><span>
</span><span id="line-323"></span><span>                </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NonEmpty.last</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (UTCTime, [Char])
</span><a href="#local-6989586621679927274"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-324"></span><span>      </span><span class="hs-keyword">where</span><span class="hs-cpp">
#if MIN_VERSION_time(1,5,0)
</span><span>        </span><span id="local-6989586621679927268"><span class="annot"><span class="annottext">parseTime' :: [Char] -&gt; [Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927268"><span class="hs-identifier hs-var hs-var">parseTime'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t.
(MonadFail m, ParseTime t) =&gt;
Bool -&gt; TimeLocale -&gt; [Char] -&gt; [Char] -&gt; m t
</span><span class="hs-identifier hs-var">parseTimeM</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">TimeLocale
</span><span class="hs-identifier hs-var">defaultTimeLocale</span></span><span class="hs-cpp">
#else
</span><span>        </span><span class="hs-identifier">parseTime'</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">parseTime</span><span> </span><span class="hs-identifier">defaultTimeLocale</span><span class="hs-cpp">
#endif
</span><span>        </span><span id="local-6989586621679927277"><span class="annot"><span class="annottext">parse8601 :: [Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927277"><span class="hs-identifier hs-var hs-var">parse8601</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927268"><span class="hs-identifier hs-var">parseTime'</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;%FT%T%Q&quot;</span></span><span>
</span><span id="line-331"></span><span>        </span><span id="local-6989586621679927276"><span class="annot"><span class="annottext">parsePretty :: [Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927276"><span class="hs-identifier hs-var hs-var">parsePretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; Maybe UTCTime
</span><a href="#local-6989586621679927268"><span class="hs-identifier hs-var">parseTime'</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;%F %T%Q&quot;</span></span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927267"><span class="annot"><span class="annottext">x :: PersistValue
</span><a href="#local-6989586621679927267"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927266"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927266"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-333"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Read a =&gt; ReadS a
</span><span class="hs-identifier hs-var">reads</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><span class="hs-identifier hs-var">unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927266"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-334"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679927265"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927265"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[(UTCTime, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679927265"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-335"></span><span>            </span><span class="annot"><span class="annottext">[(UTCTime, [Char])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var">fromPersistValueParseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;UTCTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927267"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927264"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927264"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;UTCTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;time, integer, string, or bytestring&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927264"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-comment">-- | Prior to @persistent-2.11.0@, we provided an instance of</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- 'PersistField' for the 'Natural' type. This was in error, because</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- 'Natural' represents an infinite value, and databases don't have</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- reasonable types for this.</span><span>
</span><span id="line-343"></span><span class="hs-comment">--</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- The instance for 'Natural' used the 'Int64' underlying type, which will</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- cause underflow and overflow errors. This type has the exact same code</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- in the instances, and will work seamlessly.</span><span>
</span><span id="line-347"></span><span class="hs-comment">--</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- A more appropriate type for this is the 'Word' series of types from</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- &quot;Data.Word&quot;. These have a bounded size, are guaranteed to be</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- non-negative, and are quite efficient for the database to store.</span><span>
</span><span id="line-351"></span><span class="hs-comment">--</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- @since 2.11.0</span><span>
</span><span id="line-353"></span><span class="hs-keyword">newtype</span><span> </span><span id="OverflowNatural"><span class="annot"><a href="Database.Persist.Class.PersistField.html#OverflowNatural"><span class="hs-identifier hs-var">OverflowNatural</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OverflowNatural"><span class="annot"><a href="Database.Persist.Class.PersistField.html#OverflowNatural"><span class="hs-identifier hs-var">OverflowNatural</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unOverflowNatural"><span class="annot"><span class="annottext">OverflowNatural -&gt; Natural
</span><a href="Database.Persist.Class.PersistField.html#unOverflowNatural"><span class="hs-identifier hs-var hs-var">unOverflowNatural</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927255"><span id="local-6989586621679927260"><span class="annot"><span class="annottext">OverflowNatural -&gt; OverflowNatural -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
$c/= :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
== :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
$c== :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679927241"><span id="local-6989586621679927243"><span id="local-6989586621679927249"><span class="annot"><span class="annottext">Int -&gt; OverflowNatural -&gt; ShowS
[OverflowNatural] -&gt; ShowS
OverflowNatural -&gt; [Char]
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [OverflowNatural] -&gt; ShowS
$cshowList :: [OverflowNatural] -&gt; ShowS
show :: OverflowNatural -&gt; [Char]
$cshow :: OverflowNatural -&gt; [Char]
showsPrec :: Int -&gt; OverflowNatural -&gt; ShowS
$cshowsPrec :: Int -&gt; OverflowNatural -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679927211"><span id="local-6989586621679927215"><span id="local-6989586621679927219"><span id="local-6989586621679927223"><span id="local-6989586621679927227"><span id="local-6989586621679927231"><span id="local-6989586621679927236"><span class="annot"><span class="annottext">Eq OverflowNatural
OverflowNatural -&gt; OverflowNatural -&gt; Bool
OverflowNatural -&gt; OverflowNatural -&gt; Ordering
OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
$cmin :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
max :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
$cmax :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
&gt;= :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
$c&gt;= :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
&gt; :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
$c&gt; :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
&lt;= :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
$c&lt;= :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
&lt; :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
$c&lt; :: OverflowNatural -&gt; OverflowNatural -&gt; Bool
compare :: OverflowNatural -&gt; OverflowNatural -&gt; Ordering
$ccompare :: OverflowNatural -&gt; OverflowNatural -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679927180"><span id="local-6989586621679927184"><span id="local-6989586621679927188"><span id="local-6989586621679927192"><span id="local-6989586621679927196"><span id="local-6989586621679927200"><span id="local-6989586621679927205"><span class="annot"><span class="annottext">Integer -&gt; OverflowNatural
OverflowNatural -&gt; OverflowNatural
OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; OverflowNatural
$cfromInteger :: Integer -&gt; OverflowNatural
signum :: OverflowNatural -&gt; OverflowNatural
$csignum :: OverflowNatural -&gt; OverflowNatural
abs :: OverflowNatural -&gt; OverflowNatural
$cabs :: OverflowNatural -&gt; OverflowNatural
negate :: OverflowNatural -&gt; OverflowNatural
$cnegate :: OverflowNatural -&gt; OverflowNatural
* :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
$c* :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
- :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
$c- :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
+ :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
$c+ :: OverflowNatural -&gt; OverflowNatural -&gt; OverflowNatural
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;The instance of PersistField for the Natural type was removed.&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Please see the documentation for OverflowNatural if you want to &quot;</span></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;continue using the old behavior or want to see documentation on &quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;why the instance was removed.&quot;</span></span><span>
</span><span id="line-362"></span><span>    </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;This error instance will be removed in a future release.&quot;</span></span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-366"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621679927169"><span class="annot"><span class="annottext">toPersistValue :: Natural -&gt; PersistValue
</span><a href="#local-6989586621679927169"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; a
</span><span class="hs-identifier hs-var">undefined</span></span><span>
</span><span id="line-369"></span><span>    </span><span id="local-6989586621679927165"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Natural
</span><a href="#local-6989586621679927165"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; a
</span><span class="hs-identifier hs-var">undefined</span></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#OverflowNatural"><span class="hs-identifier hs-type">OverflowNatural</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621679927157"><span class="annot"><span class="annottext">toPersistValue :: OverflowNatural -&gt; PersistValue
</span><a href="#local-6989586621679927157"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OverflowNatural -&gt; Natural
</span><a href="Database.Persist.Class.PersistField.html#unOverflowNatural"><span class="hs-identifier hs-var">unOverflowNatural</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span id="local-6989586621679927151"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text OverflowNatural
</span><a href="#local-6989586621679927151"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span id="local-6989586621679927150"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927150"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927150"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679927149"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927149"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.replace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Int64&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;OverflowNatural&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927149"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679927147"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927147"><span class="hs-identifier hs-var">int</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; OverflowNatural
</span><a href="Database.Persist.Class.PersistField.html#OverflowNatural"><span class="hs-identifier hs-var">OverflowNatural</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679927147"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="hs-comment">-- TODO use bimap?</span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927918"><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927918"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679927918"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-378"></span><span>    </span><span id="local-6989586621679927141"><span class="annot"><span class="annottext">toPersistValue :: Maybe a -&gt; PersistValue
</span><a href="#local-6989586621679927141"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679927140"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679927140"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679927140"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621679927137"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (Maybe a)
</span><a href="#local-6989586621679927137"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927136"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927136"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927136"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679927915"><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927915"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679927915"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621679927128"><span class="annot"><span class="annottext">toPersistValue :: [a] -&gt; PersistValue
</span><a href="#local-6989586621679927128"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PersistValue] -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistList"><span class="hs-identifier hs-var">PersistList</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span>
</span><span id="line-385"></span><span>    </span><span id="local-6989586621679927121"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text [a]
</span><a href="#local-6989586621679927121"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistList"><span class="hs-identifier hs-type">PersistList</span></a></span><span> </span><span id="local-6989586621679927120"><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927120"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; [PersistValue] -&gt; Either Text [a]
</span><a href="Database.Persist.Class.PersistField.html#fromPersistList"><span class="hs-identifier hs-var">fromPersistList</span></a></span><span> </span><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927120"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927118"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927118"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-var">PersistByteString</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927118"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927117"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927117"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679927116"><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927116"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">A.decode'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
</span><span class="hs-identifier hs-var">L.fromChunks</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927117"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; [PersistValue] -&gt; Either Text [a]
</span><a href="Database.Persist.Class.PersistField.html#fromPersistList"><span class="hs-identifier hs-var">fromPersistList</span></a></span><span> </span><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927116"><span class="hs-identifier hs-var">values</span></a></span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-comment">-- avoid the need for a migration to fill in empty lists.</span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-comment">-- also useful when Persistent is not the only one filling in the data</span><span>
</span><span id="line-391"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927113"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927113"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;List&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;list, string, bytestring or null&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927113"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927909"><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927909"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">V.Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679927909"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-395"></span><span>  </span><span id="local-6989586621679927107"><span class="annot"><span class="annottext">toPersistValue :: Vector a -&gt; PersistValue
</span><a href="#local-6989586621679927107"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Vector a -&gt; [a]
</span><span class="hs-identifier hs-var">V.toList</span></span><span>
</span><span id="line-396"></span><span>  </span><span id="local-6989586621679927103"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (Vector a)
</span><a href="#local-6989586621679927103"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679927101"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927101"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to parse Haskell type `Vector`: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927101"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Vector a
</span><span class="hs-identifier hs-var">V.fromList</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927901"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679927901"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927901"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679927901"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-400"></span><span>    </span><span id="local-6989586621679927091"><span class="annot"><span class="annottext">toPersistValue :: Set a -&gt; PersistValue
</span><a href="#local-6989586621679927091"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PersistValue] -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistList"><span class="hs-identifier hs-var">PersistList</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621679927079"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (Set a)
</span><a href="#local-6989586621679927079"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistList"><span class="hs-identifier hs-type">PersistList</span></a></span><span> </span><span id="local-6989586621679927078"><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927078"><span class="hs-identifier hs-var">list</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-402"></span><span>      </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; [PersistValue] -&gt; Either Text [a]
</span><a href="Database.Persist.Class.PersistField.html#fromPersistList"><span class="hs-identifier hs-var">fromPersistList</span></a></span><span> </span><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927078"><span class="hs-identifier hs-var">list</span></a></span><span>
</span><span id="line-403"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679927076"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927076"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-var">PersistByteString</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927076"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679927075"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927075"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679927074"><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927074"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">A.decode'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
</span><span class="hs-identifier hs-var">L.fromChunks</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679927075"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-406"></span><span>            </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; [PersistValue] -&gt; Either Text [a]
</span><a href="Database.Persist.Class.PersistField.html#fromPersistList"><span class="hs-identifier hs-var">fromPersistList</span></a></span><span> </span><span class="annot"><span class="annottext">[PersistValue]
</span><a href="#local-6989586621679927074"><span class="hs-identifier hs-var">values</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-408"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679927072"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927072"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Set&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;list, string, bytestring or null&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927072"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927894"><span id="local-6989586621679927895"><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927894"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679927895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679927894"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-411"></span><span>    </span><span id="local-6989586621679927064"><span class="annot"><span class="annottext">toPersistValue :: (a, b) -&gt; PersistValue
</span><a href="#local-6989586621679927064"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679927063"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679927063"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927062"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679927062"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PersistValue] -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistList"><span class="hs-identifier hs-var">PersistList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679927063"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679927062"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>    </span><span id="local-6989586621679927050"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (a, b)
</span><a href="#local-6989586621679927050"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span id="local-6989586621679927049"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927049"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927049"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-414"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679927048"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927048"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679927047"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927047"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927048"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927047"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-415"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679927046"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927046"><span class="hs-identifier hs-var">e</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679927046"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-416"></span><span>            </span><span class="annot"><span class="annottext">Either Text [PersistValue]
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected 2 item PersistList, received: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679927049"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927886"><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927886"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IM.IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679927886"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-419"></span><span>    </span><span id="local-6989586621679927038"><span class="annot"><span class="annottext">toPersistValue :: IntMap v -&gt; PersistValue
</span><a href="#local-6989586621679927038"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. IntMap a -&gt; [(Int, a)]
</span><span class="hs-identifier hs-var">IM.toList</span></span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621679927032"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (IntMap v)
</span><a href="#local-6989586621679927032"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. [(Int, a)] -&gt; IntMap a
</span><span class="hs-identifier hs-var">IM.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679927881"><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927881"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679927881"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-423"></span><span>    </span><span id="local-6989586621679927022"><span class="annot"><span class="annottext">toPersistValue :: Map Text v -&gt; PersistValue
</span><a href="#local-6989586621679927022"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Text, PersistValue)] -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistMap"><span class="hs-identifier hs-var">PersistMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span>
</span><span id="line-424"></span><span>    </span><span id="local-6989586621679927017"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text (Map Text v)
</span><a href="#local-6989586621679927017"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall v.
PersistField v =&gt;
[(Text, PersistValue)] -&gt; Either Text (Map Text v)
</span><a href="Database.Persist.Class.PersistField.html#fromPersistMap"><span class="hs-identifier hs-var">fromPersistMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue -&gt; Either Text [(Text, PersistValue)]
</span><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var">getPersistMap</span></a></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-427"></span><span>    </span><span id="local-6989586621679927013"><span class="annot"><span class="annottext">toPersistValue :: PersistValue -&gt; PersistValue
</span><a href="#local-6989586621679927013"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-428"></span><span>    </span><span id="local-6989586621679927011"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text PersistValue
</span><a href="#local-6989586621679927011"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span id="local-6989586621679927914"><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistList"><span class="hs-identifier hs-type">fromPersistList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927914"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679927914"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-431"></span><span id="fromPersistList"><span class="annot"><span class="annottext">fromPersistList :: forall a. PersistField a =&gt; [PersistValue] -&gt; Either Text [a]
</span><a href="Database.Persist.Class.PersistField.html#fromPersistList"><span class="hs-identifier hs-var hs-var">fromPersistList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span id="local-6989586621679927872"><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistMap"><span class="hs-identifier hs-type">fromPersistMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679927872"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-434"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-435"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679927872"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-436"></span><span id="fromPersistMap"><span class="annot"><span class="annottext">fromPersistMap :: forall v.
PersistField v =&gt;
[(Text, PersistValue)] -&gt; Either Text (Map Text v)
</span><a href="Database.Persist.Class.PersistField.html#fromPersistMap"><span class="hs-identifier hs-var hs-var">fromPersistMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a} {t} {a} {b}.
Ord a =&gt;
(t -&gt; Either a b) -&gt; [(a, b)] -&gt; [(a, t)] -&gt; Either a (Map a b)
</span><a href="#local-6989586621679927000"><span class="hs-identifier hs-var">foldShortLeft</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-437"></span><span>    </span><span class="hs-comment">-- a fold that short-circuits on Left.</span><span>
</span><span id="line-438"></span><span>    </span><span id="local-6989586621679927000"><span class="annot"><span class="annottext">foldShortLeft :: (t -&gt; Either a b) -&gt; [(a, b)] -&gt; [(a, t)] -&gt; Either a (Map a b)
</span><a href="#local-6989586621679927000"><span class="hs-identifier hs-var hs-var">foldShortLeft</span></a></span></span><span> </span><span id="local-6989586621679926997"><span class="annot"><span class="annottext">t -&gt; Either a b
</span><a href="#local-6989586621679926997"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(a, b)] -&gt; [(a, t)] -&gt; Either a (Map a b)
</span><a href="#local-6989586621679926996"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-439"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-440"></span><span>        </span><span id="local-6989586621679926996"><span class="annot"><span class="annottext">go :: [(a, b)] -&gt; [(a, t)] -&gt; Either a (Map a b)
</span><a href="#local-6989586621679926996"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679926995"><span class="annot"><span class="annottext">[(a, b)]
</span><a href="#local-6989586621679926995"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(a, b)]
</span><a href="#local-6989586621679926995"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-441"></span><span>        </span><span class="annot"><a href="#local-6989586621679926996"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679926993"><span class="annot"><span class="annottext">[(a, b)]
</span><a href="#local-6989586621679926993"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679926992"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926992"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679926991"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679926991"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679926990"><span class="annot"><span class="annottext">[(a, t)]
</span><a href="#local-6989586621679926990"><span class="hs-identifier hs-var">kvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-442"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">t -&gt; Either a b
</span><a href="#local-6989586621679926997"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679926991"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-443"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679926989"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926989"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926989"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-444"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679926988"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679926988"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(a, b)] -&gt; [(a, t)] -&gt; Either a (Map a b)
</span><a href="#local-6989586621679926996"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926992"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679926988"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(a, b)]
</span><a href="#local-6989586621679926993"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(a, t)]
</span><a href="#local-6989586621679926990"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-comment">-- | FIXME Add documentation to that.</span><span>
</span><span id="line-447"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-type">getPersistMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-448"></span><span id="getPersistMap"><span class="annot"><span class="annottext">getPersistMap :: PersistValue -&gt; Either Text [(Text, PersistValue)]
</span><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var hs-var">getPersistMap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistMap"><span class="hs-identifier hs-type">PersistMap</span></a></span><span> </span><span id="local-6989586621679926987"><span class="annot"><span class="annottext">[(Text, PersistValue)]
</span><a href="#local-6989586621679926987"><span class="hs-identifier hs-var">kvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">[(Text, PersistValue)]
</span><a href="#local-6989586621679926987"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-449"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var">getPersistMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistText"><span class="hs-identifier hs-type">PersistText</span></a></span><span> </span><span id="local-6989586621679926986"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926986"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PersistValue -&gt; Either Text [(Text, PersistValue)]
</span><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var">getPersistMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-var">PersistByteString</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926986"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var">getPersistMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679926985"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679926985"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679926984"><span class="annot"><span class="annottext">[(Text, PersistValue)]
</span><a href="#local-6989586621679926984"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">A.decode'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
</span><span class="hs-identifier hs-var">L.fromChunks</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679926985"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">[(Text, PersistValue)]
</span><a href="#local-6989586621679926984"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-452"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var">getPersistMap</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-453"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#getPersistMap"><span class="hs-identifier hs-var">getPersistMap</span></a></span><span> </span><span id="local-6989586621679926983"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926983"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;[(Text, PersistValue)]&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;map, string, bytestring or null&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926983"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-keyword">data</span><span> </span><span id="SomePersistField"><span class="annot"><a href="Database.Persist.Class.PersistField.html#SomePersistField"><span class="hs-identifier hs-var">SomePersistField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679926982"><span class="annot"><a href="#local-6989586621679926982"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679926982"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="SomePersistField"><span class="annot"><a href="Database.Persist.Class.PersistField.html#SomePersistField"><span class="hs-identifier hs-var">SomePersistField</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679926982"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-456"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#SomePersistField"><span class="hs-identifier hs-type">SomePersistField</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621679926977"><span class="annot"><span class="annottext">toPersistValue :: SomePersistField -&gt; PersistValue
</span><a href="#local-6989586621679926977"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Class.PersistField.html#SomePersistField"><span class="hs-identifier hs-type">SomePersistField</span></a></span><span> </span><span id="local-6989586621679926974"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926974"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; PersistValue
</span><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926974"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-458"></span><span>    </span><span id="local-6989586621679926970"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text SomePersistField
</span><a href="#local-6989586621679926970"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span id="local-6989586621679926969"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926969"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; a -&gt; SomePersistField
</span><a href="Database.Persist.Class.PersistField.html#SomePersistField"><span class="hs-identifier hs-var">SomePersistField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. PersistField a =&gt; PersistValue -&gt; Either Text a
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926969"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#PersistField"><span class="hs-identifier hs-type">PersistField</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#Checkmark"><span class="hs-identifier hs-type">Checkmark</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-461"></span><span>    </span><span id="local-6989586621679926965"><span class="annot"><span class="annottext">toPersistValue :: Checkmark -&gt; PersistValue
</span><a href="#local-6989586621679926965"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPersistValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">Checkmark
</span><a href="Database.Persist.Types.Base.html#Active"><span class="hs-identifier hs-var">Active</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistBool"><span class="hs-identifier hs-var">PersistBool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#toPersistValue"><span class="hs-identifier hs-var">toPersistValue</span></a></span><span> </span><span class="annot"><span class="annottext">Checkmark
</span><a href="Database.Persist.Types.Base.html#Inactive"><span class="hs-identifier hs-var">Inactive</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span>
</span><span id="line-463"></span><span>    </span><span id="local-6989586621679926941"><span class="annot"><span class="annottext">fromPersistValue :: PersistValue -&gt; Either Text Checkmark
</span><a href="#local-6989586621679926941"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPersistValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="Database.Persist.PersistValue.html#PersistNull"><span class="hs-identifier hs-var">PersistNull</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Checkmark
</span><a href="Database.Persist.Types.Base.html#Inactive"><span class="hs-identifier hs-var">Inactive</span></a></span><span>
</span><span id="line-464"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistBool"><span class="hs-identifier hs-type">PersistBool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Checkmark
</span><a href="Database.Persist.Types.Base.html#Active"><span class="hs-identifier hs-var">Active</span></a></span><span>
</span><span id="line-465"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistInt64"><span class="hs-identifier hs-type">PersistInt64</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Checkmark
</span><a href="Database.Persist.Types.Base.html#Active"><span class="hs-identifier hs-var">Active</span></a></span><span>
</span><span id="line-466"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistByteString"><span class="hs-identifier hs-type">PersistByteString</span></a></span><span> </span><span id="local-6989586621679926940"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679926940"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Int, ByteString)
</span><span class="hs-identifier hs-var">readInt</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679926940"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-467"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to parse Haskell type `Checkmark`: found `0`, expected `1` or NULL&quot;</span></span><span>
</span><span id="line-468"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Checkmark
</span><a href="Database.Persist.Types.Base.html#Active"><span class="hs-identifier hs-var">Active</span></a></span><span>
</span><span id="line-469"></span><span>                                               </span><span id="local-6989586621679926939"><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><a href="#local-6989586621679926939"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Failed to parse Haskell type `Checkmark` from PersistByteString. Original value:&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679926940"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;. Parsed by `readInt` as &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Int, ByteString)
</span><a href="#local-6989586621679926939"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;. Expected '1'.&quot;</span></span><span>
</span><span id="line-470"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistBool"><span class="hs-identifier hs-type">PersistBool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-471"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;PersistField Checkmark: found unexpected FALSE value&quot;</span></span><span>
</span><span id="line-472"></span><span>    </span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValue"><span class="hs-identifier hs-var">fromPersistValue</span></a></span><span> </span><span id="local-6989586621679926938"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926938"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-473"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var">fromPersistValueError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Checkmark&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;boolean, integer, bytestring or null&quot;</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926938"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-type">fromPersistValueError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Haskell type, should match Haskell name exactly, e.g. &quot;Int64&quot;</span><span>
</span><span id="line-477"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Database type(s), should appear different from Haskell name, e.g. &quot;integer&quot; or &quot;INT&quot;, not &quot;Int&quot;.</span><span>
</span><span id="line-478"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.PersistValue.html#PersistValue"><span class="hs-identifier hs-type">PersistValue</span></a></span><span> </span><span class="hs-comment">-- ^ Incorrect value</span><span>
</span><span id="line-479"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Error message</span><span>
</span><span id="line-480"></span><span id="fromPersistValueError"><span class="annot"><span class="annottext">fromPersistValueError :: Text -&gt; Text -&gt; PersistValue -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueError"><span class="hs-identifier hs-var hs-var">fromPersistValueError</span></a></span></span><span> </span><span id="local-6989586621679926937"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926937"><span class="hs-identifier hs-var">haskellType</span></a></span></span><span> </span><span id="local-6989586621679926936"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926936"><span class="hs-identifier hs-var">databaseType</span></a></span></span><span> </span><span id="local-6989586621679926935"><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926935"><span class="hs-identifier hs-var">received</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span>
</span><span id="line-481"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to parse Haskell type `&quot;</span></span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926937"><span class="hs-identifier hs-var">haskellType</span></a></span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;`; expected &quot;</span></span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926936"><span class="hs-identifier hs-var">databaseType</span></a></span><span>
</span><span id="line-485"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; from database, but received: &quot;</span></span><span>
</span><span id="line-486"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">PersistValue
</span><a href="#local-6989586621679926935"><span class="hs-identifier hs-var">received</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;. Potential solution: Check that your database schema matches your Persistent model definitions.&quot;</span></span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span id="local-6989586621679927937"><span class="annot"><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-type">fromPersistValueParseError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679927937"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span>                           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ Haskell type, should match Haskell name exactly, e.g. &quot;Int64&quot;</span><span>
</span><span id="line-492"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679927937"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- ^ Received value</span><span>
</span><span id="line-493"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span></span><span> </span><span class="hs-comment">-- ^ Error message</span><span>
</span><span id="line-494"></span><span id="fromPersistValueParseError"><span class="annot"><span class="annottext">fromPersistValueParseError :: forall a. Show a =&gt; Text -&gt; a -&gt; Text
</span><a href="Database.Persist.Class.PersistField.html#fromPersistValueParseError"><span class="hs-identifier hs-var hs-var">fromPersistValueParseError</span></a></span></span><span> </span><span id="local-6989586621679926930"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926930"><span class="hs-identifier hs-var">haskellType</span></a></span></span><span> </span><span id="local-6989586621679926929"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926929"><span class="hs-identifier hs-var">received</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Failed to parse Haskell type `&quot;</span></span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679926930"><span class="hs-identifier hs-var">haskellType</span></a></span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;`, but received &quot;</span></span><span>
</span><span id="line-498"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679926929"><span class="hs-identifier hs-var">received</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-500"></span></pre></body></html>