<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Database.Persist.SqlBackend.StatementCache</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">persistent-2.13.3.5: Type-safe, multi-backend data serialization.</span><ul class="links" id="page-menu"><li><a href="src/Database.Persist.SqlBackend.StatementCache.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.Persist.SqlBackend.StatementCache</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:StatementCache">StatementCache</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:StatementCacheKey">StatementCacheKey</a></li><li class="src short"><a href="#v:mkCacheKeyFromQuery">mkCacheKeyFromQuery</a> :: <a href="../text-1.2.5.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:MkStatementCache">MkStatementCache</a> = <a href="#v:MkStatementCache">MkStatementCache</a> {<ul class="subs"><li><a href="#v:statementCacheLookup">statementCacheLookup</a> :: <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Database-Persist-SqlBackend-Internal-Statement.html#t:Statement" title="Database.Persist.SqlBackend.Internal.Statement">Statement</a>)</li><li><a href="#v:statementCacheInsert">statementCacheInsert</a> :: <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a> -&gt; <a href="Database-Persist-SqlBackend-Internal-Statement.html#t:Statement" title="Database.Persist.SqlBackend.Internal.Statement">Statement</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li><a href="#v:statementCacheClear">statementCacheClear</a> :: <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li><a href="#v:statementCacheSize">statementCacheSize</a> :: <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul>}</li><li class="src short"><a href="#v:mkSimpleStatementCache">mkSimpleStatementCache</a> :: <a href="../base-4.16.4.0/Data-IORef.html#t:IORef" title="Data.IORef">IORef</a> (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="../text-1.2.5.0/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="Database-Persist-SqlBackend-Internal-Statement.html#t:Statement" title="Database.Persist.SqlBackend.Internal.Statement">Statement</a>) -&gt; <a href="Database-Persist-SqlBackend-StatementCache.html#t:MkStatementCache" title="Database.Persist.SqlBackend.StatementCache">MkStatementCache</a></li><li class="src short"><a href="#v:mkStatementCache">mkStatementCache</a> :: <a href="Database-Persist-SqlBackend-StatementCache.html#t:MkStatementCache" title="Database.Persist.SqlBackend.StatementCache">MkStatementCache</a> -&gt; <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCache" title="Database.Persist.SqlBackend.StatementCache">StatementCache</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StatementCache" class="def">StatementCache</a> <a href="src/Database.Persist.SqlBackend.Internal.StatementCache.html#StatementCache" class="link">Source</a> <a href="#t:StatementCache" class="selflink">#</a></p><div class="doc"><p>A statement cache used to lookup statements that have already been prepared
 for a given query.</p><p><em>Since: 2.13.3</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StatementCacheKey" class="def">StatementCacheKey</a> <a href="src/Database.Persist.SqlBackend.Internal.StatementCache.html#StatementCacheKey" class="link">Source</a> <a href="#t:StatementCacheKey" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkCacheKeyFromQuery" class="def">mkCacheKeyFromQuery</a> :: <a href="../text-1.2.5.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a> <a href="src/Database.Persist.SqlBackend.Internal.StatementCache.html#mkCacheKeyFromQuery" class="link">Source</a> <a href="#v:mkCacheKeyFromQuery" class="selflink">#</a></p><div class="doc"><p>Construct a <code><a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a></code> from a raw SQL query.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MkStatementCache" class="def">MkStatementCache</a> <a href="src/Database.Persist.SqlBackend.StatementCache.html#MkStatementCache" class="link">Source</a> <a href="#t:MkStatementCache" class="selflink">#</a></p><div class="doc"><p>Configuration parameters for creating a custom statement cache</p><p><em>Since: 2.13.3</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MkStatementCache" class="def">MkStatementCache</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:statementCacheLookup" class="def">statementCacheLookup</a> :: <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Database-Persist-SqlBackend-Internal-Statement.html#t:Statement" title="Database.Persist.SqlBackend.Internal.Statement">Statement</a>)</dfn><div class="doc"><p>Retrieve a statement from the cache, or return nothing if it is not found.</p><p><em>Since: 2.13.3</em></p></div></li><li><dfn class="src"><a id="v:statementCacheInsert" class="def">statementCacheInsert</a> :: <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCacheKey" title="Database.Persist.SqlBackend.StatementCache">StatementCacheKey</a> -&gt; <a href="Database-Persist-SqlBackend-Internal-Statement.html#t:Statement" title="Database.Persist.SqlBackend.Internal.Statement">Statement</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</dfn><div class="doc"><p>Put a new statement into the cache. An immediate lookup of
 the statement MUST return the inserted statement for the given
 cache key. Depending on the implementation, the statement cache MAY
 choose to evict other statements from the cache within this function.</p><p><em>Since: 2.13.3</em></p></div></li><li><dfn class="src"><a id="v:statementCacheClear" class="def">statementCacheClear</a> :: <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</dfn><div class="doc"><p>Remove all statements from the cache. Implementations of this
 should be sure to call <code><a href="Database-Persist-SqlBackend-Internal-Statement.html#v:stmtFinalize" title="Database.Persist.SqlBackend.Internal.Statement">stmtFinalize</a></code> on all statements removed
 from the cache.</p><p><em>Since: 2.13.3</em></p></div></li><li><dfn class="src"><a id="v:statementCacheSize" class="def">statementCacheSize</a> :: <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>Get the current size of the cache.</p><p><em>Since: 2.13.3</em></p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkSimpleStatementCache" class="def">mkSimpleStatementCache</a> :: <a href="../base-4.16.4.0/Data-IORef.html#t:IORef" title="Data.IORef">IORef</a> (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="../text-1.2.5.0/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="Database-Persist-SqlBackend-Internal-Statement.html#t:Statement" title="Database.Persist.SqlBackend.Internal.Statement">Statement</a>) -&gt; <a href="Database-Persist-SqlBackend-StatementCache.html#t:MkStatementCache" title="Database.Persist.SqlBackend.StatementCache">MkStatementCache</a> <a href="src/Database.Persist.SqlBackend.StatementCache.html#mkSimpleStatementCache" class="link">Source</a> <a href="#v:mkSimpleStatementCache" class="selflink">#</a></p><div class="doc"><p>Make a simple statement cache that will cache statements if they are not currently cached.</p><p><em>Since: 2.13.3</em></p></div></div><div class="top"><p class="src"><a id="v:mkStatementCache" class="def">mkStatementCache</a> :: <a href="Database-Persist-SqlBackend-StatementCache.html#t:MkStatementCache" title="Database.Persist.SqlBackend.StatementCache">MkStatementCache</a> -&gt; <a href="Database-Persist-SqlBackend-StatementCache.html#t:StatementCache" title="Database.Persist.SqlBackend.StatementCache">StatementCache</a> <a href="src/Database.Persist.SqlBackend.StatementCache.html#mkStatementCache" class="link">Source</a> <a href="#v:mkStatementCache" class="selflink">#</a></p><div class="doc"><p>Create a statement cache.</p><p><em>Since: 2.13.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>