<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- Copyright 2016 Google Inc. All Rights Reserved.</span><span>
</span><span id="line-2"></span><span class="hs-comment">--</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Use of this source code is governed by a BSD-style</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- license that can be found in the LICENSE file or at</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- https://developers.google.com/open-source/licenses/bsd</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="annot"><span class="hs-comment">-- | Functions for converting protocol buffers to a human-readable text format.</span></span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.ProtoLens.TextFormat</span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#showMessage"><span class="hs-identifier">showMessage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#showMessageWithRegistry"><span class="hs-identifier">showMessageWithRegistry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#showMessageShort"><span class="hs-identifier">showMessageShort</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintMessage"><span class="hs-identifier">pprintMessage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier">pprintMessageWithRegistry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#readMessage"><span class="hs-identifier">readMessage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#readMessageWithRegistry"><span class="hs-identifier">readMessageWithRegistry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#readMessageOrDie"><span class="hs-identifier">readMessageOrDie</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Family2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-operator">(.~)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">set</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">over</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">left</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isPrint</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isAscii</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">chr</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldlM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unpack</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Numeric</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">showOct</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.Parsec</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">parse</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.PrettyPrint</span></span><span class="hs-cpp">

#if MIN_VERSION_base(4,11,0)
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;&gt;)</span></span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.html"><span class="hs-identifier">Data.ProtoLens.Encoding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Encoding.html#decodeMessage"><span class="hs-identifier">decodeMessage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.html#encodeMessage"><span class="hs-identifier">encodeMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Bytes.html"><span class="hs-identifier">Data.ProtoLens.Encoding.Bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Encoding.Parser.html#runParser"><span class="hs-identifier">runParser</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html"><span class="hs-identifier">Data.ProtoLens.Encoding.Wire</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html"><span class="hs-identifier">Data.ProtoLens.Message</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#buildMessage"><span class="hs-identifier">buildMessage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#parseMessage"><span class="hs-identifier">parseMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html"><span class="hs-identifier">Data.ProtoLens.TextFormat.Parser</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Parser</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- TODO: This code is newer and missing some edge cases,</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- including:</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- - Serialize directly to Text</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- - String/bytestring serialization</span><span>
</span><span id="line-57"></span><span class="hs-comment">--   - Strings delimited by single quotes</span><span>
</span><span id="line-58"></span><span class="hs-comment">--   - Concatenate multiple strings one after another</span><span>
</span><span id="line-59"></span><span class="hs-comment">--   - control characters and non-UTF8 text</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   - characters in bytes fields should fit in Word8</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- - More output formats for floats like exponentials</span><span>
</span><span id="line-62"></span><span class="hs-comment">-- - Print/parse enums by textual name in addition to integer value</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- - More compact printing/parsing for packed fields</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- - Decide what to do for values that don't fit in the field (e.g., overflow)</span><span>
</span><span id="line-65"></span><span class="hs-comment">-- - Add more tests for:</span><span>
</span><span id="line-66"></span><span class="hs-comment">--   - edge cases of deserialization (&quot;deserializeFrom&quot;)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="annot"><span class="hs-comment">-- | Pretty-print the given message into a human-readable form.</span></span><span>
</span><span id="line-70"></span><span id="local-6989586621679077783"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintMessage"><span class="hs-identifier hs-type">pprintMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077783"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077783"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-71"></span><span id="pprintMessage"><span class="annot"><span class="annottext">pprintMessage :: forall msg. Message msg =&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessage"><span class="hs-identifier hs-var hs-var">pprintMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Registry -&gt; msg -&gt; Doc
forall msg. Message msg =&gt; Registry -&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-var">pprintMessageWithRegistry</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- | Pretty-print the given message into human-readable form, using the given</span><span>
</span><span id="line-74"></span><span class="hs-comment">-- 'Registry' to decode @google.protobuf.Any@ values.</span><span>
</span><span id="line-75"></span><span id="local-6989586621679077788"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-type">pprintMessageWithRegistry</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077788"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077788"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-76"></span><span id="pprintMessageWithRegistry"><span class="annot"><span class="annottext">pprintMessageWithRegistry :: forall msg. Message msg =&gt; Registry -&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-var hs-var">pprintMessageWithRegistry</span></a></span></span><span> </span><span id="local-6989586621679078054"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078054"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078055"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078055"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-comment">-- Either put all fields together on a single line, or use a separate line</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-comment">-- for each field.  We use a single &quot;sep&quot; for all fields (and all elements</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-comment">-- of all the repeated fields) to avoid putting some repeated fields on one</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-comment">-- line and other fields on multiple lines, which is less readable.</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldDescriptor msg -&gt; [Doc]) -&gt; [FieldDescriptor msg] -&gt; [Doc]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Registry -&gt; msg -&gt; FieldDescriptor msg -&gt; [Doc]
forall msg. Registry -&gt; msg -&gt; FieldDescriptor msg -&gt; [Doc]
</span><a href="Data.ProtoLens.TextFormat.html#pprintField"><span class="hs-identifier hs-var">pprintField</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078054"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078055"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldDescriptor msg]
forall msg. Message msg =&gt; [FieldDescriptor msg]
</span><a href="Data.ProtoLens.Message.html#allFields"><span class="hs-identifier hs-var">allFields</span></a></span><span>
</span><span id="line-82"></span><span>              </span><span class="annot"><span class="annottext">[Doc] -&gt; [Doc] -&gt; [Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(TaggedValue -&gt; Doc) -&gt; [TaggedValue] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TaggedValue -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintTaggedValue"><span class="hs-identifier hs-var">pprintTaggedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078055"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">msg
-&gt; FoldLike [TaggedValue] msg msg [TaggedValue] [TaggedValue]
-&gt; [TaggedValue]
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike [TaggedValue] msg msg [TaggedValue] [TaggedValue]
forall msg. Message msg =&gt; Lens' msg [TaggedValue]
Lens' msg [TaggedValue]
</span><a href="Data.ProtoLens.Message.html#unknownFields"><span class="hs-identifier hs-var">unknownFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="annot"><span class="hs-comment">-- | Convert the given message into a human-readable 'String'.</span></span><span>
</span><span id="line-85"></span><span id="local-6989586621679077813"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#showMessage"><span class="hs-identifier hs-type">showMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077813"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077813"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-86"></span><span id="showMessage"><span class="annot"><span class="annottext">showMessage :: forall msg. Message msg =&gt; msg -&gt; String
</span><a href="Data.ProtoLens.TextFormat.html#showMessage"><span class="hs-identifier hs-var hs-var">showMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; String
</span><span class="hs-identifier hs-var">render</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; String) -&gt; (msg -&gt; Doc) -&gt; msg -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">msg -&gt; Doc
forall msg. Message msg =&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessage"><span class="hs-identifier hs-var">pprintMessage</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Convert the given message into a human-readable 'String', using the</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- 'Registry' to encode @google.protobuf.Any@ values.</span><span>
</span><span id="line-90"></span><span id="local-6989586621679077818"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#showMessageWithRegistry"><span class="hs-identifier hs-type">showMessageWithRegistry</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077818"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077818"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-91"></span><span id="showMessageWithRegistry"><span class="annot"><span class="annottext">showMessageWithRegistry :: forall msg. Message msg =&gt; Registry -&gt; msg -&gt; String
</span><a href="Data.ProtoLens.TextFormat.html#showMessageWithRegistry"><span class="hs-identifier hs-var hs-var">showMessageWithRegistry</span></a></span></span><span> </span><span id="local-6989586621679078068"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078068"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; String
</span><span class="hs-identifier hs-var">render</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; String) -&gt; (msg -&gt; Doc) -&gt; msg -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Registry -&gt; msg -&gt; Doc
forall msg. Message msg =&gt; Registry -&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-var">pprintMessageWithRegistry</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078068"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | Serializes a proto as a string on a single line.  Useful for debugging</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- and error messages like @.DebugString()@ in other languages.</span><span>
</span><span id="line-95"></span><span id="local-6989586621679078069"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#showMessageShort"><span class="hs-identifier hs-type">showMessageShort</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679078069"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679078069"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-96"></span><span id="showMessageShort"><span class="annot"><span class="annottext">showMessageShort :: forall msg. Message msg =&gt; msg -&gt; String
</span><a href="Data.ProtoLens.TextFormat.html#showMessageShort"><span class="hs-identifier hs-var hs-var">showMessageShort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Style -&gt; Doc -&gt; String
</span><span class="hs-identifier hs-var">renderStyle</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mode -&gt; Int -&gt; Float -&gt; Style
</span><span class="hs-identifier hs-var">Style</span></span><span> </span><span class="annot"><span class="annottext">Mode
</span><span class="hs-identifier hs-var">OneLineMode</span></span><span> </span><span class="annot"><span class="annottext">Int
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span> </span><span class="annot"><span class="annottext">Float
</span><span class="hs-number">1.5</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; String) -&gt; (msg -&gt; Doc) -&gt; msg -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">msg -&gt; Doc
forall msg. Message msg =&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessage"><span class="hs-identifier hs-var">pprintMessage</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span id="local-6989586621679077801"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintField"><span class="hs-identifier hs-type">pprintField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077801"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077801"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-99"></span><span id="pprintField"><span class="annot"><span class="annottext">pprintField :: forall msg. Registry -&gt; msg -&gt; FieldDescriptor msg -&gt; [Doc]
</span><a href="Data.ProtoLens.TextFormat.html#pprintField"><span class="hs-identifier hs-var hs-var">pprintField</span></a></span></span><span> </span><span id="local-6989586621679078078"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078078"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078079"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078079"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span id="local-6989586621679078084"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078084"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679078085"><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><a href="#local-6989586621679078085"><span class="hs-identifier hs-var">typeDescr</span></a></span></span><span> </span><span id="local-6989586621679078086"><span class="annot"><span class="annottext">FieldAccessor msg value
</span><a href="#local-6989586621679078086"><span class="hs-identifier hs-var">accessor</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(value -&gt; Doc) -&gt; [value] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Registry -&gt; String -&gt; FieldTypeDescriptor value -&gt; value -&gt; Doc
forall value.
Registry -&gt; String -&gt; FieldTypeDescriptor value -&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintFieldValue"><span class="hs-identifier hs-var">pprintFieldValue</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078078"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078084"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><a href="#local-6989586621679078085"><span class="hs-identifier hs-var">typeDescr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([value] -&gt; [Doc]) -&gt; [value] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FieldAccessor msg value
</span><a href="#local-6989586621679078086"><span class="hs-identifier hs-var">accessor</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><a href="Data.ProtoLens.Message.html#PlainField"><span class="hs-identifier hs-type">PlainField</span></a></span><span> </span><span id="local-6989586621679078089"><span class="annot"><span class="annottext">WireDefault value
</span><a href="#local-6989586621679078089"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679078090"><span class="annot"><span class="annottext">Lens' msg value
</span><a href="#local-6989586621679078090"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-102"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WireDefault value
</span><a href="Data.ProtoLens.Message.html#Optional"><span class="hs-identifier hs-var">Optional</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WireDefault value
</span><a href="#local-6989586621679078089"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078096"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">value -&gt; value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">value
forall value. FieldDefault value =&gt; value
</span><a href="Data.ProtoLens.Message.html#fieldDefault"><span class="hs-identifier hs-var">fieldDefault</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-103"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078096"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-104"></span><span>          </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679078096"><span class="annot"><span class="annottext">val :: value
</span><a href="#local-6989586621679078096"><span class="hs-identifier hs-var hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078079"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">msg -&gt; FoldLike value msg msg value value -&gt; value
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike value msg msg value value
Lens' msg value
</span><a href="#local-6989586621679078090"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><a href="Data.ProtoLens.Message.html#OptionalField"><span class="hs-identifier hs-type">OptionalField</span></a></span><span> </span><span id="local-6989586621679078099"><span class="annot"><span class="annottext">Lens' msg (Maybe value)
</span><a href="#local-6989586621679078099"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe value] -&gt; [value]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078079"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">msg
-&gt; FoldLike (Maybe value) msg msg (Maybe value) (Maybe value)
-&gt; Maybe value
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike (Maybe value) msg msg (Maybe value) (Maybe value)
Lens' msg (Maybe value)
</span><a href="#local-6989586621679078099"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-comment">-- TODO: better printing for packed fields</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="Data.ProtoLens.Message.html#RepeatedField"><span class="hs-identifier hs-type">RepeatedField</span></a></span><span> </span><span class="annot"><span class="annottext">Packing
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679078101"><span class="annot"><span class="annottext">Lens' msg [value]
</span><a href="#local-6989586621679078101"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078079"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">msg -&gt; FoldLike [value] msg msg [value] [value] -&gt; [value]
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike [value] msg msg [value] [value]
Lens' msg [value]
</span><a href="#local-6989586621679078101"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-108"></span><span>        </span><span class="annot"><a href="Data.ProtoLens.Message.html#MapField"><span class="hs-identifier hs-type">MapField</span></a></span><span> </span><span id="local-6989586621679078109"><span class="annot"><span class="annottext">Lens' value key
</span><a href="#local-6989586621679078109"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679078110"><span class="annot"><span class="annottext">Lens' value value1
</span><a href="#local-6989586621679078110"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679078111"><span class="annot"><span class="annottext">Lens' msg (Map key value1)
</span><a href="#local-6989586621679078111"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(key, value1) -&gt; value
</span><a href="#local-6989586621679078112"><span class="hs-identifier hs-var">pairToMsg</span></a></span><span> </span><span class="annot"><span class="annottext">((key, value1) -&gt; value) -&gt; [(key, value1)] -&gt; [value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map key value1 -&gt; [(key, value1)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.assocs</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078079"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">msg
-&gt; FoldLike
     (Map key value1) msg msg (Map key value1) (Map key value1)
-&gt; Map key value1
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike (Map key value1) msg msg (Map key value1) (Map key value1)
Lens' msg (Map key value1)
</span><a href="#local-6989586621679078111"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>          </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679078112"><span class="annot"><span class="annottext">pairToMsg :: (key, value1) -&gt; value
</span><a href="#local-6989586621679078112"><span class="hs-identifier hs-var hs-var">pairToMsg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679078115"><span class="annot"><span class="annottext">key
</span><a href="#local-6989586621679078115"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679078116"><span class="annot"><span class="annottext">value1
</span><a href="#local-6989586621679078116"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value
forall msg. Message msg =&gt; msg
</span><a href="Data.ProtoLens.Message.html#defMessage"><span class="hs-identifier hs-var">defMessage</span></a></span><span>
</span><span id="line-110"></span><span>                                    </span><span class="annot"><span class="annottext">value -&gt; (value -&gt; value) -&gt; value
forall s t. s -&gt; (s -&gt; t) -&gt; t
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f value key
Lens' value key
forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value key
</span><a href="#local-6989586621679078109"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value key)
-&gt; key -&gt; value -&gt; value
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">key
</span><a href="#local-6989586621679078115"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-111"></span><span>                                    </span><span class="annot"><span class="annottext">value -&gt; (value -&gt; value) -&gt; value
forall s t. s -&gt; (s -&gt; t) -&gt; t
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f value value1
Lens' value value1
forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value value1
</span><a href="#local-6989586621679078110"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value value1)
-&gt; value1 -&gt; value -&gt; value
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">value1
</span><a href="#local-6989586621679078116"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span id="local-6989586621679077828"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintFieldValue"><span class="hs-identifier hs-type">pprintFieldValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077828"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077828"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-114"></span><span id="pprintFieldValue"><span class="annot"><span class="annottext">pprintFieldValue :: forall value.
Registry -&gt; String -&gt; FieldTypeDescriptor value -&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintFieldValue"><span class="hs-identifier hs-var hs-var">pprintFieldValue</span></a></span></span><span> </span><span id="local-6989586621679078128"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078128"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078129"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078129"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679078130"><span class="annot"><span class="annottext">field :: FieldTypeDescriptor value
</span><a href="#local-6989586621679078130"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-type">MessageField</span></a></span><span> </span><span class="annot"><span class="annottext">MessageOrGroup
</span><a href="Data.ProtoLens.Message.html#MessageType"><span class="hs-identifier hs-var">MessageType</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078137"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078137"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier hs-type">AnyMessageDescriptor</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679078139"><span class="annot"><span class="annottext">Lens' value Text
anyTypeUrlLens :: Lens' value Text
anyTypeUrlLens :: forall msg. AnyMessageDescriptor msg -&gt; Lens' msg Text
</span><a href="#local-6989586621679078139"><span class="hs-identifier hs-var hs-var">anyTypeUrlLens</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679078141"><span class="annot"><span class="annottext">Lens' value ByteString
anyValueLens :: Lens' value ByteString
anyValueLens :: forall msg. AnyMessageDescriptor msg -&gt; Lens' msg ByteString
</span><a href="#local-6989586621679078141"><span class="hs-identifier hs-var hs-var">anyValueLens</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value -&gt; Maybe (AnyMessageDescriptor value)
forall value.
FieldTypeDescriptor value -&gt; Maybe (AnyMessageDescriptor value)
</span><a href="Data.ProtoLens.Message.html#matchAnyMessage"><span class="hs-identifier hs-var">matchAnyMessage</span></a></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><a href="#local-6989586621679078130"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span id="local-6989586621679078144"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078144"><span class="hs-identifier hs-var">typeUri</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FoldLike Text value value Text Text -&gt; value -&gt; Text
forall a s t b. FoldLike a s t a b -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">FoldLike Text value value Text Text
Lens' value Text
</span><a href="#local-6989586621679078139"><span class="hs-identifier hs-var">anyTypeUrlLens</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078137"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>    </span><span id="local-6989586621679078145"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078145"><span class="hs-identifier hs-var">fieldData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FoldLike ByteString value value ByteString ByteString
-&gt; value -&gt; ByteString
forall a s t b. FoldLike a s t a b -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">FoldLike ByteString value value ByteString ByteString
Lens' value ByteString
</span><a href="#local-6989586621679078141"><span class="hs-identifier hs-var">anyValueLens</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078137"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-type">SomeMessageType</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679078150"><span class="annot"><span class="annottext">Proxy msg
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679078150"><span class="hs-identifier hs-type">value'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Registry -&gt; Maybe SomeMessageType
</span><a href="Data.ProtoLens.Message.html#lookupRegistered"><span class="hs-identifier hs-var">lookupRegistered</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078144"><span class="hs-identifier hs-var">typeUri</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078128"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679078152"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078152"><span class="hs-identifier hs-var">anyValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679078150"><span class="hs-identifier hs-type">value'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String msg
forall msg. Message msg =&gt; ByteString -&gt; Either String msg
</span><a href="Data.ProtoLens.Encoding.html#decodeMessage"><span class="hs-identifier hs-var">decodeMessage</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078145"><span class="hs-identifier hs-var">fieldData</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintSubmessage"><span class="hs-identifier hs-var">pprintSubmessage</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078129"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-121"></span><span>          </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span>
</span><span id="line-122"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">lbrack</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078144"><span class="hs-identifier hs-var">typeUri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">rbrack</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">lbrace</span></span><span>
</span><span id="line-123"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">nest</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Registry -&gt; msg -&gt; Doc
forall msg. Message msg =&gt; Registry -&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-var">pprintMessageWithRegistry</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078128"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078152"><span class="hs-identifier hs-var">anyValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">rbrace</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintSubmessage"><span class="hs-identifier hs-var">pprintSubmessage</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078129"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Registry -&gt; value -&gt; Doc
forall msg. Message msg =&gt; Registry -&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-var">pprintMessageWithRegistry</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078128"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078137"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintFieldValue"><span class="hs-identifier hs-var">pprintFieldValue</span></a></span><span> </span><span id="local-6989586621679078162"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078162"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078163"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078163"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-type">MessageField</span></a></span><span> </span><span class="annot"><span class="annottext">MessageOrGroup
</span><a href="Data.ProtoLens.Message.html#GroupType"><span class="hs-identifier hs-var">GroupType</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078167"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078167"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintSubmessage"><span class="hs-identifier hs-var">pprintSubmessage</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078163"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Registry -&gt; value -&gt; Doc
forall msg. Message msg =&gt; Registry -&gt; msg -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintMessageWithRegistry"><span class="hs-identifier hs-var">pprintMessageWithRegistry</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078162"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078167"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintFieldValue"><span class="hs-identifier hs-var">pprintFieldValue</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679078168"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078168"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span id="local-6989586621679078170"><span class="annot"><span class="annottext">ScalarField value
</span><a href="#local-6989586621679078170"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078171"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078171"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078168"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarField value -&gt; value -&gt; Doc
forall value. ScalarField value -&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="#local-6989586621679078170"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078171"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-type">named</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span>
</span><span id="line-132"></span><span id="named"><span class="annot"><span class="annottext">named :: String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var hs-var">named</span></a></span></span><span> </span><span id="local-6989586621679078174"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078174"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679078175"><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621679078175"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078174"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621679078175"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621679077874"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-type">pprintScalarValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077874"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077874"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-136"></span><span id="pprintScalarValue"><span class="annot"><span class="annottext">pprintScalarValue :: forall value. ScalarField value -&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var hs-var">pprintScalarValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#EnumField"><span class="hs-identifier hs-var">EnumField</span></a></span><span> </span><span id="local-6989586621679078180"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078180"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value -&gt; String
forall a. MessageEnum a =&gt; a -&gt; String
</span><a href="Data.ProtoLens.Message.html#showEnum"><span class="hs-identifier hs-var">showEnum</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078180"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Int32Field"><span class="hs-identifier hs-var">Int32Field</span></a></span><span> </span><span id="local-6989586621679078187"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078187"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078187"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-138"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Int64Field"><span class="hs-identifier hs-var">Int64Field</span></a></span><span> </span><span id="local-6989586621679078194"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078194"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078194"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-139"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#UInt32Field"><span class="hs-identifier hs-var">UInt32Field</span></a></span><span> </span><span id="local-6989586621679078198"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078198"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078198"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-140"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#UInt64Field"><span class="hs-identifier hs-var">UInt64Field</span></a></span><span> </span><span id="local-6989586621679078202"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078202"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078202"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-141"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SInt32Field"><span class="hs-identifier hs-var">SInt32Field</span></a></span><span> </span><span id="local-6989586621679078207"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078207"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078207"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-142"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SInt64Field"><span class="hs-identifier hs-var">SInt64Field</span></a></span><span> </span><span id="local-6989586621679078212"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078212"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078212"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-143"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Fixed32Field"><span class="hs-identifier hs-var">Fixed32Field</span></a></span><span> </span><span id="local-6989586621679078216"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078216"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078216"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-144"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Fixed64Field"><span class="hs-identifier hs-var">Fixed64Field</span></a></span><span> </span><span id="local-6989586621679078220"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078220"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078220"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-145"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SFixed32Field"><span class="hs-identifier hs-var">SFixed32Field</span></a></span><span> </span><span id="local-6989586621679078225"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078225"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078225"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-146"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SFixed64Field"><span class="hs-identifier hs-var">SFixed64Field</span></a></span><span> </span><span id="local-6989586621679078230"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078230"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078230"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-147"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#FloatField"><span class="hs-identifier hs-var">FloatField</span></a></span><span> </span><span id="local-6989586621679078236"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078236"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078236"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-148"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#DoubleField"><span class="hs-identifier hs-var">DoubleField</span></a></span><span> </span><span id="local-6989586621679078242"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078242"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078242"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-149"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#BoolField"><span class="hs-identifier hs-var">BoolField</span></a></span><span> </span><span id="local-6989586621679078245"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078245"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#boolValue"><span class="hs-identifier hs-var">boolValue</span></a></span><span> </span><span class="annot"><span class="annottext">value
Bool
</span><a href="#local-6989586621679078245"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-150"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#StringField"><span class="hs-identifier hs-var">StringField</span></a></span><span> </span><span id="local-6989586621679078249"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078249"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintByteString"><span class="hs-identifier hs-var">pprintByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">Text.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">value
Text
</span><a href="#local-6989586621679078249"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintScalarValue"><span class="hs-identifier hs-var">pprintScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#BytesField"><span class="hs-identifier hs-var">BytesField</span></a></span><span> </span><span id="local-6989586621679078254"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078254"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintByteString"><span class="hs-identifier hs-var">pprintByteString</span></a></span><span> </span><span class="annot"><span class="annottext">value
ByteString
</span><a href="#local-6989586621679078254"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintSubmessage"><span class="hs-identifier hs-type">pprintSubmessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span>
</span><span id="line-154"></span><span id="pprintSubmessage"><span class="annot"><span class="annottext">pprintSubmessage :: String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintSubmessage"><span class="hs-identifier hs-var hs-var">pprintSubmessage</span></a></span></span><span> </span><span id="local-6989586621679078255"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078255"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679078256"><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621679078256"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078255"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">lbrace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">nest</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621679078256"><span class="hs-identifier hs-var">contents</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">rbrace</span></span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- | Formats a string in a way that mostly matches the C-compatible escaping</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- used by the Protocol Buffer distribution.  We depart a bit by escaping all</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- non-ASCII characters, which depending on the locale, the distribution might</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- not do.</span><span>
</span><span id="line-161"></span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- This uses three-digit octal escapes, e.g. &quot;\011&quot; plus \n, \r,, \t, \', \&quot;,</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- and \\ only.  Note that Haskell string-literal syntax calls for &quot;\011&quot; to be</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- interpreted as decimal 11, rather than the decimal 9 it actually represent,</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- so you can't use Prelude.read to parse the strings created here.</span><span>
</span><span id="line-166"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintByteString"><span class="hs-identifier hs-type">pprintByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data.ByteString.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span>
</span><span id="line-167"></span><span id="pprintByteString"><span class="annot"><span class="annottext">pprintByteString :: ByteString -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintByteString"><span class="hs-identifier hs-var hs-var">pprintByteString</span></a></span></span><span> </span><span id="local-6989586621679078257"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078257"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\&quot;'</span></span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word8 -&gt; String) -&gt; [Word8] -&gt; String
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; String
forall {a}. Integral a =&gt; a -&gt; String
</span><a href="#local-6989586621679078259"><span class="hs-identifier hs-var">escape</span></a></span><span> </span><span class="annot"><span class="annottext">([Word8] -&gt; String) -&gt; [Word8] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Word8]
</span><span class="hs-identifier hs-var">Data.ByteString.unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078257"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Doc
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\&quot;'</span></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679078259"><span class="annot"><span class="annottext">escape :: a -&gt; String
</span><a href="#local-6989586621679078259"><span class="hs-identifier hs-var hs-var">escape</span></a></span></span><span> </span><span id="local-6989586621679078288"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679078288"><span class="hs-identifier hs-var">w8</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\n&quot;</span></span><span>
</span><span id="line-170"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\r'</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\r&quot;</span></span><span>
</span><span id="line-171"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\t'</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\t&quot;</span></span><span>
</span><span id="line-172"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\&quot;'</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\\&quot;&quot;</span></span><span>
</span><span id="line-173"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\\'&quot;</span></span><span>
</span><span id="line-174"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\\\&quot;</span></span><span>
</span><span id="line-175"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isPrint</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isAscii</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-176"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621679078291"><span class="hs-identifier hs-var">pad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; String -&gt; String
forall a. Integral a =&gt; a -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showOct</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679078288"><span class="hs-identifier hs-var">w8</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-178"></span><span>            </span><span id="local-6989586621679078289"><span class="annot"><span class="annottext">ch :: Char
</span><a href="#local-6989586621679078289"><span class="hs-identifier hs-var hs-var">ch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char
</span><span class="hs-identifier hs-var">chr</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Char) -&gt; Int -&gt; Char
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679078288"><span class="hs-identifier hs-var">w8</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span id="local-6989586621679078291"><span class="annot"><span class="annottext">pad :: String -&gt; String
</span><a href="#local-6989586621679078291"><span class="hs-identifier hs-var hs-var">pad</span></a></span></span><span> </span><span id="local-6989586621679078295"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078295"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; String
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078295"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'0'</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078295"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span id="local-6989586621679077878"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-type">primField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679077878"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077878"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-182"></span><span id="primField"><span class="annot"><span class="annottext">primField :: forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var hs-var">primField</span></a></span></span><span> </span><span id="local-6989586621679078300"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078300"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078300"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#boolValue"><span class="hs-identifier hs-type">boolValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span>
</span><span id="line-185"></span><span id="boolValue"><span class="annot"><span class="annottext">boolValue :: Bool -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#boolValue"><span class="hs-identifier hs-var hs-var">boolValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;true&quot;</span></span><span>
</span><span id="line-186"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#boolValue"><span class="hs-identifier hs-var">boolValue</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;false&quot;</span></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#pprintTaggedValue"><span class="hs-identifier hs-type">pprintTaggedValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#TaggedValue"><span class="hs-identifier hs-type">TaggedValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span>
</span><span id="line-189"></span><span id="pprintTaggedValue"><span class="annot"><span class="annottext">pprintTaggedValue :: TaggedValue -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintTaggedValue"><span class="hs-identifier hs-var hs-var">pprintTaggedValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#TaggedValue"><span class="hs-identifier hs-type">TaggedValue</span></a></span><span> </span><span id="local-6989586621679078303"><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679078303"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679078304"><span class="annot"><span class="annottext">WireValue
</span><a href="#local-6989586621679078304"><span class="hs-identifier hs-var">wv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WireValue
</span><a href="#local-6989586621679078304"><span class="hs-identifier hs-var">wv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#VarInt"><span class="hs-identifier hs-type">VarInt</span></a></span><span> </span><span id="local-6989586621679078306"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679078306"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679078306"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#Fixed64"><span class="hs-identifier hs-type">Fixed64</span></a></span><span> </span><span id="local-6989586621679078309"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679078309"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679078309"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#Fixed32"><span class="hs-identifier hs-type">Fixed32</span></a></span><span> </span><span id="local-6989586621679078311"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679078311"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Doc
forall value. Show value =&gt; value -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#primField"><span class="hs-identifier hs-var">primField</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621679078311"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#Lengthy"><span class="hs-identifier hs-type">Lengthy</span></a></span><span> </span><span id="local-6989586621679078313"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078313"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Parser [TaggedValue] -&gt; ByteString -&gt; Either String [TaggedValue]
forall a. Parser a -&gt; ByteString -&gt; Either String a
</span><a href="Data.ProtoLens.Encoding.Parser.html#runParser"><span class="hs-identifier hs-var">runParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser [TaggedValue]
</span><a href="Data.ProtoLens.Encoding.Wire.html#parseFieldSet"><span class="hs-identifier hs-var">parseFieldSet</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078313"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-194"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintByteString"><span class="hs-identifier hs-var">pprintByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078313"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-195"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679078315"><span class="annot"><span class="annottext">[TaggedValue]
</span><a href="#local-6989586621679078315"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintSubmessage"><span class="hs-identifier hs-var">pprintSubmessage</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-196"></span><span>                                </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TaggedValue -&gt; Doc) -&gt; [TaggedValue] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TaggedValue -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#pprintTaggedValue"><span class="hs-identifier hs-var">pprintTaggedValue</span></a></span><span> </span><span class="annot"><span class="annottext">[TaggedValue]
</span><a href="#local-6989586621679078315"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-comment">-- TODO: implement better printing for unknown groups</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="annottext">WireValue
</span><a href="Data.ProtoLens.Encoding.Wire.html#StartGroup"><span class="hs-identifier hs-var">StartGroup</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;start_group&quot;</span></span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="annottext">WireValue
</span><a href="Data.ProtoLens.Encoding.Wire.html#EndGroup"><span class="hs-identifier hs-var">EndGroup</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc -&gt; Doc
</span><a href="Data.ProtoLens.TextFormat.html#named"><span class="hs-identifier hs-var">named</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;end_group&quot;</span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621679078307"><span class="annot"><span class="annottext">name :: String
</span><a href="#local-6989586621679078307"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; Int
</span><a href="Data.ProtoLens.Encoding.Wire.html#unTag"><span class="hs-identifier hs-var">unTag</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679078303"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- Parsing</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="annot"><span class="hs-comment">-- | Parse a 'Message' from the human-readable protocol buffer text format.</span></span><span>
</span><span id="line-208"></span><span id="local-6989586621679077896"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#readMessage"><span class="hs-identifier hs-type">readMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077896"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077896"><span class="hs-identifier hs-type">msg</span></a></span></span><span>
</span><span id="line-209"></span><span id="readMessage"><span class="annot"><span class="annottext">readMessage :: forall msg. Message msg =&gt; Text -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#readMessage"><span class="hs-identifier hs-var hs-var">readMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Registry -&gt; Text -&gt; Either String msg
forall msg. Message msg =&gt; Registry -&gt; Text -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#readMessageWithRegistry"><span class="hs-identifier hs-var">readMessageWithRegistry</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-comment">-- | Parse a 'Message' from the human-readable protocol buffer text format.</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- Throws an error if the parse was not successful.</span><span>
</span><span id="line-213"></span><span id="local-6989586621679077900"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#readMessageOrDie"><span class="hs-identifier hs-type">readMessageOrDie</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077900"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077900"><span class="hs-identifier hs-type">msg</span></a></span></span><span>
</span><span id="line-214"></span><span id="readMessageOrDie"><span class="annot"><span class="annottext">readMessageOrDie :: forall msg. Message msg =&gt; Text -&gt; msg
</span><a href="Data.ProtoLens.TextFormat.html#readMessageOrDie"><span class="hs-identifier hs-var hs-var">readMessageOrDie</span></a></span></span><span> </span><span id="local-6989586621679078326"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078326"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either String msg
forall msg. Message msg =&gt; Text -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#readMessage"><span class="hs-identifier hs-var">readMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078326"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679078327"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078327"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; msg
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; msg) -&gt; String -&gt; msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;readMessageOrDie: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078327"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679078329"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078329"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078329"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-comment">-- | Parse a 'Message' from a human-readable protocol buffer text format, using</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- the given 'Registry' to decode 'Any' fields</span><span>
</span><span id="line-220"></span><span id="local-6989586621679077899"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#readMessageWithRegistry"><span class="hs-identifier hs-type">readMessageWithRegistry</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077899"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077899"><span class="hs-identifier hs-type">msg</span></a></span></span><span>
</span><span id="line-221"></span><span id="readMessageWithRegistry"><span class="annot"><span class="annottext">readMessageWithRegistry :: forall msg. Message msg =&gt; Registry -&gt; Text -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#readMessageWithRegistry"><span class="hs-identifier hs-var hs-var">readMessageWithRegistry</span></a></span></span><span> </span><span id="local-6989586621679078342"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078342"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078343"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078343"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ParseError -&gt; String)
-&gt; Either ParseError [Field] -&gt; Either String [Field]
forall b c d. (b -&gt; c) -&gt; Either b d -&gt; Either c d
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><span class="hs-identifier hs-var">left</span></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parsec Text () [Field]
-&gt; String -&gt; Text -&gt; Either ParseError [Field]
forall s t a.
Stream s Identity t =&gt;
Parsec s () a -&gt; String -&gt; s -&gt; Either ParseError a
</span><span class="hs-identifier hs-var">parse</span></span><span> </span><span class="annot"><span class="annottext">Parsec Text () [Field]
</span><a href="Data.ProtoLens.TextFormat.Parser.html#parser"><span class="hs-identifier hs-var">Parser.parser</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078343"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Either String [Field]
-&gt; ([Field] -&gt; Either String msg) -&gt; Either String msg
forall a b.
Either String a -&gt; (a -&gt; Either String b) -&gt; Either String b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Registry -&gt; [Field] -&gt; Either String msg
forall msg. Message msg =&gt; Registry -&gt; [Field] -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#buildMessage"><span class="hs-identifier hs-var">buildMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078342"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#buildMessage"><span class="hs-identifier hs-type">buildMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679077924"><span class="annot"><a href="#local-6989586621679077924"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077924"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Message"><span class="hs-identifier hs-type">Parser.Message</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077924"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-224"></span><span id="buildMessage"><span class="annot"><span class="annottext">buildMessage :: forall msg. Message msg =&gt; Registry -&gt; [Field] -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#buildMessage"><span class="hs-identifier hs-var hs-var">buildMessage</span></a></span></span><span> </span><span id="local-6989586621679078360"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078360"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078361"><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078361"><span class="hs-identifier hs-var">fields</span></a></span></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679078362"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679078362"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Proxy msg -&gt; [Field] -&gt; [String]
forall msg. Message msg =&gt; Proxy msg -&gt; [Field] -&gt; [String]
</span><a href="Data.ProtoLens.TextFormat.html#missingFields"><span class="hs-identifier hs-var">missingFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679077924"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078361"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679078362"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-226"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String msg
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String msg) -&gt; String -&gt; Either String msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Missing fields &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679078362"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Tag (FieldDescriptor msg) -&gt; msg -&gt; msg
forall k msg. Map k (FieldDescriptor msg) -&gt; msg -&gt; msg
</span><a href="Data.ProtoLens.Message.html#reverseRepeatedFields"><span class="hs-identifier hs-var">reverseRepeatedFields</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (FieldDescriptor msg)
forall msg. Message msg =&gt; Map Tag (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-var">fieldsByTag</span></a></span><span>
</span><span id="line-228"></span><span>                      </span><span class="annot"><span class="annottext">(msg -&gt; msg) -&gt; Either String msg -&gt; Either String msg
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Registry -&gt; msg -&gt; [Field] -&gt; Either String msg
forall msg.
Message msg =&gt;
Registry -&gt; msg -&gt; [Field] -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#buildMessageFromDescriptor"><span class="hs-identifier hs-var">buildMessageFromDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078360"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">msg
forall msg. Message msg =&gt; msg
</span><a href="Data.ProtoLens.Message.html#defMessage"><span class="hs-identifier hs-var">defMessage</span></a></span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078361"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#missingFields"><span class="hs-identifier hs-type">missingFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679077928"><span class="annot"><a href="#local-6989586621679077928"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077928"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679077928"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Message"><span class="hs-identifier hs-type">Parser.Message</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span id="missingFields"><span class="annot"><span class="annottext">missingFields :: forall msg. Message msg =&gt; Proxy msg -&gt; [Field] -&gt; [String]
</span><a href="Data.ProtoLens.TextFormat.html#missingFields"><span class="hs-identifier hs-var hs-var">missingFields</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy msg
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set String -&gt; [String]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set String -&gt; [String])
-&gt; ([Field] -&gt; Set String) -&gt; [Field] -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set String -&gt; Field -&gt; Set String)
-&gt; Set String -&gt; [Field] -&gt; Set String
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set String -&gt; Field -&gt; Set String
</span><a href="#local-6989586621679078385"><span class="hs-identifier hs-var">deleteField</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078386"><span class="hs-identifier hs-var">requiredFieldNames</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="#local-6989586621679078386"><span class="hs-identifier hs-type">requiredFieldNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621679078386"><span class="annot"><span class="annottext">requiredFieldNames :: Set String
</span><a href="#local-6989586621679078386"><span class="hs-identifier hs-var hs-var">requiredFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Set String
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; Set String) -&gt; [String] -&gt; Set String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map String (FieldDescriptor msg) -&gt; [String]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span>
</span><span id="line-235"></span><span>                            </span><span class="annot"><span class="annottext">(Map String (FieldDescriptor msg) -&gt; [String])
-&gt; Map String (FieldDescriptor msg) -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldDescriptor msg -&gt; Bool)
-&gt; Map String (FieldDescriptor msg)
-&gt; Map String (FieldDescriptor msg)
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.filter</span></span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg -&gt; Bool
forall msg. FieldDescriptor msg -&gt; Bool
</span><a href="Data.ProtoLens.Message.html#isRequired"><span class="hs-identifier hs-var">isRequired</span></a></span><span>
</span><span id="line-236"></span><span>                            </span><span class="annot"><span class="annottext">(Map String (FieldDescriptor msg)
 -&gt; Map String (FieldDescriptor msg))
-&gt; Map String (FieldDescriptor msg)
-&gt; Map String (FieldDescriptor msg)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Map String (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTextFormatName"><span class="hs-identifier hs-var">fieldsByTextFormatName</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679077928"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><a href="#local-6989586621679078385"><span class="hs-identifier hs-type">deleteField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Field"><span class="hs-identifier hs-type">Parser.Field</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621679078385"><span class="annot"><span class="annottext">deleteField :: Set String -&gt; Field -&gt; Set String
</span><a href="#local-6989586621679078385"><span class="hs-identifier hs-var hs-var">deleteField</span></a></span></span><span> </span><span id="local-6989586621679078392"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078392"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Field"><span class="hs-identifier hs-type">Parser.Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Key"><span class="hs-identifier hs-type">Parser.Key</span></a></span><span> </span><span id="local-6989586621679078395"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078395"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Set String -&gt; Set String
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.delete</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078395"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078392"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="#local-6989586621679078385"><span class="hs-identifier hs-var">deleteField</span></a></span><span> </span><span id="local-6989586621679078397"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078397"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Field"><span class="hs-identifier hs-type">Parser.Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#UnknownKey"><span class="hs-identifier hs-type">Parser.UnknownKey</span></a></span><span> </span><span id="local-6989586621679078399"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078399"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679078400"><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679078400"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tag -&gt; Map Tag (FieldDescriptor msg) -&gt; Maybe (FieldDescriptor msg)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Tag
</span><a href="Data.ProtoLens.Encoding.Wire.html#Tag"><span class="hs-identifier hs-var">Tag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078399"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Map Tag (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-var">fieldsByTag</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679077928"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Set String -&gt; Set String
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.delete</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDescriptor msg -&gt; String
forall msg. FieldDescriptor msg -&gt; String
</span><a href="Data.ProtoLens.Message.html#fieldDescriptorName"><span class="hs-identifier hs-var">fieldDescriptorName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679078400"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078397"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="#local-6989586621679078385"><span class="hs-identifier hs-var">deleteField</span></a></span><span> </span><span id="local-6989586621679078404"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078404"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Field
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679078404"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span id="local-6989586621679077936"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#buildMessageFromDescriptor"><span class="hs-identifier hs-type">buildMessageFromDescriptor</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077936"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077936"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Message"><span class="hs-identifier hs-type">Parser.Message</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077936"><span class="hs-identifier hs-type">msg</span></a></span></span><span>
</span><span id="line-247"></span><span id="buildMessageFromDescriptor"><span class="annot"><span class="annottext">buildMessageFromDescriptor :: forall msg.
Message msg =&gt;
Registry -&gt; msg -&gt; [Field] -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#buildMessageFromDescriptor"><span class="hs-identifier hs-var hs-var">buildMessageFromDescriptor</span></a></span></span><span> </span><span id="local-6989586621679078409"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078409"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(msg -&gt; Field -&gt; Either String msg)
-&gt; msg -&gt; [Field] -&gt; Either String msg
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldlM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Registry -&gt; msg -&gt; Field -&gt; Either String msg
forall msg.
Message msg =&gt;
Registry -&gt; msg -&gt; Field -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#addField"><span class="hs-identifier hs-var">addField</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078409"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#addField"><span class="hs-identifier hs-type">addField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679077960"><span class="annot"><a href="#local-6989586621679077960"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077960"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077960"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Field"><span class="hs-identifier hs-type">Parser.Field</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077960"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-250"></span><span id="addField"><span class="annot"><span class="annottext">addField :: forall msg.
Message msg =&gt;
Registry -&gt; msg -&gt; Field -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#addField"><span class="hs-identifier hs-var hs-var">addField</span></a></span></span><span> </span><span id="local-6989586621679078425"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078425"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078426"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078426"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Field"><span class="hs-identifier hs-type">Parser.Field</span></a></span><span> </span><span id="local-6989586621679078427"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679078427"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679078428"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078428"><span class="hs-identifier hs-var">rawValue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span id="local-6989586621679078431"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078431"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679078432"><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><a href="#local-6989586621679078432"><span class="hs-identifier hs-var">typeDescriptor</span></a></span></span><span> </span><span id="local-6989586621679078433"><span class="annot"><span class="annottext">FieldAccessor msg value
</span><a href="#local-6989586621679078433"><span class="hs-identifier hs-var">accessor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either String (FieldDescriptor msg)
</span><a href="#local-6989586621679078434"><span class="hs-identifier hs-var">getFieldDescriptor</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621679078435"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078435"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; Registry
-&gt; FieldTypeDescriptor value
-&gt; Value
-&gt; Either String value
forall value.
String
-&gt; Registry
-&gt; FieldTypeDescriptor value
-&gt; Value
-&gt; Either String value
</span><a href="Data.ProtoLens.TextFormat.html#makeValue"><span class="hs-identifier hs-var">makeValue</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078431"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078425"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><a href="#local-6989586621679078432"><span class="hs-identifier hs-var">typeDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078428"><span class="hs-identifier hs-var">rawValue</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><span class="annottext">msg -&gt; Either String msg
forall a. a -&gt; Either String a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(msg -&gt; Either String msg) -&gt; msg -&gt; Either String msg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldAccessor msg value -&gt; value -&gt; msg -&gt; msg
forall msg value. FieldAccessor msg value -&gt; value -&gt; msg -&gt; msg
</span><a href="Data.ProtoLens.TextFormat.html#modifyField"><span class="hs-identifier hs-var">modifyField</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAccessor msg value
</span><a href="#local-6989586621679078433"><span class="hs-identifier hs-var">accessor</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078435"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078426"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>    </span><span id="local-6989586621679078434"><span class="annot"><span class="annottext">getFieldDescriptor :: Either String (FieldDescriptor msg)
</span><a href="#local-6989586621679078434"><span class="hs-identifier hs-var hs-var">getFieldDescriptor</span></a></span></span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Key"><span class="hs-identifier hs-type">Parser.Key</span></a></span><span> </span><span id="local-6989586621679078438"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078438"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679078427"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679078439"><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679078439"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String
-&gt; Map String (FieldDescriptor msg) -&gt; Maybe (FieldDescriptor msg)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078438"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-257"></span><span>                                                </span><span class="annot"><span class="annottext">Map String (FieldDescriptor msg)
forall msg. Message msg =&gt; Map String (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTextFormatName"><span class="hs-identifier hs-var">fieldsByTextFormatName</span></a></span><span>
</span><span id="line-258"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg -&gt; Either String (FieldDescriptor msg)
forall a. a -&gt; Either String a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679078439"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-259"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#UnknownKey"><span class="hs-identifier hs-type">Parser.UnknownKey</span></a></span><span> </span><span id="local-6989586621679078440"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078440"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679078427"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679078441"><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679078441"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tag -&gt; Map Tag (FieldDescriptor msg) -&gt; Maybe (FieldDescriptor msg)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Tag
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078440"><span class="hs-identifier hs-var">tag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>                                                      </span><span class="annot"><span class="annottext">Map Tag (FieldDescriptor msg)
forall msg. Message msg =&gt; Map Tag (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-var">fieldsByTag</span></a></span><span>
</span><span id="line-261"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg -&gt; Either String (FieldDescriptor msg)
forall a. a -&gt; Either String a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679078441"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-262"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String (FieldDescriptor msg)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String (FieldDescriptor msg))
-&gt; String -&gt; Either String (FieldDescriptor msg)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unrecognized field &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679078427"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span id="local-6989586621679077965"><span id="local-6989586621679077966"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#modifyField"><span class="hs-identifier hs-type">modifyField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-type">FieldAccessor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077965"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077966"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077966"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077965"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679077965"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-265"></span><span id="modifyField"><span class="annot"><span class="annottext">modifyField :: forall msg value. FieldAccessor msg value -&gt; value -&gt; msg -&gt; msg
</span><a href="Data.ProtoLens.TextFormat.html#modifyField"><span class="hs-identifier hs-var hs-var">modifyField</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#PlainField"><span class="hs-identifier hs-type">PlainField</span></a></span><span> </span><span class="annot"><span class="annottext">WireDefault value
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679078442"><span class="annot"><span class="annottext">Lens' msg value
</span><a href="#local-6989586621679078442"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078443"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078443"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Setter msg msg value value -&gt; value -&gt; msg -&gt; msg
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f msg value
Lens' msg value
Setter msg msg value value
</span><a href="#local-6989586621679078442"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078443"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-266"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#modifyField"><span class="hs-identifier hs-var">modifyField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#OptionalField"><span class="hs-identifier hs-type">OptionalField</span></a></span><span> </span><span id="local-6989586621679078448"><span class="annot"><span class="annottext">Lens' msg (Maybe value)
</span><a href="#local-6989586621679078448"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078449"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078449"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Setter msg msg (Maybe value) (Maybe value)
-&gt; Maybe value -&gt; msg -&gt; msg
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f msg (Maybe value)
Lens' msg (Maybe value)
Setter msg msg (Maybe value) (Maybe value)
</span><a href="#local-6989586621679078448"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value -&gt; Maybe value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078449"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#modifyField"><span class="hs-identifier hs-var">modifyField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#RepeatedField"><span class="hs-identifier hs-type">RepeatedField</span></a></span><span> </span><span class="annot"><span class="annottext">Packing
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679078454"><span class="annot"><span class="annottext">Lens' msg [value]
</span><a href="#local-6989586621679078454"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078455"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078455"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Setter msg msg [value] [value]
-&gt; ([value] -&gt; [value]) -&gt; msg -&gt; msg
forall s t a b. Setter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f msg [value]
Lens' msg [value]
Setter msg msg [value] [value]
</span><a href="#local-6989586621679078454"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078455"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">value -&gt; [value] -&gt; [value]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#modifyField"><span class="hs-identifier hs-var">modifyField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MapField"><span class="hs-identifier hs-type">MapField</span></a></span><span> </span><span id="local-6989586621679078465"><span class="annot"><span class="annottext">Lens' value key
</span><a href="#local-6989586621679078465"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679078466"><span class="annot"><span class="annottext">Lens' value value1
</span><a href="#local-6989586621679078466"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679078467"><span class="annot"><span class="annottext">Lens' msg (Map key value1)
</span><a href="#local-6989586621679078467"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078468"><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078468"><span class="hs-identifier hs-var">mapElem</span></a></span></span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Setter msg msg (Map key value1) (Map key value1)
-&gt; (Map key value1 -&gt; Map key value1) -&gt; msg -&gt; msg
forall s t a b. Setter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f msg (Map key value1)
Lens' msg (Map key value1)
Setter msg msg (Map key value1) (Map key value1)
</span><a href="#local-6989586621679078467"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">key -&gt; value1 -&gt; Map key value1 -&gt; Map key value1
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078468"><span class="hs-identifier hs-var">mapElem</span></a></span><span> </span><span class="annot"><span class="annottext">value -&gt; FoldLike key value value key key -&gt; key
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike key value value key key
Lens' value key
</span><a href="#local-6989586621679078465"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679078468"><span class="hs-identifier hs-var">mapElem</span></a></span><span> </span><span class="annot"><span class="annottext">value -&gt; FoldLike value1 value value value1 value1 -&gt; value1
forall s a t b. s -&gt; FoldLike a s t a b -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">FoldLike value1 value value value1 value1
Lens' value value1
</span><a href="#local-6989586621679078466"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeValue"><span class="hs-identifier hs-type">makeValue</span></a></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679077963"><span class="annot"><a href="#local-6989586621679077963"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-273"></span><span>     </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ name of field</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077963"><span class="hs-identifier hs-type">value</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Value"><span class="hs-identifier hs-type">Parser.Value</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077963"><span class="hs-identifier hs-type">value</span></a></span><span>
</span><span id="line-278"></span><span id="makeValue"><span class="annot"><span class="annottext">makeValue :: forall value.
String
-&gt; Registry
-&gt; FieldTypeDescriptor value
-&gt; Value
-&gt; Either String value
</span><a href="Data.ProtoLens.TextFormat.html#makeValue"><span class="hs-identifier hs-var hs-var">makeValue</span></a></span></span><span> </span><span id="local-6989586621679078478"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078478"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Registry
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span id="local-6989586621679078479"><span class="annot"><span class="annottext">ScalarField value
</span><a href="#local-6989586621679078479"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078480"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078480"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; String) -&gt; Either String value -&gt; Either String value
forall b c d. (b -&gt; c) -&gt; Either b d -&gt; Either c d
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error parsing field &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078478"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either String value -&gt; Either String value)
-&gt; Either String value -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarField value -&gt; Value -&gt; Either String value
forall value. ScalarField value -&gt; Value -&gt; Either String value
</span><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="#local-6989586621679078479"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078480"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-280"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeValue"><span class="hs-identifier hs-var">makeValue</span></a></span><span> </span><span id="local-6989586621679078482"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078482"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679078483"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078483"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679078484"><span class="annot"><span class="annottext">field :: FieldTypeDescriptor value
</span><a href="#local-6989586621679078484"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-type">MessageField</span></a></span><span> </span><span class="annot"><span class="annottext">MessageOrGroup
</span><a href="Data.ProtoLens.Message.html#MessageType"><span class="hs-identifier hs-var">MessageType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#MessageValue"><span class="hs-identifier hs-type">Parser.MessageValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679078493"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078493"><span class="hs-identifier hs-var">typeUri</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078494"><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078494"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier hs-type">AnyMessageDescriptor</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679078495"><span class="annot"><span class="annottext">Lens' value Text
anyTypeUrlLens :: forall msg. AnyMessageDescriptor msg -&gt; Lens' msg Text
anyTypeUrlLens :: Lens' value Text
</span><a href="Data.ProtoLens.Message.html#anyTypeUrlLens"><span class="hs-identifier hs-var hs-var">anyTypeUrlLens</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679078496"><span class="annot"><span class="annottext">Lens' value ByteString
anyValueLens :: forall msg. AnyMessageDescriptor msg -&gt; Lens' msg ByteString
anyValueLens :: Lens' value ByteString
</span><a href="Data.ProtoLens.Message.html#anyValueLens"><span class="hs-identifier hs-var hs-var">anyValueLens</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value -&gt; Maybe (AnyMessageDescriptor value)
forall value.
FieldTypeDescriptor value -&gt; Maybe (AnyMessageDescriptor value)
</span><a href="Data.ProtoLens.Message.html#matchAnyMessage"><span class="hs-identifier hs-var">matchAnyMessage</span></a></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><a href="#local-6989586621679078484"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Registry -&gt; Maybe SomeMessageType
</span><a href="Data.ProtoLens.Message.html#lookupRegistered"><span class="hs-identifier hs-var">lookupRegistered</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078493"><span class="hs-identifier hs-var">typeUri</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078483"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-283"></span><span>          </span><span class="annot"><span class="annottext">Maybe SomeMessageType
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not decode google.protobuf.Any for field &quot;</span></span><span>
</span><span id="line-284"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078482"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: unregistered type URI &quot;</span></span><span>
</span><span id="line-285"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078493"><span class="hs-identifier hs-var">typeUri</span></a></span><span>
</span><span id="line-286"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-type">SomeMessageType</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679078501"><span class="annot"><span class="annottext">Proxy msg
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679078501"><span class="hs-identifier hs-type">value'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-287"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Registry -&gt; [Field] -&gt; Either String msg
forall msg. Message msg =&gt; Registry -&gt; [Field] -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#buildMessage"><span class="hs-identifier hs-var">buildMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078483"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078494"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679078501"><span class="hs-identifier hs-type">value'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-288"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679078502"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078502"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078502"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-289"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679078503"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078503"><span class="hs-identifier hs-var">value'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">value
forall msg. Message msg =&gt; msg
</span><a href="Data.ProtoLens.Message.html#defMessage"><span class="hs-identifier hs-var">defMessage</span></a></span><span>
</span><span id="line-290"></span><span>                                        </span><span class="annot"><span class="annottext">value -&gt; (value -&gt; value) -&gt; value
forall s t. s -&gt; (s -&gt; t) -&gt; t
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f value Text
Lens' value Text
forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value Text
</span><a href="#local-6989586621679078495"><span class="hs-identifier hs-var">anyTypeUrlLens</span></a></span><span> </span><span class="annot"><span class="annottext">(forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value Text)
-&gt; Text -&gt; value -&gt; value
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078493"><span class="hs-identifier hs-var">typeUri</span></a></span><span>
</span><span id="line-291"></span><span>                                        </span><span class="annot"><span class="annottext">value -&gt; (value -&gt; value) -&gt; value
forall s t. s -&gt; (s -&gt; t) -&gt; t
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' f value ByteString
Lens' value ByteString
forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value ByteString
</span><a href="#local-6989586621679078496"><span class="hs-identifier hs-var">anyValueLens</span></a></span><span> </span><span class="annot"><span class="annottext">(forall {f :: * -&gt; *}. Identical f =&gt; LensLike' f value ByteString)
-&gt; ByteString -&gt; value -&gt; value
forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">msg -&gt; ByteString
forall msg. Message msg =&gt; msg -&gt; ByteString
</span><a href="Data.ProtoLens.Encoding.html#encodeMessage"><span class="hs-identifier hs-var">encodeMessage</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679078503"><span class="hs-identifier hs-var">value'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type mismatch parsing explicitly typed message. Expected &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-293"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy value -&gt; Text
forall msg. Message msg =&gt; Proxy msg -&gt; Text
</span><a href="Data.ProtoLens.Message.html#messageName"><span class="hs-identifier hs-var">messageName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679077963"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-294"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, got &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679078493"><span class="hs-identifier hs-var">typeUri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeValue"><span class="hs-identifier hs-var">makeValue</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679078513"><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078513"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-type">MessageField</span></a></span><span> </span><span class="annot"><span class="annottext">MessageOrGroup
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#MessageValue"><span class="hs-identifier hs-type">Parser.MessageValue</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679078516"><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078516"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Registry -&gt; [Field] -&gt; Either String value
forall msg. Message msg =&gt; Registry -&gt; [Field] -&gt; Either String msg
</span><a href="Data.ProtoLens.TextFormat.html#buildMessage"><span class="hs-identifier hs-var">buildMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Registry
</span><a href="#local-6989586621679078513"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679078516"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-296"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeValue"><span class="hs-identifier hs-var">makeValue</span></a></span><span> </span><span id="local-6989586621679078517"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078517"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Registry
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-type">MessageField</span></a></span><span> </span><span class="annot"><span class="annottext">MessageOrGroup
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679078522"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078522"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type mismatch for field &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078517"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-298"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: expected message, found &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078522"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span id="local-6989586621679077987"><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-type">makeScalarValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679077987"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#Value"><span class="hs-identifier hs-type">Parser.Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679077987"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-301"></span><span id="makeScalarValue"><span class="annot"><span class="annottext">makeScalarValue :: forall value. ScalarField value -&gt; Value -&gt; Either String value
</span><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var hs-var">makeScalarValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Int32Field"><span class="hs-identifier hs-var">Int32Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078533"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078533"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078533"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Int64Field"><span class="hs-identifier hs-var">Int64Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078538"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078538"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078538"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#UInt32Field"><span class="hs-identifier hs-var">UInt32Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078543"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078543"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078543"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#UInt64Field"><span class="hs-identifier hs-var">UInt64Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078548"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078548"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078548"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SInt32Field"><span class="hs-identifier hs-var">SInt32Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078552"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078552"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078552"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SInt64Field"><span class="hs-identifier hs-var">SInt64Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078556"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078556"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078556"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Fixed32Field"><span class="hs-identifier hs-var">Fixed32Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078560"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078560"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078560"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#Fixed64Field"><span class="hs-identifier hs-var">Fixed64Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078564"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078564"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078564"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SFixed32Field"><span class="hs-identifier hs-var">SFixed32Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078568"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078568"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078568"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#SFixed64Field"><span class="hs-identifier hs-var">SFixed64Field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078572"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078572"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078572"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#FloatField"><span class="hs-identifier hs-var">FloatField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078577"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078577"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078577"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#DoubleField"><span class="hs-identifier hs-var">DoubleField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078582"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078582"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; value
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078582"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#BoolField"><span class="hs-identifier hs-var">BoolField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078592"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078592"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078592"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">value
Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078592"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">value
Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unrecognized bool value &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078592"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-317"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#DoubleField"><span class="hs-identifier hs-var">DoubleField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#DoubleValue"><span class="hs-identifier hs-type">Parser.DoubleValue</span></a></span><span> </span><span id="local-6989586621679078595"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679078595"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">value
Double
</span><a href="#local-6989586621679078595"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-318"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#FloatField"><span class="hs-identifier hs-var">FloatField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#DoubleValue"><span class="hs-identifier hs-type">Parser.DoubleValue</span></a></span><span> </span><span id="local-6989586621679078602"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679078602"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; value
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">realToFrac</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679078602"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#BoolField"><span class="hs-identifier hs-var">BoolField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#EnumValue"><span class="hs-identifier hs-type">Parser.EnumValue</span></a></span><span> </span><span id="local-6989586621679078613"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078613"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078613"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;true&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;True&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;t&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">value
Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078613"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;false&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;False&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;f&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">value
Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unrecognized bool value &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078613"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-323"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#StringField"><span class="hs-identifier hs-var">StringField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#ByteStringValue"><span class="hs-identifier hs-type">Parser.ByteStringValue</span></a></span><span> </span><span id="local-6989586621679078617"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078617"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">Text.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078617"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#BytesField"><span class="hs-identifier hs-var">BytesField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#ByteStringValue"><span class="hs-identifier hs-type">Parser.ByteStringValue</span></a></span><span> </span><span id="local-6989586621679078620"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679078620"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">value
ByteString
</span><a href="#local-6989586621679078620"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-325"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#EnumField"><span class="hs-identifier hs-var">EnumField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#IntValue"><span class="hs-identifier hs-type">Parser.IntValue</span></a></span><span> </span><span id="local-6989586621679078625"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078625"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><span class="annottext">Either String value
-&gt; (value -&gt; Either String value)
-&gt; Maybe value
-&gt; Either String value
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unrecognized enum value &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078625"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span>
</span><span id="line-327"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe value
forall a. MessageEnum a =&gt; Int -&gt; Maybe a
</span><a href="Data.ProtoLens.Message.html#maybeToEnum"><span class="hs-identifier hs-var">maybeToEnum</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe value) -&gt; Int -&gt; Maybe value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679078625"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#EnumField"><span class="hs-identifier hs-var">EnumField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.TextFormat.Parser.html#EnumValue"><span class="hs-identifier hs-type">Parser.EnumValue</span></a></span><span> </span><span id="local-6989586621679078632"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078632"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><span class="annottext">Either String value
-&gt; (value -&gt; Either String value)
-&gt; Maybe value
-&gt; Either String value
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unrecognized enum value &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078632"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">value -&gt; Either String value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span>
</span><span id="line-330"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe value
forall a. MessageEnum a =&gt; String -&gt; Maybe a
</span><a href="Data.ProtoLens.Message.html#readEnum"><span class="hs-identifier hs-var">readEnum</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679078632"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span class="annot"><a href="Data.ProtoLens.TextFormat.html#makeScalarValue"><span class="hs-identifier hs-var">makeScalarValue</span></a></span><span> </span><span id="local-6989586621679078634"><span class="annot"><span class="annottext">ScalarField value
</span><a href="#local-6989586621679078634"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679078635"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078635"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String value) -&gt; String -&gt; Either String value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type mismatch: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(ScalarField value, Value) -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarField value
</span><a href="#local-6989586621679078634"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679078635"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span></pre></body></html>