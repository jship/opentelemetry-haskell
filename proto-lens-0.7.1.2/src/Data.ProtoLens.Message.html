<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- Copyright 2016 Google Inc. All Rights Reserved.</span><span>
</span><span id="line-2"></span><span class="hs-comment">--</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Use of this source code is governed by a BSD-style</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- license that can be found in the LICENSE file or at</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- https://developers.google.com/open-source/licenses/bsd</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- | Datatypes for reflection of protocol buffer messages.</span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.ProtoLens.Message</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Reflection of Messages</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier">Message</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#Tag"><span class="hs-identifier">Tag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#allFields"><span class="hs-identifier">allFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier">FieldDescriptor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#fieldDescriptorName"><span class="hs-identifier">fieldDescriptorName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#isRequired"><span class="hs-identifier">isRequired</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier">FieldAccessor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#WireDefault"><span class="hs-identifier">WireDefault</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#Packing"><span class="hs-identifier">Packing</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier">FieldTypeDescriptor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier">ScalarField</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageOrGroup"><span class="hs-identifier">MessageOrGroup</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier">FieldDefault</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageEnum"><span class="hs-identifier">MessageEnum</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Constructing protocol buffers</span></span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#build"><span class="hs-identifier">build</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Proto registries</span></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier">Registry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#register"><span class="hs-identifier">register</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#lookupRegistered"><span class="hs-identifier">lookupRegistered</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier">SomeMessageType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Any messages</span></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#matchAnyMessage"><span class="hs-identifier">matchAnyMessage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier">AnyMessageDescriptor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utilities for constructing protocol buffer lenses</span></span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#maybeLens"><span class="hs-identifier">maybeLens</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal utilities for parsing protocol buffers</span></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#reverseRepeatedFields"><span class="hs-identifier">reverseRepeatedFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Unknown fields</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldSet"><span class="hs-identifier">FieldSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#TaggedValue"><span class="hs-identifier">TaggedValue</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Data.ProtoLens.Message.html#discardUnknownFields"><span class="hs-identifier">discardUnknownFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Family2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Lens'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">over</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">set</span></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Family2.Unchecked</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lens</span></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semigroup</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Semigroup</span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Bytes.html"><span class="hs-identifier">Data.ProtoLens.Encoding.Bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Builder</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Parser.Internal.html#Parser"><span class="hs-identifier">Parser</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html"><span class="hs-identifier">Data.ProtoLens.Encoding.Wire</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#Tag"><span class="hs-identifier">Tag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#TaggedValue"><span class="hs-identifier">TaggedValue</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Every protocol buffer is an instance of 'Message'.  This class enables</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- serialization by providing reflection of all of the fields that may be used</span><span>
</span><span id="line-72"></span><span class="hs-comment">-- by this type.</span><span>
</span><span id="line-73"></span><span class="hs-keyword">class</span><span> </span><span id="Message"><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-var">Message</span></a></span></span><span> </span><span id="local-6989586621679074968"><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">-- | A unique identifier for this type, of the format</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">-- @&quot;packagename.messagename&quot;@.</span><span>
</span><span id="line-76"></span><span>    </span><span id="messageName"><span class="annot"><a href="Data.ProtoLens.Message.html#messageName"><span class="hs-identifier hs-type">messageName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-comment">-- | The serialized protobuffer message descriptor for this type.</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-comment">-- For a friendlier version which returns the actual descriptor type,</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-comment">-- use @Data.ProtoLens.Descriptor.messageDescriptor@</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-comment">-- from the @proto-lens-protobuf-types@ package.</span><span>
</span><span id="line-83"></span><span>    </span><span id="packedMessageDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#packedMessageDescriptor"><span class="hs-identifier hs-type">packedMessageDescriptor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-comment">-- | The serialized protobuffer file message descriptor containing this type.</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-comment">-- For a friendlier version which returns the actual file descriptor type,</span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">-- use @Data.ProtoLens.Descriptor.fileDescriptor@</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-comment">-- from the @proto-lens-protobuf-types@ package.</span><span>
</span><span id="line-90"></span><span>    </span><span id="packedFileDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#packedFileDescriptor"><span class="hs-identifier hs-type">packedFileDescriptor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">-- | A message with all fields set to their default values.</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">-- Satisfies @encodeMessage defMessage == &quot;&quot;@ and @decodeMessage &quot;&quot; == Right defMessage@.</span><span>
</span><span id="line-95"></span><span>    </span><span id="defMessage"><span class="annot"><a href="Data.ProtoLens.Message.html#defMessage"><span class="hs-identifier hs-type">defMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">-- | The fields of the proto, indexed by their (integer) tag.</span><span>
</span><span id="line-98"></span><span>    </span><span id="fieldsByTag"><span class="annot"><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-type">fieldsByTag</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">-- | This map is keyed by the name of the field used for text format protos.</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-comment">-- This is just the field name for every field except for group fields,</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-comment">-- which use their Message type name in text protos instead of their</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-comment">-- field name. For example, &quot;optional group Foo&quot; has the field name &quot;foo&quot;</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-comment">-- but in this map it is stored with the key &quot;Foo&quot;.</span><span>
</span><span id="line-105"></span><span>    </span><span id="fieldsByTextFormatName"><span class="annot"><a href="Data.ProtoLens.Message.html#fieldsByTextFormatName"><span class="hs-identifier hs-type">fieldsByTextFormatName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>    </span><span id="local-6989586621679074801"><span class="annot"><a href="Data.ProtoLens.Message.html#fieldsByTextFormatName"><span class="hs-identifier hs-var hs-var">fieldsByTextFormatName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679074794"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg
</span><a href="#local-6989586621679074793"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679074793"><span class="annot"><span class="annottext">f :: FieldDescriptor msg
</span><a href="#local-6989586621679074793"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span id="local-6989586621679074794"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679074794"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FieldAccessor msg value
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; [FieldDescriptor msg]
</span><a href="Data.ProtoLens.Message.html#allFields"><span class="hs-identifier hs-var">allFields</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-comment">-- | Access the unknown fields of a Message.</span><span>
</span><span id="line-110"></span><span>    </span><span id="unknownFields"><span class="annot"><a href="Data.ProtoLens.Message.html#unknownFields"><span class="hs-identifier hs-type">unknownFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldSet"><span class="hs-identifier hs-type">FieldSet</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">-- | Decode a message value.</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">-- See also the functions in &quot;Data.ProtoLens.Encoding&quot;.</span><span>
</span><span id="line-115"></span><span>    </span><span id="parseMessage"><span class="annot"><a href="Data.ProtoLens.Message.html#parseMessage"><span class="hs-identifier hs-type">parseMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Encoding.Parser.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-comment">-- | Encode a message value.</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-comment">-- See also the functions in &quot;Data.ProtoLens.Encoding&quot;.</span><span>
</span><span id="line-120"></span><span>    </span><span id="buildMessage"><span class="annot"><a href="Data.ProtoLens.Message.html#buildMessage"><span class="hs-identifier hs-type">buildMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679074968"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Builder</span></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="local-6989586621679074960"><span class="annot"><a href="Data.ProtoLens.Message.html#allFields"><span class="hs-identifier hs-type">allFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074960"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074960"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-123"></span><span id="allFields"><span class="annot"><span class="annottext">allFields :: forall msg. Message msg =&gt; [FieldDescriptor msg]
</span><a href="Data.ProtoLens.Message.html#allFields"><span class="hs-identifier hs-var hs-var">allFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Map Tag (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-var">fieldsByTag</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- TODO: represent FieldSet as a Vector too.</span><span>
</span><span id="line-126"></span><span class="hs-keyword">type</span><span> </span><span id="FieldSet"><span class="annot"><a href="Data.ProtoLens.Message.html#FieldSet"><span class="hs-identifier hs-var">FieldSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.ProtoLens.Encoding.Wire.html#TaggedValue"><span class="hs-identifier hs-type">TaggedValue</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">-- | A description of a specific field of a protocol buffer.</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- The 'String' parameter is the name of the field from the .proto file,</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- as used in TextFormat, with the same behavior for groups as</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- 'fieldsByTextFormatName'.</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- (Haddock doesn't support per-argument docs for GADTs.)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">data</span><span> </span><span id="FieldDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-var">FieldDescriptor</span></a></span></span><span> </span><span id="local-6989586621679074785"><span class="annot"><a href="#local-6989586621679074785"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621679074783"><span id="local-6989586621679074784"><span id="FieldDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-var">FieldDescriptor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-136"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074784"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-type">FieldAccessor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074783"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074784"><span class="hs-identifier hs-type">value</span></a></span><span>
</span><span id="line-137"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074783"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- | The original name of the field in the .proto file.</span><span>
</span><span id="line-140"></span><span id="local-6989586621679074955"><span class="annot"><a href="Data.ProtoLens.Message.html#fieldDescriptorName"><span class="hs-identifier hs-type">fieldDescriptorName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074955"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-141"></span><span id="fieldDescriptorName"><span class="annot"><span class="annottext">fieldDescriptorName :: forall msg. FieldDescriptor msg -&gt; String
</span><a href="Data.ProtoLens.Message.html#fieldDescriptorName"><span class="hs-identifier hs-var hs-var">fieldDescriptorName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span id="local-6989586621679074782"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679074782"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FieldAccessor msg value
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679074782"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Whether the given field is required.  Specifically, if its 'FieldAccessor'</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- is a 'Required' 'PlainField'.</span><span>
</span><span id="line-145"></span><span id="local-6989586621679074952"><span class="annot"><a href="Data.ProtoLens.Message.html#isRequired"><span class="hs-identifier hs-type">isRequired</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074952"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-146"></span><span id="isRequired"><span class="annot"><span class="annottext">isRequired :: forall msg. FieldDescriptor msg -&gt; Bool
</span><a href="Data.ProtoLens.Message.html#isRequired"><span class="hs-identifier hs-var hs-var">isRequired</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#PlainField"><span class="hs-identifier hs-type">PlainField</span></a></span><span> </span><span class="annot"><span class="annottext">WireDefault value
</span><a href="Data.ProtoLens.Message.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' msg value
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-147"></span><span class="annot"><a href="Data.ProtoLens.Message.html#isRequired"><span class="hs-identifier hs-var">isRequired</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDescriptor msg
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | A Lens for accessing the value of an individual field in a protocol buffer</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- message.</span><span>
</span><span id="line-151"></span><span class="hs-keyword">data</span><span> </span><span id="FieldAccessor"><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-var">FieldAccessor</span></a></span></span><span> </span><span id="local-6989586621679074779"><span class="annot"><a href="#local-6989586621679074779"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span id="local-6989586621679074778"><span class="annot"><a href="#local-6989586621679074778"><span class="hs-identifier hs-type">value</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-comment">-- A field which is stored in the proto as just a value.  Used for</span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-comment">-- required fields and proto3 optional scalar fields.</span><span>
</span><span id="line-154"></span><span>    </span><span id="local-6989586621679074776"><span id="local-6989586621679074777"><span id="PlainField"><span class="annot"><a href="Data.ProtoLens.Message.html#PlainField"><span class="hs-identifier hs-var">PlainField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#WireDefault"><span class="hs-identifier hs-type">WireDefault</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074777"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074776"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074777"><span class="hs-identifier hs-type">value</span></a></span><span>
</span><span id="line-155"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-type">FieldAccessor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074776"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074777"><span class="hs-identifier hs-type">value</span></a></span></span></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-comment">-- An optional field where the &quot;unset&quot; and &quot;default&quot; values are</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-comment">-- distinguishable.  In particular: proto2 optional fields, proto3</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-comment">-- messages, and &quot;oneof&quot; fields.</span><span>
</span><span id="line-159"></span><span>    </span><span id="local-6989586621679074774"><span id="local-6989586621679074775"><span id="OptionalField"><span class="annot"><a href="Data.ProtoLens.Message.html#OptionalField"><span class="hs-identifier hs-var">OptionalField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074775"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679074774"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-type">FieldAccessor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074775"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074774"><span class="hs-identifier hs-type">value</span></a></span></span></span><span>
</span><span id="line-160"></span><span>    </span><span id="local-6989586621679074771"><span id="local-6989586621679074772"><span id="RepeatedField"><span class="annot"><a href="Data.ProtoLens.Message.html#RepeatedField"><span class="hs-identifier hs-var">RepeatedField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Packing"><span class="hs-identifier hs-type">Packing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074772"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679074771"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-type">FieldAccessor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074772"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074771"><span class="hs-identifier hs-type">value</span></a></span></span></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">-- A proto &quot;map&quot; field is serialized as a repeated field of an</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-comment">-- autogenerated &quot;entry&quot; type, where each entry contains a single key/value</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-comment">-- pair.  This constructor provides lenses for accessing the key and value</span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-comment">-- of each entry, so that we can covert between a list of entries and a Map.</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621679074766"><span id="local-6989586621679074767"><span id="local-6989586621679074768"><span id="local-6989586621679074769"><span id="MapField"><span class="annot"><a href="Data.ProtoLens.Message.html#MapField"><span class="hs-identifier hs-var">MapField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679074769"><span class="hs-identifier hs-type">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074768"><span class="hs-identifier hs-type">entry</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074768"><span class="hs-identifier hs-type">entry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074769"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074768"><span class="hs-identifier hs-type">entry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074767"><span class="hs-identifier hs-type">value</span></a></span><span>
</span><span id="line-166"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074766"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679074769"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074767"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldAccessor"><span class="hs-identifier hs-type">FieldAccessor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074766"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074768"><span class="hs-identifier hs-type">entry</span></a></span></span></span></span></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-comment">-- | The default value (if any) for a 'PlainField' on the wire.</span><span>
</span><span id="line-169"></span><span class="hs-keyword">data</span><span> </span><span id="WireDefault"><span class="annot"><a href="Data.ProtoLens.Message.html#WireDefault"><span class="hs-identifier hs-var">WireDefault</span></a></span></span><span> </span><span id="local-6989586621679074764"><span class="annot"><a href="#local-6989586621679074764"><span class="hs-identifier hs-type">value</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-comment">-- Required fields have no default.</span><span>
</span><span id="line-171"></span><span>    </span><span id="local-6989586621679074763"><span id="Required"><span class="annot"><a href="Data.ProtoLens.Message.html#Required"><span class="hs-identifier hs-var">Required</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#WireDefault"><span class="hs-identifier hs-type">WireDefault</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074763"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-comment">-- Corresponds to proto3 scalar fields.</span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621679074762"><span id="Optional"><span class="annot"><a href="Data.ProtoLens.Message.html#Optional"><span class="hs-identifier hs-var">Optional</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074762"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679074762"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#WireDefault"><span class="hs-identifier hs-type">WireDefault</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074762"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- | A proto3 field type with an implicit default value.</span><span>
</span><span id="line-176"></span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- This is distinct from, say, 'Data.Default' to avoid orphan instances, and</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- because 'Bool' doesn't necessarily have a good Default instance for general</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- usage.</span><span>
</span><span id="line-180"></span><span class="hs-keyword">class</span><span> </span><span id="FieldDefault"><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-var">FieldDefault</span></a></span></span><span> </span><span id="local-6989586621679074947"><span class="annot"><a href="#local-6989586621679074947"><span class="hs-identifier hs-type">value</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>    </span><span id="fieldDefault"><span class="annot"><a href="Data.ProtoLens.Message.html#fieldDefault"><span class="hs-identifier hs-type">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679074947"><span class="hs-identifier hs-type">value</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621679074756"><span class="annot"><span class="annottext">fieldDefault :: Bool
</span><a href="#local-6989586621679074756"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-187"></span><span>    </span><span id="local-6989586621679074751"><span class="annot"><span class="annottext">fieldDefault :: Int32
</span><a href="#local-6989586621679074751"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621679074746"><span class="annot"><span class="annottext">fieldDefault :: Int64
</span><a href="#local-6989586621679074746"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>    </span><span id="local-6989586621679074741"><span class="annot"><span class="annottext">fieldDefault :: Word32
</span><a href="#local-6989586621679074741"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621679074736"><span class="annot"><span class="annottext">fieldDefault :: Word64
</span><a href="#local-6989586621679074736"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Float</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-199"></span><span>    </span><span id="local-6989586621679074733"><span class="annot"><span class="annottext">fieldDefault :: Float
</span><a href="#local-6989586621679074733"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Float
</span><span class="hs-number">0</span></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621679074730"><span class="annot"><span class="annottext">fieldDefault :: Double
</span><a href="#local-6989586621679074730"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679074727"><span class="annot"><span class="annottext">fieldDefault :: ByteString
</span><a href="#local-6989586621679074727"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier hs-var">B.empty</span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDefault"><span class="hs-identifier hs-type">FieldDefault</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621679074723"><span class="annot"><span class="annottext">fieldDefault :: Text
</span><a href="#local-6989586621679074723"><span class="hs-identifier hs-var hs-var hs-var hs-var">fieldDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier hs-var">T.empty</span></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- | How a given repeated field is transmitted on the wire format.</span><span>
</span><span id="line-211"></span><span class="hs-keyword">data</span><span> </span><span id="Packing"><span class="annot"><a href="Data.ProtoLens.Message.html#Packing"><span class="hs-identifier hs-var">Packing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Packed"><span class="annot"><a href="Data.ProtoLens.Message.html#Packed"><span class="hs-identifier hs-var">Packed</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Unpacked"><span class="annot"><a href="Data.ProtoLens.Message.html#Unpacked"><span class="hs-identifier hs-var">Unpacked</span></a></span></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | A description of the type of a given field value.</span><span>
</span><span id="line-214"></span><span class="hs-keyword">data</span><span> </span><span id="FieldTypeDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-var">FieldTypeDescriptor</span></a></span></span><span> </span><span id="local-6989586621679074719"><span class="annot"><a href="#local-6989586621679074719"><span class="hs-identifier hs-type">value</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621679074718"><span id="MessageField"><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-var">MessageField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074718"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageOrGroup"><span class="hs-identifier hs-type">MessageOrGroup</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074718"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621679074716"><span id="ScalarField"><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-var">ScalarField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074716"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074716"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span id="local-6989586621679074707"><span id="local-6989586621679074709"><span id="local-6989586621679074713"><span id="local-6989586621679074942"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074942"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-keyword">data</span><span> </span><span id="MessageOrGroup"><span class="annot"><a href="Data.ProtoLens.Message.html#MessageOrGroup"><span class="hs-identifier hs-var">MessageOrGroup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MessageType"><span class="annot"><a href="Data.ProtoLens.Message.html#MessageType"><span class="hs-identifier hs-var">MessageType</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="GroupType"><span class="annot"><a href="Data.ProtoLens.Message.html#GroupType"><span class="hs-identifier hs-var">GroupType</span></a></span></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679074698"><span id="local-6989586621679074700"><span id="local-6989586621679074702"><span class="annot"><span class="annottext">Int -&gt; MessageOrGroup -&gt; ShowS
[MessageOrGroup] -&gt; ShowS
MessageOrGroup -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MessageOrGroup] -&gt; ShowS
$cshowList :: [MessageOrGroup] -&gt; ShowS
show :: MessageOrGroup -&gt; String
$cshow :: MessageOrGroup -&gt; String
showsPrec :: Int -&gt; MessageOrGroup -&gt; ShowS
$cshowsPrec :: Int -&gt; MessageOrGroup -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">data</span><span> </span><span id="ScalarField"><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-var">ScalarField</span></a></span></span><span> </span><span id="local-6989586621679074697"><span class="annot"><a href="#local-6989586621679074697"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621679074696"><span id="EnumField"><span class="annot"><a href="Data.ProtoLens.Message.html#EnumField"><span class="hs-identifier hs-var">EnumField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageEnum"><span class="hs-identifier hs-type">MessageEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074696"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074696"><span class="hs-identifier hs-type">value</span></a></span></span><span>
</span><span id="line-225"></span><span>    </span><span id="Int32Field"><span class="annot"><a href="Data.ProtoLens.Message.html#Int32Field"><span class="hs-identifier hs-var">Int32Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span>
</span><span id="line-226"></span><span>    </span><span id="Int64Field"><span class="annot"><a href="Data.ProtoLens.Message.html#Int64Field"><span class="hs-identifier hs-var">Int64Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span>
</span><span id="line-227"></span><span>    </span><span id="UInt32Field"><span class="annot"><a href="Data.ProtoLens.Message.html#UInt32Field"><span class="hs-identifier hs-var">UInt32Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span>
</span><span id="line-228"></span><span>    </span><span id="UInt64Field"><span class="annot"><a href="Data.ProtoLens.Message.html#UInt64Field"><span class="hs-identifier hs-var">UInt64Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-229"></span><span>    </span><span id="SInt32Field"><span class="annot"><a href="Data.ProtoLens.Message.html#SInt32Field"><span class="hs-identifier hs-var">SInt32Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span>
</span><span id="line-230"></span><span>    </span><span id="SInt64Field"><span class="annot"><a href="Data.ProtoLens.Message.html#SInt64Field"><span class="hs-identifier hs-var">SInt64Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span>
</span><span id="line-231"></span><span>    </span><span id="Fixed32Field"><span class="annot"><a href="Data.ProtoLens.Message.html#Fixed32Field"><span class="hs-identifier hs-var">Fixed32Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span>
</span><span id="line-232"></span><span>    </span><span id="Fixed64Field"><span class="annot"><a href="Data.ProtoLens.Message.html#Fixed64Field"><span class="hs-identifier hs-var">Fixed64Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-233"></span><span>    </span><span id="SFixed32Field"><span class="annot"><a href="Data.ProtoLens.Message.html#SFixed32Field"><span class="hs-identifier hs-var">SFixed32Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int32</span></span><span>
</span><span id="line-234"></span><span>    </span><span id="SFixed64Field"><span class="annot"><a href="Data.ProtoLens.Message.html#SFixed64Field"><span class="hs-identifier hs-var">SFixed64Field</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span>
</span><span id="line-235"></span><span>    </span><span id="FloatField"><span class="annot"><a href="Data.ProtoLens.Message.html#FloatField"><span class="hs-identifier hs-var">FloatField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Float</span></span><span>
</span><span id="line-236"></span><span>    </span><span id="DoubleField"><span class="annot"><a href="Data.ProtoLens.Message.html#DoubleField"><span class="hs-identifier hs-var">DoubleField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-237"></span><span>    </span><span id="BoolField"><span class="annot"><a href="Data.ProtoLens.Message.html#BoolField"><span class="hs-identifier hs-var">BoolField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-238"></span><span>    </span><span id="StringField"><span class="annot"><a href="Data.ProtoLens.Message.html#StringField"><span class="hs-identifier hs-var">StringField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-239"></span><span>    </span><span id="BytesField"><span class="annot"><a href="Data.ProtoLens.Message.html#BytesField"><span class="hs-identifier hs-var">BytesField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span id="local-6989586621679074674"><span id="local-6989586621679074676"><span id="local-6989586621679074678"><span id="local-6989586621679074943"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074943"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="Data.ProtoLens.Message.html#matchAnyMessage"><span class="hs-identifier hs-type">matchAnyMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679074941"><span class="annot"><a href="#local-6989586621679074941"><span class="hs-identifier hs-type">value</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldTypeDescriptor"><span class="hs-identifier hs-type">FieldTypeDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074941"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier hs-type">AnyMessageDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074941"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span id="matchAnyMessage"><span class="annot"><span class="annottext">matchAnyMessage :: forall value.
FieldTypeDescriptor value -&gt; Maybe (AnyMessageDescriptor value)
</span><a href="Data.ProtoLens.Message.html#matchAnyMessage"><span class="hs-identifier hs-var hs-var">matchAnyMessage</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#MessageField"><span class="hs-identifier hs-type">MessageField</span></a></span><span> </span><span class="annot"><span class="annottext">MessageOrGroup
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Proxy msg -&gt; Text
</span><a href="Data.ProtoLens.Message.html#messageName"><span class="hs-identifier hs-var">messageName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679074941"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;google.protobuf.Any&quot;</span></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#StringField"><span class="hs-identifier hs-var">StringField</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#PlainField"><span class="hs-identifier hs-type">PlainField</span></a></span><span> </span><span class="annot"><span class="annottext">WireDefault value
</span><a href="Data.ProtoLens.Message.html#Optional"><span class="hs-identifier hs-var">Optional</span></a></span><span> </span><span id="local-6989586621679074656"><span class="annot"><span class="annottext">Lens' value value
</span><a href="#local-6989586621679074656"><span class="hs-identifier hs-var">typeUrlLens</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Tag
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Map Tag (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-var">fieldsByTag</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679074941"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#ScalarField"><span class="hs-identifier hs-type">ScalarField</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarField value
</span><a href="Data.ProtoLens.Message.html#BytesField"><span class="hs-identifier hs-var">BytesField</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#PlainField"><span class="hs-identifier hs-type">PlainField</span></a></span><span> </span><span class="annot"><span class="annottext">WireDefault value
</span><a href="Data.ProtoLens.Message.html#Optional"><span class="hs-identifier hs-var">Optional</span></a></span><span> </span><span id="local-6989586621679074651"><span class="annot"><span class="annottext">Lens' value value
</span><a href="#local-6989586621679074651"><span class="hs-identifier hs-var">valueLens</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Tag
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Map Tag (FieldDescriptor msg)
</span><a href="Data.ProtoLens.Message.html#fieldsByTag"><span class="hs-identifier hs-var">fieldsByTag</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679074941"><span class="hs-identifier hs-type">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall msg.
Lens' msg Text -&gt; Lens' msg ByteString -&gt; AnyMessageDescriptor msg
</span><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier hs-var">AnyMessageDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' value value
</span><a href="#local-6989586621679074656"><span class="hs-identifier hs-var">typeUrlLens</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' value value
</span><a href="#local-6989586621679074651"><span class="hs-identifier hs-var">valueLens</span></a></span><span>
</span><span id="line-251"></span><span class="annot"><a href="Data.ProtoLens.Message.html#matchAnyMessage"><span class="hs-identifier hs-var">matchAnyMessage</span></a></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-keyword">data</span><span> </span><span id="AnyMessageDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier hs-var">AnyMessageDescriptor</span></a></span></span><span> </span><span id="local-6989586621679074926"><span class="annot"><a href="#local-6989586621679074926"><span class="hs-identifier hs-type">msg</span></a></span></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="AnyMessageDescriptor"><span class="annot"><a href="Data.ProtoLens.Message.html#AnyMessageDescriptor"><span class="hs-identifier hs-var">AnyMessageDescriptor</span></a></span></span><span>
</span><span id="line-255"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="anyTypeUrlLens"><span class="annot"><span class="annottext">forall msg. AnyMessageDescriptor msg -&gt; Lens' msg Text
</span><a href="Data.ProtoLens.Message.html#anyTypeUrlLens"><span class="hs-identifier hs-var hs-var">anyTypeUrlLens</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074926"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="anyValueLens"><span class="annot"><span class="annottext">forall msg. AnyMessageDescriptor msg -&gt; Lens' msg ByteString
</span><a href="Data.ProtoLens.Message.html#anyValueLens"><span class="hs-identifier hs-var hs-var">anyValueLens</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679074926"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span>
</span><span id="line-257"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-comment">-- | A class for protocol buffer enums that enables safe decoding.</span><span>
</span><span id="line-260"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Enum</span></span><span> </span><span class="annot"><a href="#local-6989586621679074919"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bounded</span></span><span> </span><span class="annot"><a href="#local-6989586621679074919"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MessageEnum"><span class="annot"><a href="Data.ProtoLens.Message.html#MessageEnum"><span class="hs-identifier hs-var">MessageEnum</span></a></span></span><span> </span><span id="local-6989586621679074919"><span class="annot"><a href="#local-6989586621679074919"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-comment">-- | Convert the given 'Int' to an enum value.  Returns 'Nothing' if</span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-comment">-- no corresponding value was defined in the .proto file.</span><span>
</span><span id="line-263"></span><span>    </span><span id="maybeToEnum"><span class="annot"><a href="Data.ProtoLens.Message.html#maybeToEnum"><span class="hs-identifier hs-type">maybeToEnum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679074919"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-comment">-- | Get the name of this enum as defined in the .proto file.  Used</span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-comment">-- for the human-readable output in @Data.ProtoLens.TextFormat@.</span><span>
</span><span id="line-266"></span><span>    </span><span id="showEnum"><span class="annot"><a href="Data.ProtoLens.Message.html#showEnum"><span class="hs-identifier hs-type">showEnum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679074919"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-comment">-- | Convert the given 'String' to an enum value. Returns 'Nothing' if</span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-comment">-- no corresponding value was defined in the .proto file.</span><span>
</span><span id="line-269"></span><span>    </span><span id="readEnum"><span class="annot"><a href="Data.ProtoLens.Message.html#readEnum"><span class="hs-identifier hs-type">readEnum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679074919"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-comment">-- | Utility function for building a message from a default value.</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- For example:</span><span>
</span><span id="line-273"></span><span class="hs-comment">--</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- &gt; instance Default A where ...</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- &gt; x, y :: Lens' A Int</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- &gt; m :: A</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- &gt; m = build ((x .~ 5) . (y .~ 7))</span><span>
</span><span id="line-278"></span><span id="local-6989586621679074918"><span class="annot"><a href="Data.ProtoLens.Message.html#build"><span class="hs-identifier hs-type">build</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074918"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679074918"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074918"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074918"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-279"></span><span id="build"><span class="annot"><span class="annottext">build :: forall a. Message a =&gt; (a -&gt; a) -&gt; a
</span><a href="Data.ProtoLens.Message.html#build"><span class="hs-identifier hs-var hs-var">build</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; msg
</span><a href="Data.ProtoLens.Message.html#defMessage"><span class="hs-identifier hs-var">defMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | A helper lens for accessing optional fields.</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- This is used as part of code generation, and should generally not be needed</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- explicitly.</span><span>
</span><span id="line-284"></span><span class="hs-comment">--</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- Note that 'maybeLens' does not satisfy the lens laws, which expect that @set</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- l (view l x) == x@.  For example,</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- &gt; set (maybeLens 'a') (view (maybeLens 'a') Nothing) == Just 'a'</span><span>
</span><span id="line-289"></span><span class="hs-comment">--</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- However, this is the behavior generally expected by users, and only matters</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- if we're explicitly checking whether a field is set.</span><span>
</span><span id="line-292"></span><span id="local-6989586621679074916"><span class="annot"><a href="Data.ProtoLens.Message.html#maybeLens"><span class="hs-identifier hs-type">maybeLens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679074916"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679074916"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679074916"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-293"></span><span id="maybeLens"><span class="annot"><span class="annottext">maybeLens :: forall b. b -&gt; Lens' (Maybe b) b
</span><a href="Data.ProtoLens.Message.html#maybeLens"><span class="hs-identifier hs-var hs-var">maybeLens</span></a></span></span><span> </span><span id="local-6989586621679074627"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679074627"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679074627"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- | Reverse every repeated (list) field in the message.</span><span>
</span><span id="line-295"></span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- During parsing, we store fields temporarily in reverse order,</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- and then un-reverse them at the end.  This helps avoid the quadratic blowup</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- from repeatedly appending to lists.</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- TODO: Benchmark how much of a problem this is in practice,</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- and whether it's still a net win for small protobufs.</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- If we decide on it more permanently, consider moving it to a more internal</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- module.</span><span>
</span><span id="line-303"></span><span id="local-6989586621679074904"><span id="local-6989586621679074905"><span class="annot"><a href="Data.ProtoLens.Message.html#reverseRepeatedFields"><span class="hs-identifier hs-type">reverseRepeatedFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679074905"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074904"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074904"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074904"><span class="hs-identifier hs-type">msg</span></a></span></span></span><span>
</span><span id="line-304"></span><span id="reverseRepeatedFields"><span class="annot"><span class="annottext">reverseRepeatedFields :: forall k msg. Map k (FieldDescriptor msg) -&gt; msg -&gt; msg
</span><a href="Data.ProtoLens.Message.html#reverseRepeatedFields"><span class="hs-identifier hs-var hs-var">reverseRepeatedFields</span></a></span></span><span> </span><span id="local-6989586621679074625"><span class="annot"><span class="annottext">Map k (FieldDescriptor msg)
</span><a href="#local-6989586621679074625"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621679074624"><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679074624"><span class="hs-identifier hs-var">x0</span></a></span></span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-comment">-- TODO: if it becomes a bottleneck, consider forcing</span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-comment">-- the full spine of each list.</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b k. (a -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><span class="hs-identifier hs-var">Map.foldl'</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; FieldDescriptor a -&gt; a
</span><a href="#local-6989586621679074622"><span class="hs-identifier hs-var">reverseListField</span></a></span><span> </span><span class="annot"><span class="annottext">msg
</span><a href="#local-6989586621679074624"><span class="hs-identifier hs-var">x0</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (FieldDescriptor msg)
</span><a href="#local-6989586621679074625"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-309"></span><span>    </span><span id="local-6989586621679074898"><span class="annot"><a href="#local-6989586621679074622"><span class="hs-identifier hs-type">reverseListField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679074898"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074898"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074898"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-310"></span><span>    </span><span id="local-6989586621679074622"><span class="annot"><span class="annottext">reverseListField :: forall a. a -&gt; FieldDescriptor a -&gt; a
</span><a href="#local-6989586621679074622"><span class="hs-identifier hs-var hs-var">reverseListField</span></a></span></span><span> </span><span id="local-6989586621679074621"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679074621"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#FieldDescriptor"><span class="hs-identifier hs-type">FieldDescriptor</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FieldTypeDescriptor value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#RepeatedField"><span class="hs-identifier hs-type">RepeatedField</span></a></span><span> </span><span class="annot"><span class="annottext">Packing
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679074620"><span class="annot"><span class="annottext">Lens' a [value]
</span><a href="#local-6989586621679074620"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s t a b. Setter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">Lens' a [value]
</span><a href="#local-6989586621679074620"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679074621"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><a href="#local-6989586621679074622"><span class="hs-identifier hs-var">reverseListField</span></a></span><span> </span><span id="local-6989586621679074612"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679074612"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">FieldDescriptor a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679074612"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- | A set of known message types. Can help encode/decode protobufs containing</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- @Data.ProtoLens.Any@ values in a more human-readable text format.</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- Registries can be combined using their 'Monoid' instance.</span><span>
</span><span id="line-318"></span><span class="hs-comment">--</span><span>
</span><span id="line-319"></span><span class="hs-comment">-- See the @withRegistry@ functions in 'Data.ProtoLens.TextFormat'</span><span>
</span><span id="line-320"></span><span class="hs-keyword">newtype</span><span> </span><span id="Registry"><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-var">Registry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Registry"><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-var">Registry</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-type">SomeMessageType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679074598"><span id="local-6989586621679074604"><span id="local-6989586621679074609"><span class="annot"><span class="annottext">NonEmpty Registry -&gt; Registry
Registry -&gt; Registry -&gt; Registry
forall b. Integral b =&gt; b -&gt; Registry -&gt; Registry
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: forall b. Integral b =&gt; b -&gt; Registry -&gt; Registry
$cstimes :: forall b. Integral b =&gt; b -&gt; Registry -&gt; Registry
sconcat :: NonEmpty Registry -&gt; Registry
$csconcat :: NonEmpty Registry -&gt; Registry
&lt;&gt; :: Registry -&gt; Registry -&gt; Registry
$c&lt;&gt; :: Registry -&gt; Registry -&gt; Registry
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup.Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679074579"><span id="local-6989586621679074583"><span id="local-6989586621679074588"><span class="annot"><span class="annottext">Semigroup Registry
Registry
[Registry] -&gt; Registry
Registry -&gt; Registry -&gt; Registry
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [Registry] -&gt; Registry
$cmconcat :: [Registry] -&gt; Registry
mappend :: Registry -&gt; Registry -&gt; Registry
$cmappend :: Registry -&gt; Registry -&gt; Registry
mempty :: Registry
$cmempty :: Registry
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">-- | Build a 'Registry' containing a single proto type.</span><span>
</span><span id="line-324"></span><span class="hs-comment">--</span><span>
</span><span id="line-325"></span><span class="hs-comment">--   Example:</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- &gt; register (Proxy :: Proxy Proto.My.Proto.Type)</span><span>
</span><span id="line-327"></span><span class="annot"><a href="Data.ProtoLens.Message.html#register"><span class="hs-identifier hs-type">register</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679074873"><span class="annot"><a href="#local-6989586621679074873"><span class="hs-identifier hs-type">msg</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074873"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679074873"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span>
</span><span id="line-328"></span><span id="register"><span class="annot"><span class="annottext">register :: forall msg. Message msg =&gt; Proxy msg -&gt; Registry
</span><a href="Data.ProtoLens.Message.html#register"><span class="hs-identifier hs-var hs-var">register</span></a></span></span><span> </span><span id="local-6989586621679074571"><span class="annot"><span class="annottext">Proxy msg
</span><a href="#local-6989586621679074571"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text SomeMessageType -&gt; Registry
</span><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-var">Registry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Proxy msg -&gt; Text
</span><a href="Data.ProtoLens.Message.html#messageName"><span class="hs-identifier hs-var">messageName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679074873"><span class="hs-identifier hs-type">msg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Proxy msg -&gt; SomeMessageType
</span><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-var">SomeMessageType</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy msg
</span><a href="#local-6989586621679074571"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">-- | Look up a message type by name (e.g.,</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- @&quot;type.googleapis.com/google.protobuf.FloatValue&quot;@). The URL corresponds to</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- the field @google.protobuf.Any.type_url@.</span><span>
</span><span id="line-333"></span><span class="annot"><a href="Data.ProtoLens.Message.html#lookupRegistered"><span class="hs-identifier hs-type">lookupRegistered</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-type">SomeMessageType</span></a></span><span>
</span><span id="line-334"></span><span id="lookupRegistered"><span class="annot"><span class="annottext">lookupRegistered :: Text -&gt; Registry -&gt; Maybe SomeMessageType
</span><a href="Data.ProtoLens.Message.html#lookupRegistered"><span class="hs-identifier hs-var hs-var">lookupRegistered</span></a></span></span><span> </span><span id="local-6989586621679074568"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679074568"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.ProtoLens.Message.html#Registry"><span class="hs-identifier hs-type">Registry</span></a></span><span> </span><span id="local-6989586621679074567"><span class="annot"><span class="annottext">Map Text SomeMessageType
</span><a href="#local-6989586621679074567"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.breakOnEnd</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;/&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679074568"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text SomeMessageType
</span><a href="#local-6989586621679074567"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-keyword">data</span><span> </span><span id="SomeMessageType"><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-var">SomeMessageType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-337"></span><span>    </span><span id="local-6989586621679074565"><span id="SomeMessageType"><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-var">SomeMessageType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074565"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679074565"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#SomeMessageType"><span class="hs-identifier hs-type">SomeMessageType</span></a></span></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-comment">-- TODO: recursively</span><span>
</span><span id="line-340"></span><span id="local-6989586621679074866"><span class="annot"><a href="Data.ProtoLens.Message.html#discardUnknownFields"><span class="hs-identifier hs-type">discardUnknownFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.ProtoLens.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679074866"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074866"><span class="hs-identifier hs-type">msg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679074866"><span class="hs-identifier hs-type">msg</span></a></span></span><span>
</span><span id="line-341"></span><span id="discardUnknownFields"><span class="annot"><span class="annottext">discardUnknownFields :: forall msg. Message msg =&gt; msg -&gt; msg
</span><a href="Data.ProtoLens.Message.html#discardUnknownFields"><span class="hs-identifier hs-var hs-var">discardUnknownFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s t a b. Setter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; Lens' msg FieldSet
</span><a href="Data.ProtoLens.Message.html#unknownFields"><span class="hs-identifier hs-var">unknownFields</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-342"></span></pre></body></html>