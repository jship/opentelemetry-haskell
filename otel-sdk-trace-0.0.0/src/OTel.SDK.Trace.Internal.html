<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BlockArguments #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE StandaloneKindSignatures #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE StrictData #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">OTel.SDK.Trace.Internal</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Disclaimer</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- $disclaimer</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier">TracerProviderSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultTracerProviderSpec"><span class="hs-identifier">defaultTracerProviderSpec</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withTracerProvider"><span class="hs-identifier">withTracerProvider</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withTracerProviderIO"><span class="hs-identifier">withTracerProviderIO</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier">SpanProcessor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildSpanProcessor"><span class="hs-identifier">buildSpanProcessor</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier">SimpleSpanProcessorSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSimpleSpanProcessorSpec"><span class="hs-identifier">defaultSimpleSpanProcessorSpec</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessor"><span class="hs-identifier">simpleSpanProcessor</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier">SpanProcessorSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSpanProcessorSpec"><span class="hs-identifier">defaultSpanProcessorSpec</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier">SpanExportResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier">SpanExporter</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildSpanExporter"><span class="hs-identifier">buildSpanExporter</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier">OTLPSpanExporterSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultOTLPSpanExporterSpec"><span class="hs-identifier">defaultOTLPSpanExporterSpec</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporter"><span class="hs-identifier">otlpSpanExporter</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPProtocol"><span class="hs-identifier">OTLPProtocol</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#httpProtobufProtocol"><span class="hs-identifier">httpProtobufProtocol</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterItem"><span class="hs-identifier">OTLPSpanExporterItem</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#stmSpanExporter"><span class="hs-identifier">stmSpanExporter</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier">SpanExporterSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier">defaultSpanExporterSpec</span></a></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier">Sampler</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildSampler"><span class="hs-identifier">buildSampler</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier">SamplerSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSamplerSpec"><span class="hs-identifier">defaultSamplerSpec</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler"><span class="hs-identifier">alwaysOnSampler</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler"><span class="hs-identifier">alwaysOffSampler</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier">ParentBasedSamplerSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultParentBasedSamplerSpec"><span class="hs-identifier">defaultParentBasedSamplerSpec</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#parentBasedSampler"><span class="hs-identifier">parentBasedSampler</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#constDecisionSampler"><span class="hs-identifier">constDecisionSampler</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier">SamplerInput</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier">SamplingResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSamplingResult"><span class="hs-identifier">defaultSamplingResult</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier">SamplingDecision</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingDecisionDrop"><span class="hs-identifier">samplingDecisionDrop</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingDecisionRecordOnly"><span class="hs-identifier">samplingDecisionRecordOnly</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingDecisionRecordAndSample"><span class="hs-identifier">samplingDecisionRecordAndSample</span></a></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier">SpanProcessorM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpanExporter"><span class="hs-identifier">askSpanExporter</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runSpanProcessorM"><span class="hs-identifier">runSpanProcessorM</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier">SpanExporterM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askResource"><span class="hs-identifier">askResource</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runSpanExporterM"><span class="hs-identifier">runSpanExporterM</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerM"><span class="hs-identifier">SamplerM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runSamplerM"><span class="hs-identifier">runSamplerM</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier">IdGeneratorM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runIdGeneratorM"><span class="hs-identifier">runIdGeneratorM</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier">IdGenerator</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildIdGenerator"><span class="hs-identifier">buildIdGenerator</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier">IdGeneratorSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultIdGeneratorSpec"><span class="hs-identifier">defaultIdGeneratorSpec</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier">PRNG</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#genUniform"><span class="hs-identifier">genUniform</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#newPRNGRef"><span class="hs-identifier">newPRNGRef</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">OnException</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askException</span></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askExceptionMetadata</span></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">OnTimeout</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askTimeoutMicros</span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askTimeoutMetadata</span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier">OnSpansExported</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpansExported"><span class="hs-identifier">askSpansExported</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpansExportedResult"><span class="hs-identifier">askSpansExportedResult</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpansExportedMetadata"><span class="hs-identifier">askSpansExportedMetadata</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier">Batch</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#singletonBatch"><span class="hs-identifier">singletonBatch</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#fromListBatch"><span class="hs-identifier">fromListBatch</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier">ConcurrentWorkersSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultConcurrentWorkersSpec"><span class="hs-identifier">defaultConcurrentWorkersSpec</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkers"><span class="hs-identifier">ConcurrentWorkers</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withConcurrentWorkers"><span class="hs-identifier">withConcurrentWorkers</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier">unlessSTM</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withAll"><span class="hs-identifier">withAll</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSystemSeed"><span class="hs-identifier">defaultSystemSeed</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultManager"><span class="hs-identifier">defaultManager</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanSummary"><span class="hs-identifier">spanSummary</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#redactHttpExceptionHeaders"><span class="hs-identifier">redactHttpExceptionHeaders</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#if MIN_VERSION_base(4,18,0)
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Alternative</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Alternative</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Applicative</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withMVar</span></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.Async</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Async</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">waitCatch</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withAsync</span></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.STM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">STM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">atomically</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newTVarIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readTVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">writeTVar</span></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.STM.TBMQueue</span></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">TBMQueue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">closeTBMQueue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isClosedTBMQueue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newTBMQueueIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readTBMQueue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tryWriteTBMQueue</span></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.STM.TMQueue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TMQueue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">closeTMQueue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">writeTMQueue</span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">AsyncException</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SomeAsyncException</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">evaluate</span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception.Safe</span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Exception</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Handler</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadCatch</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadMask</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadThrow</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">catchAny</span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">finally</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">throwM</span></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">join</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Cont</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ContT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">cont</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runCont</span></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Unlift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadUnliftIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Logger.Aeson</span></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">LoggingT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Message</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadLoggerIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadLogger</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SeriesElem</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">logDebug</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">logError</span></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ReaderT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Retry</span></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">RetryAction</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">RetryPolicyM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">RetryStatus</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">applyPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fullJitterBackoff</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">limitRetries</span></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">recoveringDynamic</span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Pair</span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromRight</span></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fold</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">for_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traverse_</span></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">on</span></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromJust</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Ap</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pack</span></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Time</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">NominalDiffTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">UTCTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultTimeLocale</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">diffUTCTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getCurrentTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">parseTimeM</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">for</span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeRep</span></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Vector</span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">CallStack</span></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.~)</span></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Client</span></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">HttpException</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">HttpExceptionContent</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Request</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">RequestBody</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Response</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Manager</span></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">httpLbs</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">requestFromURI</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">setRequestCheckStatus</span></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Client.Internal</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">responseOriginalRequest</span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Client.TLS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">newTlsManager</span></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types</span></span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Status</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Header</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">badGateway502</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">gatewayTimeout504</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">serviceUnavailable503</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tooManyRequests429</span></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types.Header</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HeaderName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">hRetryAfter</span></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.URI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">URI</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">parseURI</span></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.API.Common</span></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Attr</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">AttrType</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">AttrsFor</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">InstrumentationScope</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">InstrumentationScopeName</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unInstrumentationScopeName</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">KV</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(.@)</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Key</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unKey</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TimestampSource</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Version</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">AttrVals</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Attrs</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">AttrsBuilder</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">AttrsLimits</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Logger</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Timestamp</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askException</span></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askExceptionMetadata</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askTimeoutMetadata</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">askTimeoutMicros</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultAttrsLimits</span></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">droppedAttrsCount</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">foldMapWithKeyAttrs</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">schemaURLToText</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">timestampFromNanoseconds</span></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">timestampToNanoseconds</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">with</span></span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.API.Common.Internal</span></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">AttrVals</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">InstrumentationScope</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">OnException</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">OnTimeout</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.API.Context.Core</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Context</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookupContext</span></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.API.Trace</span></span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Span</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanContext</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanEvent</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanEventName</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanKind</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanLineage</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanLink</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanName</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unSpanName</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanSpec</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanStatus</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MutableSpan</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanId</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanLinks</span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TraceId</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TraceState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Tracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TracerProvider</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">UpdateSpanSpec</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">contextKeySpan</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">emptySpanContext</span></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">emptyTraceState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">frozenTimestamp</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanContextIsSampled</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanContextIsValid</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanEventsToList</span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanIdFromWords</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanIdToBytesBuilder</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanIsSampled</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">spanLinksToList</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traceFlagsSampled</span></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traceIdFromWords</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traceIdToBytesBuilder</span></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-identifier">CODE_FILEPATH</span></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-identifier">CODE_FUNCTION</span></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-identifier">CODE_LINENO</span></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-identifier">CODE_NAMESPACE</span></span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.API.Trace.Core.Internal</span></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Span</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanContext</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanLinkSpec</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanLinkSpecs</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanLinks</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SpanSpec</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Tracer</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TracerProvider</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">buildSpanUpdater</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">freezeSpan</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unsafeModifyMutableSpan</span></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unsafeNewMutableSpan</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unsafeReadMutableSpan</span></span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.Resource.Core</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">buildResourcePure</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultResourceBuilder</span></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.Resource.Core.Internal</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Resource</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">span</span></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Clock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Clock</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Realtime</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toNanoSecs</span></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO.Unsafe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unsafePerformIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Random.MWC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Variate</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GenIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Seed</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">createSystemSeed</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromSeed</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">initialize</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">uniform</span></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Timeout</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">timeout</span></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Builder</span></span><span>
</span><span id="line-217"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ByteString.Char8</span></span><span>
</span><span id="line-218"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.DList</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DList</span></span><span>
</span><span id="line-219"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-220"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ProtoLens</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ProtoLens</span></span><span>
</span><span id="line-221"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-222"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Stack</span></span><span>
</span><span id="line-223"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Collector.Trace.V1.TraceService</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Collector</span></span><span>
</span><span id="line-224"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Collector.Trace.V1.TraceService_Fields</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Collector</span></span><span>
</span><span id="line-225"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Common.V1.Common</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Common</span></span><span>
</span><span id="line-226"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Common.V1.Common_Fields</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Common</span></span><span>
</span><span id="line-227"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Resource.V1.Resource</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Resource</span></span><span>
</span><span id="line-228"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Resource.V1.Resource_Fields</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Resource</span></span><span>
</span><span id="line-229"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Trace.V1.Trace</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Trace</span></span><span>
</span><span id="line-230"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">OTel.SDK.OTLP.Bindings.Trace.V1.Trace_Fields</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OTLP.Trace</span></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-keyword">data</span><span> </span><span id="TracerProviderSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-var">TracerProviderSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TracerProviderSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-var">TracerProviderSpec</span></a></span></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="tracerProviderSpecNow"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; IO Timestamp
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecNow"><span class="hs-identifier hs-var hs-var">tracerProviderSpecNow</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Timestamp</span></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecLogger"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; Logger
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecLogger"><span class="hs-identifier hs-var hs-var">tracerProviderSpecLogger</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSeed"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; Seed
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSeed"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSeed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Seed</span></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecIdGenerator"><span class="annot"><span class="annottext">TracerProviderSpec
-&gt; forall a. Logger -&gt; (IdGeneratorSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecIdGenerator"><span class="hs-identifier hs-var hs-var">tracerProviderSpecIdGenerator</span></a></span></span><span>
</span><span id="line-237"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144841"><span class="annot"><a href="#local-6989586621679144841"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-type">IdGeneratorSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144841"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144841"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSpanProcessors"><span class="annot"><span class="annottext">TracerProviderSpec
-&gt; forall a. [Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanProcessors"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSpanProcessors</span></a></span></span><span>
</span><span id="line-239"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144844"><span class="annot"><a href="#local-6989586621679144844"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-type">SpanProcessorSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144844"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144844"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSampler"><span class="annot"><span class="annottext">TracerProviderSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSampler"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSampler</span></a></span></span><span>
</span><span id="line-241"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144847"><span class="annot"><a href="#local-6989586621679144847"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144847"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144847"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecResource"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; Resource Attrs
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecResource"><span class="hs-identifier hs-var hs-var">tracerProviderSpecResource</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSpanAttrsLimits"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; AttrsLimits 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanAttrsLimits"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSpanAttrsLimits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsLimits</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">AttrsForSpan</span></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSpanEventAttrsLimits"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; AttrsLimits 'AttrsForSpanEvent
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanEventAttrsLimits"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSpanEventAttrsLimits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsLimits</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">AttrsForSpanEvent</span></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSpanLinkAttrsLimits"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; AttrsLimits 'AttrsForSpanLink
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanLinkAttrsLimits"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSpanLinkAttrsLimits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsLimits</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">AttrsForSpanLink</span></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecCallStackAttrs"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; CallStack -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecCallStackAttrs"><span class="hs-identifier hs-var hs-var">tracerProviderSpecCallStackAttrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CallStack</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsBuilder</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">AttrsForSpan</span></span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="tracerProviderSpecSpanContextMeta"><span class="annot"><span class="annottext">TracerProviderSpec -&gt; SpanContext -&gt; [Pair]
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanContextMeta"><span class="hs-identifier hs-var hs-var">tracerProviderSpecSpanContextMeta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanContext</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Pair</span></span><span class="hs-special">]</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultTracerProviderSpec"><span class="hs-identifier hs-type">defaultTracerProviderSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-type">TracerProviderSpec</span></a></span><span>
</span><span id="line-251"></span><span id="defaultTracerProviderSpec"><span class="annot"><span class="annottext">defaultTracerProviderSpec :: TracerProviderSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultTracerProviderSpec"><span class="hs-identifier hs-var hs-var">defaultTracerProviderSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-type">TracerProviderSpec</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecNow :: IO Timestamp
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecNow"><span class="hs-identifier hs-var">tracerProviderSpecNow</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-254"></span><span>        </span><span class="annot"><span class="annottext">(TimeSpec -&gt; Timestamp) -&gt; IO TimeSpec -&gt; IO Timestamp
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Timestamp
</span><span class="hs-identifier hs-var">timestampFromNanoseconds</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Timestamp)
-&gt; (TimeSpec -&gt; Integer) -&gt; TimeSpec -&gt; Timestamp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TimeSpec -&gt; Integer
</span><span class="hs-identifier hs-var">toNanoSecs</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO TimeSpec -&gt; IO Timestamp) -&gt; IO TimeSpec -&gt; IO Timestamp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clock -&gt; IO TimeSpec
</span><span class="hs-identifier hs-var">getTime</span></span><span> </span><span class="annot"><span class="annottext">Clock
</span><span class="hs-identifier hs-var">Realtime</span></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecLogger :: Logger
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecLogger"><span class="hs-identifier hs-var">tracerProviderSpecLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSeed :: Seed
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSeed"><span class="hs-identifier hs-var">tracerProviderSpecSeed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seed
</span><a href="OTel.SDK.Trace.Internal.html#defaultSystemSeed"><span class="hs-identifier hs-var">defaultSystemSeed</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecIdGenerator :: forall a. Logger -&gt; (IdGeneratorSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecIdGenerator"><span class="hs-identifier hs-var">tracerProviderSpecIdGenerator</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146126"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146126"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdGeneratorSpec -&gt; (IdGeneratorSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">IdGeneratorSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultIdGeneratorSpec"><span class="hs-identifier hs-var">defaultIdGeneratorSpec</span></a></span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanProcessors :: forall a. [Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanProcessors"><span class="hs-identifier hs-var">tracerProviderSpecSpanProcessors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
forall a. [Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSampler :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSampler"><span class="hs-identifier hs-var">tracerProviderSpecSampler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146128"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146128"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SamplerSpec -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSamplerSpec"><span class="hs-identifier hs-var">defaultSamplerSpec</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecResource :: Resource Attrs
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecResource"><span class="hs-identifier hs-var">tracerProviderSpecResource</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>        </span><span class="annot"><span class="annottext">Resource Attrs
-&gt; Either ResourceMergeError (Resource Attrs) -&gt; Resource Attrs
forall b a. b -&gt; Either a b -&gt; b
</span><span class="hs-identifier hs-var">fromRight</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Resource Attrs
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;defaultTracerProviderSpec: defaultResource is never a Left&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either ResourceMergeError (Resource Attrs) -&gt; Resource Attrs)
-&gt; Either ResourceMergeError (Resource Attrs) -&gt; Resource Attrs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-262"></span><span>          </span><span class="annot"><span class="annottext">ResourceBuilder -&gt; Either ResourceMergeError (Resource Attrs)
</span><span class="hs-identifier hs-var">buildResourcePure</span></span><span> </span><span class="annot"><span class="annottext">(ResourceBuilder -&gt; Either ResourceMergeError (Resource Attrs))
-&gt; ResourceBuilder -&gt; Either ResourceMergeError (Resource Attrs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ResourceBuilder
</span><span class="hs-identifier hs-var">defaultResourceBuilder</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;unknown_service&quot;</span></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanAttrsLimits :: AttrsLimits 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanAttrsLimits"><span class="hs-identifier hs-var">tracerProviderSpecSpanAttrsLimits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpan
forall (af :: AttrsFor). AttrsLimits af
</span><span class="hs-identifier hs-var">defaultAttrsLimits</span></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanEventAttrsLimits :: AttrsLimits 'AttrsForSpanEvent
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanEventAttrsLimits"><span class="hs-identifier hs-var">tracerProviderSpecSpanEventAttrsLimits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanEvent
forall (af :: AttrsFor). AttrsLimits af
</span><span class="hs-identifier hs-var">defaultAttrsLimits</span></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanLinkAttrsLimits :: AttrsLimits 'AttrsForSpanLink
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanLinkAttrsLimits"><span class="hs-identifier hs-var">tracerProviderSpecSpanLinkAttrsLimits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanLink
forall (af :: AttrsFor). AttrsLimits af
</span><span class="hs-identifier hs-var">defaultAttrsLimits</span></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecCallStackAttrs :: CallStack -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecCallStackAttrs"><span class="hs-identifier hs-var">tracerProviderSpecCallStackAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146130"><span class="annot"><span class="annottext">CallStack
</span><a href="#local-6989586621679146130"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-267"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CallStack -&gt; [([Char], SrcLoc)]
</span><span class="hs-identifier hs-var">Stack.getCallStack</span></span><span> </span><span class="annot"><span class="annottext">CallStack
</span><a href="#local-6989586621679146130"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-268"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679146132"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679146132"><span class="hs-identifier hs-var">function</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146133"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679146133"><span class="hs-identifier hs-var">srcLoc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[([Char], SrcLoc)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-269"></span><span>            </span><span class="annot"><span class="annottext">Key Text
</span><span class="hs-identifier hs-var">CODE_FUNCTION</span></span><span> </span><span class="annot"><span class="annottext">Key Text -&gt; [Char] -&gt; AttrsBuilder 'AttrsForSpan
forall kv from to.
(KV kv, KVConstraints kv from to) =&gt;
Key to -&gt; from -&gt; kv
forall from to.
KVConstraints (AttrsBuilder 'AttrsForSpan) from to =&gt;
Key to -&gt; from -&gt; AttrsBuilder 'AttrsForSpan
</span><span class="hs-operator hs-var">.@</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679146132"><span class="hs-identifier hs-var">function</span></a></span><span>
</span><span id="line-270"></span><span>              </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
-&gt; AttrsBuilder 'AttrsForSpan -&gt; AttrsBuilder 'AttrsForSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Key Text
</span><span class="hs-identifier hs-var">CODE_NAMESPACE</span></span><span> </span><span class="annot"><span class="annottext">Key Text -&gt; [Char] -&gt; AttrsBuilder 'AttrsForSpan
forall kv from to.
(KV kv, KVConstraints kv from to) =&gt;
Key to -&gt; from -&gt; kv
forall from to.
KVConstraints (AttrsBuilder 'AttrsForSpan) from to =&gt;
Key to -&gt; from -&gt; AttrsBuilder 'AttrsForSpan
</span><span class="hs-operator hs-var">.@</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; [Char]
</span><span class="hs-identifier hs-var">srcLocModule</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679146133"><span class="hs-identifier hs-var">srcLoc</span></a></span><span>
</span><span id="line-271"></span><span>              </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
-&gt; AttrsBuilder 'AttrsForSpan -&gt; AttrsBuilder 'AttrsForSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Key Text
</span><span class="hs-identifier hs-var">CODE_FILEPATH</span></span><span> </span><span class="annot"><span class="annottext">Key Text -&gt; [Char] -&gt; AttrsBuilder 'AttrsForSpan
forall kv from to.
(KV kv, KVConstraints kv from to) =&gt;
Key to -&gt; from -&gt; kv
forall from to.
KVConstraints (AttrsBuilder 'AttrsForSpan) from to =&gt;
Key to -&gt; from -&gt; AttrsBuilder 'AttrsForSpan
</span><span class="hs-operator hs-var">.@</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; [Char]
</span><span class="hs-identifier hs-var">srcLocFile</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679146133"><span class="hs-identifier hs-var">srcLoc</span></a></span><span>
</span><span id="line-272"></span><span>              </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
-&gt; AttrsBuilder 'AttrsForSpan -&gt; AttrsBuilder 'AttrsForSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Key Int64
</span><span class="hs-identifier hs-var">CODE_LINENO</span></span><span> </span><span class="annot"><span class="annottext">Key Int64 -&gt; Int -&gt; AttrsBuilder 'AttrsForSpan
forall kv from to.
(KV kv, KVConstraints kv from to) =&gt;
Key to -&gt; from -&gt; kv
forall from to.
KVConstraints (AttrsBuilder 'AttrsForSpan) from to =&gt;
Key to -&gt; from -&gt; AttrsBuilder 'AttrsForSpan
</span><span class="hs-operator hs-var">.@</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; Int
</span><span class="hs-identifier hs-var">srcLocStartLine</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679146133"><span class="hs-identifier hs-var">srcLoc</span></a></span><span>
</span><span id="line-273"></span><span>          </span><span class="annot"><span class="annottext">[([Char], SrcLoc)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanContextMeta :: SpanContext -&gt; [Pair]
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanContextMeta"><span class="hs-identifier hs-var">tracerProviderSpecSpanContextMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146137"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146137"><span class="hs-identifier hs-var">spanContext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-275"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanContext&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SpanContext -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146137"><span class="hs-identifier hs-var">spanContext</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withTracerProvider"><span class="hs-identifier hs-type">withTracerProvider</span></a></span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144886"><span class="annot"><a href="#local-6989586621679144886"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679144889"><span class="annot"><a href="#local-6989586621679144889"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-280"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144886"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-type">TracerProviderSpec</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TracerProvider</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679144886"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679144889"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679144886"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679144889"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-284"></span><span id="withTracerProvider"><span class="annot"><span class="annottext">withTracerProvider :: forall (m :: * -&gt; *) a.
MonadUnliftIO m =&gt;
TracerProviderSpec -&gt; (TracerProvider -&gt; m a) -&gt; m a
</span><a href="OTel.SDK.Trace.Internal.html#withTracerProvider"><span class="hs-identifier hs-var hs-var">withTracerProvider</span></a></span></span><span> </span><span id="local-6989586621679146140"><span class="annot"><span class="annottext">TracerProviderSpec
</span><a href="#local-6989586621679146140"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span id="local-6989586621679146141"><span class="annot"><span class="annottext">TracerProvider -&gt; m a
</span><a href="#local-6989586621679146141"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146143"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679146143"><span class="hs-identifier hs-var">runInIO</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TracerProviderSpec -&gt; (TracerProvider -&gt; IO a) -&gt; IO a
forall a. TracerProviderSpec -&gt; (TracerProvider -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#withTracerProviderIO"><span class="hs-identifier hs-var">withTracerProviderIO</span></a></span><span> </span><span class="annot"><span class="annottext">TracerProviderSpec
</span><a href="#local-6989586621679146140"><span class="hs-identifier hs-var">spec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679146143"><span class="hs-identifier hs-var">runInIO</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a) -&gt; (TracerProvider -&gt; m a) -&gt; TracerProvider -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TracerProvider -&gt; m a
</span><a href="#local-6989586621679146141"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withTracerProviderIO"><span class="hs-identifier hs-type">withTracerProviderIO</span></a></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144895"><span class="annot"><a href="#local-6989586621679144895"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-289"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-type">TracerProviderSpec</span></a></span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TracerProvider</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144895"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-292"></span><span id="withTracerProviderIO"><span class="annot"><span class="annottext">withTracerProviderIO :: forall a. TracerProviderSpec -&gt; (TracerProvider -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#withTracerProviderIO"><span class="hs-identifier hs-var hs-var">withTracerProviderIO</span></a></span></span><span> </span><span id="local-6989586621679146241"><span class="annot"><span class="annottext">TracerProviderSpec
</span><a href="#local-6989586621679146241"><span class="hs-identifier hs-var">tracerProviderSpec</span></a></span></span><span> </span><span id="local-6989586621679146242"><span class="annot"><span class="annottext">TracerProvider -&gt; IO a
</span><a href="#local-6989586621679146242"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-293"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">Message
</span><span class="hs-string">&quot;Acquiring tracer provider&quot;</span></span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621679146246"><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146246"><span class="hs-identifier hs-var">shutdownRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO (TVar Bool)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">newTVarIO</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621679146247"><span class="annot"><span class="annottext">MVar PRNG
</span><a href="#local-6989586621679146247"><span class="hs-identifier hs-var">prngRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Seed -&gt; IO (MVar PRNG)
</span><a href="OTel.SDK.Trace.Internal.html#newPRNGRef"><span class="hs-identifier hs-var">newPRNGRef</span></a></span><span> </span><span class="annot"><span class="annottext">Seed
</span><a href="#local-6989586621679146248"><span class="hs-identifier hs-var">seed</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span id="local-6989586621679146249"><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146249"><span class="hs-identifier hs-var">defIdGenerator</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; IdGeneratorSpec -&gt; IO IdGenerator
forall (m :: * -&gt; *).
MonadIO m =&gt;
Logger -&gt; IdGeneratorSpec -&gt; m IdGenerator
</span><a href="OTel.SDK.Trace.Internal.html#buildIdGenerator"><span class="hs-identifier hs-var">buildIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">IdGeneratorSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultIdGeneratorSpec"><span class="hs-identifier hs-var">defaultIdGeneratorSpec</span></a></span><span>
</span><span id="line-298"></span><span>  </span><span class="annot"><span class="annottext">(IdGenerator -&gt; IO a) -&gt; IO a
forall r. (IdGenerator -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146250"><span class="hs-identifier hs-var">withIdGenerator</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146251"><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146251"><span class="hs-identifier hs-var">idGenerator</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><span class="annottext">(Sampler -&gt; IO a) -&gt; IO a
forall r. (Sampler -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146252"><span class="hs-identifier hs-var">withSampler</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146253"><span class="annot"><span class="annottext">Sampler
</span><a href="#local-6989586621679146253"><span class="hs-identifier hs-var">sampler</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-300"></span><span>      </span><span class="annot"><span class="annottext">(SpanProcessor -&gt; IO a) -&gt; IO a
forall r. (SpanProcessor -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146254"><span class="hs-identifier hs-var">withCompositeSpanProcessor</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146255"><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146255"><span class="hs-identifier hs-var">spanProcessor</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679146256"><span class="annot"><span class="annottext">tracerProvider :: TracerProvider
</span><a href="#local-6989586621679146256"><span class="hs-identifier hs-var hs-var">tracerProvider</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">TracerProvider</span></span><span>
</span><span id="line-303"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tracerProviderGetTracer :: InstrumentationScope -&gt; IO Tracer
</span><span class="hs-identifier hs-var">tracerProviderGetTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-304"></span><span>                    </span><span class="annot"><span class="annottext">MVar PRNG
-&gt; IdGenerator
-&gt; IdGenerator
-&gt; Sampler
-&gt; SpanProcessor
-&gt; InstrumentationScope
-&gt; IO Tracer
</span><a href="#local-6989586621679146259"><span class="hs-identifier hs-var">getTracerWith</span></a></span><span> </span><span class="annot"><span class="annottext">MVar PRNG
</span><a href="#local-6989586621679146247"><span class="hs-identifier hs-var">prngRef</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146249"><span class="hs-identifier hs-var">defIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146251"><span class="hs-identifier hs-var">idGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">Sampler
</span><a href="#local-6989586621679146253"><span class="hs-identifier hs-var">sampler</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146255"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span>
</span><span id="line-305"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderShutdown :: IO ()
</span><span class="hs-identifier hs-var">tracerProviderShutdown</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-306"></span><span>                    </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146246"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-307"></span><span>                      </span><span class="annot"><span class="annottext">TVar Bool -&gt; Bool -&gt; STM ()
forall a. TVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">writeTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146246"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-308"></span><span>                      </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; STM (IO ())) -&gt; IO () -&gt; STM (IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var">spanProcessorShutdown</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146255"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span>
</span><span id="line-309"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderForceFlush :: IO ()
</span><span class="hs-identifier hs-var">tracerProviderForceFlush</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-310"></span><span>                    </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146246"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-311"></span><span>                      </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; STM (IO ())) -&gt; IO () -&gt; STM (IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var">spanProcessorForceFlush</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146255"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span>
</span><span id="line-312"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-313"></span><span>        </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-314"></span><span>          </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Acquired tracer provider&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-315"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;resource&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Resource Attrs -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146265"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-316"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;limits&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-317"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;attributes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-318"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;span&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; AttrsLimits 'AttrsForSpan -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpan
</span><a href="#local-6989586621679146266"><span class="hs-identifier hs-var">spanAttrsLimits</span></a></span><span>
</span><span id="line-319"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanEvent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; AttrsLimits 'AttrsForSpanEvent -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanEvent
</span><a href="#local-6989586621679146267"><span class="hs-identifier hs-var">spanEventAttrsLimits</span></a></span><span>
</span><span id="line-320"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanLink&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; AttrsLimits 'AttrsForSpanLink -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanLink
</span><a href="#local-6989586621679146268"><span class="hs-identifier hs-var">spanLinkAttrsLimits</span></a></span><span>
</span><span id="line-321"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-322"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-323"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-324"></span><span>        </span><span class="annot"><span class="annottext">TracerProvider -&gt; IO a
</span><a href="#local-6989586621679146242"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">TracerProvider
</span><a href="#local-6989586621679146256"><span class="hs-identifier hs-var">tracerProvider</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO () -&gt; IO a
forall (m :: * -&gt; *) a b.
(HasCallStack, MonadMask m) =&gt;
m a -&gt; m b -&gt; m a
</span><span class="hs-operator hs-var">`finally`</span></span><span> </span><span class="annot"><span class="annottext">TracerProvider -&gt; IO ()
</span><span class="hs-identifier hs-var">tracerProviderShutdown</span></span><span> </span><span class="annot"><span class="annottext">TracerProvider
</span><a href="#local-6989586621679146256"><span class="hs-identifier hs-var">tracerProvider</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621679144920"><span class="annot"><a href="#local-6989586621679146250"><span class="hs-identifier hs-type">withIdGenerator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144920"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144920"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-327"></span><span>  </span><span id="local-6989586621679146250"><span class="annot"><span class="annottext">withIdGenerator :: forall r. (IdGenerator -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146250"><span class="hs-identifier hs-var hs-var">withIdGenerator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">ContT r IO IdGenerator -&gt; (IdGenerator -&gt; IO r) -&gt; IO r
forall {k} (r :: k) (m :: k -&gt; *) a.
ContT r m a -&gt; (a -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var">runContT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-329"></span><span>      </span><span id="local-6989586621679146275"><span class="annot"><span class="annottext">IdGeneratorSpec
</span><a href="#local-6989586621679146275"><span class="hs-identifier hs-var">acquiredIdGenerator</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((IdGeneratorSpec -&gt; IO r) -&gt; IO r) -&gt; ContT r IO IdGeneratorSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((IdGeneratorSpec -&gt; IO r) -&gt; IO r) -&gt; ContT r IO IdGeneratorSpec)
-&gt; ((IdGeneratorSpec -&gt; IO r) -&gt; IO r)
-&gt; ContT r IO IdGeneratorSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (IdGeneratorSpec -&gt; IO r) -&gt; IO r
forall a. Logger -&gt; (IdGeneratorSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146277"><span class="hs-identifier hs-var">idGeneratorSpec</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><span class="annottext">IO IdGenerator -&gt; ContT r IO IdGenerator
forall a. IO a -&gt; ContT r IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO IdGenerator -&gt; ContT r IO IdGenerator)
-&gt; IO IdGenerator -&gt; ContT r IO IdGenerator
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; IdGeneratorSpec -&gt; IO IdGenerator
forall (m :: * -&gt; *).
MonadIO m =&gt;
Logger -&gt; IdGeneratorSpec -&gt; m IdGenerator
</span><a href="OTel.SDK.Trace.Internal.html#buildIdGenerator"><span class="hs-identifier hs-var">buildIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">IdGeneratorSpec
</span><a href="#local-6989586621679146275"><span class="hs-identifier hs-var">acquiredIdGenerator</span></a></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span>  </span><span id="local-6989586621679144922"><span class="annot"><a href="#local-6989586621679146252"><span class="hs-identifier hs-type">withSampler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-type">Sampler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144922"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144922"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-333"></span><span>  </span><span id="local-6989586621679146252"><span class="annot"><span class="annottext">withSampler :: forall r. (Sampler -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146252"><span class="hs-identifier hs-var hs-var">withSampler</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><span class="annottext">ContT r IO Sampler -&gt; (Sampler -&gt; IO r) -&gt; IO r
forall {k} (r :: k) (m :: k -&gt; *) a.
ContT r m a -&gt; (a -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var">runContT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-335"></span><span>      </span><span id="local-6989586621679146282"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679146282"><span class="hs-identifier hs-var">acquiredSamplerSpec</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SamplerSpec -&gt; IO r) -&gt; IO r) -&gt; ContT r IO SamplerSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SamplerSpec -&gt; IO r) -&gt; IO r) -&gt; ContT r IO SamplerSpec)
-&gt; ((SamplerSpec -&gt; IO r) -&gt; IO r) -&gt; ContT r IO SamplerSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO r) -&gt; IO r
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146283"><span class="hs-identifier hs-var">samplerSpec</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-336"></span><span>      </span><span class="annot"><span class="annottext">IO Sampler -&gt; ContT r IO Sampler
forall a. IO a -&gt; ContT r IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Sampler -&gt; ContT r IO Sampler)
-&gt; IO Sampler -&gt; ContT r IO Sampler
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SamplerSpec -&gt; IO Sampler
forall (m :: * -&gt; *).
MonadIO m =&gt;
Logger -&gt; SamplerSpec -&gt; m Sampler
</span><a href="OTel.SDK.Trace.Internal.html#buildSampler"><span class="hs-identifier hs-var">buildSampler</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679146282"><span class="hs-identifier hs-var">acquiredSamplerSpec</span></a></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span>  </span><span id="local-6989586621679144924"><span class="annot"><a href="#local-6989586621679146254"><span class="hs-identifier hs-type">withCompositeSpanProcessor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144924"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144924"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-339"></span><span>  </span><span id="local-6989586621679146254"><span class="annot"><span class="annottext">withCompositeSpanProcessor :: forall r. (SpanProcessor -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146254"><span class="hs-identifier hs-var hs-var">withCompositeSpanProcessor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><span class="annottext">ContT r IO SpanProcessor -&gt; (SpanProcessor -&gt; IO r) -&gt; IO r
forall {k} (r :: k) (m :: k -&gt; *) a.
ContT r m a -&gt; (a -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var">runContT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-341"></span><span>      </span><span id="local-6989586621679146297"><span class="annot"><span class="annottext">[SpanProcessorSpec]
</span><a href="#local-6989586621679146297"><span class="hs-identifier hs-var">acquiredSpanProcessorSpecs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-342"></span><span>        </span><span class="annot"><span class="annottext">[Logger -&gt; (SpanProcessorSpec -&gt; IO r) -&gt; IO r]
-&gt; ((Logger -&gt; (SpanProcessorSpec -&gt; IO r) -&gt; IO r)
    -&gt; ContT r IO SpanProcessorSpec)
-&gt; ContT r IO [SpanProcessorSpec]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[Logger -&gt; (SpanProcessorSpec -&gt; IO r) -&gt; IO r]
forall a. [Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
</span><a href="#local-6989586621679146298"><span class="hs-identifier hs-var">spanProcessorSpecs</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146299"><span class="annot"><span class="annottext">Logger -&gt; (SpanProcessorSpec -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146299"><span class="hs-identifier hs-var">spanProcessorSpec</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-343"></span><span>          </span><span class="annot"><span class="annottext">((SpanProcessorSpec -&gt; IO r) -&gt; IO r)
-&gt; ContT r IO SpanProcessorSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SpanProcessorSpec -&gt; IO r) -&gt; IO r)
 -&gt; ContT r IO SpanProcessorSpec)
-&gt; ((SpanProcessorSpec -&gt; IO r) -&gt; IO r)
-&gt; ContT r IO SpanProcessorSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SpanProcessorSpec -&gt; IO r) -&gt; IO r
</span><a href="#local-6989586621679146299"><span class="hs-identifier hs-var">spanProcessorSpec</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-344"></span><span>      </span><span id="local-6989586621679146300"><span class="annot"><span class="annottext">[SpanProcessor]
</span><a href="#local-6989586621679146300"><span class="hs-identifier hs-var">acquiredSpanProcessors</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-345"></span><span>        </span><span class="annot"><span class="annottext">(SpanProcessorSpec -&gt; ContT r IO SpanProcessor)
-&gt; [SpanProcessorSpec] -&gt; ContT r IO [SpanProcessor]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((SpanProcessor -&gt; IO r) -&gt; IO r) -&gt; ContT r IO SpanProcessor
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SpanProcessor -&gt; IO r) -&gt; IO r) -&gt; ContT r IO SpanProcessor)
-&gt; (SpanProcessorSpec -&gt; (SpanProcessor -&gt; IO r) -&gt; IO r)
-&gt; SpanProcessorSpec
-&gt; ContT r IO SpanProcessor
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
-&gt; Logger -&gt; SpanProcessorSpec -&gt; (SpanProcessor -&gt; IO r) -&gt; IO r
forall a.
Resource Attrs
-&gt; Logger -&gt; SpanProcessorSpec -&gt; (SpanProcessor -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#buildSpanProcessor"><span class="hs-identifier hs-var">buildSpanProcessor</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146265"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SpanProcessorSpec]
</span><a href="#local-6989586621679146297"><span class="hs-identifier hs-var">acquiredSpanProcessorSpecs</span></a></span><span>
</span><span id="line-346"></span><span>      </span><span class="annot"><span class="annottext">SpanProcessor -&gt; ContT r IO SpanProcessor
forall a. a -&gt; ContT r IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SpanProcessor -&gt; ContT r IO SpanProcessor)
-&gt; SpanProcessor -&gt; ContT r IO SpanProcessor
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SpanProcessor] -&gt; SpanProcessor
forall m. Monoid m =&gt; [m] -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">[SpanProcessor]
</span><a href="#local-6989586621679146300"><span class="hs-identifier hs-var">acquiredSpanProcessors</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><a href="#local-6989586621679146259"><span class="hs-identifier hs-type">getTracerWith</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-351"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-type">Sampler</span></a></span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InstrumentationScope</span></span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span>
</span><span id="line-356"></span><span>  </span><span id="local-6989586621679146259"><span class="annot"><span class="annottext">getTracerWith :: MVar PRNG
-&gt; IdGenerator
-&gt; IdGenerator
-&gt; Sampler
-&gt; SpanProcessor
-&gt; InstrumentationScope
-&gt; IO Tracer
</span><a href="#local-6989586621679146259"><span class="hs-identifier hs-var hs-var">getTracerWith</span></a></span></span><span> </span><span id="local-6989586621679146302"><span class="annot"><span class="annottext">MVar PRNG
</span><a href="#local-6989586621679146302"><span class="hs-identifier hs-var">prngRef</span></a></span></span><span> </span><span id="local-6989586621679146303"><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146303"><span class="hs-identifier hs-var">defIdGenerator</span></a></span></span><span> </span><span id="local-6989586621679146304"><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146304"><span class="hs-identifier hs-var">idGenerator</span></a></span></span><span> </span><span id="local-6989586621679146305"><span class="annot"><span class="annottext">Sampler
</span><a href="#local-6989586621679146305"><span class="hs-identifier hs-var">sampler</span></a></span></span><span> </span><span id="local-6989586621679146306"><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146306"><span class="hs-identifier hs-var">spanProcessor</span></a></span></span><span> </span><span id="local-6989586621679146307"><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679146307"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><span class="annottext">(LoggingT IO Tracer -&gt; Logger -&gt; IO Tracer)
-&gt; Logger -&gt; LoggingT IO Tracer -&gt; IO Tracer
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO Tracer -&gt; Logger -&gt; IO Tracer
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-358"></span><span>      </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Providing tracer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;instrumentationScope&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; InstrumentationScope -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679146307"><span class="hs-identifier hs-var">scope</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-359"></span><span>      </span><span class="annot"><span class="annottext">Tracer -&gt; LoggingT IO Tracer
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span>
</span><span id="line-360"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tracerInstrumentationScope :: InstrumentationScope
</span><span class="hs-identifier hs-var">tracerInstrumentationScope</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679146307"><span class="hs-identifier hs-var">scope</span></a></span><span>
</span><span id="line-361"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerNow :: IO Timestamp
</span><span class="hs-identifier hs-var">tracerNow</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Timestamp
</span><a href="#local-6989586621679146311"><span class="hs-identifier hs-var">now</span></a></span><span>
</span><span id="line-362"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerStartSpan :: CallStack -&gt; Context -&gt; SpanSpec -&gt; IO (MutableSpan, [Pair])
</span><span class="hs-identifier hs-var">tracerStartSpan</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MVar PRNG
-&gt; IdGenerator
-&gt; IdGenerator
-&gt; Sampler
-&gt; InstrumentationScope
-&gt; SpanProcessor
-&gt; CallStack
-&gt; Context
-&gt; SpanSpec
-&gt; IO (MutableSpan, [Pair])
</span><a href="#local-6989586621679146313"><span class="hs-identifier hs-var">startSpan</span></a></span><span> </span><span class="annot"><span class="annottext">MVar PRNG
</span><a href="#local-6989586621679146302"><span class="hs-identifier hs-var">prngRef</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146303"><span class="hs-identifier hs-var">defIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146304"><span class="hs-identifier hs-var">idGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">Sampler
</span><a href="#local-6989586621679146305"><span class="hs-identifier hs-var">sampler</span></a></span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679146307"><span class="hs-identifier hs-var">scope</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146306"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span>
</span><span id="line-363"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProcessSpan :: Span Attrs -&gt; IO ()
</span><span class="hs-identifier hs-var">tracerProcessSpan</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanProcessor -&gt; Span Attrs -&gt; IO ()
</span><a href="#local-6989586621679146315"><span class="hs-identifier hs-var">endSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146306"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerSpanAttrsLimits :: AttrsLimits 'AttrsForSpan
</span><span class="hs-identifier hs-var">tracerSpanAttrsLimits</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpan
</span><a href="#local-6989586621679146266"><span class="hs-identifier hs-var">spanAttrsLimits</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerSpanEventAttrsLimits :: AttrsLimits 'AttrsForSpanEvent
</span><span class="hs-identifier hs-var">tracerSpanEventAttrsLimits</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanEvent
</span><a href="#local-6989586621679146267"><span class="hs-identifier hs-var">spanEventAttrsLimits</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerSpanLinkAttrsLimits :: AttrsLimits 'AttrsForSpanLink
</span><span class="hs-identifier hs-var">tracerSpanLinkAttrsLimits</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanLink
</span><a href="#local-6989586621679146268"><span class="hs-identifier hs-var">spanLinkAttrsLimits</span></a></span><span>
</span><span id="line-367"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span>  </span><span class="annot"><a href="#local-6989586621679146315"><span class="hs-identifier hs-type">endSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>  </span><span id="local-6989586621679146315"><span class="annot"><span class="annottext">endSpan :: SpanProcessor -&gt; Span Attrs -&gt; IO ()
</span><a href="#local-6989586621679146315"><span class="hs-identifier hs-var hs-var">endSpan</span></a></span></span><span> </span><span id="local-6989586621679146319"><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146319"><span class="hs-identifier hs-var">spanProcessor</span></a></span></span><span> </span><span id="local-6989586621679146320"><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146320"><span class="hs-identifier hs-var">endedSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-371"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span Attrs -&gt; Bool
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Bool
</span><span class="hs-identifier hs-var">spanIsRecording</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146320"><span class="hs-identifier hs-var">endedSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-372"></span><span>      </span><span class="annot"><span class="annottext">SpanProcessor -&gt; Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorOnSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146319"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146320"><span class="hs-identifier hs-var">endedSpan</span></a></span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span>  </span><span class="annot"><a href="#local-6989586621679146313"><span class="hs-identifier hs-type">startSpan</span></a></span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-type">Sampler</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InstrumentationScope</span></span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CallStack</span></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Context</span></span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanSpec</span></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MutableSpan</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Pair</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>  </span><span id="local-6989586621679146313"><span class="annot"><span class="annottext">startSpan :: MVar PRNG
-&gt; IdGenerator
-&gt; IdGenerator
-&gt; Sampler
-&gt; InstrumentationScope
-&gt; SpanProcessor
-&gt; CallStack
-&gt; Context
-&gt; SpanSpec
-&gt; IO (MutableSpan, [Pair])
</span><a href="#local-6989586621679146313"><span class="hs-identifier hs-var hs-var">startSpan</span></a></span></span><span> </span><span id="local-6989586621679146323"><span class="annot"><span class="annottext">MVar PRNG
</span><a href="#local-6989586621679146323"><span class="hs-identifier hs-var">prngRef</span></a></span></span><span> </span><span id="local-6989586621679146324"><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146324"><span class="hs-identifier hs-var">defIdGenerator</span></a></span></span><span> </span><span id="local-6989586621679146325"><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146325"><span class="hs-identifier hs-var">idGenerator</span></a></span></span><span> </span><span id="local-6989586621679146326"><span class="annot"><span class="annottext">Sampler
</span><a href="#local-6989586621679146326"><span class="hs-identifier hs-var">sampler</span></a></span></span><span> </span><span id="local-6989586621679146327"><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679146327"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span id="local-6989586621679146328"><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146328"><span class="hs-identifier hs-var">spanProcessor</span></a></span></span><span> </span><span id="local-6989586621679146329"><span class="annot"><span class="annottext">CallStack
</span><a href="#local-6989586621679146329"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679146330"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146330"><span class="hs-identifier hs-var">implicitParentContext</span></a></span></span><span> </span><span id="local-6989586621679146331"><span class="annot"><span class="annottext">SpanSpec
</span><a href="#local-6989586621679146331"><span class="hs-identifier hs-var">spanSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621679146332"><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146332"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Span AttrsBuilder)
</span><a href="#local-6989586621679146333"><span class="hs-identifier hs-var">buildSpan</span></a></span><span>
</span><span id="line-387"></span><span>    </span><span id="local-6989586621679146334"><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146334"><span class="hs-identifier hs-var">mutableSpan</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; IO MutableSpan
</span><span class="hs-identifier hs-var">unsafeNewMutableSpan</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146332"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; Bool
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Bool
</span><span class="hs-identifier hs-var">spanIsRecording</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146332"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-390"></span><span>      </span><span class="annot"><span class="annottext">SpanProcessor
-&gt; Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var">spanProcessorOnSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146328"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146336"><span class="hs-identifier hs-var">parentContext</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146337"><span class="annot"><span class="annottext">UpdateSpanSpec
</span><a href="#local-6989586621679146337"><span class="hs-identifier hs-var">updateSpanSpec</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">MutableSpan -&gt; UpdateSpanSpec -&gt; IO (Span Attrs)
</span><a href="#local-6989586621679146338"><span class="hs-identifier hs-var">spanUpdater</span></a></span><span> </span><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146334"><span class="hs-identifier hs-var">mutableSpan</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateSpanSpec
</span><a href="#local-6989586621679146337"><span class="hs-identifier hs-var">updateSpanSpec</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><span class="annottext">(MutableSpan, [Pair]) -&gt; IO (MutableSpan, [Pair])
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146334"><span class="hs-identifier hs-var">mutableSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; [Pair]
</span><a href="#local-6989586621679146339"><span class="hs-identifier hs-var">spanContextMeta</span></a></span><span> </span><span class="annot"><span class="annottext">(SpanContext -&gt; [Pair]) -&gt; SpanContext -&gt; [Pair]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; SpanContext
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146332"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><a href="#local-6989586621679146333"><span class="hs-identifier hs-type">buildSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsBuilder</span></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621679146333"><span class="annot"><span class="annottext">buildSpan :: IO (Span AttrsBuilder)
</span><a href="#local-6989586621679146333"><span class="hs-identifier hs-var hs-var">buildSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-397"></span><span>      </span><span id="local-6989586621679146341"><span class="annot"><span class="annottext">SpanLineage
</span><a href="#local-6989586621679146341"><span class="hs-identifier hs-var">spanLineage</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Context -&gt; IO SpanLineage
</span><a href="#local-6989586621679146342"><span class="hs-identifier hs-var">spanLineageFromParentContext</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146336"><span class="hs-identifier hs-var">parentContext</span></a></span><span>
</span><span id="line-398"></span><span>      </span><span id="local-6989586621679146343"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146343"><span class="hs-identifier hs-var">initSpanContext</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SpanLineage -&gt; IO SpanContext
</span><a href="#local-6989586621679146344"><span class="hs-identifier hs-var">newSpanContext</span></a></span><span> </span><span class="annot"><span class="annottext">SpanLineage
</span><a href="#local-6989586621679146341"><span class="hs-identifier hs-var">spanLineage</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span>      </span><span id="local-6989586621679146345"><span class="annot"><span class="annottext">SamplingResult
</span><a href="#local-6989586621679146345"><span class="hs-identifier hs-var">samplingResult</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sampler -&gt; SamplerInput -&gt; IO SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerShouldSample"><span class="hs-identifier hs-var">samplerShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">Sampler
</span><a href="#local-6989586621679146326"><span class="hs-identifier hs-var">sampler</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier hs-type">SamplerInput</span></a></span><span>
</span><span id="line-401"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">samplerInputContext :: Context
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputContext"><span class="hs-identifier hs-var">samplerInputContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146336"><span class="hs-identifier hs-var">parentContext</span></a></span><span>
</span><span id="line-402"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerInputTraceId :: TraceId
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputTraceId"><span class="hs-identifier hs-var">samplerInputTraceId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; TraceId
</span><span class="hs-identifier hs-var">spanContextTraceId</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146343"><span class="hs-identifier hs-var">initSpanContext</span></a></span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerInputSpanName :: SpanName
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanName"><span class="hs-identifier hs-var">samplerInputSpanName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanName
</span><a href="#local-6989586621679146352"><span class="hs-identifier hs-var">spanSpecName</span></a></span><span>
</span><span id="line-404"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerInputSpanKind :: SpanKind
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanKind"><span class="hs-identifier hs-var">samplerInputSpanKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanKind
</span><a href="#local-6989586621679146354"><span class="hs-identifier hs-var">spanSpecKind</span></a></span><span>
</span><span id="line-405"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerInputSpanAttrs :: AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanAttrs"><span class="hs-identifier hs-var">samplerInputSpanAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
</span><a href="#local-6989586621679146356"><span class="hs-identifier hs-var">spanSpecAttrs</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerInputSpanLinks :: SpanLinks AttrsBuilder
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanLinks"><span class="hs-identifier hs-var">samplerInputSpanLinks</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanLinks AttrsBuilder
</span><a href="#local-6989586621679146358"><span class="hs-identifier hs-var">spanLinks</span></a></span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679146359"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679146359"><span class="hs-identifier hs-var">spanIsRecording</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146360"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146360"><span class="hs-identifier hs-var">spanContextPostSampling</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-410"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SamplingResult -&gt; SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultDecision"><span class="hs-identifier hs-var">samplingResultDecision</span></a></span><span> </span><span class="annot"><span class="annottext">SamplingResult
</span><a href="#local-6989586621679146345"><span class="hs-identifier hs-var">samplingResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-411"></span><span>              </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionDrop"><span class="hs-identifier hs-var">SamplingDecisionDrop</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146343"><span class="hs-identifier hs-var">initSpanContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>              </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordOnly"><span class="hs-identifier hs-var">SamplingDecisionRecordOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146343"><span class="hs-identifier hs-var">initSpanContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>              </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordAndSample"><span class="hs-identifier hs-var">SamplingDecisionRecordAndSample</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-414"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-415"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146343"><span class="hs-identifier hs-var">initSpanContext</span></a></span><span>
</span><span id="line-416"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">spanContextTraceFlags</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>                        </span><span class="annot"><span class="hs-identifier hs-type">traceFlagsSampled</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">spanContextTraceFlags</span></span><span> </span><span class="annot"><a href="#local-6989586621679146343"><span class="hs-identifier hs-type">initSpanContext</span></a></span><span>
</span><span id="line-418"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-419"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span>      </span><span id="local-6989586621679146366"><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679146366"><span class="hs-identifier hs-var">spanStart</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-422"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TimestampSource
</span><a href="#local-6989586621679146367"><span class="hs-identifier hs-var">spanSpecStart</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-423"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">TimestampSourceAt</span></span><span> </span><span id="local-6989586621679146369"><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679146369"><span class="hs-identifier hs-var">timestamp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Timestamp -&gt; IO Timestamp
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679146369"><span class="hs-identifier hs-var">timestamp</span></a></span><span>
</span><span id="line-424"></span><span>          </span><span class="annot"><span class="annottext">TimestampSource
</span><span class="hs-identifier hs-var">TimestampSourceNow</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO Timestamp
</span><a href="#local-6989586621679146311"><span class="hs-identifier hs-var">now</span></a></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span>      </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; IO (Span AttrsBuilder)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span>
</span><span id="line-427"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SpanLineage
spanLineage :: SpanLineage
spanLineage :: SpanLineage
</span><a href="#local-6989586621679146341"><span class="hs-identifier hs-var hs-var">spanLineage</span></a></span><span>
</span><span id="line-428"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanContext :: SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-429"></span><span>            </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146360"><span class="hs-identifier hs-var">spanContextPostSampling</span></a></span><span>
</span><span id="line-430"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">spanContextTraceState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingResultTraceState"><span class="hs-identifier hs-var">samplingResultTraceState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679146345"><span class="hs-identifier hs-type">samplingResult</span></a></span><span>
</span><span id="line-431"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-432"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanName :: SpanName
</span><span class="hs-identifier hs-var">spanName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanName
</span><a href="#local-6989586621679146352"><span class="hs-identifier hs-var">spanSpecName</span></a></span><span>
</span><span id="line-433"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanStatus :: SpanStatus
</span><span class="hs-identifier hs-var">spanStatus</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanStatus
</span><span class="hs-identifier hs-var">SpanStatusUnset</span></span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Timestamp
spanStart :: Timestamp
spanStart :: Timestamp
</span><a href="#local-6989586621679146366"><span class="hs-identifier hs-var hs-var">spanStart</span></a></span><span>
</span><span id="line-435"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanFrozenAt :: SpanFrozenAt AttrsBuilder
</span><span class="hs-identifier hs-var">spanFrozenAt</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Timestamp
SpanFrozenAt AttrsBuilder
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-436"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanKind :: SpanKind
</span><span class="hs-identifier hs-var">spanKind</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanKind
</span><a href="#local-6989586621679146354"><span class="hs-identifier hs-var">spanSpecKind</span></a></span><span>
</span><span id="line-437"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanAttrs :: AttrsBuilder 'AttrsForSpan
</span><span class="hs-identifier hs-var">spanAttrs</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-438"></span><span>            </span><span class="annot"><span class="annottext">SamplingResult -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultSpanAttrs"><span class="hs-identifier hs-var">samplingResultSpanAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">SamplingResult
</span><a href="#local-6989586621679146345"><span class="hs-identifier hs-var">samplingResult</span></a></span><span>
</span><span id="line-439"></span><span>              </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
-&gt; AttrsBuilder 'AttrsForSpan -&gt; AttrsBuilder 'AttrsForSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CallStack -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="#local-6989586621679146383"><span class="hs-identifier hs-var">callStackAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">CallStack
</span><a href="#local-6989586621679146329"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-440"></span><span>              </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
-&gt; AttrsBuilder 'AttrsForSpan -&gt; AttrsBuilder 'AttrsForSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
</span><a href="#local-6989586621679146356"><span class="hs-identifier hs-var">spanSpecAttrs</span></a></span><span>
</span><span id="line-441"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanLinks AttrsBuilder
spanLinks :: SpanLinks AttrsBuilder
spanLinks :: SpanLinks AttrsBuilder
</span><a href="#local-6989586621679146358"><span class="hs-identifier hs-var hs-var">spanLinks</span></a></span><span>
</span><span id="line-442"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanEvents :: SpanEvents AttrsBuilder
</span><span class="hs-identifier hs-var">spanEvents</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanEvents AttrsBuilder
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-443"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
spanIsRecording :: Bool
spanIsRecording :: Bool
</span><span class="hs-identifier hs-var hs-var">spanIsRecording</span></span><span>
</span><span id="line-444"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanInstrumentationScope :: InstrumentationScope
</span><span class="hs-identifier hs-var">spanInstrumentationScope</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679146327"><span class="hs-identifier hs-var">scope</span></a></span><span>
</span><span id="line-445"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-446"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-447"></span><span>      </span><span class="annot"><a href="#local-6989586621679146342"><span class="hs-identifier hs-type">spanLineageFromParentContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Context</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanLineage</span></span><span>
</span><span id="line-448"></span><span>      </span><span id="local-6989586621679146342"><span class="annot"><span class="annottext">spanLineageFromParentContext :: Context -&gt; IO SpanLineage
</span><a href="#local-6989586621679146342"><span class="hs-identifier hs-var hs-var">spanLineageFromParentContext</span></a></span></span><span> </span><span id="local-6989586621679146387"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146387"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-449"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ContextKey MutableSpan -&gt; Context -&gt; Maybe MutableSpan
forall a. ContextKey a -&gt; Context -&gt; Maybe a
</span><span class="hs-identifier hs-var">lookupContext</span></span><span> </span><span class="annot"><span class="annottext">ContextKey MutableSpan
</span><span class="hs-identifier hs-var">contextKeySpan</span></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146387"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-450"></span><span>          </span><span class="annot"><span class="annottext">Maybe MutableSpan
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SpanLineage -&gt; IO SpanLineage
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SpanLineage
</span><span class="hs-identifier hs-var">SpanLineageRoot</span></span><span>
</span><span id="line-451"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679146389"><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146389"><span class="hs-identifier hs-var">mutableSpan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-452"></span><span>            </span><span class="annot"><span class="annottext">(Span AttrsBuilder -&gt; SpanLineage)
-&gt; IO (Span AttrsBuilder) -&gt; IO SpanLineage
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanContext -&gt; SpanLineage
</span><span class="hs-identifier hs-var">SpanLineageChildOf</span></span><span> </span><span class="annot"><span class="annottext">(SpanContext -&gt; SpanLineage)
-&gt; (Span AttrsBuilder -&gt; SpanContext)
-&gt; Span AttrsBuilder
-&gt; SpanLineage
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; SpanContext
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (Span AttrsBuilder) -&gt; IO SpanLineage)
-&gt; IO (Span AttrsBuilder) -&gt; IO SpanLineage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan -&gt; IO (Span AttrsBuilder)
</span><span class="hs-identifier hs-var">unsafeReadMutableSpan</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146389"><span class="hs-identifier hs-var">mutableSpan</span></a></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span>      </span><span class="annot"><a href="#local-6989586621679146344"><span class="hs-identifier hs-type">newSpanContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanLineage</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanContext</span></span><span>
</span><span id="line-455"></span><span>      </span><span id="local-6989586621679146344"><span class="annot"><span class="annottext">newSpanContext :: SpanLineage -&gt; IO SpanContext
</span><a href="#local-6989586621679146344"><span class="hs-identifier hs-var hs-var">newSpanContext</span></a></span></span><span> </span><span id="local-6989586621679146391"><span class="annot"><span class="annottext">SpanLineage
</span><a href="#local-6989586621679146391"><span class="hs-identifier hs-var">spanLineage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-456"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679146392"><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679146392"><span class="hs-identifier hs-var">spanContextTraceId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146393"><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146393"><span class="hs-identifier hs-var">spanContextSpanId</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-457"></span><span>          </span><span class="annot"><span class="annottext">MVar PRNG -&gt; (PRNG -&gt; IO (TraceId, SpanId)) -&gt; IO (TraceId, SpanId)
forall a b. MVar a -&gt; (a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">withMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar PRNG
</span><a href="#local-6989586621679146323"><span class="hs-identifier hs-var">prngRef</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146394"><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-458"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SpanLineage
</span><a href="#local-6989586621679146391"><span class="hs-identifier hs-var">spanLineage</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-459"></span><span>              </span><span class="annot"><span class="annottext">SpanLineage
</span><span class="hs-identifier hs-var">SpanLineageRoot</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-460"></span><span>                </span><span class="annot"><span class="annottext">(TraceId -&gt; SpanId -&gt; (TraceId, SpanId))
-&gt; IO TraceId -&gt; IO SpanId -&gt; IO (TraceId, SpanId)
forall a b c. (a -&gt; b -&gt; c) -&gt; IO a -&gt; IO b -&gt; IO c
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PRNG -&gt; IO TraceId
</span><a href="#local-6989586621679146396"><span class="hs-identifier hs-var">genTraceId</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PRNG -&gt; IO SpanId
</span><a href="#local-6989586621679146397"><span class="hs-identifier hs-var">genSpanId</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>                  </span><span class="annot"><span class="annottext">IO (TraceId, SpanId)
-&gt; (SomeException -&gt; IO (TraceId, SpanId)) -&gt; IO (TraceId, SpanId)
forall (m :: * -&gt; *) a.
(HasCallStack, MonadCatch m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchAny`</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679146423"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679146423"><span class="hs-identifier hs-var">ex</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-462"></span><span>                    </span><span id="local-6989586621679146424"><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679146424"><span class="hs-identifier hs-var">traceId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IdGenerator -&gt; PRNG -&gt; IO TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenTraceId"><span class="hs-identifier hs-var">idGeneratorGenTraceId</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146324"><span class="hs-identifier hs-var">defIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span><span>
</span><span id="line-463"></span><span>                    </span><span id="local-6989586621679146426"><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146426"><span class="hs-identifier hs-var">spanId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IdGenerator -&gt; PRNG -&gt; IO SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenSpanId"><span class="hs-identifier hs-var">idGeneratorGenSpanId</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146324"><span class="hs-identifier hs-var">defIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span><span>
</span><span id="line-464"></span><span>                    </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>                      </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Fell back to default trace/span ID gen due to exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-466"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679146423"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-467"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;traceId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; TraceId -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679146424"><span class="hs-identifier hs-var">traceId</span></a></span><span>
</span><span id="line-468"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SpanId -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146426"><span class="hs-identifier hs-var">spanId</span></a></span><span>
</span><span id="line-469"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-470"></span><span>                    </span><span class="annot"><span class="annottext">(TraceId, SpanId) -&gt; IO (TraceId, SpanId)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679146424"><span class="hs-identifier hs-var">traceId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146426"><span class="hs-identifier hs-var">spanId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">SpanLineageChildOf</span></span><span> </span><span id="local-6989586621679146429"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146429"><span class="hs-identifier hs-var">scParent</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-472"></span><span>                </span><span class="annot"><span class="annottext">(SpanId -&gt; (TraceId, SpanId)) -&gt; IO SpanId -&gt; IO (TraceId, SpanId)
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanContext -&gt; TraceId
</span><span class="hs-identifier hs-var">spanContextTraceId</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146429"><span class="hs-identifier hs-var">scParent</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PRNG -&gt; IO SpanId
</span><a href="#local-6989586621679146397"><span class="hs-identifier hs-var">genSpanId</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>                  </span><span class="annot"><span class="annottext">IO (TraceId, SpanId)
-&gt; (SomeException -&gt; IO (TraceId, SpanId)) -&gt; IO (TraceId, SpanId)
forall (m :: * -&gt; *) a.
(HasCallStack, MonadCatch m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchAny`</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679146449"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679146449"><span class="hs-identifier hs-var">ex</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-474"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679146450"><span class="annot"><span class="annottext">traceId :: TraceId
</span><a href="#local-6989586621679146450"><span class="hs-identifier hs-var hs-var">traceId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; TraceId
</span><span class="hs-identifier hs-var">spanContextTraceId</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679146429"><span class="hs-identifier hs-var">scParent</span></a></span><span>
</span><span id="line-475"></span><span>                    </span><span id="local-6989586621679146451"><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146451"><span class="hs-identifier hs-var">spanId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IdGenerator -&gt; PRNG -&gt; IO SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenSpanId"><span class="hs-identifier hs-var">idGeneratorGenSpanId</span></a></span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146324"><span class="hs-identifier hs-var">defIdGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679146394"><span class="hs-identifier hs-var">prng</span></a></span><span>
</span><span id="line-476"></span><span>                    </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-477"></span><span>                      </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Fell back to default trace/span ID gen due to exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-478"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679146449"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-479"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;traceId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; TraceId -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679146450"><span class="hs-identifier hs-var">traceId</span></a></span><span>
</span><span id="line-480"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SpanId -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146451"><span class="hs-identifier hs-var">spanId</span></a></span><span>
</span><span id="line-481"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-482"></span><span>                    </span><span class="annot"><span class="annottext">(TraceId, SpanId) -&gt; IO (TraceId, SpanId)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679146450"><span class="hs-identifier hs-var">traceId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679146451"><span class="hs-identifier hs-var">spanId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>        </span><span class="annot"><span class="annottext">SpanContext -&gt; IO SpanContext
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><span class="hs-identifier hs-var">emptySpanContext</span></span><span>
</span><span id="line-485"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var hs-type">spanContextTraceId</span></span><span>
</span><span id="line-486"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679146393"><span class="hs-identifier hs-type hs-var">spanContextSpanId</span></a></span><span>
</span><span id="line-487"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">spanContextTraceFlags</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mempty</span></span><span>
</span><span id="line-488"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">spanContextTraceState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">emptyTraceState</span></span><span>
</span><span id="line-489"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">spanContextIsRemote</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="hs-comment">-- TODO: Populate correctly</span><span>
</span><span id="line-490"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span>    </span><span class="annot"><a href="#local-6989586621679146338"><span class="hs-identifier hs-type">spanUpdater</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MutableSpan</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UpdateSpanSpec</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>    </span><span id="local-6989586621679146338"><span class="annot"><span class="annottext">spanUpdater :: MutableSpan -&gt; UpdateSpanSpec -&gt; IO (Span Attrs)
</span><a href="#local-6989586621679146338"><span class="hs-identifier hs-var hs-var">spanUpdater</span></a></span></span><span> </span><span id="local-6989586621679146454"><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146454"><span class="hs-identifier hs-var">mutableSpan</span></a></span></span><span> </span><span id="local-6989586621679146455"><span class="annot"><span class="annottext">UpdateSpanSpec
</span><a href="#local-6989586621679146455"><span class="hs-identifier hs-var">updateSpanSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-494"></span><span>      </span><span id="local-6989586621679146456"><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; Span AttrsBuilder
</span><a href="#local-6989586621679146456"><span class="hs-identifier hs-var">updater</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Timestamp
-&gt; UpdateSpanSpec -&gt; IO (Span AttrsBuilder -&gt; Span AttrsBuilder)
forall (m :: * -&gt; *).
Monad m =&gt;
m Timestamp
-&gt; UpdateSpanSpec -&gt; m (Span AttrsBuilder -&gt; Span AttrsBuilder)
</span><span class="hs-identifier hs-var">buildSpanUpdater</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO Timestamp -&gt; IO Timestamp
forall a. IO a -&gt; IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">IO Timestamp
</span><a href="#local-6989586621679146311"><span class="hs-identifier hs-var">now</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UpdateSpanSpec
</span><a href="#local-6989586621679146455"><span class="hs-identifier hs-var">updateSpanSpec</span></a></span><span>
</span><span id="line-495"></span><span>      </span><span id="local-6989586621679146457"><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679146457"><span class="hs-identifier hs-var">frozenAt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Timestamp -&gt; IO Timestamp
forall a. IO a -&gt; IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">IO Timestamp
</span><a href="#local-6989586621679146311"><span class="hs-identifier hs-var">now</span></a></span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><span class="annottext">MutableSpan
-&gt; (Span AttrsBuilder -&gt; (Span AttrsBuilder, Span Attrs))
-&gt; IO (Span Attrs)
forall a.
MutableSpan
-&gt; (Span AttrsBuilder -&gt; (Span AttrsBuilder, a)) -&gt; IO a
</span><span class="hs-identifier hs-var">unsafeModifyMutableSpan</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679146454"><span class="hs-identifier hs-var">mutableSpan</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146458"><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146458"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-497"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679146459"><span class="annot"><span class="annottext">span' :: Span AttrsBuilder
</span><a href="#local-6989586621679146459"><span class="hs-identifier hs-var hs-var">span'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; Span AttrsBuilder
</span><a href="#local-6989586621679146456"><span class="hs-identifier hs-var">updater</span></a></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146458"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-498"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146459"><span class="hs-identifier hs-var">span'</span></a></span><span>
</span><span id="line-499"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Timestamp
-&gt; AttrsLimits 'AttrsForSpanLink
-&gt; AttrsLimits 'AttrsForSpanEvent
-&gt; AttrsLimits 'AttrsForSpan
-&gt; Span AttrsBuilder
-&gt; Span Attrs
</span><span class="hs-identifier hs-var">freezeSpan</span></span><span> </span><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679146457"><span class="hs-identifier hs-var">frozenAt</span></a></span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanLink
</span><a href="#local-6989586621679146268"><span class="hs-identifier hs-var">spanLinkAttrsLimits</span></a></span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanEvent
</span><a href="#local-6989586621679146267"><span class="hs-identifier hs-var">spanEventAttrsLimits</span></a></span><span> </span><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpan
</span><a href="#local-6989586621679146266"><span class="hs-identifier hs-var">spanAttrsLimits</span></a></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder
</span><a href="#local-6989586621679146459"><span class="hs-identifier hs-var">span'</span></a></span><span>
</span><span id="line-500"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span>    </span><span id="local-6989586621679146358"><span class="annot"><span class="annottext">spanLinks :: SpanLinks AttrsBuilder
</span><a href="#local-6989586621679146358"><span class="hs-identifier hs-var hs-var">spanLinks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-503"></span><span>      </span><span class="annot"><span class="annottext">DList (SpanLink AttrsBuilder) -&gt; SpanLinks AttrsBuilder
forall (attrs :: AttrsFor -&gt; *).
DList (SpanLink attrs) -&gt; SpanLinks attrs
</span><span class="hs-identifier hs-var">SpanLinks</span></span><span> </span><span class="annot"><span class="annottext">(DList (SpanLink AttrsBuilder) -&gt; SpanLinks AttrsBuilder)
-&gt; DList (SpanLink AttrsBuilder) -&gt; SpanLinks AttrsBuilder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((SpanLinkSpec -&gt; SpanLink AttrsBuilder)
 -&gt; DList SpanLinkSpec -&gt; DList (SpanLink AttrsBuilder))
-&gt; DList SpanLinkSpec
-&gt; (SpanLinkSpec -&gt; SpanLink AttrsBuilder)
-&gt; DList (SpanLink AttrsBuilder)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(SpanLinkSpec -&gt; SpanLink AttrsBuilder)
-&gt; DList SpanLinkSpec -&gt; DList (SpanLink AttrsBuilder)
forall a b. (a -&gt; b) -&gt; DList a -&gt; DList b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanLinkSpecs -&gt; DList SpanLinkSpec
</span><span class="hs-identifier hs-var">unSpanLinkSpecs</span></span><span> </span><span class="annot"><span class="annottext">SpanLinkSpecs
</span><a href="#local-6989586621679146462"><span class="hs-identifier hs-var">spanSpecLinks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146463"><span class="annot"><span class="annottext">SpanLinkSpec
</span><a href="#local-6989586621679146463"><span class="hs-identifier hs-var">spanLinkSpec</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-504"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SpanLink</span></span><span>
</span><span id="line-505"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanLinkSpanContext :: SpanContext
</span><span class="hs-identifier hs-var">spanLinkSpanContext</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-506"></span><span>              </span><span class="annot"><span class="annottext">SpanLinkSpec -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanLinkSpecSpanContext</span></span><span> </span><span class="annot"><span class="annottext">SpanLinkSpec
</span><a href="#local-6989586621679146463"><span class="hs-identifier hs-var">spanLinkSpec</span></a></span><span>
</span><span id="line-507"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanLinkAttrs :: AttrsBuilder 'AttrsForSpanLink
</span><span class="hs-identifier hs-var">spanLinkAttrs</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-508"></span><span>              </span><span class="annot"><span class="annottext">SpanLinkSpec -&gt; AttrsBuilder 'AttrsForSpanLink
</span><span class="hs-identifier hs-var">spanLinkSpecAttrs</span></span><span> </span><span class="annot"><span class="annottext">SpanLinkSpec
</span><a href="#local-6989586621679146463"><span class="hs-identifier hs-var">spanLinkSpec</span></a></span><span>
</span><span id="line-509"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>    </span><span id="local-6989586621679146336"><span class="annot"><span class="annottext">parentContext :: Context
</span><a href="#local-6989586621679146336"><span class="hs-identifier hs-var hs-var">parentContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context -&gt; Maybe Context -&gt; Context
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146330"><span class="hs-identifier hs-var">implicitParentContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Context
</span><a href="#local-6989586621679146469"><span class="hs-identifier hs-var">spanSpecParentContext</span></a></span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-514"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">idGeneratorGenTraceId :: IdGenerator -&gt; PRNG -&gt; IO TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenTraceId"><span class="hs-identifier hs-var">idGeneratorGenTraceId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146396"><span class="annot"><span class="annottext">PRNG -&gt; IO TraceId
</span><a href="#local-6989586621679146396"><span class="hs-identifier hs-var">genTraceId</span></a></span></span><span>
</span><span id="line-515"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">idGeneratorGenSpanId :: IdGenerator -&gt; PRNG -&gt; IO SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenSpanId"><span class="hs-identifier hs-var">idGeneratorGenSpanId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146397"><span class="annot"><span class="annottext">PRNG -&gt; IO SpanId
</span><a href="#local-6989586621679146397"><span class="hs-identifier hs-var">genSpanId</span></a></span></span><span>
</span><span id="line-516"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdGenerator
</span><a href="#local-6989586621679146325"><span class="hs-identifier hs-var">idGenerator</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">SpanSpec</span></span><span>
</span><span id="line-519"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679146352"><span class="annot"><span class="annottext">SpanName
spanSpecName :: SpanName
spanSpecName :: SpanSpec -&gt; SpanName
</span><a href="#local-6989586621679146352"><span class="hs-identifier hs-var hs-var">spanSpecName</span></a></span></span><span>
</span><span id="line-520"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146469"><span class="annot"><span class="annottext">Maybe Context
spanSpecParentContext :: Maybe Context
spanSpecParentContext :: SpanSpec -&gt; Maybe Context
</span><a href="#local-6989586621679146469"><span class="hs-identifier hs-var hs-var">spanSpecParentContext</span></a></span></span><span>
</span><span id="line-521"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146367"><span class="annot"><span class="annottext">TimestampSource
spanSpecStart :: TimestampSource
spanSpecStart :: SpanSpec -&gt; TimestampSource
</span><a href="#local-6989586621679146367"><span class="hs-identifier hs-var hs-var">spanSpecStart</span></a></span></span><span>
</span><span id="line-522"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146354"><span class="annot"><span class="annottext">SpanKind
spanSpecKind :: SpanKind
spanSpecKind :: SpanSpec -&gt; SpanKind
</span><a href="#local-6989586621679146354"><span class="hs-identifier hs-var hs-var">spanSpecKind</span></a></span></span><span>
</span><span id="line-523"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146356"><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
spanSpecAttrs :: AttrsBuilder 'AttrsForSpan
spanSpecAttrs :: SpanSpec -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="#local-6989586621679146356"><span class="hs-identifier hs-var hs-var">spanSpecAttrs</span></a></span></span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146462"><span class="annot"><span class="annottext">SpanLinkSpecs
spanSpecLinks :: SpanLinkSpecs
spanSpecLinks :: SpanSpec -&gt; SpanLinkSpecs
</span><a href="#local-6989586621679146462"><span class="hs-identifier hs-var hs-var">spanSpecLinks</span></a></span></span><span>
</span><span id="line-525"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanSpec
</span><a href="#local-6989586621679146331"><span class="hs-identifier hs-var">spanSpec</span></a></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#TracerProviderSpec"><span class="hs-identifier hs-type">TracerProviderSpec</span></a></span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecNow :: TracerProviderSpec -&gt; IO Timestamp
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecNow"><span class="hs-identifier hs-var">tracerProviderSpecNow</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146311"><span class="annot"><span class="annottext">IO Timestamp
</span><a href="#local-6989586621679146311"><span class="hs-identifier hs-var">now</span></a></span></span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecLogger :: TracerProviderSpec -&gt; Logger
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecLogger"><span class="hs-identifier hs-var">tracerProviderSpecLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146245"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146245"><span class="hs-identifier hs-var">logger</span></a></span></span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSeed :: TracerProviderSpec -&gt; Seed
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSeed"><span class="hs-identifier hs-var">tracerProviderSpecSeed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146248"><span class="annot"><span class="annottext">Seed
</span><a href="#local-6989586621679146248"><span class="hs-identifier hs-var">seed</span></a></span></span><span>
</span><span id="line-531"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecIdGenerator :: TracerProviderSpec
-&gt; forall a. Logger -&gt; (IdGeneratorSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecIdGenerator"><span class="hs-identifier hs-var">tracerProviderSpecIdGenerator</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146277"><span class="annot"><span class="annottext">forall a. Logger -&gt; (IdGeneratorSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146277"><span class="hs-identifier hs-var">idGeneratorSpec</span></a></span></span><span>
</span><span id="line-532"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanProcessors :: TracerProviderSpec
-&gt; forall a. [Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanProcessors"><span class="hs-identifier hs-var">tracerProviderSpecSpanProcessors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146298"><span class="annot"><span class="annottext">forall a. [Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a]
</span><a href="#local-6989586621679146298"><span class="hs-identifier hs-var">spanProcessorSpecs</span></a></span></span><span>
</span><span id="line-533"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSampler :: TracerProviderSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSampler"><span class="hs-identifier hs-var">tracerProviderSpecSampler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146283"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146283"><span class="hs-identifier hs-var">samplerSpec</span></a></span></span><span>
</span><span id="line-534"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecResource :: TracerProviderSpec -&gt; Resource Attrs
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecResource"><span class="hs-identifier hs-var">tracerProviderSpecResource</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146265"><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146265"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-535"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanAttrsLimits :: TracerProviderSpec -&gt; AttrsLimits 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanAttrsLimits"><span class="hs-identifier hs-var">tracerProviderSpecSpanAttrsLimits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146266"><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpan
</span><a href="#local-6989586621679146266"><span class="hs-identifier hs-var">spanAttrsLimits</span></a></span></span><span>
</span><span id="line-536"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanEventAttrsLimits :: TracerProviderSpec -&gt; AttrsLimits 'AttrsForSpanEvent
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanEventAttrsLimits"><span class="hs-identifier hs-var">tracerProviderSpecSpanEventAttrsLimits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146267"><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanEvent
</span><a href="#local-6989586621679146267"><span class="hs-identifier hs-var">spanEventAttrsLimits</span></a></span></span><span>
</span><span id="line-537"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanLinkAttrsLimits :: TracerProviderSpec -&gt; AttrsLimits 'AttrsForSpanLink
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanLinkAttrsLimits"><span class="hs-identifier hs-var">tracerProviderSpecSpanLinkAttrsLimits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146268"><span class="annot"><span class="annottext">AttrsLimits 'AttrsForSpanLink
</span><a href="#local-6989586621679146268"><span class="hs-identifier hs-var">spanLinkAttrsLimits</span></a></span></span><span>
</span><span id="line-538"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecCallStackAttrs :: TracerProviderSpec -&gt; CallStack -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecCallStackAttrs"><span class="hs-identifier hs-var">tracerProviderSpecCallStackAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146383"><span class="annot"><span class="annottext">CallStack -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="#local-6989586621679146383"><span class="hs-identifier hs-var">callStackAttrs</span></a></span></span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tracerProviderSpecSpanContextMeta :: TracerProviderSpec -&gt; SpanContext -&gt; [Pair]
</span><a href="OTel.SDK.Trace.Internal.html#tracerProviderSpecSpanContextMeta"><span class="hs-identifier hs-var">tracerProviderSpecSpanContextMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146339"><span class="annot"><span class="annottext">SpanContext -&gt; [Pair]
</span><a href="#local-6989586621679146339"><span class="hs-identifier hs-var">spanContextMeta</span></a></span></span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracerProviderSpec
</span><a href="#local-6989586621679146241"><span class="hs-identifier hs-var">tracerProviderSpec</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-keyword">data</span><span> </span><span id="SpanProcessor"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-var">SpanProcessor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpanProcessor"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-var">SpanProcessor</span></a></span></span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="spanProcessorOnSpanStart"><span class="annot"><span class="annottext">SpanProcessor
-&gt; Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var hs-var">spanProcessorOnSpanStart</span></a></span></span><span>
</span><span id="line-544"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Context</span></span><span> </span><span class="hs-comment">-- Parent context</span><span>
</span><span id="line-545"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UpdateSpanSpec</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorOnSpanEnd"><span class="annot"><span class="annottext">SpanProcessor -&gt; Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var hs-var">spanProcessorOnSpanEnd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorShutdown"><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var hs-var">spanProcessorShutdown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-549"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorForceFlush"><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var hs-var">spanProcessorForceFlush</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679146481"><span id="local-6989586621679146485"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-553"></span><span>  </span><span id="local-6989586621679146500"><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146500"><span class="hs-identifier hs-var">sp1</span></a></span></span><span> </span><span id="local-6989586621679146501"><span class="annot"><span class="annottext">&lt;&gt; :: SpanProcessor -&gt; SpanProcessor -&gt; SpanProcessor
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679146502"><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146502"><span class="hs-identifier hs-var">sp2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-554"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span>
</span><span id="line-555"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanProcessorOnSpanStart :: Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var">spanProcessorOnSpanStart</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-556"></span><span>          </span><span class="annot"><span class="annottext">SpanProcessor
-&gt; Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var">spanProcessorOnSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146500"><span class="hs-identifier hs-var">sp1</span></a></span><span> </span><span class="annot"><span class="annottext">(Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ())
-&gt; (Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ())
-&gt; Context
-&gt; (UpdateSpanSpec -&gt; IO (Span Attrs))
-&gt; IO ()
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
-&gt; Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var">spanProcessorOnSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146502"><span class="hs-identifier hs-var">sp2</span></a></span><span>
</span><span id="line-557"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorOnSpanEnd :: Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorOnSpanEnd</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-558"></span><span>          </span><span class="annot"><span class="annottext">SpanProcessor -&gt; Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorOnSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146500"><span class="hs-identifier hs-var">sp1</span></a></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; IO ())
-&gt; (Span Attrs -&gt; IO ()) -&gt; Span Attrs -&gt; IO ()
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessor -&gt; Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorOnSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146502"><span class="hs-identifier hs-var">sp2</span></a></span><span>
</span><span id="line-559"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorShutdown :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var">spanProcessorShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-560"></span><span>          </span><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var">spanProcessorShutdown</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146500"><span class="hs-identifier hs-var">sp1</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO () -&gt; IO ()
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var">spanProcessorShutdown</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146502"><span class="hs-identifier hs-var">sp2</span></a></span><span>
</span><span id="line-561"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorForceFlush :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var">spanProcessorForceFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-562"></span><span>          </span><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var">spanProcessorForceFlush</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146500"><span class="hs-identifier hs-var">sp1</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO () -&gt; IO ()
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessor -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var">spanProcessorForceFlush</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessor
</span><a href="#local-6989586621679146502"><span class="hs-identifier hs-var">sp2</span></a></span><span>
</span><span id="line-563"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679146507"><span id="local-6989586621679146510"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>  </span><span id="local-6989586621679146518"><span class="annot"><span class="annottext">mempty :: SpanProcessor
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-567"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span>
</span><span id="line-568"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanProcessorOnSpanStart :: Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var">spanProcessorOnSpanStart</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-569"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorOnSpanEnd :: Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorOnSpanEnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; IO ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-570"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorShutdown :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var">spanProcessorShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-571"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorForceFlush :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var">spanProcessorForceFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-572"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildSpanProcessor"><span class="hs-identifier hs-type">buildSpanProcessor</span></a></span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144965"><span class="annot"><a href="#local-6989586621679144965"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-576"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span>
</span><span id="line-577"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-type">SpanProcessorSpec</span></a></span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144965"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-580"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144965"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-581"></span><span id="buildSpanProcessor"><span class="annot"><span class="annottext">buildSpanProcessor :: forall a.
Resource Attrs
-&gt; Logger -&gt; SpanProcessorSpec -&gt; (SpanProcessor -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#buildSpanProcessor"><span class="hs-identifier hs-var hs-var">buildSpanProcessor</span></a></span></span><span> </span><span id="local-6989586621679146570"><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146570"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621679146571"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146571"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679146572"><span class="annot"><span class="annottext">SpanProcessorSpec
</span><a href="#local-6989586621679146572"><span class="hs-identifier hs-var">spanProcessorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-582"></span><span>  </span><span class="annot"><span class="annottext">ContT a IO SpanProcessor -&gt; (SpanProcessor -&gt; IO a) -&gt; IO a
forall {k} (r :: k) (m :: k -&gt; *) a.
ContT r m a -&gt; (a -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var">runContT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-583"></span><span>    </span><span id="local-6989586621679146573"><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146573"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SpanExporterSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SpanExporterSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SpanExporterSpec -&gt; IO a) -&gt; IO a)
 -&gt; ContT a IO SpanExporterSpec)
-&gt; ((SpanExporterSpec -&gt; IO a) -&gt; IO a)
-&gt; ContT a IO SpanExporterSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146574"><span class="hs-identifier hs-var">spanProcessorSpecExporter</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146571"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-584"></span><span>    </span><span id="local-6989586621679146575"><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146575"><span class="hs-identifier hs-var">shutdownRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TVar Bool) -&gt; ContT a IO (TVar Bool)
forall a. IO a -&gt; ContT a IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (TVar Bool) -&gt; ContT a IO (TVar Bool))
-&gt; IO (TVar Bool) -&gt; ContT a IO (TVar Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO (TVar Bool)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">newTVarIO</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-585"></span><span>    </span><span class="annot"><span class="annottext">(LoggingT (ContT a IO) () -&gt; Logger -&gt; ContT a IO ())
-&gt; Logger -&gt; LoggingT (ContT a IO) () -&gt; ContT a IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT (ContT a IO) () -&gt; Logger -&gt; ContT a IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146571"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><span class="annottext">Message -&gt; LoggingT (ContT a IO) ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT (ContT a IO) ())
-&gt; Message -&gt; LoggingT (ContT a IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Building span processor&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-587"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146576"><span class="hs-identifier hs-var">spanProcessorSpecName</span></a></span><span>
</span><span id="line-588"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;shutdownTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146577"><span class="hs-identifier hs-var">shutdownTimeout</span></a></span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;forceFlushTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146578"><span class="hs-identifier hs-var">forceFlushTimeout</span></a></span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanExporter&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-591"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecName"><span class="hs-identifier hs-var">spanExporterSpecName</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146573"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span><span>
</span><span id="line-592"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;shutdownTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdownTimeout"><span class="hs-identifier hs-var">spanExporterSpecShutdownTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146573"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span><span>
</span><span id="line-593"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;forceFlushTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecForceFlushTimeout"><span class="hs-identifier hs-var">spanExporterSpecForceFlushTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146573"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span><span>
</span><span id="line-594"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-595"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-596"></span><span>    </span><span id="local-6989586621679146582"><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146582"><span class="hs-identifier hs-var">spanExporter</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO SpanExporter -&gt; ContT a IO SpanExporter
forall a. IO a -&gt; ContT a IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO SpanExporter -&gt; ContT a IO SpanExporter)
-&gt; IO SpanExporter -&gt; ContT a IO SpanExporter
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Resource Attrs -&gt; Logger -&gt; SpanExporterSpec -&gt; IO SpanExporter
</span><a href="OTel.SDK.Trace.Internal.html#buildSpanExporter"><span class="hs-identifier hs-var">buildSpanExporter</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146570"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146571"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146573"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span><span>
</span><span id="line-597"></span><span>    </span><span class="annot"><span class="annottext">SpanProcessor -&gt; ContT a IO SpanProcessor
forall a. a -&gt; ContT a IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SpanProcessor -&gt; ContT a IO SpanProcessor)
-&gt; SpanProcessor -&gt; ContT a IO SpanProcessor
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool -&gt; SpanExporter -&gt; SpanProcessor
</span><a href="#local-6989586621679146583"><span class="hs-identifier hs-var">spanProcessor</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146575"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146582"><span class="hs-identifier hs-var">spanExporter</span></a></span><span>
</span><span id="line-598"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-599"></span><span>  </span><span id="local-6989586621679146583"><span class="annot"><span class="annottext">spanProcessor :: TVar Bool -&gt; SpanExporter -&gt; SpanProcessor
</span><a href="#local-6989586621679146583"><span class="hs-identifier hs-var hs-var">spanProcessor</span></a></span></span><span> </span><span id="local-6989586621679146584"><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146584"><span class="hs-identifier hs-var">shutdownRef</span></a></span></span><span> </span><span id="local-6989586621679146585"><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146585"><span class="hs-identifier hs-var">spanExporter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessor"><span class="hs-identifier hs-type">SpanProcessor</span></a></span><span>
</span><span id="line-601"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanProcessorOnSpanStart :: Context -&gt; (UpdateSpanSpec -&gt; IO (Span Attrs)) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanStart"><span class="hs-identifier hs-var">spanProcessorOnSpanStart</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146586"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146586"><span class="hs-identifier hs-var">mParentSpanContext</span></a></span></span><span> </span><span id="local-6989586621679146587"><span class="annot"><span class="annottext">UpdateSpanSpec -&gt; IO (Span Attrs)
</span><a href="#local-6989586621679146587"><span class="hs-identifier hs-var">spanUpdater</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-602"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146584"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-603"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-604"></span><span>              </span><span class="annot"><span class="annottext">Int -&gt; [SeriesElem] -&gt; SpanProcessorM () -&gt; IO ()
</span><a href="#local-6989586621679146588"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146589"><span class="hs-identifier hs-var">defaultTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146590"><span class="hs-identifier hs-var">metaOnSpanStart</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-605"></span><span>                </span><span class="annot"><span class="annottext">Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
</span><a href="#local-6989586621679146591"><span class="hs-identifier hs-var">spanProcessorSpecOnSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679146586"><span class="hs-identifier hs-var">mParentSpanContext</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146592"><span class="annot"><span class="annottext">UpdateSpanSpec
</span><a href="#local-6989586621679146592"><span class="hs-identifier hs-var">updateSpanSpec</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-606"></span><span>                  </span><span class="annot"><span class="annottext">IO (Span Attrs) -&gt; SpanProcessorM (Span Attrs)
forall a. IO a -&gt; SpanProcessorM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Span Attrs) -&gt; SpanProcessorM (Span Attrs))
-&gt; IO (Span Attrs) -&gt; SpanProcessorM (Span Attrs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UpdateSpanSpec -&gt; IO (Span Attrs)
</span><a href="#local-6989586621679146587"><span class="hs-identifier hs-var">spanUpdater</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateSpanSpec
</span><a href="#local-6989586621679146592"><span class="hs-identifier hs-var">updateSpanSpec</span></a></span><span>
</span><span id="line-607"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorOnSpanEnd :: Span Attrs -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorOnSpanEnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146593"><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146593"><span class="hs-identifier hs-var">endedSpan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-608"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146584"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-609"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-610"></span><span>              </span><span class="annot"><span class="annottext">Int -&gt; [SeriesElem] -&gt; SpanProcessorM () -&gt; IO ()
</span><a href="#local-6989586621679146588"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146589"><span class="hs-identifier hs-var">defaultTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146594"><span class="hs-identifier hs-var">metaOnSpanEnd</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-611"></span><span>                </span><span class="annot"><span class="annottext">Span Attrs -&gt; SpanProcessorM ()
</span><a href="#local-6989586621679146595"><span class="hs-identifier hs-var">spanProcessorSpecOnSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146593"><span class="hs-identifier hs-var">endedSpan</span></a></span><span>
</span><span id="line-612"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorShutdown :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorShutdown"><span class="hs-identifier hs-var">spanProcessorShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-613"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146584"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-614"></span><span>            </span><span class="annot"><span class="annottext">TVar Bool -&gt; Bool -&gt; STM ()
forall a. TVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">writeTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146584"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-615"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-616"></span><span>              </span><span class="annot"><span class="annottext">Int -&gt; [SeriesElem] -&gt; SpanProcessorM () -&gt; IO ()
</span><a href="#local-6989586621679146588"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146577"><span class="hs-identifier hs-var">shutdownTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146596"><span class="hs-identifier hs-var">metaShutdown</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-617"></span><span>                </span><span class="annot"><span class="annottext">SpanProcessorM ()
</span><a href="#local-6989586621679146597"><span class="hs-identifier hs-var">spanProcessorSpecShutdown</span></a></span><span>
</span><span id="line-618"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorForceFlush :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorForceFlush"><span class="hs-identifier hs-var">spanProcessorForceFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-619"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146584"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-620"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-621"></span><span>              </span><span class="annot"><span class="annottext">Int -&gt; [SeriesElem] -&gt; SpanProcessorM () -&gt; IO ()
</span><a href="#local-6989586621679146588"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146578"><span class="hs-identifier hs-var">forceFlushTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146598"><span class="hs-identifier hs-var">metaForceFlush</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-622"></span><span>                </span><span class="annot"><span class="annottext">SpanProcessorM ()
</span><a href="#local-6989586621679146599"><span class="hs-identifier hs-var">spanProcessorSpecForceFlush</span></a></span><span>
</span><span id="line-623"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-624"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-625"></span><span>    </span><span class="annot"><a href="#local-6989586621679146588"><span class="hs-identifier hs-type">run</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>    </span><span id="local-6989586621679146588"><span class="annot"><span class="annottext">run :: Int -&gt; [SeriesElem] -&gt; SpanProcessorM () -&gt; IO ()
</span><a href="#local-6989586621679146588"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanExporter
-&gt; Logger
-&gt; OnTimeout ()
-&gt; OnException ()
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanProcessorM ()
-&gt; IO ()
forall a.
SpanExporter
-&gt; Logger
-&gt; OnTimeout a
-&gt; OnException a
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanProcessorM a
-&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSpanProcessorM"><span class="hs-identifier hs-var">runSpanProcessorM</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146585"><span class="hs-identifier hs-var">spanExporter</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146571"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">OnTimeout ()
</span><a href="#local-6989586621679146600"><span class="hs-identifier hs-var">onTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">OnException ()
</span><a href="#local-6989586621679146601"><span class="hs-identifier hs-var">onEx</span></a></span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span>  </span><span class="annot"><a href="#local-6989586621679146589"><span class="hs-identifier hs-type">defaultTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-629"></span><span>  </span><span id="local-6989586621679146589"><span class="annot"><span class="annottext">defaultTimeout :: Int
</span><a href="#local-6989586621679146589"><span class="hs-identifier hs-var hs-var">defaultTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5_000_000</span></span><span>
</span><span id="line-630"></span><span>
</span><span id="line-631"></span><span>  </span><span id="local-6989586621679146590"><span class="annot"><span class="annottext">metaOnSpanStart :: [SeriesElem]
</span><a href="#local-6989586621679146590"><span class="hs-identifier hs-var hs-var">metaOnSpanStart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146603"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;onSpanStart&quot;</span></span><span>
</span><span id="line-632"></span><span>  </span><span id="local-6989586621679146594"><span class="annot"><span class="annottext">metaOnSpanEnd :: [SeriesElem]
</span><a href="#local-6989586621679146594"><span class="hs-identifier hs-var hs-var">metaOnSpanEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146603"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;onSpanEnd&quot;</span></span><span>
</span><span id="line-633"></span><span>  </span><span id="local-6989586621679146596"><span class="annot"><span class="annottext">metaShutdown :: [SeriesElem]
</span><a href="#local-6989586621679146596"><span class="hs-identifier hs-var hs-var">metaShutdown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146603"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;shutdown&quot;</span></span><span>
</span><span id="line-634"></span><span>  </span><span id="local-6989586621679146598"><span class="annot"><span class="annottext">metaForceFlush :: [SeriesElem]
</span><a href="#local-6989586621679146598"><span class="hs-identifier hs-var hs-var">metaForceFlush</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146603"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forceFlush&quot;</span></span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span>  </span><span class="annot"><a href="#local-6989586621679146603"><span class="hs-identifier hs-type">mkLoggingMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-637"></span><span>  </span><span id="local-6989586621679146603"><span class="annot"><span class="annottext">mkLoggingMeta :: Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146603"><span class="hs-identifier hs-var hs-var">mkLoggingMeta</span></a></span></span><span> </span><span id="local-6989586621679146607"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146607"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanProcessor&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-639"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146576"><span class="hs-identifier hs-var">spanProcessorSpecName</span></a></span><span>
</span><span id="line-640"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146607"><span class="hs-identifier hs-var">method</span></a></span><span>
</span><span id="line-641"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-642"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-type">SpanProcessorSpec</span></a></span><span>
</span><span id="line-645"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679146576"><span class="annot"><span class="annottext">Text
spanProcessorSpecName :: Text
spanProcessorSpecName :: SpanProcessorSpec -&gt; Text
</span><a href="#local-6989586621679146576"><span class="hs-identifier hs-var hs-var">spanProcessorSpecName</span></a></span></span><span>
</span><span id="line-646"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146574"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
spanProcessorSpecExporter :: forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
spanProcessorSpecExporter :: SpanProcessorSpec
-&gt; forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146574"><span class="hs-identifier hs-var hs-var">spanProcessorSpecExporter</span></a></span></span><span>
</span><span id="line-647"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146591"><span class="annot"><span class="annottext">Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
spanProcessorSpecOnSpanStart :: Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
spanProcessorSpecOnSpanStart :: SpanProcessorSpec
-&gt; Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
</span><a href="#local-6989586621679146591"><span class="hs-identifier hs-var hs-var">spanProcessorSpecOnSpanStart</span></a></span></span><span>
</span><span id="line-648"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146595"><span class="annot"><span class="annottext">Span Attrs -&gt; SpanProcessorM ()
spanProcessorSpecOnSpanEnd :: Span Attrs -&gt; SpanProcessorM ()
spanProcessorSpecOnSpanEnd :: SpanProcessorSpec -&gt; Span Attrs -&gt; SpanProcessorM ()
</span><a href="#local-6989586621679146595"><span class="hs-identifier hs-var hs-var">spanProcessorSpecOnSpanEnd</span></a></span></span><span>
</span><span id="line-649"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146597"><span class="annot"><span class="annottext">SpanProcessorM ()
spanProcessorSpecShutdown :: SpanProcessorM ()
spanProcessorSpecShutdown :: SpanProcessorSpec -&gt; SpanProcessorM ()
</span><a href="#local-6989586621679146597"><span class="hs-identifier hs-var hs-var">spanProcessorSpecShutdown</span></a></span></span><span>
</span><span id="line-650"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecShutdownTimeout :: SpanProcessorSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecShutdownTimeout"><span class="hs-identifier hs-var">spanProcessorSpecShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146577"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146577"><span class="hs-identifier hs-var">shutdownTimeout</span></a></span></span><span>
</span><span id="line-651"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146599"><span class="annot"><span class="annottext">SpanProcessorM ()
spanProcessorSpecForceFlush :: SpanProcessorM ()
spanProcessorSpecForceFlush :: SpanProcessorSpec -&gt; SpanProcessorM ()
</span><a href="#local-6989586621679146599"><span class="hs-identifier hs-var hs-var">spanProcessorSpecForceFlush</span></a></span></span><span>
</span><span id="line-652"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecForceFlushTimeout :: SpanProcessorSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecForceFlushTimeout"><span class="hs-identifier hs-var">spanProcessorSpecForceFlushTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146578"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146578"><span class="hs-identifier hs-var">forceFlushTimeout</span></a></span></span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecOnTimeout :: SpanProcessorSpec -&gt; OnTimeout ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnTimeout"><span class="hs-identifier hs-var">spanProcessorSpecOnTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146600"><span class="annot"><span class="annottext">OnTimeout ()
</span><a href="#local-6989586621679146600"><span class="hs-identifier hs-var">onTimeout</span></a></span></span><span>
</span><span id="line-654"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecOnException :: SpanProcessorSpec -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnException"><span class="hs-identifier hs-var">spanProcessorSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146601"><span class="annot"><span class="annottext">OnException ()
</span><a href="#local-6989586621679146601"><span class="hs-identifier hs-var">onEx</span></a></span></span><span>
</span><span id="line-655"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanProcessorSpec
</span><a href="#local-6989586621679146572"><span class="hs-identifier hs-var">spanProcessorSpec</span></a></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-keyword">data</span><span> </span><span id="SimpleSpanProcessorSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier hs-var">SimpleSpanProcessorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SimpleSpanProcessorSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier hs-var">SimpleSpanProcessorSpec</span></a></span></span><span>
</span><span id="line-658"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="simpleSpanProcessorSpecName"><span class="annot"><span class="annottext">SimpleSpanProcessorSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecName"><span class="hs-identifier hs-var hs-var">simpleSpanProcessorSpecName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-659"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="simpleSpanProcessorSpecExporter"><span class="annot"><span class="annottext">SimpleSpanProcessorSpec
-&gt; forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecExporter"><span class="hs-identifier hs-var hs-var">simpleSpanProcessorSpecExporter</span></a></span></span><span>
</span><span id="line-660"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679146622"><span class="annot"><a href="#local-6989586621679146622"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679146622"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679146622"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-661"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="simpleSpanProcessorSpecOnSpansExported"><span class="annot"><span class="annottext">SimpleSpanProcessorSpec -&gt; OnSpansExported ()
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecOnSpansExported"><span class="hs-identifier hs-var hs-var">simpleSpanProcessorSpecOnSpansExported</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-type">OnSpansExported</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSimpleSpanProcessorSpec"><span class="hs-identifier hs-type">defaultSimpleSpanProcessorSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier hs-type">SimpleSpanProcessorSpec</span></a></span><span>
</span><span id="line-665"></span><span id="defaultSimpleSpanProcessorSpec"><span class="annot"><span class="annottext">defaultSimpleSpanProcessorSpec :: SimpleSpanProcessorSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSimpleSpanProcessorSpec"><span class="hs-identifier hs-var hs-var">defaultSimpleSpanProcessorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier hs-type">SimpleSpanProcessorSpec</span></a></span><span>
</span><span id="line-667"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">simpleSpanProcessorSpecExporter :: forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecExporter"><span class="hs-identifier hs-var">simpleSpanProcessorSpecExporter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146624"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146624"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier hs-var">defaultSpanExporterSpec</span></a></span><span>
</span><span id="line-668"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">simpleSpanProcessorSpecName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecName"><span class="hs-identifier hs-var">simpleSpanProcessorSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;simple&quot;</span></span><span>
</span><span id="line-669"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">simpleSpanProcessorSpecOnSpansExported :: OnSpansExported ()
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecOnSpansExported"><span class="hs-identifier hs-var">simpleSpanProcessorSpecOnSpansExported</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-670"></span><span>        </span><span class="annot"><span class="annottext">OnSpansExported SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#askSpansExportedResult"><span class="hs-identifier hs-var">askSpansExportedResult</span></a></span><span> </span><span class="annot"><span class="annottext">OnSpansExported SpanExportResult
-&gt; (SpanExportResult -&gt; OnSpansExported ()) -&gt; OnSpansExported ()
forall a b.
OnSpansExported a -&gt; (a -&gt; OnSpansExported b) -&gt; OnSpansExported b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-671"></span><span>          </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#SpanExportResultSuccess"><span class="hs-identifier hs-var">SpanExportResultSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; OnSpansExported ()
forall a. a -&gt; OnSpansExported a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>          </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#SpanExportResultFailure"><span class="hs-identifier hs-var">SpanExportResultFailure</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-673"></span><span>            </span><span id="local-6989586621679146627"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679146627"><span class="hs-identifier hs-var">spans</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnSpansExported (Batch (Span Attrs))
</span><a href="OTel.SDK.Trace.Internal.html#askSpansExported"><span class="hs-identifier hs-var">askSpansExported</span></a></span><span>
</span><span id="line-674"></span><span>            </span><span id="local-6989586621679146628"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146628"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnSpansExported [SeriesElem]
</span><a href="OTel.SDK.Trace.Internal.html#askSpansExportedMetadata"><span class="hs-identifier hs-var">askSpansExportedMetadata</span></a></span><span>
</span><span id="line-675"></span><span>            </span><span class="annot"><span class="annottext">Message -&gt; OnSpansExported ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnSpansExported ()) -&gt; Message -&gt; OnSpansExported ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Exporter failed to export spans&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-676"></span><span>              </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spans&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Batch Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; Value) -&gt; Batch (Span Attrs) -&gt; Batch Value
forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; Value
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Value
</span><a href="OTel.SDK.Trace.Internal.html#spanSummary"><span class="hs-identifier hs-var">spanSummary</span></a></span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679146627"><span class="hs-identifier hs-var">spans</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146628"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-677"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessor"><span class="hs-identifier hs-type">simpleSpanProcessor</span></a></span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145024"><span class="annot"><a href="#local-6989586621679145024"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-681"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier hs-type">SimpleSpanProcessorSpec</span></a></span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-type">SpanProcessorSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145024"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145024"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-685"></span><span id="simpleSpanProcessor"><span class="annot"><span class="annottext">simpleSpanProcessor :: forall a.
SimpleSpanProcessorSpec
-&gt; Logger -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessor"><span class="hs-identifier hs-var hs-var">simpleSpanProcessor</span></a></span></span><span> </span><span id="local-6989586621679146643"><span class="annot"><span class="annottext">SimpleSpanProcessorSpec
</span><a href="#local-6989586621679146643"><span class="hs-identifier hs-var">simpleSpanProcessorSpec</span></a></span></span><span> </span><span id="local-6989586621679146644"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146644"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-686"></span><span>  </span><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; (SpanProcessorSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SpanProcessorSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanProcessorSpec"><span class="hs-identifier hs-var">defaultSpanProcessorSpec</span></a></span><span>
</span><span id="line-687"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecName"><span class="hs-identifier hs-var">spanProcessorSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679146645"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-688"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecExporter"><span class="hs-identifier hs-var">spanProcessorSpecExporter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679146646"><span class="hs-identifier hs-type">spanExporterSpec</span></a></span><span>
</span><span id="line-689"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorSpecOnSpanEnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146647"><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146647"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-690"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; SpanProcessorM () -&gt; SpanProcessorM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span Attrs -&gt; Bool
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Bool
</span><span class="hs-identifier hs-var">spanIsSampled</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146647"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-691"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679146648"><span class="annot"><span class="annottext">batch :: Batch (Span Attrs)
</span><a href="#local-6989586621679146648"><span class="hs-identifier hs-var hs-var">batch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; Batch (Span Attrs)
forall a. a -&gt; Batch a
</span><a href="OTel.SDK.Trace.Internal.html#singletonBatch"><span class="hs-identifier hs-var">singletonBatch</span></a></span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679146647"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-692"></span><span>          </span><span id="local-6989586621679146649"><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146649"><span class="hs-identifier hs-var">spanExporter</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SpanProcessorM SpanExporter
</span><a href="OTel.SDK.Trace.Internal.html#askSpanExporter"><span class="hs-identifier hs-var">askSpanExporter</span></a></span><span>
</span><span id="line-693"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; SpanProcessorM ()
forall a. IO a -&gt; SpanProcessorM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SpanProcessorM ()) -&gt; IO () -&gt; SpanProcessorM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanExporter
-&gt; Batch (Span Attrs) -&gt; (SpanExportResult -&gt; IO ()) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterExport"><span class="hs-identifier hs-var">spanExporterExport</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146649"><span class="hs-identifier hs-var">spanExporter</span></a></span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679146648"><span class="hs-identifier hs-var">batch</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146651"><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679146651"><span class="hs-identifier hs-var">spanExportResult</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-694"></span><span>            </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146644"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-695"></span><span>              </span><span class="annot"><span class="annottext">OnSpansExported ()
-&gt; Batch (Span Attrs)
-&gt; SpanExportResult
-&gt; [SeriesElem]
-&gt; LoggingT IO ()
forall a.
OnSpansExported a
-&gt; Batch (Span Attrs)
-&gt; SpanExportResult
-&gt; [SeriesElem]
-&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#runOnSpansExported"><span class="hs-identifier hs-var">runOnSpansExported</span></a></span><span> </span><span class="annot"><span class="annottext">OnSpansExported ()
</span><a href="#local-6989586621679146653"><span class="hs-identifier hs-var">onSpansExported</span></a></span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679146648"><span class="hs-identifier hs-var">batch</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679146651"><span class="hs-identifier hs-var">spanExportResult</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146654"><span class="hs-identifier hs-var">metaOnSpanEnd</span></a></span><span>
</span><span id="line-696"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-698"></span><span>  </span><span class="annot"><a href="#local-6989586621679146654"><span class="hs-identifier hs-type">metaOnSpanEnd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-699"></span><span>  </span><span id="local-6989586621679146654"><span class="annot"><span class="annottext">metaOnSpanEnd :: [SeriesElem]
</span><a href="#local-6989586621679146654"><span class="hs-identifier hs-var hs-var">metaOnSpanEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146655"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;onSpanEnd&quot;</span></span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span>  </span><span class="annot"><a href="#local-6989586621679146655"><span class="hs-identifier hs-type">mkLoggingMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-702"></span><span>  </span><span id="local-6989586621679146655"><span class="annot"><span class="annottext">mkLoggingMeta :: Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146655"><span class="hs-identifier hs-var hs-var">mkLoggingMeta</span></a></span></span><span> </span><span id="local-6989586621679146656"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146656"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-703"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanProcessorSpec&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-704"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146645"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-705"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146656"><span class="hs-identifier hs-var">method</span></a></span><span>
</span><span id="line-706"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-707"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SimpleSpanProcessorSpec"><span class="hs-identifier hs-type">SimpleSpanProcessorSpec</span></a></span><span>
</span><span id="line-710"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">simpleSpanProcessorSpecName :: SimpleSpanProcessorSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecName"><span class="hs-identifier hs-var">simpleSpanProcessorSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146645"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146645"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-711"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">simpleSpanProcessorSpecExporter :: SimpleSpanProcessorSpec
-&gt; forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecExporter"><span class="hs-identifier hs-var">simpleSpanProcessorSpecExporter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146646"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679146646"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span></span><span>
</span><span id="line-712"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">simpleSpanProcessorSpecOnSpansExported :: SimpleSpanProcessorSpec -&gt; OnSpansExported ()
</span><a href="OTel.SDK.Trace.Internal.html#simpleSpanProcessorSpecOnSpansExported"><span class="hs-identifier hs-var">simpleSpanProcessorSpecOnSpansExported</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146653"><span class="annot"><span class="annottext">OnSpansExported ()
</span><a href="#local-6989586621679146653"><span class="hs-identifier hs-var">onSpansExported</span></a></span></span><span>
</span><span id="line-713"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleSpanProcessorSpec
</span><a href="#local-6989586621679146643"><span class="hs-identifier hs-var">simpleSpanProcessorSpec</span></a></span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="hs-keyword">data</span><span> </span><span id="SpanProcessorSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-var">SpanProcessorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpanProcessorSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-var">SpanProcessorSpec</span></a></span></span><span>
</span><span id="line-716"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="spanProcessorSpecName"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecName"><span class="hs-identifier hs-var hs-var">spanProcessorSpecName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-717"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecExporter"><span class="annot"><span class="annottext">SpanProcessorSpec
-&gt; forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecExporter"><span class="hs-identifier hs-var hs-var">spanProcessorSpecExporter</span></a></span></span><span>
</span><span id="line-718"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145014"><span class="annot"><a href="#local-6989586621679145014"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145014"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145014"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-719"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecOnSpanStart"><span class="annot"><span class="annottext">SpanProcessorSpec
-&gt; Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnSpanStart"><span class="hs-identifier hs-var hs-var">spanProcessorSpecOnSpanStart</span></a></span></span><span>
</span><span id="line-720"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Context</span></span><span> </span><span class="hs-comment">-- Parent context</span><span>
</span><span id="line-721"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UpdateSpanSpec</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecOnSpanEnd"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; Span Attrs -&gt; SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnSpanEnd"><span class="hs-identifier hs-var hs-var">spanProcessorSpecOnSpanEnd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecShutdown"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecShutdown"><span class="hs-identifier hs-var hs-var">spanProcessorSpecShutdown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecShutdownTimeout"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecShutdownTimeout"><span class="hs-identifier hs-var hs-var">spanProcessorSpecShutdownTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-726"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecForceFlush"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecForceFlush"><span class="hs-identifier hs-var hs-var">spanProcessorSpecForceFlush</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecForceFlushTimeout"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecForceFlushTimeout"><span class="hs-identifier hs-var hs-var">spanProcessorSpecForceFlushTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-728"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecOnTimeout"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; OnTimeout ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnTimeout"><span class="hs-identifier hs-var hs-var">spanProcessorSpecOnTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnTimeout</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanProcessorSpecOnException"><span class="annot"><span class="annottext">SpanProcessorSpec -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnException"><span class="hs-identifier hs-var hs-var">spanProcessorSpecOnException</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSpanProcessorSpec"><span class="hs-identifier hs-type">defaultSpanProcessorSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-type">SpanProcessorSpec</span></a></span><span>
</span><span id="line-733"></span><span id="defaultSpanProcessorSpec"><span class="annot"><span class="annottext">defaultSpanProcessorSpec :: SpanProcessorSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanProcessorSpec"><span class="hs-identifier hs-var hs-var">defaultSpanProcessorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-734"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorSpec"><span class="hs-identifier hs-type">SpanProcessorSpec</span></a></span><span>
</span><span id="line-735"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecName"><span class="hs-identifier hs-var">spanProcessorSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;default&quot;</span></span><span>
</span><span id="line-736"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecExporter :: forall a. Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecExporter"><span class="hs-identifier hs-var">spanProcessorSpecExporter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146657"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146657"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier hs-var">defaultSpanExporterSpec</span></a></span><span>
</span><span id="line-737"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecOnSpanStart :: Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnSpanStart"><span class="hs-identifier hs-var">spanProcessorSpecOnSpanStart</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context
-&gt; (UpdateSpanSpec -&gt; SpanProcessorM (Span Attrs))
-&gt; SpanProcessorM ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-738"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecOnSpanEnd :: Span Attrs -&gt; SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnSpanEnd"><span class="hs-identifier hs-var">spanProcessorSpecOnSpanEnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; SpanProcessorM ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-739"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecShutdown :: SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecShutdown"><span class="hs-identifier hs-var">spanProcessorSpecShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-740"></span><span>        </span><span id="local-6989586621679146658"><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146658"><span class="hs-identifier hs-var">spanExporter</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SpanProcessorM SpanExporter
</span><a href="OTel.SDK.Trace.Internal.html#askSpanExporter"><span class="hs-identifier hs-var">askSpanExporter</span></a></span><span>
</span><span id="line-741"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; SpanProcessorM ()
forall a. IO a -&gt; SpanProcessorM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SpanProcessorM ()) -&gt; IO () -&gt; SpanProcessorM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanExporter -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterShutdown"><span class="hs-identifier hs-var">spanExporterShutdown</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146658"><span class="hs-identifier hs-var">spanExporter</span></a></span><span>
</span><span id="line-742"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecShutdownTimeout :: Int
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecShutdownTimeout"><span class="hs-identifier hs-var">spanProcessorSpecShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30_000_000</span></span><span>
</span><span id="line-743"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecForceFlush :: SpanProcessorM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecForceFlush"><span class="hs-identifier hs-var">spanProcessorSpecForceFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-744"></span><span>        </span><span id="local-6989586621679146660"><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146660"><span class="hs-identifier hs-var">spanExporter</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SpanProcessorM SpanExporter
</span><a href="OTel.SDK.Trace.Internal.html#askSpanExporter"><span class="hs-identifier hs-var">askSpanExporter</span></a></span><span>
</span><span id="line-745"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; SpanProcessorM ()
forall a. IO a -&gt; SpanProcessorM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SpanProcessorM ()) -&gt; IO () -&gt; SpanProcessorM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanExporter -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterForceFlush"><span class="hs-identifier hs-var">spanExporterForceFlush</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679146660"><span class="hs-identifier hs-var">spanExporter</span></a></span><span>
</span><span id="line-746"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecForceFlushTimeout :: Int
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecForceFlushTimeout"><span class="hs-identifier hs-var">spanProcessorSpecForceFlushTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30_000_000</span></span><span>
</span><span id="line-747"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecOnTimeout :: OnTimeout ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnTimeout"><span class="hs-identifier hs-var">spanProcessorSpecOnTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-748"></span><span>        </span><span id="local-6989586621679146662"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146662"><span class="hs-identifier hs-var">timeoutMicros</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnTimeout Int
</span><span class="hs-identifier hs-var">askTimeoutMicros</span></span><span>
</span><span id="line-749"></span><span>        </span><span id="local-6989586621679146663"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146663"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnTimeout [SeriesElem]
</span><span class="hs-identifier hs-var">askTimeoutMetadata</span></span><span>
</span><span id="line-750"></span><span>        </span><span class="annot"><span class="annottext">Message -&gt; OnTimeout ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnTimeout ()) -&gt; Message -&gt; OnTimeout ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Action did not complete within timeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-751"></span><span>          </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;timeoutMicros&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146662"><span class="hs-identifier hs-var">timeoutMicros</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146663"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-752"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanProcessorSpecOnException :: OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#spanProcessorSpecOnException"><span class="hs-identifier hs-var">spanProcessorSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-753"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679146676"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679146676"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException SomeException
</span><span class="hs-identifier hs-var">askException</span></span><span>
</span><span id="line-754"></span><span>        </span><span id="local-6989586621679146677"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146677"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException [SeriesElem]
</span><span class="hs-identifier hs-var">askExceptionMetadata</span></span><span>
</span><span id="line-755"></span><span>        </span><span class="annot"><span class="annottext">Message -&gt; OnException ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnException ()) -&gt; Message -&gt; OnException ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Ignoring exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-756"></span><span>          </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679146676"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146677"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-757"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span class="hs-keyword">data</span><span> </span><span id="SpanExportResult"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-var">SpanExportResult</span></a></span></span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SpanExportResultSuccess"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResultSuccess"><span class="hs-identifier hs-var">SpanExportResultSuccess</span></a></span></span><span>
</span><span id="line-761"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SpanExportResultFailure"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResultFailure"><span class="hs-identifier hs-var">SpanExportResultFailure</span></a></span></span><span>
</span><span id="line-762"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679146679"><span id="local-6989586621679146681"><span class="annot"><span class="annottext">SpanExportResult -&gt; SpanExportResult -&gt; Bool
(SpanExportResult -&gt; SpanExportResult -&gt; Bool)
-&gt; (SpanExportResult -&gt; SpanExportResult -&gt; Bool)
-&gt; Eq SpanExportResult
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SpanExportResult -&gt; SpanExportResult -&gt; Bool
== :: SpanExportResult -&gt; SpanExportResult -&gt; Bool
$c/= :: SpanExportResult -&gt; SpanExportResult -&gt; Bool
/= :: SpanExportResult -&gt; SpanExportResult -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146686"><span id="local-6989586621679146688"><span id="local-6989586621679146692"><span class="annot"><span class="annottext">Int -&gt; SpanExportResult -&gt; ShowS
[SpanExportResult] -&gt; ShowS
SpanExportResult -&gt; [Char]
(Int -&gt; SpanExportResult -&gt; ShowS)
-&gt; (SpanExportResult -&gt; [Char])
-&gt; ([SpanExportResult] -&gt; ShowS)
-&gt; Show SpanExportResult
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SpanExportResult -&gt; ShowS
showsPrec :: Int -&gt; SpanExportResult -&gt; ShowS
$cshow :: SpanExportResult -&gt; [Char]
show :: SpanExportResult -&gt; [Char]
$cshowList :: [SpanExportResult] -&gt; ShowS
showList :: [SpanExportResult] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>
</span><span id="line-764"></span><span class="hs-keyword">data</span><span> </span><span id="SpanExporter"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-var">SpanExporter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpanExporter"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-var">SpanExporter</span></a></span></span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="spanExporterExport"><span class="annot"><span class="annottext">SpanExporter
-&gt; Batch (Span Attrs) -&gt; (SpanExportResult -&gt; IO ()) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterExport"><span class="hs-identifier hs-var hs-var">spanExporterExport</span></a></span></span><span>
</span><span id="line-766"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterShutdown"><span class="annot"><span class="annottext">SpanExporter -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterShutdown"><span class="hs-identifier hs-var hs-var">spanExporterShutdown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterForceFlush"><span class="annot"><span class="annottext">SpanExporter -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterForceFlush"><span class="hs-identifier hs-var hs-var">spanExporterForceFlush</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-772"></span><span>
</span><span id="line-773"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildSpanExporter"><span class="hs-identifier hs-type">buildSpanExporter</span></a></span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-776"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span>
</span><span id="line-778"></span><span id="buildSpanExporter"><span class="annot"><span class="annottext">buildSpanExporter :: Resource Attrs -&gt; Logger -&gt; SpanExporterSpec -&gt; IO SpanExporter
</span><a href="OTel.SDK.Trace.Internal.html#buildSpanExporter"><span class="hs-identifier hs-var hs-var">buildSpanExporter</span></a></span></span><span> </span><span id="local-6989586621679146696"><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146696"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621679146697"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146697"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679146698"><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146698"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-779"></span><span>  </span><span id="local-6989586621679146699"><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146699"><span class="hs-identifier hs-var">shutdownRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TVar Bool) -&gt; IO (TVar Bool)
forall a. IO a -&gt; IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (TVar Bool) -&gt; IO (TVar Bool))
-&gt; IO (TVar Bool) -&gt; IO (TVar Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO (TVar Bool)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">newTVarIO</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-780"></span><span>  </span><span class="annot"><span class="annottext">SpanExporter -&gt; IO SpanExporter
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SpanExporter -&gt; IO SpanExporter)
-&gt; SpanExporter -&gt; IO SpanExporter
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool -&gt; SpanExporter
</span><a href="#local-6989586621679146700"><span class="hs-identifier hs-var">spanExporter</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146699"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span>
</span><span id="line-781"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-782"></span><span>  </span><span id="local-6989586621679146700"><span class="annot"><span class="annottext">spanExporter :: TVar Bool -&gt; SpanExporter
</span><a href="#local-6989586621679146700"><span class="hs-identifier hs-var hs-var">spanExporter</span></a></span></span><span> </span><span id="local-6989586621679146701"><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146701"><span class="hs-identifier hs-var">shutdownRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-783"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span>
</span><span id="line-784"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanExporterExport :: Batch (Span Attrs) -&gt; (SpanExportResult -&gt; IO ()) -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterExport"><span class="hs-identifier hs-var">spanExporterExport</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146702"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679146702"><span class="hs-identifier hs-var">spans</span></a></span></span><span> </span><span id="local-6989586621679146703"><span class="annot"><span class="annottext">SpanExportResult -&gt; IO ()
</span><a href="#local-6989586621679146703"><span class="hs-identifier hs-var">onSpansExported</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-785"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146701"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-786"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-787"></span><span>              </span><span class="annot"><span class="annottext">Resource Attrs
-&gt; Logger
-&gt; OnTimeout ()
-&gt; OnException ()
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM ()
-&gt; IO ()
forall a.
Resource Attrs
-&gt; Logger
-&gt; OnTimeout a
-&gt; OnException a
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM a
-&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSpanExporterM"><span class="hs-identifier hs-var">runSpanExporterM</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146696"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146697"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">OnTimeout ()
</span><a href="#local-6989586621679146704"><span class="hs-identifier hs-var">onTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">OnException ()
</span><a href="#local-6989586621679146705"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146706"><span class="hs-identifier hs-var">defaultTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146707"><span class="hs-identifier hs-var">metaExport</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-788"></span><span>                </span><span class="annot"><span class="annottext">Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ()) -&gt; SpanExporterM ()
</span><a href="#local-6989586621679146708"><span class="hs-identifier hs-var">spanExporterSpecExport</span></a></span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679146702"><span class="hs-identifier hs-var">spans</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679146709"><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679146709"><span class="hs-identifier hs-var">spanExportResult</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-789"></span><span>                  </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall a. IO a -&gt; IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanExportResult -&gt; IO ()
</span><a href="#local-6989586621679146703"><span class="hs-identifier hs-var">onSpansExported</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679146709"><span class="hs-identifier hs-var">spanExportResult</span></a></span><span>
</span><span id="line-790"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterShutdown :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterShutdown"><span class="hs-identifier hs-var">spanExporterShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-791"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146701"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-792"></span><span>            </span><span class="annot"><span class="annottext">TVar Bool -&gt; Bool -&gt; STM ()
forall a. TVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">writeTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146701"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-793"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-794"></span><span>              </span><span class="annot"><span class="annottext">Resource Attrs
-&gt; Logger
-&gt; OnTimeout ()
-&gt; OnException ()
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM ()
-&gt; IO ()
forall a.
Resource Attrs
-&gt; Logger
-&gt; OnTimeout a
-&gt; OnException a
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM a
-&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSpanExporterM"><span class="hs-identifier hs-var">runSpanExporterM</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146696"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146697"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">OnTimeout ()
</span><a href="#local-6989586621679146704"><span class="hs-identifier hs-var">onTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">OnException ()
</span><a href="#local-6989586621679146705"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146710"><span class="hs-identifier hs-var">shutdownTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146711"><span class="hs-identifier hs-var">metaShutdown</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-795"></span><span>                </span><span class="annot"><span class="annottext">SpanExporterM ()
</span><a href="#local-6989586621679146712"><span class="hs-identifier hs-var">spanExporterSpecShutdown</span></a></span><span>
</span><span id="line-796"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterForceFlush :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterForceFlush"><span class="hs-identifier hs-var">spanExporterForceFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-797"></span><span>          </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TVar Bool -&gt; STM Bool
forall a. TVar a -&gt; STM a
</span><span class="hs-identifier hs-var">readTVar</span></span><span> </span><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679146701"><span class="hs-identifier hs-var">shutdownRef</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-798"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-799"></span><span>              </span><span class="annot"><span class="annottext">Resource Attrs
-&gt; Logger
-&gt; OnTimeout ()
-&gt; OnException ()
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM ()
-&gt; IO ()
forall a.
Resource Attrs
-&gt; Logger
-&gt; OnTimeout a
-&gt; OnException a
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM a
-&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSpanExporterM"><span class="hs-identifier hs-var">runSpanExporterM</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679146696"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679146697"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">OnTimeout ()
</span><a href="#local-6989586621679146704"><span class="hs-identifier hs-var">onTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">OnException ()
</span><a href="#local-6989586621679146705"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146713"><span class="hs-identifier hs-var">forceFlushTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679146714"><span class="hs-identifier hs-var">metaForceFlush</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-800"></span><span>                </span><span class="annot"><span class="annottext">SpanExporterM ()
</span><a href="#local-6989586621679146715"><span class="hs-identifier hs-var">spanExporterSpecForceFlush</span></a></span><span>
</span><span id="line-801"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span>  </span><span class="annot"><a href="#local-6989586621679146706"><span class="hs-identifier hs-type">defaultTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-804"></span><span>  </span><span id="local-6989586621679146706"><span class="annot"><span class="annottext">defaultTimeout :: Int
</span><a href="#local-6989586621679146706"><span class="hs-identifier hs-var hs-var">defaultTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10_000_000</span></span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span>  </span><span id="local-6989586621679146707"><span class="annot"><span class="annottext">metaExport :: [SeriesElem]
</span><a href="#local-6989586621679146707"><span class="hs-identifier hs-var hs-var">metaExport</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146717"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;export&quot;</span></span><span>
</span><span id="line-807"></span><span>  </span><span id="local-6989586621679146711"><span class="annot"><span class="annottext">metaShutdown :: [SeriesElem]
</span><a href="#local-6989586621679146711"><span class="hs-identifier hs-var hs-var">metaShutdown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146717"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;shutdown&quot;</span></span><span>
</span><span id="line-808"></span><span>  </span><span id="local-6989586621679146714"><span class="annot"><span class="annottext">metaForceFlush :: [SeriesElem]
</span><a href="#local-6989586621679146714"><span class="hs-identifier hs-var hs-var">metaForceFlush</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146717"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forceFlush&quot;</span></span><span>
</span><span id="line-809"></span><span>
</span><span id="line-810"></span><span>  </span><span class="annot"><a href="#local-6989586621679146717"><span class="hs-identifier hs-type">mkLoggingMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-811"></span><span>  </span><span id="local-6989586621679146717"><span class="annot"><span class="annottext">mkLoggingMeta :: Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679146717"><span class="hs-identifier hs-var hs-var">mkLoggingMeta</span></a></span></span><span> </span><span id="local-6989586621679146720"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146720"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-812"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanExporter&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-813"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146721"><span class="hs-identifier hs-var">spanExporterSpecName</span></a></span><span>
</span><span id="line-814"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679146720"><span class="hs-identifier hs-var">method</span></a></span><span>
</span><span id="line-815"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-816"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span>
</span><span id="line-819"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679146721"><span class="annot"><span class="annottext">Text
spanExporterSpecName :: SpanExporterSpec -&gt; Text
spanExporterSpecName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecName"><span class="hs-identifier hs-var hs-var">spanExporterSpecName</span></a></span></span><span>
</span><span id="line-820"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146708"><span class="annot"><span class="annottext">Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ()) -&gt; SpanExporterM ()
spanExporterSpecExport :: Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ()) -&gt; SpanExporterM ()
spanExporterSpecExport :: SpanExporterSpec
-&gt; Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ())
-&gt; SpanExporterM ()
</span><a href="#local-6989586621679146708"><span class="hs-identifier hs-var hs-var">spanExporterSpecExport</span></a></span></span><span>
</span><span id="line-821"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146712"><span class="annot"><span class="annottext">SpanExporterM ()
spanExporterSpecShutdown :: SpanExporterM ()
spanExporterSpecShutdown :: SpanExporterSpec -&gt; SpanExporterM ()
</span><a href="#local-6989586621679146712"><span class="hs-identifier hs-var hs-var">spanExporterSpecShutdown</span></a></span></span><span>
</span><span id="line-822"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecShutdownTimeout :: SpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdownTimeout"><span class="hs-identifier hs-var">spanExporterSpecShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146710"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146710"><span class="hs-identifier hs-var">shutdownTimeout</span></a></span></span><span>
</span><span id="line-823"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679146715"><span class="annot"><span class="annottext">SpanExporterM ()
spanExporterSpecForceFlush :: SpanExporterM ()
spanExporterSpecForceFlush :: SpanExporterSpec -&gt; SpanExporterM ()
</span><a href="#local-6989586621679146715"><span class="hs-identifier hs-var hs-var">spanExporterSpecForceFlush</span></a></span></span><span>
</span><span id="line-824"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecForceFlushTimeout :: SpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecForceFlushTimeout"><span class="hs-identifier hs-var">spanExporterSpecForceFlushTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146713"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679146713"><span class="hs-identifier hs-var">forceFlushTimeout</span></a></span></span><span>
</span><span id="line-825"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecOnTimeout :: SpanExporterSpec -&gt; OnTimeout ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecOnTimeout"><span class="hs-identifier hs-var">spanExporterSpecOnTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146704"><span class="annot"><span class="annottext">OnTimeout ()
</span><a href="#local-6989586621679146704"><span class="hs-identifier hs-var">onTimeout</span></a></span></span><span>
</span><span id="line-826"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecOnException :: SpanExporterSpec -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecOnException"><span class="hs-identifier hs-var">spanExporterSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679146705"><span class="annot"><span class="annottext">OnException ()
</span><a href="#local-6989586621679146705"><span class="hs-identifier hs-var">onEx</span></a></span></span><span>
</span><span id="line-827"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="#local-6989586621679146698"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span class="hs-keyword">data</span><span> </span><span id="OTLPSpanExporterSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier hs-var">OTLPSpanExporterSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OTLPSpanExporterSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier hs-var">OTLPSpanExporterSpec</span></a></span></span><span>
</span><span id="line-830"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="otlpSpanExporterSpecManager"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; Manager
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecManager"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecManager</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Manager</span></span><span>
</span><span id="line-831"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecEndpoint"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; URI
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecEndpoint"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecEndpoint</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">URI</span></span><span>
</span><span id="line-832"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecTimeout"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecTimeout"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecProtocol"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; OTLPProtocol
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecProtocol"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecProtocol</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPProtocol"><span class="hs-identifier hs-type">OTLPProtocol</span></a></span><span>
</span><span id="line-834"></span><span>    </span><span class="hs-comment">-- | A list of headers to include when communicating with the observability</span><span>
</span><span id="line-835"></span><span>    </span><span class="hs-comment">-- backend (e.g. Honeycomb) over HTTP.</span><span>
</span><span id="line-836"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-837"></span><span>    </span><span class="hs-comment">-- Use this list to include the necessary secrets for talking with your</span><span>
</span><span id="line-838"></span><span>    </span><span class="hs-comment">-- observability backend(s).</span><span>
</span><span id="line-839"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecHeaders"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; [Header]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecHeaders"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span class="hs-special">]</span><span>
</span><span id="line-840"></span><span>    </span><span class="hs-comment">-- | A list of sensitive header names that will be redacted before a</span><span>
</span><span id="line-841"></span><span>    </span><span class="hs-comment">-- 'Request' is displayed. Note that the only time a 'Request' is displayed</span><span>
</span><span id="line-842"></span><span>    </span><span class="hs-comment">-- is when the span exporter encounters an 'HttpException' when</span><span>
</span><span id="line-843"></span><span>    </span><span class="hs-comment">-- communicating with the observability backend (e.g. Honeycomb). The</span><span>
</span><span id="line-844"></span><span>    </span><span class="hs-comment">-- default is 'mempty'.</span><span>
</span><span id="line-845"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-846"></span><span>    </span><span class="hs-comment">-- Use this list to avoid leaking sensitive data like API keys into your</span><span>
</span><span id="line-847"></span><span>    </span><span class="hs-comment">-- logs:</span><span>
</span><span id="line-848"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-849"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-850"></span><span>    </span><span class="hs-comment">-- 'defaultOTLPSpanExporterSpec'</span><span>
</span><span id="line-851"></span><span>    </span><span class="hs-comment">--   { 'otlpSpanExporterSpecRedactedRequestHeaders' = [&quot;x-honeycomb-team&quot;]</span><span>
</span><span id="line-852"></span><span>    </span><span class="hs-comment">--   }</span><span>
</span><span id="line-853"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecRedactedRequestHeaders"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; [HeaderName]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRedactedRequestHeaders"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecRedactedRequestHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span class="hs-special">]</span><span>
</span><span id="line-855"></span><span>    </span><span class="hs-comment">-- | A list of sensitive header names that will be redacted before a</span><span>
</span><span id="line-856"></span><span>    </span><span class="hs-comment">-- 'Response' is displayed. Note that the only time a 'Response' is</span><span>
</span><span id="line-857"></span><span>    </span><span class="hs-comment">-- displayed is when the span exporter encounters an 'HttpException' when</span><span>
</span><span id="line-858"></span><span>    </span><span class="hs-comment">-- communicating with the observability backend (e.g. Honeycomb). The</span><span>
</span><span id="line-859"></span><span>    </span><span class="hs-comment">-- default is 'mempty'.</span><span>
</span><span id="line-860"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-861"></span><span>    </span><span class="hs-comment">-- Use this list to avoid leaking sensitive data like API keys into your</span><span>
</span><span id="line-862"></span><span>    </span><span class="hs-comment">-- logs.</span><span>
</span><span id="line-863"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-864"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-865"></span><span>    </span><span class="hs-comment">-- 'defaultOTLPSpanExporterSpec'</span><span>
</span><span id="line-866"></span><span>    </span><span class="hs-comment">--   { 'otlpSpanExporterSpecRedactedResponseHeaders' = [&quot;x-honeycomb-team&quot;]</span><span>
</span><span id="line-867"></span><span>    </span><span class="hs-comment">--   }</span><span>
</span><span id="line-868"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-869"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecRedactedResponseHeaders"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; [HeaderName]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRedactedResponseHeaders"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecRedactedResponseHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span class="hs-special">]</span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecWorkerQueueSize"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecWorkerQueueSize"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecWorkerQueueSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-871"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecWorkerCount"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecWorkerCount"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecWorkerCount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-872"></span><span>    </span><span class="hs-comment">-- | The retry policy to use when communicating with the observability</span><span>
</span><span id="line-873"></span><span>    </span><span class="hs-comment">-- backend produces an exception.</span><span>
</span><span id="line-874"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-875"></span><span>    </span><span class="hs-comment">-- The default is defined as follows:</span><span>
</span><span id="line-876"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-877"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-878"></span><span>    </span><span class="hs-comment">-- 'fullJitterBackoff' 10_000 &lt;&gt; 'limitRetries' 10</span><span>
</span><span id="line-879"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-880"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-881"></span><span>    </span><span class="hs-comment">-- 'Control.Retry.simulatePolicyPP' can be used to get an idea of the retry</span><span>
</span><span id="line-882"></span><span>    </span><span class="hs-comment">-- policy's iterations and total cumulative delay:</span><span>
</span><span id="line-883"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-884"></span><span>    </span><span class="hs-comment">-- &gt; ghci&gt; simulatePolicyPP 10 $ fullJitterBackoff 10000 &lt;&gt; limitRetries 10</span><span>
</span><span id="line-885"></span><span>    </span><span class="hs-comment">-- &gt; 0: 6.659ms</span><span>
</span><span id="line-886"></span><span>    </span><span class="hs-comment">-- &gt; 1: 12.302ms</span><span>
</span><span id="line-887"></span><span>    </span><span class="hs-comment">-- &gt; 2: 21.228ms</span><span>
</span><span id="line-888"></span><span>    </span><span class="hs-comment">-- &gt; 3: 45.048ms</span><span>
</span><span id="line-889"></span><span>    </span><span class="hs-comment">-- &gt; 4: 128.142ms</span><span>
</span><span id="line-890"></span><span>    </span><span class="hs-comment">-- &gt; 5: 274.269ms</span><span>
</span><span id="line-891"></span><span>    </span><span class="hs-comment">-- &gt; 6: 351.933ms</span><span>
</span><span id="line-892"></span><span>    </span><span class="hs-comment">-- &gt; 7: 688.239ms</span><span>
</span><span id="line-893"></span><span>    </span><span class="hs-comment">-- &gt; 8: 1313.14ms</span><span>
</span><span id="line-894"></span><span>    </span><span class="hs-comment">-- &gt; 9: 4806.224ms</span><span>
</span><span id="line-895"></span><span>    </span><span class="hs-comment">-- &gt; 10: Inhibit</span><span>
</span><span id="line-896"></span><span>    </span><span class="hs-comment">-- &gt; Total cumulative delay would be: 7647.184ms</span><span>
</span><span id="line-897"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-898"></span><span>    </span><span class="hs-comment">-- For more info on defining custom retry policies, see &quot;Control.Retry&quot;.</span><span>
</span><span id="line-899"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterSpecRetryPolicy"><span class="annot"><span class="annottext">OTLPSpanExporterSpec -&gt; RetryPolicyM IO
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRetryPolicy"><span class="hs-identifier hs-var hs-var">otlpSpanExporterSpecRetryPolicy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RetryPolicyM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span>
</span><span id="line-900"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-comment">-- TODO: Env vars</span><span>
</span><span id="line-903"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultOTLPSpanExporterSpec"><span class="hs-identifier hs-type">defaultOTLPSpanExporterSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier hs-type">OTLPSpanExporterSpec</span></a></span><span>
</span><span id="line-904"></span><span id="defaultOTLPSpanExporterSpec"><span class="annot"><span class="annottext">defaultOTLPSpanExporterSpec :: OTLPSpanExporterSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultOTLPSpanExporterSpec"><span class="hs-identifier hs-var hs-var">defaultOTLPSpanExporterSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-905"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier hs-type">OTLPSpanExporterSpec</span></a></span><span>
</span><span id="line-906"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecManager :: Manager
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecManager"><span class="hs-identifier hs-var">otlpSpanExporterSpecManager</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Manager
</span><a href="OTel.SDK.Trace.Internal.html#defaultManager"><span class="hs-identifier hs-var">defaultManager</span></a></span><span>
</span><span id="line-907"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecEndpoint :: URI
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecEndpoint"><span class="hs-identifier hs-var">otlpSpanExporterSpecEndpoint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe URI -&gt; URI
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe URI -&gt; URI) -&gt; Maybe URI -&gt; URI
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe URI
</span><span class="hs-identifier hs-var">parseURI</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;http://localhost:4318/v1/traces&quot;</span></span><span>
</span><span id="line-908"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecTimeout :: Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecTimeout"><span class="hs-identifier hs-var">otlpSpanExporterSpecTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10_000_000</span></span><span>
</span><span id="line-909"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecProtocol :: OTLPProtocol
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecProtocol"><span class="hs-identifier hs-var">otlpSpanExporterSpecProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OTLPProtocol
</span><a href="OTel.SDK.Trace.Internal.html#httpProtobufProtocol"><span class="hs-identifier hs-var">httpProtobufProtocol</span></a></span><span>
</span><span id="line-910"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecHeaders :: [Header]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecHeaders"><span class="hs-identifier hs-var">otlpSpanExporterSpecHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Header]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-911"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecRedactedRequestHeaders :: [HeaderName]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRedactedRequestHeaders"><span class="hs-identifier hs-var">otlpSpanExporterSpecRedactedRequestHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HeaderName]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-912"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecRedactedResponseHeaders :: [HeaderName]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRedactedResponseHeaders"><span class="hs-identifier hs-var">otlpSpanExporterSpecRedactedResponseHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HeaderName]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-913"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecWorkerQueueSize :: Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecWorkerQueueSize"><span class="hs-identifier hs-var">otlpSpanExporterSpecWorkerQueueSize</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-914"></span><span>        </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec Any -&gt; Int
forall item. ConcurrentWorkersSpec item -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecQueueSize"><span class="hs-identifier hs-var">concurrentWorkersSpecQueueSize</span></a></span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec Any
forall item. ConcurrentWorkersSpec item
</span><a href="OTel.SDK.Trace.Internal.html#defaultConcurrentWorkersSpec"><span class="hs-identifier hs-var">defaultConcurrentWorkersSpec</span></a></span><span>
</span><span id="line-915"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecWorkerCount :: Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecWorkerCount"><span class="hs-identifier hs-var">otlpSpanExporterSpecWorkerCount</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-916"></span><span>        </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec Any -&gt; Int
forall item. ConcurrentWorkersSpec item -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecWorkerCount"><span class="hs-identifier hs-var">concurrentWorkersSpecWorkerCount</span></a></span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec Any
forall item. ConcurrentWorkersSpec item
</span><a href="OTel.SDK.Trace.Internal.html#defaultConcurrentWorkersSpec"><span class="hs-identifier hs-var">defaultConcurrentWorkersSpec</span></a></span><span>
</span><span id="line-917"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecRetryPolicy :: RetryPolicyM IO
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRetryPolicy"><span class="hs-identifier hs-var">otlpSpanExporterSpecRetryPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-918"></span><span>        </span><span class="annot"><span class="annottext">Int -&gt; RetryPolicyM IO
forall (m :: * -&gt; *). MonadIO m =&gt; Int -&gt; RetryPolicyM m
</span><span class="hs-identifier hs-var">fullJitterBackoff</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10_000</span></span><span> </span><span class="annot"><span class="annottext">RetryPolicyM IO -&gt; RetryPolicyM IO -&gt; RetryPolicyM IO
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; RetryPolicy
</span><span class="hs-identifier hs-var">limitRetries</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span>
</span><span id="line-919"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporter"><span class="hs-identifier hs-type">otlpSpanExporter</span></a></span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145046"><span class="annot"><a href="#local-6989586621679145046"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-923"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier hs-type">OTLPSpanExporterSpec</span></a></span><span>
</span><span id="line-924"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-925"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145046"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145046"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-927"></span><span id="otlpSpanExporter"><span class="annot"><span class="annottext">otlpSpanExporter :: forall a.
OTLPSpanExporterSpec
-&gt; Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporter"><span class="hs-identifier hs-var hs-var">otlpSpanExporter</span></a></span></span><span> </span><span id="local-6989586621679147032"><span class="annot"><span class="annottext">OTLPSpanExporterSpec
</span><a href="#local-6989586621679147032"><span class="hs-identifier hs-var">otlpSpanExporterSpec</span></a></span></span><span> </span><span id="local-6989586621679147033"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147033"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679147034"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; IO a
</span><a href="#local-6989586621679147034"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-928"></span><span>  </span><span id="local-6989586621679147035"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147035"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-929"></span><span>    </span><span class="annot"><span class="annottext">((Request -&gt; Request) -&gt; IO Request -&gt; IO Request)
-&gt; IO Request -&gt; (Request -&gt; Request) -&gt; IO Request
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(Request -&gt; Request) -&gt; IO Request -&gt; IO Request
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">URI -&gt; IO Request
forall (m :: * -&gt; *). MonadThrow m =&gt; URI -&gt; m Request
</span><span class="hs-identifier hs-var">requestFromURI</span></span><span> </span><span class="annot"><span class="annottext">URI
</span><a href="#local-6989586621679147036"><span class="hs-identifier hs-var">endpoint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147037"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147037"><span class="hs-identifier hs-var">baseReq</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-930"></span><span>      </span><span class="annot"><span class="annottext">Request -&gt; Request
</span><span class="hs-identifier hs-var">setRequestCheckStatus</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147037"><span class="hs-identifier hs-var">baseReq</span></a></span><span>
</span><span id="line-931"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">method</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;POST&quot;</span></span><span>
</span><span id="line-932"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestHeaders</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-933"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">DList.toList</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mconcat</span></span><span>
</span><span id="line-934"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DList.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">hContentType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;application/x-protobuf&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DList.fromList</span></span><span> </span><span class="annot"><a href="#local-6989586621679147043"><span class="hs-identifier hs-type">headers</span></a></span><span>
</span><span id="line-936"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DList.fromList</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestHeaders</span></span><span> </span><span class="annot"><a href="#local-6989586621679147037"><span class="hs-identifier hs-type">baseReq</span></a></span><span>
</span><span id="line-937"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-938"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-939"></span><span>  </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec OTLPSpanExporterItem
-&gt; (ConcurrentWorkers OTLPSpanExporterItem -&gt; IO a) -&gt; IO a
forall item a.
(ToJSON item, Typeable item) =&gt;
ConcurrentWorkersSpec item
-&gt; (ConcurrentWorkers item -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#withConcurrentWorkers"><span class="hs-identifier hs-var">withConcurrentWorkers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; ConcurrentWorkersSpec OTLPSpanExporterItem
</span><a href="#local-6989586621679147044"><span class="hs-identifier hs-var">concurrentWorkersSpec</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147035"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147045"><span class="annot"><span class="annottext">ConcurrentWorkers OTLPSpanExporterItem
</span><a href="#local-6989586621679147045"><span class="hs-identifier hs-var">workers</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-940"></span><span>    </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; IO a
</span><a href="#local-6989586621679147034"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(SpanExporterSpec -&gt; IO a) -&gt; SpanExporterSpec -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkers OTLPSpanExporterItem -&gt; SpanExporterSpec
</span><a href="#local-6989586621679147046"><span class="hs-identifier hs-var">spanExporterSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkers OTLPSpanExporterItem
</span><a href="#local-6989586621679147045"><span class="hs-identifier hs-var">workers</span></a></span><span>
</span><span id="line-941"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-942"></span><span>  </span><span id="local-6989586621679147046"><span class="annot"><span class="annottext">spanExporterSpec :: ConcurrentWorkers OTLPSpanExporterItem -&gt; SpanExporterSpec
</span><a href="#local-6989586621679147046"><span class="hs-identifier hs-var hs-var">spanExporterSpec</span></a></span></span><span> </span><span id="local-6989586621679147053"><span class="annot"><span class="annottext">ConcurrentWorkers OTLPSpanExporterItem
</span><a href="#local-6989586621679147053"><span class="hs-identifier hs-var">workers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-943"></span><span>    </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier hs-var">defaultSpanExporterSpec</span></a></span><span>
</span><span id="line-944"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecName"><span class="hs-identifier hs-var">spanExporterSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;otlp&quot;</span></span><span>
</span><span id="line-945"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecExport"><span class="hs-identifier hs-var">spanExporterSpecExport</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147054"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679147054"><span class="hs-identifier hs-var">spans</span></a></span></span><span> </span><span id="local-6989586621679147055"><span class="annot"><span class="annottext">SpanExportResult -&gt; IO ()
</span><a href="#local-6989586621679147055"><span class="hs-identifier hs-var">onSpansExported</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-946"></span><span>          </span><span id="local-6989586621679147056"><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679147056"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SpanExporterM (Resource Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#askResource"><span class="hs-identifier hs-var">askResource</span></a></span><span>
</span><span id="line-947"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; SpanExporterM ()
forall a. IO a -&gt; SpanExporterM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SpanExporterM ()) -&gt; IO () -&gt; SpanExporterM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkers OTLPSpanExporterItem
-&gt; OTLPSpanExporterItem -&gt; IO ()
forall item. ConcurrentWorkers item -&gt; item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersEnqueueItem"><span class="hs-identifier hs-var">concurrentWorkersEnqueueItem</span></a></span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkers OTLPSpanExporterItem
</span><a href="#local-6989586621679147053"><span class="hs-identifier hs-var">workers</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterItem"><span class="hs-identifier hs-type">OTLPSpanExporterItem</span></a></span><span>
</span><span id="line-948"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterItemBatch :: Batch (Span Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemBatch"><span class="hs-identifier hs-var">otlpSpanExporterItemBatch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679147054"><span class="hs-identifier hs-var">spans</span></a></span><span>
</span><span id="line-949"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterItemCallback :: SpanExportResult -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemCallback"><span class="hs-identifier hs-var">otlpSpanExporterItemCallback</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanExportResult -&gt; IO ()
</span><a href="#local-6989586621679147055"><span class="hs-identifier hs-var">onSpansExported</span></a></span><span>
</span><span id="line-950"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterResource :: Resource Attrs
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterResource"><span class="hs-identifier hs-var">otlpSpanExporterResource</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679147056"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-951"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-952"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdown"><span class="hs-identifier hs-var">spanExporterSpecShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-953"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersStopWorkers"><span class="hs-identifier hs-var">concurrentWorkersStopWorkers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679147053"><span class="hs-identifier hs-type">workers</span></a></span><span>
</span><span id="line-954"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span>  </span><span id="local-6989586621679147044"><span class="annot"><span class="annottext">concurrentWorkersSpec :: Request -&gt; ConcurrentWorkersSpec OTLPSpanExporterItem
</span><a href="#local-6989586621679147044"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpec</span></a></span></span><span> </span><span id="local-6989586621679147063"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147063"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-957"></span><span>    </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec Any
forall item. ConcurrentWorkersSpec item
</span><a href="OTel.SDK.Trace.Internal.html#defaultConcurrentWorkersSpec"><span class="hs-identifier hs-var">defaultConcurrentWorkersSpec</span></a></span><span>
</span><span id="line-958"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecQueueSize"><span class="hs-identifier hs-var">concurrentWorkersSpecQueueSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679147064"><span class="hs-identifier hs-type">queueSize</span></a></span><span>
</span><span id="line-959"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecWorkerCount"><span class="hs-identifier hs-var">concurrentWorkersSpecWorkerCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679147065"><span class="hs-identifier hs-type">workerCount</span></a></span><span>
</span><span id="line-960"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecProcessItem"><span class="hs-identifier hs-var">concurrentWorkersSpecProcessItem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147067"><span class="annot"><span class="annottext">OTLPSpanExporterItem
</span><a href="#local-6989586621679147067"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-961"></span><span>          </span><span id="local-6989586621679147068"><span class="annot"><span class="annottext">Maybe (Response ByteString)
</span><a href="#local-6989586621679147068"><span class="hs-identifier hs-var">mResp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-962"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; IO (Response ByteString) -&gt; IO (Maybe (Response ByteString))
forall a. Int -&gt; IO a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">timeout</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147069"><span class="hs-identifier hs-var">exportTimeout</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-963"></span><span>              </span><span class="annot"><span class="annottext">Request -&gt; IO (Response ByteString)
</span><a href="#local-6989586621679147070"><span class="hs-identifier hs-var">send</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147063"><span class="hs-identifier hs-var">req</span></a></span><span>
</span><span id="line-964"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestBody</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-965"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">RequestBodyBS</span></span><span>
</span><span id="line-966"></span><span>                      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProtoLens.encodeMessage</span></span><span>
</span><span id="line-967"></span><span>                      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621679147074"><span class="hs-identifier hs-type">exportTraceServiceRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterResource"><span class="hs-identifier hs-var">otlpSpanExporterResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679147067"><span class="hs-identifier hs-type">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-968"></span><span>                      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemBatch"><span class="hs-identifier hs-var">otlpSpanExporterItemBatch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679147067"><span class="hs-identifier hs-type">item</span></a></span><span>
</span><span id="line-969"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-970"></span><span>          </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147033"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-971"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Response ByteString)
</span><a href="#local-6989586621679147068"><span class="hs-identifier hs-var">mResp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-972"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679147075"><span class="annot"><span class="annottext">Response ByteString
</span><a href="#local-6989586621679147075"><span class="hs-identifier hs-var">_resp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; LoggingT IO ()
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-973"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Response ByteString)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-974"></span><span>                </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Exporting spans timed out&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-975"></span><span>                  </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spans&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Batch Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; Value) -&gt; Batch (Span Attrs) -&gt; Batch Value
forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; Value
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Value
</span><a href="OTel.SDK.Trace.Internal.html#spanSummary"><span class="hs-identifier hs-var">spanSummary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; Batch (Span Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemBatch"><span class="hs-identifier hs-var">otlpSpanExporterItemBatch</span></a></span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterItem
</span><a href="#local-6989586621679147067"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147076"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-976"></span><span>          </span><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; SpanExportResult -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemCallback"><span class="hs-identifier hs-var">otlpSpanExporterItemCallback</span></a></span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterItem
</span><a href="#local-6989586621679147067"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#SpanExportResultSuccess"><span class="hs-identifier hs-var">SpanExportResultSuccess</span></a></span><span>
</span><span id="line-977"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecOnException"><span class="hs-identifier hs-var">concurrentWorkersSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147078"><span class="annot"><span class="annottext">OTLPSpanExporterItem
</span><a href="#local-6989586621679147078"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-978"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679147096"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147096"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-979"></span><span>            </span><span class="annot"><span class="annottext">Set HeaderName -&gt; Set HeaderName -&gt; SomeException -&gt; SomeException
</span><a href="OTel.SDK.Trace.Internal.html#redactHttpExceptionHeaders"><span class="hs-identifier hs-var">redactHttpExceptionHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679147097"><span class="hs-identifier hs-var">redactedReqHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679147098"><span class="hs-identifier hs-var">redactedRespHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; SomeException)
-&gt; OnException SomeException -&gt; OnException SomeException
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">OnException SomeException
</span><span class="hs-identifier hs-var">askException</span></span><span>
</span><span id="line-980"></span><span>          </span><span id="local-6989586621679147100"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147100"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException [SeriesElem]
</span><span class="hs-identifier hs-var">askExceptionMetadata</span></span><span>
</span><span id="line-981"></span><span>          </span><span class="annot"><span class="annottext">Message -&gt; OnException ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnException ()) -&gt; Message -&gt; OnException ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Concurrent worker ignoring exception from exporting batch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-982"></span><span>            </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147096"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-983"></span><span>              </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;batch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Batch Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; Value) -&gt; Batch (Span Attrs) -&gt; Batch Value
forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; Value
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Value
</span><a href="OTel.SDK.Trace.Internal.html#spanSummary"><span class="hs-identifier hs-var">spanSummary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; Batch (Span Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemBatch"><span class="hs-identifier hs-var">otlpSpanExporterItemBatch</span></a></span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterItem
</span><a href="#local-6989586621679147078"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>              </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147100"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-985"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; OnException ()
forall a. IO a -&gt; OnException a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; OnException ()) -&gt; IO () -&gt; OnException ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; SpanExportResult -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemCallback"><span class="hs-identifier hs-var">otlpSpanExporterItemCallback</span></a></span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterItem
</span><a href="#local-6989586621679147078"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#SpanExportResultFailure"><span class="hs-identifier hs-var">SpanExportResultFailure</span></a></span><span>
</span><span id="line-986"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLogger"><span class="hs-identifier hs-var">concurrentWorkersSpecLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679147033"><span class="hs-identifier hs-type">logger</span></a></span><span>
</span><span id="line-987"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLoggingMeta"><span class="hs-identifier hs-var">concurrentWorkersSpecLoggingMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679147076"><span class="hs-identifier hs-type">loggingMeta</span></a></span><span>
</span><span id="line-988"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span>  </span><span class="annot"><a href="#local-6989586621679147070"><span class="hs-identifier hs-type">send</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-991"></span><span>  </span><span id="local-6989586621679147070"><span class="annot"><span class="annottext">send :: Request -&gt; IO (Response ByteString)
</span><a href="#local-6989586621679147070"><span class="hs-identifier hs-var hs-var">send</span></a></span></span><span> </span><span id="local-6989586621679147103"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147103"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-992"></span><span>    </span><span class="annot"><span class="annottext">RetryPolicyM IO
-&gt; [RetryStatus -&gt; Handler IO RetryAction]
-&gt; (RetryStatus -&gt; IO (Response ByteString))
-&gt; IO (Response ByteString)
forall (m :: * -&gt; *) a.
(MonadIO m, MonadMask m) =&gt;
RetryPolicyM m
-&gt; [RetryStatus -&gt; Handler m RetryAction]
-&gt; (RetryStatus -&gt; m a)
-&gt; m a
</span><span class="hs-identifier hs-var">recoveringDynamic</span></span><span> </span><span class="annot"><span class="annottext">RetryPolicyM IO
</span><a href="#local-6989586621679147104"><span class="hs-identifier hs-var">retryPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">[RetryStatus -&gt; Handler IO RetryAction]
</span><a href="#local-6989586621679147105"><span class="hs-identifier hs-var">handlers</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147106"><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147106"><span class="hs-identifier hs-var">_retryStatus</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-993"></span><span>      </span><span class="annot"><span class="annottext">Request -&gt; Manager -&gt; IO (Response ByteString)
</span><span class="hs-identifier hs-var">httpLbs</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147103"><span class="hs-identifier hs-var">req</span></a></span><span> </span><span class="annot"><span class="annottext">Manager
</span><a href="#local-6989586621679147107"><span class="hs-identifier hs-var">manager</span></a></span><span>
</span><span id="line-994"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-995"></span><span>    </span><span class="annot"><a href="#local-6989586621679147105"><span class="hs-identifier hs-type">handlers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">RetryStatus</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handler</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">RetryAction</span></span><span class="hs-special">]</span><span>
</span><span id="line-996"></span><span>    </span><span id="local-6989586621679147105"><span class="annot"><span class="annottext">handlers :: [RetryStatus -&gt; Handler IO RetryAction]
</span><a href="#local-6989586621679147105"><span class="hs-identifier hs-var hs-var">handlers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-997"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Handler IO RetryAction -&gt; RetryStatus -&gt; Handler IO RetryAction
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Handler IO RetryAction -&gt; RetryStatus -&gt; Handler IO RetryAction)
-&gt; Handler IO RetryAction -&gt; RetryStatus -&gt; Handler IO RetryAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(AsyncException -&gt; IO RetryAction) -&gt; Handler IO RetryAction
forall (m :: * -&gt; *) a e. Exception e =&gt; (e -&gt; m a) -&gt; Handler m a
</span><span class="hs-identifier hs-var">Handler</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsyncException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AsyncException</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryAction -&gt; IO RetryAction
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">DontRetry</span></span><span>
</span><span id="line-998"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Handler IO RetryAction -&gt; RetryStatus -&gt; Handler IO RetryAction
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Handler IO RetryAction -&gt; RetryStatus -&gt; Handler IO RetryAction)
-&gt; Handler IO RetryAction -&gt; RetryStatus -&gt; Handler IO RetryAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SomeAsyncException -&gt; IO RetryAction) -&gt; Handler IO RetryAction
forall (m :: * -&gt; *) a e. Exception e =&gt; (e -&gt; m a) -&gt; Handler m a
</span><span class="hs-identifier hs-var">Handler</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeAsyncException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeAsyncException</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryAction -&gt; IO RetryAction
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">DontRetry</span></span><span>
</span><span id="line-999"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147111"><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(HttpException -&gt; IO RetryAction) -&gt; Handler IO RetryAction
forall (m :: * -&gt; *) a e. Exception e =&gt; (e -&gt; m a) -&gt; Handler m a
</span><span class="hs-identifier hs-var">Handler</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1000"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">InvalidUrlException</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryAction -&gt; IO RetryAction
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">DontRetry</span></span><span>
</span><span id="line-1001"></span><span>          </span><span id="local-6989586621679147113"><span class="annot"><span class="annottext">httpEx :: HttpException
</span><a href="#local-6989586621679147113"><span class="hs-identifier hs-var">httpEx</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HttpExceptionRequest</span></span><span> </span><span id="local-6989586621679147115"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679147115"><span class="hs-identifier hs-var">_req</span></a></span></span><span> </span><span id="local-6989586621679147116"><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679147116"><span class="hs-identifier hs-var">httpExceptionContent</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1002"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679147116"><span class="hs-identifier hs-var">httpExceptionContent</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1003"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">ConnectionClosed</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConnectionClosed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147119"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1004"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">ConnectionFailure</span></span><span> </span><span id="local-6989586621679147121"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147121"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConnectionFailure&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException -&gt; Maybe SomeException
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147121"><span class="hs-identifier hs-var">someEx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1005"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">ConnectionTimeout</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConnectionTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147119"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1006"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">InternalException</span></span><span> </span><span id="local-6989586621679147124"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147124"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;InternalException&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException -&gt; Maybe SomeException
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147124"><span class="hs-identifier hs-var">someEx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1007"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">ResponseTimeout</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ResponseTimeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147119"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1008"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">StatusCodeException</span></span><span> </span><span id="local-6989586621679147127"><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147127"><span class="hs-identifier hs-var">resp</span></a></span></span><span> </span><span id="local-6989586621679147128"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679147128"><span class="hs-identifier hs-var">_bs</span></a></span></span><span>
</span><span id="line-1009"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621679147129"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Status -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">tooManyRequests429</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621679147129"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Status -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">serviceUnavailable503</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1010"></span><span>                    </span><span class="annot"><span class="annottext">HttpException -&gt; RetryStatus -&gt; Response () -&gt; IO RetryAction
</span><a href="#local-6989586621679147131"><span class="hs-identifier hs-var">checkRetryAfterHeader</span></a></span><span> </span><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621679147113"><span class="hs-identifier hs-var">httpEx</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147127"><span class="hs-identifier hs-var">resp</span></a></span><span>
</span><span id="line-1011"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621679147129"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Status -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">badGateway502</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621679147129"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Status -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">gatewayTimeout504</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1012"></span><span>                    </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147111"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147132"><span class="hs-identifier hs-var">statusCodeText</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147119"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1013"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryAction -&gt; IO RetryAction
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">DontRetry</span></span><span>
</span><span id="line-1014"></span><span>                </span><span class="hs-keyword">where</span><span>
</span><span id="line-1015"></span><span>                </span><span class="annot"><a href="#local-6989586621679147132"><span class="hs-identifier hs-type">statusCodeText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1016"></span><span>                </span><span id="local-6989586621679147132"><span class="annot"><span class="annottext">statusCodeText :: Text
</span><a href="#local-6989586621679147132"><span class="hs-identifier hs-var hs-var">statusCodeText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Text) -&gt; [Char] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [Char]) -&gt; Int -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Int
</span><span class="hs-identifier hs-var">statusCode</span></span><span> </span><span class="annot"><span class="annottext">(Status -&gt; Int) -&gt; Status -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Response () -&gt; Status
forall body. Response body -&gt; Status
</span><span class="hs-identifier hs-var">responseStatus</span></span><span> </span><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147127"><span class="hs-identifier hs-var">resp</span></a></span><span>
</span><span id="line-1017"></span><span>
</span><span id="line-1018"></span><span>                </span><span class="annot"><a href="#local-6989586621679147129"><span class="hs-identifier hs-type">status</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Status</span></span><span>
</span><span id="line-1019"></span><span>                </span><span id="local-6989586621679147129"><span class="annot"><span class="annottext">status :: Status
</span><a href="#local-6989586621679147129"><span class="hs-identifier hs-var hs-var">status</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Response () -&gt; Status
forall body. Response body -&gt; Status
</span><span class="hs-identifier hs-var">responseStatus</span></span><span> </span><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147127"><span class="hs-identifier hs-var">resp</span></a></span><span>
</span><span id="line-1020"></span><span>              </span><span class="annot"><span class="annottext">HttpExceptionContent
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryAction -&gt; IO RetryAction
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">DontRetry</span></span><span>
</span><span id="line-1021"></span><span>              </span><span class="hs-keyword">where</span><span>
</span><span id="line-1022"></span><span>              </span><span class="annot"><a href="#local-6989586621679147119"><span class="hs-identifier hs-type">mSomeHttpEx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span>
</span><span id="line-1023"></span><span>              </span><span id="local-6989586621679147119"><span class="annot"><span class="annottext">mSomeHttpEx :: Maybe SomeException
</span><a href="#local-6989586621679147119"><span class="hs-identifier hs-var hs-var">mSomeHttpEx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe SomeException
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Maybe SomeException)
-&gt; SomeException -&gt; Maybe SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HttpException -&gt; SomeException
forall e. Exception e =&gt; e -&gt; SomeException
</span><span class="hs-identifier hs-var">toException</span></span><span> </span><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621679147113"><span class="hs-identifier hs-var">httpEx</span></a></span><span>
</span><span id="line-1024"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1025"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1026"></span><span>      </span><span class="annot"><a href="#local-6989586621679147131"><span class="hs-identifier hs-type">checkRetryAfterHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HttpException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RetryStatus</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">RetryAction</span></span><span>
</span><span id="line-1027"></span><span>      </span><span id="local-6989586621679147131"><span class="annot"><span class="annottext">checkRetryAfterHeader :: HttpException -&gt; RetryStatus -&gt; Response () -&gt; IO RetryAction
</span><a href="#local-6989586621679147131"><span class="hs-identifier hs-var hs-var">checkRetryAfterHeader</span></a></span></span><span> </span><span id="local-6989586621679147137"><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621679147137"><span class="hs-identifier hs-var">httpEx</span></a></span></span><span> </span><span id="local-6989586621679147138"><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147138"><span class="hs-identifier hs-var">retryStatus</span></a></span></span><span> </span><span id="local-6989586621679147139"><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147139"><span class="hs-identifier hs-var">resp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1028"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; [Header] -&gt; Maybe ByteString
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">hRetryAfter</span></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; Maybe ByteString) -&gt; [Header] -&gt; Maybe ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Response () -&gt; [Header]
forall body. Response body -&gt; [Header]
</span><span class="hs-identifier hs-var">responseHeaders</span></span><span> </span><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147139"><span class="hs-identifier hs-var">resp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1029"></span><span>          </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147138"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147142"><span class="hs-identifier hs-var">statusCodeText</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147143"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1030"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679147144"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679147144"><span class="hs-identifier hs-var">headerVal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1031"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe (Either NominalDiffTime UTCTime)
</span><a href="#local-6989586621679147145"><span class="hs-identifier hs-var">parseRetryAfterHeader</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Maybe (Either NominalDiffTime UTCTime))
-&gt; [Char] -&gt; Maybe (Either NominalDiffTime UTCTime)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Char]
</span><span class="hs-identifier hs-var">ByteString.Char8.unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679147144"><span class="hs-identifier hs-var">headerVal</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1032"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Either NominalDiffTime UTCTime)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147138"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147142"><span class="hs-identifier hs-var">statusCodeText</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147143"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1033"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679147147"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679147147"><span class="hs-identifier hs-var">delay</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1034"></span><span>                </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147138"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147142"><span class="hs-identifier hs-var">statusCodeText</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147143"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; IO RetryAction) -&gt; Maybe Int -&gt; IO RetryAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int) -&gt; Int -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int
forall b. Integral b =&gt; NominalDiffTime -&gt; b
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">ceiling</span></span><span> </span><span class="annot"><span class="annottext">(NominalDiffTime -&gt; Int) -&gt; NominalDiffTime -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">1_000_000</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; NominalDiffTime
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679147147"><span class="hs-identifier hs-var">delay</span></a></span><span>
</span><span id="line-1035"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679147150"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679147150"><span class="hs-identifier hs-var">httpDate</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1036"></span><span>                </span><span id="local-6989586621679147151"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679147151"><span class="hs-identifier hs-var">delay</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(UTCTime -&gt; NominalDiffTime) -&gt; IO UTCTime -&gt; IO NominalDiffTime
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTCTime -&gt; UTCTime -&gt; NominalDiffTime
</span><span class="hs-identifier hs-var">diffUTCTime</span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679147150"><span class="hs-identifier hs-var">httpDate</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><span class="hs-identifier hs-var">getCurrentTime</span></span><span>
</span><span id="line-1037"></span><span>                </span><span class="annot"><span class="annottext">RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var">consult</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147138"><span class="hs-identifier hs-var">retryStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147142"><span class="hs-identifier hs-var">statusCodeText</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147143"><span class="hs-identifier hs-var">mSomeHttpEx</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; IO RetryAction) -&gt; Maybe Int -&gt; IO RetryAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int) -&gt; Int -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Int
forall b. Integral b =&gt; NominalDiffTime -&gt; b
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">ceiling</span></span><span> </span><span class="annot"><span class="annottext">(NominalDiffTime -&gt; Int) -&gt; NominalDiffTime -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><span class="hs-number">1_000_000</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; NominalDiffTime -&gt; NominalDiffTime
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679147151"><span class="hs-identifier hs-var">delay</span></a></span><span>
</span><span id="line-1038"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1039"></span><span>        </span><span class="annot"><a href="#local-6989586621679147145"><span class="hs-identifier hs-type">parseRetryAfterHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NominalDiffTime</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTCTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-1040"></span><span>        </span><span id="local-6989586621679147145"><span class="annot"><span class="annottext">parseRetryAfterHeader :: [Char] -&gt; Maybe (Either NominalDiffTime UTCTime)
</span><a href="#local-6989586621679147145"><span class="hs-identifier hs-var hs-var">parseRetryAfterHeader</span></a></span></span><span> </span><span id="local-6989586621679147152"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679147152"><span class="hs-identifier hs-var">headerVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1041"></span><span>          </span><span class="annot"><span class="annottext">(NominalDiffTime -&gt; Either NominalDiffTime UTCTime)
-&gt; Maybe NominalDiffTime -&gt; Maybe (Either NominalDiffTime UTCTime)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; Either NominalDiffTime UTCTime
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Maybe NominalDiffTime
</span><a href="#local-6989586621679147153"><span class="hs-identifier hs-var">parseNominalDiffTime</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Either NominalDiffTime UTCTime)
-&gt; Maybe (Either NominalDiffTime UTCTime)
-&gt; Maybe (Either NominalDiffTime UTCTime)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">(UTCTime -&gt; Either NominalDiffTime UTCTime)
-&gt; Maybe UTCTime -&gt; Maybe (Either NominalDiffTime UTCTime)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; Either NominalDiffTime UTCTime
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Maybe UTCTime
</span><a href="#local-6989586621679147155"><span class="hs-identifier hs-var">parseHttpDate</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Either NominalDiffTime UTCTime)
-&gt; Maybe (Either NominalDiffTime UTCTime)
-&gt; Maybe (Either NominalDiffTime UTCTime)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Either NominalDiffTime UTCTime)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1042"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1043"></span><span>          </span><span id="local-6989586621679147153"><span class="annot"><span class="annottext">parseNominalDiffTime :: Maybe NominalDiffTime
</span><a href="#local-6989586621679147153"><span class="hs-identifier hs-var hs-var">parseNominalDiffTime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TimeLocale -&gt; [Char] -&gt; [Char] -&gt; Maybe NominalDiffTime
forall (m :: * -&gt; *) t.
(MonadFail m, ParseTime t) =&gt;
Bool -&gt; TimeLocale -&gt; [Char] -&gt; [Char] -&gt; m t
</span><span class="hs-identifier hs-var">parseTimeM</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">TimeLocale
</span><span class="hs-identifier hs-var">defaultTimeLocale</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;%s&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679147152"><span class="hs-identifier hs-var">headerVal</span></a></span><span>
</span><span id="line-1044"></span><span>          </span><span id="local-6989586621679147155"><span class="annot"><span class="annottext">parseHttpDate :: Maybe UTCTime
</span><a href="#local-6989586621679147155"><span class="hs-identifier hs-var hs-var">parseHttpDate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TimeLocale -&gt; [Char] -&gt; [Char] -&gt; Maybe UTCTime
forall (m :: * -&gt; *) t.
(MonadFail m, ParseTime t) =&gt;
Bool -&gt; TimeLocale -&gt; [Char] -&gt; [Char] -&gt; m t
</span><span class="hs-identifier hs-var">parseTimeM</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">TimeLocale
</span><span class="hs-identifier hs-var">defaultTimeLocale</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;%a, %d %b %Y %H:%M:%S GMT&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679147152"><span class="hs-identifier hs-var">headerVal</span></a></span><span>
</span><span id="line-1045"></span><span>
</span><span id="line-1046"></span><span>        </span><span class="annot"><a href="#local-6989586621679147142"><span class="hs-identifier hs-type">statusCodeText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1047"></span><span>        </span><span id="local-6989586621679147142"><span class="annot"><span class="annottext">statusCodeText :: Text
</span><a href="#local-6989586621679147142"><span class="hs-identifier hs-var hs-var">statusCodeText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Text) -&gt; [Char] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [Char]) -&gt; Int -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Int
</span><span class="hs-identifier hs-var">statusCode</span></span><span> </span><span class="annot"><span class="annottext">(Status -&gt; Int) -&gt; Status -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Response () -&gt; Status
forall body. Response body -&gt; Status
</span><span class="hs-identifier hs-var">responseStatus</span></span><span> </span><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679147139"><span class="hs-identifier hs-var">resp</span></a></span><span>
</span><span id="line-1048"></span><span>
</span><span id="line-1049"></span><span>        </span><span class="annot"><a href="#local-6989586621679147143"><span class="hs-identifier hs-type">mSomeHttpEx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span>
</span><span id="line-1050"></span><span>        </span><span id="local-6989586621679147143"><span class="annot"><span class="annottext">mSomeHttpEx :: Maybe SomeException
</span><a href="#local-6989586621679147143"><span class="hs-identifier hs-var hs-var">mSomeHttpEx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe SomeException
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Maybe SomeException)
-&gt; SomeException -&gt; Maybe SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HttpException -&gt; SomeException
forall e. Exception e =&gt; e -&gt; SomeException
</span><span class="hs-identifier hs-var">toException</span></span><span> </span><span class="annot"><span class="annottext">HttpException
</span><a href="#local-6989586621679147137"><span class="hs-identifier hs-var">httpEx</span></a></span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span>      </span><span class="annot"><a href="#local-6989586621679147118"><span class="hs-identifier hs-type">consult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RetryStatus</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">RetryAction</span></span><span>
</span><span id="line-1053"></span><span>      </span><span id="local-6989586621679147118"><span class="annot"><span class="annottext">consult :: RetryStatus
-&gt; Text -&gt; Maybe SomeException -&gt; Maybe Int -&gt; IO RetryAction
</span><a href="#local-6989586621679147118"><span class="hs-identifier hs-var hs-var">consult</span></a></span></span><span> </span><span id="local-6989586621679147156"><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147156"><span class="hs-identifier hs-var">retryStatus</span></a></span></span><span> </span><span id="local-6989586621679147157"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147157"><span class="hs-identifier hs-var">hint</span></a></span></span><span> </span><span id="local-6989586621679147158"><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147158"><span class="hs-identifier hs-var">mSomeEx</span></a></span></span><span> </span><span id="local-6989586621679147159"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679147159"><span class="hs-identifier hs-var">mOverrideDelay</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1054"></span><span>        </span><span class="annot"><span class="annottext">(LoggingT IO RetryAction -&gt; Logger -&gt; IO RetryAction)
-&gt; Logger -&gt; LoggingT IO RetryAction -&gt; IO RetryAction
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO RetryAction -&gt; Logger -&gt; IO RetryAction
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147033"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1055"></span><span>          </span><span class="annot"><span class="annottext">IO (Maybe RetryStatus) -&gt; LoggingT IO (Maybe RetryStatus)
forall a. IO a -&gt; LoggingT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RetryPolicyM IO -&gt; RetryStatus -&gt; IO (Maybe RetryStatus)
forall (m :: * -&gt; *).
Monad m =&gt;
RetryPolicyM m -&gt; RetryStatus -&gt; m (Maybe RetryStatus)
</span><span class="hs-identifier hs-var">applyPolicy</span></span><span> </span><span class="annot"><span class="annottext">RetryPolicyM IO
</span><a href="#local-6989586621679147104"><span class="hs-identifier hs-var">retryPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">RetryStatus
</span><a href="#local-6989586621679147156"><span class="hs-identifier hs-var">retryStatus</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingT IO (Maybe RetryStatus)
-&gt; (Maybe RetryStatus -&gt; LoggingT IO RetryAction)
-&gt; LoggingT IO RetryAction
forall a b. LoggingT IO a -&gt; (a -&gt; LoggingT IO b) -&gt; LoggingT IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1056"></span><span>            </span><span class="annot"><span class="annottext">Maybe RetryStatus
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1057"></span><span>              </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Span export exceeded maximum retries&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147160"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-1058"></span><span>              </span><span class="annot"><span class="annottext">RetryAction -&gt; LoggingT IO RetryAction
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">DontRetry</span></span><span>
</span><span id="line-1059"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1060"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679147159"><span class="hs-identifier hs-var">mOverrideDelay</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1061"></span><span>                </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1062"></span><span>                  </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Retrying span export with policy delay&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147160"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-1063"></span><span>                  </span><span class="annot"><span class="annottext">RetryAction -&gt; LoggingT IO RetryAction
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RetryAction
</span><span class="hs-identifier hs-var">ConsultPolicy</span></span><span>
</span><span id="line-1064"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679147162"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147162"><span class="hs-identifier hs-var">overrideDelay</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1065"></span><span>                  </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Retrying span export with overridden delay&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1066"></span><span>                    </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;delayMicros&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147162"><span class="hs-identifier hs-var">overrideDelay</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147160"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-1067"></span><span>                  </span><span class="annot"><span class="annottext">RetryAction -&gt; LoggingT IO RetryAction
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RetryAction -&gt; LoggingT IO RetryAction)
-&gt; RetryAction -&gt; LoggingT IO RetryAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; RetryAction
</span><span class="hs-identifier hs-var">ConsultPolicyOverrideDelay</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147162"><span class="hs-identifier hs-var">overrideDelay</span></a></span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1069"></span><span>        </span><span class="annot"><a href="#local-6989586621679147160"><span class="hs-identifier hs-type">meta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1070"></span><span>        </span><span id="local-6989586621679147160"><span class="annot"><span class="annottext">meta :: [SeriesElem]
</span><a href="#local-6989586621679147160"><span class="hs-identifier hs-var hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1071"></span><span>          </span><span class="annot"><span class="annottext">(([SeriesElem] -&gt; [SeriesElem]) -&gt; [SeriesElem] -&gt; [SeriesElem])
-&gt; [SeriesElem] -&gt; [[SeriesElem] -&gt; [SeriesElem]] -&gt; [SeriesElem]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">([SeriesElem] -&gt; [SeriesElem]) -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">($)</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147076"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1072"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hint&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147157"><span class="hs-identifier hs-var">hint</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ([SeriesElem] -&gt; [SeriesElem])
-&gt; [SeriesElem] -&gt; [SeriesElem]
forall m. Monoid m =&gt; Maybe m -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1074"></span><span>                </span><span id="local-6989586621679147165"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147165"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set HeaderName -&gt; Set HeaderName -&gt; SomeException -&gt; SomeException
</span><a href="OTel.SDK.Trace.Internal.html#redactHttpExceptionHeaders"><span class="hs-identifier hs-var">redactHttpExceptionHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679147097"><span class="hs-identifier hs-var">redactedReqHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679147098"><span class="hs-identifier hs-var">redactedRespHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; SomeException)
-&gt; Maybe SomeException -&gt; Maybe SomeException
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe SomeException
</span><a href="#local-6989586621679147158"><span class="hs-identifier hs-var">mSomeEx</span></a></span><span>
</span><span id="line-1075"></span><span>                </span><span class="annot"><span class="annottext">([SeriesElem] -&gt; [SeriesElem])
-&gt; Maybe ([SeriesElem] -&gt; [SeriesElem])
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147165"><span class="hs-identifier hs-var">someEx</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-1076"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span>  </span><span class="annot"><a href="#local-6989586621679147074"><span class="hs-identifier hs-type">exportTraceServiceRequest</span></a></span><span>
</span><span id="line-1079"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span>
</span><span id="line-1080"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Collector.ExportTraceServiceRequest</span></span><span>
</span><span id="line-1082"></span><span>  </span><span id="local-6989586621679147074"><span class="annot"><span class="annottext">exportTraceServiceRequest :: Resource Attrs -&gt; Batch (Span Attrs) -&gt; ExportTraceServiceRequest
</span><a href="#local-6989586621679147074"><span class="hs-identifier hs-var hs-var">exportTraceServiceRequest</span></a></span></span><span> </span><span id="local-6989586621679147166"><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679147166"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621679147167"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679147167"><span class="hs-identifier hs-var">batch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1083"></span><span>    </span><span class="annot"><span class="annottext">ExportTraceServiceRequest
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1084"></span><span>      </span><span class="annot"><span class="annottext">ExportTraceServiceRequest
-&gt; (ExportTraceServiceRequest -&gt; ExportTraceServiceRequest)
-&gt; ExportTraceServiceRequest
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ExportTraceServiceRequest [ResourceSpans]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;resourceSpans&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Collector.resourceSpans</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ExportTraceServiceRequest [ResourceSpans]
-&gt; [ResourceSpans]
-&gt; ExportTraceServiceRequest
-&gt; ExportTraceServiceRequest
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1085"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ResourceSpans
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1086"></span><span>              </span><span class="annot"><span class="annottext">ResourceSpans -&gt; (ResourceSpans -&gt; ResourceSpans) -&gt; ResourceSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ResourceSpans -&gt; ResourceSpans)
-&gt; (SchemaURL -&gt; ResourceSpans -&gt; ResourceSpans)
-&gt; Maybe SchemaURL
-&gt; ResourceSpans
-&gt; ResourceSpans
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">ResourceSpans -&gt; ResourceSpans
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147172"><span class="annot"><span class="annottext">SchemaURL
</span><a href="#local-6989586621679147172"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ResourceSpans Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;schemaUrl&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.schemaUrl</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ResourceSpans Text
-&gt; Text -&gt; ResourceSpans -&gt; ResourceSpans
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SchemaURL -&gt; Text
</span><span class="hs-identifier hs-var">schemaURLToText</span></span><span> </span><span class="annot"><span class="annottext">SchemaURL
</span><a href="#local-6989586621679147172"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Resource Attrs -&gt; Maybe SchemaURL
forall (attrs :: AttrsFor -&gt; *). Resource attrs -&gt; Maybe SchemaURL
</span><span class="hs-identifier hs-var">resourceSchemaURL</span></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679147166"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1087"></span><span>              </span><span class="annot"><span class="annottext">ResourceSpans -&gt; (ResourceSpans -&gt; ResourceSpans) -&gt; ResourceSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ResourceSpans Resource
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;resource&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.resource</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ResourceSpans Resource
-&gt; Resource -&gt; ResourceSpans -&gt; ResourceSpans
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Resource
</span><a href="#local-6989586621679147176"><span class="hs-identifier hs-var">convertResourceAttrs</span></a></span><span>
</span><span id="line-1088"></span><span>              </span><span class="annot"><span class="annottext">ResourceSpans -&gt; (ResourceSpans -&gt; ResourceSpans) -&gt; ResourceSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ResourceSpans [ScopeSpans]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;scopeSpans&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.scopeSpans</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ResourceSpans [ScopeSpans]
-&gt; [ScopeSpans] -&gt; ResourceSpans -&gt; ResourceSpans
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">([Span Attrs] -&gt; Maybe ScopeSpans)
-&gt; [[Span Attrs]] -&gt; [ScopeSpans]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">[Span Attrs] -&gt; Maybe ScopeSpans
</span><a href="#local-6989586621679147178"><span class="hs-identifier hs-var">convertSpanGroup</span></a></span><span> </span><span class="annot"><span class="annottext">[[Span Attrs]]
</span><a href="#local-6989586621679147179"><span class="hs-identifier hs-var">groupedSpans</span></a></span><span>
</span><span id="line-1089"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1090"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1091"></span><span>    </span><span class="annot"><a href="#local-6989586621679147176"><span class="hs-identifier hs-type">convertResourceAttrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Resource.Resource</span></span><span>
</span><span id="line-1092"></span><span>    </span><span id="local-6989586621679147176"><span class="annot"><span class="annottext">convertResourceAttrs :: Resource
</span><a href="#local-6989586621679147176"><span class="hs-identifier hs-var hs-var">convertResourceAttrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1093"></span><span>      </span><span class="annot"><span class="annottext">Resource
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1094"></span><span>        </span><span class="annot"><span class="annottext">Resource -&gt; (Resource -&gt; Resource) -&gt; Resource
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Resource [KeyValue]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;attributes&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Resource.attributes</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Resource [KeyValue]
-&gt; [KeyValue] -&gt; Resource -&gt; Resource
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForResource -&gt; [KeyValue]
forall (af :: AttrsFor). Attrs af -&gt; [KeyValue]
</span><a href="#local-6989586621679147181"><span class="hs-identifier hs-var">convertAttrKVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Resource Attrs -&gt; Attrs 'AttrsForResource
forall (attrs :: AttrsFor -&gt; *).
Resource attrs -&gt; attrs 'AttrsForResource
</span><span class="hs-identifier hs-var">resourceAttrs</span></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679147166"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span>    </span><span class="annot"><a href="#local-6989586621679147179"><span class="hs-identifier hs-type">groupedSpans</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-1097"></span><span>    </span><span id="local-6989586621679147179"><span class="annot"><span class="annottext">groupedSpans :: [[Span Attrs]]
</span><a href="#local-6989586621679147179"><span class="hs-identifier hs-var hs-var">groupedSpans</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1098"></span><span>      </span><span class="annot"><span class="annottext">Batch (Span Attrs) -&gt; [Span Attrs]
forall a. Batch a -&gt; [a]
</span><a href="OTel.SDK.Trace.Internal.html#unBatch"><span class="hs-identifier hs-var">unBatch</span></a></span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679147167"><span class="hs-identifier hs-var">batch</span></a></span><span>
</span><span id="line-1099"></span><span>        </span><span class="annot"><span class="annottext">[Span Attrs] -&gt; ([Span Attrs] -&gt; [Span Attrs]) -&gt; [Span Attrs]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; InstrumentationScope)
-&gt; [Span Attrs] -&gt; [Span Attrs]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">List.sortOn</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; InstrumentationScope
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; InstrumentationScope
</span><span class="hs-identifier hs-var">spanInstrumentationScope</span></span><span>
</span><span id="line-1100"></span><span>        </span><span class="annot"><span class="annottext">[Span Attrs] -&gt; ([Span Attrs] -&gt; [[Span Attrs]]) -&gt; [[Span Attrs]]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; Span Attrs -&gt; Bool)
-&gt; [Span Attrs] -&gt; [[Span Attrs]]
forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [[a]]
</span><span class="hs-identifier hs-var">List.groupBy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstrumentationScope -&gt; InstrumentationScope -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">(InstrumentationScope -&gt; InstrumentationScope -&gt; Bool)
-&gt; (Span Attrs -&gt; InstrumentationScope)
-&gt; Span Attrs
-&gt; Span Attrs
-&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; InstrumentationScope
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; InstrumentationScope
</span><span class="hs-identifier hs-var">spanInstrumentationScope</span></span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>
</span><span id="line-1102"></span><span>    </span><span class="annot"><a href="#local-6989586621679147178"><span class="hs-identifier hs-type">convertSpanGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Trace.ScopeSpans</span></span><span>
</span><span id="line-1103"></span><span>    </span><span id="local-6989586621679147178"><span class="annot"><span class="annottext">convertSpanGroup :: [Span Attrs] -&gt; Maybe ScopeSpans
</span><a href="#local-6989586621679147178"><span class="hs-identifier hs-var hs-var">convertSpanGroup</span></a></span></span><span> </span><span id="local-6989586621679147186"><span class="annot"><span class="annottext">[Span Attrs]
</span><a href="#local-6989586621679147186"><span class="hs-identifier hs-var">spans</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1104"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Span Attrs]
</span><a href="#local-6989586621679147186"><span class="hs-identifier hs-var">spans</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1105"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ScopeSpans
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1106"></span><span>        </span><span id="local-6989586621679147187"><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679147187"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Span Attrs]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1107"></span><span>          </span><span class="annot"><span class="annottext">ScopeSpans
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1108"></span><span>            </span><span class="annot"><span class="annottext">ScopeSpans -&gt; (ScopeSpans -&gt; ScopeSpans) -&gt; ScopeSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ScopeSpans InstrumentationScope
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;scope&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.scope</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ScopeSpans InstrumentationScope
-&gt; InstrumentationScope -&gt; ScopeSpans -&gt; ScopeSpans
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">InstrumentationScope -&gt; InstrumentationScope
</span><a href="#local-6989586621679147189"><span class="hs-identifier hs-var">convertInstScope</span></a></span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679147190"><span class="hs-identifier hs-var">instScope</span></a></span><span>
</span><span id="line-1109"></span><span>            </span><span class="annot"><span class="annottext">ScopeSpans -&gt; (ScopeSpans -&gt; ScopeSpans) -&gt; ScopeSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ScopeSpans [Span]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;spans&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.spans</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ScopeSpans [Span]
-&gt; [Span] -&gt; ScopeSpans -&gt; ScopeSpans
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">(Span Attrs -&gt; Span) -&gt; [Span Attrs] -&gt; [Span]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; Span
</span><a href="#local-6989586621679147192"><span class="hs-identifier hs-var">convertSpan</span></a></span><span> </span><span class="annot"><span class="annottext">[Span Attrs]
</span><a href="#local-6989586621679147186"><span class="hs-identifier hs-var">spans</span></a></span><span>
</span><span id="line-1110"></span><span>            </span><span class="annot"><span class="annottext">ScopeSpans -&gt; (ScopeSpans -&gt; ScopeSpans) -&gt; ScopeSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ScopeSpans -&gt; ScopeSpans)
-&gt; (SchemaURL -&gt; ScopeSpans -&gt; ScopeSpans)
-&gt; Maybe SchemaURL
-&gt; ScopeSpans
-&gt; ScopeSpans
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">ScopeSpans -&gt; ScopeSpans
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147193"><span class="annot"><span class="annottext">SchemaURL
</span><a href="#local-6989586621679147193"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ScopeSpans Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;schemaUrl&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.schemaUrl</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ScopeSpans Text
-&gt; Text -&gt; ScopeSpans -&gt; ScopeSpans
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SchemaURL -&gt; Text
</span><span class="hs-identifier hs-var">schemaURLToText</span></span><span> </span><span class="annot"><span class="annottext">SchemaURL
</span><a href="#local-6989586621679147193"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe SchemaURL
</span><a href="#local-6989586621679147194"><span class="hs-identifier hs-var">schemaURL</span></a></span><span>
</span><span id="line-1111"></span><span>            </span><span class="annot"><span class="annottext">ScopeSpans -&gt; (ScopeSpans -&gt; Maybe ScopeSpans) -&gt; Maybe ScopeSpans
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">ScopeSpans -&gt; Maybe ScopeSpans
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span>
</span><span id="line-1112"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1113"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">InstrumentationScope</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">instrumentationScopeSchemaURL :: InstrumentationScope -&gt; Maybe SchemaURL
</span><span class="hs-identifier hs-var">instrumentationScopeSchemaURL</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147194"><span class="annot"><span class="annottext">Maybe SchemaURL
</span><a href="#local-6989586621679147194"><span class="hs-identifier hs-var">schemaURL</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679147190"><span class="hs-identifier hs-var">instScope</span></a></span><span>
</span><span id="line-1114"></span><span>          </span><span id="local-6989586621679147190"><span class="annot"><span class="annottext">instScope :: InstrumentationScope
</span><a href="#local-6989586621679147190"><span class="hs-identifier hs-var hs-var">instScope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span Attrs -&gt; InstrumentationScope
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; InstrumentationScope
</span><span class="hs-identifier hs-var">spanInstrumentationScope</span></span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679147187"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-1115"></span><span>
</span><span id="line-1116"></span><span>    </span><span class="annot"><a href="#local-6989586621679147192"><span class="hs-identifier hs-type">convertSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Trace.Span</span></span><span>
</span><span id="line-1117"></span><span>    </span><span id="local-6989586621679147192"><span class="annot"><span class="annottext">convertSpan :: Span Attrs -&gt; Span
</span><a href="#local-6989586621679147192"><span class="hs-identifier hs-var hs-var">convertSpan</span></a></span></span><span> </span><span id="local-6989586621679147197"><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679147197"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1118"></span><span>      </span><span class="annot"><span class="annottext">Span
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1119"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;traceId&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.traceId</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span ByteString -&gt; ByteString -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><a href="#local-6989586621679147199"><span class="hs-identifier hs-var">bytesBuilderToBS8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceId -&gt; Builder
</span><span class="hs-identifier hs-var">traceIdToBytesBuilder</span></span><span> </span><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679147200"><span class="hs-identifier hs-var">traceId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1120"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;spanId&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.spanId</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span ByteString -&gt; ByteString -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><a href="#local-6989586621679147199"><span class="hs-identifier hs-var">bytesBuilderToBS8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanId -&gt; Builder
</span><span class="hs-identifier hs-var">spanIdToBytesBuilder</span></span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679147202"><span class="hs-identifier hs-var">spanId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>        </span><span class="hs-comment">-- TODO: &amp; OTLP.Trace.traceState .~ undefined</span><span>
</span><span id="line-1122"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; Span)
-&gt; (SpanId -&gt; Span -&gt; Span) -&gt; Maybe SpanId -&gt; Span -&gt; Span
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147203"><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679147203"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;parentSpanId&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.parentSpanId</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span ByteString -&gt; ByteString -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><a href="#local-6989586621679147199"><span class="hs-identifier hs-var">bytesBuilderToBS8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanId -&gt; Builder
</span><span class="hs-identifier hs-var">spanIdToBytesBuilder</span></span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679147203"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe SpanId
</span><a href="#local-6989586621679147205"><span class="hs-identifier hs-var">mParentSpanId</span></a></span><span>
</span><span id="line-1123"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;name&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.name</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Text -&gt; Text -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SpanName -&gt; Text
</span><span class="hs-identifier hs-var">unSpanName</span></span><span> </span><span class="annot"><span class="annottext">SpanName
</span><a href="#local-6989586621679147207"><span class="hs-identifier hs-var">spanName</span></a></span><span>
</span><span id="line-1124"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Span'SpanKind
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;kind&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.kind</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Span'SpanKind
-&gt; Span'SpanKind -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SpanKind -&gt; Span'SpanKind
</span><a href="#local-6989586621679147209"><span class="hs-identifier hs-var">convertSpanKind</span></a></span><span> </span><span class="annot"><span class="annottext">SpanKind
</span><a href="#local-6989586621679147210"><span class="hs-identifier hs-var">spanKind</span></a></span><span>
</span><span id="line-1125"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Word64
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;startTimeUnixNano&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.startTimeUnixNano</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Word64 -&gt; Word64 -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1126"></span><span>            </span><span class="annot"><span class="annottext">Integer -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Timestamp -&gt; Integer
</span><span class="hs-identifier hs-var">timestampToNanoseconds</span></span><span> </span><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679147212"><span class="hs-identifier hs-var">spanStart</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Word64
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;endTimeUnixNano&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.endTimeUnixNano</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Word64 -&gt; Word64 -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1128"></span><span>            </span><span class="annot"><span class="annottext">Integer -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Timestamp -&gt; Integer
</span><span class="hs-identifier hs-var">timestampToNanoseconds</span></span><span> </span><span class="annot"><span class="annottext">(Timestamp -&gt; Integer) -&gt; Timestamp -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanFrozenTimestamp -&gt; Timestamp
</span><span class="hs-identifier hs-var">frozenTimestamp</span></span><span> </span><span class="annot"><span class="annottext">SpanFrozenTimestamp
SpanFrozenAt Attrs
</span><a href="#local-6989586621679147214"><span class="hs-identifier hs-var">spanFrozenAt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1129"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span [KeyValue]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;attributes&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.attributes</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span [KeyValue] -&gt; [KeyValue] -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpan -&gt; [KeyValue]
forall (af :: AttrsFor). Attrs af -&gt; [KeyValue]
</span><a href="#local-6989586621679147181"><span class="hs-identifier hs-var">convertAttrKVs</span></a></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpan
</span><a href="#local-6989586621679147216"><span class="hs-identifier hs-var">spanAttrs</span></a></span><span>
</span><span id="line-1130"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Word32
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;droppedAttributesCount&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.droppedAttributesCount</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Word32 -&gt; Word32 -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attrs 'AttrsForSpan -&gt; Int
forall (af :: AttrsFor). Attrs af -&gt; Int
</span><span class="hs-identifier hs-var">droppedAttrsCount</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpan
</span><a href="#local-6989586621679147216"><span class="hs-identifier hs-var">spanAttrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1131"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span [Span'Event]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;events&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.events</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span [Span'Event]
-&gt; [Span'Event] -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">(SpanEvent Attrs -&gt; Span'Event)
-&gt; [SpanEvent Attrs] -&gt; [Span'Event]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SpanEvent Attrs -&gt; Span'Event
</span><a href="#local-6989586621679147219"><span class="hs-identifier hs-var">convertSpanEvent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanEvents Attrs -&gt; [SpanEvent Attrs]
forall (attrs :: AttrsFor -&gt; *).
SpanEvents attrs -&gt; [SpanEvent attrs]
</span><span class="hs-identifier hs-var">spanEventsToList</span></span><span> </span><span class="annot"><span class="annottext">SpanEvents Attrs
</span><a href="#local-6989586621679147220"><span class="hs-identifier hs-var">spanEvents</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span [Span'Link]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;links&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.links</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span [Span'Link] -&gt; [Span'Link] -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">(SpanLink Attrs -&gt; Span'Link) -&gt; [SpanLink Attrs] -&gt; [Span'Link]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SpanLink Attrs -&gt; Span'Link
</span><a href="#local-6989586621679147222"><span class="hs-identifier hs-var">convertSpanLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanLinks Attrs -&gt; [SpanLink Attrs]
forall (attrs :: AttrsFor -&gt; *).
SpanLinks attrs -&gt; [SpanLink attrs]
</span><span class="hs-identifier hs-var">spanLinksToList</span></span><span> </span><span class="annot"><span class="annottext">SpanLinks Attrs
</span><a href="#local-6989586621679147223"><span class="hs-identifier hs-var">spanLinks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1133"></span><span>        </span><span class="annot"><span class="annottext">Span -&gt; (Span -&gt; Span) -&gt; Span
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Status
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;status&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.status</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span Status -&gt; Status -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SpanStatus -&gt; Status
</span><a href="#local-6989586621679147225"><span class="hs-identifier hs-var">convertSpanStatus</span></a></span><span> </span><span class="annot"><span class="annottext">SpanStatus
</span><a href="#local-6989586621679147226"><span class="hs-identifier hs-var">spanStatus</span></a></span><span>
</span><span id="line-1134"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1135"></span><span>      </span><span id="local-6989586621679147205"><span class="annot"><span class="annottext">mParentSpanId :: Maybe SpanId
</span><a href="#local-6989586621679147205"><span class="hs-identifier hs-var hs-var">mParentSpanId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1136"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SpanLineage
</span><a href="#local-6989586621679147227"><span class="hs-identifier hs-var">spanLineage</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1137"></span><span>          </span><span class="annot"><span class="annottext">SpanLineage
</span><span class="hs-identifier hs-var">SpanLineageRoot</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SpanId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1138"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">SpanLineageChildOf</span></span><span> </span><span id="local-6989586621679147228"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147228"><span class="hs-identifier hs-var">parentSpanContext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1139"></span><span>            </span><span class="annot"><span class="annottext">SpanId -&gt; Maybe SpanId
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SpanId -&gt; Maybe SpanId) -&gt; SpanId -&gt; Maybe SpanId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; SpanId
</span><span class="hs-identifier hs-var">spanContextSpanId</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147228"><span class="hs-identifier hs-var">parentSpanContext</span></a></span><span>
</span><span id="line-1140"></span><span>
</span><span id="line-1141"></span><span>
</span><span id="line-1142"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span>
</span><span id="line-1143"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679147227"><span class="annot"><span class="annottext">SpanLineage
spanLineage :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanLineage
spanLineage :: SpanLineage
</span><span class="hs-identifier hs-var hs-var">spanLineage</span></span></span><span>
</span><span id="line-1144"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanContext :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1145"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">SpanContext</span></span><span>
</span><span id="line-1146"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanContextTraceId :: SpanContext -&gt; TraceId
</span><span class="hs-identifier hs-var">spanContextTraceId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147200"><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679147200"><span class="hs-identifier hs-var">traceId</span></a></span></span><span>
</span><span id="line-1147"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanContextSpanId :: SpanContext -&gt; SpanId
</span><span class="hs-identifier hs-var">spanContextSpanId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147202"><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679147202"><span class="hs-identifier hs-var">spanId</span></a></span></span><span>
</span><span id="line-1148"></span><span>              </span><span class="hs-comment">--, spanContextTraceState = traceState</span><span>
</span><span id="line-1149"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-1150"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147207"><span class="annot"><span class="annottext">SpanName
spanName :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanName
spanName :: SpanName
</span><span class="hs-identifier hs-var hs-var">spanName</span></span></span><span>
</span><span id="line-1151"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147226"><span class="annot"><span class="annottext">SpanStatus
spanStatus :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanStatus
spanStatus :: SpanStatus
</span><span class="hs-identifier hs-var hs-var">spanStatus</span></span></span><span>
</span><span id="line-1152"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147212"><span class="annot"><span class="annottext">Timestamp
spanStart :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Timestamp
spanStart :: Timestamp
</span><span class="hs-identifier hs-var hs-var">spanStart</span></span></span><span>
</span><span id="line-1153"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147214"><span class="annot"><span class="annottext">SpanFrozenAt Attrs
spanFrozenAt :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanFrozenAt attrs
spanFrozenAt :: SpanFrozenAt Attrs
</span><span class="hs-identifier hs-var hs-var">spanFrozenAt</span></span></span><span>
</span><span id="line-1154"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147210"><span class="annot"><span class="annottext">SpanKind
spanKind :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanKind
spanKind :: SpanKind
</span><span class="hs-identifier hs-var hs-var">spanKind</span></span></span><span>
</span><span id="line-1155"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147216"><span class="annot"><span class="annottext">Attrs 'AttrsForSpan
spanAttrs :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; attrs 'AttrsForSpan
spanAttrs :: Attrs 'AttrsForSpan
</span><span class="hs-identifier hs-var hs-var">spanAttrs</span></span></span><span>
</span><span id="line-1156"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147223"><span class="annot"><span class="annottext">SpanLinks Attrs
spanLinks :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanLinks attrs
spanLinks :: SpanLinks Attrs
</span><span class="hs-identifier hs-var hs-var">spanLinks</span></span></span><span>
</span><span id="line-1157"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147220"><span class="annot"><span class="annottext">SpanEvents Attrs
spanEvents :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanEvents attrs
spanEvents :: SpanEvents Attrs
</span><span class="hs-identifier hs-var hs-var">spanEvents</span></span></span><span>
</span><span id="line-1158"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span Attrs
</span><a href="#local-6989586621679147197"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-1159"></span><span>
</span><span id="line-1160"></span><span>    </span><span class="annot"><a href="#local-6989586621679147219"><span class="hs-identifier hs-type">convertSpanEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanEvent</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Trace.Span'Event</span></span><span>
</span><span id="line-1161"></span><span>    </span><span id="local-6989586621679147219"><span class="annot"><span class="annottext">convertSpanEvent :: SpanEvent Attrs -&gt; Span'Event
</span><a href="#local-6989586621679147219"><span class="hs-identifier hs-var hs-var">convertSpanEvent</span></a></span></span><span> </span><span id="local-6989586621679147230"><span class="annot"><span class="annottext">SpanEvent Attrs
</span><a href="#local-6989586621679147230"><span class="hs-identifier hs-var">spanEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1162"></span><span>      </span><span class="annot"><span class="annottext">Span'Event
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1163"></span><span>        </span><span class="annot"><span class="annottext">Span'Event -&gt; (Span'Event -&gt; Span'Event) -&gt; Span'Event
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event Word64
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;timeUnixNano&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.timeUnixNano</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event Word64
-&gt; Word64 -&gt; Span'Event -&gt; Span'Event
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Timestamp -&gt; Integer
</span><span class="hs-identifier hs-var">timestampToNanoseconds</span></span><span> </span><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679147232"><span class="hs-identifier hs-var">timestamp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>        </span><span class="annot"><span class="annottext">Span'Event -&gt; (Span'Event -&gt; Span'Event) -&gt; Span'Event
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;name&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.name</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event Text
-&gt; Text -&gt; Span'Event -&gt; Span'Event
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">SpanEventName -&gt; Text
</span><span class="hs-identifier hs-var">unSpanEventName</span></span><span> </span><span class="annot"><span class="annottext">SpanEventName
</span><a href="#local-6989586621679147234"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1165"></span><span>        </span><span class="annot"><span class="annottext">Span'Event -&gt; (Span'Event -&gt; Span'Event) -&gt; Span'Event
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event [KeyValue]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;attributes&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.attributes</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event [KeyValue]
-&gt; [KeyValue] -&gt; Span'Event -&gt; Span'Event
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanEvent -&gt; [KeyValue]
forall (af :: AttrsFor). Attrs af -&gt; [KeyValue]
</span><a href="#local-6989586621679147181"><span class="hs-identifier hs-var">convertAttrKVs</span></a></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanEvent
</span><a href="#local-6989586621679147235"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-1166"></span><span>        </span><span class="annot"><span class="annottext">Span'Event -&gt; (Span'Event -&gt; Span'Event) -&gt; Span'Event
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event Word32
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;droppedAttributesCount&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.droppedAttributesCount</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Event Word32
-&gt; Word32 -&gt; Span'Event -&gt; Span'Event
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanEvent -&gt; Int
forall (af :: AttrsFor). Attrs af -&gt; Int
</span><span class="hs-identifier hs-var">droppedAttrsCount</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanEvent
</span><a href="#local-6989586621679147235"><span class="hs-identifier hs-var">attrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1168"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SpanEvent</span></span><span>
</span><span id="line-1169"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanEventName :: forall (attrs :: AttrsFor -&gt; *). SpanEvent attrs -&gt; SpanEventName
</span><span class="hs-identifier hs-var">spanEventName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147234"><span class="annot"><span class="annottext">SpanEventName
</span><a href="#local-6989586621679147234"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1170"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanEventTimestamp :: forall (attrs :: AttrsFor -&gt; *). SpanEvent attrs -&gt; Timestamp
</span><span class="hs-identifier hs-var">spanEventTimestamp</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147232"><span class="annot"><span class="annottext">Timestamp
</span><a href="#local-6989586621679147232"><span class="hs-identifier hs-var">timestamp</span></a></span></span><span>
</span><span id="line-1171"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanEventAttrs :: forall (attrs :: AttrsFor -&gt; *).
SpanEvent attrs -&gt; attrs 'AttrsForSpanEvent
</span><span class="hs-identifier hs-var">spanEventAttrs</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147235"><span class="annot"><span class="annottext">Attrs 'AttrsForSpanEvent
</span><a href="#local-6989586621679147235"><span class="hs-identifier hs-var">attrs</span></a></span></span><span>
</span><span id="line-1172"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanEvent Attrs
</span><a href="#local-6989586621679147230"><span class="hs-identifier hs-var">spanEvent</span></a></span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span>    </span><span class="annot"><a href="#local-6989586621679147222"><span class="hs-identifier hs-type">convertSpanLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanLink</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Trace.Span'Link</span></span><span>
</span><span id="line-1175"></span><span>    </span><span id="local-6989586621679147222"><span class="annot"><span class="annottext">convertSpanLink :: SpanLink Attrs -&gt; Span'Link
</span><a href="#local-6989586621679147222"><span class="hs-identifier hs-var hs-var">convertSpanLink</span></a></span></span><span> </span><span id="local-6989586621679147240"><span class="annot"><span class="annottext">SpanLink Attrs
</span><a href="#local-6989586621679147240"><span class="hs-identifier hs-var">spanLink</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1176"></span><span>      </span><span class="annot"><span class="annottext">Span'Link
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1177"></span><span>        </span><span class="annot"><span class="annottext">Span'Link -&gt; (Span'Link -&gt; Span'Link) -&gt; Span'Link
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;traceId&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.traceId</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link ByteString
-&gt; ByteString -&gt; Span'Link -&gt; Span'Link
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><a href="#local-6989586621679147199"><span class="hs-identifier hs-var">bytesBuilderToBS8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceId -&gt; Builder
</span><span class="hs-identifier hs-var">traceIdToBytesBuilder</span></span><span> </span><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679147241"><span class="hs-identifier hs-var">traceId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>        </span><span class="annot"><span class="annottext">Span'Link -&gt; (Span'Link -&gt; Span'Link) -&gt; Span'Link
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link ByteString
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;spanId&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.spanId</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link ByteString
-&gt; ByteString -&gt; Span'Link -&gt; Span'Link
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><a href="#local-6989586621679147199"><span class="hs-identifier hs-var">bytesBuilderToBS8</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanId -&gt; Builder
</span><span class="hs-identifier hs-var">spanIdToBytesBuilder</span></span><span> </span><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679147242"><span class="hs-identifier hs-var">spanId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1179"></span><span>        </span><span class="hs-comment">-- TODO: &amp; OTLP.Trace.traceState .~ undefined</span><span>
</span><span id="line-1180"></span><span>        </span><span class="annot"><span class="annottext">Span'Link -&gt; (Span'Link -&gt; Span'Link) -&gt; Span'Link
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link [KeyValue]
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;attributes&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.attributes</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link [KeyValue]
-&gt; [KeyValue] -&gt; Span'Link -&gt; Span'Link
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanLink -&gt; [KeyValue]
forall (af :: AttrsFor). Attrs af -&gt; [KeyValue]
</span><a href="#local-6989586621679147181"><span class="hs-identifier hs-var">convertAttrKVs</span></a></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanLink
</span><a href="#local-6989586621679147243"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-1181"></span><span>        </span><span class="annot"><span class="annottext">Span'Link -&gt; (Span'Link -&gt; Span'Link) -&gt; Span'Link
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link Word32
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;droppedAttributesCount&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.droppedAttributesCount</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Span'Link Word32
-&gt; Word32 -&gt; Span'Link -&gt; Span'Link
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanLink -&gt; Int
forall (af :: AttrsFor). Attrs af -&gt; Int
</span><span class="hs-identifier hs-var">droppedAttrsCount</span></span><span> </span><span class="annot"><span class="annottext">Attrs 'AttrsForSpanLink
</span><a href="#local-6989586621679147243"><span class="hs-identifier hs-var">attrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1183"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SpanLink</span></span><span>
</span><span id="line-1184"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanLinkSpanContext :: forall (attrs :: AttrsFor -&gt; *). SpanLink attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanLinkSpanContext</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1185"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">SpanContext</span></span><span>
</span><span id="line-1186"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanContextTraceId :: SpanContext -&gt; TraceId
</span><span class="hs-identifier hs-var">spanContextTraceId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147241"><span class="annot"><span class="annottext">TraceId
</span><a href="#local-6989586621679147241"><span class="hs-identifier hs-var">traceId</span></a></span></span><span>
</span><span id="line-1187"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanContextSpanId :: SpanContext -&gt; SpanId
</span><span class="hs-identifier hs-var">spanContextSpanId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147242"><span class="annot"><span class="annottext">SpanId
</span><a href="#local-6989586621679147242"><span class="hs-identifier hs-var">spanId</span></a></span></span><span>
</span><span id="line-1188"></span><span>              </span><span class="hs-comment">--, spanContextTraceState = traceState</span><span>
</span><span id="line-1189"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-1190"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanLinkAttrs :: forall (attrs :: AttrsFor -&gt; *).
SpanLink attrs -&gt; attrs 'AttrsForSpanLink
</span><span class="hs-identifier hs-var">spanLinkAttrs</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147243"><span class="annot"><span class="annottext">Attrs 'AttrsForSpanLink
</span><a href="#local-6989586621679147243"><span class="hs-identifier hs-var">attrs</span></a></span></span><span>
</span><span id="line-1191"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanLink Attrs
</span><a href="#local-6989586621679147240"><span class="hs-identifier hs-var">spanLink</span></a></span><span>
</span><span id="line-1192"></span><span>
</span><span id="line-1193"></span><span>    </span><span id="local-6989586621679145154"><span class="annot"><a href="#local-6989586621679147181"><span class="hs-identifier hs-type">convertAttrKVs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="annot"><a href="#local-6989586621679145154"><span class="hs-identifier hs-type">af</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.KeyValue</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-1194"></span><span>    </span><span id="local-6989586621679147181"><span class="annot"><span class="annottext">convertAttrKVs :: forall (af :: AttrsFor). Attrs af -&gt; [KeyValue]
</span><a href="#local-6989586621679147181"><span class="hs-identifier hs-var hs-var">convertAttrKVs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1195"></span><span>      </span><span class="annot"><span class="annottext">DList KeyValue -&gt; [KeyValue]
forall a. DList a -&gt; [a]
</span><span class="hs-identifier hs-var">DList.toList</span></span><span> </span><span class="annot"><span class="annottext">(DList KeyValue -&gt; [KeyValue])
-&gt; (Attrs af -&gt; DList KeyValue) -&gt; Attrs af -&gt; [KeyValue]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(forall a. Key a -&gt; Attr a -&gt; DList KeyValue)
-&gt; Attrs af -&gt; DList KeyValue
forall m (af :: AttrsFor).
Monoid m =&gt;
(forall a. Key a -&gt; Attr a -&gt; m) -&gt; Attrs af -&gt; m
</span><span class="hs-identifier hs-var">foldMapWithKeyAttrs</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147247"><span class="annot"><span class="annottext">Key a
</span><a href="#local-6989586621679147247"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679147248"><span class="annot"><span class="annottext">Attr a
</span><a href="#local-6989586621679147248"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyValue -&gt; DList KeyValue
forall a. a -&gt; DList a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(KeyValue -&gt; DList KeyValue) -&gt; KeyValue -&gt; DList KeyValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key a -&gt; Attr a -&gt; KeyValue
forall typ. Key typ -&gt; Attr typ -&gt; KeyValue
</span><a href="#local-6989586621679147249"><span class="hs-identifier hs-var">convertAttrKV</span></a></span><span> </span><span class="annot"><span class="annottext">Key a
</span><a href="#local-6989586621679147247"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Attr a
</span><a href="#local-6989586621679147248"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span>    </span><span id="local-6989586621679145235"><span class="annot"><a href="#local-6989586621679147249"><span class="hs-identifier hs-type">convertAttrKV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Key</span></span><span> </span><span class="annot"><a href="#local-6989586621679145235"><span class="hs-identifier hs-type">typ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attr</span></span><span> </span><span class="annot"><a href="#local-6989586621679145235"><span class="hs-identifier hs-type">typ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.KeyValue</span></span></span><span>
</span><span id="line-1198"></span><span>    </span><span id="local-6989586621679147249"><span class="annot"><span class="annottext">convertAttrKV :: forall typ. Key typ -&gt; Attr typ -&gt; KeyValue
</span><a href="#local-6989586621679147249"><span class="hs-identifier hs-var hs-var">convertAttrKV</span></a></span></span><span> </span><span id="local-6989586621679147258"><span class="annot"><span class="annottext">Key typ
</span><a href="#local-6989586621679147258"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679147259"><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147259"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1199"></span><span>      </span><span class="annot"><span class="annottext">KeyValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1200"></span><span>        </span><span class="annot"><span class="annottext">KeyValue -&gt; (KeyValue -&gt; KeyValue) -&gt; KeyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity KeyValue Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;key&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.key</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity KeyValue Text -&gt; Text -&gt; KeyValue -&gt; KeyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Key typ -&gt; Text
forall a. Key a -&gt; Text
</span><span class="hs-identifier hs-var">unKey</span></span><span> </span><span class="annot"><span class="annottext">Key typ
</span><a href="#local-6989586621679147258"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1201"></span><span>        </span><span class="annot"><span class="annottext">KeyValue -&gt; (KeyValue -&gt; KeyValue) -&gt; KeyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity KeyValue AnyValue
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;value&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.value</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity KeyValue AnyValue
-&gt; AnyValue -&gt; KeyValue -&gt; KeyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attr typ -&gt; AnyValue
forall typ. Attr typ -&gt; AnyValue
</span><a href="#local-6989586621679147262"><span class="hs-identifier hs-var">convertAttrValue</span></a></span><span> </span><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147259"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span>    </span><span id="local-6989586621679145244"><span class="annot"><a href="#local-6989586621679147262"><span class="hs-identifier hs-type">convertAttrValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attr</span></span><span> </span><span class="annot"><a href="#local-6989586621679145244"><span class="hs-identifier hs-type">typ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.AnyValue</span></span></span><span>
</span><span id="line-1204"></span><span>    </span><span id="local-6989586621679147262"><span class="annot"><span class="annottext">convertAttrValue :: forall typ. Attr typ -&gt; AnyValue
</span><a href="#local-6989586621679147262"><span class="hs-identifier hs-var hs-var">convertAttrValue</span></a></span></span><span> </span><span id="local-6989586621679147264"><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1205"></span><span>      </span><span class="annot"><span class="annottext">forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.AnyValue</span></span><span>
</span><span id="line-1206"></span><span>        </span><span class="annot"><span class="annottext">AnyValue -&gt; (AnyValue -&gt; AnyValue) -&gt; AnyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Attr typ -&gt; AttrType typ
forall a. Attr a -&gt; AttrType a
</span><span class="hs-identifier hs-var">attrType</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1207"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeText</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;stringValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.stringValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ -&gt; typ -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attr typ -&gt; typ
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span>
</span><span id="line-1208"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeBool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;boolValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.boolValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ -&gt; typ -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attr typ -&gt; typ
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span>
</span><span id="line-1209"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeInt</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;intValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.intValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ -&gt; typ -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attr typ -&gt; typ
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span>
</span><span id="line-1210"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeDouble</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;doubleValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.doubleValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue typ -&gt; typ -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Attr typ -&gt; typ
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span>
</span><span id="line-1211"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeTextArray</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1212"></span><span>              </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;arrayValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.arrayValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
-&gt; ArrayValue -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1213"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ArrayValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1214"></span><span>                    </span><span class="annot"><span class="annottext">ArrayValue -&gt; (ArrayValue -&gt; ArrayValue) -&gt; ArrayValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;vec'values&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.vec'values</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
-&gt; Vector AnyValue -&gt; ArrayValue -&gt; ArrayValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Text -&gt; Vector AnyValue
</span><a href="#local-6989586621679147299"><span class="hs-identifier hs-var">convertTextArrayAttrVals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attr (AttrVals Text) -&gt; AttrVals Text
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
Attr (AttrVals Text)
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1215"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1216"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeBoolArray</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1217"></span><span>              </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;arrayValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.arrayValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
-&gt; ArrayValue -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1218"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ArrayValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1219"></span><span>                    </span><span class="annot"><span class="annottext">ArrayValue -&gt; (ArrayValue -&gt; ArrayValue) -&gt; ArrayValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;vec'values&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.vec'values</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
-&gt; Vector AnyValue -&gt; ArrayValue -&gt; ArrayValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Bool -&gt; Vector AnyValue
</span><a href="#local-6989586621679147307"><span class="hs-identifier hs-var">convertBoolArrayAttrVals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attr (AttrVals Bool) -&gt; AttrVals Bool
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
Attr (AttrVals Bool)
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1220"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1221"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeIntArray</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1222"></span><span>              </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;arrayValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.arrayValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
-&gt; ArrayValue -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1223"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ArrayValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1224"></span><span>                    </span><span class="annot"><span class="annottext">ArrayValue -&gt; (ArrayValue -&gt; ArrayValue) -&gt; ArrayValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;vec'values&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.vec'values</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
-&gt; Vector AnyValue -&gt; ArrayValue -&gt; ArrayValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Int64 -&gt; Vector AnyValue
</span><a href="#local-6989586621679147315"><span class="hs-identifier hs-var">convertIntArrayAttrVals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attr (AttrVals Int64) -&gt; AttrVals Int64
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
Attr (AttrVals Int64)
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1225"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span>            </span><span class="annot"><span class="annottext">AttrType typ
</span><span class="hs-identifier hs-var">AttrTypeDoubleArray</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1227"></span><span>              </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;arrayValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.arrayValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue ArrayValue
-&gt; ArrayValue -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span>
</span><span id="line-1228"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ArrayValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1229"></span><span>                    </span><span class="annot"><span class="annottext">ArrayValue -&gt; (ArrayValue -&gt; ArrayValue) -&gt; ArrayValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;vec'values&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.vec'values</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity ArrayValue (Vector AnyValue)
-&gt; Vector AnyValue -&gt; ArrayValue -&gt; ArrayValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Double -&gt; Vector AnyValue
</span><a href="#local-6989586621679147323"><span class="hs-identifier hs-var">convertDoubleArrayAttrVals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attr (AttrVals Double) -&gt; AttrVals Double
forall a. Attr a -&gt; a
</span><span class="hs-identifier hs-var">attrVal</span></span><span> </span><span class="annot"><span class="annottext">Attr typ
Attr (AttrVals Double)
</span><a href="#local-6989586621679147264"><span class="hs-identifier hs-var">attr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1230"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1231"></span><span>
</span><span id="line-1232"></span><span>    </span><span class="annot"><a href="#local-6989586621679147299"><span class="hs-identifier hs-type">convertTextArrayAttrVals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrVals</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.AnyValue</span></span><span>
</span><span id="line-1233"></span><span>    </span><span id="local-6989586621679147299"><span class="annot"><span class="annottext">convertTextArrayAttrVals :: AttrVals Text -&gt; Vector AnyValue
</span><a href="#local-6989586621679147299"><span class="hs-identifier hs-var hs-var">convertTextArrayAttrVals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1234"></span><span>      </span><span class="annot"><span class="annottext">(Text -&gt; AnyValue) -&gt; Vector Text -&gt; Vector AnyValue
forall a b. (a -&gt; b) -&gt; Vector a -&gt; Vector b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147324"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147324"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnyValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span> </span><span class="annot"><span class="annottext">AnyValue -&gt; (AnyValue -&gt; AnyValue) -&gt; AnyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;stringValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.stringValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Text -&gt; Text -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147324"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Vector Text -&gt; Vector AnyValue)
-&gt; (AttrVals Text -&gt; Vector Text)
-&gt; AttrVals Text
-&gt; Vector AnyValue
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Text -&gt; Vector Text
forall a. AttrVals a -&gt; Vector a
</span><span class="hs-identifier hs-var">unAttrVals</span></span><span>
</span><span id="line-1235"></span><span>
</span><span id="line-1236"></span><span>    </span><span class="annot"><a href="#local-6989586621679147307"><span class="hs-identifier hs-type">convertBoolArrayAttrVals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrVals</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.AnyValue</span></span><span>
</span><span id="line-1237"></span><span>    </span><span id="local-6989586621679147307"><span class="annot"><span class="annottext">convertBoolArrayAttrVals :: AttrVals Bool -&gt; Vector AnyValue
</span><a href="#local-6989586621679147307"><span class="hs-identifier hs-var hs-var">convertBoolArrayAttrVals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1238"></span><span>      </span><span class="annot"><span class="annottext">(Bool -&gt; AnyValue) -&gt; Vector Bool -&gt; Vector AnyValue
forall a b. (a -&gt; b) -&gt; Vector a -&gt; Vector b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147326"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147326"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnyValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span> </span><span class="annot"><span class="annottext">AnyValue -&gt; (AnyValue -&gt; AnyValue) -&gt; AnyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Bool
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;boolValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.boolValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Bool -&gt; Bool -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147326"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Vector Bool -&gt; Vector AnyValue)
-&gt; (AttrVals Bool -&gt; Vector Bool)
-&gt; AttrVals Bool
-&gt; Vector AnyValue
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Bool -&gt; Vector Bool
forall a. AttrVals a -&gt; Vector a
</span><span class="hs-identifier hs-var">unAttrVals</span></span><span>
</span><span id="line-1239"></span><span>
</span><span id="line-1240"></span><span>    </span><span class="annot"><a href="#local-6989586621679147315"><span class="hs-identifier hs-type">convertIntArrayAttrVals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrVals</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.AnyValue</span></span><span>
</span><span id="line-1241"></span><span>    </span><span id="local-6989586621679147315"><span class="annot"><span class="annottext">convertIntArrayAttrVals :: AttrVals Int64 -&gt; Vector AnyValue
</span><a href="#local-6989586621679147315"><span class="hs-identifier hs-var hs-var">convertIntArrayAttrVals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1242"></span><span>      </span><span class="annot"><span class="annottext">(Int64 -&gt; AnyValue) -&gt; Vector Int64 -&gt; Vector AnyValue
forall a b. (a -&gt; b) -&gt; Vector a -&gt; Vector b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147327"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679147327"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnyValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span> </span><span class="annot"><span class="annottext">AnyValue -&gt; (AnyValue -&gt; AnyValue) -&gt; AnyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Int64
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;intValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.intValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Int64 -&gt; Int64 -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679147327"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Vector Int64 -&gt; Vector AnyValue)
-&gt; (AttrVals Int64 -&gt; Vector Int64)
-&gt; AttrVals Int64
-&gt; Vector AnyValue
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Int64 -&gt; Vector Int64
forall a. AttrVals a -&gt; Vector a
</span><span class="hs-identifier hs-var">unAttrVals</span></span><span>
</span><span id="line-1243"></span><span>
</span><span id="line-1244"></span><span>    </span><span class="annot"><a href="#local-6989586621679147323"><span class="hs-identifier hs-type">convertDoubleArrayAttrVals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrVals</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.AnyValue</span></span><span>
</span><span id="line-1245"></span><span>    </span><span id="local-6989586621679147323"><span class="annot"><span class="annottext">convertDoubleArrayAttrVals :: AttrVals Double -&gt; Vector AnyValue
</span><a href="#local-6989586621679147323"><span class="hs-identifier hs-var hs-var">convertDoubleArrayAttrVals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1246"></span><span>      </span><span class="annot"><span class="annottext">(Double -&gt; AnyValue) -&gt; Vector Double -&gt; Vector AnyValue
forall a b. (a -&gt; b) -&gt; Vector a -&gt; Vector b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147328"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679147328"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnyValue
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span> </span><span class="annot"><span class="annottext">AnyValue -&gt; (AnyValue -&gt; AnyValue) -&gt; AnyValue
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Double
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;doubleValue&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.doubleValue</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity AnyValue Double
-&gt; Double -&gt; AnyValue -&gt; AnyValue
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679147328"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Vector Double -&gt; Vector AnyValue)
-&gt; (AttrVals Double -&gt; Vector Double)
-&gt; AttrVals Double
-&gt; Vector AnyValue
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AttrVals Double -&gt; Vector Double
forall a. AttrVals a -&gt; Vector a
</span><span class="hs-identifier hs-var">unAttrVals</span></span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span>    </span><span class="annot"><a href="#local-6989586621679147225"><span class="hs-identifier hs-type">convertSpanStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanStatus</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Trace.Status</span></span><span>
</span><span id="line-1249"></span><span>    </span><span id="local-6989586621679147225"><span class="annot"><span class="annottext">convertSpanStatus :: SpanStatus -&gt; Status
</span><a href="#local-6989586621679147225"><span class="hs-identifier hs-var hs-var">convertSpanStatus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1250"></span><span>      </span><span class="annot"><span class="annottext">SpanStatus
</span><span class="hs-identifier hs-var">SpanStatusUnset</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1251"></span><span>        </span><span class="annot"><span class="annottext">Status
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1252"></span><span>          </span><span class="annot"><span class="annottext">Status -&gt; (Status -&gt; Status) -&gt; Status
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Status'StatusCode
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;code&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.code</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Status'StatusCode
-&gt; Status'StatusCode -&gt; Status -&gt; Status
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Status'StatusCode
</span><span class="hs-identifier hs-var">OTLP.Trace.Status'STATUS_CODE_UNSET</span></span><span>
</span><span id="line-1253"></span><span>      </span><span class="annot"><span class="annottext">SpanStatus
</span><span class="hs-identifier hs-var">SpanStatusOk</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1254"></span><span>        </span><span class="annot"><span class="annottext">Status
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1255"></span><span>          </span><span class="annot"><span class="annottext">Status -&gt; (Status -&gt; Status) -&gt; Status
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Status'StatusCode
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;code&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.code</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Status'StatusCode
-&gt; Status'StatusCode -&gt; Status -&gt; Status
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Status'StatusCode
</span><span class="hs-identifier hs-var">OTLP.Trace.Status'STATUS_CODE_OK</span></span><span>
</span><span id="line-1256"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SpanStatusError</span></span><span> </span><span id="local-6989586621679147334"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147334"><span class="hs-identifier hs-var">errText</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1257"></span><span>        </span><span class="annot"><span class="annottext">Status
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1258"></span><span>          </span><span class="annot"><span class="annottext">Status -&gt; (Status -&gt; Status) -&gt; Status
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Status'StatusCode
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;code&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.code</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Status'StatusCode
-&gt; Status'StatusCode -&gt; Status -&gt; Status
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Status'StatusCode
</span><span class="hs-identifier hs-var">OTLP.Trace.Status'STATUS_CODE_ERROR</span></span><span>
</span><span id="line-1259"></span><span>          </span><span class="annot"><span class="annottext">Status -&gt; (Status -&gt; Status) -&gt; Status
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;message&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Trace.message</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity Status Text -&gt; Text -&gt; Status -&gt; Status
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147334"><span class="hs-identifier hs-var">errText</span></a></span><span>
</span><span id="line-1260"></span><span>
</span><span id="line-1261"></span><span>    </span><span class="annot"><a href="#local-6989586621679147209"><span class="hs-identifier hs-type">convertSpanKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanKind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Trace.Span'SpanKind</span></span><span>
</span><span id="line-1262"></span><span>    </span><span id="local-6989586621679147209"><span class="annot"><span class="annottext">convertSpanKind :: SpanKind -&gt; Span'SpanKind
</span><a href="#local-6989586621679147209"><span class="hs-identifier hs-var hs-var">convertSpanKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1263"></span><span>      </span><span class="annot"><span class="annottext">SpanKind
</span><span class="hs-identifier hs-var">SpanKindServer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Span'SpanKind
</span><span class="hs-identifier hs-var">OTLP.Trace.Span'SPAN_KIND_SERVER</span></span><span>
</span><span id="line-1264"></span><span>      </span><span class="annot"><span class="annottext">SpanKind
</span><span class="hs-identifier hs-var">SpanKindClient</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Span'SpanKind
</span><span class="hs-identifier hs-var">OTLP.Trace.Span'SPAN_KIND_CLIENT</span></span><span>
</span><span id="line-1265"></span><span>      </span><span class="annot"><span class="annottext">SpanKind
</span><span class="hs-identifier hs-var">SpanKindProducer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Span'SpanKind
</span><span class="hs-identifier hs-var">OTLP.Trace.Span'SPAN_KIND_PRODUCER</span></span><span>
</span><span id="line-1266"></span><span>      </span><span class="annot"><span class="annottext">SpanKind
</span><span class="hs-identifier hs-var">SpanKindConsumer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Span'SpanKind
</span><span class="hs-identifier hs-var">OTLP.Trace.Span'SPAN_KIND_CONSUMER</span></span><span>
</span><span id="line-1267"></span><span>      </span><span class="annot"><span class="annottext">SpanKind
</span><span class="hs-identifier hs-var">SpanKindInternal</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Span'SpanKind
</span><span class="hs-identifier hs-var">OTLP.Trace.Span'SPAN_KIND_INTERNAL</span></span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span>    </span><span class="annot"><a href="#local-6989586621679147189"><span class="hs-identifier hs-type">convertInstScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InstrumentationScope</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OTLP.Common.InstrumentationScope</span></span><span>
</span><span id="line-1270"></span><span>    </span><span id="local-6989586621679147189"><span class="annot"><span class="annottext">convertInstScope :: InstrumentationScope -&gt; InstrumentationScope
</span><a href="#local-6989586621679147189"><span class="hs-identifier hs-var hs-var">convertInstScope</span></a></span></span><span> </span><span id="local-6989586621679147347"><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679147347"><span class="hs-identifier hs-var">instScope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1271"></span><span>      </span><span class="hs-comment">-- N.B. There are 'attributes' and 'droppedAttributesCount' fields available too.</span><span>
</span><span id="line-1272"></span><span>      </span><span class="annot"><span class="annottext">InstrumentationScope
forall msg. Message msg =&gt; msg
</span><span class="hs-identifier hs-var">ProtoLens.defMessage</span></span><span>
</span><span id="line-1273"></span><span>        </span><span class="annot"><span class="annottext">InstrumentationScope
-&gt; (InstrumentationScope -&gt; InstrumentationScope)
-&gt; InstrumentationScope
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity InstrumentationScope Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;name&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.name</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity InstrumentationScope Text
-&gt; Text -&gt; InstrumentationScope -&gt; InstrumentationScope
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">InstrumentationScopeName -&gt; Text
</span><span class="hs-identifier hs-var">unInstrumentationScopeName</span></span><span> </span><span class="annot"><span class="annottext">InstrumentationScopeName
</span><a href="#local-6989586621679147349"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1274"></span><span>        </span><span class="annot"><span class="annottext">InstrumentationScope
-&gt; (InstrumentationScope -&gt; InstrumentationScope)
-&gt; InstrumentationScope
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(InstrumentationScope -&gt; InstrumentationScope)
-&gt; (Version -&gt; InstrumentationScope -&gt; InstrumentationScope)
-&gt; Maybe Version
-&gt; InstrumentationScope
-&gt; InstrumentationScope
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">InstrumentationScope -&gt; InstrumentationScope
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679147350"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679147350"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LensLike' Identity InstrumentationScope Text
forall (f :: * -&gt; *) s a.
(Functor f, HasField s &quot;version&quot; a) =&gt;
LensLike' f s a
</span><span class="hs-identifier hs-var">OTLP.Common.version</span></span><span> </span><span class="annot"><span class="annottext">LensLike' Identity InstrumentationScope Text
-&gt; Text -&gt; InstrumentationScope -&gt; InstrumentationScope
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Version -&gt; Text
</span><span class="hs-identifier hs-var">unVersion</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621679147350"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Version
</span><a href="#local-6989586621679147353"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-1275"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1276"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">InstrumentationScope</span></span><span>
</span><span id="line-1277"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">instrumentationScopeName :: InstrumentationScope -&gt; InstrumentationScopeName
</span><span class="hs-identifier hs-var">instrumentationScopeName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147349"><span class="annot"><span class="annottext">InstrumentationScopeName
</span><a href="#local-6989586621679147349"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1278"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">instrumentationScopeVersion :: InstrumentationScope -&gt; Maybe Version
</span><span class="hs-identifier hs-var">instrumentationScopeVersion</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147353"><span class="annot"><span class="annottext">Maybe Version
</span><a href="#local-6989586621679147353"><span class="hs-identifier hs-var">version</span></a></span></span><span>
</span><span id="line-1279"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstrumentationScope
</span><a href="#local-6989586621679147347"><span class="hs-identifier hs-var">instScope</span></a></span><span>
</span><span id="line-1280"></span><span>
</span><span id="line-1281"></span><span>    </span><span id="local-6989586621679147199"><span class="annot"><span class="annottext">bytesBuilderToBS8 :: Builder -&gt; ByteString
</span><a href="#local-6989586621679147199"><span class="hs-identifier hs-var hs-var">bytesBuilderToBS8</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">ByteString.Char8.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; (Builder -&gt; ByteString) -&gt; Builder -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><span class="hs-identifier hs-var">Builder.toLazyByteString</span></span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span>  </span><span id="local-6989586621679147076"><span class="annot"><span class="annottext">loggingMeta :: [SeriesElem]
</span><a href="#local-6989586621679147076"><span class="hs-identifier hs-var hs-var">loggingMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1284"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanExporter&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-1285"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;otlp&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-1286"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1287"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1288"></span><span>
</span><span id="line-1289"></span><span>  </span><span id="local-6989586621679147097"><span class="annot"><span class="annottext">redactedReqHeaders :: Set HeaderName
</span><a href="#local-6989586621679147097"><span class="hs-identifier hs-var hs-var">redactedReqHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HeaderName] -&gt; Set HeaderName
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[HeaderName]
</span><a href="#local-6989586621679147368"><span class="hs-identifier hs-var">redactedReqHeadersList</span></a></span><span>
</span><span id="line-1290"></span><span>  </span><span id="local-6989586621679147098"><span class="annot"><span class="annottext">redactedRespHeaders :: Set HeaderName
</span><a href="#local-6989586621679147098"><span class="hs-identifier hs-var hs-var">redactedRespHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HeaderName] -&gt; Set HeaderName
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[HeaderName]
</span><a href="#local-6989586621679147369"><span class="hs-identifier hs-var">redactedRespHeadersList</span></a></span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterSpec"><span class="hs-identifier hs-type">OTLPSpanExporterSpec</span></a></span><span>
</span><span id="line-1293"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecManager :: OTLPSpanExporterSpec -&gt; Manager
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecManager"><span class="hs-identifier hs-var">otlpSpanExporterSpecManager</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147107"><span class="annot"><span class="annottext">Manager
</span><a href="#local-6989586621679147107"><span class="hs-identifier hs-var">manager</span></a></span></span><span>
</span><span id="line-1294"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecEndpoint :: OTLPSpanExporterSpec -&gt; URI
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecEndpoint"><span class="hs-identifier hs-var">otlpSpanExporterSpecEndpoint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147036"><span class="annot"><span class="annottext">URI
</span><a href="#local-6989586621679147036"><span class="hs-identifier hs-var">endpoint</span></a></span></span><span>
</span><span id="line-1295"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecTimeout :: OTLPSpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecTimeout"><span class="hs-identifier hs-var">otlpSpanExporterSpecTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147069"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147069"><span class="hs-identifier hs-var">exportTimeout</span></a></span></span><span>
</span><span id="line-1296"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecProtocol :: OTLPSpanExporterSpec -&gt; OTLPProtocol
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecProtocol"><span class="hs-identifier hs-var">otlpSpanExporterSpecProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147370"><span class="annot"><span class="annottext">OTLPProtocol
</span><a href="#local-6989586621679147370"><span class="hs-identifier hs-var">_protocol</span></a></span></span><span> </span><span class="hs-comment">-- N.B. Only http/protobuf is supported</span><span>
</span><span id="line-1297"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecHeaders :: OTLPSpanExporterSpec -&gt; [Header]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecHeaders"><span class="hs-identifier hs-var">otlpSpanExporterSpecHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147043"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621679147043"><span class="hs-identifier hs-var">headers</span></a></span></span><span>
</span><span id="line-1298"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecRedactedRequestHeaders :: OTLPSpanExporterSpec -&gt; [HeaderName]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRedactedRequestHeaders"><span class="hs-identifier hs-var">otlpSpanExporterSpecRedactedRequestHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147368"><span class="annot"><span class="annottext">[HeaderName]
</span><a href="#local-6989586621679147368"><span class="hs-identifier hs-var">redactedReqHeadersList</span></a></span></span><span>
</span><span id="line-1299"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecRedactedResponseHeaders :: OTLPSpanExporterSpec -&gt; [HeaderName]
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRedactedResponseHeaders"><span class="hs-identifier hs-var">otlpSpanExporterSpecRedactedResponseHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147369"><span class="annot"><span class="annottext">[HeaderName]
</span><a href="#local-6989586621679147369"><span class="hs-identifier hs-var">redactedRespHeadersList</span></a></span></span><span>
</span><span id="line-1300"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecWorkerQueueSize :: OTLPSpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecWorkerQueueSize"><span class="hs-identifier hs-var">otlpSpanExporterSpecWorkerQueueSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147064"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147064"><span class="hs-identifier hs-var">queueSize</span></a></span></span><span>
</span><span id="line-1301"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecWorkerCount :: OTLPSpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecWorkerCount"><span class="hs-identifier hs-var">otlpSpanExporterSpecWorkerCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147065"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147065"><span class="hs-identifier hs-var">workerCount</span></a></span></span><span>
</span><span id="line-1302"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">otlpSpanExporterSpecRetryPolicy :: OTLPSpanExporterSpec -&gt; RetryPolicyM IO
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterSpecRetryPolicy"><span class="hs-identifier hs-var">otlpSpanExporterSpecRetryPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147104"><span class="annot"><span class="annottext">RetryPolicyM IO
</span><a href="#local-6989586621679147104"><span class="hs-identifier hs-var">retryPolicy</span></a></span></span><span>
</span><span id="line-1303"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterSpec
</span><a href="#local-6989586621679147032"><span class="hs-identifier hs-var">otlpSpanExporterSpec</span></a></span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span class="hs-keyword">data</span><span> </span><span id="OTLPProtocol"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPProtocol"><span class="hs-identifier hs-var">OTLPProtocol</span></a></span></span><span>
</span><span id="line-1306"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="OTLPProtocolHTTPProtobuf"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPProtocolHTTPProtobuf"><span class="hs-identifier hs-var">OTLPProtocolHTTPProtobuf</span></a></span></span><span>
</span><span id="line-1307"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679147373"><span id="local-6989586621679147375"><span class="annot"><span class="annottext">OTLPProtocol -&gt; OTLPProtocol -&gt; Bool
(OTLPProtocol -&gt; OTLPProtocol -&gt; Bool)
-&gt; (OTLPProtocol -&gt; OTLPProtocol -&gt; Bool) -&gt; Eq OTLPProtocol
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: OTLPProtocol -&gt; OTLPProtocol -&gt; Bool
== :: OTLPProtocol -&gt; OTLPProtocol -&gt; Bool
$c/= :: OTLPProtocol -&gt; OTLPProtocol -&gt; Bool
/= :: OTLPProtocol -&gt; OTLPProtocol -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147379"><span id="local-6989586621679147381"><span id="local-6989586621679147385"><span class="annot"><span class="annottext">Int -&gt; OTLPProtocol -&gt; ShowS
[OTLPProtocol] -&gt; ShowS
OTLPProtocol -&gt; [Char]
(Int -&gt; OTLPProtocol -&gt; ShowS)
-&gt; (OTLPProtocol -&gt; [Char])
-&gt; ([OTLPProtocol] -&gt; ShowS)
-&gt; Show OTLPProtocol
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; OTLPProtocol -&gt; ShowS
showsPrec :: Int -&gt; OTLPProtocol -&gt; ShowS
$cshow :: OTLPProtocol -&gt; [Char]
show :: OTLPProtocol -&gt; [Char]
$cshowList :: [OTLPProtocol] -&gt; ShowS
showList :: [OTLPProtocol] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span>
</span><span id="line-1309"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#httpProtobufProtocol"><span class="hs-identifier hs-type">httpProtobufProtocol</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPProtocol"><span class="hs-identifier hs-type">OTLPProtocol</span></a></span><span>
</span><span id="line-1310"></span><span id="httpProtobufProtocol"><span class="annot"><span class="annottext">httpProtobufProtocol :: OTLPProtocol
</span><a href="OTel.SDK.Trace.Internal.html#httpProtobufProtocol"><span class="hs-identifier hs-var hs-var">httpProtobufProtocol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OTLPProtocol
</span><a href="OTel.SDK.Trace.Internal.html#OTLPProtocolHTTPProtobuf"><span class="hs-identifier hs-var">OTLPProtocolHTTPProtobuf</span></a></span><span>
</span><span id="line-1311"></span><span>
</span><span id="line-1312"></span><span class="annot"><span class="hs-comment">-- | Little ad-hoc helper type for use in 'otlpSpanExporterIO'.</span></span><span>
</span><span id="line-1313"></span><span class="hs-keyword">data</span><span> </span><span id="OTLPSpanExporterItem"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterItem"><span class="hs-identifier hs-var">OTLPSpanExporterItem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OTLPSpanExporterItem"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterItem"><span class="hs-identifier hs-var">OTLPSpanExporterItem</span></a></span></span><span>
</span><span id="line-1314"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="otlpSpanExporterItemBatch"><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; Batch (Span Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemBatch"><span class="hs-identifier hs-var hs-var">otlpSpanExporterItemBatch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterItemCallback"><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; SpanExportResult -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemCallback"><span class="hs-identifier hs-var hs-var">otlpSpanExporterItemCallback</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="otlpSpanExporterResource"><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; Resource Attrs
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterResource"><span class="hs-identifier hs-var hs-var">otlpSpanExporterResource</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span>
</span><span id="line-1317"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1318"></span><span>
</span><span id="line-1319"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679147389"><span id="local-6989586621679147392"><span id="local-6989586621679147395"><span id="local-6989586621679147398"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OTLPSpanExporterItem"><span class="hs-identifier hs-type">OTLPSpanExporterItem</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1320"></span><span>  </span><span id="local-6989586621679147404"><span class="annot"><span class="annottext">toJSON :: OTLPSpanExporterItem -&gt; Value
</span><a href="#local-6989586621679147404"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs) -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Batch (Span Attrs) -&gt; Value)
-&gt; (OTLPSpanExporterItem -&gt; Batch (Span Attrs))
-&gt; OTLPSpanExporterItem
-&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OTLPSpanExporterItem -&gt; Batch (Span Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#otlpSpanExporterItemBatch"><span class="hs-identifier hs-var">otlpSpanExporterItemBatch</span></a></span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#stmSpanExporter"><span class="hs-identifier hs-type">stmSpanExporter</span></a></span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145284"><span class="annot"><a href="#local-6989586621679145284"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1324"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMQueue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1326"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145284"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1327"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145284"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1328"></span><span id="stmSpanExporter"><span class="annot"><span class="annottext">stmSpanExporter :: forall a.
TMQueue (Span Attrs)
-&gt; Logger -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#stmSpanExporter"><span class="hs-identifier hs-var hs-var">stmSpanExporter</span></a></span></span><span> </span><span id="local-6989586621679147416"><span class="annot"><span class="annottext">TMQueue (Span Attrs)
</span><a href="#local-6989586621679147416"><span class="hs-identifier hs-var">queue</span></a></span></span><span> </span><span id="local-6989586621679147417"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147417"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1329"></span><span>  </span><span class="annot"><span class="annottext">SpanExporterSpec -&gt; (SpanExporterSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SpanExporterSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier hs-var">defaultSpanExporterSpec</span></a></span><span>
</span><span id="line-1330"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecName"><span class="hs-identifier hs-var">spanExporterSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;stm&quot;</span></span><span>
</span><span id="line-1331"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecExport"><span class="hs-identifier hs-var">spanExporterSpecExport</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147418"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679147418"><span class="hs-identifier hs-var">spans</span></a></span></span><span> </span><span id="local-6989586621679147419"><span class="annot"><span class="annottext">SpanExportResult -&gt; IO ()
</span><a href="#local-6989586621679147419"><span class="hs-identifier hs-var">onSpansExported</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1332"></span><span>        </span><span class="annot"><span class="annottext">SpanExporterM (SpanExporterM ()) -&gt; SpanExporterM ()
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(SpanExporterM (SpanExporterM ()) -&gt; SpanExporterM ())
-&gt; SpanExporterM (SpanExporterM ()) -&gt; SpanExporterM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (SpanExporterM ()) -&gt; SpanExporterM (SpanExporterM ())
forall a. IO a -&gt; SpanExporterM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (SpanExporterM ()) -&gt; SpanExporterM (SpanExporterM ()))
-&gt; IO (SpanExporterM ()) -&gt; SpanExporterM (SpanExporterM ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">STM (SpanExporterM ()) -&gt; IO (SpanExporterM ())
forall a. STM a -&gt; IO a
</span><span class="hs-identifier hs-var">atomically</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1333"></span><span>          </span><span class="annot"><span class="annottext">(Span Attrs -&gt; STM ()) -&gt; Batch (Span Attrs) -&gt; STM ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">traverse_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMQueue (Span Attrs) -&gt; Span Attrs -&gt; STM ()
forall a. TMQueue a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">writeTMQueue</span></span><span> </span><span class="annot"><span class="annottext">TMQueue (Span Attrs)
</span><a href="#local-6989586621679147416"><span class="hs-identifier hs-var">queue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679147418"><span class="hs-identifier hs-var">spans</span></a></span><span>
</span><span id="line-1334"></span><span>          </span><span class="annot"><span class="annottext">SpanExporterM () -&gt; STM (SpanExporterM ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SpanExporterM () -&gt; STM (SpanExporterM ()))
-&gt; SpanExporterM () -&gt; STM (SpanExporterM ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; SpanExporterM ()
forall a. IO a -&gt; SpanExporterM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SpanExporterM ()) -&gt; IO () -&gt; SpanExporterM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpanExportResult -&gt; IO ()
</span><a href="#local-6989586621679147419"><span class="hs-identifier hs-var">onSpansExported</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#SpanExportResultSuccess"><span class="hs-identifier hs-var">SpanExportResultSuccess</span></a></span><span>
</span><span id="line-1335"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdown"><span class="hs-identifier hs-var">spanExporterSpecShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1336"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">atomically</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">closeTMQueue</span></span><span> </span><span class="annot"><a href="#local-6989586621679147416"><span class="hs-identifier hs-type">queue</span></a></span><span>
</span><span id="line-1337"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1338"></span><span>
</span><span id="line-1339"></span><span class="hs-keyword">data</span><span> </span><span id="SpanExporterSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-var">SpanExporterSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpanExporterSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-var">SpanExporterSpec</span></a></span></span><span>
</span><span id="line-1340"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="spanExporterSpecName"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecName"><span class="hs-identifier hs-var hs-var">spanExporterSpecName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1341"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecExport"><span class="annot"><span class="annottext">SpanExporterSpec
-&gt; Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ())
-&gt; SpanExporterM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecExport"><span class="hs-identifier hs-var hs-var">spanExporterSpecExport</span></a></span></span><span>
</span><span id="line-1342"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1344"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-type">SpanExporterM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecShutdown"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; SpanExporterM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdown"><span class="hs-identifier hs-var hs-var">spanExporterSpecShutdown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-type">SpanExporterM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1346"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecShutdownTimeout"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdownTimeout"><span class="hs-identifier hs-var hs-var">spanExporterSpecShutdownTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1347"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecForceFlush"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; SpanExporterM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecForceFlush"><span class="hs-identifier hs-var hs-var">spanExporterSpecForceFlush</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-type">SpanExporterM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1348"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecForceFlushTimeout"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecForceFlushTimeout"><span class="hs-identifier hs-var hs-var">spanExporterSpecForceFlushTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1349"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecOnTimeout"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; OnTimeout ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecOnTimeout"><span class="hs-identifier hs-var hs-var">spanExporterSpecOnTimeout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnTimeout</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1350"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="spanExporterSpecOnException"><span class="annot"><span class="annottext">SpanExporterSpec -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecOnException"><span class="hs-identifier hs-var hs-var">spanExporterSpecOnException</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1352"></span><span>
</span><span id="line-1353"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier hs-type">defaultSpanExporterSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span>
</span><span id="line-1354"></span><span id="defaultSpanExporterSpec"><span class="annot"><span class="annottext">defaultSpanExporterSpec :: SpanExporterSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSpanExporterSpec"><span class="hs-identifier hs-var hs-var">defaultSpanExporterSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1355"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterSpec"><span class="hs-identifier hs-type">SpanExporterSpec</span></a></span><span>
</span><span id="line-1356"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecName"><span class="hs-identifier hs-var">spanExporterSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;default&quot;</span></span><span>
</span><span id="line-1357"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecExport :: Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ()) -&gt; SpanExporterM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecExport"><span class="hs-identifier hs-var">spanExporterSpecExport</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
-&gt; (SpanExportResult -&gt; IO ()) -&gt; SpanExporterM ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1358"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecShutdown :: SpanExporterM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdown"><span class="hs-identifier hs-var">spanExporterSpecShutdown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanExporterM ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1359"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecShutdownTimeout :: Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecShutdownTimeout"><span class="hs-identifier hs-var">spanExporterSpecShutdownTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30_000_000</span></span><span>
</span><span id="line-1360"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecForceFlush :: SpanExporterM ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecForceFlush"><span class="hs-identifier hs-var">spanExporterSpecForceFlush</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanExporterM ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1361"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecForceFlushTimeout :: Int
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecForceFlushTimeout"><span class="hs-identifier hs-var">spanExporterSpecForceFlushTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30_000_000</span></span><span>
</span><span id="line-1362"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecOnTimeout :: OnTimeout ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecOnTimeout"><span class="hs-identifier hs-var">spanExporterSpecOnTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1363"></span><span>        </span><span id="local-6989586621679147420"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147420"><span class="hs-identifier hs-var">timeoutMicros</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnTimeout Int
</span><span class="hs-identifier hs-var">askTimeoutMicros</span></span><span>
</span><span id="line-1364"></span><span>        </span><span id="local-6989586621679147421"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147421"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnTimeout [SeriesElem]
</span><span class="hs-identifier hs-var">askTimeoutMetadata</span></span><span>
</span><span id="line-1365"></span><span>        </span><span class="annot"><span class="annottext">Message -&gt; OnTimeout ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnTimeout ()) -&gt; Message -&gt; OnTimeout ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Action did not complete within timeout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1366"></span><span>          </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;timeoutMicros&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147420"><span class="hs-identifier hs-var">timeoutMicros</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147421"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1367"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spanExporterSpecOnException :: OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#spanExporterSpecOnException"><span class="hs-identifier hs-var">spanExporterSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1368"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679147433"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147433"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException SomeException
</span><span class="hs-identifier hs-var">askException</span></span><span>
</span><span id="line-1369"></span><span>        </span><span id="local-6989586621679147434"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147434"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException [SeriesElem]
</span><span class="hs-identifier hs-var">askExceptionMetadata</span></span><span>
</span><span id="line-1370"></span><span>        </span><span class="annot"><span class="annottext">Message -&gt; OnException ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnException ()) -&gt; Message -&gt; OnException ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Ignoring exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1371"></span><span>          </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147433"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147434"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1372"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1373"></span><span>
</span><span id="line-1374"></span><span class="hs-keyword">data</span><span> </span><span id="Sampler"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-var">Sampler</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Sampler"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-var">Sampler</span></a></span></span><span>
</span><span id="line-1375"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="samplerName"><span class="annot"><span class="annottext">Sampler -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerName"><span class="hs-identifier hs-var hs-var">samplerName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1376"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerDescription"><span class="annot"><span class="annottext">Sampler -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerDescription"><span class="hs-identifier hs-var hs-var">samplerDescription</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1377"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerShouldSample"><span class="annot"><span class="annottext">Sampler -&gt; SamplerInput -&gt; IO SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerShouldSample"><span class="hs-identifier hs-var hs-var">samplerShouldSample</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier hs-type">SamplerInput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-type">SamplingResult</span></a></span><span>
</span><span id="line-1378"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildSampler"><span class="hs-identifier hs-type">buildSampler</span></a></span><span>
</span><span id="line-1381"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144952"><span class="annot"><a href="#local-6989586621679144952"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-1382"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144952"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1383"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1384"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1385"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679144952"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-type">Sampler</span></a></span><span>
</span><span id="line-1386"></span><span id="buildSampler"><span class="annot"><span class="annottext">buildSampler :: forall (m :: * -&gt; *).
MonadIO m =&gt;
Logger -&gt; SamplerSpec -&gt; m Sampler
</span><a href="OTel.SDK.Trace.Internal.html#buildSampler"><span class="hs-identifier hs-var hs-var">buildSampler</span></a></span></span><span> </span><span id="local-6989586621679147467"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147467"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679147468"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147468"><span class="hs-identifier hs-var">samplerSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1387"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT m () -&gt; Logger -&gt; m ())
-&gt; Logger -&gt; LoggingT m () -&gt; m ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT m () -&gt; Logger -&gt; m ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147467"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1388"></span><span>    </span><span class="annot"><span class="annottext">Message -&gt; LoggingT m ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT m ()) -&gt; Message -&gt; LoggingT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Building sampler&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1389"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147469"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span>
</span><span id="line-1390"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;description&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147470"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span>
</span><span id="line-1391"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1392"></span><span>  </span><span class="annot"><span class="annottext">Sampler -&gt; m Sampler
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Sampler"><span class="hs-identifier hs-type">Sampler</span></a></span><span>
</span><span id="line-1393"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">samplerName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerName"><span class="hs-identifier hs-var">samplerName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147469"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span>
</span><span id="line-1394"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerDescription :: Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerDescription"><span class="hs-identifier hs-var">samplerDescription</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147470"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span>
</span><span id="line-1395"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerShouldSample :: SamplerInput -&gt; IO SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerShouldSample"><span class="hs-identifier hs-var">samplerShouldSample</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147471"><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147471"><span class="hs-identifier hs-var">samplerInput</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1396"></span><span>        </span><span class="annot"><span class="annottext">Logger
-&gt; OnException SamplingResult
-&gt; [SeriesElem]
-&gt; SamplerM SamplingResult
-&gt; IO SamplingResult
forall a.
Logger -&gt; OnException a -&gt; [SeriesElem] -&gt; SamplerM a -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSamplerM"><span class="hs-identifier hs-var">runSamplerM</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147467"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">OnException SamplingResult
</span><a href="#local-6989586621679147472"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147473"><span class="hs-identifier hs-var">metaShouldSample</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1397"></span><span>          </span><span class="annot"><span class="annottext">SamplerInput -&gt; SamplerM SamplingResult
</span><a href="#local-6989586621679147474"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147471"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1398"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1399"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1400"></span><span>  </span><span id="local-6989586621679147473"><span class="annot"><span class="annottext">metaShouldSample :: [SeriesElem]
</span><a href="#local-6989586621679147473"><span class="hs-identifier hs-var hs-var">metaShouldSample</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679147476"><span class="hs-identifier hs-var">mkLoggingMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;shouldSample&quot;</span></span><span>
</span><span id="line-1401"></span><span>
</span><span id="line-1402"></span><span>  </span><span class="annot"><a href="#local-6989586621679147476"><span class="hs-identifier hs-type">mkLoggingMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1403"></span><span>  </span><span id="local-6989586621679147476"><span class="annot"><span class="annottext">mkLoggingMeta :: Text -&gt; [SeriesElem]
</span><a href="#local-6989586621679147476"><span class="hs-identifier hs-var hs-var">mkLoggingMeta</span></a></span></span><span> </span><span id="local-6989586621679147477"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147477"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1404"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;sampler&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147469"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;description&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147470"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span>
</span><span id="line-1407"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147477"><span class="hs-identifier hs-var">method</span></a></span><span>
</span><span id="line-1408"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1409"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1410"></span><span>
</span><span id="line-1411"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1412"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679147469"><span class="annot"><span class="annottext">Text
samplerSpecName :: Text
samplerSpecName :: SamplerSpec -&gt; Text
</span><a href="#local-6989586621679147469"><span class="hs-identifier hs-var hs-var">samplerSpecName</span></a></span></span><span>
</span><span id="line-1413"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147470"><span class="annot"><span class="annottext">Text
samplerSpecDescription :: Text
samplerSpecDescription :: SamplerSpec -&gt; Text
</span><a href="#local-6989586621679147470"><span class="hs-identifier hs-var hs-var">samplerSpecDescription</span></a></span></span><span>
</span><span id="line-1414"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147474"><span class="annot"><span class="annottext">SamplerInput -&gt; SamplerM SamplingResult
samplerSpecShouldSample :: SamplerInput -&gt; SamplerM SamplingResult
samplerSpecShouldSample :: SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="#local-6989586621679147474"><span class="hs-identifier hs-var hs-var">samplerSpecShouldSample</span></a></span></span><span>
</span><span id="line-1415"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerSpecOnException :: SamplerSpec -&gt; OnException SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecOnException"><span class="hs-identifier hs-var">samplerSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147472"><span class="annot"><span class="annottext">OnException SamplingResult
</span><a href="#local-6989586621679147472"><span class="hs-identifier hs-var">onEx</span></a></span></span><span>
</span><span id="line-1416"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147468"><span class="hs-identifier hs-var">samplerSpec</span></a></span><span>
</span><span id="line-1417"></span><span>
</span><span id="line-1418"></span><span class="hs-keyword">data</span><span> </span><span id="SamplerSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-var">SamplerSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SamplerSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-var">SamplerSpec</span></a></span></span><span>
</span><span id="line-1419"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="samplerSpecName"><span class="annot"><span class="annottext">SamplerSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecName"><span class="hs-identifier hs-var hs-var">samplerSpecName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1420"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerSpecDescription"><span class="annot"><span class="annottext">SamplerSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecDescription"><span class="hs-identifier hs-var hs-var">samplerSpecDescription</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1421"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerSpecShouldSample"><span class="annot"><span class="annottext">SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var hs-var">samplerSpecShouldSample</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier hs-type">SamplerInput</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerM"><span class="hs-identifier hs-type">SamplerM</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-type">SamplingResult</span></a></span><span>
</span><span id="line-1422"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerSpecOnException"><span class="annot"><span class="annottext">SamplerSpec -&gt; OnException SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecOnException"><span class="hs-identifier hs-var hs-var">samplerSpecOnException</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-type">SamplingResult</span></a></span><span>
</span><span id="line-1423"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1424"></span><span>
</span><span id="line-1425"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSamplerSpec"><span class="hs-identifier hs-type">defaultSamplerSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1426"></span><span id="defaultSamplerSpec"><span class="annot"><span class="annottext">defaultSamplerSpec :: SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSamplerSpec"><span class="hs-identifier hs-var hs-var">defaultSamplerSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler%27"><span class="hs-identifier hs-var">alwaysOffSampler'</span></a></span><span>
</span><span id="line-1427"></span><span>
</span><span id="line-1428"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler"><span class="hs-identifier hs-type">alwaysOnSampler</span></a></span><span>
</span><span id="line-1429"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147484"><span class="annot"><a href="#local-6989586621679147484"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1430"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1431"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147484"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147484"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1433"></span><span id="alwaysOnSampler"><span class="annot"><span class="annottext">alwaysOnSampler :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler"><span class="hs-identifier hs-var hs-var">alwaysOnSampler</span></a></span></span><span> </span><span id="local-6989586621679147485"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147485"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplerSpec -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler%27"><span class="hs-identifier hs-var">alwaysOnSampler'</span></a></span><span>
</span><span id="line-1434"></span><span>
</span><span id="line-1435"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler%27"><span class="hs-identifier hs-type">alwaysOnSampler'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1436"></span><span id="alwaysOnSampler%27"><span class="annot"><span class="annottext">alwaysOnSampler' :: SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler%27"><span class="hs-identifier hs-var hs-var">alwaysOnSampler'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1437"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SamplingDecision -&gt; SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#constDecisionSampler"><span class="hs-identifier hs-var">constDecisionSampler</span></a></span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordAndSample"><span class="hs-identifier hs-var">SamplingDecisionRecordAndSample</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1438"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecName"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;AlwaysOn&quot;</span></span><span>
</span><span id="line-1439"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecDescription"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;AlwaysOnSampler&quot;</span></span><span>
</span><span id="line-1440"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1441"></span><span>
</span><span id="line-1442"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler"><span class="hs-identifier hs-type">alwaysOffSampler</span></a></span><span>
</span><span id="line-1443"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147487"><span class="annot"><a href="#local-6989586621679147487"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1444"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1445"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147487"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1446"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147487"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1447"></span><span id="alwaysOffSampler"><span class="annot"><span class="annottext">alwaysOffSampler :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler"><span class="hs-identifier hs-var hs-var">alwaysOffSampler</span></a></span></span><span> </span><span id="local-6989586621679147488"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147488"><span class="hs-identifier hs-var">_logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplerSpec -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler%27"><span class="hs-identifier hs-var">alwaysOffSampler'</span></a></span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler%27"><span class="hs-identifier hs-type">alwaysOffSampler'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1450"></span><span id="alwaysOffSampler%27"><span class="annot"><span class="annottext">alwaysOffSampler' :: SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler%27"><span class="hs-identifier hs-var hs-var">alwaysOffSampler'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1451"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SamplingDecision -&gt; SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#constDecisionSampler"><span class="hs-identifier hs-var">constDecisionSampler</span></a></span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionDrop"><span class="hs-identifier hs-var">SamplingDecisionDrop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1452"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecName"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;AlwaysOff&quot;</span></span><span>
</span><span id="line-1453"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecDescription"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;AlwaysOffSampler&quot;</span></span><span>
</span><span id="line-1454"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span class="hs-keyword">data</span><span> </span><span id="ParentBasedSamplerSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier hs-var">ParentBasedSamplerSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ParentBasedSamplerSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier hs-var">ParentBasedSamplerSpec</span></a></span></span><span>
</span><span id="line-1457"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="parentBasedSamplerSpecOnRoot"><span class="annot"><span class="annottext">ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRoot"><span class="hs-identifier hs-var hs-var">parentBasedSamplerSpecOnRoot</span></a></span></span><span>
</span><span id="line-1458"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147491"><span class="annot"><a href="#local-6989586621679147491"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147491"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147491"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1459"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="parentBasedSamplerSpecOnRemoteParentSampled"><span class="annot"><span class="annottext">ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRemoteParentSampled"><span class="hs-identifier hs-var hs-var">parentBasedSamplerSpecOnRemoteParentSampled</span></a></span></span><span>
</span><span id="line-1460"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147493"><span class="annot"><a href="#local-6989586621679147493"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147493"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147493"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1461"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="parentBasedSamplerSpecOnRemoteParentNotSampled"><span class="annot"><span class="annottext">ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRemoteParentNotSampled"><span class="hs-identifier hs-var hs-var">parentBasedSamplerSpecOnRemoteParentNotSampled</span></a></span></span><span>
</span><span id="line-1462"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147495"><span class="annot"><a href="#local-6989586621679147495"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147495"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147495"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1463"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="parentBasedSamplerSpecOnLocalParentSampled"><span class="annot"><span class="annottext">ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnLocalParentSampled"><span class="hs-identifier hs-var hs-var">parentBasedSamplerSpecOnLocalParentSampled</span></a></span></span><span>
</span><span id="line-1464"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147497"><span class="annot"><a href="#local-6989586621679147497"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147497"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147497"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1465"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="parentBasedSamplerSpecOnLocalParentNotSampled"><span class="annot"><span class="annottext">ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnLocalParentNotSampled"><span class="hs-identifier hs-var hs-var">parentBasedSamplerSpecOnLocalParentNotSampled</span></a></span></span><span>
</span><span id="line-1466"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679147499"><span class="annot"><a href="#local-6989586621679147499"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147499"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679147499"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1467"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1468"></span><span>
</span><span id="line-1469"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultParentBasedSamplerSpec"><span class="hs-identifier hs-type">defaultParentBasedSamplerSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier hs-type">ParentBasedSamplerSpec</span></a></span><span>
</span><span id="line-1470"></span><span id="defaultParentBasedSamplerSpec"><span class="annot"><span class="annottext">defaultParentBasedSamplerSpec :: ParentBasedSamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultParentBasedSamplerSpec"><span class="hs-identifier hs-var hs-var">defaultParentBasedSamplerSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1471"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier hs-type">ParentBasedSamplerSpec</span></a></span><span>
</span><span id="line-1472"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnRoot :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRoot"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnRoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler"><span class="hs-identifier hs-var">alwaysOffSampler</span></a></span><span>
</span><span id="line-1473"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnRemoteParentSampled :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRemoteParentSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnRemoteParentSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler"><span class="hs-identifier hs-var">alwaysOnSampler</span></a></span><span>
</span><span id="line-1474"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnRemoteParentNotSampled :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRemoteParentNotSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnRemoteParentNotSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler"><span class="hs-identifier hs-var">alwaysOffSampler</span></a></span><span>
</span><span id="line-1475"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnLocalParentSampled :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnLocalParentSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnLocalParentSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOnSampler"><span class="hs-identifier hs-var">alwaysOnSampler</span></a></span><span>
</span><span id="line-1476"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnLocalParentNotSampled :: forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnLocalParentNotSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnLocalParentNotSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#alwaysOffSampler"><span class="hs-identifier hs-var">alwaysOffSampler</span></a></span><span>
</span><span id="line-1477"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1478"></span><span>
</span><span id="line-1479"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#parentBasedSampler"><span class="hs-identifier hs-type">parentBasedSampler</span></a></span><span>
</span><span id="line-1480"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145311"><span class="annot"><a href="#local-6989586621679145311"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1481"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier hs-type">ParentBasedSamplerSpec</span></a></span><span>
</span><span id="line-1482"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1483"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145311"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1484"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145311"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1485"></span><span id="parentBasedSampler"><span class="annot"><span class="annottext">parentBasedSampler :: forall a.
ParentBasedSamplerSpec -&gt; Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSampler"><span class="hs-identifier hs-var hs-var">parentBasedSampler</span></a></span></span><span> </span><span id="local-6989586621679147512"><span class="annot"><span class="annottext">ParentBasedSamplerSpec
</span><a href="#local-6989586621679147512"><span class="hs-identifier hs-var">parentBasedSamplerSpec</span></a></span></span><span> </span><span id="local-6989586621679147513"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147513"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1486"></span><span>  </span><span class="annot"><span class="annottext">ContT a IO SamplerSpec -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall {k} (r :: k) (m :: k -&gt; *) a.
ContT r m a -&gt; (a -&gt; m r) -&gt; m r
</span><span class="hs-identifier hs-var">runContT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1487"></span><span>    </span><span id="local-6989586621679147514"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147514"><span class="hs-identifier hs-var">onRoot</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec)
-&gt; ((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147515"><span class="hs-identifier hs-var">withOnRoot</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147513"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-1488"></span><span>    </span><span id="local-6989586621679147516"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147516"><span class="hs-identifier hs-var">onRemoteParentSampled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec)
-&gt; ((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147517"><span class="hs-identifier hs-var">withOnRemoteParentSampled</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147513"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-1489"></span><span>    </span><span id="local-6989586621679147518"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147518"><span class="hs-identifier hs-var">onRemoteParentNotSampled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec)
-&gt; ((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147519"><span class="hs-identifier hs-var">withOnRemoteParentNotSampled</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147513"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-1490"></span><span>    </span><span id="local-6989586621679147520"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147520"><span class="hs-identifier hs-var">onLocalParentSampled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec)
-&gt; ((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147521"><span class="hs-identifier hs-var">withOnLocalParentSampled</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147513"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-1491"></span><span>    </span><span id="local-6989586621679147522"><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147522"><span class="hs-identifier hs-var">onLocalParentNotSampled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall {k} (r :: k) (m :: k -&gt; *) a.
((a -&gt; m r) -&gt; m r) -&gt; ContT r m a
</span><span class="hs-identifier hs-var">ContT</span></span><span> </span><span class="annot"><span class="annottext">(((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec)
-&gt; ((SamplerSpec -&gt; IO a) -&gt; IO a) -&gt; ContT a IO SamplerSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147523"><span class="hs-identifier hs-var">withOnLocalParentNotSampled</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147513"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679147524"><span class="annot"><span class="annottext">shouldSample :: SpanContext -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="#local-6989586621679147524"><span class="hs-identifier hs-var hs-var">shouldSample</span></a></span></span><span> </span><span id="local-6989586621679147525"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147525"><span class="hs-identifier hs-var">parentSpanContext</span></a></span></span><span> </span><span id="local-6989586621679147526"><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147526"><span class="hs-identifier hs-var">samplerInput</span></a></span></span><span>
</span><span id="line-1494"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147527"><span class="hs-identifier hs-var">hasParent</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147529"><span class="hs-identifier hs-var">parentIsRemote</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147530"><span class="hs-identifier hs-var">parentIsSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1495"></span><span>              </span><span class="annot"><span class="annottext">SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147516"><span class="hs-identifier hs-var">onRemoteParentSampled</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147526"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1496"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147527"><span class="hs-identifier hs-var">hasParent</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147529"><span class="hs-identifier hs-var">parentIsRemote</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147530"><span class="hs-identifier hs-var">parentIsSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1497"></span><span>              </span><span class="annot"><span class="annottext">SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147518"><span class="hs-identifier hs-var">onRemoteParentNotSampled</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147526"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1498"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147527"><span class="hs-identifier hs-var">hasParent</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147529"><span class="hs-identifier hs-var">parentIsRemote</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147530"><span class="hs-identifier hs-var">parentIsSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1499"></span><span>              </span><span class="annot"><span class="annottext">SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147520"><span class="hs-identifier hs-var">onLocalParentSampled</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147526"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1500"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147527"><span class="hs-identifier hs-var">hasParent</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147529"><span class="hs-identifier hs-var">parentIsRemote</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679147530"><span class="hs-identifier hs-var">parentIsSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1501"></span><span>              </span><span class="annot"><span class="annottext">SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147522"><span class="hs-identifier hs-var">onLocalParentNotSampled</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147526"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1502"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1503"></span><span>              </span><span class="annot"><span class="annottext">SamplerSpec -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="#local-6989586621679147514"><span class="hs-identifier hs-var">onRoot</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147526"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1504"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1505"></span><span>          </span><span id="local-6989586621679147527"><span class="annot"><span class="annottext">hasParent :: Bool
</span><a href="#local-6989586621679147527"><span class="hs-identifier hs-var hs-var">hasParent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; Bool
</span><span class="hs-identifier hs-var">spanContextIsValid</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147525"><span class="hs-identifier hs-var">parentSpanContext</span></a></span><span>
</span><span id="line-1506"></span><span>          </span><span id="local-6989586621679147529"><span class="annot"><span class="annottext">parentIsRemote :: Bool
</span><a href="#local-6989586621679147529"><span class="hs-identifier hs-var hs-var">parentIsRemote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; Bool
</span><span class="hs-identifier hs-var">spanContextIsRemote</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147525"><span class="hs-identifier hs-var">parentSpanContext</span></a></span><span>
</span><span id="line-1507"></span><span>          </span><span id="local-6989586621679147530"><span class="annot"><span class="annottext">parentIsSampled :: Bool
</span><a href="#local-6989586621679147530"><span class="hs-identifier hs-var hs-var">parentIsSampled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; Bool
</span><span class="hs-identifier hs-var">spanContextIsSampled</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147525"><span class="hs-identifier hs-var">parentSpanContext</span></a></span><span>
</span><span id="line-1508"></span><span>
</span><span id="line-1509"></span><span>    </span><span class="annot"><span class="annottext">SamplerSpec -&gt; ContT a IO SamplerSpec
forall a. a -&gt; ContT a IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultSamplerSpec"><span class="hs-identifier hs-var">defaultSamplerSpec</span></a></span><span>
</span><span id="line-1510"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecName"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;ParentBased&quot;</span></span><span>
</span><span id="line-1511"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecDescription"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;ParentBased&quot;</span></span><span>
</span><span id="line-1512"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147532"><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147532"><span class="hs-identifier hs-var">samplerInput</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1513"></span><span>          </span><span id="local-6989586621679147533"><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147533"><span class="hs-identifier hs-var">parentSpanContext</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1514"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ContextKey MutableSpan -&gt; Context -&gt; Maybe MutableSpan
forall a. ContextKey a -&gt; Context -&gt; Maybe a
</span><span class="hs-identifier hs-var">lookupContext</span></span><span> </span><span class="annot"><span class="annottext">ContextKey MutableSpan
</span><span class="hs-identifier hs-var">contextKeySpan</span></span><span> </span><span class="annot"><span class="annottext">(Context -&gt; Maybe MutableSpan) -&gt; Context -&gt; Maybe MutableSpan
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SamplerInput -&gt; Context
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputContext"><span class="hs-identifier hs-var">samplerInputContext</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147532"><span class="hs-identifier hs-var">samplerInput</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1515"></span><span>              </span><span class="annot"><span class="annottext">Maybe MutableSpan
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SpanContext -&gt; SamplerM SpanContext
forall a. a -&gt; SamplerM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><span class="hs-identifier hs-var">emptySpanContext</span></span><span>
</span><span id="line-1516"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679147534"><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679147534"><span class="hs-identifier hs-var">mutableSpan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1517"></span><span>                </span><span class="annot"><span class="annottext">IO SpanContext -&gt; SamplerM SpanContext
forall a. IO a -&gt; SamplerM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO SpanContext -&gt; SamplerM SpanContext)
-&gt; IO SpanContext -&gt; SamplerM SpanContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; SpanContext
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span> </span><span class="annot"><span class="annottext">(Span AttrsBuilder -&gt; SpanContext)
-&gt; IO (Span AttrsBuilder) -&gt; IO SpanContext
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan -&gt; IO (Span AttrsBuilder)
</span><span class="hs-identifier hs-var">unsafeReadMutableSpan</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679147534"><span class="hs-identifier hs-var">mutableSpan</span></a></span><span>
</span><span id="line-1518"></span><span>          </span><span class="annot"><span class="annottext">SpanContext -&gt; SamplerInput -&gt; SamplerM SamplingResult
</span><a href="#local-6989586621679147524"><span class="hs-identifier hs-var">shouldSample</span></a></span><span> </span><span class="annot"><span class="annottext">SpanContext
</span><a href="#local-6989586621679147533"><span class="hs-identifier hs-var">parentSpanContext</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147532"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1519"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1520"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1521"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ParentBasedSamplerSpec"><span class="hs-identifier hs-type">ParentBasedSamplerSpec</span></a></span><span>
</span><span id="line-1522"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnRoot :: ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRoot"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnRoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147515"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147515"><span class="hs-identifier hs-var">withOnRoot</span></a></span></span><span>
</span><span id="line-1523"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnRemoteParentSampled :: ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRemoteParentSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnRemoteParentSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147517"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147517"><span class="hs-identifier hs-var">withOnRemoteParentSampled</span></a></span></span><span>
</span><span id="line-1524"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnRemoteParentNotSampled :: ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnRemoteParentNotSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnRemoteParentNotSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147519"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147519"><span class="hs-identifier hs-var">withOnRemoteParentNotSampled</span></a></span></span><span>
</span><span id="line-1525"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnLocalParentSampled :: ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnLocalParentSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnLocalParentSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147521"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147521"><span class="hs-identifier hs-var">withOnLocalParentSampled</span></a></span></span><span>
</span><span id="line-1526"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parentBasedSamplerSpecOnLocalParentNotSampled :: ParentBasedSamplerSpec
-&gt; forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#parentBasedSamplerSpecOnLocalParentNotSampled"><span class="hs-identifier hs-var">parentBasedSamplerSpecOnLocalParentNotSampled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679147523"><span class="annot"><span class="annottext">forall a. Logger -&gt; (SamplerSpec -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679147523"><span class="hs-identifier hs-var">withOnLocalParentNotSampled</span></a></span></span><span>
</span><span id="line-1527"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParentBasedSamplerSpec
</span><a href="#local-6989586621679147512"><span class="hs-identifier hs-var">parentBasedSamplerSpec</span></a></span><span>
</span><span id="line-1528"></span><span>
</span><span id="line-1529"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#constDecisionSampler"><span class="hs-identifier hs-type">constDecisionSampler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier hs-type">SamplingDecision</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1530"></span><span id="constDecisionSampler"><span class="annot"><span class="annottext">constDecisionSampler :: SamplingDecision -&gt; SamplerSpec
</span><a href="OTel.SDK.Trace.Internal.html#constDecisionSampler"><span class="hs-identifier hs-var hs-var">constDecisionSampler</span></a></span></span><span> </span><span id="local-6989586621679147535"><span class="annot"><span class="annottext">SamplingDecision
</span><a href="#local-6989586621679147535"><span class="hs-identifier hs-var">samplingDecision</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1531"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerSpec"><span class="hs-identifier hs-type">SamplerSpec</span></a></span><span>
</span><span id="line-1532"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">samplerSpecName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecName"><span class="hs-identifier hs-var">samplerSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConstDecision&quot;</span></span><span>
</span><span id="line-1533"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerSpecDescription :: Text
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecDescription"><span class="hs-identifier hs-var">samplerSpecDescription</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ConstDecision{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679147536"><span class="hs-identifier hs-var">samplingDecisionText</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1534"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerSpecShouldSample :: SamplerInput -&gt; SamplerM SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecShouldSample"><span class="hs-identifier hs-var">samplerSpecShouldSample</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplerInput -&gt; SamplerM SamplingResult
</span><a href="#local-6989586621679147537"><span class="hs-identifier hs-var">shouldSample</span></a></span><span>
</span><span id="line-1535"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplerSpecOnException :: OnException SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#samplerSpecOnException"><span class="hs-identifier hs-var">samplerSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1536"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679147555"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147555"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException SomeException
</span><span class="hs-identifier hs-var">askException</span></span><span>
</span><span id="line-1537"></span><span>        </span><span id="local-6989586621679147556"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147556"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException [SeriesElem]
</span><span class="hs-identifier hs-var">askExceptionMetadata</span></span><span>
</span><span id="line-1538"></span><span>        </span><span class="annot"><span class="annottext">Message -&gt; OnException ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnException ()) -&gt; Message -&gt; OnException ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Rethrowing unhandled exception from sampler&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1539"></span><span>          </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147555"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147556"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1540"></span><span>        </span><span class="annot"><span class="annottext">e -&gt; OnException SamplingResult
forall (m :: * -&gt; *) e a.
(HasCallStack, MonadThrow m, Exception e) =&gt;
e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679147555"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-1541"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1542"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1543"></span><span>  </span><span id="local-6989586621679147537"><span class="annot"><span class="annottext">shouldSample :: SamplerInput -&gt; SamplerM SamplingResult
</span><a href="#local-6989586621679147537"><span class="hs-identifier hs-var hs-var">shouldSample</span></a></span></span><span> </span><span id="local-6989586621679147557"><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147557"><span class="hs-identifier hs-var">samplerInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1544"></span><span>    </span><span id="local-6989586621679147558"><span class="annot"><span class="annottext">TraceState
</span><a href="#local-6989586621679147558"><span class="hs-identifier hs-var">samplingResultTraceState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1545"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ContextKey MutableSpan -&gt; Context -&gt; Maybe MutableSpan
forall a. ContextKey a -&gt; Context -&gt; Maybe a
</span><span class="hs-identifier hs-var">lookupContext</span></span><span> </span><span class="annot"><span class="annottext">ContextKey MutableSpan
</span><span class="hs-identifier hs-var">contextKeySpan</span></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679147559"><span class="hs-identifier hs-var">samplerInputContext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1546"></span><span>        </span><span class="annot"><span class="annottext">Maybe MutableSpan
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TraceState -&gt; SamplerM TraceState
forall a. a -&gt; SamplerM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TraceState
</span><span class="hs-identifier hs-var">emptyTraceState</span></span><span>
</span><span id="line-1547"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679147560"><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679147560"><span class="hs-identifier hs-var">mutableSpan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1548"></span><span>          </span><span class="annot"><span class="annottext">IO TraceState -&gt; SamplerM TraceState
forall a. IO a -&gt; SamplerM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span>
</span><span id="line-1549"></span><span>            </span><span class="annot"><span class="annottext">(IO TraceState -&gt; SamplerM TraceState)
-&gt; IO TraceState -&gt; SamplerM TraceState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Span AttrsBuilder -&gt; TraceState)
-&gt; IO (Span AttrsBuilder) -&gt; IO TraceState
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SpanContext -&gt; TraceState
</span><span class="hs-identifier hs-var">spanContextTraceState</span></span><span> </span><span class="annot"><span class="annottext">(SpanContext -&gt; TraceState)
-&gt; (Span AttrsBuilder -&gt; SpanContext)
-&gt; Span AttrsBuilder
-&gt; TraceState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Span AttrsBuilder -&gt; SpanContext
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>            </span><span class="annot"><span class="annottext">(IO (Span AttrsBuilder) -&gt; IO TraceState)
-&gt; IO (Span AttrsBuilder) -&gt; IO TraceState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan -&gt; IO (Span AttrsBuilder)
</span><span class="hs-identifier hs-var">unsafeReadMutableSpan</span></span><span> </span><span class="annot"><span class="annottext">MutableSpan
</span><a href="#local-6989586621679147560"><span class="hs-identifier hs-var">mutableSpan</span></a></span><span>
</span><span id="line-1551"></span><span>    </span><span class="annot"><span class="annottext">SamplingResult -&gt; SamplerM SamplingResult
forall a. a -&gt; SamplerM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#defaultSamplingResult"><span class="hs-identifier hs-var">defaultSamplingResult</span></a></span><span>
</span><span id="line-1552"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingResultDecision"><span class="hs-identifier hs-var">samplingResultDecision</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679147535"><span class="hs-identifier hs-type">samplingDecision</span></a></span><span>
</span><span id="line-1553"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingResultSpanAttrs"><span class="hs-identifier hs-var">samplingResultSpanAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mempty</span></span><span>
</span><span id="line-1554"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingResultTraceState"><span class="hs-identifier hs-var hs-type">samplingResultTraceState</span></a></span><span>
</span><span id="line-1555"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1556"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1557"></span><span>    </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier hs-type">SamplerInput</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679147559"><span class="annot"><span class="annottext">Context
samplerInputContext :: SamplerInput -&gt; Context
samplerInputContext :: Context
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputContext"><span class="hs-identifier hs-var hs-var">samplerInputContext</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplerInput
</span><a href="#local-6989586621679147557"><span class="hs-identifier hs-var">samplerInput</span></a></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span>  </span><span id="local-6989586621679147536"><span class="annot"><span class="annottext">samplingDecisionText :: Text
</span><a href="#local-6989586621679147536"><span class="hs-identifier hs-var hs-var">samplingDecisionText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1560"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="#local-6989586621679147535"><span class="hs-identifier hs-var">samplingDecision</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1561"></span><span>      </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionDrop"><span class="hs-identifier hs-var">SamplingDecisionDrop</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DROP&quot;</span></span><span>
</span><span id="line-1562"></span><span>      </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordOnly"><span class="hs-identifier hs-var">SamplingDecisionRecordOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RECORD_ONLY&quot;</span></span><span>
</span><span id="line-1563"></span><span>      </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordAndSample"><span class="hs-identifier hs-var">SamplingDecisionRecordAndSample</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;RECORD_AND_SAMPLE&quot;</span></span><span>
</span><span id="line-1564"></span><span>
</span><span id="line-1565"></span><span class="hs-keyword">data</span><span> </span><span id="SamplerInput"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier hs-var">SamplerInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SamplerInput"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerInput"><span class="hs-identifier hs-var">SamplerInput</span></a></span></span><span>
</span><span id="line-1566"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="samplerInputContext"><span class="annot"><span class="annottext">SamplerInput -&gt; Context
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputContext"><span class="hs-identifier hs-var hs-var">samplerInputContext</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Context</span></span><span>
</span><span id="line-1567"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerInputTraceId"><span class="annot"><span class="annottext">SamplerInput -&gt; TraceId
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputTraceId"><span class="hs-identifier hs-var hs-var">samplerInputTraceId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceId</span></span><span>
</span><span id="line-1568"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerInputSpanName"><span class="annot"><span class="annottext">SamplerInput -&gt; SpanName
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanName"><span class="hs-identifier hs-var hs-var">samplerInputSpanName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanName</span></span><span>
</span><span id="line-1569"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerInputSpanKind"><span class="annot"><span class="annottext">SamplerInput -&gt; SpanKind
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanKind"><span class="hs-identifier hs-var hs-var">samplerInputSpanKind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanKind</span></span><span>
</span><span id="line-1570"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerInputSpanAttrs"><span class="annot"><span class="annottext">SamplerInput -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanAttrs"><span class="hs-identifier hs-var hs-var">samplerInputSpanAttrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsBuilder</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">AttrsForSpan</span></span><span>
</span><span id="line-1571"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplerInputSpanLinks"><span class="annot"><span class="annottext">SamplerInput -&gt; SpanLinks AttrsBuilder
</span><a href="OTel.SDK.Trace.Internal.html#samplerInputSpanLinks"><span class="hs-identifier hs-var hs-var">samplerInputSpanLinks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanLinks</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsBuilder</span></span><span>
</span><span id="line-1572"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1573"></span><span>
</span><span id="line-1574"></span><span class="hs-keyword">data</span><span> </span><span id="SamplingResult"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-var">SamplingResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SamplingResult"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-var">SamplingResult</span></a></span></span><span>
</span><span id="line-1575"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="samplingResultDecision"><span class="annot"><span class="annottext">SamplingResult -&gt; SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultDecision"><span class="hs-identifier hs-var hs-var">samplingResultDecision</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier hs-type">SamplingDecision</span></a></span><span>
</span><span id="line-1576"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplingResultSpanAttrs"><span class="annot"><span class="annottext">SamplingResult -&gt; AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultSpanAttrs"><span class="hs-identifier hs-var hs-var">samplingResultSpanAttrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AttrsBuilder</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">AttrsForSpan</span></span><span>
</span><span id="line-1577"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="samplingResultTraceState"><span class="annot"><span class="annottext">SamplingResult -&gt; TraceState
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultTraceState"><span class="hs-identifier hs-var hs-var">samplingResultTraceState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceState</span></span><span>
</span><span id="line-1578"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1579"></span><span>
</span><span id="line-1580"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSamplingResult"><span class="hs-identifier hs-type">defaultSamplingResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-type">SamplingResult</span></a></span><span>
</span><span id="line-1581"></span><span id="defaultSamplingResult"><span class="annot"><span class="annottext">defaultSamplingResult :: SamplingResult
</span><a href="OTel.SDK.Trace.Internal.html#defaultSamplingResult"><span class="hs-identifier hs-var hs-var">defaultSamplingResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1582"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingResult"><span class="hs-identifier hs-type">SamplingResult</span></a></span><span>
</span><span id="line-1583"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">samplingResultDecision :: SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultDecision"><span class="hs-identifier hs-var">samplingResultDecision</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionDrop"><span class="hs-identifier hs-var">SamplingDecisionDrop</span></a></span><span>
</span><span id="line-1584"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplingResultSpanAttrs :: AttrsBuilder 'AttrsForSpan
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultSpanAttrs"><span class="hs-identifier hs-var">samplingResultSpanAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrsBuilder 'AttrsForSpan
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1585"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">samplingResultTraceState :: TraceState
</span><a href="OTel.SDK.Trace.Internal.html#samplingResultTraceState"><span class="hs-identifier hs-var">samplingResultTraceState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceState
</span><span class="hs-identifier hs-var">emptyTraceState</span></span><span>
</span><span id="line-1586"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1587"></span><span>
</span><span id="line-1588"></span><span class="hs-keyword">data</span><span> </span><span id="SamplingDecision"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier hs-var">SamplingDecision</span></a></span></span><span>
</span><span id="line-1589"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SamplingDecisionDrop"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionDrop"><span class="hs-identifier hs-var">SamplingDecisionDrop</span></a></span></span><span>
</span><span id="line-1590"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SamplingDecisionRecordOnly"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordOnly"><span class="hs-identifier hs-var">SamplingDecisionRecordOnly</span></a></span></span><span>
</span><span id="line-1591"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SamplingDecisionRecordAndSample"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordAndSample"><span class="hs-identifier hs-var">SamplingDecisionRecordAndSample</span></a></span></span><span>
</span><span id="line-1592"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679147563"><span id="local-6989586621679147565"><span class="annot"><span class="annottext">SamplingDecision -&gt; SamplingDecision -&gt; Bool
(SamplingDecision -&gt; SamplingDecision -&gt; Bool)
-&gt; (SamplingDecision -&gt; SamplingDecision -&gt; Bool)
-&gt; Eq SamplingDecision
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SamplingDecision -&gt; SamplingDecision -&gt; Bool
== :: SamplingDecision -&gt; SamplingDecision -&gt; Bool
$c/= :: SamplingDecision -&gt; SamplingDecision -&gt; Bool
/= :: SamplingDecision -&gt; SamplingDecision -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147569"><span id="local-6989586621679147571"><span id="local-6989586621679147575"><span class="annot"><span class="annottext">Int -&gt; SamplingDecision -&gt; ShowS
[SamplingDecision] -&gt; ShowS
SamplingDecision -&gt; [Char]
(Int -&gt; SamplingDecision -&gt; ShowS)
-&gt; (SamplingDecision -&gt; [Char])
-&gt; ([SamplingDecision] -&gt; ShowS)
-&gt; Show SamplingDecision
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SamplingDecision -&gt; ShowS
showsPrec :: Int -&gt; SamplingDecision -&gt; ShowS
$cshow :: SamplingDecision -&gt; [Char]
show :: SamplingDecision -&gt; [Char]
$cshowList :: [SamplingDecision] -&gt; ShowS
showList :: [SamplingDecision] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>
</span><span id="line-1594"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingDecisionDrop"><span class="hs-identifier hs-type">samplingDecisionDrop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier hs-type">SamplingDecision</span></a></span><span>
</span><span id="line-1595"></span><span id="samplingDecisionDrop"><span class="annot"><span class="annottext">samplingDecisionDrop :: SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#samplingDecisionDrop"><span class="hs-identifier hs-var hs-var">samplingDecisionDrop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionDrop"><span class="hs-identifier hs-var">SamplingDecisionDrop</span></a></span><span>
</span><span id="line-1596"></span><span>
</span><span id="line-1597"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingDecisionRecordOnly"><span class="hs-identifier hs-type">samplingDecisionRecordOnly</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier hs-type">SamplingDecision</span></a></span><span>
</span><span id="line-1598"></span><span id="samplingDecisionRecordOnly"><span class="annot"><span class="annottext">samplingDecisionRecordOnly :: SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#samplingDecisionRecordOnly"><span class="hs-identifier hs-var hs-var">samplingDecisionRecordOnly</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordOnly"><span class="hs-identifier hs-var">SamplingDecisionRecordOnly</span></a></span><span>
</span><span id="line-1599"></span><span>
</span><span id="line-1600"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#samplingDecisionRecordAndSample"><span class="hs-identifier hs-type">samplingDecisionRecordAndSample</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplingDecision"><span class="hs-identifier hs-type">SamplingDecision</span></a></span><span>
</span><span id="line-1601"></span><span id="samplingDecisionRecordAndSample"><span class="annot"><span class="annottext">samplingDecisionRecordAndSample :: SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#samplingDecisionRecordAndSample"><span class="hs-identifier hs-var hs-var">samplingDecisionRecordAndSample</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SamplingDecision
</span><a href="OTel.SDK.Trace.Internal.html#SamplingDecisionRecordAndSample"><span class="hs-identifier hs-var">SamplingDecisionRecordAndSample</span></a></span><span>
</span><span id="line-1602"></span><span>
</span><span id="line-1603"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1604"></span><span class="hs-keyword">newtype</span><span> </span><span id="SpanProcessorM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-var">SpanProcessorM</span></a></span></span><span> </span><span id="local-6989586621679145317"><span class="annot"><a href="#local-6989586621679145317"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpanProcessorM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-var">SpanProcessorM</span></a></span></span><span>
</span><span id="line-1605"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unSpanProcessorM"><span class="annot"><span class="annottext">forall a. SpanProcessorM a -&gt; SpanExporter -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unSpanProcessorM"><span class="hs-identifier hs-var hs-var">unSpanProcessorM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145317"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1606"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1607"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679147583"><span id="local-6989586621679147588"><span id="local-6989586621679147592"><span id="local-6989586621679147596"><span id="local-6989586621679147600"><span class="annot"><span class="annottext">Functor SpanProcessorM
Functor SpanProcessorM =&gt;
(forall a. a -&gt; SpanProcessorM a)
-&gt; (forall a b.
    SpanProcessorM (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM c)
-&gt; (forall a b.
    SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b)
-&gt; (forall a b.
    SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM a)
-&gt; Applicative SpanProcessorM
forall a. a -&gt; SpanProcessorM a
forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM a
forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b
forall a b.
SpanProcessorM (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; SpanProcessorM a
pure :: forall a. a -&gt; SpanProcessorM a
$c&lt;*&gt; :: forall a b.
SpanProcessorM (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b
&lt;*&gt; :: forall a b.
SpanProcessorM (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM c
$c*&gt; :: forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b
*&gt; :: forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b
$c&lt;* :: forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM a
&lt;* :: forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147605"><span id="local-6989586621679147611"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b)
-&gt; (forall a b. a -&gt; SpanProcessorM b -&gt; SpanProcessorM a)
-&gt; Functor SpanProcessorM
forall a b. a -&gt; SpanProcessorM b -&gt; SpanProcessorM a
forall a b. (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b
fmap :: forall a b. (a -&gt; b) -&gt; SpanProcessorM a -&gt; SpanProcessorM b
$c&lt;$ :: forall a b. a -&gt; SpanProcessorM b -&gt; SpanProcessorM a
&lt;$ :: forall a b. a -&gt; SpanProcessorM b -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147620"><span id="local-6989586621679147626"><span id="local-6989586621679147631"><span class="annot"><span class="annottext">Applicative SpanProcessorM
Applicative SpanProcessorM =&gt;
(forall a b.
 SpanProcessorM a -&gt; (a -&gt; SpanProcessorM b) -&gt; SpanProcessorM b)
-&gt; (forall a b.
    SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b)
-&gt; (forall a. a -&gt; SpanProcessorM a)
-&gt; Monad SpanProcessorM
forall a. a -&gt; SpanProcessorM a
forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b
forall a b.
SpanProcessorM a -&gt; (a -&gt; SpanProcessorM b) -&gt; SpanProcessorM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b.
SpanProcessorM a -&gt; (a -&gt; SpanProcessorM b) -&gt; SpanProcessorM b
&gt;&gt;= :: forall a b.
SpanProcessorM a -&gt; (a -&gt; SpanProcessorM b) -&gt; SpanProcessorM b
$c&gt;&gt; :: forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b
&gt;&gt; :: forall a b.
SpanProcessorM a -&gt; SpanProcessorM b -&gt; SpanProcessorM b
$creturn :: forall a. a -&gt; SpanProcessorM a
return :: forall a. a -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147639"><span class="annot"><span class="annottext">Monad SpanProcessorM
Monad SpanProcessorM =&gt;
(forall a. IO a -&gt; SpanProcessorM a) -&gt; MonadIO SpanProcessorM
forall a. IO a -&gt; SpanProcessorM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; SpanProcessorM a
liftIO :: forall a. IO a -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1608"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147654"><span class="annot"><span class="annottext">MonadThrow SpanProcessorM
MonadThrow SpanProcessorM =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 SpanProcessorM a -&gt; (e -&gt; SpanProcessorM a) -&gt; SpanProcessorM a)
-&gt; MonadCatch SpanProcessorM
forall e a.
(HasCallStack, Exception e) =&gt;
SpanProcessorM a -&gt; (e -&gt; SpanProcessorM a) -&gt; SpanProcessorM a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
$ccatch :: forall e a.
(HasCallStack, Exception e) =&gt;
SpanProcessorM a -&gt; (e -&gt; SpanProcessorM a) -&gt; SpanProcessorM a
catch :: forall e a.
(HasCallStack, Exception e) =&gt;
SpanProcessorM a -&gt; (e -&gt; SpanProcessorM a) -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147674"><span id="local-6989586621679147686"><span id="local-6989586621679147697"><span class="annot"><span class="annottext">MonadCatch SpanProcessorM
MonadCatch SpanProcessorM =&gt;
(forall b.
 HasCallStack =&gt;
 ((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
  -&gt; SpanProcessorM b)
 -&gt; SpanProcessorM b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
     -&gt; SpanProcessorM b)
    -&gt; SpanProcessorM b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    SpanProcessorM a
    -&gt; (a -&gt; ExitCase b -&gt; SpanProcessorM c)
    -&gt; (a -&gt; SpanProcessorM b)
    -&gt; SpanProcessorM (b, c))
-&gt; MonadMask SpanProcessorM
forall b.
HasCallStack =&gt;
((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
 -&gt; SpanProcessorM b)
-&gt; SpanProcessorM b
forall a b c.
HasCallStack =&gt;
SpanProcessorM a
-&gt; (a -&gt; ExitCase b -&gt; SpanProcessorM c)
-&gt; (a -&gt; SpanProcessorM b)
-&gt; SpanProcessorM (b, c)
forall (m :: * -&gt; *).
MonadCatch m =&gt;
(forall b. HasCallStack =&gt; ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    m a -&gt; (a -&gt; ExitCase b -&gt; m c) -&gt; (a -&gt; m b) -&gt; m (b, c))
-&gt; MonadMask m
$cmask :: forall b.
HasCallStack =&gt;
((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
 -&gt; SpanProcessorM b)
-&gt; SpanProcessorM b
mask :: forall b.
HasCallStack =&gt;
((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
 -&gt; SpanProcessorM b)
-&gt; SpanProcessorM b
$cuninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
 -&gt; SpanProcessorM b)
-&gt; SpanProcessorM b
uninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. SpanProcessorM a -&gt; SpanProcessorM a)
 -&gt; SpanProcessorM b)
-&gt; SpanProcessorM b
$cgeneralBracket :: forall a b c.
HasCallStack =&gt;
SpanProcessorM a
-&gt; (a -&gt; ExitCase b -&gt; SpanProcessorM c)
-&gt; (a -&gt; SpanProcessorM b)
-&gt; SpanProcessorM (b, c)
generalBracket :: forall a b c.
HasCallStack =&gt;
SpanProcessorM a
-&gt; (a -&gt; ExitCase b -&gt; SpanProcessorM c)
-&gt; (a -&gt; SpanProcessorM b)
-&gt; SpanProcessorM (b, c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadMask</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147718"><span class="annot"><span class="annottext">Monad SpanProcessorM
Monad SpanProcessorM =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanProcessorM a)
-&gt; MonadThrow SpanProcessorM
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanProcessorM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a)
-&gt; MonadThrow m
$cthrowM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanProcessorM a
throwM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span> </span><span class="hs-comment">-- @exceptions@</span><span>
</span><span id="line-1609"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147734"><span class="annot"><span class="annottext">MonadIO SpanProcessorM
MonadIO SpanProcessorM =&gt;
(forall b.
 ((forall a. SpanProcessorM a -&gt; IO a) -&gt; IO b) -&gt; SpanProcessorM b)
-&gt; MonadUnliftIO SpanProcessorM
forall b.
((forall a. SpanProcessorM a -&gt; IO a) -&gt; IO b) -&gt; SpanProcessorM b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
$cwithRunInIO :: forall b.
((forall a. SpanProcessorM a -&gt; IO a) -&gt; IO b) -&gt; SpanProcessorM b
withRunInIO :: forall b.
((forall a. SpanProcessorM a -&gt; IO a) -&gt; IO b) -&gt; SpanProcessorM b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span> </span><span class="hs-comment">-- @unliftio-core@</span><span>
</span><span id="line-1610"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147749"><span class="annot"><span class="annottext">Monad SpanProcessorM
Monad SpanProcessorM =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanProcessorM ())
-&gt; MonadLogger SpanProcessorM
forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanProcessorM ()
forall (m :: * -&gt; *).
Monad m =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; m ())
-&gt; MonadLogger m
$cmonadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanProcessorM ()
monadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanProcessorM ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadLogger</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147763"><span class="annot"><span class="annottext">MonadIO SpanProcessorM
MonadLogger SpanProcessorM
SpanProcessorM Logger
(MonadLogger SpanProcessorM, MonadIO SpanProcessorM) =&gt;
SpanProcessorM Logger -&gt; MonadLoggerIO SpanProcessorM
forall (m :: * -&gt; *).
(MonadLogger m, MonadIO m) =&gt;
m Logger -&gt; MonadLoggerIO m
$caskLoggerIO :: SpanProcessorM Logger
askLoggerIO :: SpanProcessorM Logger
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">MonadLoggerIO</span></span></span><span> </span><span class="hs-comment">-- @monad-logger@</span><span>
</span><span id="line-1611"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>    </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1613"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679147773"><span id="local-6989586621679147779"><span id="local-6989586621679147786"><span class="annot"><span class="annottext">NonEmpty (SpanProcessorM a) -&gt; SpanProcessorM a
SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
(SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a)
-&gt; (NonEmpty (SpanProcessorM a) -&gt; SpanProcessorM a)
-&gt; (forall b.
    Integral b =&gt;
    b -&gt; SpanProcessorM a -&gt; SpanProcessorM a)
-&gt; Semigroup (SpanProcessorM a)
forall b. Integral b =&gt; b -&gt; SpanProcessorM a -&gt; SpanProcessorM a
forall a.
Semigroup a =&gt;
NonEmpty (SpanProcessorM a) -&gt; SpanProcessorM a
forall a.
Semigroup a =&gt;
SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; SpanProcessorM a -&gt; SpanProcessorM a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: forall a.
Semigroup a =&gt;
SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
&lt;&gt; :: SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
$csconcat :: forall a.
Semigroup a =&gt;
NonEmpty (SpanProcessorM a) -&gt; SpanProcessorM a
sconcat :: NonEmpty (SpanProcessorM a) -&gt; SpanProcessorM a
$cstimes :: forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; SpanProcessorM a -&gt; SpanProcessorM a
stimes :: forall b. Integral b =&gt; b -&gt; SpanProcessorM a -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147798"><span id="local-6989586621679147804"><span id="local-6989586621679147809"><span class="annot"><span class="annottext">Semigroup (SpanProcessorM a)
SpanProcessorM a
Semigroup (SpanProcessorM a) =&gt;
SpanProcessorM a
-&gt; (SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a)
-&gt; ([SpanProcessorM a] -&gt; SpanProcessorM a)
-&gt; Monoid (SpanProcessorM a)
[SpanProcessorM a] -&gt; SpanProcessorM a
SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. Monoid a =&gt; Semigroup (SpanProcessorM a)
forall a. Monoid a =&gt; SpanProcessorM a
forall a. Monoid a =&gt; [SpanProcessorM a] -&gt; SpanProcessorM a
forall a.
Monoid a =&gt;
SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
$cmempty :: forall a. Monoid a =&gt; SpanProcessorM a
mempty :: SpanProcessorM a
$cmappend :: forall a.
Monoid a =&gt;
SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
mappend :: SpanProcessorM a -&gt; SpanProcessorM a -&gt; SpanProcessorM a
$cmconcat :: forall a. Monoid a =&gt; [SpanProcessorM a] -&gt; SpanProcessorM a
mconcat :: [SpanProcessorM a] -&gt; SpanProcessorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1614"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679145317"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>
</span><span id="line-1616"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpanExporter"><span class="hs-identifier hs-type">askSpanExporter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span>
</span><span id="line-1617"></span><span id="askSpanExporter"><span class="annot"><span class="annottext">askSpanExporter :: SpanProcessorM SpanExporter
</span><a href="OTel.SDK.Trace.Internal.html#askSpanExporter"><span class="hs-identifier hs-var hs-var">askSpanExporter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SpanExporter -&gt; LoggingT IO SpanExporter)
-&gt; SpanProcessorM SpanExporter
forall a. (SpanExporter -&gt; LoggingT IO a) -&gt; SpanProcessorM a
</span><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-var">SpanProcessorM</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter -&gt; LoggingT IO SpanExporter
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-1618"></span><span>
</span><span id="line-1619"></span><span id="local-6989586621679145016"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runSpanProcessorM"><span class="hs-identifier hs-type">runSpanProcessorM</span></a></span><span>
</span><span id="line-1620"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporter"><span class="hs-identifier hs-type">SpanExporter</span></a></span><span>
</span><span id="line-1621"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1622"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnTimeout</span></span><span> </span><span class="annot"><a href="#local-6989586621679145016"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1623"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="annot"><a href="#local-6989586621679145016"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1624"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1625"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanProcessorM"><span class="hs-identifier hs-type">SpanProcessorM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145016"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1627"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145016"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1628"></span><span id="runSpanProcessorM"><span class="annot"><span class="annottext">runSpanProcessorM :: forall a.
SpanExporter
-&gt; Logger
-&gt; OnTimeout a
-&gt; OnException a
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanProcessorM a
-&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSpanProcessorM"><span class="hs-identifier hs-var hs-var">runSpanProcessorM</span></a></span></span><span> </span><span id="local-6989586621679147822"><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679147822"><span class="hs-identifier hs-var">spanExporter</span></a></span></span><span> </span><span id="local-6989586621679147823"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147823"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679147824"><span class="annot"><span class="annottext">OnTimeout a
</span><a href="#local-6989586621679147824"><span class="hs-identifier hs-var">onTimeout</span></a></span></span><span> </span><span id="local-6989586621679147825"><span class="annot"><span class="annottext">OnException a
</span><a href="#local-6989586621679147825"><span class="hs-identifier hs-var">onEx</span></a></span></span><span> </span><span id="local-6989586621679147826"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147826"><span class="hs-identifier hs-var">timeoutMicros</span></a></span></span><span> </span><span id="local-6989586621679147827"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147827"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span id="local-6989586621679147828"><span class="annot"><span class="annottext">SpanProcessorM a
</span><a href="#local-6989586621679147828"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1629"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT IO a -&gt; Logger -&gt; IO a)
-&gt; Logger -&gt; LoggingT IO a -&gt; IO a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; Logger -&gt; IO a
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679147823"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1630"></span><span>    </span><span id="local-6989586621679147829"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679147829"><span class="hs-identifier hs-var">mResult</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((forall a. LoggingT IO a -&gt; IO a) -&gt; IO (Maybe a))
-&gt; LoggingT IO (Maybe a)
forall b.
((forall a. LoggingT IO a -&gt; IO a) -&gt; IO b) -&gt; LoggingT IO b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147830"><span class="annot"><span class="annottext">forall a. LoggingT IO a -&gt; IO a
</span><a href="#local-6989586621679147830"><span class="hs-identifier hs-var">runInIO</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1631"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; IO a -&gt; IO (Maybe a)
forall a. Int -&gt; IO a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">timeout</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147826"><span class="hs-identifier hs-var">timeoutMicros</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IO (Maybe a)) -&gt; IO a -&gt; IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; IO a
forall a. LoggingT IO a -&gt; IO a
</span><a href="#local-6989586621679147830"><span class="hs-identifier hs-var">runInIO</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1632"></span><span>        </span><span class="annot"><span class="annottext">SpanProcessorM a -&gt; SpanExporter -&gt; LoggingT IO a
forall a. SpanProcessorM a -&gt; SpanExporter -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unSpanProcessorM"><span class="hs-identifier hs-var">unSpanProcessorM</span></a></span><span> </span><span class="annot"><span class="annottext">SpanProcessorM a
</span><a href="#local-6989586621679147828"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporter
</span><a href="#local-6989586621679147822"><span class="hs-identifier hs-var">spanExporter</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; (SomeException -&gt; LoggingT IO a) -&gt; LoggingT IO a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadCatch m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchAny`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679147831"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147831"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1633"></span><span>          </span><span class="annot"><span class="annottext">OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
forall a.
OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
</span><span class="hs-identifier hs-var">runOnException</span></span><span> </span><span class="annot"><span class="annottext">OnException a
</span><a href="#local-6989586621679147825"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679147831"><span class="hs-identifier hs-var">someEx</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147827"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1634"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679147829"><span class="hs-identifier hs-var">mResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1635"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679147833"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679147833"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; LoggingT IO a
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679147833"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1636"></span><span>      </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OnTimeout a -&gt; Int -&gt; [SeriesElem] -&gt; LoggingT IO a
forall a. OnTimeout a -&gt; Int -&gt; [SeriesElem] -&gt; LoggingT IO a
</span><span class="hs-identifier hs-var">runOnTimeout</span></span><span> </span><span class="annot"><span class="annottext">OnTimeout a
</span><a href="#local-6989586621679147824"><span class="hs-identifier hs-var">onTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679147826"><span class="hs-identifier hs-var">timeoutMicros</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679147827"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1637"></span><span>
</span><span id="line-1638"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-type">SpanExporterM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1639"></span><span class="hs-keyword">newtype</span><span> </span><span id="SpanExporterM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-var">SpanExporterM</span></a></span></span><span> </span><span id="local-6989586621679145423"><span class="annot"><a href="#local-6989586621679145423"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpanExporterM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-var">SpanExporterM</span></a></span></span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unSpanExporterM"><span class="annot"><span class="annottext">forall a. SpanExporterM a -&gt; Resource Attrs -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unSpanExporterM"><span class="hs-identifier hs-var hs-var">unSpanExporterM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145423"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1642"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679147841"><span id="local-6989586621679147845"><span id="local-6989586621679147849"><span id="local-6989586621679147853"><span id="local-6989586621679147857"><span class="annot"><span class="annottext">Functor SpanExporterM
Functor SpanExporterM =&gt;
(forall a. a -&gt; SpanExporterM a)
-&gt; (forall a b.
    SpanExporterM (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM c)
-&gt; (forall a b.
    SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b)
-&gt; (forall a b.
    SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM a)
-&gt; Applicative SpanExporterM
forall a. a -&gt; SpanExporterM a
forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM a
forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b
forall a b.
SpanExporterM (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; SpanExporterM a
pure :: forall a. a -&gt; SpanExporterM a
$c&lt;*&gt; :: forall a b.
SpanExporterM (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b
&lt;*&gt; :: forall a b.
SpanExporterM (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM c
$c*&gt; :: forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b
*&gt; :: forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b
$c&lt;* :: forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM a
&lt;* :: forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147862"><span id="local-6989586621679147867"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b)
-&gt; (forall a b. a -&gt; SpanExporterM b -&gt; SpanExporterM a)
-&gt; Functor SpanExporterM
forall a b. a -&gt; SpanExporterM b -&gt; SpanExporterM a
forall a b. (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b
fmap :: forall a b. (a -&gt; b) -&gt; SpanExporterM a -&gt; SpanExporterM b
$c&lt;$ :: forall a b. a -&gt; SpanExporterM b -&gt; SpanExporterM a
&lt;$ :: forall a b. a -&gt; SpanExporterM b -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147874"><span id="local-6989586621679147879"><span id="local-6989586621679147884"><span class="annot"><span class="annottext">Applicative SpanExporterM
Applicative SpanExporterM =&gt;
(forall a b.
 SpanExporterM a -&gt; (a -&gt; SpanExporterM b) -&gt; SpanExporterM b)
-&gt; (forall a b.
    SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b)
-&gt; (forall a. a -&gt; SpanExporterM a)
-&gt; Monad SpanExporterM
forall a. a -&gt; SpanExporterM a
forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b
forall a b.
SpanExporterM a -&gt; (a -&gt; SpanExporterM b) -&gt; SpanExporterM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b.
SpanExporterM a -&gt; (a -&gt; SpanExporterM b) -&gt; SpanExporterM b
&gt;&gt;= :: forall a b.
SpanExporterM a -&gt; (a -&gt; SpanExporterM b) -&gt; SpanExporterM b
$c&gt;&gt; :: forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b
&gt;&gt; :: forall a b. SpanExporterM a -&gt; SpanExporterM b -&gt; SpanExporterM b
$creturn :: forall a. a -&gt; SpanExporterM a
return :: forall a. a -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147891"><span class="annot"><span class="annottext">Monad SpanExporterM
Monad SpanExporterM =&gt;
(forall a. IO a -&gt; SpanExporterM a) -&gt; MonadIO SpanExporterM
forall a. IO a -&gt; SpanExporterM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; SpanExporterM a
liftIO :: forall a. IO a -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1643"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147904"><span class="annot"><span class="annottext">MonadThrow SpanExporterM
MonadThrow SpanExporterM =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 SpanExporterM a -&gt; (e -&gt; SpanExporterM a) -&gt; SpanExporterM a)
-&gt; MonadCatch SpanExporterM
forall e a.
(HasCallStack, Exception e) =&gt;
SpanExporterM a -&gt; (e -&gt; SpanExporterM a) -&gt; SpanExporterM a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
$ccatch :: forall e a.
(HasCallStack, Exception e) =&gt;
SpanExporterM a -&gt; (e -&gt; SpanExporterM a) -&gt; SpanExporterM a
catch :: forall e a.
(HasCallStack, Exception e) =&gt;
SpanExporterM a -&gt; (e -&gt; SpanExporterM a) -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147921"><span id="local-6989586621679147932"><span id="local-6989586621679147943"><span class="annot"><span class="annottext">MonadCatch SpanExporterM
MonadCatch SpanExporterM =&gt;
(forall b.
 HasCallStack =&gt;
 ((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
 -&gt; SpanExporterM b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
    -&gt; SpanExporterM b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    SpanExporterM a
    -&gt; (a -&gt; ExitCase b -&gt; SpanExporterM c)
    -&gt; (a -&gt; SpanExporterM b)
    -&gt; SpanExporterM (b, c))
-&gt; MonadMask SpanExporterM
forall b.
HasCallStack =&gt;
((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
-&gt; SpanExporterM b
forall a b c.
HasCallStack =&gt;
SpanExporterM a
-&gt; (a -&gt; ExitCase b -&gt; SpanExporterM c)
-&gt; (a -&gt; SpanExporterM b)
-&gt; SpanExporterM (b, c)
forall (m :: * -&gt; *).
MonadCatch m =&gt;
(forall b. HasCallStack =&gt; ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    m a -&gt; (a -&gt; ExitCase b -&gt; m c) -&gt; (a -&gt; m b) -&gt; m (b, c))
-&gt; MonadMask m
$cmask :: forall b.
HasCallStack =&gt;
((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
-&gt; SpanExporterM b
mask :: forall b.
HasCallStack =&gt;
((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
-&gt; SpanExporterM b
$cuninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
-&gt; SpanExporterM b
uninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. SpanExporterM a -&gt; SpanExporterM a) -&gt; SpanExporterM b)
-&gt; SpanExporterM b
$cgeneralBracket :: forall a b c.
HasCallStack =&gt;
SpanExporterM a
-&gt; (a -&gt; ExitCase b -&gt; SpanExporterM c)
-&gt; (a -&gt; SpanExporterM b)
-&gt; SpanExporterM (b, c)
generalBracket :: forall a b c.
HasCallStack =&gt;
SpanExporterM a
-&gt; (a -&gt; ExitCase b -&gt; SpanExporterM c)
-&gt; (a -&gt; SpanExporterM b)
-&gt; SpanExporterM (b, c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadMask</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147962"><span class="annot"><span class="annottext">Monad SpanExporterM
Monad SpanExporterM =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanExporterM a)
-&gt; MonadThrow SpanExporterM
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanExporterM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a)
-&gt; MonadThrow m
$cthrowM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanExporterM a
throwM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span> </span><span class="hs-comment">-- @exceptions@</span><span>
</span><span id="line-1644"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147975"><span class="annot"><span class="annottext">MonadIO SpanExporterM
MonadIO SpanExporterM =&gt;
(forall b.
 ((forall a. SpanExporterM a -&gt; IO a) -&gt; IO b) -&gt; SpanExporterM b)
-&gt; MonadUnliftIO SpanExporterM
forall b.
((forall a. SpanExporterM a -&gt; IO a) -&gt; IO b) -&gt; SpanExporterM b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
$cwithRunInIO :: forall b.
((forall a. SpanExporterM a -&gt; IO a) -&gt; IO b) -&gt; SpanExporterM b
withRunInIO :: forall b.
((forall a. SpanExporterM a -&gt; IO a) -&gt; IO b) -&gt; SpanExporterM b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span> </span><span class="hs-comment">-- @unliftio-core@</span><span>
</span><span id="line-1645"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147986"><span class="annot"><span class="annottext">Monad SpanExporterM
Monad SpanExporterM =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanExporterM ())
-&gt; MonadLogger SpanExporterM
forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanExporterM ()
forall (m :: * -&gt; *).
Monad m =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; m ())
-&gt; MonadLogger m
$cmonadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanExporterM ()
monadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SpanExporterM ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadLogger</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679147998"><span class="annot"><span class="annottext">MonadIO SpanExporterM
MonadLogger SpanExporterM
SpanExporterM Logger
(MonadLogger SpanExporterM, MonadIO SpanExporterM) =&gt;
SpanExporterM Logger -&gt; MonadLoggerIO SpanExporterM
forall (m :: * -&gt; *).
(MonadLogger m, MonadIO m) =&gt;
m Logger -&gt; MonadLoggerIO m
$caskLoggerIO :: SpanExporterM Logger
askLoggerIO :: SpanExporterM Logger
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">MonadLoggerIO</span></span></span><span> </span><span class="hs-comment">-- @monad-logger@</span><span>
</span><span id="line-1646"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1647"></span><span>    </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1648"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148005"><span id="local-6989586621679148010"><span id="local-6989586621679148017"><span class="annot"><span class="annottext">NonEmpty (SpanExporterM a) -&gt; SpanExporterM a
SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
(SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a)
-&gt; (NonEmpty (SpanExporterM a) -&gt; SpanExporterM a)
-&gt; (forall b.
    Integral b =&gt;
    b -&gt; SpanExporterM a -&gt; SpanExporterM a)
-&gt; Semigroup (SpanExporterM a)
forall b. Integral b =&gt; b -&gt; SpanExporterM a -&gt; SpanExporterM a
forall a.
Semigroup a =&gt;
NonEmpty (SpanExporterM a) -&gt; SpanExporterM a
forall a.
Semigroup a =&gt;
SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; SpanExporterM a -&gt; SpanExporterM a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: forall a.
Semigroup a =&gt;
SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
&lt;&gt; :: SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
$csconcat :: forall a.
Semigroup a =&gt;
NonEmpty (SpanExporterM a) -&gt; SpanExporterM a
sconcat :: NonEmpty (SpanExporterM a) -&gt; SpanExporterM a
$cstimes :: forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; SpanExporterM a -&gt; SpanExporterM a
stimes :: forall b. Integral b =&gt; b -&gt; SpanExporterM a -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148029"><span id="local-6989586621679148034"><span id="local-6989586621679148039"><span class="annot"><span class="annottext">Semigroup (SpanExporterM a)
SpanExporterM a
Semigroup (SpanExporterM a) =&gt;
SpanExporterM a
-&gt; (SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a)
-&gt; ([SpanExporterM a] -&gt; SpanExporterM a)
-&gt; Monoid (SpanExporterM a)
[SpanExporterM a] -&gt; SpanExporterM a
SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. Monoid a =&gt; Semigroup (SpanExporterM a)
forall a. Monoid a =&gt; SpanExporterM a
forall a. Monoid a =&gt; [SpanExporterM a] -&gt; SpanExporterM a
forall a.
Monoid a =&gt;
SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
$cmempty :: forall a. Monoid a =&gt; SpanExporterM a
mempty :: SpanExporterM a
$cmappend :: forall a.
Monoid a =&gt;
SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
mappend :: SpanExporterM a -&gt; SpanExporterM a -&gt; SpanExporterM a
$cmconcat :: forall a. Monoid a =&gt; [SpanExporterM a] -&gt; SpanExporterM a
mconcat :: [SpanExporterM a] -&gt; SpanExporterM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1649"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679145423"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1650"></span><span>
</span><span id="line-1651"></span><span id="local-6989586621679145035"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runSpanExporterM"><span class="hs-identifier hs-type">runSpanExporterM</span></a></span><span>
</span><span id="line-1652"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span>
</span><span id="line-1653"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1654"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnTimeout</span></span><span> </span><span class="annot"><a href="#local-6989586621679145035"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1655"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="annot"><a href="#local-6989586621679145035"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1656"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1658"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-type">SpanExporterM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145035"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1659"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145035"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1660"></span><span id="runSpanExporterM"><span class="annot"><span class="annottext">runSpanExporterM :: forall a.
Resource Attrs
-&gt; Logger
-&gt; OnTimeout a
-&gt; OnException a
-&gt; Int
-&gt; [SeriesElem]
-&gt; SpanExporterM a
-&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSpanExporterM"><span class="hs-identifier hs-var hs-var">runSpanExporterM</span></a></span></span><span> </span><span id="local-6989586621679148051"><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679148051"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621679148052"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148052"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679148053"><span class="annot"><span class="annottext">OnTimeout a
</span><a href="#local-6989586621679148053"><span class="hs-identifier hs-var">onTimeout</span></a></span></span><span> </span><span id="local-6989586621679148054"><span class="annot"><span class="annottext">OnException a
</span><a href="#local-6989586621679148054"><span class="hs-identifier hs-var">onEx</span></a></span></span><span> </span><span id="local-6989586621679148055"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679148055"><span class="hs-identifier hs-var">timeoutMicros</span></a></span></span><span> </span><span id="local-6989586621679148056"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148056"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span id="local-6989586621679148057"><span class="annot"><span class="annottext">SpanExporterM a
</span><a href="#local-6989586621679148057"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1661"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT IO a -&gt; Logger -&gt; IO a)
-&gt; Logger -&gt; LoggingT IO a -&gt; IO a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; Logger -&gt; IO a
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148052"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1662"></span><span>    </span><span id="local-6989586621679148058"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679148058"><span class="hs-identifier hs-var">mResult</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((forall a. LoggingT IO a -&gt; IO a) -&gt; IO (Maybe a))
-&gt; LoggingT IO (Maybe a)
forall b.
((forall a. LoggingT IO a -&gt; IO a) -&gt; IO b) -&gt; LoggingT IO b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148059"><span class="annot"><span class="annottext">forall a. LoggingT IO a -&gt; IO a
</span><a href="#local-6989586621679148059"><span class="hs-identifier hs-var">runInIO</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1663"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; IO a -&gt; IO (Maybe a)
forall a. Int -&gt; IO a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">timeout</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679148055"><span class="hs-identifier hs-var">timeoutMicros</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IO (Maybe a)) -&gt; IO a -&gt; IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; IO a
forall a. LoggingT IO a -&gt; IO a
</span><a href="#local-6989586621679148059"><span class="hs-identifier hs-var">runInIO</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1664"></span><span>        </span><span class="annot"><span class="annottext">SpanExporterM a -&gt; Resource Attrs -&gt; LoggingT IO a
forall a. SpanExporterM a -&gt; Resource Attrs -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unSpanExporterM"><span class="hs-identifier hs-var">unSpanExporterM</span></a></span><span> </span><span class="annot"><span class="annottext">SpanExporterM a
</span><a href="#local-6989586621679148057"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs
</span><a href="#local-6989586621679148051"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; (SomeException -&gt; LoggingT IO a) -&gt; LoggingT IO a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadCatch m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchAny`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148060"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679148060"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1665"></span><span>          </span><span class="annot"><span class="annottext">OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
forall a.
OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
</span><span class="hs-identifier hs-var">runOnException</span></span><span> </span><span class="annot"><span class="annottext">OnException a
</span><a href="#local-6989586621679148054"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679148060"><span class="hs-identifier hs-var">someEx</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148056"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1666"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679148058"><span class="hs-identifier hs-var">mResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1667"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679148061"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679148061"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; LoggingT IO a
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679148061"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1668"></span><span>      </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OnTimeout a -&gt; Int -&gt; [SeriesElem] -&gt; LoggingT IO a
forall a. OnTimeout a -&gt; Int -&gt; [SeriesElem] -&gt; LoggingT IO a
</span><span class="hs-identifier hs-var">runOnTimeout</span></span><span> </span><span class="annot"><span class="annottext">OnTimeout a
</span><a href="#local-6989586621679148053"><span class="hs-identifier hs-var">onTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679148055"><span class="hs-identifier hs-var">timeoutMicros</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148056"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1669"></span><span>
</span><span id="line-1670"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askResource"><span class="hs-identifier hs-type">askResource</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-type">SpanExporterM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Resource</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span>
</span><span id="line-1671"></span><span id="askResource"><span class="annot"><span class="annottext">askResource :: SpanExporterM (Resource Attrs)
</span><a href="OTel.SDK.Trace.Internal.html#askResource"><span class="hs-identifier hs-var hs-var">askResource</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Resource Attrs -&gt; LoggingT IO (Resource Attrs))
-&gt; SpanExporterM (Resource Attrs)
forall a. (Resource Attrs -&gt; LoggingT IO a) -&gt; SpanExporterM a
</span><a href="OTel.SDK.Trace.Internal.html#SpanExporterM"><span class="hs-identifier hs-var">SpanExporterM</span></a></span><span> </span><span class="annot"><span class="annottext">Resource Attrs -&gt; LoggingT IO (Resource Attrs)
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-1672"></span><span>
</span><span id="line-1673"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerM"><span class="hs-identifier hs-type">SamplerM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1674"></span><span class="hs-keyword">newtype</span><span> </span><span id="SamplerM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerM"><span class="hs-identifier hs-var">SamplerM</span></a></span></span><span> </span><span id="local-6989586621679145465"><span class="annot"><a href="#local-6989586621679145465"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SamplerM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerM"><span class="hs-identifier hs-var">SamplerM</span></a></span></span><span>
</span><span id="line-1675"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unSamplerM"><span class="annot"><span class="annottext">forall a. SamplerM a -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unSamplerM"><span class="hs-identifier hs-var hs-var">unSamplerM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145465"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1676"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1677"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148068"><span id="local-6989586621679148072"><span id="local-6989586621679148076"><span id="local-6989586621679148080"><span id="local-6989586621679148084"><span class="annot"><span class="annottext">Functor SamplerM
Functor SamplerM =&gt;
(forall a. a -&gt; SamplerM a)
-&gt; (forall a b. SamplerM (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; SamplerM a -&gt; SamplerM b -&gt; SamplerM c)
-&gt; (forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b)
-&gt; (forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM a)
-&gt; Applicative SamplerM
forall a. a -&gt; SamplerM a
forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM a
forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b
forall a b. SamplerM (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b
forall a b c.
(a -&gt; b -&gt; c) -&gt; SamplerM a -&gt; SamplerM b -&gt; SamplerM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; SamplerM a
pure :: forall a. a -&gt; SamplerM a
$c&lt;*&gt; :: forall a b. SamplerM (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b
&lt;*&gt; :: forall a b. SamplerM (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; SamplerM a -&gt; SamplerM b -&gt; SamplerM c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; SamplerM a -&gt; SamplerM b -&gt; SamplerM c
$c*&gt; :: forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b
*&gt; :: forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b
$c&lt;* :: forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM a
&lt;* :: forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148088"><span id="local-6989586621679148092"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b)
-&gt; (forall a b. a -&gt; SamplerM b -&gt; SamplerM a) -&gt; Functor SamplerM
forall a b. a -&gt; SamplerM b -&gt; SamplerM a
forall a b. (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b
fmap :: forall a b. (a -&gt; b) -&gt; SamplerM a -&gt; SamplerM b
$c&lt;$ :: forall a b. a -&gt; SamplerM b -&gt; SamplerM a
&lt;$ :: forall a b. a -&gt; SamplerM b -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148098"><span id="local-6989586621679148102"><span id="local-6989586621679148106"><span class="annot"><span class="annottext">Applicative SamplerM
Applicative SamplerM =&gt;
(forall a b. SamplerM a -&gt; (a -&gt; SamplerM b) -&gt; SamplerM b)
-&gt; (forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b)
-&gt; (forall a. a -&gt; SamplerM a)
-&gt; Monad SamplerM
forall a. a -&gt; SamplerM a
forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b
forall a b. SamplerM a -&gt; (a -&gt; SamplerM b) -&gt; SamplerM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. SamplerM a -&gt; (a -&gt; SamplerM b) -&gt; SamplerM b
&gt;&gt;= :: forall a b. SamplerM a -&gt; (a -&gt; SamplerM b) -&gt; SamplerM b
$c&gt;&gt; :: forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b
&gt;&gt; :: forall a b. SamplerM a -&gt; SamplerM b -&gt; SamplerM b
$creturn :: forall a. a -&gt; SamplerM a
return :: forall a. a -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148112"><span class="annot"><span class="annottext">Monad SamplerM
Monad SamplerM =&gt;
(forall a. IO a -&gt; SamplerM a) -&gt; MonadIO SamplerM
forall a. IO a -&gt; SamplerM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; SamplerM a
liftIO :: forall a. IO a -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1678"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148124"><span class="annot"><span class="annottext">MonadThrow SamplerM
MonadThrow SamplerM =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 SamplerM a -&gt; (e -&gt; SamplerM a) -&gt; SamplerM a)
-&gt; MonadCatch SamplerM
forall e a.
(HasCallStack, Exception e) =&gt;
SamplerM a -&gt; (e -&gt; SamplerM a) -&gt; SamplerM a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
$ccatch :: forall e a.
(HasCallStack, Exception e) =&gt;
SamplerM a -&gt; (e -&gt; SamplerM a) -&gt; SamplerM a
catch :: forall e a.
(HasCallStack, Exception e) =&gt;
SamplerM a -&gt; (e -&gt; SamplerM a) -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148140"><span id="local-6989586621679148151"><span id="local-6989586621679148162"><span class="annot"><span class="annottext">MonadCatch SamplerM
MonadCatch SamplerM =&gt;
(forall b.
 HasCallStack =&gt;
 ((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    SamplerM a
    -&gt; (a -&gt; ExitCase b -&gt; SamplerM c)
    -&gt; (a -&gt; SamplerM b)
    -&gt; SamplerM (b, c))
-&gt; MonadMask SamplerM
forall b.
HasCallStack =&gt;
((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b
forall a b c.
HasCallStack =&gt;
SamplerM a
-&gt; (a -&gt; ExitCase b -&gt; SamplerM c)
-&gt; (a -&gt; SamplerM b)
-&gt; SamplerM (b, c)
forall (m :: * -&gt; *).
MonadCatch m =&gt;
(forall b. HasCallStack =&gt; ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    m a -&gt; (a -&gt; ExitCase b -&gt; m c) -&gt; (a -&gt; m b) -&gt; m (b, c))
-&gt; MonadMask m
$cmask :: forall b.
HasCallStack =&gt;
((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b
mask :: forall b.
HasCallStack =&gt;
((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b
$cuninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b
uninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. SamplerM a -&gt; SamplerM a) -&gt; SamplerM b) -&gt; SamplerM b
$cgeneralBracket :: forall a b c.
HasCallStack =&gt;
SamplerM a
-&gt; (a -&gt; ExitCase b -&gt; SamplerM c)
-&gt; (a -&gt; SamplerM b)
-&gt; SamplerM (b, c)
generalBracket :: forall a b c.
HasCallStack =&gt;
SamplerM a
-&gt; (a -&gt; ExitCase b -&gt; SamplerM c)
-&gt; (a -&gt; SamplerM b)
-&gt; SamplerM (b, c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadMask</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148178"><span class="annot"><span class="annottext">Monad SamplerM
Monad SamplerM =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SamplerM a)
-&gt; MonadThrow SamplerM
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SamplerM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a)
-&gt; MonadThrow m
$cthrowM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SamplerM a
throwM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span> </span><span class="hs-comment">-- @exceptions@</span><span>
</span><span id="line-1679"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148190"><span class="annot"><span class="annottext">MonadIO SamplerM
MonadIO SamplerM =&gt;
(forall b. ((forall a. SamplerM a -&gt; IO a) -&gt; IO b) -&gt; SamplerM b)
-&gt; MonadUnliftIO SamplerM
forall b. ((forall a. SamplerM a -&gt; IO a) -&gt; IO b) -&gt; SamplerM b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
$cwithRunInIO :: forall b. ((forall a. SamplerM a -&gt; IO a) -&gt; IO b) -&gt; SamplerM b
withRunInIO :: forall b. ((forall a. SamplerM a -&gt; IO a) -&gt; IO b) -&gt; SamplerM b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span> </span><span class="hs-comment">-- @unliftio-core@</span><span>
</span><span id="line-1680"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148200"><span class="annot"><span class="annottext">Monad SamplerM
Monad SamplerM =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SamplerM ())
-&gt; MonadLogger SamplerM
forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SamplerM ()
forall (m :: * -&gt; *).
Monad m =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; m ())
-&gt; MonadLogger m
$cmonadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SamplerM ()
monadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; SamplerM ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadLogger</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148211"><span class="annot"><span class="annottext">MonadIO SamplerM
MonadLogger SamplerM
SamplerM Logger
(MonadLogger SamplerM, MonadIO SamplerM) =&gt;
SamplerM Logger -&gt; MonadLoggerIO SamplerM
forall (m :: * -&gt; *).
(MonadLogger m, MonadIO m) =&gt;
m Logger -&gt; MonadLoggerIO m
$caskLoggerIO :: SamplerM Logger
askLoggerIO :: SamplerM Logger
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">MonadLoggerIO</span></span></span><span> </span><span class="hs-comment">-- @monad-logger@</span><span>
</span><span id="line-1681"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span>
</span><span id="line-1682"></span><span>    </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1683"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148217"><span id="local-6989586621679148221"><span id="local-6989586621679148227"><span class="annot"><span class="annottext">NonEmpty (SamplerM a) -&gt; SamplerM a
SamplerM a -&gt; SamplerM a -&gt; SamplerM a
(SamplerM a -&gt; SamplerM a -&gt; SamplerM a)
-&gt; (NonEmpty (SamplerM a) -&gt; SamplerM a)
-&gt; (forall b. Integral b =&gt; b -&gt; SamplerM a -&gt; SamplerM a)
-&gt; Semigroup (SamplerM a)
forall b. Integral b =&gt; b -&gt; SamplerM a -&gt; SamplerM a
forall a. Semigroup a =&gt; NonEmpty (SamplerM a) -&gt; SamplerM a
forall a. Semigroup a =&gt; SamplerM a -&gt; SamplerM a -&gt; SamplerM a
forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; SamplerM a -&gt; SamplerM a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: forall a. Semigroup a =&gt; SamplerM a -&gt; SamplerM a -&gt; SamplerM a
&lt;&gt; :: SamplerM a -&gt; SamplerM a -&gt; SamplerM a
$csconcat :: forall a. Semigroup a =&gt; NonEmpty (SamplerM a) -&gt; SamplerM a
sconcat :: NonEmpty (SamplerM a) -&gt; SamplerM a
$cstimes :: forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; SamplerM a -&gt; SamplerM a
stimes :: forall b. Integral b =&gt; b -&gt; SamplerM a -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148238"><span id="local-6989586621679148242"><span id="local-6989586621679148246"><span class="annot"><span class="annottext">Semigroup (SamplerM a)
SamplerM a
Semigroup (SamplerM a) =&gt;
SamplerM a
-&gt; (SamplerM a -&gt; SamplerM a -&gt; SamplerM a)
-&gt; ([SamplerM a] -&gt; SamplerM a)
-&gt; Monoid (SamplerM a)
[SamplerM a] -&gt; SamplerM a
SamplerM a -&gt; SamplerM a -&gt; SamplerM a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. Monoid a =&gt; Semigroup (SamplerM a)
forall a. Monoid a =&gt; SamplerM a
forall a. Monoid a =&gt; [SamplerM a] -&gt; SamplerM a
forall a. Monoid a =&gt; SamplerM a -&gt; SamplerM a -&gt; SamplerM a
$cmempty :: forall a. Monoid a =&gt; SamplerM a
mempty :: SamplerM a
$cmappend :: forall a. Monoid a =&gt; SamplerM a -&gt; SamplerM a -&gt; SamplerM a
mappend :: SamplerM a -&gt; SamplerM a -&gt; SamplerM a
$cmconcat :: forall a. Monoid a =&gt; [SamplerM a] -&gt; SamplerM a
mconcat :: [SamplerM a] -&gt; SamplerM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1684"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679145465"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1685"></span><span>
</span><span id="line-1686"></span><span id="local-6989586621679145297"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runSamplerM"><span class="hs-identifier hs-type">runSamplerM</span></a></span><span>
</span><span id="line-1687"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1688"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="annot"><a href="#local-6989586621679145297"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1689"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1690"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SamplerM"><span class="hs-identifier hs-type">SamplerM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145297"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1691"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145297"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1692"></span><span id="runSamplerM"><span class="annot"><span class="annottext">runSamplerM :: forall a.
Logger -&gt; OnException a -&gt; [SeriesElem] -&gt; SamplerM a -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runSamplerM"><span class="hs-identifier hs-var hs-var">runSamplerM</span></a></span></span><span> </span><span id="local-6989586621679148254"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148254"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679148255"><span class="annot"><span class="annottext">OnException a
</span><a href="#local-6989586621679148255"><span class="hs-identifier hs-var">onEx</span></a></span></span><span> </span><span id="local-6989586621679148256"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148256"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span id="local-6989586621679148257"><span class="annot"><span class="annottext">SamplerM a
</span><a href="#local-6989586621679148257"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1693"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT IO a -&gt; Logger -&gt; IO a)
-&gt; Logger -&gt; LoggingT IO a -&gt; IO a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; Logger -&gt; IO a
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148254"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1694"></span><span>    </span><span class="annot"><span class="annottext">SamplerM a -&gt; LoggingT IO a
forall a. SamplerM a -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unSamplerM"><span class="hs-identifier hs-var">unSamplerM</span></a></span><span> </span><span class="annot"><span class="annottext">SamplerM a
</span><a href="#local-6989586621679148257"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; (SomeException -&gt; LoggingT IO a) -&gt; LoggingT IO a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadCatch m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchAny`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148258"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679148258"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1695"></span><span>      </span><span class="annot"><span class="annottext">OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
forall a.
OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
</span><span class="hs-identifier hs-var">runOnException</span></span><span> </span><span class="annot"><span class="annottext">OnException a
</span><a href="#local-6989586621679148255"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679148258"><span class="hs-identifier hs-var">someEx</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148256"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1696"></span><span>
</span><span id="line-1697"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-type">IdGeneratorM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1698"></span><span class="hs-keyword">newtype</span><span> </span><span id="IdGeneratorM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-var">IdGeneratorM</span></a></span></span><span> </span><span id="local-6989586621679145508"><span class="annot"><a href="#local-6989586621679145508"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IdGeneratorM"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-var">IdGeneratorM</span></a></span></span><span>
</span><span id="line-1699"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unIdGeneratorM"><span class="annot"><span class="annottext">forall a. IdGeneratorM a -&gt; PRNG -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unIdGeneratorM"><span class="hs-identifier hs-var hs-var">unIdGeneratorM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145508"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1700"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1701"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148264"><span id="local-6989586621679148268"><span id="local-6989586621679148272"><span id="local-6989586621679148276"><span id="local-6989586621679148280"><span class="annot"><span class="annottext">Functor IdGeneratorM
Functor IdGeneratorM =&gt;
(forall a. a -&gt; IdGeneratorM a)
-&gt; (forall a b.
    IdGeneratorM (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM c)
-&gt; (forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b)
-&gt; (forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM a)
-&gt; Applicative IdGeneratorM
forall a. a -&gt; IdGeneratorM a
forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM a
forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b
forall a b.
IdGeneratorM (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
forall a b c.
(a -&gt; b -&gt; c) -&gt; IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; IdGeneratorM a
pure :: forall a. a -&gt; IdGeneratorM a
$c&lt;*&gt; :: forall a b.
IdGeneratorM (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
&lt;*&gt; :: forall a b.
IdGeneratorM (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM c
$c*&gt; :: forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b
*&gt; :: forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b
$c&lt;* :: forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM a
&lt;* :: forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148284"><span id="local-6989586621679148289"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b)
-&gt; (forall a b. a -&gt; IdGeneratorM b -&gt; IdGeneratorM a)
-&gt; Functor IdGeneratorM
forall a b. a -&gt; IdGeneratorM b -&gt; IdGeneratorM a
forall a b. (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
fmap :: forall a b. (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
$c&lt;$ :: forall a b. a -&gt; IdGeneratorM b -&gt; IdGeneratorM a
&lt;$ :: forall a b. a -&gt; IdGeneratorM b -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148296"><span id="local-6989586621679148301"><span id="local-6989586621679148306"><span class="annot"><span class="annottext">Applicative IdGeneratorM
Applicative IdGeneratorM =&gt;
(forall a b.
 IdGeneratorM a -&gt; (a -&gt; IdGeneratorM b) -&gt; IdGeneratorM b)
-&gt; (forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b)
-&gt; (forall a. a -&gt; IdGeneratorM a)
-&gt; Monad IdGeneratorM
forall a. a -&gt; IdGeneratorM a
forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b
forall a b.
IdGeneratorM a -&gt; (a -&gt; IdGeneratorM b) -&gt; IdGeneratorM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b.
IdGeneratorM a -&gt; (a -&gt; IdGeneratorM b) -&gt; IdGeneratorM b
&gt;&gt;= :: forall a b.
IdGeneratorM a -&gt; (a -&gt; IdGeneratorM b) -&gt; IdGeneratorM b
$c&gt;&gt; :: forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b
&gt;&gt; :: forall a b. IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM b
$creturn :: forall a. a -&gt; IdGeneratorM a
return :: forall a. a -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148314"><span class="annot"><span class="annottext">Monad IdGeneratorM
Monad IdGeneratorM =&gt;
(forall a. IO a -&gt; IdGeneratorM a) -&gt; MonadIO IdGeneratorM
forall a. IO a -&gt; IdGeneratorM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; IdGeneratorM a
liftIO :: forall a. IO a -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1702"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148328"><span class="annot"><span class="annottext">MonadThrow IdGeneratorM
MonadThrow IdGeneratorM =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 IdGeneratorM a -&gt; (e -&gt; IdGeneratorM a) -&gt; IdGeneratorM a)
-&gt; MonadCatch IdGeneratorM
forall e a.
(HasCallStack, Exception e) =&gt;
IdGeneratorM a -&gt; (e -&gt; IdGeneratorM a) -&gt; IdGeneratorM a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
$ccatch :: forall e a.
(HasCallStack, Exception e) =&gt;
IdGeneratorM a -&gt; (e -&gt; IdGeneratorM a) -&gt; IdGeneratorM a
catch :: forall e a.
(HasCallStack, Exception e) =&gt;
IdGeneratorM a -&gt; (e -&gt; IdGeneratorM a) -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148345"><span id="local-6989586621679148356"><span id="local-6989586621679148367"><span class="annot"><span class="annottext">MonadCatch IdGeneratorM
MonadCatch IdGeneratorM =&gt;
(forall b.
 HasCallStack =&gt;
 ((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
 -&gt; IdGeneratorM b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
    -&gt; IdGeneratorM b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    IdGeneratorM a
    -&gt; (a -&gt; ExitCase b -&gt; IdGeneratorM c)
    -&gt; (a -&gt; IdGeneratorM b)
    -&gt; IdGeneratorM (b, c))
-&gt; MonadMask IdGeneratorM
forall b.
HasCallStack =&gt;
((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
-&gt; IdGeneratorM b
forall a b c.
HasCallStack =&gt;
IdGeneratorM a
-&gt; (a -&gt; ExitCase b -&gt; IdGeneratorM c)
-&gt; (a -&gt; IdGeneratorM b)
-&gt; IdGeneratorM (b, c)
forall (m :: * -&gt; *).
MonadCatch m =&gt;
(forall b. HasCallStack =&gt; ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    m a -&gt; (a -&gt; ExitCase b -&gt; m c) -&gt; (a -&gt; m b) -&gt; m (b, c))
-&gt; MonadMask m
$cmask :: forall b.
HasCallStack =&gt;
((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
-&gt; IdGeneratorM b
mask :: forall b.
HasCallStack =&gt;
((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
-&gt; IdGeneratorM b
$cuninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
-&gt; IdGeneratorM b
uninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. IdGeneratorM a -&gt; IdGeneratorM a) -&gt; IdGeneratorM b)
-&gt; IdGeneratorM b
$cgeneralBracket :: forall a b c.
HasCallStack =&gt;
IdGeneratorM a
-&gt; (a -&gt; ExitCase b -&gt; IdGeneratorM c)
-&gt; (a -&gt; IdGeneratorM b)
-&gt; IdGeneratorM (b, c)
generalBracket :: forall a b c.
HasCallStack =&gt;
IdGeneratorM a
-&gt; (a -&gt; ExitCase b -&gt; IdGeneratorM c)
-&gt; (a -&gt; IdGeneratorM b)
-&gt; IdGeneratorM (b, c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadMask</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148386"><span class="annot"><span class="annottext">Monad IdGeneratorM
Monad IdGeneratorM =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; IdGeneratorM a)
-&gt; MonadThrow IdGeneratorM
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; IdGeneratorM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a)
-&gt; MonadThrow m
$cthrowM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; IdGeneratorM a
throwM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span> </span><span class="hs-comment">-- @exceptions@</span><span>
</span><span id="line-1703"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148399"><span class="annot"><span class="annottext">MonadIO IdGeneratorM
MonadIO IdGeneratorM =&gt;
(forall b.
 ((forall a. IdGeneratorM a -&gt; IO a) -&gt; IO b) -&gt; IdGeneratorM b)
-&gt; MonadUnliftIO IdGeneratorM
forall b.
((forall a. IdGeneratorM a -&gt; IO a) -&gt; IO b) -&gt; IdGeneratorM b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
$cwithRunInIO :: forall b.
((forall a. IdGeneratorM a -&gt; IO a) -&gt; IO b) -&gt; IdGeneratorM b
withRunInIO :: forall b.
((forall a. IdGeneratorM a -&gt; IO a) -&gt; IO b) -&gt; IdGeneratorM b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span> </span><span class="hs-comment">-- @unliftio-core@</span><span>
</span><span id="line-1704"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148410"><span class="annot"><span class="annottext">Monad IdGeneratorM
Monad IdGeneratorM =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; IdGeneratorM ())
-&gt; MonadLogger IdGeneratorM
forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; IdGeneratorM ()
forall (m :: * -&gt; *).
Monad m =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; m ())
-&gt; MonadLogger m
$cmonadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; IdGeneratorM ()
monadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; IdGeneratorM ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadLogger</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148422"><span class="annot"><span class="annottext">MonadIO IdGeneratorM
MonadLogger IdGeneratorM
IdGeneratorM Logger
(MonadLogger IdGeneratorM, MonadIO IdGeneratorM) =&gt;
IdGeneratorM Logger -&gt; MonadLoggerIO IdGeneratorM
forall (m :: * -&gt; *).
(MonadLogger m, MonadIO m) =&gt;
m Logger -&gt; MonadLoggerIO m
$caskLoggerIO :: IdGeneratorM Logger
askLoggerIO :: IdGeneratorM Logger
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">MonadLoggerIO</span></span></span><span> </span><span class="hs-comment">-- @monad-logger@</span><span>
</span><span id="line-1705"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1706"></span><span>    </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1707"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148429"><span id="local-6989586621679148434"><span id="local-6989586621679148441"><span class="annot"><span class="annottext">NonEmpty (IdGeneratorM a) -&gt; IdGeneratorM a
IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
(IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a)
-&gt; (NonEmpty (IdGeneratorM a) -&gt; IdGeneratorM a)
-&gt; (forall b. Integral b =&gt; b -&gt; IdGeneratorM a -&gt; IdGeneratorM a)
-&gt; Semigroup (IdGeneratorM a)
forall b. Integral b =&gt; b -&gt; IdGeneratorM a -&gt; IdGeneratorM a
forall a.
Semigroup a =&gt;
NonEmpty (IdGeneratorM a) -&gt; IdGeneratorM a
forall a.
Semigroup a =&gt;
IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; IdGeneratorM a -&gt; IdGeneratorM a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: forall a.
Semigroup a =&gt;
IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
&lt;&gt; :: IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
$csconcat :: forall a.
Semigroup a =&gt;
NonEmpty (IdGeneratorM a) -&gt; IdGeneratorM a
sconcat :: NonEmpty (IdGeneratorM a) -&gt; IdGeneratorM a
$cstimes :: forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; IdGeneratorM a -&gt; IdGeneratorM a
stimes :: forall b. Integral b =&gt; b -&gt; IdGeneratorM a -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148453"><span id="local-6989586621679148458"><span id="local-6989586621679148463"><span class="annot"><span class="annottext">Semigroup (IdGeneratorM a)
IdGeneratorM a
Semigroup (IdGeneratorM a) =&gt;
IdGeneratorM a
-&gt; (IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a)
-&gt; ([IdGeneratorM a] -&gt; IdGeneratorM a)
-&gt; Monoid (IdGeneratorM a)
[IdGeneratorM a] -&gt; IdGeneratorM a
IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. Monoid a =&gt; Semigroup (IdGeneratorM a)
forall a. Monoid a =&gt; IdGeneratorM a
forall a. Monoid a =&gt; [IdGeneratorM a] -&gt; IdGeneratorM a
forall a.
Monoid a =&gt;
IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
$cmempty :: forall a. Monoid a =&gt; IdGeneratorM a
mempty :: IdGeneratorM a
$cmappend :: forall a.
Monoid a =&gt;
IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
mappend :: IdGeneratorM a -&gt; IdGeneratorM a -&gt; IdGeneratorM a
$cmconcat :: forall a. Monoid a =&gt; [IdGeneratorM a] -&gt; IdGeneratorM a
mconcat :: [IdGeneratorM a] -&gt; IdGeneratorM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1708"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679145508"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1709"></span><span>
</span><span id="line-1710"></span><span id="local-6989586621679145550"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#runIdGeneratorM"><span class="hs-identifier hs-type">runIdGeneratorM</span></a></span><span>
</span><span id="line-1711"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span>
</span><span id="line-1712"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1713"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-type">IdGeneratorM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145550"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1714"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145550"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1715"></span><span id="runIdGeneratorM"><span class="annot"><span class="annottext">runIdGeneratorM :: forall a. PRNG -&gt; Logger -&gt; IdGeneratorM a -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runIdGeneratorM"><span class="hs-identifier hs-var hs-var">runIdGeneratorM</span></a></span></span><span> </span><span id="local-6989586621679148468"><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148468"><span class="hs-identifier hs-var">prng</span></a></span></span><span> </span><span id="local-6989586621679148469"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148469"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679148470"><span class="annot"><span class="annottext">IdGeneratorM a
</span><a href="#local-6989586621679148470"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1716"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT IO a -&gt; Logger -&gt; IO a)
-&gt; Logger -&gt; LoggingT IO a -&gt; IO a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO a -&gt; Logger -&gt; IO a
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148469"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1717"></span><span>    </span><span class="annot"><span class="annottext">IdGeneratorM a -&gt; PRNG -&gt; LoggingT IO a
forall a. IdGeneratorM a -&gt; PRNG -&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#unIdGeneratorM"><span class="hs-identifier hs-var">unIdGeneratorM</span></a></span><span> </span><span class="annot"><span class="annottext">IdGeneratorM a
</span><a href="#local-6989586621679148470"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148468"><span class="hs-identifier hs-var">prng</span></a></span><span>
</span><span id="line-1718"></span><span>
</span><span id="line-1719"></span><span class="hs-keyword">data</span><span> </span><span id="IdGenerator"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-var">IdGenerator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IdGenerator"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-var">IdGenerator</span></a></span></span><span>
</span><span id="line-1720"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="idGeneratorGenTraceId"><span class="annot"><span class="annottext">IdGenerator -&gt; PRNG -&gt; IO TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenTraceId"><span class="hs-identifier hs-var hs-var">idGeneratorGenTraceId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceId</span></span><span>
</span><span id="line-1721"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="idGeneratorGenSpanId"><span class="annot"><span class="annottext">IdGenerator -&gt; PRNG -&gt; IO SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenSpanId"><span class="hs-identifier hs-var hs-var">idGeneratorGenSpanId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanId</span></span><span>
</span><span id="line-1722"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1723"></span><span>
</span><span id="line-1724"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#buildIdGenerator"><span class="hs-identifier hs-type">buildIdGenerator</span></a></span><span>
</span><span id="line-1725"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679144919"><span class="annot"><a href="#local-6989586621679144919"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-1726"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144919"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1727"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1728"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-type">IdGeneratorSpec</span></a></span><span>
</span><span id="line-1729"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679144919"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-1730"></span><span id="buildIdGenerator"><span class="annot"><span class="annottext">buildIdGenerator :: forall (m :: * -&gt; *).
MonadIO m =&gt;
Logger -&gt; IdGeneratorSpec -&gt; m IdGenerator
</span><a href="OTel.SDK.Trace.Internal.html#buildIdGenerator"><span class="hs-identifier hs-var hs-var">buildIdGenerator</span></a></span></span><span> </span><span id="local-6989586621679148483"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148483"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621679148484"><span class="annot"><span class="annottext">IdGeneratorSpec
</span><a href="#local-6989586621679148484"><span class="hs-identifier hs-var">idGeneratorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1731"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT m () -&gt; Logger -&gt; m ())
-&gt; Logger -&gt; LoggingT m () -&gt; m ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT m () -&gt; Logger -&gt; m ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148483"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1732"></span><span>    </span><span class="annot"><span class="annottext">Message -&gt; LoggingT m ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT m ()) -&gt; Message -&gt; LoggingT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Building ID generator&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1733"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679148485"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1734"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1735"></span><span>  </span><span class="annot"><span class="annottext">IdGenerator -&gt; m IdGenerator
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGenerator"><span class="hs-identifier hs-type">IdGenerator</span></a></span><span>
</span><span id="line-1736"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">idGeneratorGenTraceId :: PRNG -&gt; IO TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenTraceId"><span class="hs-identifier hs-var">idGeneratorGenTraceId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148486"><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148486"><span class="hs-identifier hs-var">prng</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1737"></span><span>        </span><span class="annot"><span class="annottext">PRNG -&gt; Logger -&gt; IdGeneratorM TraceId -&gt; IO TraceId
forall a. PRNG -&gt; Logger -&gt; IdGeneratorM a -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runIdGeneratorM"><span class="hs-identifier hs-var">runIdGeneratorM</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148486"><span class="hs-identifier hs-var">prng</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148483"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">IdGeneratorM TraceId
</span><a href="#local-6989586621679148487"><span class="hs-identifier hs-var">genTraceId</span></a></span><span>
</span><span id="line-1738"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">idGeneratorGenSpanId :: PRNG -&gt; IO SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorGenSpanId"><span class="hs-identifier hs-var">idGeneratorGenSpanId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148488"><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148488"><span class="hs-identifier hs-var">prng</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1739"></span><span>        </span><span class="annot"><span class="annottext">PRNG -&gt; Logger -&gt; IdGeneratorM SpanId -&gt; IO SpanId
forall a. PRNG -&gt; Logger -&gt; IdGeneratorM a -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#runIdGeneratorM"><span class="hs-identifier hs-var">runIdGeneratorM</span></a></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148488"><span class="hs-identifier hs-var">prng</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679148483"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">IdGeneratorM SpanId
</span><a href="#local-6989586621679148489"><span class="hs-identifier hs-var">genSpanId</span></a></span><span>
</span><span id="line-1740"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1741"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1742"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-type">IdGeneratorSpec</span></a></span><span>
</span><span id="line-1743"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">idGeneratorSpecName :: IdGeneratorSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecName"><span class="hs-identifier hs-var">idGeneratorSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679148485"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679148485"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1744"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">idGeneratorSpecGenTraceId :: IdGeneratorSpec -&gt; IdGeneratorM TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecGenTraceId"><span class="hs-identifier hs-var">idGeneratorSpecGenTraceId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679148487"><span class="annot"><span class="annottext">IdGeneratorM TraceId
</span><a href="#local-6989586621679148487"><span class="hs-identifier hs-var">genTraceId</span></a></span></span><span>
</span><span id="line-1745"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">idGeneratorSpecGenSpanId :: IdGeneratorSpec -&gt; IdGeneratorM SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecGenSpanId"><span class="hs-identifier hs-var">idGeneratorSpecGenSpanId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679148489"><span class="annot"><span class="annottext">IdGeneratorM SpanId
</span><a href="#local-6989586621679148489"><span class="hs-identifier hs-var">genSpanId</span></a></span></span><span>
</span><span id="line-1746"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdGeneratorSpec
</span><a href="#local-6989586621679148484"><span class="hs-identifier hs-var">idGeneratorSpec</span></a></span><span>
</span><span id="line-1747"></span><span>
</span><span id="line-1748"></span><span class="hs-keyword">data</span><span> </span><span id="IdGeneratorSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-var">IdGeneratorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IdGeneratorSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-var">IdGeneratorSpec</span></a></span></span><span>
</span><span id="line-1749"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="idGeneratorSpecName"><span class="annot"><span class="annottext">IdGeneratorSpec -&gt; Text
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecName"><span class="hs-identifier hs-var hs-var">idGeneratorSpecName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1750"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="idGeneratorSpecGenTraceId"><span class="annot"><span class="annottext">IdGeneratorSpec -&gt; IdGeneratorM TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecGenTraceId"><span class="hs-identifier hs-var hs-var">idGeneratorSpecGenTraceId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-type">IdGeneratorM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceId</span></span><span>
</span><span id="line-1751"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="idGeneratorSpecGenSpanId"><span class="annot"><span class="annottext">IdGeneratorSpec -&gt; IdGeneratorM SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecGenSpanId"><span class="hs-identifier hs-var hs-var">idGeneratorSpecGenSpanId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-type">IdGeneratorM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SpanId</span></span><span>
</span><span id="line-1752"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1753"></span><span>
</span><span id="line-1754"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultIdGeneratorSpec"><span class="hs-identifier hs-type">defaultIdGeneratorSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-type">IdGeneratorSpec</span></a></span><span>
</span><span id="line-1755"></span><span id="defaultIdGeneratorSpec"><span class="annot"><span class="annottext">defaultIdGeneratorSpec :: IdGeneratorSpec
</span><a href="OTel.SDK.Trace.Internal.html#defaultIdGeneratorSpec"><span class="hs-identifier hs-var hs-var">defaultIdGeneratorSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1756"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorSpec"><span class="hs-identifier hs-type">IdGeneratorSpec</span></a></span><span>
</span><span id="line-1757"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">idGeneratorSpecName :: Text
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecName"><span class="hs-identifier hs-var">idGeneratorSpecName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;default&quot;</span></span><span>
</span><span id="line-1758"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">idGeneratorSpecGenTraceId :: IdGeneratorM TraceId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecGenTraceId"><span class="hs-identifier hs-var">idGeneratorSpecGenTraceId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Word64 -&gt; TraceId)
-&gt; IdGeneratorM Word64
-&gt; IdGeneratorM Word64
-&gt; IdGeneratorM TraceId
forall a b c.
(a -&gt; b -&gt; c) -&gt; IdGeneratorM a -&gt; IdGeneratorM b -&gt; IdGeneratorM c
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; TraceId
</span><span class="hs-identifier hs-var">traceIdFromWords</span></span><span> </span><span class="annot"><span class="annottext">IdGeneratorM Word64
forall a. Variate a =&gt; IdGeneratorM a
</span><a href="OTel.SDK.Trace.Internal.html#genUniform"><span class="hs-identifier hs-var">genUniform</span></a></span><span> </span><span class="annot"><span class="annottext">IdGeneratorM Word64
forall a. Variate a =&gt; IdGeneratorM a
</span><a href="OTel.SDK.Trace.Internal.html#genUniform"><span class="hs-identifier hs-var">genUniform</span></a></span><span>
</span><span id="line-1759"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">idGeneratorSpecGenSpanId :: IdGeneratorM SpanId
</span><a href="OTel.SDK.Trace.Internal.html#idGeneratorSpecGenSpanId"><span class="hs-identifier hs-var">idGeneratorSpecGenSpanId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; SpanId) -&gt; IdGeneratorM Word64 -&gt; IdGeneratorM SpanId
forall a b. (a -&gt; b) -&gt; IdGeneratorM a -&gt; IdGeneratorM b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; SpanId
</span><span class="hs-identifier hs-var">spanIdFromWords</span></span><span> </span><span class="annot"><span class="annottext">IdGeneratorM Word64
forall a. Variate a =&gt; IdGeneratorM a
</span><a href="OTel.SDK.Trace.Internal.html#genUniform"><span class="hs-identifier hs-var">genUniform</span></a></span><span>
</span><span id="line-1760"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1761"></span><span>
</span><span id="line-1762"></span><span class="hs-keyword">newtype</span><span> </span><span id="PRNG"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-var">PRNG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PRNG"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-var">PRNG</span></a></span></span><span>
</span><span id="line-1763"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unPRNG"><span class="annot"><span class="annottext">PRNG -&gt; GenIO
</span><a href="OTel.SDK.Trace.Internal.html#unPRNG"><span class="hs-identifier hs-var hs-var">unPRNG</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">GenIO</span></span><span>
</span><span id="line-1764"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1765"></span><span>
</span><span id="line-1766"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#genUniform"><span class="hs-identifier hs-type">genUniform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145553"><span class="annot"><a href="#local-6989586621679145553"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Variate</span></span><span> </span><span class="annot"><a href="#local-6989586621679145553"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-type">IdGeneratorM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145553"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1767"></span><span id="genUniform"><span class="annot"><span class="annottext">genUniform :: forall a. Variate a =&gt; IdGeneratorM a
</span><a href="OTel.SDK.Trace.Internal.html#genUniform"><span class="hs-identifier hs-var hs-var">genUniform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1768"></span><span>  </span><span class="annot"><span class="annottext">(PRNG -&gt; LoggingT IO a) -&gt; IdGeneratorM a
forall a. (PRNG -&gt; LoggingT IO a) -&gt; IdGeneratorM a
</span><a href="OTel.SDK.Trace.Internal.html#IdGeneratorM"><span class="hs-identifier hs-var">IdGeneratorM</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unPRNG :: PRNG -&gt; GenIO
</span><a href="OTel.SDK.Trace.Internal.html#unPRNG"><span class="hs-identifier hs-var">unPRNG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679148500"><span class="annot"><span class="annottext">GenIO
</span><a href="#local-6989586621679148500"><span class="hs-identifier hs-var">gen</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; LoggingT IO a
forall a. IO a -&gt; LoggingT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; LoggingT IO a) -&gt; IO a -&gt; LoggingT IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GenIO -&gt; IO a
forall a (m :: * -&gt; *).
(Variate a, PrimMonad m) =&gt;
Gen (PrimState m) -&gt; m a
forall (m :: * -&gt; *). PrimMonad m =&gt; Gen (PrimState m) -&gt; m a
</span><span class="hs-identifier hs-var">uniform</span></span><span> </span><span class="annot"><span class="annottext">GenIO
</span><a href="#local-6989586621679148500"><span class="hs-identifier hs-var">gen</span></a></span><span>
</span><span id="line-1769"></span><span>
</span><span id="line-1770"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#newPRNGRef"><span class="hs-identifier hs-type">newPRNGRef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Seed</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-type">PRNG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1771"></span><span id="newPRNGRef"><span class="annot"><span class="annottext">newPRNGRef :: Seed -&gt; IO (MVar PRNG)
</span><a href="OTel.SDK.Trace.Internal.html#newPRNGRef"><span class="hs-identifier hs-var hs-var">newPRNGRef</span></a></span></span><span> </span><span id="local-6989586621679148501"><span class="annot"><span class="annottext">Seed
</span><a href="#local-6989586621679148501"><span class="hs-identifier hs-var">seed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1772"></span><span>  </span><span id="local-6989586621679148502"><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148502"><span class="hs-identifier hs-var">prng</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Gen RealWorld -&gt; PRNG) -&gt; IO (Gen RealWorld) -&gt; IO PRNG
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Gen RealWorld -&gt; PRNG
GenIO -&gt; PRNG
</span><a href="OTel.SDK.Trace.Internal.html#PRNG"><span class="hs-identifier hs-var">PRNG</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Gen RealWorld) -&gt; IO PRNG) -&gt; IO (Gen RealWorld) -&gt; IO PRNG
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vector Word32 -&gt; IO GenIO
forall (m :: * -&gt; *) (v :: * -&gt; *).
(PrimMonad m, Vector v Word32) =&gt;
v Word32 -&gt; m (Gen (PrimState m))
</span><span class="hs-identifier hs-var">initialize</span></span><span> </span><span class="annot"><span class="annottext">(Vector Word32 -&gt; IO GenIO) -&gt; Vector Word32 -&gt; IO GenIO
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Seed -&gt; Vector Word32
</span><span class="hs-identifier hs-var">fromSeed</span></span><span> </span><span class="annot"><span class="annottext">Seed
</span><a href="#local-6989586621679148501"><span class="hs-identifier hs-var">seed</span></a></span><span>
</span><span id="line-1773"></span><span>  </span><span class="annot"><span class="annottext">PRNG -&gt; IO (MVar PRNG)
forall a. a -&gt; IO (MVar a)
</span><span class="hs-identifier hs-var">newMVar</span></span><span> </span><span class="annot"><span class="annottext">PRNG
</span><a href="#local-6989586621679148502"><span class="hs-identifier hs-var">prng</span></a></span><span>
</span><span id="line-1774"></span><span>
</span><span id="line-1775"></span><span class="hs-keyword">newtype</span><span> </span><span id="OnSpansExported"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-var">OnSpansExported</span></a></span></span><span> </span><span id="local-6989586621679145028"><span class="annot"><a href="#local-6989586621679145028"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OnSpansExported"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-var">OnSpansExported</span></a></span></span><span>
</span><span id="line-1776"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="runOnSpansExported"><span class="annot"><span class="annottext">forall a.
OnSpansExported a
-&gt; Batch (Span Attrs)
-&gt; SpanExportResult
-&gt; [SeriesElem]
-&gt; LoggingT IO a
</span><a href="OTel.SDK.Trace.Internal.html#runOnSpansExported"><span class="hs-identifier hs-var hs-var">runOnSpansExported</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145028"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1777"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1778"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148508"><span id="local-6989586621679148513"><span id="local-6989586621679148518"><span id="local-6989586621679148523"><span id="local-6989586621679148528"><span class="annot"><span class="annottext">Functor OnSpansExported
Functor OnSpansExported =&gt;
(forall a. a -&gt; OnSpansExported a)
-&gt; (forall a b.
    OnSpansExported (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported c)
-&gt; (forall a b.
    OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b)
-&gt; (forall a b.
    OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported a)
-&gt; Applicative OnSpansExported
forall a. a -&gt; OnSpansExported a
forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported a
forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b
forall a b.
OnSpansExported (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; OnSpansExported a
pure :: forall a. a -&gt; OnSpansExported a
$c&lt;*&gt; :: forall a b.
OnSpansExported (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b
&lt;*&gt; :: forall a b.
OnSpansExported (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported c
$c*&gt; :: forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b
*&gt; :: forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b
$c&lt;* :: forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported a
&lt;* :: forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148538"><span id="local-6989586621679148543"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b)
-&gt; (forall a b. a -&gt; OnSpansExported b -&gt; OnSpansExported a)
-&gt; Functor OnSpansExported
forall a b. a -&gt; OnSpansExported b -&gt; OnSpansExported a
forall a b. (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b
fmap :: forall a b. (a -&gt; b) -&gt; OnSpansExported a -&gt; OnSpansExported b
$c&lt;$ :: forall a b. a -&gt; OnSpansExported b -&gt; OnSpansExported a
&lt;$ :: forall a b. a -&gt; OnSpansExported b -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148554"><span id="local-6989586621679148559"><span id="local-6989586621679148564"><span class="annot"><span class="annottext">Applicative OnSpansExported
Applicative OnSpansExported =&gt;
(forall a b.
 OnSpansExported a -&gt; (a -&gt; OnSpansExported b) -&gt; OnSpansExported b)
-&gt; (forall a b.
    OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b)
-&gt; (forall a. a -&gt; OnSpansExported a)
-&gt; Monad OnSpansExported
forall a. a -&gt; OnSpansExported a
forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b
forall a b.
OnSpansExported a -&gt; (a -&gt; OnSpansExported b) -&gt; OnSpansExported b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b.
OnSpansExported a -&gt; (a -&gt; OnSpansExported b) -&gt; OnSpansExported b
&gt;&gt;= :: forall a b.
OnSpansExported a -&gt; (a -&gt; OnSpansExported b) -&gt; OnSpansExported b
$c&gt;&gt; :: forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b
&gt;&gt; :: forall a b.
OnSpansExported a -&gt; OnSpansExported b -&gt; OnSpansExported b
$creturn :: forall a. a -&gt; OnSpansExported a
return :: forall a. a -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148577"><span class="annot"><span class="annottext">Monad OnSpansExported
Monad OnSpansExported =&gt;
(forall a. IO a -&gt; OnSpansExported a) -&gt; MonadIO OnSpansExported
forall a. IO a -&gt; OnSpansExported a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; OnSpansExported a
liftIO :: forall a. IO a -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1779"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148593"><span class="annot"><span class="annottext">MonadThrow OnSpansExported
MonadThrow OnSpansExported =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 OnSpansExported a -&gt; (e -&gt; OnSpansExported a) -&gt; OnSpansExported a)
-&gt; MonadCatch OnSpansExported
forall e a.
(HasCallStack, Exception e) =&gt;
OnSpansExported a -&gt; (e -&gt; OnSpansExported a) -&gt; OnSpansExported a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
$ccatch :: forall e a.
(HasCallStack, Exception e) =&gt;
OnSpansExported a -&gt; (e -&gt; OnSpansExported a) -&gt; OnSpansExported a
catch :: forall e a.
(HasCallStack, Exception e) =&gt;
OnSpansExported a -&gt; (e -&gt; OnSpansExported a) -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148612"><span id="local-6989586621679148623"><span id="local-6989586621679148634"><span class="annot"><span class="annottext">MonadCatch OnSpansExported
MonadCatch OnSpansExported =&gt;
(forall b.
 HasCallStack =&gt;
 ((forall a. OnSpansExported a -&gt; OnSpansExported a)
  -&gt; OnSpansExported b)
 -&gt; OnSpansExported b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. OnSpansExported a -&gt; OnSpansExported a)
     -&gt; OnSpansExported b)
    -&gt; OnSpansExported b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    OnSpansExported a
    -&gt; (a -&gt; ExitCase b -&gt; OnSpansExported c)
    -&gt; (a -&gt; OnSpansExported b)
    -&gt; OnSpansExported (b, c))
-&gt; MonadMask OnSpansExported
forall b.
HasCallStack =&gt;
((forall a. OnSpansExported a -&gt; OnSpansExported a)
 -&gt; OnSpansExported b)
-&gt; OnSpansExported b
forall a b c.
HasCallStack =&gt;
OnSpansExported a
-&gt; (a -&gt; ExitCase b -&gt; OnSpansExported c)
-&gt; (a -&gt; OnSpansExported b)
-&gt; OnSpansExported (b, c)
forall (m :: * -&gt; *).
MonadCatch m =&gt;
(forall b. HasCallStack =&gt; ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall b.
    HasCallStack =&gt;
    ((forall a. m a -&gt; m a) -&gt; m b) -&gt; m b)
-&gt; (forall a b c.
    HasCallStack =&gt;
    m a -&gt; (a -&gt; ExitCase b -&gt; m c) -&gt; (a -&gt; m b) -&gt; m (b, c))
-&gt; MonadMask m
$cmask :: forall b.
HasCallStack =&gt;
((forall a. OnSpansExported a -&gt; OnSpansExported a)
 -&gt; OnSpansExported b)
-&gt; OnSpansExported b
mask :: forall b.
HasCallStack =&gt;
((forall a. OnSpansExported a -&gt; OnSpansExported a)
 -&gt; OnSpansExported b)
-&gt; OnSpansExported b
$cuninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. OnSpansExported a -&gt; OnSpansExported a)
 -&gt; OnSpansExported b)
-&gt; OnSpansExported b
uninterruptibleMask :: forall b.
HasCallStack =&gt;
((forall a. OnSpansExported a -&gt; OnSpansExported a)
 -&gt; OnSpansExported b)
-&gt; OnSpansExported b
$cgeneralBracket :: forall a b c.
HasCallStack =&gt;
OnSpansExported a
-&gt; (a -&gt; ExitCase b -&gt; OnSpansExported c)
-&gt; (a -&gt; OnSpansExported b)
-&gt; OnSpansExported (b, c)
generalBracket :: forall a b c.
HasCallStack =&gt;
OnSpansExported a
-&gt; (a -&gt; ExitCase b -&gt; OnSpansExported c)
-&gt; (a -&gt; OnSpansExported b)
-&gt; OnSpansExported (b, c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadMask</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148659"><span class="annot"><span class="annottext">Monad OnSpansExported
Monad OnSpansExported =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; OnSpansExported a)
-&gt; MonadThrow OnSpansExported
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; OnSpansExported a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a)
-&gt; MonadThrow m
$cthrowM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; OnSpansExported a
throwM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span> </span><span class="hs-comment">-- @exceptions@</span><span>
</span><span id="line-1780"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148674"><span class="annot"><span class="annottext">MonadIO OnSpansExported
MonadIO OnSpansExported =&gt;
(forall b.
 ((forall a. OnSpansExported a -&gt; IO a) -&gt; IO b)
 -&gt; OnSpansExported b)
-&gt; MonadUnliftIO OnSpansExported
forall b.
((forall a. OnSpansExported a -&gt; IO a) -&gt; IO b)
-&gt; OnSpansExported b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
$cwithRunInIO :: forall b.
((forall a. OnSpansExported a -&gt; IO a) -&gt; IO b)
-&gt; OnSpansExported b
withRunInIO :: forall b.
((forall a. OnSpansExported a -&gt; IO a) -&gt; IO b)
-&gt; OnSpansExported b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span> </span><span class="hs-comment">-- @unliftio-core@</span><span>
</span><span id="line-1781"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148687"><span class="annot"><span class="annottext">Monad OnSpansExported
Monad OnSpansExported =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; OnSpansExported ())
-&gt; MonadLogger OnSpansExported
forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; OnSpansExported ()
forall (m :: * -&gt; *).
Monad m =&gt;
(forall msg.
 ToLogStr msg =&gt;
 Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; m ())
-&gt; MonadLogger m
$cmonadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; OnSpansExported ()
monadLoggerLog :: forall msg.
ToLogStr msg =&gt;
Loc -&gt; Text -&gt; LogLevel -&gt; msg -&gt; OnSpansExported ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadLogger</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148700"><span class="annot"><span class="annottext">MonadIO OnSpansExported
MonadLogger OnSpansExported
OnSpansExported Logger
(MonadLogger OnSpansExported, MonadIO OnSpansExported) =&gt;
OnSpansExported Logger -&gt; MonadLoggerIO OnSpansExported
forall (m :: * -&gt; *).
(MonadLogger m, MonadIO m) =&gt;
m Logger -&gt; MonadLoggerIO m
$caskLoggerIO :: OnSpansExported Logger
askLoggerIO :: OnSpansExported Logger
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">MonadLoggerIO</span></span></span><span> </span><span class="hs-comment">-- @monad-logger@</span><span>
</span><span id="line-1782"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1783"></span><span>    </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-1784"></span><span>      </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679148709"><span id="local-6989586621679148714"><span id="local-6989586621679148721"><span class="annot"><span class="annottext">NonEmpty (OnSpansExported a) -&gt; OnSpansExported a
OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
(OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a)
-&gt; (NonEmpty (OnSpansExported a) -&gt; OnSpansExported a)
-&gt; (forall b.
    Integral b =&gt;
    b -&gt; OnSpansExported a -&gt; OnSpansExported a)
-&gt; Semigroup (OnSpansExported a)
forall b. Integral b =&gt; b -&gt; OnSpansExported a -&gt; OnSpansExported a
forall a.
Semigroup a =&gt;
NonEmpty (OnSpansExported a) -&gt; OnSpansExported a
forall a.
Semigroup a =&gt;
OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; OnSpansExported a -&gt; OnSpansExported a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: forall a.
Semigroup a =&gt;
OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
&lt;&gt; :: OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
$csconcat :: forall a.
Semigroup a =&gt;
NonEmpty (OnSpansExported a) -&gt; OnSpansExported a
sconcat :: NonEmpty (OnSpansExported a) -&gt; OnSpansExported a
$cstimes :: forall a b.
(Semigroup a, Integral b) =&gt;
b -&gt; OnSpansExported a -&gt; OnSpansExported a
stimes :: forall b. Integral b =&gt; b -&gt; OnSpansExported a -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148739"><span id="local-6989586621679148744"><span id="local-6989586621679148749"><span class="annot"><span class="annottext">Semigroup (OnSpansExported a)
OnSpansExported a
Semigroup (OnSpansExported a) =&gt;
OnSpansExported a
-&gt; (OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a)
-&gt; ([OnSpansExported a] -&gt; OnSpansExported a)
-&gt; Monoid (OnSpansExported a)
[OnSpansExported a] -&gt; OnSpansExported a
OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. Monoid a =&gt; Semigroup (OnSpansExported a)
forall a. Monoid a =&gt; OnSpansExported a
forall a. Monoid a =&gt; [OnSpansExported a] -&gt; OnSpansExported a
forall a.
Monoid a =&gt;
OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
$cmempty :: forall a. Monoid a =&gt; OnSpansExported a
mempty :: OnSpansExported a
$cmappend :: forall a.
Monoid a =&gt;
OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
mappend :: OnSpansExported a -&gt; OnSpansExported a -&gt; OnSpansExported a
$cmconcat :: forall a. Monoid a =&gt; [OnSpansExported a] -&gt; OnSpansExported a
mconcat :: [OnSpansExported a] -&gt; OnSpansExported a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span> </span><span class="hs-comment">-- @base@</span><span>
</span><span id="line-1785"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LoggingT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679145028"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1786"></span><span>
</span><span id="line-1787"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpansExported"><span class="hs-identifier hs-type">askSpansExported</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-type">OnSpansExported</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Attrs</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1788"></span><span id="askSpansExported"><span class="annot"><span class="annottext">askSpansExported :: OnSpansExported (Batch (Span Attrs))
</span><a href="OTel.SDK.Trace.Internal.html#askSpansExported"><span class="hs-identifier hs-var hs-var">askSpansExported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Batch (Span Attrs)
 -&gt; SpanExportResult
 -&gt; [SeriesElem]
 -&gt; LoggingT IO (Batch (Span Attrs)))
-&gt; OnSpansExported (Batch (Span Attrs))
forall a.
(Batch (Span Attrs)
 -&gt; SpanExportResult -&gt; [SeriesElem] -&gt; LoggingT IO a)
-&gt; OnSpansExported a
</span><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-var">OnSpansExported</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148760"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679148760"><span class="hs-identifier hs-var">spans</span></a></span></span><span> </span><span id="local-6989586621679148761"><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679148761"><span class="hs-identifier hs-var">_spanExportResult</span></a></span></span><span> </span><span id="local-6989586621679148762"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148762"><span class="hs-identifier hs-var">_pairs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs) -&gt; LoggingT IO (Batch (Span Attrs))
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679148760"><span class="hs-identifier hs-var">spans</span></a></span><span>
</span><span id="line-1789"></span><span>
</span><span id="line-1790"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpansExportedResult"><span class="hs-identifier hs-type">askSpansExportedResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-type">OnSpansExported</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#SpanExportResult"><span class="hs-identifier hs-type">SpanExportResult</span></a></span><span>
</span><span id="line-1791"></span><span id="askSpansExportedResult"><span class="annot"><span class="annottext">askSpansExportedResult :: OnSpansExported SpanExportResult
</span><a href="OTel.SDK.Trace.Internal.html#askSpansExportedResult"><span class="hs-identifier hs-var hs-var">askSpansExportedResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Batch (Span Attrs)
 -&gt; SpanExportResult
 -&gt; [SeriesElem]
 -&gt; LoggingT IO SpanExportResult)
-&gt; OnSpansExported SpanExportResult
forall a.
(Batch (Span Attrs)
 -&gt; SpanExportResult -&gt; [SeriesElem] -&gt; LoggingT IO a)
-&gt; OnSpansExported a
</span><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-var">OnSpansExported</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148763"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679148763"><span class="hs-identifier hs-var">_spans</span></a></span></span><span> </span><span id="local-6989586621679148764"><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679148764"><span class="hs-identifier hs-var">spanExportResult</span></a></span></span><span> </span><span id="local-6989586621679148765"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148765"><span class="hs-identifier hs-var">_pairs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SpanExportResult -&gt; LoggingT IO SpanExportResult
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679148764"><span class="hs-identifier hs-var">spanExportResult</span></a></span><span>
</span><span id="line-1792"></span><span>
</span><span id="line-1793"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#askSpansExportedMetadata"><span class="hs-identifier hs-type">askSpansExportedMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-type">OnSpansExported</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1794"></span><span id="askSpansExportedMetadata"><span class="annot"><span class="annottext">askSpansExportedMetadata :: OnSpansExported [SeriesElem]
</span><a href="OTel.SDK.Trace.Internal.html#askSpansExportedMetadata"><span class="hs-identifier hs-var hs-var">askSpansExportedMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Batch (Span Attrs)
 -&gt; SpanExportResult -&gt; [SeriesElem] -&gt; LoggingT IO [SeriesElem])
-&gt; OnSpansExported [SeriesElem]
forall a.
(Batch (Span Attrs)
 -&gt; SpanExportResult -&gt; [SeriesElem] -&gt; LoggingT IO a)
-&gt; OnSpansExported a
</span><a href="OTel.SDK.Trace.Internal.html#OnSpansExported"><span class="hs-identifier hs-var">OnSpansExported</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679148766"><span class="annot"><span class="annottext">Batch (Span Attrs)
</span><a href="#local-6989586621679148766"><span class="hs-identifier hs-var">_spans</span></a></span></span><span> </span><span id="local-6989586621679148767"><span class="annot"><span class="annottext">SpanExportResult
</span><a href="#local-6989586621679148767"><span class="hs-identifier hs-var">_spanExportResult</span></a></span></span><span> </span><span id="local-6989586621679148768"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148768"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SeriesElem] -&gt; LoggingT IO [SeriesElem]
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679148768"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1795"></span><span>
</span><span id="line-1796"></span><span class="hs-keyword">newtype</span><span> </span><span id="Batch"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-var">Batch</span></a></span></span><span> </span><span id="local-6989586621679145156"><span class="annot"><a href="#local-6989586621679145156"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Batch"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-var">Batch</span></a></span></span><span>
</span><span id="line-1797"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unBatch"><span class="annot"><span class="annottext">forall a. Batch a -&gt; [a]
</span><a href="OTel.SDK.Trace.Internal.html#unBatch"><span class="hs-identifier hs-var hs-var">unBatch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679145156"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1798"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679148772"><span id="local-6989586621679148776"><span class="annot"><span class="annottext">Batch a -&gt; Batch a -&gt; Bool
(Batch a -&gt; Batch a -&gt; Bool)
-&gt; (Batch a -&gt; Batch a -&gt; Bool) -&gt; Eq (Batch a)
forall a. Eq a =&gt; Batch a -&gt; Batch a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall a. Eq a =&gt; Batch a -&gt; Batch a -&gt; Bool
== :: Batch a -&gt; Batch a -&gt; Bool
$c/= :: forall a. Eq a =&gt; Batch a -&gt; Batch a -&gt; Bool
/= :: Batch a -&gt; Batch a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148781"><span id="local-6989586621679148787"><span id="local-6989586621679148791"><span class="annot"><span class="annottext">Int -&gt; Batch a -&gt; ShowS
[Batch a] -&gt; ShowS
Batch a -&gt; [Char]
(Int -&gt; Batch a -&gt; ShowS)
-&gt; (Batch a -&gt; [Char]) -&gt; ([Batch a] -&gt; ShowS) -&gt; Show (Batch a)
forall a. Show a =&gt; Int -&gt; Batch a -&gt; ShowS
forall a. Show a =&gt; [Batch a] -&gt; ShowS
forall a. Show a =&gt; Batch a -&gt; [Char]
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; Batch a -&gt; ShowS
showsPrec :: Int -&gt; Batch a -&gt; ShowS
$cshow :: forall a. Show a =&gt; Batch a -&gt; [Char]
show :: Batch a -&gt; [Char]
$cshowList :: forall a. Show a =&gt; [Batch a] -&gt; ShowS
showList :: [Batch a] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1799"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679148797"><span id="local-6989586621679148801"><span id="local-6989586621679148805"><span class="annot"><span class="annottext">Semigroup (Batch a)
Batch a
Semigroup (Batch a) =&gt;
Batch a
-&gt; (Batch a -&gt; Batch a -&gt; Batch a)
-&gt; ([Batch a] -&gt; Batch a)
-&gt; Monoid (Batch a)
[Batch a] -&gt; Batch a
Batch a -&gt; Batch a -&gt; Batch a
forall a. Semigroup (Batch a)
forall a. Batch a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. [Batch a] -&gt; Batch a
forall a. Batch a -&gt; Batch a -&gt; Batch a
$cmempty :: forall a. Batch a
mempty :: Batch a
$cmappend :: forall a. Batch a -&gt; Batch a -&gt; Batch a
mappend :: Batch a -&gt; Batch a -&gt; Batch a
$cmconcat :: forall a. [Batch a] -&gt; Batch a
mconcat :: [Batch a] -&gt; Batch a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148810"><span id="local-6989586621679148815"><span id="local-6989586621679148821"><span class="annot"><span class="annottext">NonEmpty (Batch a) -&gt; Batch a
Batch a -&gt; Batch a -&gt; Batch a
(Batch a -&gt; Batch a -&gt; Batch a)
-&gt; (NonEmpty (Batch a) -&gt; Batch a)
-&gt; (forall b. Integral b =&gt; b -&gt; Batch a -&gt; Batch a)
-&gt; Semigroup (Batch a)
forall b. Integral b =&gt; b -&gt; Batch a -&gt; Batch a
forall a. NonEmpty (Batch a) -&gt; Batch a
forall a. Batch a -&gt; Batch a -&gt; Batch a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
forall a b. Integral b =&gt; b -&gt; Batch a -&gt; Batch a
$c&lt;&gt; :: forall a. Batch a -&gt; Batch a -&gt; Batch a
&lt;&gt; :: Batch a -&gt; Batch a -&gt; Batch a
$csconcat :: forall a. NonEmpty (Batch a) -&gt; Batch a
sconcat :: NonEmpty (Batch a) -&gt; Batch a
$cstimes :: forall a b. Integral b =&gt; b -&gt; Batch a -&gt; Batch a
stimes :: forall b. Integral b =&gt; b -&gt; Batch a -&gt; Batch a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148828"><span id="local-6989586621679148832"><span id="local-6989586621679148836"><span id="local-6989586621679148840"><span id="local-6989586621679148844"><span class="annot"><span class="annottext">[Batch a] -&gt; Value
[Batch a] -&gt; Encoding
Batch a -&gt; Bool
Batch a -&gt; Value
Batch a -&gt; Encoding
(Batch a -&gt; Value)
-&gt; (Batch a -&gt; Encoding)
-&gt; ([Batch a] -&gt; Value)
-&gt; ([Batch a] -&gt; Encoding)
-&gt; (Batch a -&gt; Bool)
-&gt; ToJSON (Batch a)
forall a. ToJSON a =&gt; [Batch a] -&gt; Value
forall a. ToJSON a =&gt; [Batch a] -&gt; Encoding
forall a. ToJSON a =&gt; Batch a -&gt; Bool
forall a. ToJSON a =&gt; Batch a -&gt; Value
forall a. ToJSON a =&gt; Batch a -&gt; Encoding
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: forall a. ToJSON a =&gt; Batch a -&gt; Value
toJSON :: Batch a -&gt; Value
$ctoEncoding :: forall a. ToJSON a =&gt; Batch a -&gt; Encoding
toEncoding :: Batch a -&gt; Encoding
$ctoJSONList :: forall a. ToJSON a =&gt; [Batch a] -&gt; Value
toJSONList :: [Batch a] -&gt; Value
$ctoEncodingList :: forall a. ToJSON a =&gt; [Batch a] -&gt; Encoding
toEncodingList :: [Batch a] -&gt; Encoding
$comitField :: forall a. ToJSON a =&gt; Batch a -&gt; Bool
omitField :: Batch a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679145156"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1800"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679148850"><span id="local-6989586621679148858"><span id="local-6989586621679148866"><span id="local-6989586621679148872"><span id="local-6989586621679148876"><span id="local-6989586621679148880"><span id="local-6989586621679148884"><span id="local-6989586621679148888"><span id="local-6989586621679148892"><span id="local-6989586621679148896"><span id="local-6989586621679148900"><span id="local-6989586621679148904"><span id="local-6989586621679148910"><span id="local-6989586621679148918"><span id="local-6989586621679148926"><span id="local-6989586621679148934"><span id="local-6989586621679148942"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; Batch m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a)
-&gt; (forall a. Batch a -&gt; [a])
-&gt; (forall a. Batch a -&gt; Bool)
-&gt; (forall a. Batch a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; Batch a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; Batch a -&gt; a)
-&gt; (forall a. Ord a =&gt; Batch a -&gt; a)
-&gt; (forall a. Num a =&gt; Batch a -&gt; a)
-&gt; (forall a. Num a =&gt; Batch a -&gt; a)
-&gt; Foldable Batch
forall a. Eq a =&gt; a -&gt; Batch a -&gt; Bool
forall a. Num a =&gt; Batch a -&gt; a
forall a. Ord a =&gt; Batch a -&gt; a
forall m. Monoid m =&gt; Batch m -&gt; m
forall a. Batch a -&gt; Bool
forall a. Batch a -&gt; Int
forall a. Batch a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; Batch m -&gt; m
fold :: forall m. Monoid m =&gt; Batch m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Batch a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Batch a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Batch a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Batch a -&gt; a
$ctoList :: forall a. Batch a -&gt; [a]
toList :: forall a. Batch a -&gt; [a]
$cnull :: forall a. Batch a -&gt; Bool
null :: forall a. Batch a -&gt; Bool
$clength :: forall a. Batch a -&gt; Int
length :: forall a. Batch a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; Batch a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; Batch a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; Batch a -&gt; a
maximum :: forall a. Ord a =&gt; Batch a -&gt; a
$cminimum :: forall a. Ord a =&gt; Batch a -&gt; a
minimum :: forall a. Ord a =&gt; Batch a -&gt; a
$csum :: forall a. Num a =&gt; Batch a -&gt; a
sum :: forall a. Num a =&gt; Batch a -&gt; a
$cproduct :: forall a. Num a =&gt; Batch a -&gt; a
product :: forall a. Num a =&gt; Batch a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148949"><span id="local-6989586621679148953"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b)
-&gt; (forall a b. a -&gt; Batch b -&gt; Batch a) -&gt; Functor Batch
forall a b. a -&gt; Batch b -&gt; Batch a
forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b
fmap :: forall a b. (a -&gt; b) -&gt; Batch a -&gt; Batch b
$c&lt;$ :: forall a b. a -&gt; Batch b -&gt; Batch a
&lt;$ :: forall a b. a -&gt; Batch b -&gt; Batch a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148959"><span id="local-6989586621679148964"><span id="local-6989586621679148968"><span id="local-6989586621679148972"><span id="local-6989586621679148976"><span class="annot"><span class="annottext">Functor Batch
Functor Batch =&gt;
(forall a. a -&gt; Batch a)
-&gt; (forall a b. Batch (a -&gt; b) -&gt; Batch a -&gt; Batch b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; Batch a -&gt; Batch b -&gt; Batch c)
-&gt; (forall a b. Batch a -&gt; Batch b -&gt; Batch b)
-&gt; (forall a b. Batch a -&gt; Batch b -&gt; Batch a)
-&gt; Applicative Batch
forall a. a -&gt; Batch a
forall a b. Batch a -&gt; Batch b -&gt; Batch a
forall a b. Batch a -&gt; Batch b -&gt; Batch b
forall a b. Batch (a -&gt; b) -&gt; Batch a -&gt; Batch b
forall a b c. (a -&gt; b -&gt; c) -&gt; Batch a -&gt; Batch b -&gt; Batch c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; Batch a
pure :: forall a. a -&gt; Batch a
$c&lt;*&gt; :: forall a b. Batch (a -&gt; b) -&gt; Batch a -&gt; Batch b
&lt;*&gt; :: forall a b. Batch (a -&gt; b) -&gt; Batch a -&gt; Batch b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; Batch a -&gt; Batch b -&gt; Batch c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; Batch a -&gt; Batch b -&gt; Batch c
$c*&gt; :: forall a b. Batch a -&gt; Batch b -&gt; Batch b
*&gt; :: forall a b. Batch a -&gt; Batch b -&gt; Batch b
$c&lt;* :: forall a b. Batch a -&gt; Batch b -&gt; Batch a
&lt;* :: forall a b. Batch a -&gt; Batch b -&gt; Batch a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679148983"><span id="local-6989586621679148988"><span id="local-6989586621679148992"><span class="annot"><span class="annottext">Applicative Batch
Applicative Batch =&gt;
(forall a b. Batch a -&gt; (a -&gt; Batch b) -&gt; Batch b)
-&gt; (forall a b. Batch a -&gt; Batch b -&gt; Batch b)
-&gt; (forall a. a -&gt; Batch a)
-&gt; Monad Batch
forall a. a -&gt; Batch a
forall a b. Batch a -&gt; Batch b -&gt; Batch b
forall a b. Batch a -&gt; (a -&gt; Batch b) -&gt; Batch b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. Batch a -&gt; (a -&gt; Batch b) -&gt; Batch b
&gt;&gt;= :: forall a b. Batch a -&gt; (a -&gt; Batch b) -&gt; Batch b
$c&gt;&gt; :: forall a b. Batch a -&gt; Batch b -&gt; Batch b
&gt;&gt; :: forall a b. Batch a -&gt; Batch b -&gt; Batch b
$creturn :: forall a. a -&gt; Batch a
return :: forall a. a -&gt; Batch a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1801"></span><span>
</span><span id="line-1802"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679149002"><span id="local-6989586621679149008"><span id="local-6989586621679149013"><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1803"></span><span>  </span><span id="local-6989586621679149024"><span class="annot"><span class="annottext">traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Batch a -&gt; f (Batch b)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">traverse</span></span></span><span> </span><span id="local-6989586621679149025"><span class="annot"><span class="annottext">a -&gt; f b
</span><a href="#local-6989586621679149025"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span id="local-6989586621679149026"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679149026"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([b] -&gt; Batch b) -&gt; f [b] -&gt; f (Batch b)
forall a b. (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[b] -&gt; Batch b
forall a. [a] -&gt; Batch a
</span><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-var">Batch</span></a></span><span> </span><span class="annot"><span class="annottext">(f [b] -&gt; f (Batch b)) -&gt; f [b] -&gt; f (Batch b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f b) -&gt; [a] -&gt; f [b]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f b
</span><a href="#local-6989586621679149025"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679149026"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1804"></span><span>
</span><span id="line-1805"></span><span id="local-6989586621679145027"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#singletonBatch"><span class="hs-identifier hs-type">singletonBatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679145027"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145027"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1806"></span><span id="singletonBatch"><span class="annot"><span class="annottext">singletonBatch :: forall a. a -&gt; Batch a
</span><a href="OTel.SDK.Trace.Internal.html#singletonBatch"><span class="hs-identifier hs-var hs-var">singletonBatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Batch a
forall a. [a] -&gt; Batch a
</span><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-var">Batch</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Batch a) -&gt; (a -&gt; [a]) -&gt; a -&gt; Batch a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a]
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-1807"></span><span>
</span><span id="line-1808"></span><span id="local-6989586621679149028"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#fromListBatch"><span class="hs-identifier hs-type">fromListBatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679149028"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-type">Batch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679149028"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1809"></span><span id="fromListBatch"><span class="annot"><span class="annottext">fromListBatch :: forall a. [a] -&gt; Batch a
</span><a href="OTel.SDK.Trace.Internal.html#fromListBatch"><span class="hs-identifier hs-var hs-var">fromListBatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Batch a
forall a. [a] -&gt; Batch a
</span><a href="OTel.SDK.Trace.Internal.html#Batch"><span class="hs-identifier hs-var">Batch</span></a></span><span>
</span><span id="line-1810"></span><span>
</span><span id="line-1811"></span><span class="hs-keyword">data</span><span> </span><span id="ConcurrentWorkersSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier hs-var">ConcurrentWorkersSpec</span></a></span></span><span> </span><span id="local-6989586621679145042"><span class="annot"><a href="#local-6989586621679145042"><span class="hs-identifier hs-type">item</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ConcurrentWorkersSpec"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier hs-var">ConcurrentWorkersSpec</span></a></span></span><span>
</span><span id="line-1812"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="concurrentWorkersSpecQueueSize"><span class="annot"><span class="annottext">forall item. ConcurrentWorkersSpec item -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecQueueSize"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpecQueueSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1813"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="concurrentWorkersSpecWorkerCount"><span class="annot"><span class="annottext">forall item. ConcurrentWorkersSpec item -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecWorkerCount"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpecWorkerCount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1814"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="concurrentWorkersSpecProcessItem"><span class="annot"><span class="annottext">forall item. ConcurrentWorkersSpec item -&gt; item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecProcessItem"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpecProcessItem</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679145042"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1815"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="concurrentWorkersSpecLogger"><span class="annot"><span class="annottext">forall item. ConcurrentWorkersSpec item -&gt; Logger
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLogger"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpecLogger</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Logger</span></span><span>
</span><span id="line-1816"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="concurrentWorkersSpecLoggingMeta"><span class="annot"><span class="annottext">forall item. ConcurrentWorkersSpec item -&gt; [SeriesElem]
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLoggingMeta"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpecLoggingMeta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1817"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="concurrentWorkersSpecOnException"><span class="annot"><span class="annottext">forall item. ConcurrentWorkersSpec item -&gt; item -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecOnException"><span class="hs-identifier hs-var hs-var">concurrentWorkersSpecOnException</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679145042"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OnException</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1818"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1819"></span><span>
</span><span id="line-1820"></span><span id="local-6989586621679145043"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultConcurrentWorkersSpec"><span class="hs-identifier hs-type">defaultConcurrentWorkersSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier hs-type">ConcurrentWorkersSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145043"><span class="hs-identifier hs-type">item</span></a></span></span><span>
</span><span id="line-1821"></span><span id="defaultConcurrentWorkersSpec"><span class="annot"><span class="annottext">defaultConcurrentWorkersSpec :: forall item. ConcurrentWorkersSpec item
</span><a href="OTel.SDK.Trace.Internal.html#defaultConcurrentWorkersSpec"><span class="hs-identifier hs-var hs-var">defaultConcurrentWorkersSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1822"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier hs-type">ConcurrentWorkersSpec</span></a></span><span>
</span><span id="line-1823"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecQueueSize :: Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecQueueSize"><span class="hs-identifier hs-var">concurrentWorkersSpecQueueSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2048</span></span><span>
</span><span id="line-1824"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecWorkerCount :: Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecWorkerCount"><span class="hs-identifier hs-var">concurrentWorkersSpecWorkerCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span>
</span><span id="line-1825"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecProcessItem :: item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecProcessItem"><span class="hs-identifier hs-var">concurrentWorkersSpecProcessItem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">item -&gt; IO ()
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1826"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecLogger :: Logger
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLogger"><span class="hs-identifier hs-var">concurrentWorkersSpecLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1827"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecLoggingMeta :: [SeriesElem]
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLoggingMeta"><span class="hs-identifier hs-var">concurrentWorkersSpecLoggingMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1828"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecOnException :: item -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecOnException"><span class="hs-identifier hs-var">concurrentWorkersSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679149034"><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149034"><span class="hs-identifier hs-var">_item</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1829"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679149046"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679149046"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException SomeException
</span><span class="hs-identifier hs-var">askException</span></span><span>
</span><span id="line-1830"></span><span>        </span><span id="local-6989586621679149047"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149047"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OnException [SeriesElem]
</span><span class="hs-identifier hs-var">askExceptionMetadata</span></span><span>
</span><span id="line-1831"></span><span>        </span><span class="annot"><span class="annottext">Message -&gt; OnException ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; OnException ()) -&gt; Message -&gt; OnException ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Concurrent worker ignoring exception from processing item&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1832"></span><span>          </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679149046"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149047"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1833"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1834"></span><span>
</span><span id="line-1835"></span><span class="hs-keyword">data</span><span> </span><span id="ConcurrentWorkers"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkers"><span class="hs-identifier hs-var">ConcurrentWorkers</span></a></span></span><span> </span><span id="local-6989586621679145085"><span class="annot"><a href="#local-6989586621679145085"><span class="hs-identifier hs-type">item</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ConcurrentWorkers"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkers"><span class="hs-identifier hs-var">ConcurrentWorkers</span></a></span></span><span>
</span><span id="line-1836"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="concurrentWorkersEnqueueItem"><span class="annot"><span class="annottext">forall item. ConcurrentWorkers item -&gt; item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersEnqueueItem"><span class="hs-identifier hs-var hs-var">concurrentWorkersEnqueueItem</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679145085"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1837"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="concurrentWorkersStopWorkers"><span class="annot"><span class="annottext">forall item. ConcurrentWorkers item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersStopWorkers"><span class="hs-identifier hs-var hs-var">concurrentWorkersStopWorkers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1838"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1839"></span><span>
</span><span id="line-1840"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withConcurrentWorkers"><span class="hs-identifier hs-type">withConcurrentWorkers</span></a></span><span>
</span><span id="line-1841"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145083"><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span></span><span> </span><span id="local-6989586621679145084"><span class="annot"><a href="#local-6989586621679145084"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1842"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1843"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier hs-type">ConcurrentWorkersSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span>
</span><span id="line-1844"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkers"><span class="hs-identifier hs-type">ConcurrentWorkers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145084"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1845"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145084"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1846"></span><span id="withConcurrentWorkers"><span class="annot"><span class="annottext">withConcurrentWorkers :: forall item a.
(ToJSON item, Typeable item) =&gt;
ConcurrentWorkersSpec item
-&gt; (ConcurrentWorkers item -&gt; IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#withConcurrentWorkers"><span class="hs-identifier hs-var hs-var">withConcurrentWorkers</span></a></span></span><span> </span><span id="local-6989586621679149114"><span class="annot"><span class="annottext">ConcurrentWorkersSpec item
</span><a href="#local-6989586621679149114"><span class="hs-identifier hs-var">concurrentWorkersSpec</span></a></span></span><span> </span><span id="local-6989586621679149115"><span class="annot"><span class="annottext">ConcurrentWorkers item -&gt; IO a
</span><a href="#local-6989586621679149115"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1847"></span><span>  </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1848"></span><span>    </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Starting concurrent workers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1849"></span><span>  </span><span id="local-6989586621679149118"><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149118"><span class="hs-identifier hs-var">queue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TBMQueue item)
forall a. Int -&gt; IO (TBMQueue a)
</span><span class="hs-identifier hs-var">newTBMQueueIO</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679149119"><span class="hs-identifier hs-var">queueSize</span></a></span><span>
</span><span id="line-1850"></span><span>  </span><span class="annot"><span class="annottext">TBMQueue item -&gt; ([Async ()] -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679149120"><span class="hs-identifier hs-var">withWorkers</span></a></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149118"><span class="hs-identifier hs-var">queue</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679149121"><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149121"><span class="hs-identifier hs-var">workers</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1851"></span><span>    </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1852"></span><span>      </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Concurrent workers started&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1853"></span><span>    </span><span class="annot"><span class="annottext">ConcurrentWorkers item -&gt; IO a
</span><a href="#local-6989586621679149115"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkers"><span class="hs-identifier hs-type">ConcurrentWorkers</span></a></span><span>
</span><span id="line-1854"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersEnqueueItem :: item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersEnqueueItem"><span class="hs-identifier hs-var">concurrentWorkersEnqueueItem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TBMQueue item -&gt; item -&gt; IO ()
</span><a href="#local-6989586621679149122"><span class="hs-identifier hs-var">enqueueItem</span></a></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149118"><span class="hs-identifier hs-var">queue</span></a></span><span>
</span><span id="line-1855"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersStopWorkers :: IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersStopWorkers"><span class="hs-identifier hs-var">concurrentWorkersStopWorkers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TBMQueue item -&gt; [Async ()] -&gt; IO ()
</span><a href="#local-6989586621679149123"><span class="hs-identifier hs-var">stopWorkers</span></a></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149118"><span class="hs-identifier hs-var">queue</span></a></span><span> </span><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149121"><span class="hs-identifier hs-var">workers</span></a></span><span>
</span><span id="line-1856"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1857"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1858"></span><span>  </span><span class="annot"><a href="#local-6989586621679149122"><span class="hs-identifier hs-type">enqueueItem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TBMQueue</span></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1859"></span><span>  </span><span id="local-6989586621679149122"><span class="annot"><span class="annottext">enqueueItem :: TBMQueue item -&gt; item -&gt; IO ()
</span><a href="#local-6989586621679149122"><span class="hs-identifier hs-var hs-var">enqueueItem</span></a></span></span><span> </span><span id="local-6989586621679149124"><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149124"><span class="hs-identifier hs-var">queue</span></a></span></span><span> </span><span id="local-6989586621679149125"><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149125"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1860"></span><span>    </span><span class="annot"><span class="annottext">STM (Maybe Bool) -&gt; IO (Maybe Bool)
forall a. STM a -&gt; IO a
</span><span class="hs-identifier hs-var">atomically</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TBMQueue item -&gt; item -&gt; STM (Maybe Bool)
forall a. TBMQueue a -&gt; a -&gt; STM (Maybe Bool)
</span><span class="hs-identifier hs-var">tryWriteTBMQueue</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149124"><span class="hs-identifier hs-var">queue</span></a></span><span> </span><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149125"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Bool) -&gt; (Maybe Bool -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1861"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1862"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1863"></span><span>        </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1864"></span><span>          </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Dropped item as queue was full&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1865"></span><span>      </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1866"></span><span>        </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1867"></span><span>          </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Dropped item as queue was closed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1868"></span><span>            </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;item&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; item -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149125"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1869"></span><span>
</span><span id="line-1870"></span><span>  </span><span class="annot"><a href="#local-6989586621679149120"><span class="hs-identifier hs-type">withWorkers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TBMQueue</span></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Async</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145084"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679145084"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1871"></span><span>  </span><span id="local-6989586621679149120"><span class="annot"><span class="annottext">withWorkers :: TBMQueue item -&gt; ([Async ()] -&gt; IO a) -&gt; IO a
</span><a href="#local-6989586621679149120"><span class="hs-identifier hs-var hs-var">withWorkers</span></a></span></span><span> </span><span id="local-6989586621679149126"><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149126"><span class="hs-identifier hs-var">queue</span></a></span></span><span> </span><span id="local-6989586621679149127"><span class="annot"><span class="annottext">[Async ()] -&gt; IO a
</span><a href="#local-6989586621679149127"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1872"></span><span>    </span><span class="annot"><span class="annottext">[(Async () -&gt; IO a) -&gt; IO a] -&gt; ([Async ()] -&gt; IO a) -&gt; IO a
forall a b. [(a -&gt; b) -&gt; b] -&gt; ([a] -&gt; b) -&gt; b
</span><a href="OTel.SDK.Trace.Internal.html#withAll"><span class="hs-identifier hs-var">withAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ((Async () -&gt; IO a) -&gt; IO a) -&gt; [(Async () -&gt; IO a) -&gt; IO a]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679149129"><span class="hs-identifier hs-var">workerCount</span></a></span><span> </span><span class="annot"><span class="annottext">(((Async () -&gt; IO a) -&gt; IO a) -&gt; [(Async () -&gt; IO a) -&gt; IO a])
-&gt; ((Async () -&gt; IO a) -&gt; IO a) -&gt; [(Async () -&gt; IO a) -&gt; IO a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (Async () -&gt; IO a) -&gt; IO a
forall a b. IO a -&gt; (Async a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">withAsync</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; (Async () -&gt; IO a) -&gt; IO a)
-&gt; IO () -&gt; (Async () -&gt; IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item -&gt; IO ()
</span><a href="#local-6989586621679149130"><span class="hs-identifier hs-var">mkWorker</span></a></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149126"><span class="hs-identifier hs-var">queue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679149131"><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149131"><span class="hs-identifier hs-var">workers</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1873"></span><span>      </span><span class="annot"><span class="annottext">[Async ()] -&gt; IO a
</span><a href="#local-6989586621679149127"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149131"><span class="hs-identifier hs-var">workers</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO () -&gt; IO a
forall (m :: * -&gt; *) a b.
(HasCallStack, MonadMask m) =&gt;
m a -&gt; m b -&gt; m a
</span><span class="hs-operator hs-var">`finally`</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item -&gt; [Async ()] -&gt; IO ()
</span><a href="#local-6989586621679149123"><span class="hs-identifier hs-var">stopWorkers</span></a></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149126"><span class="hs-identifier hs-var">queue</span></a></span><span> </span><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149131"><span class="hs-identifier hs-var">workers</span></a></span><span>
</span><span id="line-1874"></span><span>
</span><span id="line-1875"></span><span>  </span><span class="annot"><a href="#local-6989586621679149123"><span class="hs-identifier hs-type">stopWorkers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TBMQueue</span></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Async</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1876"></span><span>  </span><span id="local-6989586621679149123"><span class="annot"><span class="annottext">stopWorkers :: TBMQueue item -&gt; [Async ()] -&gt; IO ()
</span><a href="#local-6989586621679149123"><span class="hs-identifier hs-var hs-var">stopWorkers</span></a></span></span><span> </span><span id="local-6989586621679149132"><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149132"><span class="hs-identifier hs-var">queue</span></a></span></span><span> </span><span id="local-6989586621679149133"><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149133"><span class="hs-identifier hs-var">workers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1877"></span><span>    </span><span class="annot"><span class="annottext">STM Bool -&gt; STM (IO ()) -&gt; IO ()
forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var">unlessSTM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TBMQueue item -&gt; STM Bool
forall a. TBMQueue a -&gt; STM Bool
</span><span class="hs-identifier hs-var">isClosedTBMQueue</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149132"><span class="hs-identifier hs-var">queue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1878"></span><span>      </span><span class="annot"><span class="annottext">TBMQueue item -&gt; STM ()
forall a. TBMQueue a -&gt; STM ()
</span><span class="hs-identifier hs-var">closeTBMQueue</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149132"><span class="hs-identifier hs-var">queue</span></a></span><span>
</span><span id="line-1879"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; STM (IO ())
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1880"></span><span>        </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1881"></span><span>          </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logDebug</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Stopping concurrent workers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1882"></span><span>          </span><span class="annot"><span class="annottext">[Async ()] -&gt; (Async () -&gt; LoggingT IO ()) -&gt; LoggingT IO ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="annot"><span class="annottext">[Async ()]
</span><a href="#local-6989586621679149133"><span class="hs-identifier hs-var">workers</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679149134"><span class="annot"><span class="annottext">Async ()
</span><a href="#local-6989586621679149134"><span class="hs-identifier hs-var">worker</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1883"></span><span>            </span><span class="annot"><span class="annottext">IO (Either SomeException ())
-&gt; LoggingT IO (Either SomeException ())
forall a. IO a -&gt; LoggingT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Async () -&gt; IO (Either SomeException ())
forall a. Async a -&gt; IO (Either SomeException a)
</span><span class="hs-identifier hs-var">waitCatch</span></span><span> </span><span class="annot"><span class="annottext">Async ()
</span><a href="#local-6989586621679149134"><span class="hs-identifier hs-var">worker</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingT IO (Either SomeException ())
-&gt; (Either SomeException () -&gt; LoggingT IO ()) -&gt; LoggingT IO ()
forall a b. LoggingT IO a -&gt; (a -&gt; LoggingT IO b) -&gt; LoggingT IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1884"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; LoggingT IO ()
forall a. a -&gt; LoggingT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1885"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span id="local-6989586621679149144"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679149144"><span class="hs-identifier hs-var">ex</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1886"></span><span>                </span><span class="annot"><span class="annottext">Message -&gt; LoggingT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadLogger m) =&gt;
Message -&gt; m ()
</span><span class="hs-identifier hs-var">logError</span></span><span> </span><span class="annot"><span class="annottext">(Message -&gt; LoggingT IO ()) -&gt; Message -&gt; LoggingT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Concurrent worker previously died due to unhandled exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [SeriesElem] -&gt; Message
</span><span class="hs-operator hs-var">:#</span></span><span>
</span><span id="line-1887"></span><span>                  </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exception&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; [Char]
forall e. Exception e =&gt; e -&gt; [Char]
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679149144"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var">loggingMeta</span></a></span><span>
</span><span id="line-1888"></span><span>
</span><span id="line-1889"></span><span>  </span><span class="annot"><a href="#local-6989586621679149130"><span class="hs-identifier hs-type">mkWorker</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TBMQueue</span></span><span> </span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1890"></span><span>  </span><span id="local-6989586621679149130"><span class="annot"><span class="annottext">mkWorker :: TBMQueue item -&gt; IO ()
</span><a href="#local-6989586621679149130"><span class="hs-identifier hs-var hs-var">mkWorker</span></a></span></span><span> </span><span id="local-6989586621679149145"><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149145"><span class="hs-identifier hs-var">queue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679149146"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1891"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1892"></span><span>    </span><span id="local-6989586621679149146"><span class="annot"><span class="annottext">go :: IO ()
</span><a href="#local-6989586621679149146"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1893"></span><span>      </span><span id="local-6989586621679149147"><span class="annot"><span class="annottext">Maybe item
</span><a href="#local-6989586621679149147"><span class="hs-identifier hs-var">mItem</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">STM (Maybe item) -&gt; IO (Maybe item)
forall a. STM a -&gt; IO a
</span><span class="hs-identifier hs-var">atomically</span></span><span> </span><span class="annot"><span class="annottext">(STM (Maybe item) -&gt; IO (Maybe item))
-&gt; STM (Maybe item) -&gt; IO (Maybe item)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item -&gt; STM (Maybe item)
forall a. TBMQueue a -&gt; STM (Maybe a)
</span><span class="hs-identifier hs-var">readTBMQueue</span></span><span> </span><span class="annot"><span class="annottext">TBMQueue item
</span><a href="#local-6989586621679149145"><span class="hs-identifier hs-var">queue</span></a></span><span>
</span><span id="line-1894"></span><span>      </span><span class="annot"><span class="annottext">Maybe item -&gt; (item -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="annot"><span class="annottext">Maybe item
</span><a href="#local-6989586621679149147"><span class="hs-identifier hs-var">mItem</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679149148"><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149148"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1895"></span><span>        </span><span class="annot"><span class="annottext">(LoggingT IO () -&gt; Logger -&gt; IO ())
-&gt; Logger -&gt; LoggingT IO () -&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">LoggingT IO () -&gt; Logger -&gt; IO ()
forall (m :: * -&gt; *) a. LoggingT m a -&gt; Logger -&gt; m a
</span><span class="hs-identifier hs-var">runLoggingT</span></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1896"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; LoggingT IO ()
forall a. IO a -&gt; LoggingT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
</span><span class="hs-identifier hs-var">evaluate</span></span><span> </span><span class="annot"><span class="annottext">(() -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">item -&gt; IO ()
</span><a href="#local-6989586621679149150"><span class="hs-identifier hs-var">processItem</span></a></span><span> </span><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149148"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingT IO ()
-&gt; (SomeException -&gt; LoggingT IO ()) -&gt; LoggingT IO ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadCatch m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchAny`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679149151"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679149151"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1897"></span><span>              </span><span class="annot"><span class="annottext">OnException () -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO ()
forall a.
OnException a -&gt; SomeException -&gt; [SeriesElem] -&gt; LoggingT IO a
</span><span class="hs-identifier hs-var">runOnException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">item -&gt; OnException ()
</span><a href="#local-6989586621679149152"><span class="hs-identifier hs-var">onEx</span></a></span><span> </span><span class="annot"><span class="annottext">item
</span><a href="#local-6989586621679149148"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679149151"><span class="hs-identifier hs-var">someEx</span></a></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149153"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1898"></span><span>        </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679149146"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1899"></span><span>
</span><span id="line-1900"></span><span>  </span><span class="annot"><a href="#local-6989586621679149117"><span class="hs-identifier hs-type">loggingMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SeriesElem</span></span><span class="hs-special">]</span><span>
</span><span id="line-1901"></span><span>  </span><span id="local-6989586621679149117"><span class="annot"><span class="annottext">loggingMeta :: [SeriesElem]
</span><a href="#local-6989586621679149117"><span class="hs-identifier hs-var hs-var">loggingMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1902"></span><span>    </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;itemType&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Char] -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy item -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="annot"><span class="annottext">(Proxy item -&gt; TypeRep) -&gt; Proxy item -&gt; TypeRep
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679145083"><span class="hs-identifier hs-type">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1903"></span><span>      </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;workerCount&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679149129"><span class="hs-identifier hs-var">workerCount</span></a></span><span>
</span><span id="line-1904"></span><span>      </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;queueSize&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; SeriesElem
forall v. ToJSON v =&gt; Key -&gt; v -&gt; SeriesElem
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679149119"><span class="hs-identifier hs-var">queueSize</span></a></span><span>
</span><span id="line-1905"></span><span>      </span><span class="annot"><span class="annottext">SeriesElem -&gt; [SeriesElem] -&gt; [SeriesElem]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149153"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1906"></span><span>
</span><span id="line-1907"></span><span>  </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#ConcurrentWorkersSpec"><span class="hs-identifier hs-type">ConcurrentWorkersSpec</span></a></span><span>
</span><span id="line-1908"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecQueueSize :: forall item. ConcurrentWorkersSpec item -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecQueueSize"><span class="hs-identifier hs-var">concurrentWorkersSpecQueueSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679149119"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679149119"><span class="hs-identifier hs-var">queueSize</span></a></span></span><span>
</span><span id="line-1909"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecWorkerCount :: forall item. ConcurrentWorkersSpec item -&gt; Int
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecWorkerCount"><span class="hs-identifier hs-var">concurrentWorkersSpecWorkerCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679149129"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679149129"><span class="hs-identifier hs-var">workerCount</span></a></span></span><span>
</span><span id="line-1910"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecProcessItem :: forall item. ConcurrentWorkersSpec item -&gt; item -&gt; IO ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecProcessItem"><span class="hs-identifier hs-var">concurrentWorkersSpecProcessItem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679149150"><span class="annot"><span class="annottext">item -&gt; IO ()
</span><a href="#local-6989586621679149150"><span class="hs-identifier hs-var">processItem</span></a></span></span><span>
</span><span id="line-1911"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecLogger :: forall item. ConcurrentWorkersSpec item -&gt; Logger
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLogger"><span class="hs-identifier hs-var">concurrentWorkersSpecLogger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679149116"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621679149116"><span class="hs-identifier hs-var">logger</span></a></span></span><span>
</span><span id="line-1912"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecLoggingMeta :: forall item. ConcurrentWorkersSpec item -&gt; [SeriesElem]
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecLoggingMeta"><span class="hs-identifier hs-var">concurrentWorkersSpecLoggingMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679149153"><span class="annot"><span class="annottext">[SeriesElem]
</span><a href="#local-6989586621679149153"><span class="hs-identifier hs-var">pairs</span></a></span></span><span>
</span><span id="line-1913"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">concurrentWorkersSpecOnException :: forall item. ConcurrentWorkersSpec item -&gt; item -&gt; OnException ()
</span><a href="OTel.SDK.Trace.Internal.html#concurrentWorkersSpecOnException"><span class="hs-identifier hs-var">concurrentWorkersSpecOnException</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679149152"><span class="annot"><span class="annottext">item -&gt; OnException ()
</span><a href="#local-6989586621679149152"><span class="hs-identifier hs-var">onEx</span></a></span></span><span>
</span><span id="line-1914"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConcurrentWorkersSpec item
</span><a href="#local-6989586621679149114"><span class="hs-identifier hs-var">concurrentWorkersSpec</span></a></span><span>
</span><span id="line-1915"></span><span>
</span><span id="line-1916"></span><span id="local-6989586621679144926"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-type">unlessSTM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679144926"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">STM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">STM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144926"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679144926"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1917"></span><span id="unlessSTM"><span class="annot"><span class="annottext">unlessSTM :: forall a. Monoid a =&gt; STM Bool -&gt; STM (IO a) -&gt; IO a
</span><a href="OTel.SDK.Trace.Internal.html#unlessSTM"><span class="hs-identifier hs-var hs-var">unlessSTM</span></a></span></span><span> </span><span id="local-6989586621679149160"><span class="annot"><span class="annottext">STM Bool
</span><a href="#local-6989586621679149160"><span class="hs-identifier hs-var">isShutdownSTM</span></a></span></span><span> </span><span id="local-6989586621679149161"><span class="annot"><span class="annottext">STM (IO a)
</span><a href="#local-6989586621679149161"><span class="hs-identifier hs-var">actionSTM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1918"></span><span>  </span><span class="annot"><span class="annottext">IO (IO a) -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(IO (IO a) -&gt; IO a) -&gt; IO (IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">STM (IO a) -&gt; IO (IO a)
forall a. STM a -&gt; IO a
</span><span class="hs-identifier hs-var">atomically</span></span><span> </span><span class="annot"><span class="annottext">(STM (IO a) -&gt; IO (IO a)) -&gt; STM (IO a) -&gt; IO (IO a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">STM Bool
</span><a href="#local-6989586621679149160"><span class="hs-identifier hs-var">isShutdownSTM</span></a></span><span> </span><span class="annot"><span class="annottext">STM Bool -&gt; (Bool -&gt; STM (IO a)) -&gt; STM (IO a)
forall a b. STM a -&gt; (a -&gt; STM b) -&gt; STM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1919"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; STM (IO a)
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">IO a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1920"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">STM (IO a)
</span><a href="#local-6989586621679149161"><span class="hs-identifier hs-var">actionSTM</span></a></span><span>
</span><span id="line-1921"></span><span>
</span><span id="line-1922"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#withAll"><span class="hs-identifier hs-type">withAll</span></a></span><span>
</span><span id="line-1923"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679145711"><span class="annot"><a href="#local-6989586621679145711"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679145712"><span class="annot"><a href="#local-6989586621679145712"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1924"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679145711"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679145712"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679145712"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1925"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679145711"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679145712"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1926"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679145712"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1927"></span><span id="withAll"><span class="annot"><span class="annottext">withAll :: forall a b. [(a -&gt; b) -&gt; b] -&gt; ([a] -&gt; b) -&gt; b
</span><a href="OTel.SDK.Trace.Internal.html#withAll"><span class="hs-identifier hs-var hs-var">withAll</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cont b [a] -&gt; ([a] -&gt; b) -&gt; b
forall r a. Cont r a -&gt; (a -&gt; r) -&gt; r
</span><span class="hs-identifier hs-var">runCont</span></span><span> </span><span class="annot"><span class="annottext">(Cont b [a] -&gt; ([a] -&gt; b) -&gt; b)
-&gt; ([(a -&gt; b) -&gt; b] -&gt; Cont b [a])
-&gt; [(a -&gt; b) -&gt; b]
-&gt; ([a] -&gt; b)
-&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(((a -&gt; b) -&gt; b) -&gt; ContT b Identity a)
-&gt; [(a -&gt; b) -&gt; b] -&gt; Cont b [a]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; b) -&gt; ContT b Identity a
forall a r. ((a -&gt; r) -&gt; r) -&gt; Cont r a
</span><span class="hs-identifier hs-var">cont</span></span><span>
</span><span id="line-1928"></span><span>
</span><span id="line-1929"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSystemSeed"><span class="hs-identifier hs-type">defaultSystemSeed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Seed</span></span><span>
</span><span id="line-1930"></span><span id="defaultSystemSeed"><span class="annot"><span class="annottext">defaultSystemSeed :: Seed
</span><a href="OTel.SDK.Trace.Internal.html#defaultSystemSeed"><span class="hs-identifier hs-var hs-var">defaultSystemSeed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Seed -&gt; Seed
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">IO Seed
</span><span class="hs-identifier hs-var">createSystemSeed</span></span><span>
</span><span id="line-1931"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultSystemSeed"><span class="hs-pragma hs-type">defaultSystemSeed</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1932"></span><span>
</span><span id="line-1933"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultManager"><span class="hs-identifier hs-type">defaultManager</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Manager</span></span><span>
</span><span id="line-1934"></span><span id="defaultManager"><span class="annot"><span class="annottext">defaultManager :: Manager
</span><a href="OTel.SDK.Trace.Internal.html#defaultManager"><span class="hs-identifier hs-var hs-var">defaultManager</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Manager -&gt; Manager
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">IO Manager
forall (m :: * -&gt; *). MonadIO m =&gt; m Manager
</span><span class="hs-identifier hs-var">newTlsManager</span></span><span>
</span><span id="line-1935"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#defaultManager"><span class="hs-pragma hs-type">defaultManager</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1936"></span><span>
</span><span id="line-1937"></span><span id="local-6989586621679145023"><span class="annot"><a href="OTel.SDK.Trace.Internal.html#spanSummary"><span class="hs-identifier hs-type">spanSummary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Span</span></span><span> </span><span class="annot"><a href="#local-6989586621679145023"><span class="hs-identifier hs-type">attrs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span><span>
</span><span id="line-1938"></span><span id="spanSummary"><span class="annot"><span class="annottext">spanSummary :: forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; Value
</span><a href="OTel.SDK.Trace.Internal.html#spanSummary"><span class="hs-identifier hs-var hs-var">spanSummary</span></a></span></span><span> </span><span id="local-6989586621679149175"><span class="annot"><span class="annottext">Span attrs
</span><a href="#local-6989586621679149175"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1939"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-1940"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;lineage&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SpanLineage -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Span attrs -&gt; SpanLineage
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanLineage
</span><span class="hs-identifier hs-var">spanLineage</span></span><span> </span><span class="annot"><span class="annottext">Span attrs
</span><a href="#local-6989586621679149175"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1941"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;spanContext&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SpanContext -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Span attrs -&gt; SpanContext
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanContext
</span><span class="hs-identifier hs-var">spanContext</span></span><span> </span><span class="annot"><span class="annottext">Span attrs
</span><a href="#local-6989586621679149175"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1942"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;name&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SpanName -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Span attrs -&gt; SpanName
forall (attrs :: AttrsFor -&gt; *). Span attrs -&gt; SpanName
</span><span class="hs-identifier hs-var">spanName</span></span><span> </span><span class="annot"><span class="annottext">Span attrs
</span><a href="#local-6989586621679149175"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1943"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1944"></span><span>
</span><span id="line-1945"></span><span class="annot"><a href="OTel.SDK.Trace.Internal.html#redactHttpExceptionHeaders"><span class="hs-identifier hs-type">redactHttpExceptionHeaders</span></a></span><span>
</span><span id="line-1946"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span>
</span><span id="line-1947"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span>
</span><span id="line-1948"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span>
</span><span id="line-1949"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span>
</span><span id="line-1950"></span><span id="redactHttpExceptionHeaders"><span class="annot"><span class="annottext">redactHttpExceptionHeaders :: Set HeaderName -&gt; Set HeaderName -&gt; SomeException -&gt; SomeException
</span><a href="OTel.SDK.Trace.Internal.html#redactHttpExceptionHeaders"><span class="hs-identifier hs-var hs-var">redactHttpExceptionHeaders</span></a></span></span><span> </span><span id="local-6989586621679149176"><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679149176"><span class="hs-identifier hs-var">redactsForReq</span></a></span></span><span> </span><span id="local-6989586621679149177"><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679149177"><span class="hs-identifier hs-var">redactsForResp</span></a></span></span><span> </span><span id="local-6989586621679149178"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679149178"><span class="hs-identifier hs-var">someEx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1951"></span><span>  </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe SomeException -&gt; SomeException
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679149178"><span class="hs-identifier hs-var">someEx</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1952"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">HttpExceptionRequest</span></span><span> </span><span id="local-6989586621679149179"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679149179"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span id="local-6989586621679149180"><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679149180"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe HttpException
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679149178"><span class="hs-identifier hs-var">someEx</span></a></span><span>
</span><span id="line-1953"></span><span>    </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe SomeException
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Maybe SomeException)
-&gt; SomeException -&gt; Maybe SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HttpException -&gt; SomeException
forall e. Exception e =&gt; e -&gt; SomeException
</span><span class="hs-identifier hs-var">toException</span></span><span> </span><span class="annot"><span class="annottext">(HttpException -&gt; SomeException) -&gt; HttpException -&gt; SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; HttpExceptionContent -&gt; HttpException
</span><a href="#local-6989586621679149182"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679149179"><span class="hs-identifier hs-var">req</span></a></span><span> </span><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679149180"><span class="hs-identifier hs-var">content</span></a></span><span>
</span><span id="line-1954"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1955"></span><span>  </span><span class="annot"><a href="#local-6989586621679149182"><span class="hs-identifier hs-type">go</span></a></span><span>
</span><span id="line-1956"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span>
</span><span id="line-1957"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HttpExceptionContent</span></span><span>
</span><span id="line-1958"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HttpException</span></span><span>
</span><span id="line-1959"></span><span>  </span><span id="local-6989586621679149182"><span class="annot"><span class="annottext">go :: Request -&gt; HttpExceptionContent -&gt; HttpException
</span><a href="#local-6989586621679149182"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679149183"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679149183"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span id="local-6989586621679149184"><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679149184"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1960"></span><span>    </span><span class="annot"><span class="annottext">Request -&gt; HttpExceptionContent -&gt; HttpException
</span><span class="hs-identifier hs-var">HttpExceptionRequest</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; Request
</span><a href="#local-6989586621679149185"><span class="hs-identifier hs-var">redactReqHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679149183"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1961"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679149184"><span class="hs-identifier hs-var">content</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1962"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">StatusCodeException</span></span><span> </span><span id="local-6989586621679149186"><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679149186"><span class="hs-identifier hs-var">resp</span></a></span></span><span> </span><span id="local-6989586621679149187"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679149187"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1963"></span><span>          </span><span class="annot"><span class="annottext">Response () -&gt; ByteString -&gt; HttpExceptionContent
</span><span class="hs-identifier hs-var">StatusCodeException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Response () -&gt; Response ()
forall a. Response a -&gt; Response a
</span><a href="#local-6989586621679149188"><span class="hs-identifier hs-var">redactRespHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">Response ()
</span><a href="#local-6989586621679149186"><span class="hs-identifier hs-var">resp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679149187"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1964"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">TooManyRedirects</span></span><span> </span><span id="local-6989586621679149190"><span class="annot"><span class="annottext">[Response ByteString]
</span><a href="#local-6989586621679149190"><span class="hs-identifier hs-var">resps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1965"></span><span>          </span><span class="annot"><span class="annottext">[Response ByteString] -&gt; HttpExceptionContent
</span><span class="hs-identifier hs-var">TooManyRedirects</span></span><span> </span><span class="annot"><span class="annottext">([Response ByteString] -&gt; HttpExceptionContent)
-&gt; [Response ByteString] -&gt; HttpExceptionContent
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Response ByteString -&gt; Response ByteString)
-&gt; [Response ByteString] -&gt; [Response ByteString]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Response ByteString -&gt; Response ByteString
forall a. Response a -&gt; Response a
</span><a href="#local-6989586621679149188"><span class="hs-identifier hs-var">redactRespHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">[Response ByteString]
</span><a href="#local-6989586621679149190"><span class="hs-identifier hs-var">resps</span></a></span><span>
</span><span id="line-1966"></span><span>        </span><span id="local-6989586621679149191"><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679149191"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HttpExceptionContent
</span><a href="#local-6989586621679149191"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1967"></span><span>
</span><span id="line-1968"></span><span>  </span><span class="annot"><a href="#local-6989586621679149185"><span class="hs-identifier hs-type">redactReqHeaders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span>
</span><span id="line-1969"></span><span>  </span><span id="local-6989586621679149185"><span class="annot"><span class="annottext">redactReqHeaders :: Request -&gt; Request
</span><a href="#local-6989586621679149185"><span class="hs-identifier hs-var hs-var">redactReqHeaders</span></a></span></span><span> </span><span id="local-6989586621679149192"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679149192"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1970"></span><span>    </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679149192"><span class="hs-identifier hs-var">req</span></a></span><span>
</span><span id="line-1971"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestHeaders</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1972"></span><span>          </span><span class="annot"><a href="#local-6989586621679149193"><span class="hs-identifier hs-type">redactSensitiveHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679149176"><span class="hs-identifier hs-type">redactsForReq</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestHeaders</span></span><span> </span><span class="annot"><a href="#local-6989586621679149192"><span class="hs-identifier hs-type">req</span></a></span><span>
</span><span id="line-1973"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1974"></span><span>
</span><span id="line-1975"></span><span>  </span><span id="local-6989586621679145745"><span class="annot"><a href="#local-6989586621679149188"><span class="hs-identifier hs-type">redactRespHeaders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span> </span><span class="annot"><a href="#local-6989586621679145745"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span> </span><span class="annot"><a href="#local-6989586621679145745"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1976"></span><span>  </span><span id="local-6989586621679149188"><span class="annot"><span class="annottext">redactRespHeaders :: forall a. Response a -&gt; Response a
</span><a href="#local-6989586621679149188"><span class="hs-identifier hs-var hs-var">redactRespHeaders</span></a></span></span><span> </span><span id="local-6989586621679149196"><span class="annot"><span class="annottext">Response a
</span><a href="#local-6989586621679149196"><span class="hs-identifier hs-var">resp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1977"></span><span>    </span><span class="annot"><span class="annottext">Response a
</span><a href="#local-6989586621679149196"><span class="hs-identifier hs-var">resp</span></a></span><span>
</span><span id="line-1978"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">responseHeaders</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1979"></span><span>          </span><span class="annot"><a href="#local-6989586621679149193"><span class="hs-identifier hs-type">redactSensitiveHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679149177"><span class="hs-identifier hs-type">redactsForResp</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-var">responseHeaders</span></span><span> </span><span class="annot"><a href="#local-6989586621679149196"><span class="hs-identifier hs-type">resp</span></a></span><span>
</span><span id="line-1980"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">responseOriginalRequest</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1981"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-var">responseOriginalRequest</span></span><span> </span><span class="annot"><a href="#local-6989586621679149196"><span class="hs-identifier hs-type">resp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1982"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestHeaders</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1983"></span><span>                </span><span class="annot"><a href="#local-6989586621679149193"><span class="hs-identifier hs-type">redactSensitiveHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679149176"><span class="hs-identifier hs-type">redactsForReq</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-var">requestHeaders</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-var">responseOriginalRequest</span></span><span> </span><span class="annot"><a href="#local-6989586621679149196"><span class="hs-identifier hs-type">resp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1984"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1985"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1986"></span><span>
</span><span id="line-1987"></span><span>  </span><span class="hs-comment">-- This function exists in @Network.HTTP.Client.Types@ but is not exported. We</span><span>
</span><span id="line-1988"></span><span>  </span><span class="hs-comment">-- inline it here and use it rather than relying on the user having</span><span>
</span><span id="line-1989"></span><span>  </span><span class="hs-comment">-- @http-client.0.7.13@ which would let us use @redactHeaders@ on the request</span><span>
</span><span id="line-1990"></span><span>  </span><span class="hs-comment">-- directly. There also isn't a @Response@ analogue of @redactHeaders@, so</span><span>
</span><span id="line-1991"></span><span>  </span><span class="hs-comment">-- we'd need a more general-purpose function like @redactSensitiveHeader@</span><span>
</span><span id="line-1992"></span><span>  </span><span class="hs-comment">-- anyways.</span><span>
</span><span id="line-1993"></span><span>  </span><span class="annot"><a href="#local-6989586621679149193"><span class="hs-identifier hs-type">redactSensitiveHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span>
</span><span id="line-1994"></span><span>  </span><span id="local-6989586621679149193"><span class="annot"><span class="annottext">redactSensitiveHeader :: Set HeaderName -&gt; Header -&gt; Header
</span><a href="#local-6989586621679149193"><span class="hs-identifier hs-var hs-var">redactSensitiveHeader</span></a></span></span><span> </span><span id="local-6989586621679149197"><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679149197"><span class="hs-identifier hs-var">toRedact</span></a></span></span><span> </span><span id="local-6989586621679149198"><span class="annot"><span class="annottext">h :: Header
</span><a href="#local-6989586621679149198"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621679149199"><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621679149199"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1995"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621679149199"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; Set HeaderName -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.member`</span></span><span> </span><span class="annot"><span class="annottext">Set HeaderName
</span><a href="#local-6989586621679149197"><span class="hs-identifier hs-var">toRedact</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-1996"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HeaderName
</span><a href="#local-6989586621679149199"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;&lt;REDACTED&gt;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1997"></span><span>    </span><span class="hs-keyword">else</span><span>
</span><span id="line-1998"></span><span>      </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621679149198"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-1999"></span><span>
</span><span id="line-2000"></span><span class="hs-comment">-- $disclaimer</span><span>
</span><span id="line-2001"></span><span class="hs-comment">--</span><span>
</span><span id="line-2002"></span><span class="hs-comment">-- In general, changes to this module will not be reflected in the library's</span><span>
</span><span id="line-2003"></span><span class="hs-comment">-- version updates. Direct use of this module should be done with utmost care,</span><span>
</span><span id="line-2004"></span><span class="hs-comment">-- otherwise invariants will easily be violated.</span><span>
</span><span id="line-2005"></span></pre></body></html>